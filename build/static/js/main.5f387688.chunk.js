(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(module,__webpack_exports__,__webpack_require__){"use strict";function getLonLat(e,t){return t.map(function(t,a){var r=e[t].toString().match(/[-+]?[0-9]*\.?[0-9]*/);if(r){var n=r[0].toString().match(/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)$|^[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+))$/);if(n){if(isNaN(n[0]))throw"Invalid lon/lat values";return n[0]}throw"Invalid lon/lat values"}throw"Invalid lon/lat values"})}function tableToGeoData(view){view.spec=view.spec||{},view.resources[0].schema=view.resources[0].schema||{fields:[]};var geoData={type:"FeatureCollection",features:[]};if(view.resources[0]._values&&view.resources[0]._values.forEach(function(data){var feature,geometryFieldNames=["geojson","geom","the_geom","geometry","spatial","location","geo","lonlat"],geometryField=view.resources[0].schema.fields.find(function(e){return geometryFieldNames.includes(e.name.toLowerCase())});if(geometryField)feature=getGeometryFromRecord(data[geometryField.name]);else{if(feature={type:"Feature",geometry:{type:"Point",coordinates:[]},properties:{name:""}},view.spec.lonField&&view.spec.latField)try{feature.geometry.coordinates=getLonLat(data,[view.spec.lonField,view.spec.latField])}catch(e){return void console.warn(e)}else{var geopointField=view.resources[0].schema.fields.find(function(e){return"geopoint"===e.type});if(geopointField)"default"===geopointField.format?feature.geometry.coordinates=data[geopointField.name].split(",").map(function(e){return e.trim()}):"array"===geopointField.format?feature.geometry.coordinates=data[geopointField.name]:"object"===geopointField.format&&(feature.geometry.coordinates=[data[geopointField.name].lon,data[geopointField.name].lat]);else{var latitudeFieldNames=["lat","latitude"],longitudeFieldNames=["lon","longitude"],latField=view.resources[0].schema.fields.find(function(e){return latitudeFieldNames.includes(e.name.toLowerCase())}),lonField=view.resources[0].schema.fields.find(function(e){return longitudeFieldNames.includes(e.name.toLowerCase())});if(!latField||!lonField)throw"No geo data found";feature.geometry.coordinates=[data[lonField.name],data[latField.name]]}}view.spec.infobox&&(feature.properties.name=eval("`"+view.spec.infobox+"`"))}geoData.features.push(feature)}),0===geoData.features.length)throw"No geodata on resource";return geoData}function getGeometryFromRecord(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(n){}if("string"===typeof e){var t=(e=e.replace("(","").replace(")","")).split(","),a=parseCoordinateString(t[0]),r=parseCoordinateString(t[1]);return isNaN(r)||isNaN(parseFloat(a))?null:{type:"Point",coordinates:[r,a]}}return e&&"Array"===e.constructor.name?{type:"Point",coordinates:[e[0],e[1]]}:e&&e.lat?{type:"Point",coordinates:[e.lon||e.lng,e.lat]}:e}function parseCoordinateString(e){if("string"!=typeof e)return parseFloat(e);var t,a=e.split(/[^-?\.\d\w]+/),r=0,n=0,o=[1,60,3600];for(t=0;t<a.length;++t)isNaN(parseFloat(a[t]))||(r+=parseFloat(a[t])/o[n],n+=1);return e.match(/[SW]/)&&(r*=-1),r}__webpack_exports__.a=tableToGeoData},37:function(e,t,a){e.exports=a(88)},42:function(e,t){},43:function(e,t){},48:function(e,t,a){},49:function(e,t,a){},55:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),o=a(23),i=a.n(o),s=(a(48),a(49),a(24)),c=a(25),l=a(35),u=a(26),p=a(36),d=a(34),m=(a(50),a(51),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateData=function(e){a.setState({data:e})},a.getFieldObject=function(e){return a.state.schema.fields?a.state.schema.fields.find(function(t){return t.name===e}):null},a.state={data:a.props.data,schema:Object.assign({},a.props.schema)},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(d.a,{data:this.state.data,columns:Object.keys(this.state.data[0]).map(function(t){return{Header:e.getFieldObject(t)&&e.getFieldObject(t).title||t,accessor:t,Cell:function(a){return n.a.createElement("div",{className:e.getFieldObject(t)?e.getFieldObject(t).type:""},n.a.createElement("span",null,a.value))}}}),getTheadThProps:function(){return{style:{wordWrap:"break-word",whiteSpace:"initial"}}},showPagination:!1})}}]),t}(n.a.Component)),f=a(4),v=a.n(f),g=a(90),h=a(92),y=a(91);a(55);delete v.a.Icon.Default.prototype._getIconUrl,v.a.Icon.Default.mergeOptions({iconRetinaUrl:a(56),iconUrl:a(57),shadowUrl:a(58)});var w=function(e){var t=v.a.geoJSON(e.data).getBounds();if(!e.data.features||e.data.features.length<2||Object({NODE_ENV:"production",PUBLIC_URL:""}).JEST_WORKER_ID){var a=t.getCenter();return a=[a.lat,a.lng],n.a.createElement(g.a,{center:a,zoom:10,style:{width:"100%",height:450}},n.a.createElement(h.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.a.createElement(y.a,{data:e.data,onEachFeature:E}))}return n.a.createElement(g.a,{bounds:t,style:{width:"100%",height:450}},n.a.createElement(h.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.a.createElement(y.a,{data:e.data,onEachFeature:E}))};function E(e,t){e.properties&&e.properties.name&&t.bindPopup(e.properties.name)}var b=a(10),N=a(29),F=function(e){var t=Object(r.useState)(1),a=Object(b.a)(t,2),o=a[0],i=a[1],s=Object(r.useState)(null),c=Object(b.a)(s,2),l=c[0],u=c[1],p=Object(r.useRef)(null),d=Object(N.a)({file:e.file,page:o,canvasEl:p}),m=Object(b.a)(d,2),f=m[0],v=m[1];return Object(r.useEffect)(function(){u(v)},[v]),n.a.createElement("div",null,f&&n.a.createElement("span",null,"Loading..."),n.a.createElement("canvas",{ref:p}),function(e,t){if(!t)return null;var a=n.a.createElement("li",{className:"previous",onClick:function(){return i(e-1)}},n.a.createElement("a",{href:"#previous"},n.a.createElement("i",{className:"arrow-left"})," Previous"));1===e&&(a=n.a.createElement("li",{className:"previous disabled"},n.a.createElement("a",{href:"#previous"},n.a.createElement("i",{className:"arrow-left"})," Previous")));var r=n.a.createElement("li",{className:"next",onClick:function(){return i(e+1)}},n.a.createElement("a",{href:"#next"},"Next ",n.a.createElement("i",{className:"arrow-right"})));return e===t&&(r=n.a.createElement("li",{className:"next disabled"},n.a.createElement("a",{href:"#next"},"Next ",n.a.createElement("i",{className:"arrow-right"})))),n.a.createElement("nav",null,n.a.createElement("ul",{className:"pager"},a,r))}(o,l))},O=a(30),_=a.n(O),j=a(31),D=a.n(j),T=function(e){var t=D()(_.a);return e.spec.config&&e.spec.config.displaylogo||(e.spec.config=Object.assign(e.spec.config||{},{displaylogo:!1})),n.a.createElement(t,e.spec)},x=a(13),S=a(32),k=a.n(S),C=a(33);function P(e){if(e.loading)return n.a.createElement("div",{className:"App"},n.a.createElement(k.a,{type:"Grid",color:"#D3D3D3",height:"50",width:"50"}));var t=e.datapackage.views?e.datapackage.views.length:0;if(0===t)return n.a.createElement("div",{className:"App"},"No views available");for(var a=0;a<t;a++){var r=e.datapackage.views[a];if(!r.resources[0]._values&&r.resources[0].data&&(r.resources[0]._values=r.resources[0].data),"table"===r.specType&&r.resources[0]._values){var o=Object(x.getResourceCachedValues)(r.resources[0],!0),s=r.resources[0].schema||{};return n.a.createElement("div",{className:"App"},n.a.createElement(m,{data:o,schema:s}))}if("map"===r.specType&&r.resources[0]._values)return n.a.createElement("div",{className:"App"},n.a.createElement(w,{data:r.resources[0]._values}));if("tabularmap"===r.specType&&r.resources[0]._values){var c=void 0;try{return c=Object(C.a)(r),n.a.createElement("div",{className:"App"},n.a.createElement(w,{data:c}))}catch(f){return n.a.createElement("div",{className:f})}}else{if("document"===r.specType)return n.a.createElement("div",{className:"App"},n.a.createElement(F,{file:r.resources[0].path}));if("simple"===r.specType){var l=void 0;try{if(l=Object(x.simpleToPlotly)(r))return n.a.createElement("div",{className:"App"},n.a.createElement(T,{spec:l}))}catch(f){return n.a.createElement("div",{className:f})}}else if("plotly"===r.specType){var u=void 0;try{if(u=Object(x.plotlyToPlotly)(r))return n.a.createElement("div",{className:"App"},n.a.createElement(T,{spec:u}))}catch(f){return n.a.createElement("div",{className:f})}}else if("vega"===r.specType){var p=void 0;try{return p=Object(x.vegaToVega)(r),n.a.createElement(i.a,{spec:p})}catch(f){return n.a.createElement("div",{className:f})}}else{if("web"===r.specType){var d=r.page_url||r.resources[0].path;return n.a.createElement("div",{className:"App"},n.a.createElement("iframe",{src:d,width:"100%",height:"475px"},'Your browser doesn\'t support "iframe".'))}if(r.resources[0].unavailable||"unsupported"===r.specType)return n.a.createElement("div",{className:"App"},n.a.createElement("p",null,"Data view unavailable."),n.a.createElement("a",{href:r.resources[0].path,className:"text-primary font-bold"},"Download the data."))}}}}a.d(t,"DataView",function(){return P}),window.DatapackageView=P}},[[37,1,2]]]);
//# sourceMappingURL=main.5f387688.chunk.js.map