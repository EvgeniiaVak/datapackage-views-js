(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(t,e,n){"use strict";var r=function(t,e,n){return t.fields=e||[],t.fname=n,t};function i(t){return null==t?null:t.fname}function a(t){return null==t?null:t.fields}var o=function(t){throw Error(t)},s=function(t){var e,n,r,i=[],a=null,s=0,u=t.length,l="";function c(){i.push(l+t.substring(e,n)),l="",e=n+1}for(t+="",e=n=0;n<u;++n)if("\\"===(r=t[n]))l+=t.substring(e,n),e=++n;else if(r===a)c(),a=null,s=-1;else{if(a)continue;e===s&&'"'===r?(e=n+1,a=r):e===s&&"'"===r?(e=n+1,a=r):"."!==r||s?"["===r?(n>e&&c(),s=e=n+1):"]"===r&&(s||o("Access path missing open bracket: "+t),s>0&&c(),s=0,e=n+1):n>e?c():e=n+1}return s&&o("Access path missing closing bracket: "+t),a&&o("Access path missing closing quote: "+t),n>e&&(n++,c()),i},u=Array.isArray,l=function(t){return t===Object(t)},c=function(t){return"string"===typeof t};function f(t){return u(t)?"["+t.map(f)+"]":l(t)||c(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var d=function(t,e){var n=s(t),i="return _["+n.map(f).join("][")+"];";return r(Function("_",i),[t=1===n.length?n[0]:t],e||t)},h=[],p=d("id"),v=r(function(t){return t},h,"identity"),g=r(function(){return 0},h,"zero"),m=r(function(){return 1},h,"one"),y=r(function(){return!0},h,"true"),b=r(function(){return!1},h,"false");function _(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var x=function(t,e){var n=t||0;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=1&&_(e||"error","ERROR",arguments),this},warn:function(){return n>=2&&_(e||"warn","WARN",arguments),this},info:function(){return n>=3&&_(e||"log","INFO",arguments),this},debug:function(){return n>=4&&_(e||"log","DEBUG",arguments),this}}},w=function(t){return t[t.length-1]},A=function(t){return null==t||""===t?null:+t};function k(t){return function(e){return t*Math.exp(e)}}function M(t){return function(e){return Math.log(t*e)}}function T(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function S(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function C(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function E(t,e,n,r){var i=n(t[0]),a=n(w(t)),o=(a-i)*e;return[r(i-o),r(a-o)]}function O(t,e){return E(t,e,A,v)}function P(t,e){var n=Math.sign(t[0]);return E(t,e,M(n),k(n))}function L(t,e,n){return E(t,e,C(n),C(1/n))}function R(t,e,n){return E(t,e,T(n),S(n))}function D(t,e,n,r,i){var a=r(t[0]),o=r(w(t)),s=null!=e?r(e):(a+o)/2;return[i(s+(a-s)*n),i(s+(o-s)*n)]}function F(t,e,n){return D(t,e,n,A,v)}function j(t,e,n){var r=Math.sign(t[0]);return D(t,e,n,M(r),k(r))}function N(t,e,n,r){return D(t,e,n,C(r),C(1/r))}function z(t,e,n,r){return D(t,e,n,T(r),S(r))}function I(t){return 1+~~(new Date(t).getMonth()/3)}function B(t){return 1+~~(new Date(t).getUTCMonth()/3)}var q=function(t){return null!=t?u(t)?t:[t]:[]},U=function(t,e,n){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]},H=function(t){return"function"===typeof t},W=function(t,e){var n,i,o,u,l,c,d,h,p,v=[],g=(t=q(t)).map(function(t,e){return null==t?null:(v.push(e),H(t)?t:s(t).map(f).join("]["))}),m=v.length-1,y=q(e),b="var u,v;return ";if(m<0)return null;for(i=0;i<=m;++i)o=g[n=v[i]],H(o)?(u="(u=this."+(c="f"+n)+"(a))",l="(v=this."+c+"(b))",(d=d||{})[c]=o):(u="(u=a["+o+"])",l="(v=b["+o+"])"),c="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?(p=1,h=-1):(p=-1,h=1),b+="("+u+"<"+l+"||u==null)&&v!=null?"+h+":(u>v||v==null)&&u!=null?"+p+":"+c+"!==u&&v===v?"+h+":v!==v&&u===u?"+p+(n<m?":":":0");return o=Function("a","b",b+";"),d&&(o=o.bind(d)),t=t.reduce(function(t,e){return H(e)?(a(e)||[]).forEach(function(e){t[e]=1}):null!=e&&(t[e+""]=1),t},{}),r(o,Object.keys(t))},G=function(t){return H(t)?t:function(){return t}},V=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},Y=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t},Z=function(t,e){var n,r,i,a,o=0;if(t&&(n=t.length))if(null==e){for(r=t[o];null==r||r!==r;r=t[++o]);for(i=a=r;o<n;++o)null!=(r=t[o])&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=e(t[o]);null==r||r!==r;r=e(t[++o]));for(i=a=r;o<n;++o)null!=(r=e(t[o]))&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]},X=function(t,e){var n,r,i,a,o,s=-1,u=t.length;if(null==e){for(;++s<u;)if(null!=(r=t[s])&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=t[s])&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}else{for(;++s<u;)if(null!=(r=e(t[s],s,t))&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=e(t[s],s,t))&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}return[a,o]},$=Object.prototype.hasOwnProperty,J=function(t,e){return $.call(t,e)},K={},Q=function(t){var e,n,r={};function i(t){return J(r,t)&&r[t]!==K}return e={size:0,empty:0,object:r,has:i,get:function(t){return i(t)?r[t]:void 0},set:function(t,n){return i(t)||(++e.size,r[t]===K&&--e.empty),r[t]=n,this},delete:function(t){return i(t)&&(--e.size,++e.empty,r[t]=K),this},clear:function(){e.size=e.empty=0,e.object=r={}},test:function(t){return arguments.length?(n=t,e):n},clean:function(){var t,i,a={},o=0;for(t in r)(i=r[t])===K||n&&n(i)||(a[t]=i,++o);e.size=o,e.empty=0,e.object=r=a}},t&&Object.keys(t).forEach(function(n){e.set(n,t[n])}),e},tt=function(t,e,n,r,i,a){if(!n&&0!==n)return a;var o,s,u=t[0],l=w(t),c=+n;return l<u&&(o=u,u=l,l=o),(o=Math.abs(e-u))<(s=Math.abs(l-e))&&o<=c?r:s<=c?i:a},et=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},nt=function(t,e,n,r){var i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=t:a<t)&&(r?t<=o:t<o)},rt=function(t){return"boolean"===typeof t},it=function(t){return"[object Date]"===Object.prototype.toString.call(t)},at=function(t){return"number"===typeof t},ot=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},st=function(t,e){t&&(t=e?q(t).map(function(t){return t.replace(/\\(.)/g,"$1")}):q(t));var n=t&&t.length?Function("_","return ''+"+t.map(function(t){return"_["+(e?f(t):s(t).map(f).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return r(n,t,"key")},ut=function(t,e){var n=t[0],r=w(t),i=+e;return i?1===i?r:n+i*(r-n):n},lt=function(t,e,n,r){var i=e.length,a=n.length;if(!a)return e;if(!i)return n;for(var o=r||new e.constructor(i+a),s=0,u=0,l=0;s<i&&u<a;++l)o[l]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++l)o[l]=e[s];for(;u<a;++u,++l)o[l]=n[u];return o},ct=function(t,e){for(var n="";--e>=0;)n+=t;return n},ft=function(t,e,n,r){var i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?ct(i,o)+a:"center"===r?ct(i,~~(o/2))+a+ct(i,Math.ceil(o/2)):a+ct(i,o)},dt=function(t){return t&&w(t)-t[0]||0},ht=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t};function pt(t){return at(t)?t:it(t)?t:Date.parse(t)}var vt=function(t,e){return e=e||pt,null==t||""===t?null:e(t)},gt=function(t){return null==t||""===t?null:t+""},mt=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},yt=function(t,e,n,r){var i=null!=r?r:"\u2026",a=t+"",o=a.length,s=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i},bt=function(t,e,n){if(t){var r,i=0,a=t.length;if(e)for(;i<a;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}};n.d(e,"f",function(){return r}),n.d(e,"h",function(){return i}),n.d(e,"g",function(){return a}),n.d(e,"w",function(){return p}),n.d(e,"x",function(){return v}),n.d(e,"hb",function(){return g}),n.d(e,"M",function(){return m}),n.d(e,"eb",function(){return y}),n.d(e,"r",function(){return b}),n.d(e,"K",function(){return x}),n.d(e,"d",function(){return 0}),n.d(e,"b",function(){return 1}),n.d(e,"e",function(){return 2}),n.d(e,"c",function(){return 3}),n.d(e,"a",function(){return 4}),n.d(e,"O",function(){return O}),n.d(e,"P",function(){return P}),n.d(e,"Q",function(){return L}),n.d(e,"R",function(){return R}),n.d(e,"ib",function(){return F}),n.d(e,"jb",function(){return j}),n.d(e,"kb",function(){return N}),n.d(e,"lb",function(){return z}),n.d(e,"T",function(){return I}),n.d(e,"fb",function(){return B}),n.d(e,"i",function(){return q}),n.d(e,"j",function(){return U}),n.d(e,"k",function(){return W}),n.d(e,"l",function(){return G}),n.d(e,"m",function(){return V}),n.d(e,"n",function(){return o}),n.d(e,"o",function(){return Y}),n.d(e,"p",function(){return Z}),n.d(e,"q",function(){return X}),n.d(e,"s",function(){return Q}),n.d(e,"t",function(){return d}),n.d(e,"u",function(){return tt}),n.d(e,"v",function(){return J}),n.d(e,"y",function(){return et}),n.d(e,"z",function(){return nt}),n.d(e,"A",function(){return u}),n.d(e,"B",function(){return rt}),n.d(e,"C",function(){return it}),n.d(e,"D",function(){return H}),n.d(e,"E",function(){return at}),n.d(e,"F",function(){return l}),n.d(e,"G",function(){return ot}),n.d(e,"H",function(){return c}),n.d(e,"I",function(){return st}),n.d(e,"J",function(){return ut}),n.d(e,"L",function(){return lt}),n.d(e,"N",function(){return ft}),n.d(e,"S",function(){return w}),n.d(e,"U",function(){return ct}),n.d(e,"V",function(){return dt}),n.d(e,"W",function(){return s}),n.d(e,"X",function(){return f}),n.d(e,"Y",function(){return ht}),n.d(e,"Z",function(){return vt}),n.d(e,"ab",function(){return A}),n.d(e,"cb",function(){return gt}),n.d(e,"bb",function(){return mt}),n.d(e,"db",function(){return yt}),n.d(e,"gb",function(){return bt})},function(t,e,n){t.exports=n(40)()},function(t,e,n){"use strict";t.exports=n(38)},function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var a=typeof r;if("string"===a||"number"===a)t.push(r);else if(Array.isArray(r)&&r.length){var o=i.apply(null,r);o&&t.push(o)}else if("object"===a)for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){!function(t){"use strict";var e=Object.freeze;function n(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var a=0;function o(t){return t._leaflet_id=t._leaflet_id||++a,t._leaflet_id}function s(t,e,n){var r,i,a,o;return o=function(){r=!1,i&&(a.apply(n,i),i=!1)},a=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(o,e),r=!0)}}function u(t,e,n){var r=e[1],i=e[0],a=r-i;return t===r&&n?t:((t-i)%a+a)%a+i}function l(){return!1}function c(t,e){return e=void 0===e?6:e,+(Math.round(t+"e+"+e)+"e-"+e)}function f(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return f(t).split(/\s+/)}function h(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?r(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var v=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(v,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"===typeof r&&(r=r(e)),r})}var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var A=window.requestAnimationFrame||_("RequestAnimationFrame")||w,k=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function M(t,e,n){if(!n||A!==w)return A.call(window,i(t,e));t.call(e)}function T(t){t&&k.call(window,t)}var S=(Object.freeze||Object)({freeze:e,extend:n,create:r,bind:i,lastId:a,stamp:o,throttle:s,wrapNum:u,falseFn:l,formatNum:c,trim:f,splitWords:d,setOptions:h,getParamString:p,template:g,isArray:m,indexOf:y,emptyImageUrl:b,requestFn:A,cancelFn:k,requestAnimFrame:M,cancelAnimFrame:T});function C(){}C.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,a=r(i);for(var o in a.constructor=e,e.prototype=a,this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(e[o]=this[o]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!==typeof L&&L&&L.Mixin){t=m(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[a].concat(t.includes)),delete t.includes),a.options&&(t.options=n(r(a.options),t.options)),n(a,t),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=a._initHooks.length;t<e;t++)a._initHooks[t].call(this)}},e},C.include=function(t){return n(this.prototype,t),this},C.mergeOptions=function(t){return n(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var E={on:function(t,e,n){if("object"===typeof t)for(var r in t)this._on(r,t[r],e);else{t=d(t);for(var i=0,a=t.length;i<a;i++)this._on(t[i],e,n)}return this},off:function(t,e,n){if(t)if("object"===typeof t)for(var r in t)this._off(r,t[r],e);else{t=d(t);for(var i=0,a=t.length;i<a;i++)this._off(t[i],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},a=r,o=0,s=a.length;o<s;o++)if(a[o].fn===e&&a[o].ctx===n)return;a.push(i)},_off:function(t,e,n){var r,i,a;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,a=r.length;i<a;i++){var o=r[i];if(o.ctx===n&&o.fn===e)return o.fn=l,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,a=r.length;i<a;i++)r[i].fn=l;delete this._events[t]}},fire:function(t,e,r){if(!this.listens(t,r))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var o=0,s=a.length;o<s;o++){var u=a[o];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"===typeof t){for(var r in t)this.once(r,t[r],e);return this}var a=i(function(){this.off(t,e,n).off(t,a,n)},this);return this.on(t,e,n).on(t,a,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var O=C.extend(E);function P(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var R=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof P?t:m(t)?new P(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new P(t.x,t.y):new P(t,e,n)}function F(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function j(t,e){return!t||t instanceof F?t:new F(t,e)}function N(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function z(t,e){return t instanceof N?t:new N(t,e)}function I(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function B(t,e,n){return t instanceof I?t:m(t)&&"object"!==typeof t[0]?3===t.length?new I(t[0],t[1],t[2]):2===t.length?new I(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new I(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new I(t,e,n)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new P(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new P(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=R(this.x),this.y=R(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},F.prototype={extend:function(t){return t=D(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new P(this.min.x,this.max.y)},getTopRight:function(){return new P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"===typeof t[0]||t instanceof P?D(t):j(t))instanceof F?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=j(t);var e=this.min,n=this.max,r=t.min,i=t.max,a=i.x>=e.x&&r.x<=n.x,o=i.y>=e.y&&r.y<=n.y;return a&&o},overlaps:function(t){t=j(t);var e=this.min,n=this.max,r=t.min,i=t.max,a=i.x>e.x&&r.x<n.x,o=i.y>e.y&&r.y<n.y;return a&&o},isValid:function(){return!(!this.min||!this.max)}},N.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof I)e=t,n=t;else{if(!(t instanceof N))return t?this.extend(B(t)||z(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new I(e.lat,e.lng),this._northEast=new I(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new N(new I(e.lat-r,e.lng-i),new I(n.lat+r,n.lng+i))},getCenter:function(){return new I((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new I(this.getNorth(),this.getWest())},getSouthEast:function(){return new I(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof I||"lat"in t?B(t):z(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof N?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=z(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),a=i.lat>=e.lat&&r.lat<=n.lat,o=i.lng>=e.lng&&r.lng<=n.lng;return a&&o},overlaps:function(t){t=z(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),a=i.lat>e.lat&&r.lat<n.lat,o=i.lng>e.lng&&r.lng<n.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},I.prototype={equals:function(t,e){if(!t)return!1;t=B(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,B(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new I(this.lat,this.lng,this.alt)}};var q={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),i=this.transformation.transform(e.max,n);return new F(r,i)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new I(n,e,r)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var a=t.getSouthWest(),o=t.getNorthEast(),s=new I(a.lat-r,a.lng-i),u=new I(o.lat-r,o.lng-i);return new N(s,u)}},U=n({},q,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,a=Math.sin((e.lat-t.lat)*n/2),o=Math.sin((e.lng-t.lng)*n/2),s=a*a+Math.cos(r)*Math.cos(i)*o*o,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),H={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new P(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new I((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new F([-t,-t],[t,t])}()};function W(t,e,n,r){if(m(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function G(t,e,n,r){return new W(t,e,n,r)}W.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new P((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var V=n({},U,{code:"EPSG:3857",projection:H,transformation:function(){var t=.5/(Math.PI*H.R);return G(t,.5,-t,.5)}()}),Y=n({},V,{code:"EPSG:900913"});function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var n,r,i,a,o,s,u="";for(n=0,i=t.length;n<i;n++){for(o=t[n],r=0,a=o.length;r<a;r++)s=o[r],u+=(r?"L":"M")+s.x+" "+s.y;u+=e?Tt?"z":"x":""}return u||"M0 0"}var $=document.documentElement.style,J="ActiveXObject"in window,K=J&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),tt=Ct("webkit"),et=Ct("android"),nt=Ct("android 2")||Ct("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),it=et&&Ct("Google")&&rt<537&&!("AudioNode"in window),at=!!window.opera,ot=Ct("chrome"),st=Ct("gecko")&&!tt&&!at&&!J,ut=!ot&&Ct("safari"),lt=Ct("phantom"),ct="OTransition"in $,ft=0===navigator.platform.indexOf("Win"),dt=J&&"transition"in $,ht="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,pt="MozPerspective"in $,vt=!window.L_DISABLE_3D&&(dt||ht||pt)&&!ct&&!lt,gt="undefined"!==typeof orientation||Ct("mobile"),mt=gt&&tt,yt=gt&&ht,bt=!window.PointerEvent&&window.MSPointerEvent,_t=!(!window.PointerEvent&&!bt),xt=!window.L_NO_TOUCH&&(_t||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),wt=gt&&at,At=gt&&st,kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mt=!!document.createElement("canvas").getContext,Tt=!(!document.createElementNS||!Z("svg").createSVGRect),St=!Tt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(n){return!1}}();function Ct(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Et=(Object.freeze||Object)({ie:J,ielt9:K,edge:Q,webkit:tt,android:et,android23:nt,androidStock:it,opera:at,chrome:ot,gecko:st,safari:ut,phantom:lt,opera12:ct,win:ft,ie3d:dt,webkit3d:ht,gecko3d:pt,any3d:vt,mobile:gt,mobileWebkit:mt,mobileWebkit3d:yt,msPointer:bt,pointer:_t,touch:xt,mobileOpera:wt,mobileGecko:At,retina:kt,canvas:Mt,svg:Tt,vml:St}),Ot=bt?"MSPointerDown":"pointerdown",Pt=bt?"MSPointerMove":"pointermove",Lt=bt?"MSPointerUp":"pointerup",Rt=bt?"MSPointerCancel":"pointercancel",Dt=["INPUT","SELECT","OPTION"],Ft={},jt=!1,Nt=0;function zt(t,e,n,r){return"touchstart"===e?function(t,e,n){var r=i(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Dt.indexOf(t.target.tagName)<0))return;Fe(t)}Ut(t,e)});t["_leaflet_touchstart"+n]=r,t.addEventListener(Ot,r,!1),jt||(document.documentElement.addEventListener(Ot,It,!0),document.documentElement.addEventListener(Pt,Bt,!0),document.documentElement.addEventListener(Lt,qt,!0),document.documentElement.addEventListener(Rt,qt,!0),jt=!0)}(t,n,r):"touchmove"===e?function(t,e,n){var r=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Ut(t,e)};t["_leaflet_touchmove"+n]=r,t.addEventListener(Pt,r,!1)}(t,n,r):"touchend"===e&&function(t,e,n){var r=function(t){Ut(t,e)};t["_leaflet_touchend"+n]=r,t.addEventListener(Lt,r,!1),t.addEventListener(Rt,r,!1)}(t,n,r),this}function It(t){Ft[t.pointerId]=t,Nt++}function Bt(t){Ft[t.pointerId]&&(Ft[t.pointerId]=t)}function qt(t){delete Ft[t.pointerId],Nt--}function Ut(t,e){for(var n in t.touches=[],Ft)t.touches.push(Ft[n]);t.changedTouches=[t],e(t)}var Ht=bt?"MSPointerDown":_t?"pointerdown":"touchstart",Wt=bt?"MSPointerUp":_t?"pointerup":"touchend",Gt="_leaflet_";function Vt(t,e,n){var r,i,a=!1,o=250;function s(t){var e;if(_t){if(!Q||"mouse"===t.pointerType)return;e=Nt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),s=n-(r||n);i=t.touches?t.touches[0]:t,a=s>0&&s<=o,r=n}}function u(t){if(a&&!i.cancelBubble){if(_t){if(!Q||"mouse"===t.pointerType)return;var n,o,s={};for(o in i)n=i[o],s[o]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",i.button=0,e(i),r=null}}return t[Gt+Ht+n]=s,t[Gt+Wt+n]=u,t[Gt+"dblclick"+n]=e,t.addEventListener(Ht,s,!1),t.addEventListener(Wt,u,!1),t.addEventListener("dblclick",e,!1),this}function Yt(t,e){var n=t[Gt+Ht+e],r=t[Gt+Wt+e],i=t[Gt+"dblclick"+e];return t.removeEventListener(Ht,n,!1),t.removeEventListener(Wt,r,!1),Q||t.removeEventListener("dblclick",i,!1),this}var Zt,Xt,$t,Jt,Kt,Qt=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),te=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ee="webkitTransition"===te||"OTransition"===te?te+"End":"transitionend";function ne(t){return"string"===typeof t?document.getElementById(t):t}function re(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function ie(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function oe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function se(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ue(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function le(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=he(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ce(t,e){if(void 0!==t.classList)for(var n=d(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!le(t,e)){var a=he(t);de(t,(a?a+" ":"")+e)}}function fe(t,e){void 0!==t.classList?t.classList.remove(e):de(t,f((" "+he(t)+" ").replace(" "+e+" "," ")))}function de(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function he(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function pe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ge(t,e,n){var r=e||new P(0,0);t.style[Qt]=(dt?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function me(t,e){t._leaflet_pos=e,vt?ge(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ye(t){return t._leaflet_pos||new P(0,0)}if("onselectstart"in document)Zt=function(){Se(window,"selectstart",Fe)},Xt=function(){Ee(window,"selectstart",Fe)};else{var be=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zt=function(){if(be){var t=document.documentElement.style;$t=t[be],t[be]="none"}},Xt=function(){be&&(document.documentElement.style[be]=$t,$t=void 0)}}function _e(){Se(window,"dragstart",Fe)}function xe(){Ee(window,"dragstart",Fe)}function we(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ae(),Jt=t,Kt=t.style.outline,t.style.outline="none",Se(window,"keydown",Ae))}function Ae(){Jt&&(Jt.style.outline=Kt,Jt=void 0,Kt=void 0,Ee(window,"keydown",Ae))}function ke(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Me(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Te=(Object.freeze||Object)({TRANSFORM:Qt,TRANSITION:te,TRANSITION_END:ee,get:ne,getStyle:re,create:ie,remove:ae,empty:oe,toFront:se,toBack:ue,hasClass:le,addClass:ce,removeClass:fe,setClass:de,getClass:he,setOpacity:pe,testProp:ve,setTransform:ge,setPosition:me,getPosition:ye,disableTextSelection:Zt,enableTextSelection:Xt,disableImageDrag:_e,enableImageDrag:xe,preventOutline:we,restoreOutline:Ae,getSizedParentNode:ke,getScale:Me});function Se(t,e,n,r){if("object"===typeof e)for(var i in e)Oe(t,i,e[i],n);else{e=d(e);for(var a=0,o=e.length;a<o;a++)Oe(t,e[a],n,r)}return this}var Ce="_leaflet_events";function Ee(t,e,n,r){if("object"===typeof e)for(var i in e)Pe(t,i,e[i],n);else if(e){e=d(e);for(var a=0,o=e.length;a<o;a++)Pe(t,e[a],n,r)}else{for(var s in t[Ce])Pe(t,s,t[Ce][s]);delete t[Ce]}return this}function Oe(t,e,n,r){var i=e+o(n)+(r?"_"+o(r):"");if(t[Ce]&&t[Ce][i])return this;var a=function(e){return n.call(r||t,e||window.event)},s=a;_t&&0===e.indexOf("touch")?zt(t,e,a,i):!xt||"dblclick"!==e||!Vt||_t&&ot?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||window.event,We(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):("click"===e&&et&&(a=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=Be&&n-Be;r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated?je(t):(Be=n,e(t))}(t,s)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a):Vt(t,a,i),t[Ce]=t[Ce]||{},t[Ce][i]=a}function Pe(t,e,n,r){var i=e+o(n)+(r?"_"+o(r):""),a=t[Ce]&&t[Ce][i];if(!a)return this;_t&&0===e.indexOf("touch")?function(t,e,n){var r=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Ot,r,!1):"touchmove"===e?t.removeEventListener(Pt,r,!1):"touchend"===e&&(t.removeEventListener(Lt,r,!1),t.removeEventListener(Rt,r,!1))}(t,e,i):!xt||"dblclick"!==e||!Yt||_t&&ot?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a):Yt(t,i),t[Ce][i]=null}function Le(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Re(t){return Oe(t,"mousewheel",Le),this}function De(t){return Se(t,"mousedown touchstart dblclick",Le),Oe(t,"click",Ue),this}function Fe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function je(t){return Fe(t),Le(t),this}function Ne(t,e){if(!e)return new P(t.clientX,t.clientY);var n=Me(e),r=n.boundingClientRect;return new P((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var ze=ft&&ot?2*window.devicePixelRatio:st?window.devicePixelRatio:1;function Ie(t){return Q?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ze:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Be,qe={};function Ue(t){qe[t.type]=!0}function He(t){var e=qe[t.type];return qe[t.type]=!1,e}function We(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(r){return!1}return n!==t}var Ge=(Object.freeze||Object)({on:Se,off:Ee,stopPropagation:Le,disableScrollPropagation:Re,disableClickPropagation:De,preventDefault:Fe,stop:je,getMousePosition:Ne,getWheelDelta:Ie,fakeStop:Ue,skipped:He,isExternalTarget:We,addListener:Se,removeListener:Ee}),Ve=O.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=ye(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),me(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ye=O.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=h(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=te&&vt&&!wt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,ee,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(B(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r){void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan));var i=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),a=t instanceof P?t:this.latLngToContainerPoint(t),o=a.subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(o));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"===typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var a=r.subtract(n).divideBy(2),o=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i),u=this.unproject(o.add(s).divideBy(2).add(a),i);return{center:u,zoom:i}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=D(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ve,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ce(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!vt)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),a=this.getSize(),o=this._zoom;t=B(t),e=void 0===e?o:e;var s=Math.max(a.x,a.y),u=s*this.getZoomScale(o,e),l=i.distanceTo(r)||1,c=1.42,f=c*c;function d(t){var e=t?-1:1,n=t?u:s,r=u*u-s*s+e*f*f*l*l,i=2*n*f*l,a=r/i,o=Math.sqrt(a*a+1)-a,c=o<1e-9?-18:Math.log(o);return c}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var v=d(0);function g(t){return s*(p(v)*(h(e=v+c*t)/p(e))-h(v))/f;var e}var m=Date.now(),y=(d(1)-v)/c,b=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),function n(){var a=(Date.now()-m)/b,u=function(t){return 1-Math.pow(1-t,1.5)}(a)*y;a<=1?(this._flyToFrame=M(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(g(u)/l)),o),this.getScaleZoom(s/function(t){return s*(p(v)/p(v+c*t))}(u),o),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,z(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),a=this.project(i),o=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),l=j([s.min.add(n),s.max.subtract(r)]);if(!l.contains(o)){this._enforcingBounds=!0;var c=a.subtract(o),f=D(o.x+c.x,o.y+c.y);(o.x<l.min.x||o.x>l.max.x)&&(f.x=a.x-c.x,c.x>0?f.x+=u.x-n.x:f.x-=u.x-r.x),(o.y<l.min.y||o.y>l.max.y)&&(f.y=a.y-c.y,c.y>0?f.y+=u.y-n.y:f.y-=u.y-r.y),this.panTo(this.unproject(f),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=e.divideBy(2).round(),o=r.divideBy(2).round(),s=a.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,r=new I(e,n),i=r.toBounds(2*t.coords.accuracy),a=this._locateOptions;if(a.setView){var o=this.getBoundsZoom(i);this.setView(r,a.maxZoom?Math.min(o,a.maxZoom):o)}var s={latlng:r,bounds:i,timestamp:t.timestamp};for(var u in t.coords)"number"===typeof t.coords[u]&&(s[u]=t.coords[u]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=ie("div",n,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new N(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=z(t),n=D(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),a=this.getMaxZoom(),o=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=j(this.project(s,r),this.project(o,r)).getSize(),c=vt?this.options.zoomSnap:1,f=u.x/l.x,d=u.y/l.y,h=e?Math.max(f,d):Math.min(f,d);return r=this.getScaleZoom(h,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(a,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new F(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(B(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return Ne(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ne(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Se(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,ce(t,"leaflet-container"+(xt?" leaflet-touch":"")+(kt?" leaflet-retina":"")+(K?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=re(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ce(t.markerPane,"leaflet-zoom-hide"),ce(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){me(this._mapPane,new P(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){me(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Ee:Se;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,s=!1;a;){if((n=this._targets[o(a)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!We(a,t))break;if(r.push(n),i)break}if(a===this._container)break;a=a.parentNode}return r.length||s||i||!We(a,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||we(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,e))).length){var a=r[0];"contextmenu"===e&&a.listens(e,!0)&&Fe(t);var o={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=a.getLatLng&&(!a._radius||a._radius<=10);o.containerPoint=s?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=s?a.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(e,o,!0),o.originalEvent._stopped||!1===r[u].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ye(this._mapPane)||new P(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return j([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),a=new F(r.subtract(i),r.add(i)),o=this._getBoundsOffset(a,n,e);return o.round().equals([0,0])?t:this.unproject(r.add(o),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new F(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=j(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),a=r.max.subtract(t.max),o=this._rebound(i.x,-a.x),s=this._rebound(i.y,-a.y);return new P(o,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=vt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=ie("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Qt,n=this._proxy.style[e];ge(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();ge(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(M(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),M(function(){this._moveEnd(!0)},this))}}),Ze=C.extend({options:{position:"topright"},initialize:function(t){h(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return ce(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Xe=function(t){return new Ze(t)};Ye.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ie("div",e+"control-container",this._container);function r(r,i){var a=e+r+" "+e+i;t[r+i]=ie("div",a,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ae(this._controlCorners[t]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $e=Ze.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in h(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ze.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ie("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),De(e),Re(e);var r=this._section=ie("section",t+"-list");n&&(this._map.on("click",this.collapse,this),et||Se(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ie("a",t+"-toggle",e);i.href="#",i.title="Layers",xt?(Se(i,"click",je),Se(i,"click",this.expand,this)):Se(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ie("div",t+"-base",r),this._separator=ie("div",t+"-separator",r),this._overlaysList=ie("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oe(this._baseLayersList),oe(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+o(this),r),this._layerControlInputs.push(e),e.layerId=o(t.layer),Se(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var a=document.createElement("div");n.appendChild(a),a.appendChild(e),a.appendChild(i);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var a=n.length-1;a>=0;a--)t=n[a],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(a=0;a<i.length;a++)this._map.hasLayer(i[a])&&this._map.removeLayer(i[a]);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])||this._map.addLayer(r[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Ze.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ie("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var a=ie("a",n,r);return a.innerHTML=t,a.href="#",a.title=e,a.setAttribute("role","button"),a.setAttribute("aria-label",e),De(a),Se(a,"click",je),Se(a,"click",i,this),Se(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";fe(this._zoomInButton,e),fe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ce(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ce(this._zoomInButton,e)}});Ye.mergeOptions({zoomControl:!0}),Ye.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))});var Ke=Ze.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ie("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ie("div",e,n)),t.imperial&&(this._iScale=ie("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Qe=Ze.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){h(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ie("div","leaflet-control-attribution"),De(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ye.mergeOptions({attributionControl:!0}),Ye.addInitHook(function(){this.options.attributionControl&&(new Qe).addTo(this)}),Ze.Layers=$e,Ze.Zoom=Je,Ze.Scale=Ke,Ze.Attribution=Qe,Xe.layers=function(t,e,n){return new $e(t,e,n)},Xe.zoom=function(t){return new Je(t)},Xe.scale=function(t){return new Ke(t)},Xe.attribution=function(t){return new Qe(t)};var tn=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(t,e){return t.addHandler(e,this),this};var en,nn={Events:E},rn=xt?"touchstart mousedown":"mousedown",an={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},on={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},sn=O.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){h(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Se(this._dragStartTarget,rn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sn._dragging===this&&this.finishDrag(),Ee(this._dragStartTarget,rn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!le(this._element,"leaflet-zoom-anim")&&!(sn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(sn._dragging=this,this._preventOutline&&we(this._element),_e(),Zt(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=ke(this._element);this._startPoint=new P(e.clientX,e.clientY),this._parentScale=Me(n),Se(document,on[t.type],this._onMove,this),Se(document,an[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new P(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Fe(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ye(this._element).subtract(n),ce(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=M(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),me(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in fe(document.body,"leaflet-dragging"),this._lastTarget&&(fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),on)Ee(document,on[t],this._onMove,this),Ee(document,an[t],this._onUp,this);xe(),Xt(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,sn._dragging=!1}});function un(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,a){var o,s,u,l=0;for(s=i+1;s<=a-1;s++)(u=pn(e[s],e[i],e[a],!0))>l&&(o=s,l=u);l>r&&(n[o]=1,t(e,n,r,i,o),t(e,n,r,o,a))}(t,r,e,0,n-1);var i,a=[];for(i=0;i<n;i++)r[i]&&a.push(t[i]);return a}(t=function(t,e){for(var n=[t[0]],r=1,i=0,a=t.length;r<a;r++)hn(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<a-1&&n.push(t[a-1]),n}(t,n),n)}function ln(t,e,n){return Math.sqrt(pn(t,e,n,!0))}function cn(t,e,n,r,i){var a,o,s,u=r?en:dn(t,n),l=dn(e,n);for(en=l;;){if(!(u|l))return[t,e];if(u&l)return!1;o=fn(t,e,a=u||l,n,i),s=dn(o,n),a===u?(t=o,u=s):(e=o,l=s)}}function fn(t,e,n,r,i){var a,o,s=e.x-t.x,u=e.y-t.y,l=r.min,c=r.max;return 8&n?(a=t.x+s*(c.y-t.y)/u,o=c.y):4&n?(a=t.x+s*(l.y-t.y)/u,o=l.y):2&n?(a=c.x,o=t.y+u*(c.x-t.x)/s):1&n&&(a=l.x,o=t.y+u*(l.x-t.x)/s),new P(a,o,i)}function dn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function hn(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function pn(t,e,n,r){var i,a=e.x,o=e.y,s=n.x-a,u=n.y-o,l=s*s+u*u;return l>0&&((i=((t.x-a)*s+(t.y-o)*u)/l)>1?(a=n.x,o=n.y):i>0&&(a+=s*i,o+=u*i)),s=t.x-a,u=t.y-o,r?s*s+u*u:new P(a,o)}function vn(t){return!m(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function gn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vn(t)}var mn=(Object.freeze||Object)({simplify:un,pointToSegmentDistance:ln,closestPointOnSegment:function(t,e,n){return pn(t,e,n)},clipSegment:cn,_getEdgeIntersection:fn,_getBitCode:dn,_sqClosestPointOnSegment:pn,isFlat:vn,_flat:gn});function yn(t,e,n){var r,i,a,o,s,u,l,c,f,d=[1,4,2,8];for(i=0,l=t.length;i<l;i++)t[i]._code=dn(t[i],e);for(o=0;o<4;o++){for(c=d[o],r=[],i=0,l=t.length,a=l-1;i<l;a=i++)s=t[i],u=t[a],s._code&c?u._code&c||((f=fn(u,s,c,e,n))._code=dn(f,e),r.push(f)):(u._code&c&&((f=fn(u,s,c,e,n))._code=dn(f,e),r.push(f)),r.push(s));t=r}return t}var bn=(Object.freeze||Object)({clipPolygon:yn}),_n={project:function(t){return new P(t.lng,t.lat)},unproject:function(t){return new I(t.y,t.x)},bounds:new F([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752.314245179,bounds:new F([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,a=Math.sqrt(1-i*i),o=a*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-o)/(1+o),a/2);return r=-n*Math.log(Math.max(s,1e-10)),new P(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,a=Math.sqrt(1-i*i),o=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(o),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=a*Math.sin(s),e=Math.pow((1-e)/(1+e),a/2),l=Math.PI/2-2*Math.atan(o*e)-s,s+=l;return new I(s*n,t.x*n/r)}},wn=(Object.freeze||Object)({LonLat:_n,Mercator:xn,SphericalMercator:H}),An=n({},U,{code:"EPSG:3395",projection:xn,transformation:function(){var t=.5/(Math.PI*xn.R);return G(t,.5,-t,.5)}()}),kn=n({},U,{code:"EPSG:4326",projection:_n,transformation:G(1/180,1,-1/180,.5)}),Mn=n({},q,{projection:_n,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});q.Earth=U,q.EPSG3395=An,q.EPSG3857=V,q.EPSG900913=Y,q.EPSG4326=kn,q.Simple=Mn;var Tn=O.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ye.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?m(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Sn=Tn.extend({initialize:function(t,e){var n,r;if(h(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Cn=Sn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Sn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Sn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new N;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),En=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){h(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"===typeof r&&(r=[r,r]);var i=D(r),a=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),a&&(t.style.marginLeft=-a.x+"px",t.style.marginTop=-a.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return kt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),On=En.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return On.imagePath||(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+En.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ie("div","leaflet-default-icon-path",document.body),e=re(t,"background-image")||re(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Pn=tn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new sn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ce(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,a=ye(e._icon),o=n.getPixelBounds(),s=n.getPixelOrigin(),u=j(o.min._subtract(s).add(i),o.max._subtract(s).subtract(i));if(!u.contains(a)){var l=D((Math.max(u.max.x,a.x)-u.max.x)/(o.max.x-u.max.x)-(Math.min(u.min.x,a.x)-u.min.x)/(o.min.x-u.min.x),(Math.max(u.max.y,a.y)-u.max.y)/(o.max.y-u.max.y)-(Math.min(u.min.y,a.y)-u.min.y)/(o.min.y-u.min.y)).multiplyBy(r);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),me(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=M(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=ye(e._icon),i=e._map.layerPointToLatLng(r);n&&me(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=Tn.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){h(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ce(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),a=!1;i!==this._shadow&&(this._removeShadow(),a=!0),i&&(ce(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&a&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(t){me(this._icon,t),this._shadow&&me(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Rn=Tn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return h(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Dn=Rn.extend({options:{fill:!0,radius:10},initialize:function(t,e){h(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=B(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Rn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new F(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Fn=Dn.extend({initialize:function(t,e,r){if("number"===typeof e&&(e=n({},r,{radius:e})),h(this,e),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new N(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Rn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===U.distance){var i=Math.PI/180,a=this._mRadius/U.R/i,o=n.project([e+a,t]),s=n.project([e-a,t]),u=o.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(a*i)-Math.sin(e*i)*Math.sin(l*i))/(Math.cos(e*i)*Math.cos(l*i)))/i;(isNaN(c)||0===c)&&(c=a/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-o.y}else{var f=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(f).x}this._updateBounds()}}),jn=Rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){h(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,a=pn,o=0,s=this._parts.length;o<s;o++)for(var u=this._parts[o],l=1,c=u.length;l<c;l++){e=u[l-1],n=u[l];var f=a(t,e,n,!0);f<r&&(r=f,i=a(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,a,o,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(i=s[t],a=s[t+1],n=i.distanceTo(a),(r+=n)>e)return o=(r-e)/n,this._map.layerPointToLatLng([a.x-o*(a.x-i.x),a.y-o*(a.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new N,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return vn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=vn(t),r=0,i=t.length;r<i;r++)n?(e[r]=B(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new F;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new P(t,t);this._pxBounds=new F([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,a=t[0]instanceof I,o=t.length;if(a){for(i=[],r=0;r<o;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<o;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,a,o,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(s=this._rings[e],n=0,a=s.length;n<a-1;n++)(o=cn(s[n],s[n+1],t,n,!0))&&(u[r]=u[r]||[],u[r].push(o[0]),o[1]===s[n+1]&&n!==a-2||(u[r].push(o[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=un(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,a,o,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,a=this._parts.length;n<a;n++)for(s=this._parts[n],r=0,o=s.length,i=o-1;r<o;i=r++)if((e||0!==r)&&ln(t,s[i],s[r])<=u)return!0;return!1}});jn._flat=gn;var Nn=jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,a,o,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(a=o=s=0,t=0,e=c-1;t<c;e=t++)n=l[t],r=l[e],i=n.y*r.x-r.y*n.x,o+=(n.x+r.x)*i,s+=(n.y+r.y)*i,a+=3*i;return u=0===a?l[0]:[o/a,s/a],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=jn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof I&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){jn.prototype._setLatLngs.call(this,t),vn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new P(e,e);if(t=new F(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,a=this._rings.length;i<a;i++)(r=yn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,a,o,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(e=this._parts[i],a=0,u=e.length,o=u-1;a<u;o=a++)n=e[a],r=e[o],n.y>t.y!==r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(l=!l);return l||jn.prototype._containsPoint.call(this,t,!0)}}),zn=Cn.extend({initialize:function(t,e){h(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=m(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var a=this.options;if(a.filter&&!a.filter(t))return this;var o=In(t,a);return o?(o.feature=Gn(t),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(t,o),this.addLayer(o)):this},resetStyle:function(t){return t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function In(t,e){var n,r,i,a,o="Feature"===t.type?t.geometry:t,s=o?o.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Bn;if(!s&&!o)return null;switch(o.type){case"Point":return n=c(s),l?l(t,n):new Ln(n);case"MultiPoint":for(i=0,a=s.length;i<a;i++)n=c(s[i]),u.push(l?l(t,n):new Ln(n));return new Cn(u);case"LineString":case"MultiLineString":return r=qn(s,"LineString"===o.type?0:1,c),new jn(r,e);case"Polygon":case"MultiPolygon":return r=qn(s,"Polygon"===o.type?1:2,c),new Nn(r,e);case"GeometryCollection":for(i=0,a=o.geometries.length;i<a;i++){var f=In({geometry:o.geometries[i],type:"Feature",properties:t.properties},e);f&&u.push(f)}return new Cn(u);default:throw new Error("Invalid GeoJSON object.")}}function Bn(t){return new I(t[1],t[0],t[2])}function qn(t,e,n){for(var r,i=[],a=0,o=t.length;a<o;a++)r=e?qn(t[a],e-1,n):(n||Bn)(t[a]),i.push(r);return i}function Un(t,e){return e="number"===typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Hn(t,e,n,r){for(var i=[],a=0,o=t.length;a<o;a++)i.push(e?Hn(t[a],e-1,n,r):Un(t[a],r));return!e&&n&&i.push(i[0]),i}function Wn(t,e){return t.feature?n({},t.feature,{geometry:e}):Gn(e)}function Gn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Vn={toGeoJSON:function(t){return Wn(this,{type:"Point",coordinates:Un(this.getLatLng(),t)})}};function Yn(t,e){return new zn(t,e)}Ln.include(Vn),Fn.include(Vn),Dn.include(Vn),jn.include({toGeoJSON:function(t){var e=!vn(this._latlngs),n=Hn(this._latlngs,e?1:0,!1,t);return Wn(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),Nn.include({toGeoJSON:function(t){var e=!vn(this._latlngs),n=e&&!vn(this._latlngs[0]),r=Hn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Wn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Sn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Wn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer(function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var a=Gn(i);"FeatureCollection"===a.type?r.push.apply(r,a.features):r.push(a)}}}),n?Wn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Zn=Yn,Xn=Tn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=z(e),h(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&se(this._image),this},bringToBack:function(){return this._map&&ue(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ie("img");ce(e,"leaflet-image-layer"),this._zoomAnimated&&ce(e,"leaflet-zoom-animated"),this.options.className&&ce(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ge(this._image,n,e)},_reset:function(){var t=this._image,e=new F(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();me(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),$n=Xn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ie("video");if(ce(e,"leaflet-image-layer"),this._zoomAnimated&&ce(e,"leaflet-zoom-animated"),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],a=0;a<n.length;a++)r.push(n[a].src);this._url=n.length>0?r:[e.src]}else{m(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var s=ie("source");s.src=this._url[o],e.appendChild(s)}}}}),Jn=Xn.extend({_initImage:function(){var t=this._image=this._url;ce(t,"leaflet-image-layer"),this._zoomAnimated&&ce(t,"leaflet-zoom-animated"),t.onselectstart=l,t.onmousemove=l}}),Kn=Tn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){h(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&pe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(i(ae,void 0,this._container),200)):ae(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&se(this._container),this},bringToBack:function(){return this._map&&ue(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Tn||(n=e,e=t),e instanceof Cn)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?me(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),Qn=Kn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Kn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rn||this._source.on("preclick",Le))},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rn||this._source.off("preclick",Le))},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ie("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ie("div",t+"-content-wrapper",e);if(this._contentNode=ie("div",t+"-content",n),De(n),Re(this._contentNode),Se(n,"contextmenu",Le),this._tipContainer=ie("div",t+"-tip-container",e),this._tip=ie("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ie("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",Se(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight;i&&r>i?(e.height=i+"px",ce(t,"leaflet-popup-scrolled")):fe(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();me(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(re(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new P(this._containerLeft,-n-this._containerBottom);i._add(ye(this._container));var a=t.layerPointToContainerPoint(i),o=D(this.options.autoPanPadding),s=D(this.options.autoPanPaddingTopLeft||o),u=D(this.options.autoPanPaddingBottomRight||o),l=t.getSize(),c=0,f=0;a.x+r+u.x>l.x&&(c=a.x+r-l.x+u.x),a.x-c-s.x<0&&(c=a.x-s.x),a.y+n+u.y>l.y&&(f=a.y+n-l.y+u.y),a.y-f-s.y<0&&(f=a.y-s.y),(c||f)&&t.fire("autopanstart").panBy([c,f])}},_onCloseButtonClick:function(t){this._close(),je(t)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ye.mergeOptions({closePopupOnClick:!0}),Ye.include({openPopup:function(t,e,n){return t instanceof Qn||(t=new Qn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Tn.include({bindPopup:function(t,e){return t instanceof Qn?(h(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Qn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(je(t),e instanceof Rn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var tr=Kn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Kn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ie("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),a=this.options.direction,o=n.offsetWidth,s=n.offsetHeight,u=D(this.options.offset),l=this._getAnchor();"top"===a?t=t.add(D(-o/2+u.x,-s+u.y+l.y,!0)):"bottom"===a?t=t.subtract(D(o/2-u.x,-u.y,!0)):"center"===a?t=t.subtract(D(o/2+u.x,s/2-l.y+u.y,!0)):"right"===a||"auto"===a&&i.x<r.x?(a="right",t=t.add(D(u.x+l.x,l.y-s/2+u.y,!0))):(a="left",t=t.subtract(D(o+l.x-u.x,s/2-l.y-u.y,!0))),fe(n,"leaflet-tooltip-right"),fe(n,"leaflet-tooltip-left"),fe(n,"leaflet-tooltip-top"),fe(n,"leaflet-tooltip-bottom"),ce(n,"leaflet-tooltip-"+a),me(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&pe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ye.include({openTooltip:function(t,e,n){return t instanceof tr||(t=new tr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Tn.include({bindTooltip:function(t,e){return t instanceof tr?(h(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new tr(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),xt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ce(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var er=En.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(oe(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=D(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});En.Default=On;var nr=Tn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){h(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(se(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof P?t:new P(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,a=n.length;i<a;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!K){pe(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var a=Math.min(1,(t-i.loaded)/200);pe(i.el,a),a<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ie("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ae(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=ie("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ae(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),a=Math.floor(e/2),o=n-1,s=new P(+i,+a);s.z=+o;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),o>r&&this._retainParent(i,a,o,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var a=2*e;a<2*e+2;a++){var o=new P(i,a);o.z=n+1;var s=this._tileCoordsToKey(o),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,a,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var a=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!a||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?ge(t.el,i,r):me(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),a=e.getSize().divideBy(2*r);return new F(i.subtract(a),i.add(a))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),a=i.getCenter(),o=[],s=this.options.keepBuffer,u=new F(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new P(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var f=i.min.y;f<=i.max.y;f++)for(var d=i.min.x;d<=i.max.x;d++){var h=new P(d,f);if(h.z=this._tileZoom,this._isValidTile(h)){var p=this._tiles[this._tileCoordsToKey(h)];p?p.current=!0:o.push(h)}}if(o.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var v=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],v);this._level.el.appendChild(v)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n),a=e.unproject(r,t.z),o=e.unproject(i,t.z);return[a,o]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new N(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new P(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ce(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,K&&this.options.opacity<1&&pe(t,this.options.opacity),et&&!nt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&M(i(this._tileReady,this,t,null,a)),me(a,n),this._tiles[r]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(pe(n.el,0),T(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ce(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),K||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new P(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new F(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),rr=nr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=h(this,e)).detectRetina&&kt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),et||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Se(n,"load",i(this._tileOnLoad,this,e,n)),Se(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:kt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){K?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(t=e-t),t+r},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=b,ae(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return it||e.el.setAttribute("src",b),nr.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==b))return nr.prototype._tileReady.call(this,t,e,n)}});function ir(t,e){return new rr(t,e)}var ar=rr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=n({},this.defaultWmsParams);for(var i in e)i in this.options||(r[i]=e[i]);var a=(e=h(this,e)).detectRetina&&kt?2:1,o=this.getTileSize();r.width=o.x*a,r.height=o.y*a,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,rr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=j(n.project(e[0]),n.project(e[1])),i=r.min,a=r.max,o=(this._wmsVersion>=1.3&&this._crs===kn?[i.y,i.x,a.y,a.x]:[i.x,i.y,a.x,a.y]).join(","),s=rr.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});rr.WMS=ar,ir.wms=function(t,e){return new ar(t,e)};var or=Tn.extend({options:{padding:.1,tolerance:0},initialize:function(t){h(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=ye(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),o=this._map.project(t,e),s=o.subtract(a),u=i.multiplyBy(-n).add(r).add(i).subtract(s);vt?ge(this._container,u,n):me(this._container,u)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new F(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sr=or.extend({getEvents:function(){var t=or.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){or.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",s(this._onMouseMove,32,this),this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ae(this._container),Ee(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){or.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=kt?2:1;me(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",kt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){or.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new F,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,a,o=t._parts,s=o.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(r=0,i=o[n].length;r<i;r++)a=o[n][r],u[r?"lineTo":"moveTo"](a.x,a.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(Ue(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(fe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(ce(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ur(t){return Mt?new sr(t):null}var lr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),cr={_initContainer:function(){this._container=ie("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(or.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=lr("shape");ce(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=lr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ae(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=lr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=m(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=lr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){se(t._container)},_bringToBack:function(t){ue(t._container)}},fr=St?lr:Z,dr=or.extend({getEvents:function(){var t=or.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=fr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Ee(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){or.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),me(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=fr("path");t.options.className&&ce(e,t.options.className),t.options.interactive&&ce(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||n,i="a"+n+","+r+" 0 1,0 ",a=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,a)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){se(t._path)},_bringToBack:function(t){ue(t._path)}});function hr(t){return Tt||St?new dr(t):null}St&&dr.include(cr),Ye.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ur(t)||hr(t)}});var pr=Nn.extend({initialize:function(t,e){Nn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=z(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});dr.create=fr,dr.pointsToPath=X,zn.geometryToLayer=In,zn.coordsToLatLng=Bn,zn.coordsToLatLngs=qn,zn.latLngToCoords=Un,zn.latLngsToCoords=Hn,zn.getFeature=Wn,zn.asFeature=Gn,Ye.mergeOptions({boxZoom:!0});var vr=tn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Zt(),_e(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ie("div","leaflet-zoom-box",this._container),ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new F(this._point,this._startPoint),n=e.getSize();me(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ae(this._box),fe(this._container,"leaflet-crosshair")),Xt(),xe(),Ee(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new N(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ye.addInitHook("addHandler","boxZoom",vr),Ye.mergeOptions({doubleClickZoom:!0});var gr=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Ye.addInitHook("addHandler","doubleClickZoom",gr),Ye.mergeOptions({dragging:!0,inertia:!nt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mr=tn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new sn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fe(this._map._container,"leaflet-grab"),fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=z(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,a=(r+e+n)%t-e-n,o=Math.abs(i+n)<Math.abs(a+n)?i:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,s=i.multiplyBy(o/a),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=s.multiplyBy(l/u),f=l/(n.inertiaDeceleration*o),d=c.multiplyBy(-f/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),M(function(){e.panBy(d,{duration:f,easeLinearity:o,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ye.addInitHook("addHandler","dragging",mr),Ye.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yr=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ee(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}je(t)}}});Ye.addInitHook("addHandler","keyboard",yr),Ye.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var br=tn.extend({addHooks:function(){Se(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ee(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ie(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),je(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,a=n?Math.ceil(i/n)*n:i,o=t._limitZoom(e+(this._delta>0?a:-a))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});Ye.addInitHook("addHandler","scrollWheelZoom",br),Ye.mergeOptions({tap:!0,tapTolerance:15});var _r=tn.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Fe(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new P(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ce(n,"leaflet-active"),this._holdTimeout=setTimeout(i(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Se(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ee(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new P(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});xt&&!_t&&Ye.addInitHook("addHandler","tap",_r),Ye.mergeOptions({touchZoom:xt&&!nt,bounceAtZoomLimits:!0});var xr=tn.extend({addHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend",this._onTouchEnd,this),Fe(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),a=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=M(s,this,!0),Fe(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ee(document,"touchmove",this._onTouchMove),Ee(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ye.addInitHook("addHandler","touchZoom",xr),Ye.BoxZoom=vr,Ye.DoubleClickZoom=gr,Ye.Drag=mr,Ye.Keyboard=yr,Ye.ScrollWheelZoom=br,Ye.Tap=_r,Ye.TouchZoom=xr,Object.freeze=e,t.version="1.5.1+build.2e3e0ffb",t.Control=Ze,t.control=Xe,t.Browser=Et,t.Evented=O,t.Mixin=nn,t.Util=S,t.Class=C,t.Handler=tn,t.extend=n,t.bind=i,t.stamp=o,t.setOptions=h,t.DomEvent=Ge,t.DomUtil=Te,t.PosAnimation=Ve,t.Draggable=sn,t.LineUtil=mn,t.PolyUtil=bn,t.Point=P,t.point=D,t.Bounds=F,t.bounds=j,t.Transformation=W,t.transformation=G,t.Projection=wn,t.LatLng=I,t.latLng=B,t.LatLngBounds=N,t.latLngBounds=z,t.CRS=q,t.GeoJSON=zn,t.geoJSON=Yn,t.geoJson=Zn,t.Layer=Tn,t.LayerGroup=Sn,t.layerGroup=function(t,e){return new Sn(t,e)},t.FeatureGroup=Cn,t.featureGroup=function(t){return new Cn(t)},t.ImageOverlay=Xn,t.imageOverlay=function(t,e,n){return new Xn(t,e,n)},t.VideoOverlay=$n,t.videoOverlay=function(t,e,n){return new $n(t,e,n)},t.SVGOverlay=Jn,t.svgOverlay=function(t,e,n){return new Jn(t,e,n)},t.DivOverlay=Kn,t.Popup=Qn,t.popup=function(t,e){return new Qn(t,e)},t.Tooltip=tr,t.tooltip=function(t,e){return new tr(t,e)},t.Icon=En,t.icon=function(t){return new En(t)},t.DivIcon=er,t.divIcon=function(t){return new er(t)},t.Marker=Ln,t.marker=function(t,e){return new Ln(t,e)},t.TileLayer=rr,t.tileLayer=ir,t.GridLayer=nr,t.gridLayer=function(t){return new nr(t)},t.SVG=dr,t.svg=hr,t.Renderer=or,t.Canvas=sr,t.canvas=ur,t.Path=Rn,t.CircleMarker=Dn,t.circleMarker=function(t,e){return new Dn(t,e)},t.Circle=Fn,t.circle=function(t,e,n){return new Fn(t,e,n)},t.Polyline=jn,t.polyline=function(t,e){return new jn(t,e)},t.Polygon=Nn,t.polygon=function(t,e){return new Nn(t,e)},t.Rectangle=pr,t.rectangle=function(t,e){return new pr(t,e)},t.Map=Ye,t.map=function(t,e){return new Ye(t,e)};var wr=window.L;t.noConflict=function(){return window.L=wr,this},window.L=t}(e)},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return r})},,function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return f});var r=n(9),i=n(27),a=n.n(i),o=n(2),s=n.n(o),u=Object(o.createContext)({}),l=u.Consumer,c=u.Provider,f=function(t){var e=function(e,n){return s.a.createElement(l,null,function(i){return s.a.createElement(t,Object(r.a)({},e,{leaflet:i,ref:n}))})},n=t.displayName||t.name||"Component";e.displayName="Leaflet("+n+")";var i=Object(o.forwardRef)(e);return a()(i,t),i}},function(t,e,n){t.exports=n(47)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getResourceCachedValues=o,e.simpleToPlotly=function(t){var e={type:"scatter",mode:"lines",line:{width:1.5,shape:"spline",dash:"solid"}},n={line:e,bar:{type:"bar"},scatter:e,"lines-and-points":e},r=o(t.resources[0],!0);r.length<1e3&&(r=(0,i.sortBy)(r,[t.spec.group]));var a=r.map(function(e){return e[t.spec.group]}),s=t.spec.series.map(function(e){var i={x:a,y:r.map(function(t){return t[e]}),name:e};return Object.assign(i,n[t.spec.type]),i}),u=t.resources[0].schema.fields.find(function(e){return e.name===t.spec.group}),l=!1;if("date"===u.type){var c=new Date(a[a.length-1])-new Date(a[0]);l=c<864000001}return{data:s,layout:{title:t.title?t.title:"",height:450,xaxis:{title:t.spec.xTitle||t.spec.group,tickformat:"date"===u.type?"%e %b %Y":"",type:["date","year","yearmonth"].includes(u.type)?"date":u.type,tickmode:l?"linear":void 0,ticksuffix:t.spec.xSuffix||""},yaxis:{title:t.spec.yTitle||(1===t.spec.series.length?t.spec.series[0]:""),ticksuffix:t.spec.ySuffix||""},font:{family:'"Open Sans", verdana, arial, sans-serif',size:12,color:"rgb(169, 169, 169)"},titlefont:{family:'"Open Sans", verdana, arial, sans-serif',size:17,color:"rgb(76, 76, 76)"},colorway:t.spec.colorway?t.spec.colorway:["#0a0a0a","#ff8a0e","#dadada","#f4eb41","#d10808","#5bd107","#2274A5","#E83F6F","#6E9887","#3A435E","#861388","#9F8082"]}}},e.handsOnTableToHandsOnTable=function(t){var e=void 0,n=[];t.resources[0].schema?(e=t.resources[0].schema.fields.map(function(t){return t.title||t.name}),t.resources[0].schema.fields.forEach(function(t){"number"===t.type||"integer"===t.type?n.push({className:"htRight"}):n.push({className:"htLeft"})})):(0,i.isArray)(t.resources[0]._values[0])?e=t.resources[0]._values[0]:(0,i.isPlainObject)(t.resources[0]._values[0])&&(e=Object.keys(t.resources[0]._values[0]));var r=void 0;t.resources[0]._values?(t.resources[0]._values=o(t.resources[0]),r=f(t.resources[0])._values):r=o(t.resources[0]);return{data:r,colHeaders:e,readOnly:!0,colWidths:47,rowWidth:27,stretchH:"all",columnSorting:!0,search:!0,manualColumnResize:!0,viewTitle:t.title,columns:n.length?n:void 0,headerTooltips:!0,manualColumnMove:!0,rowcount:r?r.length:0,totalrowcount:t.resources[0].totalrowcount}},e.normalizeView=s,e.convertReclineToSimple=function(t){return{name:t.id.toLowerCase(),specType:"simple",spec:{type:{lines:"line"}[t.state.graphType],group:t.state.group,series:t.state.series}}},e.compileData=u,e.findResourceByNameOrIndex=l,e.compileView=function(t,e){var n=Object.assign({},t);s(n);var r=u(n,e);return n.resources=r,n},e.allResourcesLoaded=c,e.vegaToVega=function(t){var e=Object.assign({},t.spec);if(c(t.resources))return e.data||(e.data=t.resources.map(function(t){return{name:t.name}})),e.data.forEach(function(e){if(!e.source&&!e.values)try{var n=l(t,e.name),r=!("topojson"===n.format||"geojson"===n.format);e.values=o(n,r)}catch(i){console.log(i),console.log("> problem caused by "+e.name)}e.format&&"csv"===e.format.type&&delete e.format.type}),e},e.plotlyToPlotly=function(t){var e=Object.assign({},t.spec),n=o(t.resources[0],!0),r=n.map(function(e){return e[t.spec.group]}),i=[];t.spec.group&&t.spec.series&&(i=t.spec.series.map(function(e){var i={};return!function(t){if(t.data&&t.data.length>0&&t.data[0].orientation)return"h"===t.data[0].orientation;return!1}(t.spec)?(i.x=r,i.y=n.map(function(t){return t[e]})):(i.x=n.map(function(t){return t[e]}),i.y=r),i}));if(e.data)for(var a=0;a<e.data.length;a++)e.data[a]=Object.assign(e.data[a],i[a]);else e.data=i;return delete e.group,delete e.series,e},e.reactVirtualizedToReactVirtualized=function(t){var e=t.resources[0].schema.fields.map(function(t){return t.name}),n=t.resources[0]._values?o(t.resources[0],!0):void 0,r=n?n.length:0,i=30*r+20>432?432:30*r+20,a=1136/e.length;return{data:n,headers:e,width:1136,height:i,headerHeight:20,rowHeight:30,rowCount:r,columnWidth:a}},e.normalizeDateAndTime=f;var i=n(61),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(63));function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0;return t.schema&&(n=t.schema.fields.map(function(t){return t.name})),e?t._values&&(0,i.isArray)(t._values[0])?(n||(n=t._values[0]),t._values.map(function(t){return(0,i.zipObject)(n,t)})):t._values:t._values&&(0,i.isPlainObject)(t._values[0])?(n||(n=Object.keys(t._values[0])),(0,i.map)(t._values,function(t){return n.map(function(e){return t[e]})})):t._values}function s(t){t.resources||(t.resources=[0])}function u(t,e){return t.resources.map(function(t){if("object"==("undefined"===typeof t?"undefined":r(t))){var n=Object.assign({},l(e,t.name));if(n._values){var i=o(n,!0);t.transform.forEach(function(t){switch(t.type){case"aggregate":n._values=a.aggregate(t.fields,t.operations,i);break;case"filter":n._values=a.filterByExpr(t.expression,i);break;case"formula":n._values=a.applyFormula(t.expressions,t.asFields,i);break;case"sample":n._values=a.sample(t.size,i)}i=n._values})}return n}return Object.assign({},l(e,t))})}function l(t,e){return"number"==typeof e?t.resources[e]:(0,i.find)(t.resources,function(t){return t.name==e})}function c(t){var e=0;if(t.forEach(function(t){t._values&&(e+=1)}),e===t.length)return!0}function f(t){if(!t.schema)return t;if(t._values){var e=[],n=[],r=[],a=[];t.schema.fields.forEach(function(t,i){"date"===t.type?e.push(i):"time"===t.type?n.push(i):"datetime"===t.type?r.push(i):"object"!==t.type&&"array"!==t.type||a.push(i)}),t._values.forEach(function(t){e.forEach(function(e){if(t[e]){var n=t[e].toString();n=new Date(n.substring(0,28)),t[e]=n.toISOString().substring(0,10)}}),n.forEach(function(e){if(t[e]&&t[e]instanceof Date){var n=t[e].toTimeString();t[e]=n.substring(0,8)}}),r.forEach(function(e){if(t[e]&&t[e]instanceof Date){var n=t[e].getTimezoneOffset();t[e].setMinutes(t[e].getMinutes()-n),t[e]=t[e].toISOString().split(".")[0]+"Z"}}),a.forEach(function(e){(0,i.isObject)(t[e])&&(t[e]=JSON.stringify(t[e]))})})}return t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var r=n(0);e.a=function(e,n){var i,a=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(e)||(i=e,"function"===typeof t&&Object(r.D)(t.isBuffer)&&t.isBuffer(i))?a(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(a(e))}}).call(this,n(19).Buffer)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(9),i=n(6),a=n(5),o=n(7),s=n(2),u=/^on(.+)$/i,l=function(t){function e(e){var n;return n=t.call(this,e)||this,Object(o.a)(Object(i.a)(n),"_leafletEvents",void 0),Object(o.a)(Object(i.a)(n),"leafletElement",void 0),n._leafletEvents=n.extractLeafletEvents(e),n}Object(a.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.bindLeafletEvents(this._leafletEvents)},n.componentDidUpdate=function(t){this._leafletEvents=this.bindLeafletEvents(this.extractLeafletEvents(this.props),this._leafletEvents)},n.componentWillUnmount=function(){var t=this,e=this.leafletElement;e&&Object.keys(this._leafletEvents).forEach(function(n){e.off(n,t._leafletEvents[n])})},n.extractLeafletEvents=function(t){return Object.keys(t).reduce(function(e,n){u.test(n)&&(null!=t[n]&&(e[n.replace(u,function(t,e){return e.toLowerCase()})]=t[n]));return e},{})},n.bindLeafletEvents=function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=this.leafletElement;if(null==n||null==n.on)return{};var i=Object(r.a)({},e);return Object.keys(e).forEach(function(r){null!=t[r]&&e[r]===t[r]||(delete i[r],n.off(r,e[r]))}),Object.keys(t).forEach(function(r){null!=e[r]&&t[r]===e[r]||(i[r]=t[r],n.on(r,t[r]))}),i},n.fireLeafletEvent=function(t,e){var n=this.leafletElement;n&&n.fire(t,e)},e}(s.Component)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(6),a=n(5),o=n(7),s=n(2),u=n.n(s),l=n(11),c=n(9),f=function(t){function e(){return t.apply(this,arguments)||this}return Object(a.a)(e,t),e.prototype.getOptions=function(t){return null!=t.pane?t:null!=t.leaflet&&null!=t.leaflet.pane?Object(c.a)({},t,{pane:t.leaflet.pane}):t},e}(n(16).a);n.d(e,"a",function(){return d});var d=function(t){function e(e){var n;return n=t.call(this,e)||this,Object(o.a)(Object(i.a)(n),"contextValue",void 0),Object(o.a)(Object(i.a)(n),"leafletElement",void 0),n.leafletElement=n.createLeafletElement(e),n}Object(a.a)(e,t);var n,c,f,d=e.prototype;return d.createLeafletElement=function(t){throw new Error("createLeafletElement() must be implemented")},d.updateLeafletElement=function(t,e){},d.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.layerContainer.addLayer(this.leafletElement)},d.componentDidUpdate=function(e){if(t.prototype.componentDidUpdate.call(this,e),this.props.attribution!==e.attribution){var n=this.props.leaflet.map;null!=n&&null!=n.attributionControl&&(n.attributionControl.removeAttribution(e.attribution),n.attributionControl.addAttribution(this.props.attribution))}this.updateLeafletElement(e,this.props)},d.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.layerContainer.removeLayer(this.leafletElement)},d.render=function(){var t=this.props.children;return null==t?null:null==this.contextValue?u.a.createElement(s.Fragment,null,t):u.a.createElement(l.a,{value:this.contextValue},t)},n=e,(c=[{key:"layerContainer",get:function(){return this.props.leaflet.layerContainer||this.props.leaflet.map}}])&&r(n.prototype,c),f&&r(n,f),e}(f)},function(t,e,n){"use strict";(function(t){var n="undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o=!1;function s(){o=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)r[e]=t[e],i[t.charCodeAt(e)]=e;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63}function u(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}function l(t){var e;o||s();for(var n=t.length,i=n%3,a="",l=[],c=0,f=n-i;c<f;c+=16383)l.push(u(t,c,c+16383>f?f:c+16383));return 1===i?(e=t[n-1],a+=r[e>>2],a+=r[e<<4&63],a+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],a+=r[e>>10],a+=r[e>>4&63],a+=r[e<<2&63],a+="="),l.push(a),l.join("")}function c(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+t[e+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)}function f(t,e,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[n+h]=255&o,h+=p,o/=256,l-=8);t[n+h-p]|=128*v}var d={}.toString,h=Array.isArray||function(t){return"[object Array]"==d.call(t)};function p(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function v(t,e){if(p()<e)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=g.prototype:(null===t&&(t=new g(e)),t.length=e),t}function g(t,e,n){if(!g.TYPED_ARRAY_SUPPORT&&!(this instanceof g))return new g(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return b(this,t)}return m(this,t,e,n)}function m(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);g.TYPED_ARRAY_SUPPORT?(t=e).__proto__=g.prototype:t=_(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!g.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|A(e,n),i=(t=v(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(w(e)){var n=0|x(e.length);return 0===(t=v(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?v(t,0):_(t,e);if("Buffer"===e.type&&h(e.data))return _(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function y(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function b(t,e){if(y(e),t=v(t,e<0?0:0|x(e)),!g.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function _(t,e){var n=e.length<0?0:0|x(e.length);t=v(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function x(t){if(t>=p())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p().toString(16)+" bytes");return 0|t}function w(t){return!(null==t||!t._isBuffer)}function A(t,e){if(w(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(t).length;default:if(r)return X(t).length;e=(""+e).toLowerCase(),r=!0}}function k(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function M(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=g.from(e,r)),w(e))return 0===e.length?-1:T(t,e,n,r,i);if("number"===typeof e)return e&=255,g.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):T(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(l(t,a+d)!==l(e,d)){f=!1;break}if(f)return a}return-1}function S(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function C(t,e,n,r){return J(X(e,t.length-n),t,n,r)}function E(t,e,n,r){return J(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function O(t,e,n,r){return E(t,e,n,r)}function P(t,e,n,r){return J($(e),t,n,r)}function L(t,e,n,r){return J(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?l(t):l(t.slice(e,n))}function D(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=F)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=F));return n}(r)}g.TYPED_ARRAY_SUPPORT=void 0===n.TYPED_ARRAY_SUPPORT||n.TYPED_ARRAY_SUPPORT,g.poolSize=8192,g._augment=function(t){return t.__proto__=g.prototype,t},g.from=function(t,e,n){return m(null,t,e,n)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array),g.alloc=function(t,e,n){return function(t,e,n,r){return y(e),e<=0?v(t,e):void 0!==n?"string"===typeof r?v(t,e).fill(n,r):v(t,e).fill(n):v(t,e)}(null,t,e,n)},g.allocUnsafe=function(t){return b(null,t)},g.allocUnsafeSlow=function(t){return b(null,t)},g.isBuffer=function(t){return null!=t&&(!!t._isBuffer||K(t)||function(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&K(t.slice(0,0))}(t))},g.compare=function(t,e){if(!w(t)||!w(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},g.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(t,e){if(!h(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return g.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=g.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!w(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},g.byteLength=A,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)k(this,e,e+1);return this},g.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)k(this,e,e+3),k(this,e+1,e+2);return this},g.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)k(this,e,e+7),k(this,e+1,e+6),k(this,e+2,e+5),k(this,e+3,e+4);return this},g.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?D(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return z(this,e,n);case"utf8":case"utf-8":return D(this,e,n);case"ascii":return j(this,e,n);case"latin1":case"binary":return N(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},g.prototype.equals=function(t){if(!w(t))throw new TypeError("Argument must be a Buffer");return this===t||0===g.compare(this,t)},g.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},g.prototype.compare=function(t,e,n,r,i){if(!w(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=t.slice(e,n),c=0;c<s;++c)if(u[c]!==l[c]){a=u[c],o=l[c];break}return a<o?-1:o<a?1:0},g.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},g.prototype.indexOf=function(t,e,n){return M(this,t,e,n,!0)},g.prototype.lastIndexOf=function(t,e,n){return M(this,t,e,n,!1)},g.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return S(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return O(this,t,e,n);case"base64":return P(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function j(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function N(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function z(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=Z(t[a]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function B(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function q(t,e,n,r,i,a){if(!w(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function U(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function H(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function W(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(t,e,n,r,i){return i||W(t,0,n,4),f(t,e,n,r,23,4),n+4}function V(t,e,n,r,i){return i||W(t,0,n,8),f(t,e,n,r,52,8),n+8}g.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),g.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=g.prototype;else{var i=e-t;n=new g(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},g.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},g.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},g.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},g.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},g.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},g.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},g.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},g.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},g.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},g.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},g.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},g.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},g.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},g.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},g.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),c(this,t,!0,23,4)},g.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),c(this,t,!1,23,4)},g.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),c(this,t,!0,52,8)},g.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),c(this,t,!1,52,8)},g.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||q(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},g.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||q(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},g.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,1,255,0),g.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},g.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},g.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},g.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},g.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},g.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);q(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},g.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);q(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},g.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,1,127,-128),g.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},g.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},g.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},g.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},g.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||q(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},g.prototype.writeFloatLE=function(t,e,n){return G(this,t,e,!0,n)},g.prototype.writeFloatBE=function(t,e,n){return G(this,t,e,!1,n)},g.prototype.writeDoubleLE=function(t,e,n){return V(this,t,e,!0,n)},g.prototype.writeDoubleBE=function(t,e,n){return V(this,t,e,!1,n)},g.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!g.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},g.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!g.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=w(t)?t:X(new g(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function $(t){return function(t){var e,n,r,u,l,c;o||s();var f=t.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");l="="===t[f-2]?2:"="===t[f-1]?1:0,c=new a(3*f/4-l),r=l>0?f-4:f;var d=0;for(e=0,n=0;e<r;e+=4,n+=3)u=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],c[d++]=u>>16&255,c[d++]=u>>8&255,c[d++]=255&u;return 2===l?(u=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,c[d++]=255&u):1===l&&(u=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,c[d++]=u>>8&255,c[d++]=255&u),c}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Y,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function J(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function K(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function Q(){throw new Error("setTimeout has not been defined")}function tt(){throw new Error("clearTimeout has not been defined")}var et=Q,nt=tt;function rt(t){if(et===setTimeout)return setTimeout(t,0);if((et===Q||!et)&&setTimeout)return et=setTimeout,setTimeout(t,0);try{return et(t,0)}catch(e){try{return et.call(null,t,0)}catch(e){return et.call(this,t,0)}}}"function"===typeof n.setTimeout&&(et=setTimeout),"function"===typeof n.clearTimeout&&(nt=clearTimeout);var it,at=[],ot=!1,st=-1;function ut(){ot&&it&&(ot=!1,it.length?at=it.concat(at):st=-1,at.length&&lt())}function lt(){if(!ot){var t=rt(ut);ot=!0;for(var e=at.length;e;){for(it=at,at=[];++st<e;)it&&it[st].run();st=-1,e=at.length}it=null,ot=!1,function(t){if(nt===clearTimeout)return clearTimeout(t);if((nt===tt||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout(t);try{nt(t)}catch(e){try{return nt.call(null,t)}catch(e){return nt.call(this,t)}}}(t)}}function ct(t,e){this.fun=t,this.array=e}ct.prototype.run=function(){this.fun.apply(null,this.array)};function ft(){}var dt=ft,ht=ft,pt=ft,vt=ft,gt=ft,mt=ft,yt=ft;var bt=n.performance||{},_t=bt.now||bt.mozNow||bt.msNow||bt.oNow||bt.webkitNow||function(){return(new Date).getTime()};var xt=new Date;var wt={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];at.push(new ct(t,e)),1!==at.length||ot||rt(lt)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:dt,addListener:ht,once:pt,off:vt,removeListener:gt,removeAllListeners:mt,emit:yt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*_t.call(bt),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-xt)/1e3}},At="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function kt(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var Mt={},Tt=Object.freeze({default:{}}),St=/[^\0-\x7E]/,Ct=/[\x2E\u3002\uFF0E\uFF61]/g,Et={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ot=Math.floor,Pt=String.fromCharCode;function Lt(t){throw new RangeError(Et[t])}var Rt=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},Dt=function(t,e,n){var r=0;for(t=n?Ot(t/700):t>>1,t+=Ot(t/e);t>455;r+=36)t=Ot(t/35);return Ot(r+36*t/(t+38))},Ft=function(t){return function(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]);var i=function(t,e){for(var n=[],r=t.length;r--;)n[r]=e(t[r]);return n}((t=t.replace(Ct,".")).split("."),e).join(".");return r+i}(t,function(t){return St.test(t)?"xn--"+function(t){var e=[],n=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&i)<<10)+(1023&a)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,r=128,i=0,a=72,o=e.length,s=o;for(o&&e.push("-");s<n;){var u=2147483647,l=!0,c=!1,f=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;p>=r&&p<u&&(u=p)}}catch(S){c=!0,f=S}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}var v=s+1;u-r>Ot((2147483647-i)/v)&&Lt("overflow"),i+=(u-r)*v,r=u;var g=!0,m=!1,y=void 0;try{for(var b,_=t[Symbol.iterator]();!(g=(b=_.next()).done);g=!0){var x=b.value;if(x<r&&++i>2147483647&&Lt("overflow"),x==r){for(var w=i,A=36;;A+=36){var k=A<=a?1:A>=a+26?26:A-a;if(w<k)break;var M=w-k,T=36-k;e.push(Pt(Rt(k+M%T,0))),w=Ot(M/T)}e.push(Pt(Rt(w,0))),a=Dt(i,v,s==o),i=0,++s}}}catch(S){m=!0,y=S}finally{try{g||null==_.return||_.return()}finally{if(m)throw y}}++i,++r}return e.join("")}(t):t})};function jt(t){return null===t}function Nt(t){return"string"===typeof t}function zt(t){return"object"===typeof t&&null!==t}function It(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Bt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function qt(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function Ut(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var Ht=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e};function Wt(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!==typeof t||0===t.length)return i;var a=/\+/g;t=t.split(e);var o=1e3;r&&"number"===typeof r.maxKeys&&(o=r.maxKeys);var s=t.length;o>0&&s>o&&(s=o);for(var u=0;u<s;++u){var l,c,f,d,h=t[u].replace(a,"%20"),p=h.indexOf(n);p>=0?(l=h.substr(0,p),c=h.substr(p+1)):(l=h,c=""),f=decodeURIComponent(l),d=decodeURIComponent(c),It(i,f)?Bt(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i}var Gt={parse:oe,resolve:function(t,e){return oe(t,!1,!0).resolve(e)},resolveObject:function(t,e){return t?oe(t,!1,!0).resolveObject(e):e},format:function(t){Nt(t)&&(t=se({},t));return ue(t)},Url:Vt};function Vt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Yt=/^([a-z0-9.+-]+:)/i,Zt=/:[0-9]*$/,Xt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,$t=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Jt=["'"].concat($t),Kt=["%","/","?",";","#"].concat(Jt),Qt=["/","?","#"],te=255,ee=/^[+a-z0-9A-Z_-]{0,63}$/,ne=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,re={javascript:!0,"javascript:":!0},ie={javascript:!0,"javascript:":!0},ae={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function oe(t,e,n){if(t&&zt(t)&&t instanceof Vt)return t;var r=new Vt;return r.parse(t,e,n),r}function se(t,e,n,r){if(!Nt(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",o=e.split(a);o[0]=o[0].replace(/\\/g,"/");var s=e=o.join(a);if(s=s.trim(),!r&&1===e.split("#").length){var u=Xt.exec(s);if(u)return t.path=s,t.href=s,t.pathname=u[1],u[2]?(t.search=u[2],t.query=n?Wt(t.search.substr(1)):t.search.substr(1)):n&&(t.search="",t.query={}),t}var l,c,f,d,h=Yt.exec(s);if(h){var p=(h=h[0]).toLowerCase();t.protocol=p,s=s.substr(h.length)}if(r||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===s.substr(0,2);!v||h&&ie[h]||(s=s.substr(2),t.slashes=!0)}if(!ie[h]&&(v||h&&!ae[h])){var g,m,y=-1;for(l=0;l<Qt.length;l++)-1!==(c=s.indexOf(Qt[l]))&&(-1===y||c<y)&&(y=c);for(-1!==(m=-1===y?s.lastIndexOf("@"):s.lastIndexOf("@",y))&&(g=s.slice(0,m),s=s.slice(m+1),t.auth=decodeURIComponent(g)),y=-1,l=0;l<Kt.length;l++)-1!==(c=s.indexOf(Kt[l]))&&(-1===y||c<y)&&(y=c);-1===y&&(y=s.length),t.host=s.slice(0,y),s=s.slice(y),le(t),t.hostname=t.hostname||"";var b="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1];if(!b){var _=t.hostname.split(/\./);for(l=0,f=_.length;l<f;l++){var x=_[l];if(x&&!x.match(ee)){for(var w="",A=0,k=x.length;A<k;A++)x.charCodeAt(A)>127?w+="x":w+=x[A];if(!w.match(ee)){var M=_.slice(0,l),T=_.slice(l+1),S=x.match(ne);S&&(M.push(S[1]),T.unshift(S[2])),T.length&&(s="/"+T.join(".")+s),t.hostname=M.join(".");break}}}}t.hostname.length>te?t.hostname="":t.hostname=t.hostname.toLowerCase(),b||(t.hostname=Ft(t.hostname)),d=t.port?":"+t.port:"";var C=t.hostname||"";t.host=C+d,t.href+=t.host,b&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!re[p])for(l=0,f=Jt.length;l<f;l++){var E=Jt[l];if(-1!==s.indexOf(E)){var O=encodeURIComponent(E);O===E&&(O=escape(E)),s=s.split(E).join(O)}}var P=s.indexOf("#");-1!==P&&(t.hash=s.substr(P),s=s.slice(0,P));var L=s.indexOf("?");if(-1!==L?(t.search=s.substr(L),t.query=s.substr(L+1),n&&(t.query=Wt(t.query)),s=s.slice(0,L)):n&&(t.search="",t.query={}),s&&(t.pathname=s),ae[p]&&t.hostname&&!t.pathname&&(t.pathname="/"),t.pathname||t.search){d=t.pathname||"";var R=t.search||"";t.path=d+R}return t.href=ue(t),t}function ue(t){var e=t.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var n,r,i,a,o=t.protocol||"",s=t.pathname||"",u=t.hash||"",l=!1,c="";t.host?l=e+t.host:t.hostname&&(l=e+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(l+=":"+t.port)),t.query&&zt(t.query)&&Object.keys(t.query).length&&(n=t.query,r=r||"&",i=i||"=",null===n&&(n=void 0),c="object"===typeof n?Ut(Ht(n),function(t){var e=encodeURIComponent(qt(t))+i;return Bt(n[t])?Ut(n[t],function(t){return e+encodeURIComponent(qt(t))}).join(r):e+encodeURIComponent(qt(n[t]))}).join(r):a?encodeURIComponent(qt(a))+i+encodeURIComponent(qt(n)):"");var f=t.search||c&&"?"+c||"";return o&&":"!==o.substr(-1)&&(o+=":"),t.slashes||(!o||ae[o])&&!1!==l?(l="//"+(l||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):l||(l=""),u&&"#"!==u.charAt(0)&&(u="#"+u),f&&"?"!==f.charAt(0)&&(f="?"+f),o+l+(s=s.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(f=f.replace("#","%23"))+u}function le(t){var e=t.host,n=Zt.exec(e);n&&(":"!==(n=n[0])&&(t.port=n.substr(1)),e=e.substr(0,e.length-n.length)),e&&(t.hostname=e)}Vt.prototype.parse=function(t,e,n){return se(this,t,e,n)},Vt.prototype.format=function(){return ue(this)},Vt.prototype.resolve=function(t){return this.resolveObject(oe(t,!1,!0)).format()},Vt.prototype.resolveObject=function(t){if(Nt(t)){var e=new Vt;e.parse(t,!1,!0),t=e}for(var n,r=new Vt,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(r[l]=t[l])}return ae[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!ae[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||ie[t.protocol])r.pathname=t.pathname;else{for(n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var h=r.pathname||"",p=r.search||"";r.path=h+p}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v,g=r.pathname&&"/"===r.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=m||g||r.host&&t.pathname,b=y,_=r.pathname&&r.pathname.split("/")||[],x=r.protocol&&!ae[r.protocol];if(n=t.pathname&&t.pathname.split("/")||[],x&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),y=y&&(""===n[0]||""===_[0])),m)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,_=n;else if(n.length)_||(_=[]),_.pop(),_=_.concat(n),r.search=t.search,r.query=t.query;else if(null!=t.search)return x&&(r.hostname=r.host=_.shift(),(v=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=v.shift(),r.host=r.hostname=v.shift())),r.search=t.search,r.query=t.query,jt(r.pathname)&&jt(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=_.slice(-1)[0],A=(r.host||t.host||_.length>1)&&("."===w||".."===w)||""===w,k=0,M=_.length;M>=0;M--)"."===(w=_[M])?_.splice(M,1):".."===w?(_.splice(M,1),k++):k&&(_.splice(M,1),k--);if(!y&&!b)for(;k--;k)_.unshift("..");!y||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),A&&"/"!==_.join("/").substr(-1)&&_.push("");var T=""===_[0]||_[0]&&"/"===_[0].charAt(0);return x&&(r.hostname=r.host=T?"":_.length?_.shift():"",(v=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=v.shift(),r.host=r.hostname=v.shift())),(y=y||r.host&&_.length)&&!T&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),jt(r.pathname)&&jt(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Vt.prototype.parseHost=function(){return le(this)};var ce,fe,de,he=(ce=Tt)&&ce.default||ce,pe=(function(t,e){var n;n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var r=n(1),i=n(146),a=n(162),o=n(163),s=n(151),u=n(164),l=n(156),c=n(153);if(n(4)()){var f=n(165).PDFNodeStream;i.setPDFNetworkStreamFactory(function(t){return new f(t)})}else if("undefined"!==typeof Response&&"body"in Response.prototype&&"undefined"!==typeof ReadableStream){var d=n(168).PDFFetchStream;i.setPDFNetworkStreamFactory(function(t){return new d(t)})}else{var h=n(169).PDFNetworkStream;i.setPDFNetworkStreamFactory(function(t){return new h(t)})}e.build=i.build,e.version=i.version,e.getDocument=i.getDocument,e.LoopbackPort=i.LoopbackPort,e.PDFDataRangeTransport=i.PDFDataRangeTransport,e.PDFWorker=i.PDFWorker,e.renderTextLayer=a.renderTextLayer,e.AnnotationLayer=o.AnnotationLayer,e.createPromiseCapability=r.createPromiseCapability,e.PasswordResponses=r.PasswordResponses,e.InvalidPDFException=r.InvalidPDFException,e.MissingPDFException=r.MissingPDFException,e.SVGGraphics=u.SVGGraphics,e.NativeImageDecoding=r.NativeImageDecoding,e.CMapCompressionType=r.CMapCompressionType,e.PermissionFlag=r.PermissionFlag,e.UnexpectedResponseException=r.UnexpectedResponseException,e.OPS=r.OPS,e.VerbosityLevel=r.VerbosityLevel,e.UNSUPPORTED_FEATURES=r.UNSUPPORTED_FEATURES,e.createValidAbsoluteUrl=r.createValidAbsoluteUrl,e.createObjectURL=r.createObjectURL,e.removeNullCharacters=r.removeNullCharacters,e.shadow=r.shadow,e.Util=r.Util,e.ReadableStream=r.ReadableStream,e.URL=r.URL,e.RenderingCancelledException=s.RenderingCancelledException,e.getFilenameFromUrl=s.getFilenameFromUrl,e.LinkTarget=s.LinkTarget,e.addLinkAttributes=s.addLinkAttributes,e.loadScript=s.loadScript,e.GlobalWorkerOptions=l.GlobalWorkerOptions,e.apiCompatibilityParams=c.apiCompatibilityParams},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.toRomanNumerals=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c(Number.isInteger(t)&&t>0,"The number should be a positive integer.");var n,r=[];for(;t>=1e3;)t-=1e3,r.push("M");n=t/100|0,t%=100,r.push(M[n]),n=t/10|0,t%=10,r.push(M[10+n]),r.push(M[20+t]);var i=r.join("");return e?i.toLowerCase():i},e.arrayByteLength=A,e.arraysToBytes=function(t){if(1===t.length&&t[0]instanceof Uint8Array)return t[0];var e,n,r,i=0,a=t.length;for(e=0;e<a;e++)n=t[e],r=A(n),i+=r;var o=0,s=new Uint8Array(i);for(e=0;e<a;e++)(n=t[e])instanceof Uint8Array||(n="string"===typeof n?w(n):new Uint8Array(n)),r=n.byteLength,s.set(n,o),o+=r;return s},e.assert=c,e.bytesToString=function(t){c(null!==t&&"object"===a(t)&&void 0!==t.length,"Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);for(var n=[],r=0;r<e;r+=8192){var i=Math.min(r+8192,e),o=t.subarray(r,i);n.push(String.fromCharCode.apply(null,o))}return n.join("")},e.createPromiseCapability=function(){var t=Object.create(null),e=!1;return Object.defineProperty(t,"settled",{get:function(){return e}}),t.promise=new Promise(function(n,r){t.resolve=function(t){e=!0,n(t)},t.reject=function(t){e=!0,r(t)}}),t},e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getInheritableProperty=function(t){var e,n=t.dict,r=t.key,i=t.getArray,a=void 0!==i&&i,o=t.stopWhenFound,s=void 0===o||o,l=0;for(;n;){var c=a?n.getArray(r):n.get(r);if(void 0!==c){if(s)return c;e||(e=[]),e.push(c)}if(++l>100){u('getInheritableProperty: maximum loop count exceeded for "'.concat(r,'"'));break}n=n.get("Parent")}return e},e.getLookupTableFactory=function(t){var e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}},e.getVerbosityLevel=function(){return s},e.info=function(t){s>=o.INFOS&&console.log("Info: "+t)},e.isArrayBuffer=function(t){return"object"===a(t)&&null!==t&&void 0!==t.byteLength},e.isBool=function(t){return"boolean"===typeof t},e.isEmptyObj=function(t){for(var e in t)return!1;return!0},e.isNum=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSpace=function(t){return 32===t||9===t||13===t||10===t},e.isSameOrigin=function(t,e){try{var n=new i.URL(t);if(!n.origin||"null"===n.origin)return!1}catch(a){return!1}var r=new i.URL(e,n);return n.origin===r.origin},e.createValidAbsoluteUrl=function(t,e){if(!t)return null;try{var n=e?new i.URL(t,e):new i.URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(r){}return null},e.isLittleEndian=function(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]},e.isEvalSupported=function(){try{return new Function(""),!0}catch(t){return!1}},e.log2=function(t){if(t<=0)return 0;return Math.ceil(Math.log2(t))},e.readInt8=function(t,e){return t[e]<<24>>24},e.readUint16=function(t,e){return t[e]<<8|t[e+1]},e.readUint32=function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0},e.removeNullCharacters=function(t){if("string"!==typeof t)return u("The argument for removeNullCharacters must be a string."),t;return t.replace(x,"")},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(s=t)},e.shadow=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n},e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=w,e.stringToPDFString=function(t){var e,n=t.length,r=[];if("\xfe"===t[0]&&"\xff"===t[1])for(e=2;e<n;e+=2)r.push(String.fromCharCode(t.charCodeAt(e)<<8|t.charCodeAt(e+1)));else for(e=0;e<n;++e){var i=T[t.charCodeAt(e)];r.push(i?String.fromCharCode(i):t.charAt(e))}return r.join("")},e.stringToUTF8String=function(t){return decodeURIComponent(escape(t))},e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=u,e.unreachable=l,Object.defineProperty(e,"ReadableStream",{enumerable:!0,get:function(){return r.ReadableStream}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return i.URL}}),e.createObjectURL=e.FormatError=e.XRefParseException=e.XRefEntryException=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.NativeImageDecoding=e.MissingPDFException=e.MissingDataException=e.InvalidPDFException=e.AbortException=e.CMapCompressionType=e.ImageKind=e.FontType=e.AnnotationType=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.UNSUPPORTED_FEATURES=e.VerbosityLevel=e.OPS=e.IDENTITY_MATRIX=e.FONT_IDENTITY_MATRIX=void 0,n(2);var r=n(142),i=n(144);function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.IDENTITY_MATRIX=[1,0,0,1,0,0];e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];e.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"};e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9};e.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};var o={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=o;e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var s=o.WARNINGS;function u(t){s>=o.WARNINGS&&console.log("Warning: "+t)}function l(t){throw new Error(t)}function c(t,e){t||l(e)}var f=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}();e.PasswordException=f;var d=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}();e.UnknownErrorException=d;var h=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();e.InvalidPDFException=h;var p=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();e.MissingPDFException=p;var v=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}();e.UnexpectedResponseException=v;var g=function(){function t(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}return t.prototype=new Error,t.prototype.name="MissingDataException",t.constructor=t,t}();e.MissingDataException=g;var m=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="XRefEntryException",t.constructor=t,t}();e.XRefEntryException=m;var y=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="XRefParseException",t.constructor=t,t}();e.XRefParseException=y;var b=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="FormatError",t.constructor=t,t}();e.FormatError=b;var _=function(){function t(t){this.name="AbortException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();e.AbortException=_;var x=/\x00/g;function w(t){c("string"===typeof t,"Invalid argument for stringToBytes");for(var e=t.length,n=new Uint8Array(e),r=0;r<e;++r)n[r]=255&t.charCodeAt(r);return n}function A(t){return void 0!==t.length?t.length:(c(void 0!==t.byteLength),t.byteLength)}var k=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];return t.makeCssRgb=function(t,n,r){return e[1]=t,e[3]=n,e[5]=r,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]},t.applyInverseTransform=function(t,e){var n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]},t.getAxialAlignedBoundingBox=function(e,n){var r=t.applyTransform(e,n),i=t.applyTransform(e.slice(2,4),n),a=t.applyTransform([e[0],e[3]],n),o=t.applyTransform([e[2],e[1]],n);return[Math.min(r[0],i[0],a[0],o[0]),Math.min(r[1],i[1],a[1],o[1]),Math.max(r[0],i[0],a[0],o[0]),Math.max(r[1],i[1],a[1],o[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],i=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(n+a)/2,s=Math.sqrt((n+a)*(n+a)-4*(n*a-i*r))/2,u=o+s||1,l=o-s||1;return[Math.sqrt(u),Math.sqrt(l)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,n){function r(t,e){return t-e}var i=[e[0],e[2],n[0],n[2]].sort(r),a=[e[1],e[3],n[1],n[3]].sort(r),o=[];return e=t.normalizeRect(e),n=t.normalizeRect(n),(i[0]===e[0]&&i[1]===n[0]||i[0]===n[0]&&i[1]===e[0])&&(o[0]=i[1],o[2]=i[2],(a[0]===e[1]&&a[1]===n[1]||a[0]===n[1]&&a[1]===e[1])&&(o[1]=a[1],o[3]=a[2],o))},t}();e.Util=k;var M=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];var T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];var S=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(e,n){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&i.URL.createObjectURL){var r=new Blob([e],{type:n});return i.URL.createObjectURL(r)}for(var a="data:"+n+";base64,",o=0,s=e.length;o<s;o+=3){var u=255&e[o],l=255&e[o+1],c=255&e[o+2];a+=t[u>>2]+t[(3&u)<<4|l>>4]+t[o+1<s?(15&l)<<2|c>>6:64]+t[o+2<s?63&c:64]}return a}}();e.createObjectURL=S},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(3);if(!i._pdfjsCompatibilityChecked){i._pdfjsCompatibilityChecked=!0;var a=n(4),o="object"===("undefined"===typeof window?"undefined":r(window))&&"object"===("undefined"===typeof document?"undefined":r(document));!i.btoa&&a()&&(i.btoa=function(t){return g.from(t,"binary").toString("base64")}),!i.atob&&a()&&(i.atob=function(t){return g.from(t,"base64").toString("binary")}),o&&"undefined"===typeof Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),function(){if(o&&!a()){var t=document.createElement("div");if(t.classList.add("testOne","testTwo"),!0!==t.classList.contains("testOne")||!0!==t.classList.contains("testTwo")){var e=DOMTokenList.prototype.add,n=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var a=n[i];e.call(this,a)}},DOMTokenList.prototype.remove=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var i=0;i<e.length;i++){var a=e[i];n.call(this,a)}}}}}(),o&&!a()&&!1!==document.createElement("div").classList.toggle("test",0)&&(DOMTokenList.prototype.toggle=function(t){var e=arguments.length>1?!!arguments[1]:!this.contains(t);return this[e?"add":"remove"](t),e}),String.prototype.startsWith||n(5),String.prototype.endsWith||n(35),String.prototype.includes||n(37),Array.prototype.includes||n(39),Array.from||n(46),Object.assign||n(69),Math.log2||(Math.log2=n(74)),Number.isNaN||(Number.isNaN=n(76)),Number.isInteger||(Number.isInteger=n(78)),i.Promise&&i.Promise.prototype&&i.Promise.prototype.finally||(i.Promise=n(81)),i.WeakMap||(i.WeakMap=n(101)),i.WeakSet||(i.WeakSet=n(118)),String.codePointAt||(String.codePointAt=n(122)),String.fromCodePoint||(String.fromCodePoint=n(124)),i.Symbol||n(126),String.prototype.padStart||n(133),String.prototype.padEnd||n(137),Object.values||(Object.values=n(139))}},function(t,e,n){t.exports="undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof At&&At.Math===Math?At:"undefined"!==typeof self&&self.Math===Math?self:{}},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(){return"object"===("undefined"===typeof wt?"undefined":r(wt))&&wt+""==="[object process]"&&!wt.versions.nw}},function(t,e,n){n(6),t.exports=n(9).String.startsWith},function(t,e,n){var r=n(7),i=n(25),a=n(27),o="".startsWith;r(r.P+r.F*n(34)("startsWith"),"String",{startsWith:function(t){var e=a(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return o?o.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){var r=n(8),i=n(9),a=n(10),o=n(20),s=n(23),u=function t(e,n,u){var l,c,f,d,h=e&t.F,p=e&t.G,v=e&t.P,g=e&t.B,m=p?r:e&t.S?r[n]||(r[n]={}):(r[n]||{}).prototype,y=p?i:i[n]||(i[n]={}),b=y.prototype||(y.prototype={});for(l in p&&(u=n),u)f=((c=!h&&m&&void 0!==m[l])?m:u)[l],d=g&&c?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,m&&o(m,l,f,e&t.U),y[l]!=f&&a(y,l,d),v&&b[l]!=f&&(b[l]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,n){var r=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=r)},function(t,e,n){var r=n(11),i=n(19);t.exports=n(15)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(12),i=n(14),a=n(18),o=Object.defineProperty;e.f=n(15)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return o(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(13);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===r(t)?null!==t:"function"===typeof t}},function(t,e,n){t.exports=!n(15)&&!n(16)(function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(13),i=n(8).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(13);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(8),i=n(10),a=n(21),o=n(22)("src"),s=Function.toString,u=(""+s).split("toString");n(9).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(a(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(a(n,o)||i(n,o,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(t,e,n){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,n){var r=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},function(t,e,n){var r=n(24);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(26),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},function(t,e,n){var r=n(28),i=n(33);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(13),i=n(29),a=n(30)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},function(t,e,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,n){var r=n(31)("wks"),i=n(22),a=n(8).Symbol,o="function"==typeof a;(t.exports=function(t){return r[t]||(r[t]=o&&a[t]||(o?a:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(9),i=n(8),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(32)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){t.exports=!1},function(t,e,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(30)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(i){}}return!0}},function(t,e,n){n(36),t.exports=n(9).String.endsWith},function(t,e,n){var r=n(7),i=n(25),a=n(27),o="".endsWith;r(r.P+r.F*n(34)("endsWith"),"String",{endsWith:function(t){var e=a(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return o?o.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){n(38),t.exports=n(9).String.includes},function(t,e,n){var r=n(7),i=n(27);r(r.P+r.F*n(34)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){n(40),t.exports=n(9).Array.includes},function(t,e,n){var r=n(7),i=n(41)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(45)("includes")},function(t,e,n){var r=n(42),i=n(25),a=n(44);t.exports=function(t){return function(e,n,o){var s,u=r(e),l=i(u.length),c=a(o,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(43),i=n(33);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(26),i=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):a(t,e)}},function(t,e,n){var r=n(30)("unscopables"),i=Array.prototype;void 0==i[r]&&n(10)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){n(47),n(62),t.exports=n(9).Array.from},function(t,e,n){var r=n(48)(!0);n(49)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(26),i=n(33);t.exports=function(t){return function(e,n){var a,o,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},function(t,e,n){var r=n(32),i=n(7),a=n(20),o=n(10),s=n(50),u=n(51),l=n(59),c=n(60),f=n(30)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,p,v,g,m){u(n,e,p);var y,b,_,x=function(t){if(!d&&t in M)return M[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",A="values"==v,k=!1,M=t.prototype,T=M[f]||M["@@iterator"]||v&&M[v],S=T||x(v),C=v?A?x("entries"):S:void 0,E="Array"==e&&M.entries||T;if(E&&(_=c(E.call(new t)))!==Object.prototype&&_.next&&(l(_,w,!0),r||"function"==typeof _[f]||o(_,f,h)),A&&T&&"values"!==T.name&&(k=!0,S=function(){return T.call(this)}),r&&!m||!d&&!k&&M[f]||o(M,f,S),s[e]=S,s[w]=h,v)if(y={values:A?S:x("values"),keys:g?S:x("keys"),entries:C},m)for(b in y)b in M||a(M,b,y[b]);else i(i.P+i.F*(d||k),e,y);return y}},function(t,e,n){t.exports={}},function(t,e,n){var r=n(52),i=n(19),a=n(59),o={};n(10)(o,n(30)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(o,{next:i(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var r=n(12),i=n(53),a=n(57),o=n(56)("IE_PROTO"),s=function(){},u=function(){var t,e=n(17)("iframe"),r=a.length;for(e.style.display="none",n(58).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[a[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[o]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(11),i=n(12),a=n(54);t.exports=n(15)?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),s=o.length,u=0;s>u;)r.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var r=n(55),i=n(57);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(21),i=n(42),a=n(41)(!1),o=n(56)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)n!=o&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~a(l,n)||l.push(n));return l}},function(t,e,n){var r=n(31)("keys"),i=n(22);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(8).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(11).f,i=n(21),a=n(30)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e,n){var r=n(21),i=n(61),a=n(56)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var r=n(33);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(23),i=n(7),a=n(61),o=n(63),s=n(64),u=n(25),l=n(65),c=n(66);i(i.S+i.F*!n(68)(function(t){}),"Array",{from:function(t){var e,n,i,f,d=a(t),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,m=0,y=c(d);if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(n=new h(e=u(d.length));e>m;m++)l(n,m,g?v(d[m],m):d[m]);else for(f=y.call(d),n=new h;!(i=f.next()).done;m++)l(n,m,g?o(f,v,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t.return;throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(50),i=n(30)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[i]===t)}},function(t,e,n){var r=n(11),i=n(19);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(67),i=n(30)("iterator"),a=n(50);t.exports=n(9).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[r(t)]}},function(t,e,n){var r=n(29),i=n(30)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:a?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){var r=n(30)("iterator"),i=!1;try{[7][r]().return=function(){i=!0}}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(a){}return n}},function(t,e,n){n(70),t.exports=n(9).Object.assign},function(t,e,n){var r=n(7);r(r.S+r.F,"Object",{assign:n(71)})},function(t,e,n){var r=n(54),i=n(72),a=n(73),o=n(61),s=n(43),u=Object.assign;t.exports=!u||n(16)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=o(t),u=arguments.length,l=1,c=i.f,f=a.f;u>l;)for(var d,h=s(arguments[l++]),p=c?r(h).concat(c(h)):r(h),v=p.length,g=0;v>g;)f.call(h,d=p[g++])&&(n[d]=h[d]);return n}:u},function(t,e,n){e.f=Object.getOwnPropertySymbols},function(t,e,n){e.f={}.propertyIsEnumerable},function(t,e,n){n(75),t.exports=n(9).Math.log2},function(t,e,n){var r=n(7);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){n(77),t.exports=n(9).Number.isNaN},function(t,e,n){var r=n(7);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){n(79),t.exports=n(9).Number.isInteger},function(t,e,n){var r=n(7);r(r.S,"Number",{isInteger:n(80)})},function(t,e,n){var r=n(13),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){n(82),n(47),n(83),n(86),n(99),n(100),t.exports=n(9).Promise},function(t,e,n){var r=n(67),i={};i[n(30)("toStringTag")]="z",i+""!="[object z]"&&n(20)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){for(var r=n(84),i=n(54),a=n(20),o=n(8),s=n(10),u=n(50),l=n(30),c=l("iterator"),f=l("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),v=0;v<p.length;v++){var g,m=p[v],y=h[m],b=o[m],_=b&&b.prototype;if(_&&(_[c]||s(_,c,d),_[f]||s(_,f,m),u[m]=d,y))for(g in r)_[g]||a(_,g,r[g],!0)}},function(t,e,n){var r=n(45),i=n(85),a=n(50),o=n(42);t.exports=n(49)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(t,e,n){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r,i,a,o,s=n(32),u=n(8),l=n(23),c=n(67),f=n(7),d=n(13),h=n(24),p=n(87),v=n(88),g=n(89),m=n(90).set,y=n(92)(),b=n(93),_=n(94),x=n(95),w=n(96),A=u.TypeError,k=u.process,M=k&&k.versions,T=M&&M.v8||"",S=u.Promise,C="process"==c(k),E=function(){},O=i=b.f,P=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(30)("species")]=function(t){t(E,E)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e&&0!==T.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(r){}}(),L=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,a=0,o=function(e){var n,a,o,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&j(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),o=!0)),n===e.promise?l(A("Promise-chain cycle")):(a=L(n))?a.call(n,u,l):u(n)):l(r)}catch(f){c&&!o&&c.exit(),l(f)}};n.length>a;)o(n[a++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){m.call(u,function(){var e,n,r,i=t._v,a=F(t);if(a&&(e=_(function(){C?k.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=C||F(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},j=function(t){m.call(u,function(){var e;C?k.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},z=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw A("Promise can't be resolved itself");(n=L(e))?y(function(){var i={_w:r,_d:!1};try{n.call(e,l(t,i,1),l(N,i,1))}catch(a){N.call(i,a)}}):(r._v=e,r._s=1,R(r,!1))}catch(i){N.call({_w:r,_d:!1},i)}}};P||(S=function(t){p(this,S,"Promise","_h"),h(t),r.call(this);try{t(l(z,this,1),l(N,this,1))}catch(e){N.call(this,e)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(97)(S.prototype,{then:function(t,e){var n=O(g(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new r;this.promise=t,this.resolve=l(z,t,1),this.reject=l(N,t,1)},b.f=O=function(t){return t===S||t===o?new a(t):i(t)}),f(f.G+f.W+f.F*!P,{Promise:S}),n(59)(S,"Promise"),n(98)("Promise"),o=n(9).Promise,f(f.S+f.F*!P,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!P),"Promise",{resolve:function(t){return w(s&&this===o?S:this,t)}}),f(f.S+f.F*!(P&&n(68)(function(t){S.all(t).catch(E)})),"Promise",{all:function(t){var e=this,n=O(e),r=n.resolve,i=n.reject,a=_(function(){var n=[],a=0,o=1;v(t,!1,function(t){var s=a++,u=!1;n.push(void 0),o++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--o||r(n))},i)}),--o||r(n)});return a.e&&i(a.v),n.promise},race:function(t){var e=this,n=O(e),r=n.reject,i=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(23),i=n(63),a=n(64),o=n(12),s=n(25),u=n(66),l={},c={},f=t.exports=function(t,e,n,f,d){var h,p,v,g,m=d?function(){return t}:u(t),y=r(n,f,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(a(m)){for(h=s(t.length);h>b;b++)if((g=e?y(o(p=t[b])[0],p[1]):y(t[b]))===l||g===c)return g}else for(v=m.call(t);!(p=v.next()).done;)if((g=i(v,y,p.value,e))===l||g===c)return g};f.BREAK=l,f.RETURN=c},function(t,e,n){var r=n(12),i=n(24),a=n(30)("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},function(t,e,n){var r,i,a,o=n(23),s=n(91),u=n(58),l=n(17),c=n(8),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,g=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){y.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},h=function(t){delete m[t]},"process"==n(29)(f)?r=function(t){f.nextTick(o(y,t,1))}:v&&v.now?r=function(t){v.now(o(y,t,1))}:p?(a=(i=new p).port2,i.port1.onmessage=b,r=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(o(y,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(8),i=n(90).set,a=r.MutationObserver||r.WebKitMutationObserver,o=r.process,s=r.Promise,u="process"==n(29)(o);t.exports=function(){var t,e,n,l=function(){var r,i;for(u&&(r=o.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(a){throw t?n():e=void 0,a}}e=void 0,r&&r.enter()};if(u)n=function(){o.nextTick(l)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var f=!0,d=document.createTextNode("");new a(l).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(24);function i(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},function(t,e,n){var r=n(8).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(12),i=n(13),a=n(93);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(8),i=n(11),a=n(15),o=n(30)("species");t.exports=function(t){var e=r[t];a&&e&&!e[o]&&i.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(7),i=n(9),a=n(8),o=n(89),s=n(96);r(r.P+r.R,"Promise",{finally:function(t){var e=o(this,i.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){var r=n(7),i=n(93),a=n(94);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=a(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(82),n(83),n(102),n(114),n(116),t.exports=n(9).WeakMap},function(t,e,n){var r,i=n(103)(0),a=n(20),o=n(107),s=n(71),u=n(108),l=n(13),c=n(16),f=n(109),d=o.getWeak,h=Object.isExtensible,p=u.ufstore,v={},g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(l(t)){var e=d(t);return!0===e?p(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},y=t.exports=n(110)("WeakMap",g,m,u,!0,!0);c(function(){return 7!=(new y).set((Object.freeze||Object)(v),7).get(v)})&&(s((r=u.getConstructor(g,"WeakMap")).prototype,m),o.NEED=!0,i(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];a(e,t,function(e,i){if(l(e)&&!h(e)){this._f||(this._f=new r);var a=this._f[t](e,i);return"set"==t?this:a}return n.call(this,e,i)})}))},function(t,e,n){var r=n(23),i=n(43),a=n(61),o=n(25),s=n(104);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,p){for(var v,g,m=a(e),y=i(m),b=r(s,p,3),_=o(y.length),x=0,w=n?h(e,_):u?h(e,0):void 0;_>x;x++)if((d||x in y)&&(g=b(v=y[x],x,m),t))if(n)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:w.push(v)}else if(c)return!1;return f?-1:l||c?c:w}}},function(t,e,n){var r=n(105);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(13),i=n(106),a=n(30)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(29);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(22)("meta"),a=n(13),o=n(21),s=n(11).f,u=0,l=Object.isExtensible||function(){return!0},c=!n(16)(function(){return l(Object.preventExtensions({}))}),f=function(t){s(t,i,{value:{i:"O"+ ++u,w:{}}})},d=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==r(t)?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[i].w},onFreeze:function(t){return c&&d.NEED&&l(t)&&!o(t,i)&&f(t),t}}},function(t,e,n){var r=n(97),i=n(107).getWeak,a=n(12),o=n(13),s=n(87),u=n(88),l=n(103),c=n(21),f=n(109),d=l(5),h=l(6),p=0,v=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return d(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=r&&u(r,n,t[a],t)});return r(l.prototype,{delete:function(t){if(!o(t))return!1;var n=i(t);return!0===n?v(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=i(t);return!0===n?v(f(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var r=i(a(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){var r=n(13);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var r=n(8),i=n(7),a=n(20),o=n(97),s=n(107),u=n(88),l=n(87),c=n(13),f=n(16),d=n(68),h=n(59),p=n(111);t.exports=function(t,e,n,v,g,m){var y=r[t],b=y,_=g?"set":"add",x=b&&b.prototype,w={},A=function(t){var e=x[t];a(x,t,"delete"==t?function(t){return!(m&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(m||x.forEach&&!f(function(){(new b).entries().next()}))){var k=new b,M=k[_](m?{}:-0,1)!=k,T=f(function(){k.has(1)}),S=d(function(t){new b(t)}),C=!m&&f(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});S||((b=e(function(e,n){l(e,b,t);var r=p(new y,e,b);return void 0!=n&&u(n,g,r[_],r),r})).prototype=x,x.constructor=b),(T||C)&&(A("delete"),A("has"),g&&A("get")),(C||M)&&A(_),m&&x.clear&&delete x.clear}else b=v.getConstructor(e,t,g,_),o(b.prototype,n),s.NEED=!0;return h(b,t),w[t]=b,i(i.G+i.W+i.F*(b!=y),w),m||v.setStrong(b,t,g),b}},function(t,e,n){var r=n(13),i=n(112).set;t.exports=function(t,e,n){var a,o=e.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&r(a)&&i&&i(t,a),t}},function(t,e,n){var r=n(13),i=n(12),a=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(23)(Function.call,n(113).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){var r=n(73),i=n(19),a=n(42),o=n(18),s=n(21),u=n(14),l=Object.getOwnPropertyDescriptor;e.f=n(15)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){n(115)("WeakMap")},function(t,e,n){var r=n(7);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(117)("WeakMap")},function(t,e,n){var r=n(7),i=n(24),a=n(23),o=n(88);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return i(this),(e=void 0!==u)&&i(u),void 0==t?new this:(n=[],e?(r=0,s=a(u,arguments[2],2),o(t,!1,function(t){n.push(s(t,r++))})):o(t,!1,n.push,n),new this(n))}})}},function(t,e,n){n(82),n(83),n(119),n(120),n(121),t.exports=n(9).WeakSet},function(t,e,n){var r=n(108),i=n(109);n(110)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){n(115)("WeakSet")},function(t,e,n){n(117)("WeakSet")},function(t,e,n){n(123),t.exports=n(9).String.codePointAt},function(t,e,n){var r=n(7),i=n(48)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){n(125),t.exports=n(9).String.fromCodePoint},function(t,e,n){var r=n(7),i=n(44),a=String.fromCharCode,o=String.fromCodePoint;r(r.S+r.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,o=0;r>o;){if(e=+arguments[o++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){n(127),n(82),t.exports=n(9).Symbol},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(8),a=n(21),o=n(15),s=n(7),u=n(20),l=n(107).KEY,c=n(16),f=n(31),d=n(59),h=n(22),p=n(30),v=n(128),g=n(129),m=n(130),y=n(106),b=n(12),_=n(13),x=n(42),w=n(18),A=n(19),k=n(52),M=n(131),T=n(113),S=n(11),C=n(54),E=T.f,O=S.f,P=M.f,L=i.Symbol,R=i.JSON,D=R&&R.stringify,F=p("_hidden"),j=p("toPrimitive"),N={}.propertyIsEnumerable,z=f("symbol-registry"),I=f("symbols"),B=f("op-symbols"),q=Object.prototype,U="function"==typeof L,H=i.QObject,W=!H||!H.prototype||!H.prototype.findChild,G=o&&c(function(){return 7!=k(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=E(q,e);r&&delete q[e],O(t,e,n),r&&t!==q&&O(q,e,r)}:O,V=function(t){var e=I[t]=k(L.prototype);return e._k=t,e},Y=U&&"symbol"==r(L.iterator)?function(t){return"symbol"==r(t)}:function(t){return t instanceof L},Z=function(t,e,n){return t===q&&Z(B,e,n),b(t),e=w(e,!0),b(n),a(I,e)?(n.enumerable?(a(t,F)&&t[F][e]&&(t[F][e]=!1),n=k(n,{enumerable:A(0,!1)})):(a(t,F)||O(t,F,A(1,{})),t[F][e]=!0),G(t,e,n)):O(t,e,n)},X=function(t,e){b(t);for(var n,r=m(e=x(e)),i=0,a=r.length;a>i;)Z(t,n=r[i++],e[n]);return t},$=function(t){var e=N.call(this,t=w(t,!0));return!(this===q&&a(I,t)&&!a(B,t))&&(!(e||!a(this,t)||!a(I,t)||a(this,F)&&this[F][t])||e)},J=function(t,e){if(t=x(t),e=w(e,!0),t!==q||!a(I,e)||a(B,e)){var n=E(t,e);return!n||!a(I,e)||a(t,F)&&t[F][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=P(x(t)),r=[],i=0;n.length>i;)a(I,e=n[i++])||e==F||e==l||r.push(e);return r},Q=function(t){for(var e,n=t===q,r=P(n?B:x(t)),i=[],o=0;r.length>o;)!a(I,e=r[o++])||n&&!a(q,e)||i.push(I[e]);return i};U||(u((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0);return o&&W&&G(q,t,{configurable:!0,set:function e(n){this===q&&e.call(B,n),a(this,F)&&a(this[F],t)&&(this[F][t]=!1),G(this,t,A(1,n))}}),V(t)}).prototype,"toString",function(){return this._k}),T.f=J,S.f=Z,n(132).f=M.f=K,n(73).f=$,n(72).f=Q,o&&!n(32)&&u(q,"propertyIsEnumerable",$,!0),v.f=function(t){return V(p(t))}),s(s.G+s.W+s.F*!U,{Symbol:L});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=C(p.store),rt=0;nt.length>rt;)g(nt[rt++]);s(s.S+s.F*!U,"Symbol",{for:function(t){return a(z,t+="")?z[t]:z[t]=L(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!U,"Object",{create:function(t,e){return void 0===e?k(t):X(k(t),e)},defineProperty:Z,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:Q}),R&&s(s.S+s.F*(!U||c(function(){var t=L();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!Y(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,D.apply(R,r)}}),L.prototype[j]||n(10)(L.prototype,j,L.prototype.valueOf),d(L,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(t,e,n){e.f=n(30)},function(t,e,n){var r=n(8),i=n(9),a=n(32),o=n(128),s=n(11).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(54),i=n(72),a=n(73);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var o,s=n(t),u=a.f,l=0;s.length>l;)u.call(t,o=s[l++])&&e.push(o);return e}},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(42),a=n(132).f,o={}.toString,s="object"==("undefined"===typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return a(t)}catch(e){return s.slice()}}(t):a(i(t))}},function(t,e,n){var r=n(55),i=n(57).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){n(134),t.exports=n(9).String.padStart},function(t,e,n){var r=n(7),i=n(135),a=n(95);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var r=n(25),i=n(136),a=n(33);t.exports=function(t,e,n,o){var s=String(a(t)),u=s.length,l=void 0===n?" ":String(n),c=r(e);if(c<=u||""==l)return s;var f=c-u,d=i.call(l,Math.ceil(f/l.length));return d.length>f&&(d=d.slice(0,f)),o?d+s:s+d}},function(t,e,n){var r=n(26),i=n(33);t.exports=function(t){var e=String(i(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},function(t,e,n){n(138),t.exports=n(9).String.padEnd},function(t,e,n){var r=n(7),i=n(135),a=n(95);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){n(140),t.exports=n(9).Object.values},function(t,e,n){var r=n(7),i=n(141)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(54),i=n(42),a=n(73).f;t.exports=function(t){return function(e){for(var n,o=i(e),s=r(o),u=s.length,l=0,c=[];u>l;)a.call(o,n=s[l++])&&c.push(t?[n,o[n]]:o[n]);return c}}},function(t,e,n){var r=!1;if("undefined"!==typeof ReadableStream)try{new ReadableStream({start:function(t){t.close()}}),r=!0}catch(i){}e.ReadableStream=r?ReadableStream:n(143).ReadableStream},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){for(var n in e)t[n]=e[n]}(e,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){var i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},a=n(1).assert;function o(t){return"string"===typeof t||"symbol"===("undefined"===typeof t?"undefined":i(t))}function s(t,e,n){if("function"!==typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,n)}e.typeIsObject=function(t){return"object"===("undefined"===typeof t?"undefined":i(t))&&null!==t||"function"===typeof t},e.createDataProperty=function(t,n,r){a(e.typeIsObject(t)),Object.defineProperty(t,n,{value:r,writable:!0,enumerable:!0,configurable:!0})},e.createArrayFromList=function(t){return t.slice()},e.ArrayBufferCopy=function(t,e,n,r,i){new Uint8Array(t).set(new Uint8Array(n,r,i),e)},e.CreateIterResultObject=function(t,e){a("boolean"===typeof e);var n={};return Object.defineProperty(n,"value",{value:t,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(n,"done",{value:e,enumerable:!0,writable:!0,configurable:!0}),n},e.IsFiniteNonNegativeNumber=function(t){return!Number.isNaN(t)&&(t!==1/0&&!(t<0))},e.InvokeOrNoop=function(t,e,n){a(void 0!==t),a(o(e)),a(Array.isArray(n));var r=t[e];if(void 0!==r)return s(r,t,n)},e.PromiseInvokeOrNoop=function(t,n,r){a(void 0!==t),a(o(n)),a(Array.isArray(r));try{return Promise.resolve(e.InvokeOrNoop(t,n,r))}catch(i){return Promise.reject(i)}},e.PromiseInvokeOrPerformFallback=function(t,e,n,r,i){a(void 0!==t),a(o(e)),a(Array.isArray(n)),a(Array.isArray(i));var u=void 0;try{u=t[e]}catch(l){return Promise.reject(l)}if(void 0===u)return r.apply(null,i);try{return Promise.resolve(s(u,t,n))}catch(c){return Promise.reject(c)}},e.TransferArrayBuffer=function(t){return t.slice()},e.ValidateAndNormalizeHighWaterMark=function(t){if(t=Number(t),Number.isNaN(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t},e.ValidateAndNormalizeQueuingStrategy=function(t,n){if(void 0!==t&&"function"!==typeof t)throw new TypeError("size property of a queuing strategy must be a function");return{size:t,highWaterMark:n=e.ValidateAndNormalizeHighWaterMark(n)}}},function(t,e,n){function r(t){this.name="AssertionError",this.message=t||"",this.stack=(new Error).stack}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports={rethrowAssertionErrorRejection:function(t){t&&t.constructor===r&&setTimeout(function(){throw t},0)},AssertionError:r,assert:function(t,e){if(!t)throw new r(e)}}},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(0),o=a.InvokeOrNoop,s=a.PromiseInvokeOrNoop,u=a.ValidateAndNormalizeQueuingStrategy,l=a.typeIsObject,c=n(1),f=c.assert,d=c.rethrowAssertionErrorRejection,h=n(3),p=h.DequeueValue,v=h.EnqueueValueWithSize,g=h.PeekQueueValue,m=h.ResetQueue,y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size,a=n.highWaterMark,o=void 0===a?1:a;if(i(this,t),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1,void 0!==e.type)throw new RangeError("Invalid type is specified");this._writableStreamController=new z(this,e,r,o),this._writableStreamController.__startSteps()}return r(t,[{key:"abort",value:function(t){return!1===_(this)?Promise.reject(W("abort")):!0===x(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):w(this,t)}},{key:"getWriter",value:function(){if(!1===_(this))throw W("getWriter");return b(this)}},{key:"locked",get:function(){if(!1===_(this))throw W("locked");return x(this)}}]),t}();function b(t){return new P(t)}function _(t){return!!l(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function x(t){return f(!0===_(t),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==t._writer}function w(t,e){var n=t._state;if("closed"===n)return Promise.resolve(void 0);if("errored"===n)return Promise.reject(t._storedError);var r=new TypeError("Requested to abort");if(void 0!==t._pendingAbortRequest)return Promise.reject(r);f("writable"===n||"erroring"===n,"state must be writable or erroring");var i=!1;"erroring"===n&&(i=!0,e=void 0);var a=new Promise(function(n,r){t._pendingAbortRequest={_resolve:n,_reject:r,_reason:e,_wasAlreadyErroring:i}});return!1===i&&k(t,r),a}function A(t,e){var n=t._state;"writable"!==n?(f("erroring"===n),M(t)):k(t,e)}function k(t,e){f(void 0===t._storedError,"stream._storedError === undefined"),f("writable"===t._state,"state must be writable");var n=t._writableStreamController;f(void 0!==n,"controller must not be undefined"),t._state="erroring",t._storedError=e;var r=t._writer;void 0!==r&&F(r,e),!1===C(t)&&!0===n._started&&M(t)}function M(t){f("erroring"===t._state,"stream._state === erroring"),f(!1===C(t),"WritableStreamHasOperationMarkedInFlight(stream) === false"),t._state="errored",t._writableStreamController.__errorSteps();for(var e=t._storedError,n=0;n<t._writeRequests.length;n++){t._writeRequests[n]._reject(e)}if(t._writeRequests=[],void 0!==t._pendingAbortRequest){var r=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===r._wasAlreadyErroring)return r._reject(e),void E(t);t._writableStreamController.__abortSteps(r._reason).then(function(){r._resolve(),E(t)},function(e){r._reject(e),E(t)})}else E(t)}function T(t){f(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;var e=t._state;f("writable"===e||"erroring"===e),"erroring"===e&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var n=t._writer;void 0!==n&&function(t){f(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),f(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),f("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(n),f(void 0===t._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),f(void 0===t._storedError,"stream._storedError === undefined")}function S(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function C(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function E(t){f("errored"===t._state,'_stream_.[[state]] is `"errored"`'),void 0!==t._closeRequest&&(f(void 0===t._inFlightCloseRequest),t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var e=t._writer;void 0!==e&&(Z(e,t._storedError),e._closedPromise.catch(function(){}))}function O(t,e){f("writable"===t._state),f(!1===S(t));var n=t._writer;void 0!==n&&e!==t._backpressure&&(!0===e?function(t){f(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),f(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=new Promise(function(e,n){t._readyPromise_resolve=e,t._readyPromise_reject=n}),t._readyPromiseState="pending"}(n):(f(!1===e),J(n))),t._backpressure=e}t.exports={AcquireWritableStreamDefaultWriter:b,IsWritableStream:_,IsWritableStreamLocked:x,WritableStream:y,WritableStreamAbort:w,WritableStreamDefaultControllerError:H,WritableStreamDefaultWriterCloseWithErrorPropagation:function(t){var e=t._ownerWritableStream;f(void 0!==e);var n=e._state;if(!0===S(e)||"closed"===n)return Promise.resolve();if("errored"===n)return Promise.reject(e._storedError);return f("writable"===n||"erroring"===n),R(t)},WritableStreamDefaultWriterRelease:j,WritableStreamDefaultWriterWrite:N,WritableStreamCloseQueuedOrInFlight:S};var P=function(){function t(e){if(i(this,t),!1===_(e))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===x(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var n,r=e._state;if("writable"===r)!1===S(e)&&!0===e._backpressure?((n=this)._readyPromise=new Promise(function(t,e){n._readyPromise_resolve=t,n._readyPromise_reject=e}),n._readyPromiseState="pending"):$(this),Y(this);else if("erroring"===r)X(this,e._storedError),this._readyPromise.catch(function(){}),Y(this);else if("closed"===r)$(this),function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(this);else{f("errored"===r,"state must be errored");var a=e._storedError;X(this,a),this._readyPromise.catch(function(){}),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}(this,a),this._closedPromise.catch(function(){})}}return r(t,[{key:"abort",value:function(t){return!1===L(this)?Promise.reject(G("abort")):void 0===this._ownerWritableStream?Promise.reject(V("abort")):function(t,e){var n=t._ownerWritableStream;return f(void 0!==n),w(n,e)}(this,t)}},{key:"close",value:function(){if(!1===L(this))return Promise.reject(G("close"));var t=this._ownerWritableStream;return void 0===t?Promise.reject(V("close")):!0===S(t)?Promise.reject(new TypeError("cannot close an already-closing stream")):R(this)}},{key:"releaseLock",value:function(){if(!1===L(this))throw G("releaseLock");var t=this._ownerWritableStream;void 0!==t&&(f(void 0!==t._writer),j(this))}},{key:"write",value:function(t){return!1===L(this)?Promise.reject(G("write")):void 0===this._ownerWritableStream?Promise.reject(V("write to")):N(this,t)}},{key:"closed",get:function(){return!1===L(this)?Promise.reject(G("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===L(this))throw G("desiredSize");if(void 0===this._ownerWritableStream)throw V("desiredSize");return function(t){var e=t._ownerWritableStream,n=e._state;if("errored"===n||"erroring"===n)return null;if("closed"===n)return 0;return I(e._writableStreamController)}(this)}},{key:"ready",get:function(){return!1===L(this)?Promise.reject(G("ready")):this._readyPromise}}]),t}();function L(t){return!!l(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function R(t){var e=t._ownerWritableStream;f(void 0!==e);var n=e._state;if("closed"===n||"errored"===n)return Promise.reject(new TypeError("The stream (in "+n+" state) is not in the writable state and cannot be closed"));f("writable"===n||"erroring"===n),f(!1===S(e));var r,i=new Promise(function(t,n){var r={_resolve:t,_reject:n};e._closeRequest=r});return!0===e._backpressure&&"writable"===n&&J(t),r=e._writableStreamController,v(r,"close",0),B(r),i}function D(t,e){"pending"===t._closedPromiseState?Z(t,e):function(t,e){f(void 0===t._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),f(void 0===t._closedPromise_reject,"writer._closedPromise_reject === undefined"),f("pending"!==t._closedPromiseState,"writer._closedPromiseState is not pending"),t._closedPromise=Promise.reject(e),t._closedPromiseState="rejected"}(t,e),t._closedPromise.catch(function(){})}function F(t,e){"pending"===t._readyPromiseState?function(t,e){f(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),f(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}(t,e):function(t,e){f(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),f(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=Promise.reject(e),t._readyPromiseState="rejected"}(t,e),t._readyPromise.catch(function(){})}function j(t){var e=t._ownerWritableStream;f(void 0!==e),f(e._writer===t);var n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");F(t,n),D(t,n),e._writer=void 0,t._ownerWritableStream=void 0}function N(t,e){var n=t._ownerWritableStream;f(void 0!==n);var r=n._writableStreamController,i=function(t,e){var n=t._strategySize;if(void 0===n)return 1;try{return n(e)}catch(r){return q(t,r),1}}(r,e);if(n!==t._ownerWritableStream)return Promise.reject(V("write to"));var a=n._state;if("errored"===a)return Promise.reject(n._storedError);if(!0===S(n)||"closed"===a)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===a)return Promise.reject(n._storedError);f("writable"===a);var o=function(t){return f(!0===x(t)),f("writable"===t._state),new Promise(function(e,n){var r={_resolve:e,_reject:n};t._writeRequests.push(r)})}(n);return function(t,e,n){var r={chunk:e};try{v(t,r,n)}catch(o){return void q(t,o)}var i=t._controlledWritableStream;if(!1===S(i)&&"writable"===i._state){var a=U(t);O(i,a)}B(t)}(r,e,i),o}var z=function(){function t(e,n,r,a){if(i(this,t),!1===_(e))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==e._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=e,this._underlyingSink=n,this._queue=void 0,this._queueTotalSize=void 0,m(this),this._started=!1;var o=u(r,a);this._strategySize=o.size,this._strategyHWM=o.highWaterMark,O(e,U(this))}return r(t,[{key:"error",value:function(t){if(!1===function(t){if(!l(t))return!1;if(!Object.prototype.hasOwnProperty.call(t,"_underlyingSink"))return!1;return!0}(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&H(this,t)}},{key:"__abortSteps",value:function(t){return s(this._underlyingSink,"abort",[t])}},{key:"__errorSteps",value:function(){m(this)}},{key:"__startSteps",value:function(){var t=this,e=o(this._underlyingSink,"start",[this]),n=this._controlledWritableStream;Promise.resolve(e).then(function(){f("writable"===n._state||"erroring"===n._state),t._started=!0,B(t)},function(e){f("writable"===n._state||"erroring"===n._state),t._started=!0,A(n,e)}).catch(d)}}]),t}();function I(t){return t._strategyHWM-t._queueTotalSize}function B(t){var e=t._controlledWritableStream;if(!1!==t._started&&void 0===e._inFlightWriteRequest){var n=e._state;if("closed"!==n&&"errored"!==n)if("erroring"!==n){if(0!==t._queue.length){var r=g(t);"close"===r?function(t){var e=t._controlledWritableStream;(function(t){f(void 0===t._inFlightCloseRequest),f(void 0!==t._closeRequest),t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0})(e),p(t),f(0===t._queue.length,"queue must be empty once the final write record is dequeued"),s(t._underlyingSink,"close",[]).then(function(){T(e)},function(t){!function(t,e){f(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,f("writable"===t._state||"erroring"===t._state),void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),A(t,e)}(e,t)}).catch(d)}(t):function(t,e){var n=t._controlledWritableStream;(function(t){f(void 0===t._inFlightWriteRequest,"there must be no pending write request"),f(0!==t._writeRequests.length,"writeRequests must not be empty"),t._inFlightWriteRequest=t._writeRequests.shift()})(n),s(t._underlyingSink,"write",[e,t]).then(function(){!function(t){f(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}(n);var e=n._state;if(f("writable"===e||"erroring"===e),p(t),!1===S(n)&&"writable"===e){var r=U(t);O(n,r)}B(t)},function(t){!function(t,e){f(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._reject(e),t._inFlightWriteRequest=void 0,f("writable"===t._state||"erroring"===t._state),A(t,e)}(n,t)}).catch(d)}(t,r.chunk)}}else M(e)}}function q(t,e){"writable"===t._controlledWritableStream._state&&H(t,e)}function U(t){return I(t)<=0}function H(t,e){var n=t._controlledWritableStream;f("writable"===n._state),k(n,e)}function W(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function G(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function V(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function Y(t){t._closedPromise=new Promise(function(e,n){t._closedPromise_resolve=e,t._closedPromise_reject=n,t._closedPromiseState="pending"})}function Z(t,e){f(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),f(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),f("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function X(t,e){t._readyPromise=Promise.reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function $(t){t._readyPromise=Promise.resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function J(t){f(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),f(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}},function(t,e,n){var r=n(0).IsFiniteNonNegativeNumber,i=n(1).assert;e.DequeueValue=function(t){i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(t._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value},e.EnqueueValueWithSize=function(t,e,n){if(i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),n=Number(n),!r(n))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:e,size:n}),t._queueTotalSize+=n},e.PeekQueueValue=function(t){return i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(t._queue.length>0,"Spec-level failure: should never peek at an empty queue."),t._queue[0].value},e.ResetQueue=function(t){i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),t._queue=[],t._queueTotalSize=0}},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(0),o=a.ArrayBufferCopy,s=a.CreateIterResultObject,u=a.IsFiniteNonNegativeNumber,l=a.InvokeOrNoop,c=a.PromiseInvokeOrNoop,f=a.TransferArrayBuffer,d=a.ValidateAndNormalizeQueuingStrategy,h=a.ValidateAndNormalizeHighWaterMark,p=n(0),v=p.createArrayFromList,g=p.createDataProperty,m=p.typeIsObject,y=n(1),b=y.assert,_=y.rethrowAssertionErrorRejection,x=n(3),w=x.DequeueValue,A=x.EnqueueValueWithSize,k=x.ResetQueue,M=n(2),T=M.AcquireWritableStreamDefaultWriter,S=M.IsWritableStream,C=M.IsWritableStreamLocked,E=M.WritableStreamAbort,O=M.WritableStreamDefaultWriterCloseWithErrorPropagation,P=M.WritableStreamDefaultWriterRelease,L=M.WritableStreamDefaultWriterWrite,R=M.WritableStreamCloseQueuedOrInFlight,D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size,a=n.highWaterMark;i(this,t),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var o=e.type;if("bytes"===String(o))void 0===a&&(a=0),this._readableStreamController=new dt(this,e,a);else{if(void 0!==o)throw new RangeError("Invalid type is specified");void 0===a&&(a=1),this._readableStreamController=new rt(this,e,r,a)}}return r(t,[{key:"cancel",value:function(t){return!1===j(this)?Promise.reject(Et("cancel")):!0===N(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):q(this,t)}},{key:"getReader",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mode;if(!1===j(this))throw Et("getReader");if(void 0===t)return F(this);if("byob"===(t=String(t)))return new $(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(t,e){var n=t.writable,r=t.readable;return function(t){try{Promise.prototype.then.call(t,void 0,function(){})}catch(e){}}(this.pipeTo(n,e)),r}},{key:"pipeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.preventClose,i=n.preventAbort,a=n.preventCancel;if(!1===j(this))return Promise.reject(Et("pipeTo"));if(!1===S(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(r=Boolean(r),i=Boolean(i),a=Boolean(a),!0===N(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===C(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var o=F(this),s=T(t),u=!1,l=Promise.resolve();return new Promise(function(n,c){var f,d,h;if(g(e,o._closedPromise,function(e){!1===i?m(function(){return E(t,e)},!0,e):y(!0,e)}),g(t,s._closedPromise,function(t){!1===a?m(function(){return q(e,t)},!0,t):y(!0,t)}),f=e,d=o._closedPromise,h=function(){!1===r?m(function(){return O(s)}):y()},"closed"===f._state?h():d.then(h).catch(_),!0===R(t)||"closed"===t._state){var p=new TypeError("the destination writable stream closed before all data could be piped to it");!1===a?m(function(){return q(e,p)},!0,p):y(!0,p)}function v(){var t=l;return l.then(function(){return t!==l?v():void 0})}function g(t,e,n){"errored"===t._state?n(t._storedError):e.catch(n).catch(_)}function m(e,n,r){function i(){e().then(function(){return b(n,r)},function(t){return b(!0,t)}).catch(_)}!0!==u&&(u=!0,"writable"===t._state&&!1===R(t)?v().then(i):i())}function y(e,n){!0!==u&&(u=!0,"writable"===t._state&&!1===R(t)?v().then(function(){return b(e,n)}).catch(_):b(e,n))}function b(t,e){P(s),et(o),t?c(e):n(void 0)}(function t(){return l=Promise.resolve(),!0===u?Promise.resolve():s._readyPromise.then(function(){return nt(o).then(function(t){var e=t.value;!0!==t.done&&(l=L(s,e).catch(function(){}))})}).then(t)})().catch(function(t){l=Promise.resolve(),_(t)})})}},{key:"tee",value:function(){if(!1===j(this))throw Et("tee");var t=z(this,!1);return v(t)}},{key:"locked",get:function(){if(!1===j(this))throw Et("locked");return N(this)}}]),t}();function F(t){return new X(t)}function j(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function N(t){return b(!0===j(t),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==t._reader}function z(t,e){b(!0===j(t)),b("boolean"===typeof e);var n=F(t),r={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};r.promise=new Promise(function(t){r._resolve=t});var i=function(){return function t(){var e=t._reader,n=t._branch1,r=t._branch2,i=t._teeState;return nt(e).then(function(t){b(m(t));var e=t.value,a=t.done;if(b("boolean"===typeof a),!0===a&&!1===i.closedOrErrored&&(!1===i.canceled1&&ot(n),!1===i.canceled2&&ot(r),i.closedOrErrored=!0),!0!==i.closedOrErrored){var o=e,s=e;!1===i.canceled1&&st(n,o),!1===i.canceled2&&st(r,s)}})}}();i._reader=n,i._teeState=r,i._cloneForBranch2=e;var a=function(){return function t(e){var n=t._stream,r=t._teeState;r.canceled1=!0;r.reason1=e;if(!0===r.canceled2){var i=v([r.reason1,r.reason2]),a=q(n,i);r._resolve(a)}return r.promise}}();a._stream=t,a._teeState=r;var o=function(){return function t(e){var n=t._stream,r=t._teeState;r.canceled2=!0;r.reason2=e;if(!0===r.canceled1){var i=v([r.reason1,r.reason2]),a=q(n,i);r._resolve(a)}return r.promise}}();o._stream=t,o._teeState=r;var s=Object.create(Object.prototype);g(s,"pull",i),g(s,"cancel",a);var u=new D(s),l=Object.create(Object.prototype);g(l,"pull",i),g(l,"cancel",o);var c=new D(l);return i._branch1=u._readableStreamController,i._branch2=c._readableStreamController,n._closedPromise.catch(function(t){!0!==r.closedOrErrored&&(ut(i._branch1,t),ut(i._branch2,t),r.closedOrErrored=!0)}),[u,c]}function I(t){return b(!0===J(t._reader)),b("readable"===t._state||"closed"===t._state),new Promise(function(e,n){var r={_resolve:e,_reject:n};t._reader._readIntoRequests.push(r)})}function B(t){return b(!0===K(t._reader)),b("readable"===t._state),new Promise(function(e,n){var r={_resolve:e,_reject:n};t._reader._readRequests.push(r)})}function q(t,e){return t._disturbed=!0,"closed"===t._state?Promise.resolve(void 0):"errored"===t._state?Promise.reject(t._storedError):(U(t),t._readableStreamController.__cancelSteps(e).then(function(){}))}function U(t){b("readable"===t._state),t._state="closed";var e=t._reader;if(void 0!==e){if(!0===K(e)){for(var n=0;n<e._readRequests.length;n++){(0,e._readRequests[n]._resolve)(s(void 0,!0))}e._readRequests=[]}!function(t){b(void 0!==t._closedPromise_resolve),b(void 0!==t._closedPromise_reject),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(e)}}function H(t,e){b(!0===j(t),"stream must be ReadableStream"),b("readable"===t._state,"state must be readable"),t._state="errored",t._storedError=e;var n=t._reader;if(void 0!==n){if(!0===K(n)){for(var r=0;r<n._readRequests.length;r++){n._readRequests[r]._reject(e)}n._readRequests=[]}else{b(J(n),"reader must be ReadableStreamBYOBReader");for(var i=0;i<n._readIntoRequests.length;i++){n._readIntoRequests[i]._reject(e)}n._readIntoRequests=[]}Lt(n,e),n._closedPromise.catch(function(){})}}function W(t,e,n){var r=t._reader;b(r._readRequests.length>0),r._readRequests.shift()._resolve(s(e,n))}function G(t){return t._reader._readIntoRequests.length}function V(t){return t._reader._readRequests.length}function Y(t){var e=t._reader;return void 0!==e&&!1!==J(e)}function Z(t){var e=t._reader;return void 0!==e&&!1!==K(e)}t.exports={ReadableStream:D,IsReadableStreamDisturbed:function(t){return b(!0===j(t),"IsReadableStreamDisturbed should only be used on known readable streams"),t._disturbed},ReadableStreamDefaultControllerClose:ot,ReadableStreamDefaultControllerEnqueue:st,ReadableStreamDefaultControllerError:ut,ReadableStreamDefaultControllerGetDesiredSize:ct};var X=function(){function t(e){if(i(this,t),!1===j(e))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===N(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Q(this,e),this._readRequests=[]}return r(t,[{key:"cancel",value:function(t){return!1===K(this)?Promise.reject(Pt("cancel")):void 0===this._ownerReadableStream?Promise.reject(Ot("cancel")):tt(this,t)}},{key:"read",value:function(){return!1===K(this)?Promise.reject(Pt("read")):void 0===this._ownerReadableStream?Promise.reject(Ot("read from")):nt(this)}},{key:"releaseLock",value:function(){if(!1===K(this))throw Pt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");et(this)}}},{key:"closed",get:function(){return!1===K(this)?Promise.reject(Pt("closed")):this._closedPromise}}]),t}(),$=function(){function t(e){if(i(this,t),!j(e))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===ht(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(N(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Q(this,e),this._readIntoRequests=[]}return r(t,[{key:"cancel",value:function(t){return J(this)?void 0===this._ownerReadableStream?Promise.reject(Ot("cancel")):tt(this,t):Promise.reject(Rt("cancel"))}},{key:"read",value:function(t){return J(this)?void 0===this._ownerReadableStream?Promise.reject(Ot("read from")):ArrayBuffer.isView(t)?0===t.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):function(t,e){var n=t._ownerReadableStream;if(b(void 0!==n),n._disturbed=!0,"errored"===n._state)return Promise.reject(n._storedError);return function(t,e){var n=t._controlledReadableStream,r=1;e.constructor!==DataView&&(r=e.constructor.BYTES_PER_ELEMENT);var i=e.constructor,a={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:r,ctor:i,readerType:"byob"};if(t._pendingPullIntos.length>0)return a.buffer=f(a.buffer),t._pendingPullIntos.push(a),I(n);if("closed"===n._state){var o=new e.constructor(a.buffer,a.byteOffset,0);return Promise.resolve(s(o,!0))}if(t._queueTotalSize>0){if(!0===_t(t,a)){var u=yt(a);return wt(t),Promise.resolve(s(u,!1))}if(!0===t._closeRequested){var l=new TypeError("Insufficient bytes to fill elements in the given buffer");return St(t,l),Promise.reject(l)}}a.buffer=f(a.buffer),t._pendingPullIntos.push(a);var c=I(n);return vt(t),c}(n._readableStreamController,e)}(this,t):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(Rt("read"))}},{key:"releaseLock",value:function(){if(!J(this))throw Rt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");et(this)}}},{key:"closed",get:function(){return J(this)?this._closedPromise:Promise.reject(Rt("closed"))}}]),t}();function J(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function K(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function Q(t,e){t._ownerReadableStream=e,e._reader=t,"readable"===e._state?function(t){t._closedPromise=new Promise(function(e,n){t._closedPromise_resolve=e,t._closedPromise_reject=n})}(t):"closed"===e._state?function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t):(b("errored"===e._state,"state must be errored"),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t,e._storedError),t._closedPromise.catch(function(){}))}function tt(t,e){var n=t._ownerReadableStream;return b(void 0!==n),q(n,e)}function et(t){b(void 0!==t._ownerReadableStream),b(t._ownerReadableStream._reader===t),"readable"===t._ownerReadableStream._state?Lt(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){b(void 0===t._closedPromise_resolve),b(void 0===t._closedPromise_reject),t._closedPromise=Promise.reject(e)}(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._closedPromise.catch(function(){}),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function nt(t){var e=t._ownerReadableStream;return b(void 0!==e),e._disturbed=!0,"closed"===e._state?Promise.resolve(s(void 0,!0)):"errored"===e._state?Promise.reject(e._storedError):(b("readable"===e._state),e._readableStreamController.__pullSteps())}var rt=function(){function t(e,n,r,a){if(i(this,t),!1===j(e))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==e._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=e,this._underlyingSource=n,this._queue=void 0,this._queueTotalSize=void 0,k(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var o=d(r,a);this._strategySize=o.size,this._strategyHWM=o.highWaterMark;var s=this,u=l(n,"start",[this]);Promise.resolve(u).then(function(){s._started=!0,b(!1===s._pulling),b(!1===s._pullAgain),at(s)},function(t){lt(s,t)}).catch(_)}return r(t,[{key:"close",value:function(){if(!1===it(this))throw Dt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");ot(this)}},{key:"enqueue",value:function(t){if(!1===it(this))throw Dt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");return st(this,t)}},{key:"error",value:function(t){if(!1===it(this))throw Dt("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");ut(this,t)}},{key:"__cancelSteps",value:function(t){return k(this),c(this._underlyingSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(this._queue.length>0){var e=w(this);return!0===this._closeRequested&&0===this._queue.length?U(t):at(this),Promise.resolve(s(e,!1))}var n=B(t);return at(this),n}},{key:"desiredSize",get:function(){if(!1===it(this))throw Dt("desiredSize");return ct(this)}}]),t}();function it(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSource")}function at(t){!1!==function(t){var e=t._controlledReadableStream;if("closed"===e._state||"errored"===e._state)return!1;if(!0===t._closeRequested)return!1;if(!1===t._started)return!1;if(!0===N(e)&&V(e)>0)return!0;if(ct(t)>0)return!0;return!1}(t)&&(!0!==t._pulling?(b(!1===t._pullAgain),t._pulling=!0,c(t._underlyingSource,"pull",[t]).then(function(){if(t._pulling=!1,!0===t._pullAgain)return t._pullAgain=!1,at(t)},function(e){lt(t,e)}).catch(_)):t._pullAgain=!0)}function ot(t){var e=t._controlledReadableStream;b(!1===t._closeRequested),b("readable"===e._state),t._closeRequested=!0,0===t._queue.length&&U(e)}function st(t,e){var n=t._controlledReadableStream;if(b(!1===t._closeRequested),b("readable"===n._state),!0===N(n)&&V(n)>0)W(n,e,!1);else{var r=1;if(void 0!==t._strategySize){var i=t._strategySize;try{r=i(e)}catch(a){throw lt(t,a),a}}try{A(t,e,r)}catch(o){throw lt(t,o),o}}at(t)}function ut(t,e){var n=t._controlledReadableStream;b("readable"===n._state),k(t),H(n,e)}function lt(t,e){"readable"===t._controlledReadableStream._state&&ut(t,e)}function ct(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}var ft=function(){function t(e,n){i(this,t),this._associatedReadableByteStreamController=e,this._view=n}return r(t,[{key:"respond",value:function(t){if(!1===pt(this))throw Ft("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function(t,e){if(e=Number(e),!1===u(e))throw new RangeError("bytesWritten must be a finite");b(t._pendingPullIntos.length>0),Mt(t,e)}(this._associatedReadableByteStreamController,t)}},{key:"respondWithNewView",value:function(t){if(!1===pt(this))throw Ft("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");!function(t,e){b(t._pendingPullIntos.length>0);var n=t._pendingPullIntos[0];if(n.byteOffset+n.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");n.buffer=e.buffer,Mt(t,e.byteLength)}(this._associatedReadableByteStreamController,t)}},{key:"view",get:function(){return this._view}}]),t}(),dt=function(){function t(e,n,r){if(i(this,t),!1===j(e))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==e._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=e,this._underlyingByteSource=n,this._pullAgain=!1,this._pulling=!1,gt(this),this._queue=this._queueTotalSize=void 0,k(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=h(r);var a=n.autoAllocateChunkSize;if(void 0!==a&&(!1===Number.isInteger(a)||a<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=a,this._pendingPullIntos=[];var o=this,s=l(n,"start",[this]);Promise.resolve(s).then(function(){o._started=!0,b(!1===o._pulling),b(!1===o._pullAgain),vt(o)},function(t){"readable"===e._state&&St(o,t)}).catch(_)}return r(t,[{key:"close",value:function(){if(!1===ht(this))throw jt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t._controlledReadableStream;if(b(!1===t._closeRequested),b("readable"===e._state),t._queueTotalSize>0)return void(t._closeRequested=!0);if(t._pendingPullIntos.length>0){var n=t._pendingPullIntos[0];if(n.bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw St(t,r),r}}U(e)}(this)}},{key:"enqueue",value:function(t){if(!1===ht(this))throw jt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");!function(t,e){var n=t._controlledReadableStream;b(!1===t._closeRequested),b("readable"===n._state);var r=e.buffer,i=e.byteOffset,a=e.byteLength,o=f(r);if(!0===Z(n))if(0===V(n))bt(t,o,i,a);else{b(0===t._queue.length);var s=new Uint8Array(o,i,a);W(n,s,!1)}else!0===Y(n)?(bt(t,o,i,a),kt(t)):(b(!1===N(n),"stream must not be locked"),bt(t,o,i,a))}(this,t)}},{key:"error",value:function(t){if(!1===ht(this))throw jt("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");St(this,t)}},{key:"__cancelSteps",value:function(t){this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0);return k(this),c(this._underlyingByteSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(b(!0===Z(t)),this._queueTotalSize>0){b(0===V(t));var e=this._queue.shift();this._queueTotalSize-=e.byteLength,wt(this);var n=void 0;try{n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}catch(u){return Promise.reject(u)}return Promise.resolve(s(n,!1))}var r=this._autoAllocateChunkSize;if(void 0!==r){var i=void 0;try{i=new ArrayBuffer(r)}catch(l){return Promise.reject(l)}var a={buffer:i,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}var o=B(t);return vt(this),o}},{key:"byobRequest",get:function(){if(!1===ht(this))throw jt("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos[0],e=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled);this._byobRequest=new ft(this,e)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===ht(this))throw jt("desiredSize");return Ct(this)}}]),t}();function ht(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingByteSource")}function pt(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function vt(t){!1!==function(t){var e=t._controlledReadableStream;if("readable"!==e._state)return!1;if(!0===t._closeRequested)return!1;if(!1===t._started)return!1;if(!0===Z(e)&&V(e)>0)return!0;if(!0===Y(e)&&G(e)>0)return!0;if(Ct(t)>0)return!0;return!1}(t)&&(!0!==t._pulling?(b(!1===t._pullAgain),t._pulling=!0,c(t._underlyingByteSource,"pull",[t]).then(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,vt(t))},function(e){"readable"===t._controlledReadableStream._state&&St(t,e)}).catch(_)):t._pullAgain=!0)}function gt(t){At(t),t._pendingPullIntos=[]}function mt(t,e){b("errored"!==t._state,"state must not be errored");var n=!1;"closed"===t._state&&(b(0===e.bytesFilled),n=!0);var r=yt(e);"default"===e.readerType?W(t,r,n):(b("byob"===e.readerType),function(t,e,n){var r=t._reader;b(r._readIntoRequests.length>0),r._readIntoRequests.shift()._resolve(s(e,n))}(t,r,n))}function yt(t){var e=t.bytesFilled,n=t.elementSize;return b(e<=t.byteLength),b(e%n===0),new t.ctor(t.buffer,t.byteOffset,e/n)}function bt(t,e,n,r){t._queue.push({buffer:e,byteOffset:n,byteLength:r}),t._queueTotalSize+=r}function _t(t,e){var n=e.elementSize,r=e.bytesFilled-e.bytesFilled%n,i=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),a=e.bytesFilled+i,s=a-a%n,u=i,l=!1;s>r&&(u=s-e.bytesFilled,l=!0);for(var c=t._queue;u>0;){var f=c[0],d=Math.min(u,f.byteLength),h=e.byteOffset+e.bytesFilled;o(e.buffer,h,f.buffer,f.byteOffset,d),f.byteLength===d?c.shift():(f.byteOffset+=d,f.byteLength-=d),t._queueTotalSize-=d,xt(t,d,e),u-=d}return!1===l&&(b(0===t._queueTotalSize,"queue must be empty"),b(e.bytesFilled>0),b(e.bytesFilled<e.elementSize)),l}function xt(t,e,n){b(0===t._pendingPullIntos.length||t._pendingPullIntos[0]===n),At(t),n.bytesFilled+=e}function wt(t){b("readable"===t._controlledReadableStream._state),0===t._queueTotalSize&&!0===t._closeRequested?U(t._controlledReadableStream):vt(t)}function At(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function kt(t){for(b(!1===t._closeRequested);t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var e=t._pendingPullIntos[0];!0===_t(t,e)&&(Tt(t),mt(t._controlledReadableStream,e))}}function Mt(t,e){var n=t._pendingPullIntos[0],r=t._controlledReadableStream;if("closed"===r._state){if(0!==e)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=f(e.buffer),b(0===e.bytesFilled,"bytesFilled must be 0");var n=t._controlledReadableStream;if(!0===Y(n))for(;G(n)>0;)mt(n,Tt(t))}(t,n)}else b("readable"===r._state),function(t,e,n){if(n.bytesFilled+e>n.byteLength)throw new RangeError("bytesWritten out of range");if(xt(t,e,n),!(n.bytesFilled<n.elementSize)){Tt(t);var r=n.bytesFilled%n.elementSize;if(r>0){var i=n.byteOffset+n.bytesFilled,a=n.buffer.slice(i-r,i);bt(t,a,0,a.byteLength)}n.buffer=f(n.buffer),n.bytesFilled-=r,mt(t._controlledReadableStream,n),kt(t)}}(t,e,n)}function Tt(t){var e=t._pendingPullIntos.shift();return At(t),e}function St(t,e){var n=t._controlledReadableStream;b("readable"===n._state),gt(t),k(t),H(n,e)}function Ct(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}function Et(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function Ot(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function Pt(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function Lt(t,e){b(void 0!==t._closedPromise_resolve),b(void 0!==t._closedPromise_reject),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function Rt(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function Dt(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function Ft(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function jt(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}},function(t,e,n){var r=n(6),i=n(4),a=n(2);e.TransformStream=r.TransformStream,e.ReadableStream=i.ReadableStream,e.IsReadableStreamDisturbed=i.IsReadableStreamDisturbed,e.ReadableStreamDefaultControllerClose=i.ReadableStreamDefaultControllerClose,e.ReadableStreamDefaultControllerEnqueue=i.ReadableStreamDefaultControllerEnqueue,e.ReadableStreamDefaultControllerError=i.ReadableStreamDefaultControllerError,e.ReadableStreamDefaultControllerGetDesiredSize=i.ReadableStreamDefaultControllerGetDesiredSize,e.AcquireWritableStreamDefaultWriter=a.AcquireWritableStreamDefaultWriter,e.IsWritableStream=a.IsWritableStream,e.IsWritableStreamLocked=a.IsWritableStreamLocked,e.WritableStream=a.WritableStream,e.WritableStreamAbort=a.WritableStreamAbort,e.WritableStreamDefaultControllerError=a.WritableStreamDefaultControllerError,e.WritableStreamDefaultWriterCloseWithErrorPropagation=a.WritableStreamDefaultWriterCloseWithErrorPropagation,e.WritableStreamDefaultWriterRelease=a.WritableStreamDefaultWriterRelease,e.WritableStreamDefaultWriterWrite=a.WritableStreamDefaultWriterWrite},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(1).assert,o=n(0),s=o.InvokeOrNoop,u=o.PromiseInvokeOrPerformFallback,l=o.PromiseInvokeOrNoop,c=o.typeIsObject,f=n(4),d=f.ReadableStream,h=f.ReadableStreamDefaultControllerClose,p=f.ReadableStreamDefaultControllerEnqueue,v=f.ReadableStreamDefaultControllerError,g=f.ReadableStreamDefaultControllerGetDesiredSize,m=n(2),y=m.WritableStream,b=m.WritableStreamDefaultControllerError;function _(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");var n=t._readableController;try{p(n,e)}catch(r){throw t._readableClosed=!0,w(t,r),t._storedError}!0===g(n)<=0&&!1===t._backpressure&&M(t,!0)}function x(t){a(!1===t._errored),a(!1===t._readableClosed);try{h(t._readableController)}catch(e){a(!1)}t._readableClosed=!0}function w(t,e){!1===t._errored&&A(t,e)}function A(t,e){a(!1===t._errored),t._errored=!0,t._storedError=e,!1===t._writableDone&&b(t._writableController,e),!1===t._readableClosed&&v(t._readableController,e)}function k(t){return a(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===t._backpressure?Promise.resolve():(a(!0===t._backpressure,"_backpressure should have been initialized"),t._backpressureChangePromise)}function M(t,e){a(t._backpressure!==e,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(e),t._backpressureChangePromise=new Promise(function(e){t._backpressureChangePromise_resolve=e}),t._backpressureChangePromise.then(function(t){a(t!==e,"_backpressureChangePromise should be fulfilled only when backpressure is changed")}),t._backpressure=e}function T(t,e){return _(e._controlledTransformStream,t),Promise.resolve()}function S(t){return!!c(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function C(t){return!!c(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}var E=function(){function t(e,n){i(this,t),this._transformStream=e,this._startPromise=n}return r(t,[{key:"start",value:function(t){var e=this._transformStream;return e._writableController=t,this._startPromise.then(function(){return k(e)})}},{key:"write",value:function(t){return function(t,e){a(!1===t._errored),a(!1===t._transforming),a(!1===t._backpressure),t._transforming=!0;var n=t._transformer,r=t._transformStreamController;return u(n,"transform",[e,r],T,[e,r]).then(function(){return t._transforming=!1,k(t)},function(e){return w(t,e),Promise.reject(e)})}(this._transformStream,t)}},{key:"abort",value:function(){var t=this._transformStream;t._writableDone=!0,A(t,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var t=this._transformStream;return a(!1===t._transforming),t._writableDone=!0,l(t._transformer,"flush",[t._transformStreamController]).then(function(){return!0===t._errored?Promise.reject(t._storedError):(!1===t._readableClosed&&x(t),Promise.resolve())}).catch(function(e){return w(t,e),Promise.reject(t._storedError)})}}]),t}(),O=function(){function t(e,n){i(this,t),this._transformStream=e,this._startPromise=n}return r(t,[{key:"start",value:function(t){var e=this._transformStream;return e._readableController=t,this._startPromise.then(function(){return a(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===e._backpressure?Promise.resolve():(a(!1===e._backpressure,"_backpressure should have been initialized"),e._backpressureChangePromise)})}},{key:"pull",value:function(){var t=this._transformStream;return a(!0===t._backpressure,"pull() should be never called while _backpressure is false"),a(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),M(t,!1),t._backpressureChangePromise}},{key:"cancel",value:function(){var t=this._transformStream;t._readableClosed=!0,A(t,new TypeError("Readable side canceled"))}}]),t}(),P=function(){function t(e){if(i(this,t),!1===C(e))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==e._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=e}return r(t,[{key:"enqueue",value:function(t){if(!1===S(this))throw R("enqueue");_(this._controlledTransformStream,t)}},{key:"close",value:function(){if(!1===S(this))throw R("close");!function(t){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");x(t)}(this._controlledTransformStream)}},{key:"error",value:function(t){if(!1===S(this))throw R("error");!function(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");A(t,e)}(this._controlledTransformStream,t)}},{key:"desiredSize",get:function(){if(!1===S(this))throw R("desiredSize");var t=this._controlledTransformStream._readableController;return g(t)}}]),t}(),L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._transformer=e;var n=e.readableStrategy,r=e.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new P(this);var o=void 0,u=new Promise(function(t){o=t}),l=new O(this,u);this._readable=new d(l,n);var c=new E(this,u);this._writable=new y(c,r),a(void 0!==this._writableController),a(void 0!==this._readableController),M(this,g(this._readableController)<=0);var f=this,h=s(e,"start",[f._transformStreamController]);o(h),u.catch(function(t){!1===f._errored&&(f._errored=!0,f._storedError=t)})}return r(t,[{key:"readable",get:function(){if(!1===C(this))throw D("readable");return this._readable}},{key:"writable",get:function(){if(!1===C(this))throw D("writable");return this._writable}}]),t}();function R(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function D(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.exports={TransformStream:L}},function(t,e,n){t.exports=n(5)}]))},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=!1;try{if("function"===typeof URL&&"object"===r(URL.prototype)&&"origin"in URL.prototype){var a=new URL("b","http://a");a.pathname="c%20d",i="http://a/c%20d"===a.href}}catch(u){}if(i)e.URL=URL;else{var o=n(145).URL,s=n(3).URL;s&&(o.createObjectURL=function(t){return s.createObjectURL.apply(s,arguments)},o.revokeObjectURL=function(t){s.revokeObjectURL(t)}),e.URL=o}},function(t,e,n){!function(){var t=Object.create(null);t.ftp=21,t.file=0,t.gopher=70,t.http=80,t.https=443,t.ws=80,t.wss=443;var n=Object.create(null);function r(e){return void 0!==t[e]}function i(){d.call(this),this._isInvalid=!0}function a(t){return""===t&&i.call(this),t.toLowerCase()}function o(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function s(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}n["%2e"]=".",n[".%2e"]="..",n["%2e."]="..",n["%2e%2e"]="..";var u,l=/[a-zA-Z]/,c=/[a-zA-Z0-9\+\-\.]/;function f(e,f,d){var h=f||"scheme start",p=0,v="",g=!1,m=!1;t:for(;(e[p-1]!==u||0===p)&&!this._isInvalid;){var y=e[p];switch(h){case"scheme start":if(!y||!l.test(y)){if(f)break t;v="",h="no scheme";continue}v+=y.toLowerCase(),h="scheme";break;case"scheme":if(y&&c.test(y))v+=y.toLowerCase();else{if(":"!==y){if(f){if(y===u)break t;break t}v="",p=0,h="no scheme";continue}if(this._scheme=v,v="",f)break t;r(this._scheme)&&(this._isRelative=!0),h="file"===this._scheme?"relative":this._isRelative&&d&&d._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===y?(this._query="?",h="query"):"#"===y?(this._fragment="#",h="fragment"):y!==u&&"\t"!==y&&"\n"!==y&&"\r"!==y&&(this._schemeData+=o(y));break;case"no scheme":if(d&&r(d._scheme)){h="relative";continue}i.call(this);break;case"relative or authority":if("/"!==y||"/"!==e[p+1]){h="relative";continue}h="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=d._scheme),y===u){this._host=d._host,this._port=d._port,this._path=d._path.slice(),this._query=d._query,this._username=d._username,this._password=d._password;break t}if("/"===y||"\\"===y)h="relative slash";else if("?"===y)this._host=d._host,this._port=d._port,this._path=d._path.slice(),this._query="?",this._username=d._username,this._password=d._password,h="query";else{if("#"!==y){var b=e[p+1],_=e[p+2];("file"!==this._scheme||!l.test(y)||":"!==b&&"|"!==b||_!==u&&"/"!==_&&"\\"!==_&&"?"!==_&&"#"!==_)&&(this._host=d._host,this._port=d._port,this._username=d._username,this._password=d._password,this._path=d._path.slice(),this._path.pop()),h="relative path";continue}this._host=d._host,this._port=d._port,this._path=d._path.slice(),this._query=d._query,this._fragment="#",this._username=d._username,this._password=d._password,h="fragment"}break;case"relative slash":if("/"!==y&&"\\"!==y){"file"!==this._scheme&&(this._host=d._host,this._port=d._port,this._username=d._username,this._password=d._password),h="relative path";continue}h="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==y){h="authority ignore slashes";continue}h="authority second slash";break;case"authority second slash":if(h="authority ignore slashes","/"!==y)continue;break;case"authority ignore slashes":if("/"!==y&&"\\"!==y){h="authority";continue}break;case"authority":if("@"===y){g&&(v+="%40"),g=!0;for(var x=0;x<v.length;x++){var w=v[x];if("\t"!==w&&"\n"!==w&&"\r"!==w)if(":"!==w||null!==this._password){var A=o(w);null!==this._password?this._password+=A:this._username+=A}else this._password=""}v=""}else{if(y===u||"/"===y||"\\"===y||"?"===y||"#"===y){p-=v.length,v="",h="host";continue}v+=y}break;case"file host":if(y===u||"/"===y||"\\"===y||"?"===y||"#"===y){2!==v.length||!l.test(v[0])||":"!==v[1]&&"|"!==v[1]?0===v.length?h="relative path start":(this._host=a.call(this,v),v="",h="relative path start"):h="relative path";continue}"\t"===y||"\n"===y||"\r"===y||(v+=y);break;case"host":case"hostname":if(":"!==y||m){if(y===u||"/"===y||"\\"===y||"?"===y||"#"===y){if(this._host=a.call(this,v),v="",h="relative path start",f)break t;continue}"\t"!==y&&"\n"!==y&&"\r"!==y&&("["===y?m=!0:"]"===y&&(m=!1),v+=y)}else if(this._host=a.call(this,v),v="",h="port","hostname"===f)break t;break;case"port":if(/[0-9]/.test(y))v+=y;else{if(y===u||"/"===y||"\\"===y||"?"===y||"#"===y||f){if(""!==v){var k=parseInt(v,10);k!==t[this._scheme]&&(this._port=k+""),v=""}if(f)break t;h="relative path start";continue}"\t"===y||"\n"===y||"\r"===y||i.call(this)}break;case"relative path start":if(h="relative path","/"!==y&&"\\"!==y)continue;break;case"relative path":var M;if(y!==u&&"/"!==y&&"\\"!==y&&(f||"?"!==y&&"#"!==y))"\t"!==y&&"\n"!==y&&"\r"!==y&&(v+=o(y));else(M=n[v.toLowerCase()])&&(v=M),".."===v?(this._path.pop(),"/"!==y&&"\\"!==y&&this._path.push("")):"."===v&&"/"!==y&&"\\"!==y?this._path.push(""):"."!==v&&("file"===this._scheme&&0===this._path.length&&2===v.length&&l.test(v[0])&&"|"===v[1]&&(v=v[0]+":"),this._path.push(v)),v="","?"===y?(this._query="?",h="query"):"#"===y&&(this._fragment="#",h="fragment");break;case"query":f||"#"!==y?y!==u&&"\t"!==y&&"\n"!==y&&"\r"!==y&&(this._query+=s(y)):(this._fragment="#",h="fragment");break;case"fragment":y!==u&&"\t"!==y&&"\n"!==y&&"\r"!==y&&(this._fragment+=y)}p++}}function d(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function h(t,e){void 0===e||e instanceof h||(e=new h(String(e))),this._url=t,d.call(this);var n=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");f.call(this,n,null,e)}h.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""===this._username&&null===this._password||(t=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){d.call(this),f.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||f.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&f.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&f.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&f.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],f.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"===t[0]&&(t=t.slice(1)),f.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"===t[0]&&(t=t.slice(1)),f.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new h(this._schemeData).origin||"null"}catch(e){}return"null"}return(t=this.host)?this._scheme+"://"+t:""}},e.URL=h}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getDocument=function(t){var e,n=new P;if("string"===typeof t)e={url:t};else if((0,i.isArrayBuffer)(t))e={data:t};else if(t instanceof L)e={range:t};else{if("object"!==w(t))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=t}var r=Object.create(null),o=null,u=null;for(var l in e)if("url"!==l||"undefined"===typeof window)if("range"!==l)if("worker"!==l)if("data"!==l||e[l]instanceof Uint8Array)r[l]=e[l];else{var d=e[l];if("string"===typeof d)r[l]=(0,i.stringToBytes)(d);else if("object"!==w(d)||null===d||isNaN(d.length)){if(!(0,i.isArrayBuffer)(d))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");r[l]=new Uint8Array(d)}else r[l]=new Uint8Array(d)}else u=e[l];else o=e[l];else r[l]=new i.URL(e[l],window.location).href;r.rangeChunkSize=r.rangeChunkSize||k,r.CMapReaderFactory=r.CMapReaderFactory||a.DOMCMapReaderFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.pdfBug=!0===r.pdfBug;var p=Object.values(i.NativeImageDecoding);void 0!==r.nativeImageDecoderSupport&&p.includes(r.nativeImageDecoderSupport)||(r.nativeImageDecoderSupport=s.apiCompatibilityParams.nativeImageDecoderSupport||i.NativeImageDecoding.DECODE);Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1);"boolean"!==typeof r.isEvalSupported&&(r.isEvalSupported=!0);"boolean"!==typeof r.disableFontFace&&(r.disableFontFace=s.apiCompatibilityParams.disableFontFace||!1);"boolean"!==typeof r.disableRange&&(r.disableRange=!1);"boolean"!==typeof r.disableStream&&(r.disableStream=!1);"boolean"!==typeof r.disableAutoFetch&&(r.disableAutoFetch=!1);"boolean"!==typeof r.disableCreateObjectURL&&(r.disableCreateObjectURL=s.apiCompatibilityParams.disableCreateObjectURL||!1);if((0,i.setVerbosityLevel)(r.verbosity),!u){var v={postMessageTransfers:r.postMessageTransfers,verbosity:r.verbosity,port:c.GlobalWorkerOptions.workerPort};u=v.port?j.fromPort(v):new j(v),n._worker=u}var g=n.docId;return u.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");return function(t,e,n,r){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(n&&(e.length=n.length,e.initialData=n.initialData),t.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.1.266",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,disableCreateObjectURL:e.disableCreateObjectURL,postMessageTransfers:t.postMessageTransfers,docBaseUrl:e.docBaseUrl,nativeImageDecoderSupport:e.nativeImageDecoderSupport,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported}).then(function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e}))}(u,r,o,g).then(function(t){if(n.destroyed)throw new Error("Loading aborted");var e;o?e=new h.PDFDataTransportStream({length:r.length,initialData:r.initialData,disableRange:r.disableRange,disableStream:r.disableStream},o):r.data||(e=C({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream}));var i=new f.MessageHandler(g,t,u.port);i.postMessageTransfers=u.postMessageTransfers;var a=new N(i,n,e,r);n._transport=a,i.send("Ready",null)})}).catch(n._capability.reject),n},e.setPDFNetworkStreamFactory=function(t){C=t},e.build=e.version=e.PDFPageProxy=e.PDFDocumentProxy=e.PDFWorker=e.PDFDataRangeTransport=e.LoopbackPort=void 0;var r=v(n(147)),i=n(1),a=n(151),o=n(152),s=n(153),u=n(154),l=v(n(3)),c=n(156),f=n(157),d=n(158),h=n(160),p=n(161);function v(t){return t&&t.__esModule?t:{default:t}}function g(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(Lt){return void n(Lt)}s.done?e(u):Promise.resolve(u).then(r,i)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function w(t){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var A,k=65536,M=!1,T=null,S=!1;"undefined"===typeof window?(M=!0,"undefined"===typeof kt.ensure&&(kt.ensure=Mt),S=!0):"function"===typeof kt.ensure&&(S=!0),"undefined"!==typeof requirejs&&requirejs.toUrl&&(A=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var C,E="undefined"!==typeof requirejs&&requirejs.load;if(T=S?function(){return new Promise(function(t,e){kt.ensure([],function(){try{t(he.WorkerMessageHandler)}catch(n){e(n)}},e,"pdfjsWorker")})}:E?function(){return new Promise(function(t,e){requirejs(["pdfjs-dist/build/pdf.worker"],function(n){try{t(n.WorkerMessageHandler)}catch(r){e(r)}},e)})}:null,!A&&"object"===("undefined"===typeof document?"undefined":w(document))&&"currentScript"in document){var O=document.currentScript&&document.currentScript.src;O&&(A=O.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}var P=function(){var t=0;return function(){function e(){b(this,e),this._capability=(0,i.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return x(e,[{key:"destroy",value:function(){var t=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(function(){t._transport=null,t._worker&&(t._worker.destroy(),t._worker=null)})}},{key:"then",value:function(t,e){return(0,i.deprecated)("PDFDocumentLoadingTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._capability.promise}}]),e}()}(),L=function(){function t(e,n){b(this,t),this.length=e,this.initialData=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=(0,i.createPromiseCapability)()}return x(t,[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"onDataRange",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=this._rangeListeners[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){(0,a.value)(t,e)}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"onDataProgress",value:function(t){var e=this;this._readyCapability.promise.then(function(){var n=!0,r=!1,i=void 0;try{for(var a,o=e._progressListeners[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){(0,a.value)(t)}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}})}},{key:"onDataProgressiveRead",value:function(t){var e=this;this._readyCapability.promise.then(function(){var n=!0,r=!1,i=void 0;try{for(var a,o=e._progressiveReadListeners[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){(0,a.value)(t)}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(t,e){(0,i.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),t}();e.PDFDataRangeTransport=L;var R=function(){function t(e,n,r){b(this,t),this.loadingTask=r,this._pdfInfo=e,this._transport=n}return x(t,[{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getOpenActionDestination",value:function(){return this._transport.getOpenActionDestination()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function(){return this._transport.getStats()}},{key:"cleanup",value:function(){this._transport.startCleanup()}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function(){return this._pdfInfo.fingerprint}},{key:"loadingParams",get:function(){return this._transport.loadingParams}}]),t}();e.PDFDocumentProxy=R;var D=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b(this,t),this.pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new a.StatTimer:a.DummyStatTimer,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new z,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return x(t,[{key:"getViewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scale,n=t.rotation,r=void 0===n?this.rotate:n,o=t.dontFlip,s=void 0!==o&&o;return(arguments.length>1||"number"===typeof arguments[0])&&((0,i.deprecated)("getViewport is called with obsolete arguments."),e=arguments[0],r="number"===typeof arguments[1]?arguments[1]:this.rotate,s="boolean"===typeof arguments[2]&&arguments[2]),new a.PageViewport({viewBox:this.view,scale:e,rotation:r,dontFlip:s})}},{key:"getAnnotations",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?null:t;return this.annotationsPromise&&this.annotationsIntent===e||(this.annotationsPromise=this._transport.getAnnotations(this.pageIndex,e),this.annotationsIntent=e),this.annotationsPromise}},{key:"render",value:function(t){var e=this,n=t.canvasContext,r=t.viewport,o=t.intent,s=void 0===o?"display":o,u=t.enableWebGL,l=void 0!==u&&u,c=t.renderInteractiveForms,f=void 0!==c&&c,d=t.transform,h=void 0===d?null:d,v=t.imageLayer,g=void 0===v?null:v,m=t.canvasFactory,y=void 0===m?null:m,b=t.background,_=void 0===b?null:b,x=this._stats;x.time("Overall"),this.pendingCleanup=!1;var w="print"===s?"print":"display",A=y||new a.DOMCanvasFactory,k=new p.WebGLContext({enable:l});this.intentStates[w]||(this.intentStates[w]=Object.create(null));var M=this.intentStates[w];M.displayReadyCapability||(M.receivingOperatorList=!0,M.displayReadyCapability=(0,i.createPromiseCapability)(),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1},x.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:w,renderInteractiveForms:!0===f}));var T=function(t){var n=M.renderTasks.indexOf(S);n>=0&&M.renderTasks.splice(n,1),e.cleanupAfterRender&&(e.pendingCleanup=!0),e._tryCleanup(),t?S.capability.reject(t):S.capability.resolve(),x.timeEnd("Rendering"),x.timeEnd("Overall")},S=new B({callback:T,params:{canvasContext:n,viewport:r,transform:h,imageLayer:g,background:_},objs:this.objs,commonObjs:this.commonObjs,operatorList:M.operatorList,pageNumber:this.pageNumber,canvasFactory:A,webGLContext:k,useRequestAnimationFrame:"print"!==w,pdfBug:this._pdfBug});M.renderTasks||(M.renderTasks=[]),M.renderTasks.push(S);var C=S.task;return M.displayReadyCapability.promise.then(function(t){e.pendingCleanup?T():(x.time("Rendering"),S.initializeGraphics(t),S.operatorListChanged())}).catch(T),C}},{key:"getOperatorList",value:function(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var t,e=this.intentStates.oplist;return e.opListReadCapability||((t={}).operatorListChanged=function(){if(e.operatorList.lastChunk){e.opListReadCapability.resolve(e.operatorList);var n=e.renderTasks.indexOf(t);n>=0&&e.renderTasks.splice(n,1)}},e.receivingOperatorList=!0,e.opListReadCapability=(0,i.createPromiseCapability)(),e.renderTasks=[],e.renderTasks.push(t),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})),e.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.normalizeWhitespace,n=void 0!==e&&e,r=t.disableCombineTextItems,i=void 0!==r&&r;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:!0===n,combineTextItems:!0!==i},{highWaterMark:100,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.streamTextContent(t);return new Promise(function(t,n){var r=e.getReader(),i={items:[],styles:Object.create(null)};!function e(){r.read().then(function(n){var r,a=n.value;n.done?t(i):(Object.assign(i.styles,a.styles),(r=i.items).push.apply(r,y(a.items)),e())},n)}()})}},{key:"_destroy",value:function(){this.destroyed=!0,this._transport.pageCache[this.pageIndex]=null;var t=[];return Object.keys(this.intentStates).forEach(function(e){"oplist"!==e&&this.intentStates[e].renderTasks.forEach(function(e){var n=e.capability.promise.catch(function(){});t.push(n),e.cancel()})},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup&&!Object.keys(this.intentStates).some(function(t){var e=this.intentStates[t];return 0!==e.renderTasks.length||e.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(t){delete this.intentStates[t]},this),this.objs.clear(),this.annotationsPromise=null,t&&this._stats instanceof a.StatTimer&&(this._stats=new a.StatTimer),this.pendingCleanup=!1)}},{key:"_startRenderPage",value:function(t,e){var n=this.intentStates[e];n.displayReadyCapability&&n.displayReadyCapability.resolve(t)}},{key:"_renderPageChunk",value:function(t,e){for(var n=this.intentStates[e],r=0,i=t.length;r<i;r++)n.operatorList.fnArray.push(t.fnArray[r]),n.operatorList.argsArray.push(t.argsArray[r]);n.operatorList.lastChunk=t.lastChunk;for(var a=0;a<n.renderTasks.length;a++)n.renderTasks[a].operatorListChanged();t.lastChunk&&(n.receivingOperatorList=!1,this._tryCleanup())}},{key:"pageNumber",get:function(){return this.pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"stats",get:function(){return this._stats instanceof a.StatTimer?this._stats:null}}]),t}();e.PDFPageProxy=D;var F=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b(this,t),this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}return x(t,[{key:"postMessage",value:function(t,e){var n=this;if(this._defer){var r=new WeakMap,a={data:function t(n){if("object"!==w(n)||null===n)return n;if(r.has(n))return r.get(n);var a,o;if((a=n.buffer)&&(0,i.isArrayBuffer)(a)){var s=e&&e.includes(a);return o=n===a?n:s?new n.constructor(a,n.byteOffset,n.byteLength):new n.constructor(n),r.set(n,o),o}for(var u in o=Array.isArray(n)?[]:{},r.set(n,o),n){for(var l=void 0,c=n;!(l=Object.getOwnPropertyDescriptor(c,u));)c=Object.getPrototypeOf(c);"undefined"!==typeof l.value&&"function"!==typeof l.value&&(o[u]=t(l.value))}return o}(t)};this._deferred.then(function(){n._listeners.forEach(function(t){t.call(this,a)},n)})}else this._listeners.forEach(function(e){e.call(this,{data:t})},this)}},{key:"addEventListener",value:function(t,e){this._listeners.push(e)}},{key:"removeEventListener",value:function(t,e){var n=this._listeners.indexOf(e);this._listeners.splice(n,1)}},{key:"terminate",value:function(){this._listeners=[]}}]),t}();e.LoopbackPort=F;var j=function(){var t,e=new WeakMap,n=0;function r(){if(c.GlobalWorkerOptions.workerSrc)return c.GlobalWorkerOptions.workerSrc;if("undefined"!==typeof A)return A;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function o(){try{if("undefined"!==typeof window)return window.pdfjsWorker&&window.pdfjsWorker.WorkerMessageHandler}catch(t){}return null}return function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=void 0===n?null:n,a=t.port,o=void 0===a?null:a,u=t.postMessageTransfers,l=void 0===u||u,c=t.verbosity,f=void 0===c?(0,i.getVerbosityLevel)():c;if(b(this,s),o&&e.has(o))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=r,this.destroyed=!1,this.postMessageTransfers=!1!==l,this.verbosity=f,this._readyCapability=(0,i.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o)return e.set(o,this),void this._initializeFromPort(o);this._initialize()}return x(s,[{key:"_initializeFromPort",value:function(t){this._port=t,this._messageHandler=new f.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var t=this;if("undefined"!==typeof Worker&&!M&&!o()){var e=r();try{(0,i.isSameOrigin)(window.location.href,e)||(e=function(t){var e="importScripts('"+t+"');";return i.URL.createObjectURL(new Blob([e]))}(new i.URL(e,window.location).href));var n=new Worker(e),a=new f.MessageHandler("main","worker",n),s=function(){n.removeEventListener("error",u),a.destroy(),n.terminate(),t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},u=function(){t._webWorker||s()};n.addEventListener("error",u),a.on("test",function(e){n.removeEventListener("error",u),t.destroyed?s():e&&e.supportTypedArray?(t._messageHandler=a,t._port=n,t._webWorker=n,e.supportTransfers||(t.postMessageTransfers=!1),t._readyCapability.resolve(),a.send("configure",{verbosity:t.verbosity})):(t._setupFakeWorker(),a.destroy(),n.terminate())}),a.on("ready",function(e){if(n.removeEventListener("error",u),t.destroyed)s();else try{l()}catch(r){t._setupFakeWorker()}});var l=function(){var e=new Uint8Array([t.postMessageTransfers?255:0]);try{a.send("test",e,[e.buffer])}catch(n){(0,i.info)("Cannot use postMessage transfers"),e[0]=0,a.send("test",e)}};return void l()}catch(c){(0,i.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;M||((0,i.warn)("Setting up fake worker."),M=!0),function(){if(t)return t.promise;t=(0,i.createPromiseCapability)();var e=o();return e?(t.resolve(e),t.promise):((T||function(){return(0,a.loadScript)(r()).then(function(){return window.pdfjsWorker.WorkerMessageHandler})})().then(t.resolve,t.reject),t.promise)}().then(function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var r=new F;e._port=r;var i="fake"+n++,a=new f.MessageHandler(i+"_worker",i,r);t.setup(a,r);var o=new f.MessageHandler(i,i+"_worker",r);e._messageHandler=o,e._readyCapability.resolve()}}).catch(function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}}],[{key:"fromPort",value:function(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return e.has(t.port)?e.get(t.port):new s(t)}},{key:"getWorkerSrc",value:function(){return r()}}]),s}()}();e.PDFWorker=j;var N=function(){function t(e,n,r,a){b(this,t),this.messageHandler=e,this.loadingTask=n,this.commonObjs=new z,this.fontLoader=new o.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=a,this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,i.createPromiseCapability)(),this.setupMessageHandler()}return x(t,[{key:"destroy",value:function(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,i.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var e=[];this.pageCache.forEach(function(t){t&&e.push(t._destroy())}),this.pageCache=[],this.pagePromises=[];var n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(function(){t.fontLoader.clear(),t._networkStream&&t._networkStream.cancelAllRequests(),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this.messageHandler,e=this.loadingTask;t.on("GetReader",function(t,e){var n=this;(0,i.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=function(t){n._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=function(){n._fullReader.read().then(function(t){var n=t.value;t.done?e.close():((0,i.assert)((0,i.isArrayBuffer)(n)),e.enqueue(new Uint8Array(n),1,[n]))}).catch(function(t){e.error(t)})},e.onCancel=function(t){n._fullReader.cancel(t)}},this),t.on("ReaderHeadersReady",function(t){var n=this,r=(0,i.createPromiseCapability)(),a=this._fullReader;return a.headersReady.then(function(){a.isStreamingSupported&&a.isRangeSupported||(n._lastProgress&&e.onProgress&&e.onProgress(n._lastProgress),a.onProgress=function(t){e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),r.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})},r.reject),r.promise},this),t.on("GetRangeReader",function(t,e){(0,i.assert)(this._networkStream);var n=this._networkStream.getRangeReader(t.begin,t.end);e.onPull=function(){n.read().then(function(t){var n=t.value;t.done?e.close():((0,i.assert)((0,i.isArrayBuffer)(n)),e.enqueue(new Uint8Array(n),1,[n]))}).catch(function(t){e.error(t)})},e.onCancel=function(t){n.cancel(t)}},this),t.on("GetDoc",function(t){var n=t.pdfInfo;this.numPages=n.numPages,this.pdfDocument=new R(n,this,e),e._capability.resolve(this.pdfDocument)},this),t.on("PasswordRequest",function(t){var n=this;if(this._passwordCapability=(0,i.createPromiseCapability)(),e.onPassword){try{e.onPassword(function(t){n._passwordCapability.resolve({password:t})},t.code)}catch(r){this._passwordCapability.reject(r)}}else this._passwordCapability.reject(new i.PasswordException(t.message,t.code));return this._passwordCapability.promise},this),t.on("PasswordException",function(t){e._capability.reject(new i.PasswordException(t.message,t.code))},this),t.on("InvalidPDF",function(t){e._capability.reject(new i.InvalidPDFException(t.message))},this),t.on("MissingPDF",function(t){e._capability.reject(new i.MissingPDFException(t.message))},this),t.on("UnexpectedResponse",function(t){e._capability.reject(new i.UnexpectedResponseException(t.message,t.status))},this),t.on("UnknownError",function(t){e._capability.reject(new i.UnknownErrorException(t.message,t.details))},this),t.on("DataLoaded",function(t){e.onProgress&&e.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)},this),t.on("StartRenderPage",function(t){if(!this.destroyed){var e=this.pageCache[t.pageIndex];e._stats.timeEnd("Page Request"),e._startRenderPage(t.transparency,t.intent)}},this),t.on("RenderPageChunk",function(t){this.destroyed||this.pageCache[t.pageIndex]._renderPageChunk(t.operatorList,t.intent)},this),t.on("commonobj",function(e){var n=this;if(!this.destroyed){var r=m(e,3),a=r[0],s=r[1],u=r[2];if(!this.commonObjs.has(a))switch(s){case"Font":var c=this._params;if("error"in u){var f=u.error;(0,i.warn)("Error during font loading: ".concat(f)),this.commonObjs.resolve(a,f);break}var d=null;c.pdfBug&&l.default.FontInspector&&l.default.FontInspector.enabled&&(d={registerFont:function(t,e){l.default.FontInspector.fontAdded(t,e)}});var h=new o.FontFaceObject(u,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:d});this.fontLoader.bind(h).then(function(){n.commonObjs.resolve(a,h)},function(e){t.sendWithPromise("FontFallback",{id:a}).finally(function(){n.commonObjs.resolve(a,h)})});break;case"FontPath":this.commonObjs.resolve(a,u);break;default:throw new Error("Got unknown common object type ".concat(s))}}},this),t.on("obj",function(t){if(!this.destroyed){var e=m(t,4),n=e[0],r=e[1],i=e[2],a=e[3],o=this.pageCache[r];if(!o.objs.has(n))switch(i){case"JpegStream":return new Promise(function(t,e){var n=new Image;n.onload=function(){t(n)},n.onerror=function(){e(new Error("Error during JPEG image loading"))},n.src=a}).then(function(t){o.objs.resolve(n,t)});case"Image":o.objs.resolve(n,a);a&&"data"in a&&a.data.length>8e6&&(o.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(i))}}},this),t.on("DocProgress",function(t){this.destroyed||e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})},this),t.on("PageError",function(t){if(!this.destroyed){var e=this.pageCache[t.pageNum-1].intentStates[t.intent];if(!e.displayReadyCapability)throw new Error(t.error);if(e.displayReadyCapability.reject(t.error),e.operatorList){e.operatorList.lastChunk=!0;for(var n=0;n<e.renderTasks.length;n++)e.renderTasks[n].operatorListChanged()}}},this),t.on("UnsupportedFeature",this._onUnsupportedFeature,this),t.on("JpegDecode",function(t){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"===typeof document)return Promise.reject(new Error('"document" is not defined.'));var e=m(t,2),n=e[0],r=e[1];return 3!==r&&1!==r?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise(function(t,e){var i=new Image;i.onload=function(){var e=i.width,n=i.height,a=e*n,o=4*a,s=new Uint8ClampedArray(a*r),u=document.createElement("canvas");u.width=e,u.height=n;var l=u.getContext("2d");l.drawImage(i,0,0);var c=l.getImageData(0,0,e,n).data;if(3===r)for(var f=0,d=0;f<o;f+=4,d+=3)s[d]=c[f],s[d+1]=c[f+1],s[d+2]=c[f+2];else if(1===r)for(var h=0,p=0;h<o;h+=4,p++)s[p]=c[h];t({data:s,width:e,height:n})},i.onerror=function(){e(new Error("JpegDecode failed to load image"))},i.src=n})},this),t.on("FetchBuiltInCMap",function(t){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:t.name})},this)}},{key:"_onUnsupportedFeature",value:function(t){var e=t.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(e)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this.numPages)return Promise.reject(new Error("Invalid page request"));var n=t-1;if(n in this.pagePromises)return this.pagePromises[n];var r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(function(t){if(e.destroyed)throw new Error("Transport destroyed");var r=new D(n,t,e,e._params.pdfBug);return e.pageCache[n]=r,r});return this.pagePromises[n]=r,r}},{key:"getPageIndex",value:function(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch(function(t){return Promise.reject(new Error(t))})}},{key:"getAnnotations",value:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getOpenActionDestination",value:function(){return this.messageHandler.sendWithPromise("getOpenActionDestination",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(e){return{info:e[0],metadata:e[1]?new d.Metadata(e[1]):null,contentDispositionFilename:t._fullReader?t._fullReader.filename:null}})}},{key:"getStats",value:function(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function(){var t=this;this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var e=0,n=t.pageCache.length;e<n;e++){var r=t.pageCache[e];r&&r.cleanup()}t.commonObjs.clear(),t.fontLoader.clear()})}},{key:"loadingParams",get:function(){var t=this._params;return(0,i.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableCreateObjectURL:t.disableCreateObjectURL,disableFontFace:t.disableFontFace,nativeImageDecoderSupport:t.nativeImageDecoderSupport})}}]),t}(),z=function(){function t(){b(this,t),this._objs=Object.create(null)}return x(t,[{key:"_ensureObj",value:function(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,i.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)return this._ensureObj(t).capability.promise.then(e),null;var n=this._objs[t];if(!n||!n.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return n.data}},{key:"has",value:function(t){var e=this._objs[t];return!!e&&e.resolved}},{key:"resolve",value:function(t,e){var n=this._ensureObj(t);n.resolved=!0,n.data=e,n.capability.resolve(e)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),t}(),I=function(){function t(e){b(this,t),this._internalRenderTask=e,this.onContinue=null}return x(t,[{key:"cancel",value:function(){this._internalRenderTask.cancel()}},{key:"then",value:function(t,e){return(0,i.deprecated)("RenderTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._internalRenderTask.capability.promise}}]),t}(),B=function(){var t=new WeakSet;return function(){function e(t){var n=t.callback,r=t.params,a=t.objs,o=t.commonObjs,s=t.operatorList,u=t.pageNumber,l=t.canvasFactory,c=t.webGLContext,f=t.useRequestAnimationFrame,d=void 0!==f&&f,h=t.pdfBug,p=void 0!==h&&h;b(this,e),this.callback=n,this.params=r,this.objs=a,this.commonObjs=o,this.operatorListIdx=null,this.operatorList=s,this.pageNumber=u,this.canvasFactory=l,this.webGLContext=c,this._pdfBug=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=(0,i.createPromiseCapability)(),this.task=new I(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}return x(e,[{key:"initializeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.cancelled){if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}this._pdfBug&&l.default.StepperManager&&l.default.StepperManager.enabled&&(this.stepper=l.default.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var n=this.params,r=n.canvasContext,i=n.viewport,a=n.transform,o=n.imageLayer,s=n.background;this.gfx=new u.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,o),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback(e||new a.RenderingCancelledException("Rendering cancelled, page ".concat(this.pageNumber),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){t._nextBound().catch(t.cancel.bind(t))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}},{key:"_next",value:function(){var e,n=(e=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancelled){e.next=2;break}return e.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback()));case 4:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(t){g(a,r,i,o,s,"next",t)}function s(t){g(a,r,i,o,s,"throw",t)}o(void 0)})});return function(){return n.apply(this,arguments)}}()}]),e}()}();e.version="2.1.266";e.build="81f5835c"},function(t,e,n){t.exports=n(148)},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(){return this||"object"===("undefined"===typeof self?"undefined":r(self))&&self}()||Function("return this")(),a=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=a&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(149),a)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(s){i.regeneratorRuntime=void 0}},function(t,e,n){(function(t){function e(t){return(e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){var r,i=Object.prototype,a=i.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"===e(t),f=n.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=n.regeneratorRuntime=c?t.exports:{}).wrap=x;var d="suspendedStart",h="suspendedYield",p="executing",v="completed",g={},m={};m[s]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(L([])));b&&b!==i&&a.call(b,s)&&(m=b);var _=M.prototype=A.prototype=Object.create(m);k.prototype=_.constructor=M,M.constructor=k,M[l]=k.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,M):(t.__proto__=M,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(_),t},f.awrap=function(t){return{__await:t}},T(S.prototype),S.prototype[u]=function(){return this},f.AsyncIterator=S,f.async=function(t,e,n,r){var i=new S(x(t,e,n,r));return f.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},T(_),_[l]="Generator",_[s]=function(){return this},_.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}}}function x(t,e,n,r){var i=e&&e.prototype instanceof A?e:A,a=Object.create(i.prototype),o=new P(r||[]);return a._invoke=function(t,e,n){var r=d;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=w(t,e,n);if("normal"===u.type){if(r=n.done?v:h,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function A(){}function k(){}function M(){}function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var n;this._invoke=function(r,i){function o(){return new Promise(function(n,o){!function n(r,i,o,s){var u=w(t[r],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"===e(c)&&a.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,s)},function(t){n("throw",t,o,s)}):Promise.resolve(c).then(function(t){l.value=t,o(l)},function(t){return n("throw",t,o,s)})}s(u.arg)}(r,i,n,o)})}return n=n?n.then(o,o):o()}}function C(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,C(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=w(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[s];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:R}}function R(){return{value:r,done:!0}}}(function(){return this||"object"===("undefined"===typeof self?"undefined":e(self))&&self}()||Function("return this")())}).call(this,n(150)(t))},function(t,e,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.addLinkAttributes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.url,i=e.target,a=e.rel;if(t.href=t.title=n?(0,r.removeNullCharacters)(n):"",n){var o=Object.values(p),u=o.includes(i)?i:p.NONE;t.target=v[u],t.rel="string"===typeof a?a:s}},e.getFilenameFromUrl=function(t){var e=t.indexOf("#"),n=t.indexOf("?"),r=Math.min(e>0?e:t.length,n>0?n:t.length);return t.substring(t.lastIndexOf("/",r)+1,r)},e.loadScript=function(t){return new Promise(function(e,n){var r=document.createElement("script");r.src=t,r.onload=e,r.onerror=function(){n(new Error("Cannot load script at: ".concat(r.src)))},(document.head||document.documentElement).appendChild(r)})},e.DummyStatTimer=e.StatTimer=e.DOMSVGFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.LinkTarget=e.RenderingCancelledException=e.PageViewport=void 0;var r=n(1);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var s="noopener noreferrer nofollow";e.DEFAULT_LINK_REL=s;var u="http://www.w3.org/2000/svg",l=function(){function t(){i(this,t)}return o(t,[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("invalid canvas size");var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=t,n.height=e,{canvas:n,context:r}}},{key:"reset",value:function(t,e,n){if(!t.canvas)throw new Error("canvas is not specified");if(e<=0||n<=0)throw new Error("invalid canvas size");t.canvas.width=e,t.canvas.height=n}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}}]),t}();e.DOMCanvasFactory=l;var c=function(){function t(e){var n=e.baseUrl,r=void 0===n?null:n,a=e.isCompressed,o=void 0!==a&&a;i(this,t),this.baseUrl=r,this.isCompressed=o}return o(t,[{key:"fetch",value:function(t){var e=this,n=t.name;return this.baseUrl?n?new Promise(function(t,i){var a=e.baseUrl+n+(e.isCompressed?".bcmap":""),o=new XMLHttpRequest;o.open("GET",a,!0),e.isCompressed&&(o.responseType="arraybuffer"),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE){var n;if(200===o.status||0===o.status)if(e.isCompressed&&o.response?n=new Uint8Array(o.response):!e.isCompressed&&o.responseText&&(n=(0,r.stringToBytes)(o.responseText)),n)return void t({cMapData:n,compressionType:e.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE});i(new Error("Unable to load "+(e.isCompressed?"binary ":"")+"CMap at: "+a))}},o.send(null)}):Promise.reject(new Error("CMap name must be specified.")):Promise.reject(new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.'))}}]),t}();e.DOMCMapReaderFactory=c;var f=function(){function t(){i(this,t)}return o(t,[{key:"create",value:function(t,e){(0,r.assert)(t>0&&e>0,"Invalid SVG dimensions");var n=document.createElementNS(u,"svg:svg");return n.setAttribute("version","1.1"),n.setAttribute("width",t+"px"),n.setAttribute("height",e+"px"),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 "+t+" "+e),n}},{key:"createElement",value:function(t){return(0,r.assert)("string"===typeof t,"Invalid SVG element type"),document.createElementNS(u,t)}}]),t}();e.DOMSVGFactory=f;var d=function(){function t(e){var n=e.viewBox,r=e.scale,a=e.rotation,o=e.offsetX,s=void 0===o?0:o,u=e.offsetY,l=void 0===u?0:u,c=e.dontFlip,f=void 0!==c&&c;i(this,t),this.viewBox=n,this.scale=r,this.rotation=a,this.offsetX=s,this.offsetY=l;var d,h,p,v,g,m,y,b,_=(n[2]+n[0])/2,x=(n[3]+n[1])/2;switch(a=(a%=360)<0?a+360:a){case 180:d=-1,h=0,p=0,v=1;break;case 90:d=0,h=1,p=1,v=0;break;case 270:d=0,h=-1,p=-1,v=0;break;default:d=1,h=0,p=0,v=-1}f&&(p=-p,v=-v),0===d?(g=Math.abs(x-n[1])*r+s,m=Math.abs(_-n[0])*r+l,y=Math.abs(n[3]-n[1])*r,b=Math.abs(n[2]-n[0])*r):(g=Math.abs(_-n[0])*r+s,m=Math.abs(x-n[1])*r+l,y=Math.abs(n[2]-n[0])*r,b=Math.abs(n[3]-n[1])*r),this.transform=[d*r,h*r,p*r,v*r,g-d*r*_-p*r*x,m-h*r*_-v*r*x],this.width=y,this.height=b}return o(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.scale,r=void 0===n?this.scale:n,i=e.rotation,a=void 0===i?this.rotation:i,o=e.dontFlip,s=void 0!==o&&o;return new t({viewBox:this.viewBox.slice(),scale:r,rotation:a,offsetX:this.offsetX,offsetY:this.offsetY,dontFlip:s})}},{key:"convertToViewportPoint",value:function(t,e){return r.Util.applyTransform([t,e],this.transform)}},{key:"convertToViewportRectangle",value:function(t){var e=r.Util.applyTransform([t[0],t[1]],this.transform),n=r.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(t,e){return r.Util.applyInverseTransform([t,e],this.transform)}}]),t}();e.PageViewport=d;var h=function(){function t(t,e){this.message=t,this.type=e}return t.prototype=new Error,t.prototype.name="RenderingCancelledException",t.constructor=t,t}();e.RenderingCancelledException=h;var p={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};e.LinkTarget=p;var v=["","_self","_blank","_parent","_top"];var g=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i(this,t),this.enabled=!!e,this.started=Object.create(null),this.times=[]}return o(t,[{key:"time",value:function(t){this.enabled&&(t in this.started&&(0,r.warn)("Timer is already running for "+t),this.started[t]=Date.now())}},{key:"timeEnd",value:function(t){this.enabled&&(t in this.started||(0,r.warn)("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])}},{key:"toString",value:function(){for(var t=this.times,e="",n=0,r=0,i=t.length;r<i;++r){var a=t[r].name;a.length>n&&(n=a.length)}for(var o=0,s=t.length;o<s;++o){var u=t[o],l=u.end-u.start;e+="".concat(u.name.padEnd(n)," ").concat(l,"ms\n")}return e}}]),t}();e.StatTimer=g;var m=function(){function t(){i(this,t),(0,r.unreachable)("Cannot initialize DummyStatTimer.")}return o(t,null,[{key:"time",value:function(t){}},{key:"timeEnd",value:function(t){}},{key:"toString",value:function(){return""}}]),t}();e.DummyStatTimer=m},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r,i=(r=n(147))&&r.__esModule?r:{default:r},a=n(1);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(Lt){return void n(Lt)}s.done?e(u):Promise.resolve(u).then(r,i)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}var p,v=function(){function t(e){var n=e.docId,r=e.onUnsupportedFeature;f(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseFontLoader."),this.docId=n,this._onUnsupportedFeature=r,this.nativeFontFaces=[],this.styleElement=null}return h(t,[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.push(t),document.fonts.add(t)}},{key:"insertRule",value:function(t){var e=this.styleElement;e||((e=this.styleElement=document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),document.documentElement.getElementsByTagName("head")[0].appendChild(e));var n=e.sheet;n.insertRule(t,n.cssRules.length)}},{key:"clear",value:function(){this.nativeFontFaces.forEach(function(t){document.fonts.delete(t)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:function(){var t,e=(t=i.default.mark(function t(e){var n,r,o=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.attached&&!e.missingFile){t.next=2;break}return t.abrupt("return");case 2:if(e.attached=!0,!this.isFontLoadingAPISupported){t.next=19;break}if(!(n=e.createNativeFontFace())){t.next=18;break}return this.addNativeFontFace(n),t.prev=7,t.next=10,n.loaded;case 10:t.next=18;break;case 12:throw t.prev=12,t.t0=t.catch(7),this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.font}),(0,a.warn)("Failed to load font '".concat(n.family,"': '").concat(t.t0,"'.")),e.disableFontFace=!0,t.t0;case 18:return t.abrupt("return");case 19:if(!(r=e.createFontFaceRule())){t.next=25;break}if(this.insertRule(r),!this.isSyncFontLoadingSupported){t.next=24;break}return t.abrupt("return");case 24:return t.abrupt("return",new Promise(function(t){var n=o._queueLoadingCallback(t);o._prepareFontLoadEvent([r],[e],n)}));case 25:case"end":return t.stop()}},t,this,[[7,12]])}),function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){c(a,r,i,o,s,"next",t)}function s(t){c(a,r,i,o,s,"throw",t)}o(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"_queueLoadingCallback",value:function(t){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"_prepareFontLoadEvent",value:function(t,e,n){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}},{key:"isFontLoadingAPISupported",get:function(){(0,a.unreachable)("Abstract method `isFontLoadingAPISupported`.")}},{key:"isSyncFontLoadingSupported",get:function(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}}]),t}();e.FontLoader=p,e.FontLoader=p=function(t){function e(t){var n;return f(this,e),(n=s(this,u(e).call(this,t))).loadingContext={requests:[],nextRequestId:0},n.loadTestFontId=0,n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,v),h(e,[{key:"_queueLoadingCallback",value:function(t){var e=this.loadingContext,n={id:"pdfjs-font-loading-".concat(e.nextRequestId++),done:!1,complete:function(){for((0,a.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.requests.length>0&&e.requests[0].done;){var t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(n),n}},{key:"_prepareFontLoadEvent",value:function(t,e,n){function r(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,r){return t.substring(0,e)+r+t.substring(e+n)}var o,s,u=document.createElement("canvas");u.width=1,u.height=1;var l=u.getContext("2d"),c=0;var f="lt".concat(Date.now()).concat(this.loadTestFontId++),d=this._loadTestFont,h=r(d=i(d,976,f.length,f),16);for(o=0,s=f.length-3;o<s;o+=4)h=h-1482184792+r(f,o)|0;o<f.length&&(h=h-1482184792+r(f+"XXX",o)|0),d=i(d,16,4,(0,a.string32)(h));var p="url(data:font/opentype;base64,".concat(btoa(d),");"),v='@font-face {font-family:"'.concat(f,'";src:').concat(p,"}");this.insertRule(v);var g=[];for(o=0,s=e.length;o<s;o++)g.push(e[o].loadedName);g.push(f);var m=document.createElement("div");for(m.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),o=0,s=g.length;o<s;++o){var y=document.createElement("span");y.textContent="Hi",y.style.fontFamily=g[o],m.appendChild(y)}document.body.appendChild(m),function t(e,n){if(++c>30)return(0,a.warn)("Load test font never loaded."),void n();l.font="30px "+e,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(f,function(){document.body.removeChild(m),n.complete()})}},{key:"isFontLoadingAPISupported",get:function(){var t="undefined"!==typeof document&&!!document.fonts;if(t&&"undefined"!==typeof navigator){var e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);e&&e[1]<63&&(t=!1)}return(0,a.shadow)(this,"isFontLoadingAPISupported",t)}},{key:"isSyncFontLoadingSupported",get:function(){var t=!1;if("undefined"===typeof navigator)t=!0;else{var e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);e&&e[1]>=14&&(t=!0)}return(0,a.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_loadTestFont",get:function(){return(0,a.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}}]),e}();var g={get value(){return(0,a.shadow)(this,"value",(0,a.isEvalSupported)())}},m=function(){function t(e,n){var r=n.isEvalSupported,i=void 0===r||r,a=n.disableFontFace,o=void 0!==a&&a,s=n.ignoreErrors,u=void 0!==s&&s,l=n.onUnsupportedFeature,c=void 0===l?null:l,d=n.fontRegistry,h=void 0===d?null:d;for(var p in f(this,t),this.compiledGlyphs=Object.create(null),e)this[p]=e[p];this.isEvalSupported=!1!==i,this.disableFontFace=!0===o,this.ignoreErrors=!0===u,this._onUnsupportedFeature=c,this.fontRegistry=h}return h(t,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var t=(0,a.bytesToString)(new Uint8Array(this.data)),e="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");"),n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(e,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,e),n}},{key:"getPathGenerator",value:function(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];var n,r;try{n=t.get(this.loadedName+"_path_"+e)}catch(l){if(!this.ignoreErrors)throw l;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.font}),(0,a.warn)('getPathGenerator - ignoring character: "'.concat(l,'".')),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&g.value){for(var i,o="",s=0,u=n.length;s<u;s++)i=void 0!==(r=n[s]).args?r.args.join(","):"",o+="c."+r.cmd+"("+i+");\n";return this.compiledGlyphs[e]=new Function("c","size",o)}return this.compiledGlyphs[e]=function(t,e){for(var i=0,a=n.length;i<a;i++)"scale"===(r=n[i]).cmd&&(r.args=[e,-e]),t[r.cmd].apply(t,r.args)}}}]),t}();e.FontFaceObject=m},function(t,e,n){var r=Object.create(null),i=n(4),a="undefined"!==typeof navigator&&navigator.userAgent||"",o=/Trident/.test(a),s=/CriOS/.test(a);(o||s)&&(r.disableCreateObjectURL=!0),i()&&(r.disableFontFace=!0,r.nativeImageDecoderSupport="none"),e.apiCompatibilityParams=Object.freeze(r)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(1),i=n(155),a=16,o={get value(){return(0,r.shadow)(o,"value",(0,r.isLittleEndian)())}};function s(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=e*i-n*r,u=n*r-e*i;return[i/s,n/u,r/u,e/s,(i*a-r*o)/u,(n*a-e*o)/s]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var n=this._transformMatrix;n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5],this._originalTranslate(t,e)},t.scale=function(t,e){var n=this._transformMatrix;n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*e,n[3]=n[3]*e,this._originalScale(t,e)},t.transform=function(e,n,r,i,a,o){var s=this._transformMatrix;this._transformMatrix=[s[0]*e+s[2]*n,s[1]*e+s[3]*n,s[0]*r+s[2]*i,s[1]*r+s[3]*i,s[0]*a+s[2]*o+s[4],s[1]*a+s[3]*o+s[5]],t._originalTransform(e,n,r,i,a,o)},t.setTransform=function(e,n,r,i,a,o){this._transformMatrix=[e,n,r,i,a,o],t._originalSetTransform(e,n,r,i,a,o)},t.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this._transformMatrix;this._transformMatrix=[r[0]*e+r[2]*n,r[1]*e+r[3]*n,r[0]*-n+r[2]*e,r[1]*-n+r[3]*e,r[4],r[5]],this._originalRotate(t)})}var u=function(){function t(t){this.canvasFactory=t,this.cache=Object.create(null)}return t.prototype={getCanvas:function(t,e,n,r){var i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),r&&s(i.context),i},clear:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}},t}();var l=function(){function t(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}(),c=function(){function t(t,e,n,r,i,a){this.ctx=t,this.current=new l,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.webGLContext=i,this.imageLayer=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new u(this.canvasFactory),t&&s(t),this._cachedGetSinglePixelWidth=null}function e(t,e){if("undefined"!==typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var n,i,s,u,l,c=e.height,f=e.width,d=c%a,h=(c-d)/a,p=0===d?h:h+1,v=t.createImageData(f,a),g=0,m=e.data,y=v.data;if(e.kind===r.ImageKind.GRAYSCALE_1BPP){var b=m.byteLength,_=new Uint32Array(y.buffer,0,y.byteLength>>2),x=_.length,w=f+7>>3,A=4294967295,k=o.value?4278190080:255;for(i=0;i<p;i++){for(u=i<h?a:d,n=0,s=0;s<u;s++){for(var M=b-g,T=0,S=M>w?f:8*M-7,C=-8&S,E=0,O=0;T<C;T+=8)O=m[g++],_[n++]=128&O?A:k,_[n++]=64&O?A:k,_[n++]=32&O?A:k,_[n++]=16&O?A:k,_[n++]=8&O?A:k,_[n++]=4&O?A:k,_[n++]=2&O?A:k,_[n++]=1&O?A:k;for(;T<S;T++)0===E&&(O=m[g++],E=128),_[n++]=O&E?A:k,E>>=1}for(;n<x;)_[n++]=0;t.putImageData(v,0,i*a)}}else if(e.kind===r.ImageKind.RGBA_32BPP){for(s=0,l=f*a*4,i=0;i<h;i++)y.set(m.subarray(g,g+l)),g+=l,t.putImageData(v,0,s),s+=a;i<p&&(l=f*d*4,y.set(m.subarray(g,g+l)),t.putImageData(v,0,s))}else{if(e.kind!==r.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(l=f*(u=a),i=0;i<p;i++){for(i>=h&&(l=f*(u=d)),n=0,s=l;s--;)y[n++]=m[g++],y[n++]=m[g++],y[n++]=m[g++],y[n++]=255;t.putImageData(v,0,i*a)}}}}function n(t,e){for(var n=e.height,r=e.width,i=n%a,o=(n-i)/a,s=0===i?o:o+1,u=t.createImageData(r,a),l=0,c=e.data,f=u.data,d=0;d<s;d++){for(var h=d<o?a:i,p=3,v=0;v<h;v++)for(var g=0,m=0;m<r;m++){if(!g){var y=c[l++];g=128}f[p]=y&g?0:255,p+=4,g>>=1}t.putImageData(u,0,d*a)}}function c(t,e){for(var n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],r=0,i=n.length;r<i;r++){var a=n[r];void 0!==t[a]&&(e[a]=t[a])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function f(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function d(t,e,n,r){for(var i=t.length,a=3;a<i;a+=4){var o=t[a];if(0===o)t[a-3]=e,t[a-2]=n,t[a-1]=r;else if(o<255){var s=255-o;t[a-3]=t[a-3]*o+e*s>>8,t[a-2]=t[a-2]*o+n*s>>8,t[a-1]=t[a-1]*o+r*s>>8}}}function h(t,e,n){for(var r=t.length,i=3;i<r;i+=4){var a=n?n[t[i]]:t[i];e[i]=e[i]*a*(1/255)|0}}function p(t,e,n){for(var r=t.length,i=3;i<r;i+=4){var a=77*t[i-3]+152*t[i-2]+28*t[i-1];e[i]=n?e[i]*n[a>>8]>>8:e[i]*a>>16}}function v(t,e,n,r){var i=e.canvas,a=e.context;t.setTransform(e.scaleX,0,0,e.scaleY,e.offsetX,e.offsetY);var o=e.backdrop||null;if(!e.transferMap&&r.isEnabled){var s=r.composeSMask({layer:n.canvas,mask:i,properties:{subtype:e.subtype,backdrop:o}});return t.setTransform(1,0,0,1,0,0),void t.drawImage(s,e.offsetX,e.offsetY)}!function(t,e,n,r,i,a,o){var s,u=!!a,l=u?a[0]:0,c=u?a[1]:0,f=u?a[2]:0;s="Luminosity"===i?p:h;for(var v=Math.min(r,Math.ceil(1048576/n)),g=0;g<r;g+=v){var m=Math.min(v,r-g),y=t.getImageData(0,g,n,m),b=e.getImageData(0,g,n,m);u&&d(y.data,l,c,f),s(y.data,b.data,o),t.putImageData(b,0,g)}}(a,n,i.width,i.height,e.subtype,o,e.transferMap),t.drawImage(i,0,0)}var g=["butt","round","square"],m=["miter","round","bevel"],y={},b={};for(var _ in t.prototype={beginDrawing:function(t){var e=t.transform,n=t.viewport,r=t.transparency,i=void 0!==r&&r,a=t.background,o=void 0===a?null:a,s=this.ctx.canvas.width,u=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=o||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,s,u),this.ctx.restore(),i){var l=this.cachedCanvases.getCanvas("transparent",s,u,!0);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),f(this.ctx),e&&this.ctx.transform.apply(this.ctx,e),this.ctx.transform.apply(this.ctx,n.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(t,e,n,i){var a=t.argsArray,o=t.fnArray,s=e||0,u=a.length;if(u===s)return s;for(var l,c=u-s>10&&"function"===typeof n,f=c?Date.now()+15:0,d=0,h=this.commonObjs,p=this.objs;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,n),s;if((l=o[s])!==r.OPS.dependency)this[l].apply(this,a[s]);else for(var v=a[s],g=0,m=v.length;g<m;g++){var y=v[g],b="g"===y[0]&&"_"===y[1]?h:p;if(!b.has(y))return b.get(y,n),s}if(++s===u)return s;if(c&&++d>10){if(Date.now()>f)return n(),s;d=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(t){this.current.lineWidth=t,this.ctx.lineWidth=t},setLineCap:function(t){this.ctx.lineCap=g[t]},setLineJoin:function(t){this.ctx.lineJoin=m[t]},setMiterLimit:function(t){this.ctx.miterLimit=t},setDash:function(t,e){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},setRenderingIntent:function(t){},setFlatness:function(t){},setGState:function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e],i=r[0],a=r[1];switch(i){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=r[1];break;case"ca":this.current.fillAlpha=r[1],this.ctx.globalAlpha=r[1];break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=a?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var t=this.current.activeSMask,e=t.canvas.width,n=t.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,n,!0),a=this.ctx,o=a.mozCurrentTransform;this.ctx.save();var s=i.context;s.scale(1/t.scaleX,1/t.scaleY),s.translate(-t.offsetX,-t.offsetY),s.transform.apply(s,o),t.startTransformInverse=s.mozCurrentTransformInverse,c(a,s),this.ctx=s,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++},suspendSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),v(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),this.ctx.save(),c(t,this.ctx),this.current.resumeSMaskCtx=t;var e=r.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()},resumeSMaskGroup:function(){var t=this.current.resumeSMaskCtx,e=this.ctx;this.ctx=t,this.groupStack.push(e),this.groupLevel++},endSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),v(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),c(t,this.ctx);var e=r.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)},save:function(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(t,e,n,r,i,a){this.ctx.transform(t,e,n,r,i,a),this._cachedGetSinglePixelWidth=null},constructPath:function(t,e){for(var n=this.ctx,i=this.current,a=i.x,o=i.y,s=0,u=0,l=t.length;s<l;s++)switch(0|t[s]){case r.OPS.rectangle:a=e[u++],o=e[u++];var c=e[u++],f=e[u++];0===c&&(c=this.getSinglePixelWidth()),0===f&&(f=this.getSinglePixelWidth());var d=a+c,h=o+f;this.ctx.moveTo(a,o),this.ctx.lineTo(d,o),this.ctx.lineTo(d,h),this.ctx.lineTo(a,h),this.ctx.lineTo(a,o),this.ctx.closePath();break;case r.OPS.moveTo:a=e[u++],o=e[u++],n.moveTo(a,o);break;case r.OPS.lineTo:a=e[u++],o=e[u++],n.lineTo(a,o);break;case r.OPS.curveTo:a=e[u+4],o=e[u+5],n.bezierCurveTo(e[u],e[u+1],e[u+2],e[u+3],a,o),u+=6;break;case r.OPS.curveTo2:n.bezierCurveTo(a,o,e[u],e[u+1],e[u+2],e[u+3]),a=e[u+2],o=e[u+3],u+=4;break;case r.OPS.curveTo3:a=e[u+2],o=e[u+3],n.bezierCurveTo(e[u],e[u+1],a,o,a,o),u+=4;break;case r.OPS.closePath:n.closePath()}i.setCurrentPoint(a,o)},closePath:function(){this.ctx.closePath()},stroke:function(t){t="undefined"===typeof t||t;var e=this.ctx,n=this.current.strokeColor;e.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),e.globalAlpha=this.current.strokeAlpha,n&&n.hasOwnProperty("type")&&"Pattern"===n.type?(e.save(),e.strokeStyle=n.getPattern(e,this),e.stroke(),e.restore()):e.stroke(),t&&this.consumePath(),e.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(t){t="undefined"===typeof t||t;var e=this.ctx,n=this.current.fillColor,r=!1;this.current.patternFill&&(e.save(),this.baseTransform&&e.setTransform.apply(e,this.baseTransform),e.fillStyle=n.getPattern(e,this),r=!0),this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill(),r&&e.restore(),t&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=y},eoClip:function(){this.pendingClip=b},beginText:function(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];e.setTransform.apply(e,r.transform),e.translate(r.x,r.y),r.addToPath(e,r.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()},setCharSpacing:function(t){this.current.charSpacing=t},setWordSpacing:function(t){this.current.wordSpacing=t},setHScale:function(t){this.current.textHScale=t/100},setLeading:function(t){this.current.leading=-t},setFont:function(t,e){var n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error("Can't find font for ".concat(t));if(i.fontMatrix=n.fontMatrix?n.fontMatrix:r.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,!n.isType3Font){var a=n.loadedName||"sans-serif",o=n.black?"900":n.bold?"bold":"normal",s=n.italic?"italic":"normal",u='"'.concat(a,'", ').concat(n.fallbackName),l=e<16?16:e>100?100:e;this.current.fontSizeScale=e/l,this.ctx.font="".concat(s," ").concat(o," ").concat(l,"px ").concat(u)}},setTextRenderingMode:function(t){this.current.textRenderingMode=t},setTextRise:function(t){this.current.textRise=t},moveText:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},setTextMatrix:function(t,e,n,r,i,a){this.current.textMatrix=[t,e,n,r,i,a],this.current.textMatrixScale=Math.sqrt(t*t+e*e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(t,e,n,i){var a,o=this.ctx,s=this.current,u=s.font,l=s.textRenderingMode,c=s.fontSize/s.fontSizeScale,f=l&r.TextRenderingMode.FILL_STROKE_MASK,d=!!(l&r.TextRenderingMode.ADD_TO_PATH_FLAG),h=s.patternFill&&u.data;((u.disableFontFace||d||h)&&(a=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||h?(o.save(),o.translate(e,n),o.beginPath(),a(o,c),i&&o.setTransform.apply(o,i),f!==r.TextRenderingMode.FILL&&f!==r.TextRenderingMode.FILL_STROKE||o.fill(),f!==r.TextRenderingMode.STROKE&&f!==r.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(f!==r.TextRenderingMode.FILL&&f!==r.TextRenderingMode.FILL_STROKE||o.fillText(t,e,n),f!==r.TextRenderingMode.STROKE&&f!==r.TextRenderingMode.FILL_STROKE||o.strokeText(t,e,n)),d)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o.mozCurrentTransform,x:e,y:n,fontSize:c,addToPath:a})},get isFontSubpixelAAEnabled(){var t=this.canvasFactory.create(10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,n=!1,i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)},showText:function(t){var e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);var i=e.fontSize;if(0!==i){var a,o=this.ctx,s=e.fontSizeScale,u=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,f=e.textHScale*c,d=t.length,h=n.vertical,p=h?1:-1,v=n.defaultVMetrics,g=i*e.fontMatrix[0],m=e.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;if(o.save(),e.patternFill){o.save();var y=e.fillColor.getPattern(o,this);a=o.mozCurrentTransform,o.restore(),o.fillStyle=y}o.transform.apply(o,e.textMatrix),o.translate(e.x,e.y+e.textRise),c>0?o.scale(f,-1):o.scale(f,1);var b=e.lineWidth,_=e.textMatrixScale;if(0===_||0===b){var x=e.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;x!==r.TextRenderingMode.STROKE&&x!==r.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,b=.65*this.getSinglePixelWidth())}else b/=_;1!==s&&(o.scale(s,s),b/=s),o.lineWidth=b;var w,A=0;for(w=0;w<d;++w){var k=t[w];if((0,r.isNum)(k))A+=p*k*i/1e3;else{var M,T,S,C,E,O,P,L=!1,R=(k.isSpace?l:0)+u,D=k.fontChar,F=k.accent,j=k.width;if(h)E=k.vmetric||v,O=-(O=k.vmetric?E[1]:.5*j)*g,P=E[2]*g,j=E?-E[0]:j,M=O/s,T=(A+P)/s;else M=A/s,T=0;if(n.remeasure&&j>0){var N=1e3*o.measureText(D).width/i*s;if(j<N&&this.isFontSubpixelAAEnabled){var z=j/N;L=!0,o.save(),o.scale(z,1),M/=z}else j!==N&&(M+=(j-N)/2e3*i/s)}(k.isInFont||n.missingFile)&&(m&&!F?o.fillText(D,M,T):(this.paintChar(D,M,T,a),F&&(S=M+F.offset.x/s,C=T-F.offset.y/s,this.paintChar(F.fontChar,S,C,a)))),A+=j*g+R*c,L&&o.restore()}}h?e.y-=A*f:e.x+=A*f,o.restore()}},showType3Text:function(t){var e,n,i,a,o=this.ctx,s=this.current,u=s.font,l=s.fontSize,c=s.fontDirection,f=u.vertical?1:-1,d=s.charSpacing,h=s.wordSpacing,p=s.textHScale*c,v=s.fontMatrix||r.FONT_IDENTITY_MATRIX,g=t.length;if(!(s.textRenderingMode===r.TextRenderingMode.INVISIBLE)&&0!==l){for(this._cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,s.textMatrix),o.translate(s.x,s.y),o.scale(p,c),e=0;e<g;++e)if(n=t[e],(0,r.isNum)(n))a=f*n*l/1e3,this.ctx.translate(a,0),s.x+=a*p;else{var m=(n.isSpace?h:0)+d,y=u.charProcOperatorList[n.operatorListId];if(y)this.processingType3=n,this.save(),o.scale(l,l),o.transform.apply(o,v),this.executeOperatorList(y),this.restore(),i=r.Util.applyTransform([n.width,0],v)[0]*l+m,o.translate(i,0),s.x+=i*p;else(0,r.warn)('Type3 character "'.concat(n.operatorListId,'" is not available.'))}o.restore(),this.processingType3=null}},setCharWidth:function(t,e){},setCharWidthAndBounds:function(t,e,n,r,i,a){this.ctx.rect(n,r,i-n,a-r),this.clip(),this.endPath()},getColorN_Pattern:function(e){var n,r=this;if("TilingPattern"===e[0]){var a=e[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),s={createCanvasGraphics:function(e){return new t(e,r.commonObjs,r.objs,r.canvasFactory,r.webGLContext)}};n=new i.TilingPattern(e,a,this.ctx,s,o)}else n=(0,i.getShadingPatternFromIR)(e);return n},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(t,e,n){var i=r.Util.makeCssRgb(t,e,n);this.ctx.strokeStyle=i,this.current.strokeColor=i},setFillRGBColor:function(t,e,n){var i=r.Util.makeCssRgb(t,e,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1},shadingFill:function(t){var e=this.ctx;this.save();var n=(0,i.getShadingPatternFromIR)(t);e.fillStyle=n.getPattern(e,this,!0);var a=e.mozCurrentTransformInverse;if(a){var o=e.canvas,s=o.width,u=o.height,l=r.Util.applyTransform([0,0],a),c=r.Util.applyTransform([0,u],a),f=r.Util.applyTransform([s,0],a),d=r.Util.applyTransform([s,u],a),h=Math.min(l[0],c[0],f[0],d[0]),p=Math.min(l[1],c[1],f[1],d[1]),v=Math.max(l[0],c[0],f[0],d[0]),g=Math.max(l[1],c[1],f[1],d[1]);this.ctx.fillRect(h,p,v-h,g-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,r.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,r.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(t,e){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,e){var n=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],n,r),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(t){this.save();var e=this.ctx;t.isolated||(0,r.info)("TODO: Support non-isolated groups."),t.knockout&&(0,r.warn)("Knockout groups not supported.");var n=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var i=r.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform),a=[0,0,e.canvas.width,e.canvas.height];i=r.Util.intersect(i,a)||[0,0,0,0];var o=Math.floor(i[0]),s=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-o,1),l=Math.max(Math.ceil(i[3])-s,1),f=1,d=1;u>4096&&(f=u/4096,u=4096),l>4096&&(d=l/4096,l=4096);var h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);var p=this.cachedCanvases.getCanvas(h,u,l,!0),v=p.context;v.scale(1/f,1/d),v.translate(-o,-s),v.transform.apply(v,n),t.smask?this.smaskStack.push({canvas:p.canvas,context:v,offsetX:o,offsetY:s,scaleX:f,scaleY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,s),e.scale(f,d)),c(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null},endGroup:function(t){this.groupLevel--;var e=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(t,e,n){if(this.save(),f(this.ctx),this.current=new l,Array.isArray(t)&&4===t.length){var r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.clip(),this.endPath()}this.transform.apply(this,e),this.transform.apply(this,n)},endAnnotation:function(){this.restore()},paintJpegXObject:function(t,e,n){var i=this.objs.get(t);if(i){this.save();var a=this.ctx;if(a.scale(1/e,-1/n),a.drawImage(i,0,0,i.width,i.height,0,-n,e,n),this.imageLayer){var o=a.mozCurrentTransformInverse,s=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:t,left:s[0],top:s[1],width:e/o[0],height:n/o[3]})}this.restore()}else(0,r.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function(t){var e=this.ctx,r=t.width,i=t.height,a=this.current.fillColor,o=this.current.patternFill,s=this.processingType3;if(s&&void 0===s.compiled&&(s.compiled=r<=1e3&&i<=1e3?function(t){var e,n,r,i,a=t.width,o=t.height,s=a+1,u=new Uint8Array(s*(o+1)),l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=a+7&-8,f=t.data,d=new Uint8Array(c*o),h=0;for(e=0,i=f.length;e<i;e++)for(var p=128,v=f[e];p>0;)d[h++]=v&p?0:255,p>>=1;var g=0;for(0!==d[h=0]&&(u[0]=1,++g),n=1;n<a;n++)d[h]!==d[h+1]&&(u[n]=d[h]?2:1,++g),h++;for(0!==d[h]&&(u[n]=2,++g),e=1;e<o;e++){r=e*s,d[(h=e*c)-c]!==d[h]&&(u[r]=d[h]?1:8,++g);var m=(d[h]?4:0)+(d[h-c]?8:0);for(n=1;n<a;n++)l[m=(m>>2)+(d[h+1]?4:0)+(d[h-c+1]?8:0)]&&(u[r+n]=l[m],++g),h++;if(d[h-c]!==d[h]&&(u[r+n]=d[h]?2:4,++g),g>1e3)return null}for(r=e*s,0!==d[h=c*(o-1)]&&(u[r]=8,++g),n=1;n<a;n++)d[h]!==d[h+1]&&(u[r+n]=d[h]?4:8,++g),h++;if(0!==d[h]&&(u[r+n]=4,++g),g>1e3)return null;var y=new Int32Array([0,s,-1,0,-s,0,0,0,1]),b=[];for(e=0;g&&e<=o;e++){for(var _=e*s,x=_+a;_<x&&!u[_];)_++;if(_!==x){var w,A=[_%s,e],k=u[_],M=_;do{var T=y[k];do{_+=T}while(!u[_]);5!==(w=u[_])&&10!==w?(k=w,u[_]=0):(k=w&51*k>>4,u[_]&=k>>2|k<<2),A.push(_%s),A.push(_/s|0),--g}while(M!==_);b.push(A),--e}}return function(t){t.save(),t.scale(1/a,-1/o),t.translate(0,-o),t.beginPath();for(var e=0,n=b.length;e<n;e++){var r=b[e];t.moveTo(r[0],r[1]);for(var i=2,s=r.length;i<s;i+=2)t.lineTo(r[i],r[i+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:r,height:i}):null),s&&s.compiled)s.compiled(e);else{var u=this.cachedCanvases.getCanvas("maskCanvas",r,i),l=u.context;l.save(),n(l,t),l.globalCompositeOperation="source-in",l.fillStyle=o?a.getPattern(l,this):a,l.fillRect(0,0,r,i),l.restore(),this.paintInlineImageXObject(u.canvas)}},paintImageMaskXObjectRepeat:function(t,e,r,i){var a=t.width,o=t.height,s=this.current.fillColor,u=this.current.patternFill,l=this.cachedCanvases.getCanvas("maskCanvas",a,o),c=l.context;c.save(),n(c,t),c.globalCompositeOperation="source-in",c.fillStyle=u?s.getPattern(c,this):s,c.fillRect(0,0,a,o),c.restore();for(var f=this.ctx,d=0,h=i.length;d<h;d+=2)f.save(),f.transform(e,0,0,r,i[d],i[d+1]),f.scale(1,-1),f.drawImage(l.canvas,0,0,a,o,0,-1,1,1),f.restore()},paintImageMaskXObjectGroup:function(t){for(var e=this.ctx,r=this.current.fillColor,i=this.current.patternFill,a=0,o=t.length;a<o;a++){var s=t[a],u=s.width,l=s.height,c=this.cachedCanvases.getCanvas("maskCanvas",u,l),f=c.context;f.save(),n(f,s),f.globalCompositeOperation="source-in",f.fillStyle=i?r.getPattern(f,this):r,f.fillRect(0,0,u,l),f.restore(),e.save(),e.transform.apply(e,s.transform),e.scale(1,-1),e.drawImage(c.canvas,0,0,u,l,0,-1,1,1),e.restore()}},paintImageXObject:function(t){var e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,r.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(t,e,n,i){var a=this.objs.get(t);if(a){for(var o=a.width,s=a.height,u=[],l=0,c=i.length;l<c;l+=2)u.push({transform:[e,0,0,n,i[l],i[l+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(a,u)}else(0,r.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(t){var n=t.width,r=t.height,i=this.ctx;this.save(),i.scale(1/n,-1/r);var a,o,s=i.mozCurrentTransformInverse,u=s[0],l=s[1],c=Math.max(Math.sqrt(u*u+l*l),1),f=s[2],d=s[3],h=Math.max(Math.sqrt(f*f+d*d),1);if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)a=t;else{var p=(o=this.cachedCanvases.getCanvas("inlineImage",n,r)).context;e(p,t),a=o.canvas}for(var v=n,g=r,m="prescale1";c>2&&v>1||h>2&&g>1;){var y=v,b=g;c>2&&v>1&&(c/=v/(y=Math.ceil(v/2))),h>2&&g>1&&(h/=g/(b=Math.ceil(g/2))),(p=(o=this.cachedCanvases.getCanvas(m,y,b)).context).clearRect(0,0,y,b),p.drawImage(a,0,0,v,g,0,0,y,b),a=o.canvas,v=y,g=b,m="prescale1"===m?"prescale2":"prescale1"}if(i.drawImage(a,0,0,v,g,0,-r,n,r),this.imageLayer){var _=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:t,left:_[0],top:_[1],width:n/s[0],height:r/s[3]})}this.restore()},paintInlineImageXObjectGroup:function(t,n){var r=this.ctx,i=t.width,a=t.height,o=this.cachedCanvases.getCanvas("inlineImage",i,a);e(o.context,t);for(var s=0,u=n.length;s<u;s++){var l=n[s];if(r.save(),r.transform.apply(r,l.transform),r.scale(1,-1),r.drawImage(o.canvas,l.x,l.y,l.w,l.h,0,-1,1,1),this.imageLayer){var c=this.getCanvasPosition(l.x,l.y);this.imageLayer.appendImage({imgData:t,left:c[0],top:c[1],width:i,height:a})}r.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,r.warn)("Unsupported 'paintXObject' command.")},markPoint:function(t){},markPointProps:function(t,e){},beginMarkedContent:function(t){},beginMarkedContentProps:function(t,e){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var t=this.ctx;this.pendingClip&&(this.pendingClip===b?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()},getSinglePixelWidth:function(t){if(null===this._cachedGetSinglePixelWidth){var e=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1],e[2]*e[2]+e[3]*e[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(t,e){var n=this.ctx.mozCurrentTransform;return[n[0]*t+n[2]*e+n[4],n[1]*t+n[3]*e+n[5]]}},r.OPS)t.prototype[r.OPS[_]]=t.prototype[_];return t}();e.CanvasGraphics=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getShadingPatternFromIR=function(t){i[t[0]];throw new Error("Unknown IR type: ".concat(t[0]))},e.TilingPattern=void 0;var r=n(1),i={RadialAxial:{fromIR:function(t){var e=t[1],n=t[2],r=t[3],i=t[4],a=t[5],o=t[6];return{type:"Pattern",getPattern:function(t){var s;"axial"===e?s=t.createLinearGradient(r[0],r[1],i[0],i[1]):"radial"===e&&(s=t.createRadialGradient(r[0],r[1],a,i[0],i[1],o));for(var u=0,l=n.length;u<l;++u){var c=n[u];s.addColorStop(c[0],c[1])}return s}}}}},a=function(){function t(t,e,n,r,i,a,o,s){var u,l=e.coords,c=e.colors,f=t.data,d=4*t.width;l[n+1]>l[r+1]&&(u=n,n=r,r=u,u=a,a=o,o=u),l[r+1]>l[i+1]&&(u=r,r=i,i=u,u=o,o=s,s=u),l[n+1]>l[r+1]&&(u=n,n=r,r=u,u=a,a=o,o=u);var h=(l[n]+e.offsetX)*e.scaleX,p=(l[n+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,g=(l[r+1]+e.offsetY)*e.scaleY,m=(l[i]+e.offsetX)*e.scaleX,y=(l[i+1]+e.offsetY)*e.scaleY;if(!(p>=y))for(var b,_,x,w,A,k,M,T,S,C=c[a],E=c[a+1],O=c[a+2],P=c[o],L=c[o+1],R=c[o+2],D=c[s],F=c[s+1],j=c[s+2],N=Math.round(p),z=Math.round(y),I=N;I<=z;I++){I<g?(b=h-(h-v)*(S=I<p?0:p===g?1:(p-I)/(p-g)),_=C-(C-P)*S,x=E-(E-L)*S,w=O-(O-R)*S):(b=v-(v-m)*(S=I>y?1:g===y?0:(g-I)/(g-y)),_=P-(P-D)*S,x=L-(L-F)*S,w=R-(R-j)*S),A=h-(h-m)*(S=I<p?0:I>y?1:(p-I)/(p-y)),k=C-(C-D)*S,M=E-(E-F)*S,T=O-(O-j)*S;for(var B=Math.round(Math.min(b,A)),q=Math.round(Math.max(b,A)),U=d*I+4*B,H=B;H<=q;H++)S=(S=(b-H)/(b-A))<0?0:S>1?1:S,f[U++]=_-(_-k)*S|0,f[U++]=x-(x-M)*S|0,f[U++]=w-(w-T)*S|0,f[U++]=255}}function e(e,n,r){var i,a,o=n.coords,s=n.colors;switch(n.type){case"lattice":var u=n.verticesPerRow,l=Math.floor(o.length/u)-1,c=u-1;for(i=0;i<l;i++)for(var f=i*u,d=0;d<c;d++,f++)t(e,r,o[f],o[f+1],o[f+u],s[f],s[f+1],s[f+u]),t(e,r,o[f+u+1],o[f+1],o[f+u],s[f+u+1],s[f+1],s[f+u]);break;case"triangles":for(i=0,a=o.length;i<a;i+=3)t(e,r,o[i],o[i+1],o[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}return function(t,n,r,i,a,o,s,u){var l,c,f,d,h=Math.floor(t[0]),p=Math.floor(t[1]),v=Math.ceil(t[2])-h,g=Math.ceil(t[3])-p,m=Math.min(Math.ceil(Math.abs(v*n[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*n[1]*1.1)),3e3),b=v/m,_=g/y,x={coords:r,colors:i,offsetX:-h,offsetY:-p,scaleX:1/b,scaleY:1/_},w=m+4,A=y+4;if(u.isEnabled)l=u.drawFigures({width:m,height:y,backgroundColor:o,figures:a,context:x}),(c=s.getCanvas("mesh",w,A,!1)).context.drawImage(l,2,2),l=c.canvas;else{var k=(c=s.getCanvas("mesh",w,A,!1)).context,M=k.createImageData(m,y);if(o){var T=M.data;for(f=0,d=T.length;f<d;f+=4)T[f]=o[0],T[f+1]=o[1],T[f+2]=o[2],T[f+3]=255}for(f=0;f<a.length;f++)e(M,a[f],x);k.putImageData(M,2,2),l=c.canvas}return{canvas:l,offsetX:h-2*b,offsetY:p-2*_,scaleX:b,scaleY:_}}}();i.Mesh={fromIR:function(t){var e=t[2],n=t[3],i=t[4],o=t[5],s=t[6],u=t[8];return{type:"Pattern",getPattern:function(t,l,c){var f;if(c)f=r.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(f=r.Util.singularValueDecompose2dScale(l.baseTransform),s){var d=r.Util.singularValueDecompose2dScale(s);f=[f[0]*d[0],f[1]*d[1]]}var h=a(o,f,e,n,i,c?null:u,l.cachedCanvases,l.webGLContext);return c||(t.setTransform.apply(t,l.baseTransform),s&&t.transform.apply(t,s)),t.translate(h.offsetX,h.offsetY),t.scale(h.scaleX,h.scaleY),t.createPattern(h.canvas,"no-repeat")}}}},i.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var o=function(){var t=1,e=2;function n(t,e,n,r,i){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.canvasGraphicsFactory=r,this.baseTransform=i,this.type="Pattern",this.ctx=n}return n.prototype={createPatternCanvas:function(t){var e=this.operatorList,n=this.bbox,i=this.xstep,a=this.ystep,o=this.paintType,s=this.tilingType,u=this.color,l=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+s);var c=n[0],f=n[1],d=n[2],h=n[3],p=[c,f],v=[c+i,f+a],g=v[0]-p[0],m=v[1]-p[1],y=r.Util.singularValueDecompose2dScale(this.matrix),b=r.Util.singularValueDecompose2dScale(this.baseTransform),_=[y[0]*b[0],y[1]*b[1]];g=Math.min(Math.ceil(Math.abs(g*_[0])),3e3),m=Math.min(Math.ceil(Math.abs(m*_[1])),3e3);var x=t.cachedCanvases.getCanvas("pattern",g,m,!0),w=x.context,A=l.createCanvasGraphics(w);A.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(A,o,u),this.setScale(g,m,i,a),this.transformToScale(A);var k=[1,0,0,1,-p[0],-p[1]];return A.transform.apply(A,k),this.clipBbox(A,n,c,f,d,h),A.executeOperatorList(e),x.canvas},setScale:function(t,e,n,r){this.scale=[t/n,e/r]},transformToScale:function(t){var e=this.scale,n=[e[0],0,0,e[1],0,0];t.transform.apply(t,n)},scaleToContext:function(){var t=this.scale;this.ctx.scale(1/t[0],1/t[1])},clipBbox:function(t,e,n,r,i,a){if(Array.isArray(e)&&4===e.length){var o=i-n,s=a-r;t.ctx.rect(n,r,o,s),t.clip(),t.endPath()}},setFillAndStrokeStyleToContext:function(n,i,a){var o=n.ctx,s=n.current;switch(i){case t:var u=this.ctx;o.fillStyle=u.fillStyle,o.strokeStyle=u.strokeStyle,s.fillColor=u.fillStyle,s.strokeColor=u.strokeStyle;break;case e:var l=r.Util.makeCssRgb(a[0],a[1],a[2]);o.fillStyle=l,o.strokeStyle=l,s.fillColor=l,s.strokeColor=l;break;default:throw new r.FormatError("Unsupported paint type: ".concat(i))}},getPattern:function(t,e){var n=this.createPatternCanvas(e);return(t=this.ctx).setTransform.apply(t,this.baseTransform),t.transform.apply(t,this.matrix),this.scaleToContext(),t.createPattern(n,"repeat")}},n}();e.TilingPattern=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;var r=Object.create(null);e.GlobalWorkerOptions=r,r.workerPort=void 0===r.workerPort?null:r.workerPort,r.workerSrc=void 0===r.workerSrc?"":r.workerSrc},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=h;var r,i=(r=n(147))&&r.__esModule?r:{default:r},a=n(1);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(Lt){return void n(Lt)}s.done?e(u):Promise.resolve(u).then(r,i)}function u(t,e){return l.apply(this,arguments)}function l(){var t;return t=i.default.mark(function t(e,n){var r,a=arguments;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:null,e){t.next=3;break}return t.abrupt("return");case 3:return t.abrupt("return",e.apply(r,n));case 4:case"end":return t.stop()}},t,this)}),(l=function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){s(a,r,i,o,u,"next",t)}function u(t){s(a,r,i,o,u,"throw",t)}o(void 0)})}).apply(this,arguments)}function c(t){if("object"!==o(t))return t;switch(t.name){case"AbortException":return new a.AbortException(t.message);case"MissingPDFException":return new a.MissingPDFException(t.message);case"UnexpectedResponseException":return new a.UnexpectedResponseException(t.message,t.status);default:return new a.UnknownErrorException(t.message,t.details)}}function f(t){return!(t instanceof Error)||t instanceof a.AbortException||t instanceof a.MissingPDFException||t instanceof a.UnexpectedResponseException||t instanceof a.UnknownErrorException?t:new a.UnknownErrorException(t.message,t.toString())}function d(t,e,n){e?t.resolve():t.reject(n)}function h(t,e,n){var r=this;this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var i=this.callbacksCapabilities=Object.create(null),a=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===r.sourceName)if(e.stream)r._processStreamMessage(e);else if(e.isReply){var o=e.callbackId;if(!(e.callbackId in i))throw new Error("Cannot resolve callback ".concat(o));var s=i[o];delete i[o],"error"in e?s.reject(c(e.error)):s.resolve(e.data)}else{if(!(e.action in a))throw new Error("Unknown action from worker: ".concat(e.action));var u=a[e.action];if(e.callbackId){var l=r.sourceName,d=e.sourceName;Promise.resolve().then(function(){return u[0].call(u[1],e.data)}).then(function(t){n.postMessage({sourceName:l,targetName:d,isReply:!0,callbackId:e.callbackId,data:t})},function(t){n.postMessage({sourceName:l,targetName:d,isReply:!0,callbackId:e.callbackId,error:f(t)})})}else e.streamId?r._createStreamSink(e):u[0].call(u[1],e.data)}},n.addEventListener("message",this._onComObjOnMessage)}h.prototype={on:function(t,e,n){var r=this.actionHandler;if(r[t])throw new Error('There is already an actionName called "'.concat(t,'"'));r[t]=[e,n]},send:function(t,e,n){var r={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e};this.postMessage(r,n)},sendWithPromise:function(t,e,n){var r=this.callbackId++,i={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e,callbackId:r},o=(0,a.createPromiseCapability)();this.callbacksCapabilities[r]=o;try{this.postMessage(i,n)}catch(s){o.reject(s)}return o.promise},sendWithStream:function(t,e,n,r){var i=this,o=this.streamId++,s=this.sourceName,u=this.targetName;return new a.ReadableStream({start:function(n){var r=(0,a.createPromiseCapability)();return i.streamControllers[o]={controller:n,startCall:r,isClosed:!1},i.postMessage({sourceName:s,targetName:u,action:t,streamId:o,data:e,desiredSize:n.desiredSize}),r.promise},pull:function(t){var e=(0,a.createPromiseCapability)();return i.streamControllers[o].pullCall=e,i.postMessage({sourceName:s,targetName:u,stream:"pull",streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:function(t){var e=(0,a.createPromiseCapability)();return i.streamControllers[o].cancelCall=e,i.streamControllers[o].isClosed=!0,i.postMessage({sourceName:s,targetName:u,stream:"cancel",reason:t,streamId:o}),e.promise}},n)},_createStreamSink:function(t){var e=this,n=this,r=this.actionHandler[t.action],i=t.streamId,o=t.desiredSize,s=this.sourceName,l=t.sourceName,c=(0,a.createPromiseCapability)(),f=function(t){var n=t.stream,r=t.chunk,a=t.transfers,o=t.success,u=t.reason;e.postMessage({sourceName:s,targetName:l,stream:n,streamId:i,chunk:r,success:o,reason:u},a)},d={enqueue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var r=this.desiredSize;this.desiredSize-=e,r>0&&this.desiredSize<=0&&(this.sinkCapability=(0,a.createPromiseCapability)(),this.ready=this.sinkCapability.promise),f({stream:"enqueue",chunk:t,transfers:n})}},close:function(){this.isCancelled||(this.isCancelled=!0,f({stream:"close"}),delete n.streamSinks[i])},error:function(t){this.isCancelled||(this.isCancelled=!0,f({stream:"error",reason:t}))},sinkCapability:c,onPull:null,onCancel:null,isCancelled:!1,desiredSize:o,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,u(r[0],[t.data,d],r[1]).then(function(){f({stream:"start_complete",success:!0})},function(t){f({stream:"start_complete",success:!1,reason:t})})},_processStreamMessage:function(t){var e=this,n=this.sourceName,r=t.sourceName,i=t.streamId,o=function(t){var a=t.stream,o=t.success,s=t.reason;e.comObj.postMessage({sourceName:n,targetName:r,stream:a,success:o,streamId:i,reason:s})},s=function(){Promise.all([e.streamControllers[t.streamId].startCall,e.streamControllers[t.streamId].pullCall,e.streamControllers[t.streamId].cancelCall].map(function(t){return t&&(e=t.promise,Promise.resolve(e).catch(function(){}));var e})).then(function(){delete e.streamControllers[t.streamId]})};switch(t.stream){case"start_complete":d(this.streamControllers[t.streamId].startCall,t.success,c(t.reason));break;case"pull_complete":d(this.streamControllers[t.streamId].pullCall,t.success,c(t.reason));break;case"pull":if(!this.streamSinks[t.streamId]){o({stream:"pull_complete",success:!0});break}this.streamSinks[t.streamId].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[t.streamId].sinkCapability.resolve(),this.streamSinks[t.streamId].desiredSize=t.desiredSize,u(this.streamSinks[t.streamId].onPull).then(function(){o({stream:"pull_complete",success:!0})},function(t){o({stream:"pull_complete",success:!1,reason:t})});break;case"enqueue":(0,a.assert)(this.streamControllers[t.streamId],"enqueue should have stream controller"),this.streamControllers[t.streamId].isClosed||this.streamControllers[t.streamId].controller.enqueue(t.chunk);break;case"close":if((0,a.assert)(this.streamControllers[t.streamId],"close should have stream controller"),this.streamControllers[t.streamId].isClosed)break;this.streamControllers[t.streamId].isClosed=!0,this.streamControllers[t.streamId].controller.close(),s();break;case"error":(0,a.assert)(this.streamControllers[t.streamId],"error should have stream controller"),this.streamControllers[t.streamId].controller.error(c(t.reason)),s();break;case"cancel_complete":d(this.streamControllers[t.streamId].cancelCall,t.success,c(t.reason)),s();break;case"cancel":if(!this.streamSinks[t.streamId])break;u(this.streamSinks[t.streamId].onCancel,[c(t.reason)]).then(function(){o({stream:"cancel_complete",success:!0})},function(t){o({stream:"cancel_complete",success:!1,reason:t})}),this.streamSinks[t.streamId].sinkCapability.reject(c(t.reason)),this.streamSinks[t.streamId].isCancelled=!0,delete this.streamSinks[t.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1),i=n(159);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,r.assert)("string"===typeof e,"Metadata: input is not a string"),e=this._repair(e);var n=(new i.SimpleXMLParser).parseFromString(e);this._metadata=Object.create(null),n&&this._parse(n)}var e,n,o;return e=t,(n=[{key:"_repair",value:function(t){return t.replace(/^([^<]+)/,"").replace(/>\\376\\377([^<]+)/g,function(t,e){for(var n=e.replace(/\\([0-3])([0-7])([0-7])/g,function(t,e,n,r){return String.fromCharCode(64*e+8*n+1*r)}).replace(/&(amp|apos|gt|lt|quot);/g,function(t,e){switch(e){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: ".concat(e," isn't defined."))}),r="",i=0,a=n.length;i<a;i+=2){var o=256*n.charCodeAt(i)+n.charCodeAt(i+1);r+=o>=32&&o<127&&60!==o&&62!==o&&38!==o?String.fromCharCode(o):"&#x"+(65536+o).toString(16).substring(1)+";"}return">"+r})}},{key:"_parse",value:function(t){var e=t.documentElement;if("rdf:rdf"!==e.nodeName.toLowerCase())for(e=e.firstChild;e&&"rdf:rdf"!==e.nodeName.toLowerCase();)e=e.nextSibling;var n=e?e.nodeName.toLowerCase():null;if(e&&"rdf:rdf"===n&&e.hasChildNodes())for(var r=e.childNodes,i=0,a=r.length;i<a;i++){var o=r[i];if("rdf:description"===o.nodeName.toLowerCase())for(var s=0,u=o.childNodes.length;s<u;s++)if("#text"!==o.childNodes[s].nodeName.toLowerCase()){var l=o.childNodes[s],c=l.nodeName.toLowerCase();this._metadata[c]=l.textContent.trim()}}}},{key:"get",value:function(t){var e=this._metadata[t];return"undefined"!==typeof e?e:null}},{key:"getAll",value:function(){return this._metadata}},{key:"has",value:function(t){return"undefined"!==typeof this._metadata[t]}}])&&a(e.prototype,n),o&&a(e,o),t}();e.Metadata=o},function(t,e,n){function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,n){return(o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleXMLParser=void 0;var d={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function h(t,e){var n=t[e];return" "===n||"\n"===n||"\r"===n||"\t"===n}var p=function(){function t(){l(this,t)}return f(t,[{key:"_resolveEntities",value:function(t){var e=this;return t.replace(/&([^;]+);/g,function(t,n){if("#x"===n.substring(0,2))return String.fromCharCode(parseInt(n.substring(2),16));if("#"===n.substring(0,1))return String.fromCharCode(parseInt(n.substring(1),10));switch(n){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return e.onResolveEntity(n)})}},{key:"_parseContent",value:function(t,e){var n,r=e,i=[];function a(){for(;r<t.length&&h(t,r);)++r}for(;r<t.length&&!h(t,r)&&">"!==t[r]&&"/"!==t[r];)++r;for(n=t.substring(e,r),a();r<t.length&&">"!==t[r]&&"/"!==t[r]&&"?"!==t[r];){a();for(var o,s="";r<t.length&&!h(t,r)&&"="!==t[r];)s+=t[r],++r;if(a(),"="!==t[r])return null;++r,a();var u=t[r];if('"'!==u&&"'"!==u)return null;var l=t.indexOf(u,++r);if(l<0)return null;o=t.substring(r,l),i.push({name:s,value:this._resolveEntities(o)}),r=l+1,a()}return{name:n,attributes:i,parsed:r-e}}},{key:"_parseProcessingInstruction",value:function(t,e){var n,r=e;for(;r<t.length&&!h(t,r)&&">"!==t[r]&&"/"!==t[r];)++r;n=t.substring(e,r),function(){for(;r<t.length&&h(t,r);)++r}();for(var i=r;r<t.length&&("?"!==t[r]||">"!==t[r+1]);)++r;return{name:n,value:t.substring(i,r),parsed:r-e}}},{key:"parseXml",value:function(t){for(var e=0;e<t.length;){var n=e;if("<"===t[e]){var r=void 0;switch(t[++n]){case"/":if(++n,(r=t.indexOf(">",n))<0)return void this.onError(d.UnterminatedElement);this.onEndElement(t.substring(n,r)),n=r+1;break;case"?":++n;var i=this._parseProcessingInstruction(t,n);if("?>"!==t.substring(n+i.parsed,n+i.parsed+2))return void this.onError(d.UnterminatedXmlDeclaration);this.onPi(i.name,i.value),n+=i.parsed+2;break;case"!":if("--"===t.substring(n+1,n+3)){if((r=t.indexOf("--\x3e",n+3))<0)return void this.onError(d.UnterminatedComment);this.onComment(t.substring(n+3,r)),n=r+3}else if("[CDATA["===t.substring(n+1,n+8)){if((r=t.indexOf("]]>",n+8))<0)return void this.onError(d.UnterminatedCdat);this.onCdata(t.substring(n+8,r)),n=r+3}else{if("DOCTYPE"!==t.substring(n+1,n+8))return void this.onError(d.MalformedElement);var a=t.indexOf("[",n+8),o=!1;if((r=t.indexOf(">",n+8))<0)return void this.onError(d.UnterminatedDoctypeDeclaration);if(a>0&&r>a){if((r=t.indexOf("]>",n+8))<0)return void this.onError(d.UnterminatedDoctypeDeclaration);o=!0}var s=t.substring(n+8,r+(o?1:0));this.onDoctype(s),n=r+(o?2:1)}break;default:var u=this._parseContent(t,n);if(null===u)return void this.onError(d.MalformedElement);var l=!1;if("/>"===t.substring(n+u.parsed,n+u.parsed+2))l=!0;else if(">"!==t.substring(n+u.parsed,n+u.parsed+1))return void this.onError(d.UnterminatedElement);this.onBeginElement(u.name,u.attributes,l),n+=u.parsed+(l?2:1)}}else{for(;n<t.length&&"<"!==t[n];)n++;var c=t.substring(e,n);this.onText(this._resolveEntities(c))}e=n}}},{key:"onResolveEntity",value:function(t){return"&".concat(t,";")}},{key:"onPi",value:function(t,e){}},{key:"onComment",value:function(t){}},{key:"onCdata",value:function(t){}},{key:"onDoctype",value:function(t){}},{key:"onText",value:function(t){}},{key:"onBeginElement",value:function(t,e,n){}},{key:"onEndElement",value:function(t){}},{key:"onError",value:function(t){}}]),t}(),v=function(){function t(e,n){l(this,t),this.nodeName=e,this.nodeValue=n,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return f(t,[{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function(){var t=this.parentNode.childNodes;if(t){var e=t.indexOf(this);if(-1!==e)return t[e+1]}}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map(function(t){return t.textContent}).join(""):this.nodeValue||""}}]),t}(),g=function(t){function e(){var t;return l(this,e),(t=a(this,s(e).call(this)))._currentFragment=null,t._stack=null,t._errorCode=d.NoError,t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,p),f(e,[{key:"parseFromString",value:function(t){if(this._currentFragment=[],this._stack=[],this._errorCode=d.NoError,this.parseXml(t),this._errorCode===d.NoError){var e=i(this._currentFragment,1)[0];if(e)return{documentElement:e}}}},{key:"onResolveEntity",value:function(t){switch(t){case"apos":return"'"}return o(s(e.prototype),"onResolveEntity",this).call(this,t)}},{key:"onText",value:function(t){if(!function(t){for(var e=0,n=t.length;e<n;e++)if(!h(t,e))return!1;return!0}(t)){var e=new v("#text",t);this._currentFragment.push(e)}}},{key:"onCdata",value:function(t){var e=new v("#text",t);this._currentFragment.push(e)}},{key:"onBeginElement",value:function(t,e,n){var r=new v(t);r.childNodes=[],this._currentFragment.push(r),n||(this._stack.push(this._currentFragment),this._currentFragment=r.childNodes)}},{key:"onEndElement",value:function(t){this._currentFragment=this._stack.pop()||[];var e=this._currentFragment[this._currentFragment.length-1];if(e)for(var n=0,r=e.childNodes.length;n<r;n++)e.childNodes[n].parentNode=e}},{key:"onError",value:function(t){this._errorCode=t}}]),e}();e.SimpleXMLParser=g},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r,i=(r=n(147))&&r.__esModule?r:{default:r},a=n(1);function o(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(Lt){return void n(Lt)}s.done?e(u):Promise.resolve(u).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,u,"next",t)}function u(t){o(a,r,i,s,u,"throw",t)}s(void 0)})}}var u=function(){function t(t,e){var n=this;(0,a.assert)(e),this._queuedChunks=[];var r=t.initialData;if(r&&r.length>0){var i=new Uint8Array(r).buffer;this._queuedChunks.push(i)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(t,e){n._onReceiveData({begin:t,chunk:e})}),this._pdfDataRangeTransport.addProgressListener(function(t){n._onProgress({loaded:t})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(t){n._onReceiveData({chunk:t})}),this._pdfDataRangeTransport.transportReady()}function e(t,e){this._stream=t,this._done=!1,this._filename=null,this._queuedChunks=e||[],this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}function n(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return t.prototype={_onReceiveData:function(t){var e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{var n=this._rangeReaders.some(function(n){return n._begin===t.begin&&(n._enqueue(e),!0)});(0,a.assert)(n)}},_onProgress:function(t){if(this._rangeReaders.length>0){var e=this._rangeReaders[0];e.onProgress&&e.onProgress({loaded:t.loaded})}},_removeRangeReader:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)},getFullReader:function(){(0,a.assert)(!this._fullRequestReader);var t=this._queuedChunks;return this._queuedChunks=null,new e(this,t)},getRangeReader:function(t,e){var r=new n(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(r),r},cancelAllRequests:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeReaders.slice(0).forEach(function(e){e.cancel(t)}),this._pdfDataRangeTransport.abort()}},e.prototype={_enqueue:function(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t))},get headersReady(){return this._headersReady},get filename(){return this._filename},get isRangeSupported(){return this._stream._isRangeSupported},get isStreamingSupported(){return this._stream._isStreamingSupported},get contentLength(){return this._stream._contentLength},read:function(){var t=s(i.default.mark(function t(){var e,n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._queuedChunks.length>0)){t.next=3;break}return e=this._queuedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 3:if(!this._done){t.next=5;break}return t.abrupt("return",{value:void 0,done:!0});case 5:return n=(0,a.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(t){this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[]}},n.prototype={_enqueue:function(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else this._requests.shift().resolve({value:t,done:!1}),this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[];this._done=!0,this._stream._removeRangeReader(this)}},get isStreamingSupported(){return!1},read:function(){var t=s(i.default.mark(function t(){var e,n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,a.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(t){this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}},t}();e.PDFDataTransportStream=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=void 0;var r=n(1);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e){var n=e.enable,r=void 0!==n&&n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._enabled=!0===r}var e,n,a;return e=t,(n=[{key:"composeSMask",value:function(t){var e=t.layer,n=t.mask,r=t.properties;return o.composeSMask(e,n,r)}},{key:"drawFigures",value:function(t){var e=t.width,n=t.height,r=t.backgroundColor,i=t.figures,a=t.context;return o.drawFigures(e,n,r,i,a)}},{key:"clear",value:function(){o.cleanup()}},{key:"isEnabled",get:function(){var t=this._enabled;return t&&(t=o.tryInitGL()),(0,r.shadow)(this,"isEnabled",t)}}])&&i(e.prototype,n),a&&i(e,a),t}();e.WebGLContext=a;var o=function(){function t(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);throw new Error("Error during shader compilation: "+i)}return r}function e(e,n){return t(e,n,e.VERTEX_SHADER)}function n(e,n){return t(e,n,e.FRAGMENT_SHADER)}function r(t,e){for(var n=t.createProgram(),r=0,i=e.length;r<i;++r)t.attachShader(n,e[r]);if(t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var a=t.getProgramInfoLog(n);throw new Error("Error during program linking: "+a)}return n}function i(t,e,n){t.activeTexture(n);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r}var a,o;function s(){a||(o=document.createElement("canvas"),a=o.getContext("webgl",{premultipliedalpha:!1}))}var u="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",l="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",c=null;var f="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",d="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",h=null;return{tryInitGL:function(){try{return s(),!!a}catch(t){}return!1},composeSMask:function(t,f,d){var h=t.width,p=t.height;c||function(){var t,i;s(),t=o,o=null,i=a,a=null;var f=r(i,[e(i,u),n(i,l)]);i.useProgram(f);var d={};d.gl=i,d.canvas=t,d.resolutionLocation=i.getUniformLocation(f,"u_resolution"),d.positionLocation=i.getAttribLocation(f,"a_position"),d.backdropLocation=i.getUniformLocation(f,"u_backdrop"),d.subtypeLocation=i.getUniformLocation(f,"u_subtype");var h=i.getAttribLocation(f,"a_texCoord"),p=i.getUniformLocation(f,"u_image"),v=i.getUniformLocation(f,"u_mask"),g=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,g),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),i.enableVertexAttribArray(h),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.uniform1i(p,0),i.uniform1i(v,1),c=d}();var v=c,g=v.canvas,m=v.gl;g.width=h,g.height=p,m.viewport(0,0,m.drawingBufferWidth,m.drawingBufferHeight),m.uniform2f(v.resolutionLocation,h,p),d.backdrop?m.uniform4f(v.resolutionLocation,d.backdrop[0],d.backdrop[1],d.backdrop[2],1):m.uniform4f(v.resolutionLocation,0,0,0,0),m.uniform1i(v.subtypeLocation,"Luminosity"===d.subtype?1:0);var y=i(m,t,m.TEXTURE0),b=i(m,f,m.TEXTURE1),_=m.createBuffer();return m.bindBuffer(m.ARRAY_BUFFER,_),m.bufferData(m.ARRAY_BUFFER,new Float32Array([0,0,h,0,0,p,0,p,h,0,h,p]),m.STATIC_DRAW),m.enableVertexAttribArray(v.positionLocation),m.vertexAttribPointer(v.positionLocation,2,m.FLOAT,!1,0,0),m.clearColor(0,0,0,0),m.enable(m.BLEND),m.blendFunc(m.ONE,m.ONE_MINUS_SRC_ALPHA),m.clear(m.COLOR_BUFFER_BIT),m.drawArrays(m.TRIANGLES,0,6),m.flush(),m.deleteTexture(y),m.deleteTexture(b),m.deleteBuffer(_),g},drawFigures:function(t,i,u,l,c){h||function(){var t,i;s(),t=o,o=null,i=a,a=null;var u=r(i,[e(i,f),n(i,d)]);i.useProgram(u);var l={};l.gl=i,l.canvas=t,l.resolutionLocation=i.getUniformLocation(u,"u_resolution"),l.scaleLocation=i.getUniformLocation(u,"u_scale"),l.offsetLocation=i.getUniformLocation(u,"u_offset"),l.positionLocation=i.getAttribLocation(u,"a_position"),l.colorLocation=i.getAttribLocation(u,"a_color"),h=l}();var p=h,v=p.canvas,g=p.gl;v.width=t,v.height=i,g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight),g.uniform2f(p.resolutionLocation,t,i);var m,y,b,_=0;for(m=0,y=l.length;m<y;m++)switch(l[m].type){case"lattice":_+=((b=l[m].coords.length/l[m].verticesPerRow|0)-1)*(l[m].verticesPerRow-1)*6;break;case"triangles":_+=l[m].coords.length}var x=new Float32Array(2*_),w=new Uint8Array(3*_),A=c.coords,k=c.colors,M=0,T=0;for(m=0,y=l.length;m<y;m++){var S=l[m],C=S.coords,E=S.colors;switch(S.type){case"lattice":var O=S.verticesPerRow;b=C.length/O|0;for(var P=1;P<b;P++)for(var L=P*O+1,R=1;R<O;R++,L++)x[M]=A[C[L-O-1]],x[M+1]=A[C[L-O-1]+1],x[M+2]=A[C[L-O]],x[M+3]=A[C[L-O]+1],x[M+4]=A[C[L-1]],x[M+5]=A[C[L-1]+1],w[T]=k[E[L-O-1]],w[T+1]=k[E[L-O-1]+1],w[T+2]=k[E[L-O-1]+2],w[T+3]=k[E[L-O]],w[T+4]=k[E[L-O]+1],w[T+5]=k[E[L-O]+2],w[T+6]=k[E[L-1]],w[T+7]=k[E[L-1]+1],w[T+8]=k[E[L-1]+2],x[M+6]=x[M+2],x[M+7]=x[M+3],x[M+8]=x[M+4],x[M+9]=x[M+5],x[M+10]=A[C[L]],x[M+11]=A[C[L]+1],w[T+9]=w[T+3],w[T+10]=w[T+4],w[T+11]=w[T+5],w[T+12]=w[T+6],w[T+13]=w[T+7],w[T+14]=w[T+8],w[T+15]=k[E[L]],w[T+16]=k[E[L]+1],w[T+17]=k[E[L]+2],M+=12,T+=18;break;case"triangles":for(var D=0,F=C.length;D<F;D++)x[M]=A[C[D]],x[M+1]=A[C[D]+1],w[T]=k[E[D]],w[T+1]=k[E[D]+1],w[T+2]=k[E[D]+2],M+=2,T+=3}}u?g.clearColor(u[0]/255,u[1]/255,u[2]/255,1):g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT);var j=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,j),g.bufferData(g.ARRAY_BUFFER,x,g.STATIC_DRAW),g.enableVertexAttribArray(p.positionLocation),g.vertexAttribPointer(p.positionLocation,2,g.FLOAT,!1,0,0);var N=g.createBuffer();return g.bindBuffer(g.ARRAY_BUFFER,N),g.bufferData(g.ARRAY_BUFFER,w,g.STATIC_DRAW),g.enableVertexAttribArray(p.colorLocation),g.vertexAttribPointer(p.colorLocation,3,g.UNSIGNED_BYTE,!1,0,0),g.uniform2f(p.scaleLocation,c.scaleX,c.scaleY),g.uniform2f(p.offsetLocation,c.offsetX,c.offsetY),g.drawArrays(g.TRIANGLES,0,_),g.flush(),g.deleteBuffer(j),g.deleteBuffer(N),v},cleanup:function(){c&&c.canvas&&(c.canvas.width=0,c.canvas.height=0),h&&h.canvas&&(h.canvas.width=0,h.canvas.height=0),c=null,h=null}}}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var r,i=n(1),a=(r=n(3))&&r.__esModule?r:{default:r};var o=function(){var t=1e5,e=/\S/;var n=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];function r(t,r,a){var o,s=document.createElement("span"),u={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(t._textDivs.push(s),o=r.str,!e.test(o))return u.isWhitespace=!0,void t._textDivProperties.set(s,u);var l=i.Util.transform(t._viewport.transform,r.transform),c=Math.atan2(l[1],l[0]),f=a[r.fontName];f.vertical&&(c+=Math.PI/2);var d,h,p=Math.sqrt(l[2]*l[2]+l[3]*l[3]),v=p;if(f.ascent?v=f.ascent*v:f.descent&&(v=(1+f.descent)*v),0===c?(d=l[4],h=l[5]-v):(d=l[4]+v*Math.sin(c),h=l[5]-v*Math.cos(c)),n[1]=d,n[3]=h,n[5]=p,n[7]=f.fontFamily,u.style=n.join(""),s.setAttribute("style",u.style),s.textContent=r.str,t._fontInspectorEnabled&&(s.dataset.fontName=r.fontName),0!==c&&(u.angle=c*(180/Math.PI)),r.str.length>1&&(f.vertical?u.canvasWidth=r.height*t._viewport.scale:u.canvasWidth=r.width*t._viewport.scale),t._textDivProperties.set(s,u),t._textContentStream&&t._layoutText(s),t._enhanceTextSelection){var g=1,m=0;0!==c&&(g=Math.cos(c),m=Math.sin(c));var y,b,_=(f.vertical?r.height:r.width)*t._viewport.scale,x=p;0!==c?(y=[g,m,-m,g,d,h],b=i.Util.getAxialAlignedBoundingBox([0,0,_,x],y)):b=[d,h,d+_,h+x],t._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:s,size:[_,x],m:y})}}function o(e){if(!e._canceled){var n=e._textDivs,r=e._capability,i=n.length;if(i>t)return e._renderingDone=!0,void r.resolve();if(!e._textContentStream)for(var a=0;a<i;a++)e._layoutText(n[a]);e._renderingDone=!0,r.resolve()}}function s(t){for(var e=t._bounds,n=t._viewport,r=function(t,e,n){var r=n.map(function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}});u(t,r);var i=new Array(n.length);return r.forEach(function(t){var e=t.index;i[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}),n.map(function(e,n){var a=i[n],o=r[n];o.x1=e.top,o.y1=t-a.right,o.x2=e.bottom,o.y2=t-a.left,o.index=n,o.x1New=void 0,o.x2New=void 0}),u(e,r),r.forEach(function(t){var e=t.index;i[e].top=t.x1New,i[e].bottom=t.x2New}),i}(n.width,n.height,e),a=0;a<r.length;a++){var o=e[a].div,s=t._textDivProperties.get(o);if(0!==s.angle){var l=r[a],c=e[a],f=c.m,d=f[0],h=f[1],p=[[0,0],[0,c.size[1]],[c.size[0],0],c.size],v=new Float64Array(64);p.forEach(function(t,e){var n=i.Util.applyTransform(t,f);v[e+0]=d&&(l.left-n[0])/d,v[e+4]=h&&(l.top-n[1])/h,v[e+8]=d&&(l.right-n[0])/d,v[e+12]=h&&(l.bottom-n[1])/h,v[e+16]=h&&(l.left-n[0])/-h,v[e+20]=d&&(l.top-n[1])/d,v[e+24]=h&&(l.right-n[0])/-h,v[e+28]=d&&(l.bottom-n[1])/d,v[e+32]=d&&(l.left-n[0])/-d,v[e+36]=h&&(l.top-n[1])/-h,v[e+40]=d&&(l.right-n[0])/-d,v[e+44]=h&&(l.bottom-n[1])/-h,v[e+48]=h&&(l.left-n[0])/h,v[e+52]=d&&(l.top-n[1])/-d,v[e+56]=h&&(l.right-n[0])/h,v[e+60]=d&&(l.bottom-n[1])/-d});var g=function(t,e,n){for(var r=0,i=0;i<n;i++){var a=t[e++];a>0&&(r=r?Math.min(a,r):a)}return r},m=1+Math.min(Math.abs(d),Math.abs(h));s.paddingLeft=g(v,32,16)/m,s.paddingTop=g(v,48,16)/m,s.paddingRight=g(v,0,16)/m,s.paddingBottom=g(v,16,16)/m,t._textDivProperties.set(o,s)}else s.paddingLeft=e[a].left-r[a].left,s.paddingTop=e[a].top-r[a].top,s.paddingRight=r[a].right-e[a].right,s.paddingBottom=r[a].bottom-e[a].bottom,t._textDivProperties.set(o,s)}}function u(t,e){e.sort(function(t,e){return t.x1-e.x1||t.index-e.index});var n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];e.forEach(function(t){for(var e=0;e<n.length&&n[e].end<=t.y1;)e++;for(var r,i,a=n.length-1;a>=0&&n[a].start>=t.y2;)a--;var o,s,u=-1/0;for(o=e;o<=a;o++){var l;(l=(i=(r=n[o]).boundary).x2>t.x1?i.index>t.index?i.x1New:t.x1:void 0===i.x2New?(i.x2+t.x1)/2:i.x2New)>u&&(u=l)}for(t.x1New=u,o=e;o<=a;o++)void 0===(i=(r=n[o]).boundary).x2New?i.x2>t.x1?i.index>t.index&&(i.x2New=i.x2):i.x2New=u:i.x2New>u&&(i.x2New=Math.max(u,i.x2));var c=[],f=null;for(o=e;o<=a;o++){var d=(i=(r=n[o]).boundary).x2>t.x2?i:t;f===d?c[c.length-1].end=r.end:(c.push({start:r.start,end:r.end,boundary:d}),f=d)}for(n[e].start<t.y1&&(c[0].start=t.y1,c.unshift({start:n[e].start,end:t.y1,boundary:n[e].boundary})),t.y2<n[a].end&&(c[c.length-1].end=t.y2,c.push({start:t.y2,end:n[a].end,boundary:n[a].boundary})),o=e;o<=a;o++)if(void 0===(i=(r=n[o]).boundary).x2New){var h=!1;for(s=e-1;!h&&s>=0&&n[s].start>=i.y1;s--)h=n[s].boundary===i;for(s=a+1;!h&&s<n.length&&n[s].end<=i.y2;s++)h=n[s].boundary===i;for(s=0;!h&&s<c.length;s++)h=c[s].boundary===i;h||(i.x2New=u)}Array.prototype.splice.apply(n,[e,a-e+1].concat(c))}),n.forEach(function(e){var n=e.boundary;void 0===n.x2New&&(n.x2New=Math.max(t,n.x2))})}function l(t){var e=t.textContent,n=t.textContentStream,r=t.container,o=t.viewport,s=t.textDivs,u=t.textContentItemsStr,l=t.enhanceTextSelection;this._textContent=e,this._textContentStream=n,this._container=r,this._viewport=o,this._textDivs=s||[],this._textContentItemsStr=u||[],this._enhanceTextSelection=!!l,this._fontInspectorEnabled=!(!a.default.FontInspector||!a.default.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[]}return l.prototype={get promise(){return this._capability.promise},cancel:function(){this._reader&&(this._reader.cancel(new i.AbortException("text layer task cancelled")),this._reader=null),this._canceled=!0,null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject("canceled")},_processItems:function(t,e){for(var n=0,i=t.length;n<i;n++)this._textContentItemsStr.push(t[n].str),r(this,t[n],e)},_layoutText:function(t){var e=this._container,n=this._textDivProperties.get(t);if(!n.isWhitespace){var r=t.style.fontSize,i=t.style.fontFamily;r===this._layoutTextLastFontSize&&i===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=r+" "+i,this._layoutTextLastFontSize=r,this._layoutTextLastFontFamily=i);var a=this._layoutTextCtx.measureText(t.textContent).width,o="";0!==n.canvasWidth&&a>0&&(n.scale=n.canvasWidth/a,o="scaleX(".concat(n.scale,")")),0!==n.angle&&(o="rotate(".concat(n.angle,"deg) ").concat(o)),o.length>0&&(n.originalTransform=o,t.style.transform=o),this._textDivProperties.set(t,n),e.appendChild(t)}},_render:function(t){var e=this,n=(0,i.createPromiseCapability)(),r=Object.create(null),a=document.createElement("canvas");if(a.mozOpaque=!0,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent){var s=this._textContent.items,u=this._textContent.styles;this._processItems(s,u),n.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function t(){e._reader.read().then(function(i){var a=i.value;i.done?n.resolve():(Object.assign(r,a.styles),e._processItems(a.items,r),t())},n.reject)}()}n.promise.then(function(){r=null,t?e._renderTimer=setTimeout(function(){o(e),e._renderTimer=null},t):o(e)},this._capability.reject)},expandTextDivs:function(t){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(s(this),this._bounds=null);for(var e=0,n=this._textDivs.length;e<n;e++){var r=this._textDivs[e],i=this._textDivProperties.get(r);if(!i.isWhitespace)if(t){var a="",o="";1!==i.scale&&(a="scaleX("+i.scale+")"),0!==i.angle&&(a="rotate("+i.angle+"deg) "+a),0!==i.paddingLeft&&(o+=" padding-left: "+i.paddingLeft/i.scale+"px;",a+=" translateX("+-i.paddingLeft/i.scale+"px)"),0!==i.paddingTop&&(o+=" padding-top: "+i.paddingTop+"px;",a+=" translateY("+-i.paddingTop+"px)"),0!==i.paddingRight&&(o+=" padding-right: "+i.paddingRight/i.scale+"px;"),0!==i.paddingBottom&&(o+=" padding-bottom: "+i.paddingBottom+"px;"),""!==o&&r.setAttribute("style",i.style+o),""!==a&&(r.style.transform=a)}else r.style.padding=0,r.style.transform=i.originalTransform||""}}}},function(t){var e=new l({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e}}();e.renderTextLayer=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r=n(151),i=n(1);function a(t,e,n){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var v=function(){function t(){d(this,t)}return p(t,null,[{key:"create",value:function(t){switch(t.data.annotationType){case i.AnnotationType.LINK:return new m(t);case i.AnnotationType.TEXT:return new y(t);case i.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new _(t);case"Btn":return t.data.radioButton?new w(t):t.data.checkBox?new x(t):new A(t);case"Ch":return new k(t)}return new b(t);case i.AnnotationType.POPUP:return new M(t);case i.AnnotationType.LINE:return new S(t);case i.AnnotationType.SQUARE:return new C(t);case i.AnnotationType.CIRCLE:return new E(t);case i.AnnotationType.POLYLINE:return new O(t);case i.AnnotationType.INK:return new L(t);case i.AnnotationType.POLYGON:return new P(t);case i.AnnotationType.HIGHLIGHT:return new R(t);case i.AnnotationType.UNDERLINE:return new D(t);case i.AnnotationType.SQUIGGLY:return new F(t);case i.AnnotationType.STRIKEOUT:return new j(t);case i.AnnotationType.STAMP:return new N(t);case i.AnnotationType.FILEATTACHMENT:return new z(t);default:return new g(t)}}}]),t}(),g=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,t),this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderInteractiveForms=e.renderInteractiveForms,this.svgFactory=e.svgFactory,n&&(this.container=this._createContainer(r))}return p(t,[{key:"_createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.data,n=this.page,r=this.viewport,a=document.createElement("section"),o=e.rect[2]-e.rect[0],s=e.rect[3]-e.rect[1];a.setAttribute("data-annotation-id",e.id);var u=i.Util.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]);if(a.style.transform="matrix("+r.transform.join(",")+")",a.style.transformOrigin=-u[0]+"px "+-u[1]+"px",!t&&e.borderStyle.width>0){a.style.borderWidth=e.borderStyle.width+"px",e.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(o-=2*e.borderStyle.width,s-=2*e.borderStyle.width);var l=e.borderStyle.horizontalCornerRadius,c=e.borderStyle.verticalCornerRadius;if(l>0||c>0){var f=l+"px / "+c+"px";a.style.borderRadius=f}switch(e.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid"}e.color?a.style.borderColor=i.Util.makeCssRgb(0|e.color[0],0|e.color[1],0|e.color[2]):a.style.borderWidth=0}return a.style.left=u[0]+"px",a.style.top=u[1]+"px",a.style.width=o+"px",a.style.height=s+"px",a}},{key:"_createPopup",value:function(t,e,n){e||((e=document.createElement("div")).style.height=t.style.height,e.style.width=t.style.width,t.appendChild(e));var r=new T({container:t,trigger:e,color:n.color,title:n.title,contents:n.contents,hideWrapper:!0}).render();r.style.left=t.style.width,t.appendChild(r)}},{key:"render",value:function(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}}]),t}(),m=function(t){function e(t){d(this,e);var n=!!(t.data.url||t.data.dest||t.data.action);return s(this,l(e).call(this,t,n))}return c(e,g),p(e,[{key:"render",value:function(){this.container.className="linkAnnotation";var t=this.data,e=this.linkService,n=document.createElement("a");return(0,r.addLinkAttributes)(n,{url:t.url,target:t.newWindow?r.LinkTarget.BLANK:e.externalLinkTarget,rel:e.externalLinkRel}),t.url||(t.action?this._bindNamedAction(n,t.action):this._bindLink(n,t.dest)),this.container.appendChild(n),this.container}},{key:"_bindLink",value:function(t,e){var n=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&n.linkService.navigateTo(e),!1},e&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeNamedAction(e),!1},t.className="internalLink"}}]),e}(),y=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n))}return c(e,g),p(e,[{key:"render",value:function(){this.container.className="textAnnotation";var t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}}]),e}(),b=function(t){function e(){return d(this,e),s(this,l(e).apply(this,arguments))}return c(e,g),p(e,[{key:"render",value:function(){return this.container}}]),e}(),_=function(t){function e(t){d(this,e);var n=t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue;return s(this,l(e).call(this,t,n))}return c(e,b),p(e,[{key:"render",value:function(){this.container.className="textWidgetAnnotation";var t=null;if(this.renderInteractiveForms){if(this.data.multiLine?(t=document.createElement("textarea")).textContent=this.data.fieldValue:((t=document.createElement("input")).type="text",t.setAttribute("value",this.data.fieldValue)),t.disabled=this.data.readOnly,null!==this.data.maxLen&&(t.maxLength=this.data.maxLen),this.data.comb){var e=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;t.classList.add("comb"),t.style.letterSpacing="calc("+e+"px - 1ch)"}}else{(t=document.createElement("div")).textContent=this.data.fieldValue,t.style.verticalAlign="middle",t.style.display="table-cell";var n=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(n=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(t,n)}return null!==this.data.textAlignment&&(t.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(t),this.container}},{key:"_setTextStyle",value:function(t,e){var n=t.style;if(n.fontSize=this.data.fontSize+"px",n.direction=this.data.fontDirection<0?"rtl":"ltr",e){n.fontWeight=e.black?e.bold?"900":"bold":e.bold?"bold":"normal",n.fontStyle=e.italic?"italic":"normal";var r=e.loadedName?'"'+e.loadedName+'", ':"",i=e.fallbackName||"Helvetica, sans-serif";n.fontFamily=r+i}}}]),e}(),x=function(t){function e(t){return d(this,e),s(this,l(e).call(this,t,t.renderInteractiveForms))}return c(e,b),p(e,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation checkBox";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),e}(),w=function(t){function e(t){return d(this,e),s(this,l(e).call(this,t,t.renderInteractiveForms))}return c(e,b),p(e,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="radio",t.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),e}(),A=function(t){function e(){return d(this,e),s(this,l(e).apply(this,arguments))}return c(e,m),p(e,[{key:"render",value:function(){var t=a(l(e.prototype),"render",this).call(this);return t.className="buttonWidgetAnnotation pushButton",t}}]),e}(),k=function(t){function e(t){return d(this,e),s(this,l(e).call(this,t,t.renderInteractiveForms))}return c(e,b),p(e,[{key:"render",value:function(){this.container.className="choiceWidgetAnnotation";var t=document.createElement("select");t.disabled=this.data.readOnly,this.data.combo||(t.size=this.data.options.length,this.data.multiSelect&&(t.multiple=!0));for(var e=0,n=this.data.options.length;e<n;e++){var r=this.data.options[e],i=document.createElement("option");i.textContent=r.displayValue,i.value=r.exportValue,this.data.fieldValue.includes(r.displayValue)&&i.setAttribute("selected",!0),t.appendChild(i)}return this.container.appendChild(t),this.container}}]),e}(),M=function(t){function e(t){d(this,e);var n=!(!t.data.title&&!t.data.contents);return s(this,l(e).call(this,t,n))}return c(e,g),p(e,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'+this.data.parentId+'"]',e=this.layer.querySelector(t);if(!e)return this.container;var n=new T({container:this.container,trigger:e,color:this.data.color,title:this.data.title,contents:this.data.contents}),r=parseFloat(e.style.left),i=parseFloat(e.style.width);return this.container.style.transformOrigin=-(r+i)+"px -"+e.style.top,this.container.style.left=r+i+"px",this.container.appendChild(n.render()),this.container}}]),e}(),T=function(){function t(e){d(this,t),this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.title=e.title,this.contents=e.contents,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}return p(t,[{key:"render",value:function(){var t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);var e=document.createElement("div");e.className="popup";var n=this.color;if(n){var r=.7*(255-n[0])+n[0],a=.7*(255-n[1])+n[1],o=.7*(255-n[2])+n[2];e.style.backgroundColor=i.Util.makeCssRgb(0|r,0|a,0|o)}var s=this._formatContents(this.contents),u=document.createElement("h1");return u.textContent=this.title,this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),e.addEventListener("click",this._hide.bind(this,!0)),e.appendChild(u),e.appendChild(s),t.appendChild(e),t}},{key:"_formatContents",value:function(t){for(var e=document.createElement("p"),n=t.split(/(?:\r\n?|\n)/),r=0,i=n.length;r<i;++r){var a=n[r];e.appendChild(document.createTextNode(a)),r<i-1&&e.appendChild(document.createElement("br"))}return e}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),t}(),S=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){this.container.className="lineAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],r=this.svgFactory.create(e,n),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),i.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),i.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),i.setAttribute("stroke-width",t.borderStyle.width),i.setAttribute("stroke","transparent"),r.appendChild(i),this.container.append(r),this._createPopup(this.container,i,t),this.container}}]),e}(),C=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){this.container.className="squareAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],r=this.svgFactory.create(e,n),i=t.borderStyle.width,a=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",e-i),a.setAttribute("height",n-i),a.setAttribute("stroke-width",i),a.setAttribute("stroke","transparent"),a.setAttribute("fill","none"),r.appendChild(a),this.container.append(r),this._createPopup(this.container,a,t),this.container}}]),e}(),E=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){this.container.className="circleAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],r=this.svgFactory.create(e,n),i=t.borderStyle.width,a=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",n/2),a.setAttribute("rx",e/2-i/2),a.setAttribute("ry",n/2-i/2),a.setAttribute("stroke-width",i),a.setAttribute("stroke","transparent"),a.setAttribute("fill","none"),r.appendChild(a),this.container.append(r),this._createPopup(this.container,a,t),this.container}}]),e}(),O=function(t){function e(t){var n;d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return(n=s(this,l(e).call(this,t,r,!0))).containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return c(e,g),p(e,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],r=this.svgFactory.create(e,n),i=t.vertices,a=[],o=0,s=i.length;o<s;o++){var u=i[o].x-t.rect[0],l=t.rect[3]-i[o].y;a.push(u+","+l)}a=a.join(" ");var c=t.borderStyle.width,f=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",a),f.setAttribute("stroke-width",c),f.setAttribute("stroke","transparent"),f.setAttribute("fill","none"),r.appendChild(f),this.container.append(r),this._createPopup(this.container,f,t),this.container}}]),e}(),P=function(t){function e(t){var n;return d(this,e),(n=s(this,l(e).call(this,t))).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return c(e,O),e}(),L=function(t){function e(t){var n;d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return(n=s(this,l(e).call(this,t,r,!0))).containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n}return c(e,g),p(e,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],r=this.svgFactory.create(e,n),i=t.inkLists,a=0,o=i.length;a<o;a++){for(var s=i[a],u=[],l=0,c=s.length;l<c;l++){var f=s[l].x-t.rect[0],d=t.rect[3]-s[l].y;u.push(f+","+d)}u=u.join(" ");var h=t.borderStyle.width,p=this.svgFactory.createElement(this.svgElementName);p.setAttribute("points",u),p.setAttribute("stroke-width",h),p.setAttribute("stroke","transparent"),p.setAttribute("fill","none"),this._createPopup(this.container,p,t),r.appendChild(p)}return this.container.append(r),this.container}}]),e}(),R=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(),D=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(),F=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(),j=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(),N=function(t){function e(t){d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,l(e).call(this,t,n,!0))}return c(e,g),p(e,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(),z=function(t){function e(t){var n;d(this,e);var a=(n=s(this,l(e).call(this,t,!0))).data.file,o=a.filename,c=a.content;return n.filename=(0,r.getFilenameFromUrl)(o),n.content=c,n.linkService.eventBus&&n.linkService.eventBus.dispatch("fileattachmentannotation",{source:u(u(n)),id:(0,i.stringToPDFString)(o),filename:o,content:c}),n}return c(e,g),p(e,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}},{key:"_download",value:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,i.warn)("Download cannot be started due to unavailable download manager")}}]),e}(),I=function(){function t(){d(this,t)}return p(t,null,[{key:"render",value:function(t){for(var e=0,n=t.annotations.length;e<n;e++){var i=t.annotations[e];if(i){var a=v.create({data:i,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderInteractiveForms:t.renderInteractiveForms||!1,svgFactory:new r.DOMSVGFactory});a.isRenderable&&t.div.appendChild(a.render())}}}},{key:"update",value:function(t){for(var e=0,n=t.annotations.length;e<n;e++){var r=t.annotations[e],i=t.div.querySelector('[data-annotation-id="'+r.id+'"]');i&&(i.style.transform="matrix("+t.viewport.transform.join(",")+")")}t.div.removeAttribute("hidden")}}]),t}();e.AnnotationLayer=I},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r,i=n(1),a=n(151),o=(r=n(4))&&r.__esModule?r:{default:r};var s=function(){throw new Error("Not implemented: SVGGraphics")};e.SVGGraphics=s;var u={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),e=12,n=new Int32Array(256),r=0;r<256;r++){for(var a=r,s=0;s<8;s++)a=1&a?3988292384^a>>1&2147483647:a>>1&2147483647;n[r]=a}function u(t,e,r,i){var a=i,o=e.length;r[a]=o>>24&255,r[a+1]=o>>16&255,r[a+2]=o>>8&255,r[a+3]=255&o,r[a+=4]=255&t.charCodeAt(0),r[a+1]=255&t.charCodeAt(1),r[a+2]=255&t.charCodeAt(2),r[a+3]=255&t.charCodeAt(3),a+=4,r.set(e,a);var s=function(t,e,r){for(var i=-1,a=e;a<r;a++){var o=255&(i^t[a]);i=i>>>8^n[o]}return-1^i}(r,i+4,a+=e.length);r[a]=s>>24&255,r[a+1]=s>>16&255,r[a+2]=s>>8&255,r[a+3]=255&s}function l(t){var e=t.length,n=Math.ceil(e/65535),r=new Uint8Array(2+e+5*n+4),i=0;r[i++]=120,r[i++]=156;for(var a=0;e>65535;)r[i++]=0,r[i++]=255,r[i++]=255,r[i++]=0,r[i++]=0,r.set(t.subarray(a,a+65535),i),i+=65535,a+=65535,e-=65535;r[i++]=1,r[i++]=255&e,r[i++]=e>>8&255,r[i++]=255&~e,r[i++]=(65535&~e)>>8&255,r.set(t.subarray(a),i),i+=t.length-a;var o=function(t,e,n){for(var r=1,i=0,a=e;a<n;++a)i=(i+(r=(r+(255&t[a]))%65521))%65521;return i<<16|r}(t,0,t.length);return r[i++]=o>>24&255,r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o,r}function c(n,r,a,s){var c,f,d,h=n.width,p=n.height,v=n.data;switch(r){case i.ImageKind.GRAYSCALE_1BPP:f=0,c=1,d=h+7>>3;break;case i.ImageKind.RGB_24BPP:f=2,c=8,d=3*h;break;case i.ImageKind.RGBA_32BPP:f=6,c=8,d=4*h;break;default:throw new Error("invalid format")}var m,y,b=new Uint8Array((1+d)*p),_=0,x=0;for(m=0;m<p;++m)b[_++]=0,b.set(v.subarray(x,x+d),_),x+=d,_+=d;if(r===i.ImageKind.GRAYSCALE_1BPP&&s)for(_=0,m=0;m<p;m++)for(_++,y=0;y<d;y++)b[_++]^=255;var w=new Uint8Array([h>>24&255,h>>16&255,h>>8&255,255&h,p>>24&255,p>>16&255,p>>8&255,255&p,c,f,0,0,0]),A=function(t){if(!(0,o.default)())return l(t);try{var e;e=parseInt(wt.versions.node)>=8?t:new g(t);var n=Mt.deflateSync(e,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(r){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+r)}return l(t)}(b),k=t.length+3*e+w.length+A.length,M=new Uint8Array(k),T=0;return M.set(t,T),u("IHDR",w,M,T+=t.length),u("IDATA",A,M,T+=e+w.length),T+=e+A.length,u("IEND",new Uint8Array(0),M,T),(0,i.createObjectURL)(M,"image/png",a)}return function(t,e,n){return c(t,void 0===t.kind?i.ImageKind.GRAYSCALE_1BPP:t.kind,e,n)}}(),c=function(){function t(){this.fontSizeScale=1,this.fontWeight=u.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=u.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}();e.SVGGraphics=s=function(){function t(t){if(Number.isInteger(t))return t.toString();var e=t.toFixed(10),n=e.length-1;if("0"!==e[n])return e;do{n--}while("0"===e[n]);return e.substring(0,"."===e[n]?n:n+1)}function e(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale("+t(e[0])+" "+t(e[3])+")";if(e[0]===e[3]&&e[1]===-e[2])return"rotate("+t(180*Math.acos(e[0])/Math.PI)+")"}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate("+t(e[4])+" "+t(e[5])+")";return"matrix("+t(e[0])+" "+t(e[1])+" "+t(e[2])+" "+t(e[3])+" "+t(e[4])+" "+t(e[5])+")"}function n(t,e,n){this.svgFactory=new a.DOMSVGFactory,this.current=new c,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n}var r="http://www.w3.org/1999/xlink",o=["butt","round","square"],s=["miter","round","bevel"],f=0,d=0;return n.prototype={save:function(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()},restore:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null},group:function(t){this.save(),this.executeOpTree(t),this.restore()},loadDependencies:function(t){for(var e=this,n=t.fnArray,r=n.length,a=t.argsArray,o=0;o<r;o++)if(i.OPS.dependency===n[o])for(var s=a[o],u=0,l=s.length;u<l;u++){var c,f=s[u];c="g_"===f.substring(0,2)?new Promise(function(t){e.commonObjs.get(f,t)}):new Promise(function(t){e.objs.get(f,t)}),this.current.dependencies.push(c)}return Promise.all(this.current.dependencies)},transform:function(t,e,n,r,a,o){var s=[t,e,n,r,a,o];this.transformMatrix=i.Util.transform(this.transformMatrix,s),this.tgrp=null},getSVG:function(t,e){var n=this;this.viewport=e;var r=this._initialize(e);return this.loadDependencies(t).then(function(){n.transformMatrix=i.IDENTITY_MATRIX;var e=n.convertOpList(t);return n.executeOpTree(e),r})},convertOpList:function(t){var e=t.argsArray,n=t.fnArray,r=n.length,a=[],o=[];for(var s in i.OPS)a[i.OPS[s]]=s;for(var u=0;u<r;u++){var l=n[u];o.push({fnId:l,fn:a[l],args:e[u]})}return function(t){for(var e=[],n=[],r=t.length,i=0;i<r;i++)"save"!==t[i].fn?"restore"===t[i].fn?e=n.pop():e.push(t[i]):(e.push({fnId:92,fn:"group",items:[]}),n.push(e),e=e[e.length-1].items);return e}(o)},executeOpTree:function(t){for(var e=t.length,n=0;n<e;n++){var r=t[n].fn,a=t[n].fnId,o=t[n].args;switch(0|a){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(o);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(o[0],o[1]);break;case i.OPS.setFont:this.setFont(o);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(o[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(o[0],o[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(o[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(o[0]);break;case i.OPS.setHScale:this.setHScale(o[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(o[0],o[1],o[2],o[3],o[4],o[5]);break;case i.OPS.setTextRise:this.setTextRise(o[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(o[0]);break;case i.OPS.setLineWidth:this.setLineWidth(o[0]);break;case i.OPS.setLineJoin:this.setLineJoin(o[0]);break;case i.OPS.setLineCap:this.setLineCap(o[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(o[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(o[0],o[1],o[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(o[0],o[1],o[2]);break;case i.OPS.setDash:this.setDash(o[0],o[1]);break;case i.OPS.setGState:this.setGState(o[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintJpegXObject:this.paintJpegXObject(o[0],o[1],o[2]);break;case i.OPS.paintImageXObject:this.paintImageXObject(o[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(o[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(o[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(o[0],o[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(o[0],o[1],o[2],o[3],o[4],o[5]);break;case i.OPS.constructPath:this.constructPath(o[0],o[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(t[n].items);break;default:(0,i.warn)("Unimplemented operator "+r)}}},setWordSpacing:function(t){this.current.wordSpacing=t},setCharSpacing:function(t){this.current.charSpacing=t},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(e,n,r,i,a,o){var s=this.current;this.current.textMatrix=this.current.lineMatrix=[e,n,r,i,a,o],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,s.xcoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",t(s.fontSize)+"px"),s.tspan.setAttributeNS(null,"y",t(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.appendChild(s.tspan)},beginText:function(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=i.IDENTITY_MATRIX,this.current.lineMatrix=i.IDENTITY_MATRIX,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.txtElement=this.svgFactory.createElement("svg:text"),this.current.txtgrp=this.svgFactory.createElement("svg:g"),this.current.xcoords=[]},moveText:function(e,n){var r=this.current;this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n,r.xcoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",t(r.fontSize)+"px"),r.tspan.setAttributeNS(null,"y",t(-r.y))},showText:function(n){var r=this.current,a=r.font,o=r.fontSize;if(0!==o){var s,l=r.charSpacing,c=r.wordSpacing,f=r.fontDirection,d=r.textHScale*f,h=n.length,p=a.vertical,v=o*r.fontMatrix[0],g=0;for(s=0;s<h;++s){var m=n[s];if(null!==m)if((0,i.isNum)(m))g+=-m*o*.001;else{var y=m.width,b=m.fontChar,_=y*v+((m.isSpace?c:0)+l)*f;m.isInFont||a.missingFile?(r.xcoords.push(r.x+g*d),r.tspan.textContent+=b,g+=_):g+=_}else g+=f*c}p?r.y-=g*d:r.x+=g*d,r.tspan.setAttributeNS(null,"x",r.xcoords.map(t).join(" ")),r.tspan.setAttributeNS(null,"y",t(-r.y)),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",t(r.fontSize)+"px"),r.fontStyle!==u.fontStyle&&r.tspan.setAttributeNS(null,"font-style",r.fontStyle),r.fontWeight!==u.fontWeight&&r.tspan.setAttributeNS(null,"font-weight",r.fontWeight);var x=r.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;x===i.TextRenderingMode.FILL||x===i.TextRenderingMode.FILL_STROKE?(r.fillColor!==u.fillColor&&r.tspan.setAttributeNS(null,"fill",r.fillColor),r.fillAlpha<1&&r.tspan.setAttributeNS(null,"fill-opacity",r.fillAlpha)):r.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?r.tspan.setAttributeNS(null,"fill","transparent"):r.tspan.setAttributeNS(null,"fill","none"),x!==i.TextRenderingMode.STROKE&&x!==i.TextRenderingMode.FILL_STROKE||this._setStrokeAttributes(r.tspan);var w=r.textMatrix;0!==r.textRise&&((w=w.slice())[5]+=r.textRise),r.txtElement.setAttributeNS(null,"transform",e(w)+" scale(1, -1)"),r.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.txtElement.appendChild(r.tspan),r.txtgrp.appendChild(r.txtElement),this._ensureTransformGroup().appendChild(r.txtElement)}},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},addFontStyle:function(t){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var e=(0,i.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+t.loadedName+'"; src: url('+e+"); }\n"},setFont:function(e){var n=this.current,r=this.commonObjs.get(e[0]),a=e[1];this.current.font=r,this.embedFonts&&r.data&&!this.embeddedFonts[r.loadedName]&&(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),n.fontMatrix=r.fontMatrix?r.fontMatrix:i.FONT_IDENTITY_MATRIX;var o=r.black?r.bold?"bolder":"bold":r.bold?"bold":"normal",s=r.italic?"italic":"normal";a<0?(a=-a,n.fontDirection=-1):n.fontDirection=1,n.fontSize=a,n.fontFamily=r.loadedName,n.fontWeight=o,n.fontStyle=s,n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"y",t(-n.y)),n.xcoords=[]},endText:function(){var t=this.current;t.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement&&t.txtElement.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())},setLineWidth:function(t){t>0&&(this.current.lineWidth=t)},setLineCap:function(t){this.current.lineCap=o[t]},setLineJoin:function(t){this.current.lineJoin=s[t]},setMiterLimit:function(t){this.current.miterLimit=t},setStrokeAlpha:function(t){this.current.strokeAlpha=t},setStrokeRGBColor:function(t,e,n){var r=i.Util.makeCssRgb(t,e,n);this.current.strokeColor=r},setFillAlpha:function(t){this.current.fillAlpha=t},setFillRGBColor:function(t,e,n){var r=i.Util.makeCssRgb(t,e,n);this.current.fillColor=r,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]},setDash:function(t,e){this.current.dashArray=t,this.current.dashPhase=e},constructPath:function(e,n){var r=this.current,a=r.x,o=r.y;r.path=this.svgFactory.createElement("svg:path");for(var s=[],u=e.length,l=0,c=0;l<u;l++)switch(0|e[l]){case i.OPS.rectangle:a=n[c++],o=n[c++];var f=a+n[c++],d=o+n[c++];s.push("M",t(a),t(o),"L",t(f),t(o),"L",t(f),t(d),"L",t(a),t(d),"Z");break;case i.OPS.moveTo:a=n[c++],o=n[c++],s.push("M",t(a),t(o));break;case i.OPS.lineTo:a=n[c++],o=n[c++],s.push("L",t(a),t(o));break;case i.OPS.curveTo:a=n[c+4],o=n[c+5],s.push("C",t(n[c]),t(n[c+1]),t(n[c+2]),t(n[c+3]),t(a),t(o)),c+=6;break;case i.OPS.curveTo2:a=n[c+2],o=n[c+3],s.push("C",t(a),t(o),t(n[c]),t(n[c+1]),t(n[c+2]),t(n[c+3])),c+=4;break;case i.OPS.curveTo3:a=n[c+2],o=n[c+3],s.push("C",t(n[c]),t(n[c+1]),t(a),t(o),t(a),t(o)),c+=4;break;case i.OPS.closePath:s.push("Z")}r.path.setAttributeNS(null,"d",s.join(" ")),r.path.setAttributeNS(null,"fill","none"),this._ensureTransformGroup().appendChild(r.path),r.element=r.path,r.setCurrentPoint(a,o)},endPath:function(){if(this.pendingClip){var t=this.current,n="clippath"+f;f++;var r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",n),r.setAttributeNS(null,"transform",e(this.transformMatrix));var i=t.element.cloneNode(!0);"evenodd"===this.pendingClip?i.setAttributeNS(null,"clip-rule","evenodd"):i.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.appendChild(i),this.defs.appendChild(r),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach(function(t){t.clipGroup=null}),r.setAttributeNS(null,"clip-path",t.activeClipUrl)),t.activeClipUrl="url(#"+n+")",this.tgrp=null}},clip:function(t){this.pendingClip=t},closePath:function(){var t=this.current;if(t.path){var e=t.path.getAttributeNS(null,"d");e+="Z",t.path.setAttributeNS(null,"d",e)}},setLeading:function(t){this.current.leading=-t},setTextRise:function(t){this.current.textRise=t},setTextRenderingMode:function(t){this.current.textRenderingMode=t},setHScale:function(t){this.current.textHScale=t/100},setGState:function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e],a=r[0],o=r[1];switch(a){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"Font":this.setFont(o);break;case"CA":this.setStrokeAlpha(o);break;case"ca":this.setFillAlpha(o);break;default:(0,i.warn)("Unimplemented graphic state "+a)}}},fill:function(){var t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())},stroke:function(){var t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())},_setStrokeAttributes:function(e){var n=this.current;e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",t(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",t(n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",n.dashArray.map(t).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",t(n.dashPhase)+"px")},eoFill:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()},fillStroke:function(){this.stroke(),this.fill()},eoFillStroke:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function(){this.closePath(),this.stroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.closePath(),this.eoFillStroke()},paintSolidColorImageMask:function(){var t=this.current,e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",t.fillColor),this._ensureTransformGroup().appendChild(e)},paintJpegXObject:function(e,n,i){var a=this.objs.get(e),o=this.svgFactory.createElement("svg:image");o.setAttributeNS(r,"xlink:href",a.src),o.setAttributeNS(null,"width",t(n)),o.setAttributeNS(null,"height",t(i)),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",t(-i)),o.setAttributeNS(null,"transform","scale("+t(1/n)+" "+t(-1/i)+")"),this._ensureTransformGroup().appendChild(o)},paintImageXObject:function(t){var e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(e,n){var i=e.width,a=e.height,o=l(e,this.forceDataSchema,!!n),s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",t(i)),s.setAttributeNS(null,"height",t(a)),this.current.element=s,this.clip("nonzero");var u=this.svgFactory.createElement("svg:image");u.setAttributeNS(r,"xlink:href",o),u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y",t(-a)),u.setAttributeNS(null,"width",t(i)+"px"),u.setAttributeNS(null,"height",t(a)+"px"),u.setAttributeNS(null,"transform","scale("+t(1/i)+" "+t(-1/a)+")"),n?n.appendChild(u):this._ensureTransformGroup().appendChild(u)},paintImageMaskXObject:function(e){var n=this.current,r=e.width,i=e.height,a=n.fillColor;n.maskId="mask"+d++;var o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",n.maskId);var s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",t(r)),s.setAttributeNS(null,"height",t(i)),s.setAttributeNS(null,"fill",a),s.setAttributeNS(null,"mask","url(#"+n.maskId+")"),this.defs.appendChild(o),this._ensureTransformGroup().appendChild(s),this.paintInlineImageXObject(e,o)},paintFormXObjectBegin:function(e,n){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),n){var r=n[2]-n[0],i=n[3]-n[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",n[0]),a.setAttributeNS(null,"y",n[1]),a.setAttributeNS(null,"width",t(r)),a.setAttributeNS(null,"height",t(i)),this.current.element=a,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function(){},_initialize:function(t){var n=this.svgFactory.create(t.width,t.height),r=this.svgFactory.createElement("svg:defs");n.appendChild(r),this.defs=r;var i=this.svgFactory.createElement("svg:g");return i.setAttributeNS(null,"transform",e(t.transform)),n.appendChild(i),this.svg=i,n},_ensureClipGroup:function(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup},_ensureTransformGroup:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}},n}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r,i=(r=n(147))&&r.__esModule?r:{default:r},a=n(1),o=n(166);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(Lt){return void n(Lt)}s.done?e(u):Promise.resolve(u).then(r,i)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){d(a,r,i,o,s,"next",t)}function s(t){d(a,r,i,o,s,"throw",t)}o(void 0)})}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}var m=Mt,y=Mt,b=Mt,_=Gt,x=/^file:\/\/\/[a-zA-Z]:\//;var w=function(){function t(e){p(this,t),this.source=e,this.url=function(t){var e=_.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?_.parse("file:///".concat(t)):(e.host||(e.protocol="file:"),e)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequest=null,this._rangeRequestReaders=[]}return g(t,[{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequest),this._fullRequest=this.isFsUrl?new C(this):new T(this),this._fullRequest}},{key:"getRangeReader",value:function(t,e){var n=this.isFsUrl?new E(this,t,e):new S(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){this._fullRequest&&this._fullRequest.cancel(t),this._rangeRequestReaders.slice(0).forEach(function(e){e.cancel(t)})}}]),t}();e.PDFNodeStream=w;var A=function(){function t(e){p(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;var n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)(),this._headersCapability=(0,a.createPromiseCapability)()}return g(t,[{key:"read",value:function(){var t=h(i.default.mark(function t(){var e,n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(e=this._readableStream.read())){t.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),t.abrupt("return",this.read());case 10:return this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),n=new Uint8Array(e).buffer,t.abrupt("return",{value:n,done:!1});case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}(),k=function(){function t(e){p(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)();var n=e.source;this._isStreamingSupported=!n.disableStream}return g(t,[{key:"read",value:function(){var t=h(i.default.mark(function t(){var e,n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(e=this._readableStream.read())){t.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),t.abrupt("return",this.read());case 10:return this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded}),n=new Uint8Array(e).buffer,t.abrupt("return",{value:n,done:!1});case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}();function M(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}var T=function(t){function e(t){var n;p(this,e);var r=function(e){if(404===e.statusCode){var r=new a.MissingPDFException('Missing PDF "'.concat(n._url,'".'));return n._storedError=r,void n._headersCapability.reject(r)}n._headersCapability.resolve(),n._setReadableStream(e);var i=function(t){return n._readableStream.headers[t.toLowerCase()]},s=(0,o.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),u=s.allowRangeRequests,l=s.suggestedLength;n._isRangeSupported=u,n._contentLength=l||n._contentLength,n._filename=(0,o.extractFilenameFromHeader)(i)};return(n=u(this,l(e).call(this,t)))._request=null,"http:"===n._url.protocol?n._request=y.request(M(n._url,t.httpHeaders),r):n._request=b.request(M(n._url,t.httpHeaders),r),n._request.on("error",function(t){n._storedError=t,n._headersCapability.reject(t)}),n._request.end(),n}return c(e,A),e}(),S=function(t){function e(t,n,r){var i;for(var o in p(this,e),(i=u(this,l(e).call(this,t)))._httpHeaders={},t.httpHeaders){var s=t.httpHeaders[o];"undefined"!==typeof s&&(i._httpHeaders[o]=s)}i._httpHeaders.Range="bytes=".concat(n,"-").concat(r-1);var c=function(t){if(404!==t.statusCode)i._setReadableStream(t);else{var e=new a.MissingPDFException('Missing PDF "'.concat(i._url,'".'));i._storedError=e}};return i._request=null,"http:"===i._url.protocol?i._request=y.request(M(i._url,i._httpHeaders),c):i._request=b.request(M(i._url,i._httpHeaders),c),i._request.on("error",function(t){i._storedError=t}),i._request.end(),i}return c(e,k),e}(),C=function(t){function e(t){var n;p(this,e),n=u(this,l(e).call(this,t));var r=decodeURIComponent(n._url.path);return x.test(n._url.href)&&(r=r.replace(/^\//,"")),m.lstat(r,function(t,e){if(t)return"ENOENT"===t.code&&(t=new a.MissingPDFException('Missing PDF "'.concat(r,'".'))),n._storedError=t,void n._headersCapability.reject(t);n._contentLength=e.size,n._setReadableStream(m.createReadStream(r)),n._headersCapability.resolve()}),n}return c(e,A),e}(),E=function(t){function e(t,n,r){var i;p(this,e),i=u(this,l(e).call(this,t));var a=decodeURIComponent(i._url.path);return x.test(i._url.href)&&(a=a.replace(/^\//,"")),i._setReadableStream(m.createReadStream(a,{start:n,end:r-1})),i}return c(e,k),e}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){if(404===t||0===t&&/^file:/.test(e))return new r.MissingPDFException('Missing PDF "'+e+'".');return new r.UnexpectedResponseException("Unexpected server response ("+t+') while retrieving PDF "'+e+'".',t)},e.extractFilenameFromHeader=function(t){var e=t("Content-Disposition");if(e){var n=(0,i.getFilenameFromContentDispositionHeader)(e);if(/\.pdf$/i.test(n))return n}return null},e.validateRangeRequestCapabilities=function(t){var e=t.getResponseHeader,n=t.isHttp,i=t.rangeChunkSize,a=t.disableRange;(0,r.assert)(i>0,"Range chunk size must be larger than zero");var o={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(e("Content-Length"),10);if(!Number.isInteger(s))return o;if(o.suggestedLength=s,s<=2*i)return o;if(a||!n)return o;if("bytes"!==e("Accept-Ranges"))return o;if("identity"!==(e("Content-Encoding")||"identity"))return o;return o.allowRangeRequests=!0,o},e.validateResponseStatus=function(t){return 200===t||206===t};var r=n(1),i=n(167)},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){var e=!0,n=s("filename\\*","i").exec(t);if(n){var i=c(n=n[1]);return l(i=d(i=f(i=unescape(i))))}if(n=function(t){for(var e,n=[],i=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(e=i.exec(t));){var a=e,o=r(a,4),u=o[1],l=o[2],d=o[3];if((u=parseInt(u,10))in n){if(0===u)break}else n[u]=[l,d]}for(var h=[],u=0;u<n.length&&u in n;++u){var p=r(n[u],2),l=p[0],d=p[1];d=c(d),l&&(d=unescape(d),0===u&&(d=f(d))),h.push(d)}return h.join("")}(t)){var a=d(n);return l(a)}if(n=s("filename","i").exec(t)){var o=c(n=n[1]);return l(o=d(o))}function s(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function u(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var r=new TextDecoder(t,{fatal:!0}),i=Array.from(n,function(t){return 255&t.charCodeAt(0)});n=r.decode(new Uint8Array(i)),e=!1}catch(a){if(/^utf-?8$/i.test(t))try{n=decodeURIComponent(escape(n)),e=!1}catch(o){}}}return n}function l(t){return e&&/[\x80-\xff]/.test(t)&&(t=u("utf-8",t),e&&(t=u("iso-8859-1",t))),t}function c(t){if(t.startsWith('"')){for(var e=t.slice(1).split('\\"'),n=0;n<e.length;++n){var r=e[n].indexOf('"');-1!==r&&(e[n]=e[n].slice(0,r),e.length=n+1),e[n]=e[n].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function f(t){var e=t.indexOf("'");if(-1===e)return t;var n=t.slice(0,e),r=t.slice(e+1),i=r.replace(/^[^']*'/,"");return u(n,i)}function d(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,n,r){if("q"===n||"Q"===n)return r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}),u(e,r);try{r=atob(r)}catch(i){}return u(e,r)})}return""}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r,i=(r=n(147))&&r.__esModule?r:{default:r},a=n(1),o=n(166);function s(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(Lt){return void n(Lt)}s.done?e(u):Promise.resolve(u).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){s(a,r,i,o,u,"next",t)}function u(t){s(a,r,i,o,u,"throw",t)}o(void 0)})}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function d(t,e,n){return{method:"GET",headers:t,signal:n&&n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}var h=function(){function t(e){l(this,t),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return f(t,[{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader),this._fullRequestReader=new p(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var n=new v(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach(function(e){e.cancel(t)})}}]),t}();e.PDFFetchStream=h;var p=function(){function t(e){var n=this;l(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var r=e.source;for(var i in this._withCredentials=r.withCredentials,this._contentLength=r.length,this._headersCapability=(0,a.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._headers=new Headers,this._stream.httpHeaders){var s=this._stream.httpHeaders[i];"undefined"!==typeof s&&this._headers.append(i,s)}var u=r.url;fetch(u,d(this._headers,this._withCredentials,this._abortController)).then(function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,u);n._reader=t.body.getReader(),n._headersCapability.resolve();var e=function(e){return t.headers.get(e)},r=(0,o.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),i=r.allowRangeRequests,s=r.suggestedLength;n._isRangeSupported=i,n._contentLength=s||n._contentLength,n._filename=(0,o.extractFilenameFromHeader)(e),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new a.AbortException("streaming is disabled"))}).catch(this._headersCapability.reject),this.onProgress=null}return f(t,[{key:"read",value:function(){var t=u(i.default.mark(function t(){var e,n,r,a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._headersCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,n=e.value,!(r=e.done)){t.next=9;break}return t.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),a=new Uint8Array(n).buffer,t.abrupt("return",{value:a,done:!1});case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}(),v=function(){function t(e,n,r){var i=this;l(this,t),this._stream=e,this._reader=null,this._loaded=0;var s=e.source;for(var u in this._withCredentials=s.withCredentials,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._headers=new Headers,this._stream.httpHeaders){var c=this._stream.httpHeaders[u];"undefined"!==typeof c&&this._headers.append(u,c)}var f=n+"-"+(r-1);this._headers.append("Range","bytes="+f);var h=s.url;fetch(h,d(this._headers,this._withCredentials,this._abortController)).then(function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,h);i._readCapability.resolve(),i._reader=t.body.getReader()}),this.onProgress=null}return f(t,[{key:"read",value:function(){var t=u(i.default.mark(function t(){var e,n,r,a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,n=e.value,!(r=e.done)){t.next=9;break}return t.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),a=new Uint8Array(n).buffer,t.abrupt("return",{value:a,done:!1});case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=h,e.NetworkManager=c;var r=s(n(147)),i=n(1),a=n(166),o=s(n(3));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(Lt){return void n(Lt)}s.done?e(u):Promise.resolve(u).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,s,"next",t)}function s(t){u(a,r,i,o,s,"throw",t)}o(void 0)})}}function c(t,e){this.url=t,e=e||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null),this.loadedRequests=Object.create(null)}function f(t){var e=t.response;return"string"!==typeof e?e:(0,i.stringToBytes)(e).buffer}var d=function(){try{var t=new XMLHttpRequest;return t.open("GET",o.default.location.href),t.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===t.responseType}catch(e){return!1}}();function h(t){this._source=t,this._manager=new c(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}function p(t,e){this._manager=t;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onProgressiveData:e.disableStream?null:this._onProgressiveData.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}function v(t,e,n){this._manager=t;var r={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(e,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}c.prototype={requestRange:function(t,e,n){var r={begin:t,end:e};for(var i in n)r[i]=n[i];return this.request(r)},requestFull:function(t){return this.request(t)},request:function(t){var e=this.getXhr(),n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};for(var i in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var a=this.httpHeaders[i];"undefined"!==typeof a&&e.setRequestHeader(i,a)}if(this.isHttp&&"begin"in t&&"end"in t){var o=t.begin+"-"+(t.end-1);e.setRequestHeader("Range","bytes="+o),r.expectedStatus=206}else r.expectedStatus=200;return d&&!!t.onProgressiveData?(e.responseType="moz-chunked-arraybuffer",r.onProgressiveData=t.onProgressiveData,r.mozChunked=!0):e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n},onProgress:function(t,e){var n=this.pendingRequests[t];if(n){if(n.mozChunked){var r=f(n.xhr);n.onProgressiveData(r)}var i=n.onProgress;i&&i(e)}},onStateChange:function(t,e){var n=this.pendingRequests[t];if(n){var r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===r.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===r.status&&this.isHttp)n.onError&&n.onError(r.status);else{var i=r.status||200;if(200===i&&206===n.expectedStatus||i===n.expectedStatus){this.loadedRequests[t]=!0;var a=f(r);if(206===i){var o=r.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(o),u=parseInt(s[1],10);n.onDone({begin:u,chunk:a})}else n.onProgressiveData?n.onDone(null):a?n.onDone({begin:0,chunk:a}):n.onError&&n.onError(r.status)}else n.onError&&n.onError(r.status)}}},hasPendingRequests:function(){for(var t in this.pendingRequests)return!0;return!1},getRequestXhr:function(t){return this.pendingRequests[t].xhr},isStreamingRequest:function(t){return!!this.pendingRequests[t].onProgressiveData},isPendingRequest:function(t){return t in this.pendingRequests},isLoadedRequest:function(t){return t in this.loadedRequests},abortAllRequests:function(){for(var t in this.pendingRequests)this.abortRequest(0|t)},abortRequest:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},h.prototype={_onRangeRequestReaderClosed:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)},getFullReader:function(){return(0,i.assert)(!this._fullRequestReader),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader},getRangeReader:function(t,e){var n=new v(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n},cancelAllRequests:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach(function(e){e.cancel(t)})}},p.prototype={_onHeadersReceived:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=function(t){return e.getResponseHeader(t)},r=(0,a.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),i=r.allowRangeRequests,o=r.suggestedLength;i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(n);var s=this._manager;s.isStreamingRequest(t)?this._isStreamingSupported=!0:this._isRangeSupported&&s.abortRequest(t),this._headersReceivedCapability.resolve()},_onProgressiveData:function(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t)},_onDone:function(t){t&&this._onProgressiveData(t.chunk),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[])},_onError:function(t){var e=this._url,n=(0,a.createResponseStatusError)(t,e);this._storedError=n,this._headersReceivedCapability.reject(n),this._requests.forEach(function(t){t.reject(n)}),this._requests=[],this._cachedChunks=[]},_onProgress:function(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})},get filename(){return this._filename},get isRangeSupported(){return this._isRangeSupported},get isStreamingSupported(){return this._isStreamingSupported},get contentLength(){return this._contentLength},get headersReady(){return this._headersReceivedCapability.promise},read:function(){var t=l(r.default.mark(function t(){var e,n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){t.next=5;break}return e=this._cachedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 5:if(!this._done){t.next=7;break}return t.abrupt("return",{value:void 0,done:!0});case 7:return n=(0,i.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(t){this._done=!0,this._headersReceivedCapability.reject(t),this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},v.prototype={_close:function(){this.onClosed&&this.onClosed(this)},_onDone:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e;this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._close()},_onProgress:function(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})},get isStreamingSupported(){return!1},read:function(){var t=l(r.default.mark(function t(){var e,n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,i.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(t){this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}])},t.exports=n()}(fe={exports:{}},fe.exports),fe.exports);(de=pe)&&de.__esModule&&Object.prototype.hasOwnProperty.call(de,"default")&&de.default;var ve=pe;e.a=ve}).call(this,n(14))},function(t,e,n){"use strict";(function(t){var r=n(44),i=n(45),a=n(46);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=d(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):d(t,e);if("Buffer"===e.type&&a(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=s(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(l(t,a+d)!==l(e,d)){f=!1;break}if(f)return a}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function b(t,e,n,r){return U(B(e,t.length-n),t,n,r)}function _(t,e,n,r){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function w(t,e,n,r){return U(q(e),t,n,r)}function A(t,e,n,r){return U(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=t.slice(e,n),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],o=c[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function S(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function E(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=I(t[a]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function P(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function F(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,a){return a||F(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,a){return a||F(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:B(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function I(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function U(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(14))},function(t){t.exports={a:"4.4.0"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var a=e.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},o=e.isJsons=function(t){return Array.isArray(t)&&t.every(function(t){return"object"===("undefined"===typeof t?"undefined":r(t))&&!(t instanceof Array)})},s=e.isArrays=function(t){return Array.isArray(t)&&t.every(function(t){return Array.isArray(t)})},u=e.jsonsHeaders=function(t){return Array.from(t.map(function(t){return Object.keys(t)}).reduce(function(t,e){return new Set([].concat(i(t),i(e)))},[]))},l=e.jsons2arrays=function(t,e){var n=e=e||u(t),r=e;o(e)&&(n=e.map(function(t){return t.label}),r=e.map(function(t){return t.key}));var a=t.map(function(t){return r.map(function(e){return c(e,t)})});return[n].concat(i(a))},c=e.getHeaderValue=function(t,e){var n=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(t,e,n,r){if(void 0!==t[e])return t[e];r.splice(1)},e);return void 0===n?"":n},f=e.elementOrEmpty=function(t){return t||0===t?t:""},d=e.joiner=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return t.filter(function(t){return t}).map(function(t){return t.map(function(t){return f(t)}).map(function(t){return""+n+t+n}).join(e)}).join("\n")},h=e.arrays2csv=function(t,e,n,r){return d(e?[e].concat(i(t)):t,n,r)},p=e.jsons2csv=function(t,e,n,r){return d(l(t,e),n,r)},v=e.string2csv=function(t,e,n,r){return e?e.join(n)+"\n"+t:t},g=e.toCSV=function(t,e,n,r){if(o(t))return p(t,e,n,r);if(s(t))return h(t,e,n,r);if("string"===typeof t)return v(t,e,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};e.buildURI=function(t,e,n,r,i){var o=g(t,n,r,i),s=a()?"application/csv":"text/csv",u=new Blob([e?"\ufeff":"",o],{type:s}),l="data:"+s+";charset=utf-8,"+(e?"\ufeff":"")+o,c=window.URL||window.webkitURL;return"undefined"===typeof c.createObjectURL?l:c.createObjectURL(u)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropsNotForwarded=e.defaultProps=e.propTypes=void 0;var r,i=n(2),a=((r=i)&&r.__esModule,n(1));e.propTypes={data:(0,a.oneOfType)([a.string,a.array]).isRequired,headers:a.array,target:a.string,separator:a.string,filename:a.string,uFEFF:a.bool,onClick:a.func,asyncOnClick:a.bool},e.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1},e.PropsNotForwarded=["data","headers"]},function(t,e,n){var r,i,a;t.exports=(r=n(1),i=n(2),a=n(87),function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){"use strict";var r=n(6),i=(n.n(r),n(5)),a=n(1),o=n.n(a),s=n(2),u=n.n(s),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c={className:o.a.string,style:o.a.object,spec:o.a.object.isRequired,logLevel:o.a.number,width:o.a.number,height:o.a.number,tooltip:o.a.func,background:o.a.string,padding:o.a.object,renderer:o.a.string,enableHover:o.a.bool,data:o.a.object,onNewView:o.a.func,onParseError:o.a.func},f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),l(e,[{key:"componentDidMount",value:function(){this.createView(this.props.spec)}},{key:"componentDidUpdate",value:function(t){var n=this;if(this.props.spec!==t.spec)this.clearView(),this.createView(this.props.spec);else if(this.view){var r=this.props,i=this.props.spec,a=!1;["width","height","renderer","logLevel","background"].filter(function(e){return r[e]!==t[e]}).forEach(function(t){n.view[t](r[t]),a=!0}),e.isSamePadding(r.padding,t.padding)||(this.view.padding(r.padding||i.padding),a=!0),i.data&&r.data&&i.data.forEach(function(i){var o=t.data[i.name],s=r.data[i.name];e.isSameData(o,s)||(n.updateData(i.name,s),a=!0)}),r.enableHover!==t.enableHover&&(a=!0),a&&(r.enableHover&&this.view.hover(),this.view.run())}}},{key:"componentWillUnmount",value:function(){this.clearView()}},{key:"createView",value:function(t){var a=this;if(t){var o=this.props;try{var s=r.parse(t),u=new r.View(s).initialize(this.element);t.signals&&t.signals.forEach(function(t){u.addSignalListener(t.name,function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=a.props[e.listenerName(t.name)];o&&o.apply(a,r)})}),this.view=u,["logLevel","renderer","tooltip","background","width","height","padding"].filter(function(t){return n.i(i.a)(o[t])}).forEach(function(t){u[t](o[t])}),t.data&&o.data&&t.data.filter(function(t){return o.data[t.name]}).forEach(function(t){a.updateData(t.name,o.data[t.name])}),o.enableHover&&u.hover(),u.run(),o.onNewView(u)}catch(t){this.clearView(),o.onParseError(t)}}else this.clearView();return this}},{key:"updateData",value:function(t,e){e&&(n.i(i.b)(e)?e(this.view.data(t)):this.view.change(t,r.changeset().remove(function(){return!0}).insert(e)))}},{key:"clearView",value:function(){return this.view&&(this.view.finalize(),this.view=null),this}},{key:"render",value:function(){var t=this;return u.a.createElement("div",{ref:function(e){t.element=e},className:this.props.className,style:this.props.style})}}],[{key:"isSamePadding",value:function(t,e){return n.i(i.a)(t)&&n.i(i.a)(e)?t.top===e.top&&t.left===e.left&&t.right===e.right&&t.bottom===e.bottom:t===e}},{key:"isSameData",value:function(t,e){return t===e&&!n.i(i.b)(t)}},{key:"isSameSpec",value:function(t,e){return t===e||JSON.stringify(t)===JSON.stringify(e)}},{key:"listenerName",value:function(t){return"onSignal"+n.i(i.c)(t)}}]),e}(u.a.Component);f.propTypes=c,f.defaultProps={className:"",renderer:"svg",enableHover:!0,onNewView:function(){},onParseError:function(){}},e.a=f},function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"createClassFromSpec",function(){return a});var r=n(0),i=n(4);e.default=r.a;var a=i.a},function(t,e,n){"use strict";e.a=function(){function t(t){return i.a.createElement(s.a,u({spec:e},t))}var e=1===arguments.length?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1],n=Object.assign({},s.a.propTypes);return delete n.spec,e.signals&&e.signals.forEach(function(t){n[s.a.listenerName(t.name)]=o.a.func}),t.getSpec=function(){return e},t.propTypes=n,t};var r=n(2),i=n.n(r),a=n(1),o=n.n(a),s=n(0),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";e.c=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.a=function(t){return null!==t&&void 0!==t},e.b=function(t){return!!t&&"[object Function]"==={}.toString.call(t)}},function(t,e){t.exports=a},function(t,e,n){t.exports=n(3)}]))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=n(59),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?o:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=h(n);i&&i!==p&&t(e,i,r)}var o=c(n);f&&(o=o.concat(f(n)));for(var s=u(e),v=u(n),g=0;g<o.length;++g){var m=o[g];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var y=d(n,m);try{l(e,m,y)}catch(b){}}}return e}return e}},function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var o,s,u,l=r(e),c=r(n);if(l&&c){if((s=e.length)!=n.length)return!1;for(o=s;0!==o--;)if(!t(e[o],n[o]))return!1;return!0}if(l!=c)return!1;var f=e instanceof Date,d=n instanceof Date;if(f!=d)return!1;if(f&&d)return e.getTime()==n.getTime();var h=e instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return e.toString()==n.toString();var v=i(e);if((s=v.length)!==i(n).length)return!1;for(o=s;0!==o--;)if(!a.call(n,v[o]))return!1;for(o=s;0!==o--;)if(!t(e[u=v[o]],n[u]))return!1;return!0}return e!==e&&n!==n}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(10),i=n(18),a=n(2),o=n.n(a),s=function(t){var e=t.file,n=t.onDocumentComplete,i=t.page,s=t.scale,l=t.rotate,c=t.cMapUrl,f=t.cMapPacked,d=t.workerSrc,h=t.withCredentials,p=Object(a.useRef)(null),v=u({canvasEl:p,file:e,page:i,scale:s,rotate:l,cMapUrl:c,cMapPacked:f,workerSrc:d,withCredentials:h}),g=Object(r.a)(v,2)[1];return Object(a.useEffect)(function(){n(g)},[g]),o.a.createElement("canvas",{ref:p})};s.defaultProps={onDocumentComplete:function(){}};var u=function(t){var e=t.canvasEl,n=t.file,o=t.scale,s=void 0===o?1:o,u=t.rotate,l=void 0===u?0:u,c=t.page,f=void 0===c?1:c,d=t.cMapUrl,h=t.cMapPacked,p=t.workerSrc,v=void 0===p?"//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.1.266/pdf.worker.js":p,g=t.withCredentials,m=void 0!==g&&g,y=Object(a.useState)(),b=Object(r.a)(y,2),_=b[0],x=b[1];Object(a.useEffect)(function(){i.a.GlobalWorkerOptions.workerSrc=v},[]),Object(a.useEffect)(function(){var t={url:n,withCredentials:m};d&&(t.cMapUrl=d,t.cMapPacked=h),i.a.getDocument(t).promise.then(x)},[n,m]),Object(a.useEffect)(function(){_&&_.getPage(f).then(function(t){return w(t)})},[_,f,s,l,e]);var w=function(t){var n,r=0===l?t.rotate:t.rotate+l;n=window.devicePixelRatio;var i=s*n,a=t.getViewport({scale:i,rotation:r}),o=e.current;if(o){var u=o.getContext("2d");o.style.width="".concat(a.width/n,"px"),o.style.height="".concat(a.height/n,"px"),o.height=a.height,o.width=a.width;var c={canvasContext:u,viewport:a};t.render(c)}};return[Object(a.useMemo)(function(){return!_},[_]),Object(a.useMemo)(function(){return _?_._pdfInfo.numPages:null},[_])]}},function(t,e,n){(function(e){var n;t.exports=function t(e,r,i){function a(s,u){if(!r[s]){if(!e[s]){var l="function"==typeof n&&n;if(!u&&l)return n(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return a(n||t)},f,f.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof n&&n,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(t,e,n){"use strict";var r=t("../src/lib"),i={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in i){var o=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(o,i[a])}},{"../src/lib":160}],2:[function(t,e,n){"use strict";e.exports=t("../src/traces/bar")},{"../src/traces/bar":260}],3:[function(t,e,n){"use strict";e.exports=t("../src/core")},{"../src/core":142}],4:[function(t,e,n){"use strict";var r=t("./core");r.register([t("./bar"),t("./pie")]),e.exports=r},{"./bar":2,"./core":3,"./pie":5}],5:[function(t,e,n){"use strict";e.exports=t("../src/traces/pie")},{"../src/traces/pie":274}],6:[function(t,e,n){var r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},a=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0;var s,u=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),s=0===l.x}catch(m){s=!1}function c(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function f(t,e,n,i){var a,o,s;if("function"!==typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=r(null),t._eventsCount=0),s){if("function"===typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(a=c(t))&&a>0&&s.length>a){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else s=o[e]=n,++t._eventsCount;return t}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.call(d,r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length):[]}function v(t){var e=this._events;if(e){var n=e[t];if("function"===typeof n)return 1;if(n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}s?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):o.defaultMaxListeners=u,o.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(t){var e,n,r,i,a,o,s="error"===t;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(n=o[t]))return!1;var l="function"===typeof n;switch(r=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=g(t,r),a=0;a<r;++a)i[a].call(n)}(n,l,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,a=g(t,i),o=0;o<i;++o)a[o].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var a=t.length,o=g(t,a),s=0;s<a;++s)o[s].call(n,r,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,a){if(e)t.call(n,r,i,a);else for(var o=t.length,s=g(t,o),u=0;u<o;++u)s[u].call(n,r,i,a)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,a=g(t,i),o=0;o<i;++o)a[o].apply(n,r)}(n,l,this,i)}return!0},o.prototype.addListener=function(t,e){return f(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return f(this,t,e,!0)},o.prototype.once=function(t,e){if("function"!==typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,h(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){if("function"!==typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,h(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,a,o,s;if("function"!==typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=r(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,a),1===n.length&&(i[t]=n[0]),i.removeListener&&this.emit("removeListener",t,s||e)}return this},o.prototype.removeAllListeners=function(t){var e,n,a;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[t]&&(0===--this._eventsCount?this._events=r(null):delete n[t]),this;if(0===arguments.length){var o,s=i(n);for(a=0;a<s.length;++a)"removeListener"!==(o=s[a])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(e)for(a=e.length-1;a>=0;a--)this.removeListener(t,e[a]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],7:[function(t,e,n){!function(){var t={version:"3.5.17"},n=[].slice,r=function(t){return n.call(t)},i=this.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(Gs){r=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(Vs){var s=this.Element.prototype,u=s.setAttribute,l=s.setAttributeNS,c=this.CSSStyleDeclaration.prototype,f=c.setProperty;s.setAttribute=function(t,e){u.call(this,t,e+"")},s.setAttributeNS=function(t,e,n){l.call(this,t,e,n+"")},c.setProperty=function(t,e,n){f.call(this,t,e+"",n)}}function d(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function h(t){return null===t?NaN:+t}function p(t){return!isNaN(t)}function v(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}t.ascending=d,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},t.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},t.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},t.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)p(n=+t[a])&&(r+=n);else for(;++a<i;)p(n=+e.call(t,t[a],a))&&(r+=n);return r},t.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)p(n=h(t[a]))?r+=n:--o;else for(;++a<i;)p(n=h(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},t.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},t.median=function(e,n){var r,i=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)p(r=h(e[o]))&&i.push(r);else for(;++o<a;)p(r=h(n.call(e,e[o],o)))&&i.push(r);if(i.length)return t.quantile(i.sort(d),.5)},t.variance=function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)p(n=h(t[s]))&&(a+=(r=n-a)/++u,o+=r*(n-a));else for(;++s<i;)p(n=h(e.call(t,t[s],s)))&&(a+=(r=n-a)/++u,o+=r*(n-a));if(u>1)return o/(u-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var g=v(d);function m(t){return t.length}t.bisectLeft=g.left,t.bisect=t.bisectRight=g.right,t.bisector=function(t){return v(1===t.length?function(e,n){return d(t(e),n)}:t)},t.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},t.transpose=function(e){if(!(a=e.length))return[];for(var n=-1,r=t.min(e,m),i=new Array(r);++n<r;)for(var a,o=-1,s=i[n]=new Array(a);++o<a;)s[o]=e[o][n];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--o]=r[e];return n};var y=Math.abs;function b(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function _(){this._=Object.create(null)}t.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],a=function(t){for(var e=1;t*e%1;)e*=10;return e}(y(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},t.map=function(t,e){var n=new _;if(t instanceof _)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var x="__proto__",w="\0";function A(t){return(t+="")===x||t[0]===w?w+t:t}function k(t){return(t+="")[0]===w?t.slice(1):t}function M(t){return A(t)in this._}function T(t){return(t=A(t))in this._&&delete this._[t]}function S(){var t=[];for(var e in this._)t.push(k(e));return t}function C(){var t=0;for(var e in this._)++t;return t}function E(){for(var t in this._)return!1;return!0}function O(){this._=Object.create(null)}function P(t){return t}function L(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function R(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=D.length;n<r;++n){var i=D[n]+e;if(i in t)return i}}b(_,{has:M,get:function(t){return this._[A(t)]},set:function(t,e){return this._[A(t)]=e},remove:T,keys:S,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:k(e),value:this._[e]});return t},size:C,empty:E,forEach:function(t){for(var e in this._)t.call(this,k(e),this._[e])}}),t.nest=function(){var e,n,r={},i=[],a=[];function o(t,a,s){if(s>=i.length)return n?n.call(r,a):e?a.sort(e):a;for(var u,l,c,f,d=-1,h=a.length,p=i[s++],v=new _;++d<h;)(f=v.get(u=p(l=a[d])))?f.push(l):v.set(u,[l]);return t?(l=t(),c=function(e,n){l.set(e,o(t,n,s))}):(l={},c=function(e,n){l[e]=o(t,n,s)}),v.forEach(c),l}return r.map=function(t,e){return o(e,t,0)},r.entries=function(e){return function t(e,n){if(n>=i.length)return e;var r=[],o=a[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),o?r.sort(function(t,e){return o(t.key,e.key)}):r}(o(t.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return a[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},t.set=function(t){var e=new O;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},b(O,{has:M,add:function(t){return this._[A(t+="")]=!0,t},remove:T,values:S,size:C,empty:E,forEach:function(t){for(var e in this._)t.call(this,k(e))}}),t.behavior={},t.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=L(t,e,e[n]);return t};var D=["webkit","ms","moz","Moz","o","O"];function F(){}function j(){}function N(t){var e=[],n=new _;function r(){for(var n,r=e,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,a=e.indexOf(o)).concat(e.slice(a+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function z(){t.event.preventDefault()}function I(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function B(e){for(var n=new j,r=0,i=arguments.length;++r<i;)n[arguments[r]]=N(n);return n.of=function(r,i){return function(a){try{var o=a.sourceEvent=t.event;a.target=e,t.event=a,n[a.type].apply(r,i)}finally{t.event=o}}},n}t.dispatch=function(){for(var t=new j,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=N(t);return t},j.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},t.event=null,t.requote=function(t){return t.replace(q,"\\$&")};var q=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,U={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function H(t){return U(t,Y),t}var W=function(t,e){return e.querySelector(t)},G=function(t,e){return e.querySelectorAll(t)},V=function(t,e){var n=t.matches||t[R(t,"matchesSelector")];return(V=function(t,e){return n.call(t,e)})(t,e)};"function"===typeof Sizzle&&(W=function(t,e){return Sizzle(t,e)[0]||null},G=Sizzle,V=Sizzle.matchesSelector),t.selection=function(){return t.select(i.documentElement)};var Y=t.selection.prototype=[];function Z(t){return"function"===typeof t?t:function(){return W(t,this)}}function X(t){return"function"===typeof t?t:function(){return G(t,this)}}Y.select=function(t){var e,n,r,i,a=[];t=Z(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return H(a)},Y.selectAll=function(t){var e,n,i=[];t=X(t);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],u=-1,l=s.length;++u<l;)(n=s[u])&&(i.push(e=r(t.call(n,n.__data__,u,a))),e.parentNode=n);return H(i)};var $="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"===typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Q(t){return t.trim().replace(/\s+/g," ")}function tt(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function nt(t,e){var n=(t=et(t).map(rt)).length;return"function"===typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function rt(t){var e=tt(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",Q(i+" "+t))):n.setAttribute("class",Q(i.replace(e," ")))}}function it(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"===typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function at(t,e){return null==e?function(){delete this[t]}:"function"===typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ot(e){return"function"===typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$&&t.documentElement.namespaceURI===$?t.createElement(e):t.createElementNS(n,e)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function ut(t){return{__data__:t}}function lt(t){return function(){return V(this,t)}}function ct(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function ft(t){return U(t,dt),t}t.ns={prefix:J,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),J.hasOwnProperty(n)?{space:J[n],local:t}:t}},Y.attr=function(e,n){if(arguments.length<2){if("string"===typeof e){var r=this.node();return(e=t.ns.qualify(e)).local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(K(n,e[n]));return this}return this.each(K(e,n))},Y.classed=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node(),r=(t=et(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!tt(t[i]).test(e))return!1;return!0}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},Y.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.each(it(n,t[n],e));return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(it(t,e,n))},Y.property=function(t,e){if(arguments.length<2){if("string"===typeof t)return this.node()[t];for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},Y.text=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Y.html=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Y.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Y.insert=function(t,e){return t=ot(t),e=Z(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Y.remove=function(){return this.each(st)},Y.data=function(t,e){var n,r,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(t[i]=r.__data__);return t}function o(t,n){var r,i,a,o=t.length,c=n.length,f=Math.min(o,c),d=new Array(c),h=new Array(c),p=new Array(o);if(e){var v,g=new _,m=new Array(o);for(r=-1;++r<o;)(i=t[r])&&(g.has(v=e.call(i,i.__data__,r))?p[r]=i:g.set(v,i),m[r]=v);for(r=-1;++r<c;)(i=g.get(v=e.call(n,a=n[r],r)))?!0!==i&&(d[r]=i,i.__data__=a):h[r]=ut(a),g.set(v,!0);for(r=-1;++r<o;)r in m&&!0!==g.get(m[r])&&(p[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],a=n[r],i?(i.__data__=a,d[r]=i):h[r]=ut(a);for(;r<c;++r)h[r]=ut(n[r]);for(;r<o;++r)p[r]=t[r]}h.update=d,h.parentNode=d.parentNode=p.parentNode=t.parentNode,s.push(h),u.push(d),l.push(p)}var s=ft([]),u=H([]),l=H([]);if("function"===typeof t)for(;++i<a;)o(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],t);return u.enter=function(){return s},u.exit=function(){return l},u},Y.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Y.filter=function(t){var e,n,r,i=[];"function"!==typeof t&&(t=lt(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return H(i)},Y.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Y.sort=function(t){t=function(t){return arguments.length||(t=d),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Y.each=function(t){return ct(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Y.call=function(t){var e=r(arguments);return t.apply(e[0]=this,e),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Y.size=function(){var t=0;return ct(this,function(){++t}),t};var dt=[];function ht(e,n,i){var a="__on"+e,o=e.indexOf("."),s=vt;o>0&&(e=e.slice(0,o));var u=pt.get(e);function l(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}return u&&(e=u,s=gt),o?n?function(){var t=s(n,r(arguments));l.call(this),this.addEventListener(e,this[a]=t,t.$=i),t._=n}:l:n?F:function(){var n,r=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(n=i.match(r)){var a=this[i];this.removeEventListener(n[1],a,a.$),delete this[i]}}}t.selection.enter=ft,t.selection.enter.prototype=dt,dt.append=Y.append,dt.empty=Y.empty,dt.node=Y.node,dt.call=Y.call,dt.size=Y.size,dt.select=function(t){for(var e,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(e.push(r[l]=n=t.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):e.push(null)}return H(o)},dt.insert=function(t,e){return arguments.length<2&&(e=function(t){var e,n;return function(r,i,a){var o,s=t[a].update,u=s.length;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(o=s[e])&&++e<u;);return o}}(this)),Y.insert.call(this,t,e)},t.select=function(t){var e;return"string"===typeof t?(e=[W(t,i)]).parentNode=i.documentElement:(e=[t]).parentNode=a(t),H([e])},t.selectAll=function(t){var e;return"string"===typeof t?(e=r(G(t,i))).parentNode=i.documentElement:(e=r(t)).parentNode=null,H([e])},Y.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=!1),t)this.each(ht(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(ht(t,e,n))};var pt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function vt(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function gt(t,e){var n=vt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}i&&pt.forEach(function(t){"on"+t in i&&pt.remove(t)});var mt,yt=0;function bt(e){var n=".dragsuppress-"+ ++yt,r="click"+n,i=t.select(o(e)).on("touchmove"+n,z).on("dragstart"+n,z).on("selectstart"+n,z);if(null==mt&&(mt=!("onselectstart"in e)&&R(e.style,"userSelect")),mt){var s=a(e).style,u=s[mt];s[mt]="none"}return function(t){if(i.on(n,null),mt&&(s[mt]=u),t){var e=function(){i.on(r,null)};i.on(r,function(){z(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return xt(t,I())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function xt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(_t<0){var a=o(e);if(a.scrollX||a.scrollY){var s=(r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(s.f||s.e),r.remove()}}return _t?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var u=e.getBoundingClientRect();return[n.clientX-u.left-e.clientLeft,n.clientY-u.top-e.clientTop]}function wt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=I().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return xt(t,r)},t.behavior.drag=function(){var e=B(a,"drag","dragstart","dragend"),n=null,r=s(F,t.mouse,o,"mousemove","mouseup"),i=s(wt,t.touch,P,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,a,o,s){return function(){var u,l=t.event.target.correspondingElement||t.event.target,c=this.parentNode,f=e.of(this,arguments),d=0,h=r(),p=".drag"+(null==h?"":"-"+h),v=t.select(a(l)).on(o+p,function(){var t,e,n=i(c,h);n&&(t=n[0]-m[0],e=n[1]-m[1],d|=t|e,m=n,f({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:t,dy:e}))}).on(s+p,function(){i(c,h)&&(v.on(o+p,null).on(s+p,null),g(d),f({type:"dragend"}))}),g=bt(l),m=i(c,h);u=n?[(u=n.apply(this,arguments)).x-m[0],u.y-m[1]]:[0,0],f({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(n=t,a):n},t.rebind(a,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=I().touches),e?r(e).map(function(e){var n=xt(t,e);return n.identifier=e.identifier,n}):[]};var At=1e-6,kt=At*At,Mt=Math.PI,Tt=2*Mt,St=Tt-At,Ct=Mt/2,Et=Mt/180,Ot=180/Mt;function Pt(t){return t>0?1:t<0?-1:0}function Lt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Rt(t){return t>1?0:t<-1?Mt:Math.acos(t)}function Dt(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function Ft(t){return((t=Math.exp(t))+1/t)/2}function jt(t){return(t=Math.sin(t/2))*t}var Nt=Math.SQRT2;t.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],l=e[2],c=s-i,f=u-a,d=c*c+f*f;if(d<kt)r=Math.log(l/o)/Nt,n=function(t){return[i+t*c,a+t*f,o*Math.exp(Nt*t*r)]};else{var h=Math.sqrt(d),p=(l*l-o*o+4*d)/(2*o*2*h),v=(l*l-o*o-4*d)/(2*l*2*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/Nt,n=function(t){var e,n=t*r,s=Ft(g),u=o/(2*h)*(s*(e=Nt*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*c,a+u*f,o*s/Ft(Nt*n+g)]}}return n.duration=1e3*r,n},t.behavior.zoom=function(){var e,n,r,a,s,u,l,c,f,d={x:0,y:0,k:1},h=[960,500],p=Bt,v=250,g=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",_="touchstart.zoom",x=B(w,"zoomstart","zoom","zoomend");function w(t){t.on(m,P).on(It+".zoom",R).on("dblclick.zoom",D).on(_,L)}function A(t){return[(t[0]-d.x)/d.k,(t[1]-d.y)/d.k]}function k(t){d.k=Math.max(p[0],Math.min(p[1],t))}function M(t,e){e=function(t){return[t[0]*d.k+d.x,t[1]*d.k+d.y]}(e),d.x+=t[0]-e[0],d.y+=t[1]-e[1]}function T(e,r,i,a){e.__chart__={x:d.x,y:d.y,k:d.k},k(Math.pow(2,a)),M(n=r,i),e=t.select(e),v>0&&(e=e.transition().duration(v)),e.call(w.event)}function S(){l&&l.domain(u.range().map(function(t){return(t-d.x)/d.k}).map(u.invert)),f&&f.domain(c.range().map(function(t){return(t-d.y)/d.k}).map(c.invert))}function C(t){g++||t({type:"zoomstart"})}function E(t){S(),t({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function O(t){--g||(t({type:"zoomend"}),n=null)}function P(){var e=this,n=x.of(e,arguments),r=0,i=t.select(o(e)).on(y,function(){r=1,M(t.mouse(e),a),E(n)}).on(b,function(){i.on(y,null).on(b,null),s(r),O(n)}),a=A(t.mouse(e)),s=bt(e);ps.call(e),C(n)}function L(){var e,n=this,r=x.of(n,arguments),i={},a=0,o=".zoom-"+t.event.changedTouches[0].identifier,u="touchmove"+o,l="touchend"+o,c=[],f=t.select(n),h=bt(n);function p(){var r=t.touches(n);return e=d.k,r.forEach(function(t){t.identifier in i&&(i[t.identifier]=A(t))}),r}function v(){var e=t.event.target;t.select(e).on(u,g).on(l,y),c.push(e);for(var r=t.event.changedTouches,o=0,f=r.length;o<f;++o)i[r[o].identifier]=null;var h=p(),v=Date.now();if(1===h.length){if(v-s<500){var m=h[0];T(n,m,i[m.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),z()}s=v}else if(h.length>1){var m=h[0],b=h[1],_=m[0]-b[0],x=m[1]-b[1];a=_*_+x*x}}function g(){var o,u,l,c,f=t.touches(n);ps.call(n);for(var d=0,h=f.length;d<h;++d,c=null)if(l=f[d],c=i[l.identifier]){if(u)break;o=l,u=c}if(c){var p=(p=l[0]-o[0])*p+(p=l[1]-o[1])*p,v=a&&Math.sqrt(p/a);o=[(o[0]+l[0])/2,(o[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],k(v*e)}s=null,M(o,u),E(r)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,a=e.length;n<a;++n)delete i[e[n].identifier];for(var s in i)return void p()}t.selectAll(c).on(o,null),f.on(m,P).on(_,L),h(),O(r)}v(),C(r),f.on(m,null).on(_,v)}function R(){var i=x.of(this,arguments);a?clearTimeout(a):(ps.call(this),e=A(n=r||t.mouse(this)),C(i)),a=setTimeout(function(){a=null,O(i)},50),z(),k(Math.pow(2,.002*zt())*d.k),M(n,e),E(i)}function D(){var e=t.mouse(this),n=Math.log(d.k)/Math.LN2;T(this,e,A(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return It||(It="onwheel"in i?(zt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(zt=function(){return t.event.wheelDelta},"mousewheel"):(zt=function(){return-t.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each(function(){var e=x.of(this,arguments),r=d;ms?t.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},C(e)}).tween("zoom:zoom",function(){var i=h[0],a=h[1],o=n?n[0]:i/2,s=n?n[1]:a/2,u=t.interpolateZoom([(o-d.x)/d.k,(s-d.y)/d.k,i/d.k],[(o-r.x)/r.k,(s-r.y)/r.k,i/r.k]);return function(t){var n=u(t),r=i/n[2];this.__chart__=d={x:o-n[0]*r,y:s-n[1]*r,k:r},E(e)}}).each("interrupt.zoom",function(){O(e)}).each("end.zoom",function(){O(e)}):(this.__chart__=d,C(e),E(e),O(e))})},w.translate=function(t){return arguments.length?(d={x:+t[0],y:+t[1],k:d.k},S(),w):[d.x,d.y]},w.scale=function(t){return arguments.length?(d={x:d.x,y:d.y,k:null},k(+t),S(),w):d.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?Bt:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(r=t&&[+t[0],+t[1]],w):r},w.size=function(t){return arguments.length?(h=t&&[+t[0],+t[1]],w):h},w.duration=function(t){return arguments.length?(v=+t,w):v},w.x=function(t){return arguments.length?(l=t,u=t.copy(),d={x:0,y:0,k:1},w):l},w.y=function(t){return arguments.length?(f=t,c=t.copy(),d={x:0,y:0,k:1},w):f},t.rebind(w,x,"on")};var zt,It,Bt=[0,1/0];function qt(){}function Ut(t,e,n){return this instanceof Ut?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ut?new Ut(t.h,t.s,t.l):ce(""+t,fe,Ut):new Ut(t,e,n)}t.color=qt,qt.prototype.toString=function(){return this.rgb()+""},t.hsl=Ut;var Ht=Ut.prototype=new qt;function Wt(t,e,n){var r,i;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new ae(a(t+120),a(t),a(t-120))}function Gt(e,n,r){return this instanceof Gt?(this.h=+e,this.c=+n,void(this.l=+r)):arguments.length<2?e instanceof Gt?new Gt(e.h,e.c,e.l):ee(e instanceof Zt?e.l:(e=de((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Gt(e,n,r)}Ht.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ut(this.h,this.s,this.l/t)},Ht.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ut(this.h,this.s,t*this.l)},Ht.rgb=function(){return Wt(this.h,this.s,this.l)},t.hcl=Gt;var Vt=Gt.prototype=new qt;function Yt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Zt(n,Math.cos(t*=Et)*e,Math.sin(t)*e)}function Zt(t,e,n){return this instanceof Zt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Zt?new Zt(t.l,t.a,t.b):t instanceof Gt?Yt(t.h,t.c,t.l):de((t=ae(t)).r,t.g,t.b):new Zt(t,e,n)}Vt.brighter=function(t){return new Gt(this.h,this.c,Math.min(100,this.l+Xt*(arguments.length?t:1)))},Vt.darker=function(t){return new Gt(this.h,this.c,Math.max(0,this.l-Xt*(arguments.length?t:1)))},Vt.rgb=function(){return Yt(this.h,this.c,this.l).rgb()},t.lab=Zt;var Xt=18,$t=.95047,Jt=1,Kt=1.08883,Qt=Zt.prototype=new qt;function te(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=ne(i)*$t,r=ne(r)*Jt,a=ne(a)*Kt,new ae(ie(3.2404542*i-1.5371385*r-.4985314*a),ie(-.969266*i+1.8760108*r+.041556*a),ie(.0556434*i-.2040259*r+1.0572252*a))}function ee(t,e,n){return t>0?new Gt(Math.atan2(n,e)*Ot,Math.sqrt(e*e+n*n),t):new Gt(NaN,NaN,t)}function ne(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function re(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ae(t,e,n){return this instanceof ae?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ae?new ae(t.r,t.g,t.b):ce(""+t,ae,Wt):new ae(t,e,n)}function oe(t){return new ae(t>>16,t>>8&255,255&t)}function se(t){return oe(t)+""}Qt.brighter=function(t){return new Zt(Math.min(100,this.l+Xt*(arguments.length?t:1)),this.a,this.b)},Qt.darker=function(t){return new Zt(Math.max(0,this.l-Xt*(arguments.length?t:1)),this.a,this.b)},Qt.rgb=function(){return te(this.l,this.a,this.b)},t.rgb=ae;var ue=ae.prototype=new qt;function le(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(pe(i[0]),pe(i[1]),pe(i[2]))}return(a=ve.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),e(o,s,u))}function fe(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(i=u<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new Ut(r,i,u)}function de(t,e,n){t=he(t),e=he(e),n=he(n);var r=re((.4124564*t+.3575761*e+.1804375*n)/$t),i=re((.2126729*t+.7151522*e+.072175*n)/Jt),a=re((.0193339*t+.119192*e+.9503041*n)/Kt);return Zt(116*i-16,500*(r-i),200*(i-a))}function he(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}ue.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ae(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ae(i,i,i)},ue.darker=function(t){return new ae((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},ue.hsl=function(){return fe(this.r,this.g,this.b)},ue.toString=function(){return"#"+le(this.r)+le(this.g)+le(this.b)};var ve=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ge(t){return"function"===typeof t?t:function(){return t}}function me(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=null),ye(e,n,t,r)}}function ye(e,n,i,a){var o={},s=t.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;function f(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&e<300||304===e){try{t=i.call(o,l)}catch(Gs){return void s.error.call(o,Gs)}s.load.call(o,t)}else s.error.call(o,l)}return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(o,l)}finally{t.event=n}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return i=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(r(arguments)))}}),o.send=function(t,r,i){if(2===arguments.length&&"function"===typeof r&&(i=r,r=null),l.open(t,e,!0),null==n||"accept"in u||(u.accept=n+",*/*"),l.setRequestHeader)for(var a in u)l.setRequestHeader(a,u[a]);return null!=n&&l.overrideMimeType&&l.overrideMimeType(n),null!=c&&(l.responseType=c),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},t.rebind(o,s,"on"),null==a?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(a))}ve.forEach(function(t,e){ve.set(t,oe(e))}),t.functor=ge,t.xhr=me(P),t.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=ye(t,e,null==n?a:o(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?a:o(t)):n},i}function a(t){return i.parse(t.responseText)}function o(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(u).join(t)}function u(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,a={},o={},s=[],u=t.length,l=0,c=0;function f(){if(l>=u)return o;if(i)return i=!1,a;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}l=n+2;var s=t.charCodeAt(n+1);return 13===s?(i=!0,10===t.charCodeAt(n+2)&&++l):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l<u;){var s=t.charCodeAt(l++),c=1;if(10===s)i=!0;else if(13===s)i=!0,10===t.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return t.slice(e,l-c)}return t.slice(e)}for(;(n=f())!==o;){for(var d=[];n!==a&&n!==o;)d.push(n),n=f();e&&null==(d=e(d,c++))||s.push(d)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new O,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(u).join(t)].concat(e.map(function(e){return r.map(function(t){return u(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var be,_e,xe,we,Ae=this[R(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ke(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,a={c:t,t:i,n:null};return _e?_e.n=a:be=a,_e=a,xe||(we=clearTimeout(we),xe=1,Ae(Me)),a}function Me(){var t=Te(),e=Se()-t;e>24?(isFinite(e)&&(clearTimeout(we),we=setTimeout(Me,e)),xe=0):(xe=1,Ae(Me))}function Te(){for(var t=Date.now(),e=be;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Se(){for(var t,e=be,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:be=e.n;return _e=t,n}function Ce(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){ke.apply(this,arguments)},t.timer.flush=function(){Te(),Se()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ee=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*y(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});function Oe(e){var n=e.decimal,r=e.thousands,i=e.grouping,a=e.currency,o=i&&r?function(t,e){for(var n=t.length,a=[],o=0,s=i[0],u=0;n>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),a.push(t.substring(n-=s,n+s)),!((u+=s+1)>e));)s=i[o=(o+1)%i.length];return a.reverse().join(r)}:P;return function(e){var r=Pe.exec(e),i=r[1]||" ",s=r[2]||">",u=r[3]||"-",l=r[4]||"",c=r[5],f=+r[6],d=r[7],h=r[8],p=r[9],v=1,g="",m="",y=!1,b=!0;switch(h&&(h=+h.substring(1)),(c||"0"===i&&"="===s)&&(c=i="0",s="="),p){case"n":d=!0,p="g";break;case"%":v=100,m="%",p="f";break;case"p":v=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":b=!1;case"d":y=!0,h=0;break;case"s":v=-1,p="r"}"$"===l&&(g=a[0],m=a[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=Le.get(p)||Re;var _=c&&d;return function(e){var r=m;if(y&&e%1)return"";var a=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(v<0){var l=t.formatPrefix(e,h);e=l.scale(e),r=l.symbol+m}else e*=v;var x,w,A=(e=p(e,h)).lastIndexOf(".");if(A<0){var k=b?e.lastIndexOf("e"):-1;k<0?(x=e,w=""):(x=e.substring(0,k),w=e.substring(k))}else x=e.substring(0,A),w=n+e.substring(A+1);!c&&d&&(x=o(x,1/0));var M=g.length+x.length+w.length+(_?0:a.length),T=M<f?new Array(M=f-M+1).join(i):"";return _&&(x=o(T+x,T.length?f-w.length:1/0)),a+=g,e=x+w,("<"===s?a+e+T:">"===s?T+a+e:"^"===s?T.substring(0,M>>=1)+a+e+T.substring(M):a+(_?e:T+e))+r}}}t.formatPrefix=function(e,n){var r=0;return(e=+e)&&(e<0&&(e*=-1),n&&(e=t.round(e,Ce(e,n))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),Ee[8+r/3]};var Pe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Le=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,n){return(e=t.round(e,Ce(e,n))).toFixed(Math.max(0,Math.min(20,Ce(e*(1+1e-15),n))))}});function Re(t){return t+""}var De=t.time={},Fe=Date;function je(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}je.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ne.setUTCDate.apply(this._,arguments)},setDay:function(){Ne.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ne.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ne.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ne.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ne.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ne.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ne.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ne.setTime.apply(this._,arguments)}};var Ne=Date.prototype;function ze(t,e,n){function r(e){var n=t(e),r=a(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Fe(n-1)),1),n}function a(t,n){return e(t=new Fe(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<r;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=Ie(t);return s.floor=s,s.round=Ie(r),s.ceil=Ie(i),s.offset=Ie(a),s.range=function(t,e,n){try{Fe=je;var r=new je;return r._=t,o(r,e,n)}finally{Fe=Date}},t}function Ie(t){return function(e,n){try{Fe=je;var r=new je;return r._=e,t(r,n)._}finally{Fe=Date}}}function Be(e){var n=e.dateTime,r=e.date,i=e.time,a=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(t){var e=t.length;function n(n){for(var r,i,a,o=[],s=-1,u=0;++s<e;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=qe[r=t.charAt(++s)])&&(r=t.charAt(++s)),(a=x[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=f(n,t,e,0);if(r!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&Fe!==je,a=new(i?je:Fe);return"j"in n?a.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?a._:a},n.toString=function(){return t},n}function f(t,e,n,r){for(var i,a,o,s=0,u=e.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=w[o in qe?e.charAt(s++):o])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Fe=je);return n._=t,e(n)}finally{Fe=Date}}return n.parse=function(t){try{Fe=je;var n=e.parse(t);return n&&n._}finally{Fe=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=ln;var d=t.map(),h=Ge(o),p=Ve(o),v=Ge(s),g=Ve(s),m=Ge(u),y=Ve(u),b=Ge(l),_=Ve(l);a.forEach(function(t,e){d.set(t.toLowerCase(),e)});var x={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:c(n),d:function(t,e){return We(t.getDate(),e,2)},e:function(t,e){return We(t.getDate(),e,2)},H:function(t,e){return We(t.getHours(),e,2)},I:function(t,e){return We(t.getHours()%12||12,e,2)},j:function(t,e){return We(1+De.dayOfYear(t),e,3)},L:function(t,e){return We(t.getMilliseconds(),e,3)},m:function(t,e){return We(t.getMonth()+1,e,2)},M:function(t,e){return We(t.getMinutes(),e,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,e){return We(t.getSeconds(),e,2)},U:function(t,e){return We(De.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return We(De.mondayOfYear(t),e,2)},x:c(r),X:c(i),y:function(t,e){return We(t.getFullYear()%100,e,2)},Y:function(t,e){return We(t.getFullYear()%1e4,e,4)},Z:sn,"%":function(){return"%"}},w={a:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){h.lastIndex=0;var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){m.lastIndex=0;var r=m.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return f(t,x.c.toString(),e,n)},d:tn,e:tn,H:nn,I:nn,j:en,L:on,m:Qe,M:rn,p:function(t,e,n){var r=d.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:an,U:Ze,w:Ye,W:Xe,x:function(t,e,n){return f(t,x.x.toString(),e,n)},X:function(t,e,n){return f(t,x.X.toString(),e,n)},y:Je,Y:$e,Z:Ke,"%":un};return c}De.year=ze(function(t){return(t=De.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),De.years=De.year.range,De.years.utc=De.year.utc.range,De.day=ze(function(t){var e=new Fe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),De.days=De.day.range,De.days.utc=De.day.utc.range,De.dayOfYear=function(t){var e=De.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=De[t]=ze(function(t){return(t=De.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});De[t+"s"]=n.range,De[t+"s"].utc=n.utc.range,De[t+"OfYear"]=function(t){var n=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(n+e)%7)/7)}}),De.week=De.sunday,De.weeks=De.sunday.range,De.weeks.utc=De.sunday.utc.range,De.weekOfYear=De.sundayOfYear;var qe={"-":"",_:" ",0:"0"},Ue=/^\s*\d+/,He=/^%/;function We(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ge(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function Ve(t){for(var e=new _,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ye(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ze(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Xe(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function $e(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Je(t,e,n){Ue.lastIndex=0;var r,i=Ue.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function Ke(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Qe(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function tn(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function en(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function nn(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function rn(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function an(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function on(t,e,n){Ue.lastIndex=0;var r=Ue.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function sn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=y(e)/60|0,i=y(e)%60;return n+We(r,"0",2)+We(i,"0",2)}function un(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ln(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}t.locale=function(t){return{numberFormat:Oe(t),timeFormat:Be(t)}};var cn=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fn(){}t.format=cn.numberFormat,t.geo={},fn.prototype={s:0,t:0,add:function(t){hn(t,this.t,dn),hn(dn.s,this.s,this),this.s?this.t+=dn.t:this.s=dn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var dn=new fn;function hn(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}function pn(t,e){t&&gn.hasOwnProperty(t.type)&&gn[t.type](t,e)}t.geo.stream=function(t,e){t&&vn.hasOwnProperty(t.type)?vn[t.type](t,e):pn(t,e)};var vn={Feature:function(t,e){pn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)pn(n[r].geometry,e)}},gn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){mn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)mn(n[r],e,0)},Polygon:function(t,e){yn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)yn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)pn(n[r],e)}};function mn(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function yn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)mn(t[n],e,1);e.polygonEnd()}t.geo.area=function(e){return bn=0,t.geo.stream(e,Ln),bn};var bn,_n,xn,wn,An,kn,Mn,Tn,Sn,Cn,En,On,Pn=new fn,Ln={sphere:function(){bn+=4*Mt},point:F,lineStart:F,lineEnd:F,polygonStart:function(){Pn.reset(),Ln.lineStart=Rn},polygonEnd:function(){var t=2*Pn;bn+=t<0?4*Mt+t:t,Ln.lineStart=Ln.lineEnd=Ln.point=F}};function Rn(){var t,e,n,r,i;function a(t,e){e=e*Et/2+Mt/4;var a=(t*=Et)-n,o=a>=0?1:-1,s=o*a,u=Math.cos(e),l=Math.sin(e),c=i*l,f=r*u+c*Math.cos(s),d=c*o*Math.sin(s);Pn.add(Math.atan2(d,f)),n=t,r=u,i=l}Ln.point=function(o,s){Ln.point=a,n=(t=o)*Et,r=Math.cos(s=(e=s)*Et/2+Mt/4),i=Math.sin(s)},Ln.lineEnd=function(){a(t,e)}}function Dn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Fn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function jn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Nn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function zn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function In(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Bn(t){return[Math.atan2(t[1],t[0]),Dt(t[2])]}function qn(t,e){return y(t[0]-e[0])<At&&y(t[1]-e[1])<At}t.geo.bounds=function(){var e,n,r,i,a,o,s,u,l,c,f,d={point:h,lineStart:v,lineEnd:g,polygonStart:function(){d.point=m,d.lineStart=b,d.lineEnd=_,l=0,Ln.polygonStart()},polygonEnd:function(){Ln.polygonEnd(),d.point=h,d.lineStart=v,d.lineEnd=g,Pn<0?(e=-(r=180),n=-(i=90)):l>At?i=90:l<-At&&(n=-90),f[0]=e,f[1]=r}};function h(t,a){c.push(f=[e=t,r=t]),a<n&&(n=a),a>i&&(i=a)}function p(t,o){var s=Dn([t*Et,o*Et]);if(u){var l=jn(u,s),c=[l[1],-l[0],0],f=jn(c,l);In(f),f=Bn(f);var d=t-a,p=d>0?1:-1,v=f[0]*Ot*p,g=y(d)>180;if(g^(p*a<v&&v<p*t)){var m=f[1]*Ot;m>i&&(i=m)}else if(g^(p*a<(v=(v+360)%360-180)&&v<p*t)){var m=-f[1]*Ot;m<n&&(n=m)}else o<n&&(n=o),o>i&&(i=o);g?t<a?x(e,t)>x(e,r)&&(r=t):x(t,r)>x(e,r)&&(e=t):r>=e?(t<e&&(e=t),t>r&&(r=t)):t>a?x(e,t)>x(e,r)&&(r=t):x(t,r)>x(e,r)&&(e=t)}else h(t,o);u=s,a=t}function v(){d.point=p}function g(){f[0]=e,f[1]=r,d.point=h,u=null}function m(t,e){if(u){var n=t-a;l+=y(n)>180?n+(n>0?360:-360):n}else o=t,s=e;Ln.point(t,e),p(t,e)}function b(){Ln.lineStart()}function _(){m(o,s),Ln.lineEnd(),y(l)>At&&(e=-(r=180)),f[0]=e,f[1]=r,u=null}function x(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function A(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(a){i=r=-(e=n=1/0),c=[],t.geo.stream(a,d);var o=c.length;if(o){c.sort(w);for(var s=1,u=c[0],l=[u];s<o;++s)A((p=c[s])[0],u)||A(p[1],u)?(x(u[0],p[1])>x(u[0],u[1])&&(u[1]=p[1]),x(p[0],u[1])>x(u[0],u[1])&&(u[0]=p[0])):l.push(u=p);for(var h,p,v=-1/0,o=l.length-1,s=0,u=l[o];s<=o;u=p,++s)p=l[s],(h=x(u[1],p[0]))>v&&(v=h,e=p[0],r=u[1])}return c=f=null,e===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}(),t.geo.centroid=function(e){_n=xn=wn=An=kn=Mn=Tn=Sn=Cn=En=On=0,t.geo.stream(e,Un);var n=Cn,r=En,i=On,a=n*n+r*r+i*i;return a<kt&&(n=Mn,r=Tn,i=Sn,xn<At&&(n=wn,r=An,i=kn),(a=n*n+r*r+i*i)<kt)?[NaN,NaN]:[Math.atan2(r,n)*Ot,Dt(i/Math.sqrt(a))*Ot]};var Un={sphere:F,point:Hn,lineStart:Gn,lineEnd:Vn,polygonStart:function(){Un.lineStart=Yn},polygonEnd:function(){Un.lineStart=Gn}};function Hn(t,e){t*=Et;var n=Math.cos(e*=Et);Wn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Wn(t,e,n){wn+=(t-wn)/++_n,An+=(e-An)/_n,kn+=(n-kn)/_n}function Gn(){var t,e,n;function r(r,i){r*=Et;var a=Math.cos(i*=Et),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*u-n*s)*l+(l=n*o-t*u)*l+(l=t*s-e*o)*l),t*o+e*s+n*u);xn+=l,Mn+=l*(t+(t=o)),Tn+=l*(e+(e=s)),Sn+=l*(n+(n=u)),Wn(t,e,n)}Un.point=function(i,a){i*=Et;var o=Math.cos(a*=Et);t=o*Math.cos(i),e=o*Math.sin(i),n=Math.sin(a),Un.point=r,Wn(t,e,n)}}function Vn(){Un.point=Hn}function Yn(){var t,e,n,r,i;function a(t,e){t*=Et;var a=Math.cos(e*=Et),o=a*Math.cos(t),s=a*Math.sin(t),u=Math.sin(e),l=r*u-i*s,c=i*o-n*u,f=n*s-r*o,d=Math.sqrt(l*l+c*c+f*f),h=n*o+r*s+i*u,p=d&&-Rt(h)/d,v=Math.atan2(d,h);Cn+=p*l,En+=p*c,On+=p*f,xn+=v,Mn+=v*(n+(n=o)),Tn+=v*(r+(r=s)),Sn+=v*(i+(i=u)),Wn(n,r,i)}Un.point=function(o,s){t=o,e=s,Un.point=a,o*=Et;var u=Math.cos(s*=Et);n=u*Math.cos(o),r=u*Math.sin(o),i=Math.sin(s),Wn(n,r,i)},Un.lineEnd=function(){a(t,e),Un.lineEnd=Vn,Un.point=Hn}}function Zn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Xn(){return!0}function $n(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(qn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var u=new Kn(n,t,null,!0),l=new Kn(n,null,u,!1);u.o=l,a.push(u),o.push(l),u=new Kn(r,t,null,!1),l=new Kn(r,null,u,!0),u.o=l,a.push(u),o.push(l)}}}),o.sort(e),Jn(a),Jn(o),a.length){for(var s=0,u=n,l=o.length;s<l;++s)o[s].e=u=!u;for(var c,f,d=a[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,l=c.length;s<l;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(var s=(c=h.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function Jn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Kn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Qn(e,n,r,i){return function(a,o){var s,u=n(o),l=a.invert(i[0],i[1]),c={point:f,lineStart:h,lineEnd:p,polygonStart:function(){c.point=_,c.lineStart=x,c.lineEnd=w,s=[],v=[]},polygonEnd:function(){c.point=f,c.lineStart=h,c.lineEnd=p,s=t.merge(s);var e=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Pn.reset();for(var s=0,u=e.length;s<u;++s){var l=e[s],c=l.length;if(c)for(var f=l[0],d=f[0],h=f[1]/2+Mt/4,p=Math.sin(h),v=Math.cos(h),g=1;;){g===c&&(g=0);var m=(t=l[g])[0],y=t[1]/2+Mt/4,b=Math.sin(y),_=Math.cos(y),x=m-d,w=x>=0?1:-1,A=w*x,k=A>Mt,M=p*b;if(Pn.add(Math.atan2(M*w*Math.sin(A),v*_+M*Math.cos(A))),a+=k?x+w*Tt:x,k^d>=n^m>=n){var T=jn(Dn(f),Dn(t));In(T);var S=jn(i,T);In(S);var C=(k^x>=0?-1:1)*Dt(S[2]);(r>C||r===C&&(T[0]||T[1]))&&(o+=k^x>=0?1:-1)}if(!g++)break;d=m,p=b,v=_,f=t}}return(a<-At||a<At&&Pn<-At)^1&o}(l,v);s.length?(b||(o.polygonStart(),b=!0),$n(s,nr,e,r,o)):e&&(b||(o.polygonStart(),b=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),s=v=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(t,n){var r=a(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function d(t,e){var n=a(t,e);u.point(n[0],n[1])}function h(){c.point=d,u.lineStart()}function p(){c.point=f,u.lineEnd()}var v,g,m=er(),y=n(m),b=!1;function _(t,e){g.push([t,e]);var n=a(t,e);y.point(n[0],n[1])}function x(){y.lineStart(),g=[]}function w(){_(g[0][0],g[0][1]),y.lineEnd();var t,e=y.clean(),n=m.buffer(),r=n.length;if(g.pop(),v.push(g),g=null,r)if(1&e){var i,r=(t=n[0]).length-1,a=-1;if(r>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(tr))}return c}}function tr(t){return t.length>1}function er(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:F,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function nr(t,e){return((t=t.x)[0]<0?t[1]-Ct-At:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-At:Ct-e[1])}var rr=Qn(Xn,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Mt:-Mt,u=y(a-n);y(u-Mt)<At?(t.point(n,r=(r+o)/2>0?Ct:-Ct),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=Mt&&(y(n-i)<At&&(n-=i*At),y(a-s)<At&&(a-=s*At),r=function(t,e,n,r){var i,a,o=Math.sin(t-n);return y(o)>At?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Ct,r.point(-Mt,i),r.point(0,i),r.point(Mt,i),r.point(Mt,0),r.point(Mt,-i),r.point(0,-i),r.point(-Mt,-i),r.point(-Mt,0),r.point(-Mt,i);else if(y(t[0]-e[0])>At){var a=t[0]<e[0]?Mt:-Mt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-Mt,-Mt/2]);function ir(t,e,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,l=o.y,c=s.x,f=s.y,d=0,h=1,p=c-u,v=f-l;if(a=t-u,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=n-u,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=e-l,v||!(a>0)){if(a/=v,v<0){if(a<d)return;a<h&&(h=a)}else if(v>0){if(a>h)return;a>d&&(d=a)}if(a=r-l,v||!(a<0)){if(a/=v,v<0){if(a>h)return;a>d&&(d=a)}else if(v>0){if(a<d)return;a<h&&(h=a)}return d>0&&(i.a={x:u+d*p,y:l+d*v}),h<1&&(i.b={x:u+h*p,y:l+h*v}),i}}}}}}var ar=1e9;function or(e,n,r,i){return function(u){var l,c,f,d,h,p,v,g,m,y,b,_=u,x=er(),w=ir(e,n,r,i),A={point:T,lineStart:function(){A.point=S,c&&c.push(f=[]),y=!0,m=!1,v=g=NaN},lineEnd:function(){l&&(S(d,h),p&&m&&x.rejoin(),l.push(x.buffer())),A.point=T,m&&u.lineEnd()},polygonStart:function(){u=x,l=[],c=[],b=!0},polygonEnd:function(){u=_,l=t.merge(l);var n=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var a,o=1,s=c[i],u=s.length,l=s[0];o<u;++o)a=s[o],l[1]<=r?a[1]>r&&Lt(l,a,t)>0&&++e:a[1]<=r&&Lt(l,a,t)<0&&--e,l=a;return 0!==e}([e,i]),r=b&&n,a=l.length;(r||a)&&(u.polygonStart(),r&&(u.lineStart(),k(null,null,1,u),u.lineEnd()),a&&$n(l,o,n,k,u),u.polygonEnd()),l=c=f=null}};function k(t,o,u,l){var c=0,f=0;if(null==t||(c=a(t,u))!==(f=a(o,u))||s(t,o)<0^u>0)do{l.point(0===c||3===c?e:r,c>1?i:n)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function M(t,a){return e<=t&&t<=r&&n<=a&&a<=i}function T(t,e){M(t,e)&&u.point(t,e)}function S(t,e){t=Math.max(-ar,Math.min(ar,t)),e=Math.max(-ar,Math.min(ar,e));var n=M(t,e);if(c&&f.push([t,e]),y)d=t,h=e,p=n,y=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&m)u.point(t,e);else{var r={a:{x:v,y:g},b:{x:t,y:e}};w(r)?(m||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),b=!1):n&&(u.lineStart(),u.point(t,e),b=!1)}v=t,g=e,m=n}return A};function a(t,i){return y(t[0]-e)<At?i>0?0:3:y(t[0]-r)<At?i>0?2:1:y(t[1]-n)<At?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function sr(t){var e=0,n=Mt/3,r=Pr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Mt/180,n=t[1]*Mt/180):[e/Mt*180,n/Mt*180]},i}function ur(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}return o.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,Dt((i-(t*t+n*n)*r*r)/(2*r))]},o}t.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){return i&&(i.valid=!1),(i=a(t)).valid=!0,i},extent:function(s){return arguments.length?(a=or(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return sr(ur)}).raw=ur,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,n,r,i,a=t.geo.albers(),o=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function l(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(r(a,o),e)||i(a,o),e}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(t)},l.stream=function(t){var e=a.stream(t),n=o.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),l):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),c=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[c-.455*e,f-.238*e],[c+.455*e,f+.238*e]]).stream(u).point,r=o.translate([c-.307*e,f+.201*e]).clipExtent([[c-.425*e+At,f+.12*e+At],[c-.214*e-At,f+.234*e-At]]).stream(u).point,i=s.translate([c-.205*e,f+.212*e]).clipExtent([[c-.214*e+At,f+.166*e+At],[c-.115*e-At,f+.234*e-At]]).stream(u).point,l},l.scale(1070)};var lr,cr,fr,dr,hr,pr,vr={point:F,lineStart:F,lineEnd:F,polygonStart:function(){cr=0,vr.lineStart=gr},polygonEnd:function(){vr.lineStart=vr.lineEnd=vr.point=F,lr+=y(cr/2)}};function gr(){var t,e,n,r;function i(t,e){cr+=r*t-n*e,n=t,r=e}vr.point=function(a,o){vr.point=i,t=n=a,e=r=o},vr.lineEnd=function(){i(t,e)}}var mr={point:function(t,e){t<fr&&(fr=t),t>hr&&(hr=t),e<dr&&(dr=e),e>pr&&(pr=e)},lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function yr(){var t=br(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=br(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=a}function a(t,n){e.push("L",t,",",n)}function o(){n.point=r}function s(){e.push("Z")}return n}function br(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var _r,xr={point:wr,lineStart:Ar,lineEnd:kr,polygonStart:function(){xr.lineStart=Mr},polygonEnd:function(){xr.point=wr,xr.lineStart=Ar,xr.lineEnd=kr}};function wr(t,e){wn+=t,An+=e,++kn}function Ar(){var t,e;function n(n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a);Mn+=o*(t+n)/2,Tn+=o*(e+r)/2,Sn+=o,wr(t=n,e=r)}xr.point=function(r,i){xr.point=n,wr(t=r,e=i)}}function kr(){xr.point=wr}function Mr(){var t,e,n,r;function i(t,e){var i=t-n,a=e-r,o=Math.sqrt(i*i+a*a);Mn+=o*(n+t)/2,Tn+=o*(r+e)/2,Sn+=o,Cn+=(o=r*t-n*e)*(n+t),En+=o*(r+e),On+=3*o,wr(n=t,r=e)}xr.point=function(a,o){xr.point=i,wr(t=n=a,e=r=o)},xr.lineEnd=function(){i(t,e)}}function Tr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=t,n},result:F};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Tt)}function i(e,r){t.moveTo(e,r),n.point=a}function a(e,n){t.lineTo(e,n)}function o(){n.point=r}function s(){t.closePath()}return n}function Sr(t){var e=.5,n=Math.cos(30*Et),r=16;function i(e){return(r?function(e){var n,i,o,s,u,l,c,f,d,h,p,v,g={point:m,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){f=NaN,g.point=b,e.lineStart()}function b(n,i){var o=Dn([n,i]),s=t(n,i);a(f,d,c,h,p,v,f=s[0],d=s[1],c=n,h=o[0],p=o[1],v=o[2],r,e),e.point(f,d)}function _(){g.point=m,e.lineEnd()}function x(){y(),g.point=w,g.lineEnd=A}function w(t,e){b(n=t,e),i=f,o=d,s=h,u=p,l=v,g.point=b}function A(){a(f,d,c,h,p,v,i,o,n,s,u,l,r,e),g.lineEnd=_,_()}return g}:function(e){return Er(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function a(r,i,o,s,u,l,c,f,d,h,p,v,g,m){var b=c-r,_=f-i,x=b*b+_*_;if(x>4*e&&g--){var w=s+h,A=u+p,k=l+v,M=Math.sqrt(w*w+A*A+k*k),T=Math.asin(k/=M),S=y(y(k)-1)<At||y(o-d)<At?(o+d)/2:Math.atan2(A,w),C=t(S,T),E=C[0],O=C[1],P=E-r,L=O-i,R=_*P-b*L;(R*R/x>e||y((b*P+_*L)/x-.5)>.3||s*h+u*p+l*v<n)&&(a(r,i,o,s,u,l,E,O,S,w/=M,A/=M,k,g,m),m.point(E,O),a(E,O,S,w,A,k,c,f,d,h,p,v,g,m))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Cr(t){this.stream=t}function Er(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Or(t){return Pr(function(){return t})()}function Pr(e){var n,r,i,a,o,s,u=Sr(function(t,e){return[(t=n(t,e))[0]*l+a,o-t[1]*l]}),l=150,c=480,f=250,d=0,h=0,p=0,v=0,g=0,m=rr,b=P,_=null,x=null;function w(t){return[(t=i(t[0]*Et,t[1]*Et))[0]*l+a,o-t[1]*l]}function A(t){return(t=i.invert((t[0]-a)/l,(o-t[1])/l))&&[t[0]*Ot,t[1]*Ot]}function k(){i=Zn(r=Fr(p,v,g),n);var t=n(d,h);return a=c-t[0]*l,o=f+t[1]*l,M()}function M(){return s&&(s.valid=!1,s=null),w}return w.stream=function(t){return s&&(s.valid=!1),(s=Lr(m(r,u(b(t))))).valid=!0,s},w.clipAngle=function(t){return arguments.length?(m=null==t?(_=t,rr):function(t){var e=Math.cos(t),n=e>0,r=y(e)>At;return Qn(i,function(t){var e,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],v=i(f,d),g=n?v?0:o(f,d):v?o(f+(f<0?Mt:-Mt),d):0;if(!e&&(l=u=v)&&t.lineStart(),v!==u&&(h=a(e,p),(qn(e,h)||qn(p,h))&&(p[0]+=At,p[1]+=At,v=i(p[0],p[1]))),v!==u)c=0,v?(t.lineStart(),h=a(p,e),t.point(h[0],h[1])):(h=a(e,p),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(r&&e&&n^v){var m;g&s||!(m=a(p,e,!0))||(c=0,n?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&qn(e,p)||t.point(p[0],p[1]),e=p,u=v,s=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},Ir(t,6*Et),n?[0,-t]:[-Mt,t-Mt]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function a(t,n,r){var i=Dn(t),a=Dn(n),o=[1,0,0],s=jn(i,a),u=Fn(s,s),l=s[0],c=u-l*l;if(!c)return!r&&t;var f=e*u/c,d=-e*l/c,h=jn(o,s),p=zn(o,f),v=zn(s,d);Nn(p,v);var g=h,m=Fn(p,g),b=Fn(g,g),_=m*m-b*(Fn(p,p)-1);if(!(_<0)){var x=Math.sqrt(_),w=zn(g,(-m-x)/b);if(Nn(w,p),w=Bn(w),!r)return w;var A,k=t[0],M=n[0],T=t[1],S=n[1];M<k&&(A=k,k=M,M=A);var C=M-k,E=y(C-Mt)<At,O=E||C<At;if(!E&&S<T&&(A=T,T=S,S=A),O?E?T+S>0^w[1]<(y(w[0]-k)<At?T:S):T<=w[1]&&w[1]<=S:C>Mt^(k<=w[0]&&w[0]<=M)){var P=zn(g,(-m+x)/b);return Nn(P,p),[w,Bn(P)]}}}function o(e,r){var i=n?t:Mt-t,a=0;return e<-i?a|=1:e>i&&(a|=2),r<-i?a|=4:r>i&&(a|=8),a}}((_=+t)*Et),M()):_},w.clipExtent=function(t){return arguments.length?(x=t,b=t?or(t[0][0],t[0][1],t[1][0],t[1][1]):P,M()):x},w.scale=function(t){return arguments.length?(l=+t,k()):l},w.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],k()):[c,f]},w.center=function(t){return arguments.length?(d=t[0]%360*Et,h=t[1]%360*Et,k()):[d*Ot,h*Ot]},w.rotate=function(t){return arguments.length?(p=t[0]%360*Et,v=t[1]%360*Et,g=t.length>2?t[2]%360*Et:0,k()):[p*Ot,v*Ot,g*Ot]},t.rebind(w,u,"precision"),function(){return n=e.apply(this,arguments),w.invert=n.invert&&A,k()}}function Lr(t){return Er(t,function(e,n){t.point(e*Et,n*Et)})}function Rr(t,e){return[t,e]}function Dr(t,e){return[t>Mt?t-Tt:t<-Mt?t+Tt:t,e]}function Fr(t,e,n){return t?e||n?Zn(Nr(t),zr(e,n)):Nr(t):e||n?zr(e,n):Dr}function jr(t){return function(e,n){return[(e+=t)>Mt?e-Tt:e<-Mt?e+Tt:e,n]}}function Nr(t){var e=jr(t);return e.invert=jr(-t),e}function zr(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),a=Math.sin(e);function o(t,e){var o=Math.cos(e),s=Math.cos(t)*o,u=Math.sin(t)*o,l=Math.sin(e),c=l*n+s*r;return[Math.atan2(u*i-c*a,s*n-l*r),Dt(c*i+u*a)]}return o.invert=function(t,e){var o=Math.cos(e),s=Math.cos(t)*o,u=Math.sin(t)*o,l=Math.sin(e),c=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+c*r),Dt(c*n-s*r)]},o}function Ir(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){var u=o*e;null!=i?(i=Br(n,i),a=Br(n,a),(o>0?i<a:i>a)&&(i+=o*Tt)):(i=t+o*Tt,a=t-.5*u);for(var l,c=i;o>0?c>a:c<a;c-=u)s.point((l=Bn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function Br(t,e){var n=Dn(e);n[0]-=t,In(n);var r=Rt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-At)%(2*Math.PI)}function qr(e,n,r){var i=t.range(e,n-At,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function Ur(e,n,r){var i=t.range(e,n-At,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function Hr(t){return t.source}function Wr(t){return t.target}t.geo.path=function(){var e,n,r,i,a,o=4.5;function s(e){return e&&("function"===typeof o&&i.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=r(i)),t.geo.stream(e,a)),i.result()}function u(){return a=null,s}return s.area=function(e){return lr=0,t.geo.stream(e,r(vr)),lr},s.centroid=function(e){return wn=An=kn=Mn=Tn=Sn=Cn=En=On=0,t.geo.stream(e,r(xr)),On?[Cn/On,En/On]:Sn?[Mn/Sn,Tn/Sn]:kn?[wn/kn,An/kn]:[NaN,NaN]},s.bounds=function(e){return hr=pr=-(fr=dr=1/0),t.geo.stream(e,r(mr)),[[fr,dr],[hr,pr]]},s.projection=function(t){return arguments.length?(r=(e=t)?t.stream||function(t){var e=Sr(function(e,n){return t([e*Ot,n*Ot])});return function(t){return Lr(e(t))}}(t):P,u()):e},s.context=function(t){return arguments.length?(i=null==(n=t)?new yr:new Tr(t),"function"!==typeof o&&i.pointRadius(o),u()):n},s.pointRadius=function(t){return arguments.length?(o="function"===typeof t?t:(i.pointRadius(+t),+t),s):o},s.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var n=new Cr(e);for(var r in t)n[r]=t[r];return n}}},Cr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Or,t.geo.projectionMutator=Pr,(t.geo.equirectangular=function(){return Or(Rr)}).raw=Rr.invert=Rr,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*Et,e[1]*Et))[0]*=Ot,e[1]*=Ot,e}return t=Fr(t[0]%360*Et,t[1]*Et,t.length>2?t[2]*Et:0),e.invert=function(e){return(e=t.invert(e[0]*Et,e[1]*Et))[0]*=Ot,e[1]*=Ot,e},e},Dr.invert=Rr,t.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"===typeof n?n.apply(this,arguments):n,r=Fr(-t[0]*Et,-t[1]*Et,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Ot,t[1]*=Ot}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=Ir((t=+n)*Et,r*Et),i):t},i.precision=function(n){return arguments.length?(e=Ir(t*Et,(r=+n)*Et),i):r},i.angle(90)},t.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Et,i=t[1]*Et,a=e[1]*Et,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},t.geo.graticule=function(){var e,n,r,i,a,o,s,u,l,c,f,d,h=10,p=h,v=90,g=360,m=2.5;function b(){return{type:"MultiLineString",coordinates:_()}}function _(){return t.range(Math.ceil(i/v)*v,r,v).map(f).concat(t.range(Math.ceil(u/g)*g,s,g).map(d)).concat(t.range(Math.ceil(n/h)*h,e,h).filter(function(t){return y(t%v)>At}).map(l)).concat(t.range(Math.ceil(o/p)*p,a,p).filter(function(t){return y(t%g)>At}).map(c))}return b.lines=function(){return _().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(d(s).slice(1),f(r).reverse().slice(1),d(u).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.majorExtent(t).minorExtent(t):b.minorExtent()},b.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],u=+t[0][1],s=+t[1][1],i>r&&(t=i,i=r,r=t),u>s&&(t=u,u=s,s=t),b.precision(m)):[[i,u],[r,s]]},b.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],n>e&&(t=n,n=e,e=t),o>a&&(t=o,o=a,a=t),b.precision(m)):[[n,o],[e,a]]},b.step=function(t){return arguments.length?b.majorStep(t).minorStep(t):b.minorStep()},b.majorStep=function(t){return arguments.length?(v=+t[0],g=+t[1],b):[v,g]},b.minorStep=function(t){return arguments.length?(h=+t[0],p=+t[1],b):[h,p]},b.precision=function(t){return arguments.length?(m=+t,l=qr(o,a,90),c=Ur(n,e,m),f=qr(u,s,90),d=Ur(i,r,m),b):m},b.majorExtent([[-180,-90+At],[180,90-At]]).minorExtent([[-180,-80-At],[180,80+At]])},t.geo.greatArc=function(){var e,n,r=Hr,i=Wr;function a(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}return a.distance=function(){return t.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},a.source=function(t){return arguments.length?(r=t,e="function"===typeof t?null:t,a):r},a.target=function(t){return arguments.length?(i=t,n="function"===typeof t?null:t,a):i},a.precision=function(){return arguments.length?a:0},a},t.geo.interpolate=function(t,e){return function(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),l=i*Math.sin(t),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(jt(r-e)+i*o*jt(n-t))),h=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*h,n=Math.sin(d-t)*h,r=n*u+e*c,i=n*l+e*f,o=n*a+e*s;return[Math.atan2(i,r)*Ot,Math.atan2(o,Math.sqrt(r*r+i*i))*Ot]}:function(){return[t*Ot,e*Ot]};return p.distance=d,p}(t[0]*Et,t[1]*Et,e[0]*Et,e[1]*Et)},t.geo.length=function(e){return _r=0,t.geo.stream(e,Gr),_r};var Gr={sphere:F,point:F,lineStart:function(){var t,e,n;function r(r,i){var a=Math.sin(i*=Et),o=Math.cos(i),s=y((r*=Et)-t),u=Math.cos(s);_r+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-e*o*u)*s),e*a+n*o*u),t=r,e=a,n=o}Gr.point=function(i,a){t=i*Et,e=Math.sin(a*=Et),n=Math.cos(a),Gr.point=r},Gr.lineEnd=function(){Gr.point=Gr.lineEnd=F}},lineEnd:F,polygonStart:F,polygonEnd:F};function Vr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}var Yr=Vr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return Or(Yr)}).raw=Yr;var Zr=Vr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},P);function Xr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Mt/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),i)/i;if(!i)return Kr;function o(t,e){a>0?e<-Ct+At&&(e=-Ct+At):e>Ct-At&&(e=Ct-At);var n=a/Math.pow(r(e),i);return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}return o.invert=function(t,e){var n=a-e,r=Pt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Ct]},o}function $r(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(y(r)<At)return Rr;function a(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return a.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Pt(r)*Math.sqrt(t*t+n*n)]},a}(t.geo.azimuthalEquidistant=function(){return Or(Zr)}).raw=Zr,(t.geo.conicConformal=function(){return sr(Xr)}).raw=Xr,(t.geo.conicEquidistant=function(){return sr($r)}).raw=$r;var Jr=Vr(function(t){return 1/t},Math.atan);function Kr(t,e){return[t,Math.log(Math.tan(Mt/4+e/2))]}function Qr(t){var e,n=Or(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Mt*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}(t.geo.gnomonic=function(){return Or(Jr)}).raw=Jr,Kr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ct]},(t.geo.mercator=function(){return Qr(Kr)}).raw=Kr;var ti=Vr(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Or(ti)}).raw=ti;var ei=Vr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ni(t,e){return[Math.log(Math.tan(Mt/4+e/2)),-t]}function ri(t){return t[0]}function ii(t){return t[1]}function ai(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Lt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function oi(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return Or(ei)}).raw=ei,ni.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ct]},(t.geo.transverseMercator=function(){var t=Qr(ni),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ni,t.geom={},t.geom.hull=function(t){var e=ri,n=ii;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=ge(e),a=ge(n),o=t.length,s=[],u=[];for(r=0;r<o;r++)s.push([+i.call(this,t[r],r),+a.call(this,t[r],r),r]);for(s.sort(oi),r=0;r<o;r++)u.push([s[r][0],-s[r][1]]);var l=ai(s),c=ai(u),f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(r=l.length-1;r>=0;--r)h.push(t[s[l[r]][2]]);for(r=+f;r<c.length-d;++r)h.push(t[s[c[r]][2]]);return h}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},t.geom.polygon=function(t){return U(t,si),t};var si=t.geom.polygon.prototype=[];function ui(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function li(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,u=t[1],l=n[1],c=e[1]-u,f=r[1]-l,d=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+d*o,u+d*c]}function ci(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}si.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},si.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},si.clip=function(t){for(var e,n,r,i,a,o,s=ci(t),u=-1,l=this.length-ci(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,i=this[u],a=e[(r=e.length-s)-1],n=-1;++n<r;)ui(o=e[n],c,i)?(ui(a,c,i)||t.push(li(a,o,c,i)),t.push(o)):ui(a,c,i)&&t.push(li(a,o,c,i)),a=o;s&&t.push(t[0]),c=i}return t};var fi,di,hi,pi,vi,gi=[],mi=[];function yi(){Ni(this),this.edge=this.site=this.circle=null}function bi(t){var e=gi.pop()||new yi;return e.site=t,e}function _i(t){Ei(t),hi.remove(t),gi.push(t),Ni(t)}function xi(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];_i(t);for(var u=a;u.circle&&y(n-u.circle.x)<At&&y(r-u.circle.cy)<At;)a=u.P,s.unshift(u),_i(u),u=a;s.unshift(u),Ei(u);for(var l=o;l.circle&&y(n-l.circle.x)<At&&y(r-l.circle.cy)<At;)o=l.N,s.push(l),_i(l),l=o;s.push(l),Ei(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],Di(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=Li(u.site,l.site,null,i),Ci(u),Ci(l)}function wi(t){for(var e,n,r,i,a=t.x,o=t.y,s=hi._;s;)if((r=Ai(s,o)-a)>At)s=s.L;else{if(!((i=a-ki(s,o))>At)){r>-At?(e=s.P,n=s):i>-At?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=bi(t);if(hi.insert(e,u),e||n){if(e===n)return Ei(e),n=bi(e.site),hi.insert(u,n),u.edge=n.edge=Li(e.site,u.site),Ci(e),void Ci(n);if(n){Ei(e),Ei(n);var l=e.site,c=l.x,f=l.y,d=t.x-c,h=t.y-f,p=n.site,v=p.x-c,g=p.y-f,m=2*(d*g-h*v),y=d*d+h*h,b=v*v+g*g,_={x:(g*y-h*b)/m+c,y:(d*b-v*y)/m+f};Di(n.edge,l,p,_),u.edge=Li(l,t,null,_),n.edge=Li(t,p,null,_),Ci(e),Ci(n)}else u.edge=Li(e.site,u.site)}}function Ai(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,l=u-e;if(!l)return s;var c=s-r,f=1/a-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function ki(t,e){var n=t.N;if(n)return Ai(n,e);var r=t.site;return r.y===e?r.x:1/0}function Mi(t){this.site=t,this.edges=[]}function Ti(t,e){return e.angle-t.angle}function Si(){Ni(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ci(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=a.y-s,d=2*(u*f-l*c);if(!(d>=-kt)){var h=u*u+l*l,p=c*c+f*f,v=(f*h-l*p)/d,g=(u*p-c*h)/d,f=g+s,m=mi.pop()||new Si;m.arc=t,m.site=i,m.x=v+o,m.y=f+Math.sqrt(v*v+g*g),m.cy=f,t.circle=m;for(var y=null,b=vi._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}vi.insert(y,m),y||(pi=m)}}}}function Ei(t){var e=t.circle;e&&(e.P||(pi=e.N),vi.remove(e),mi.push(e),Ni(e),t.circle=null)}function Oi(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,f=t.r,d=c.x,h=c.y,p=f.x,v=f.y,g=(d+p)/2,m=(h+v)/2;if(v===h){if(g<o||g>=s)return;if(d>p){if(a){if(a.y>=l)return}else a={x:g,y:u};n={x:g,y:l}}else{if(a){if(a.y<u)return}else a={x:g,y:l};n={x:g,y:u}}}else if(i=m-(r=(d-p)/(v-h))*g,r<-1||r>1)if(d>p){if(a){if(a.y>=l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(h<v){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function Pi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Li(t,e,n,r){var i=new Pi(t,e);return fi.push(i),n&&Di(i,t,e,n),r&&Di(i,e,t,r),di[t.i].edges.push(new Fi(i,t,e)),di[e.i].edges.push(new Fi(i,e,t)),i}function Ri(t,e,n){var r=new Pi(t,null);return r.a=e,r.b=n,fi.push(r),r}function Di(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Fi(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ji(){this._=null}function Ni(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ii(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Bi(t){for(;t.L;)t=t.L;return t}function qi(t,e){var n,r,i,a=t.sort(Ui).pop();for(fi=[],di=new Array(t.length),hi=new ji,vi=new ji;;)if(i=pi,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(di[a.i]=new Mi(a),wi(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;xi(i.arc)}e&&(function(t){for(var e,n=fi,r=ir(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Oi(e=n[i],t)||!r(e)||y(e.a.x-e.b.x)<At&&y(e.a.y-e.b.y)<At)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,a,o,s,u,l,c,f=t[0][0],d=t[1][0],h=t[0][1],p=t[1][1],v=di,g=v.length;g--;)if((a=v[g])&&a.prepare())for(s=a.edges,u=s.length,o=0;o<u;)c=s[o].end(),r=c.x,i=c.y,l=s[++o%u].start(),e=l.x,n=l.y,(y(r-e)>At||y(i-n)>At)&&(s.splice(o,0,new Fi(Ri(a.site,c,y(r-f)<At&&p-i>At?{x:f,y:y(e-f)<At?n:p}:y(i-p)<At&&d-r>At?{x:y(n-p)<At?e:d,y:p}:y(r-d)<At&&i-h>At?{x:d,y:y(e-d)<At?n:h}:y(i-h)<At&&r-f>At?{x:y(n-h)<At?e:f,y:h}:null),a.site,null)),++u)}(e));var o={cells:di,edges:fi};return hi=vi=fi=di=null,o}function Ui(t,e){return e.y-t.y||e.x-t.x}Mi.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ti),e.length},Fi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ji.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Bi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(zi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ii(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ii(this,n),n=(t=n).U),n.C=!1,r.C=!0,zi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?Bi(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,zi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ii(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,zi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ii(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,zi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ii(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=ri,n=ii,r=e,i=n,a=Hi;if(t)return o(t);function o(t){var e=new Array(t.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return qi(s(t),a).cells.forEach(function(a,s){var u=a.edges,l=a.site,c=e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];c.point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/At)*At,y:Math.round(i(t,e)/At)*At,i:e}})}return o.links=function(t){return qi(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(t){var e=[];return qi(s(t)).cells.forEach(function(n,r){for(var i,a,o,s,u=n.site,l=n.edges.sort(Ti),c=-1,f=l.length,d=l[f-1].edge,h=d.l===u?d.r:d.l;++c<f;)i=h,d=l[c].edge,h=d.l===u?d.r:d.l,r<i.i&&r<h.i&&(o=i,s=h,((a=u).x-s.x)*(o.y-a.y)-(a.x-o.x)*(s.y-a.y)<0)&&e.push([t[r],t[i.i],t[h.i]])}),e},o.x=function(t){return arguments.length?(r=ge(e=t),o):e},o.y=function(t){return arguments.length?(i=ge(n=t),o):n},o.clipExtent=function(t){return arguments.length?(a=null==t?Hi:t,o):a===Hi?null:a},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):a===Hi?null:a&&a[1]},o};var Hi=[[-1e6,-1e6],[1e6,1e6]];function Wi(t){return t.x}function Gi(t){return t.y}function Vi(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,a=e.b,o=n.r-r,s=n.g-i,u=n.b-a;return function(t){return"#"+le(Math.round(r+o*t))+le(Math.round(i+s*t))+le(Math.round(a+u*t))}}function Yi(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Ki(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Zi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Xi(t,e){var n,r,i,a=$i.lastIndex=Ji.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=$i.exec(t))&&(r=Ji.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Zi(n,r)})),a=Ji.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,n,r,i){var a,o=ri,s=ii;if(a=arguments.length)return o=Wi,s=Gi,3===a&&(i=n,r=e,n=e=0),u(t);function u(t){var u,l,c,f,d,h,p,v,g,m=ge(o),b=ge(s);if(null!=e)h=e,p=n,v=r,g=i;else if(v=g=-(h=p=1/0),l=[],c=[],d=t.length,a)for(f=0;f<d;++f)(u=t[f]).x<h&&(h=u.x),u.y<p&&(p=u.y),u.x>v&&(v=u.x),u.y>g&&(g=u.y),l.push(u.x),c.push(u.y);else for(f=0;f<d;++f){var _=+m(u=t[f],f),x=+b(u,f);_<h&&(h=_),x<p&&(p=x),_>v&&(v=_),x>g&&(g=x),l.push(_),c.push(x)}var w=v-h,A=g-p;function k(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(y(u-n)+y(l-r)<.01)M(t,e,n,r,i,a,o,s);else{var c=t.point;t.x=t.y=t.point=null,M(t,c,u,l,i,a,o,s),M(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else M(t,e,n,r,i,a,o,s)}function M(t,e,n,r,i,a,o,s){var u=.5*(i+o),l=.5*(a+s),c=n>=u,f=r>=l,d=f<<1|c;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),c?i=u:o=u,f?a=l:s=l,k(t,e,n,r,i,a,o,s)}w>A?g=p+w:v=h+A;var T={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){k(T,t,+m(t,++f),+b(t,f),h,p,v,g)},visit:function(t){!function t(e,n,r,i,a,o){if(!e(n,r,i,a,o)){var s=.5*(r+a),u=.5*(i+o),l=n.nodes;l[0]&&t(e,l[0],r,i,s,u),l[1]&&t(e,l[1],s,i,a,u),l[2]&&t(e,l[2],r,u,s,o),l[3]&&t(e,l[3],s,u,a,o)}}(t,T,h,p,v,g)},find:function(t){return function(t,e,n,r,i,a,o){var s,u=1/0;return function t(l,c,f,d,h){if(!(c>a||f>o||d<r||h<i)){if(p=l.point){var p,v=e-l.x,g=n-l.y,m=v*v+g*g;if(m<u){var y=Math.sqrt(u=m);r=e-y,i=n-y,a=e+y,o=n+y,s=p}}for(var b=l.nodes,_=.5*(c+d),x=.5*(f+h),w=(n>=x)<<1|e>=_,A=w+4;w<A;++w)if(l=b[3&w])switch(3&w){case 0:t(l,c,f,_,x);break;case 1:t(l,_,f,d,x);break;case 2:t(l,c,x,_,h);break;case 3:t(l,_,x,d,h)}}}(t,r,i,a,o),s}(T,t[0],t[1],h,p,v,g)}};if(f=-1,null==e){for(;++f<d;)k(T,t[f],l[f],c[f],h,p,v,g);--f}else t.forEach(T.add);return l=c=t=u=null,T}return u.x=function(t){return arguments.length?(o=t,u):o},u.y=function(t){return arguments.length?(s=t,u):s},u.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),u):null==e?null:[[e,n],[r,i]]},u.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),u):null==e?null:[r-e,i-n]},u},t.interpolateRgb=Vi,t.interpolateObject=Yi,t.interpolateNumber=Zi,t.interpolateString=Xi;var $i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ji=new RegExp($i.source,"g");function Ki(e,n){for(var r,i=t.interpolators.length;--i>=0&&!(r=t.interpolators[i](e,n)););return r}function Qi(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Ki(t[n],e[n]));for(;n<a;++n)i[n]=t[n];for(;n<o;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}t.interpolate=Ki,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?ve.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Vi:Xi:e instanceof qt?Vi:Array.isArray(e)?Qi:"object"===n&&isNaN(e)?Yi:Zi)(t,e)}],t.interpolateArray=Qi;var ta=function(){return P},ea=t.map({linear:ta,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return aa},cubic:function(){return oa},sin:function(){return ua},exp:function(){return la},circle:function(){return ca},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Tt*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Tt/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return fa}}),na=t.map({in:P,out:ra,"in-out":ia,"out-in":function(t){return ia(ra(t))}});function ra(t){return function(e){return 1-t(1-e)}}function ia(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function aa(t){return t*t}function oa(t){return t*t*t}function sa(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ua(t){return 1-Math.cos(t*Ct)}function la(t){return Math.pow(2,10*(t-1))}function ca(t){return 1-Math.sqrt(1-t*t)}function fa(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function da(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ha(t){var e,n,r,i=[t.a,t.b],a=[t.c,t.d],o=va(i),s=pa(i,a),u=va(((e=a)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Ot,this.translate=[t.e,t.f],this.scale=[o,u],this.skew=u?Math.atan2(s,u)*Ot:0}function pa(t,e){return t[0]*e[0]+t[1]*e[1]}function va(t){var e=Math.sqrt(pa(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var e,r=t.indexOf("-"),i=r>=0?t.slice(0,r):t,a=r>=0?t.slice(r+1):"in";return i=ea.get(i)||ta,a=na.get(a)||P,e=a(i.apply(null,n.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var r=e.h,i=e.c,a=e.l,o=n.h-r,s=n.c-i,u=n.l-a;return isNaN(s)&&(s=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(t){return Yt(r+o*t,i+s*t,a+u*t)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var r=e.h,i=e.s,a=e.l,o=n.h-r,s=n.s-i,u=n.l-a;return isNaN(s)&&(s=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(t){return Wt(r+o*t,i+s*t,a+u*t)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var r=e.l,i=e.a,a=e.b,o=n.l-r,s=n.a-i,u=n.b-a;return function(t){return te(r+o*t,i+s*t,a+u*t)+""}},t.interpolateRound=da,t.transform=function(e){var n=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new ha(e?e.matrix:ga)})(e)},ha.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ga={a:1,b:0,c:0,d:1,e:0,f:0};function ma(t){return t.length?t.pop()+",":""}function ya(e,n){var r=[],i=[];return e=t.transform(e),n=t.transform(n),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Zi(t[0],e[0])},{i:i-2,x:Zi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(e.translate,n.translate,r,i),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(ma(n)+"rotate(",null,")")-2,x:Zi(t,e)})):e&&n.push(ma(n)+"rotate("+e+")")}(e.rotate,n.rotate,r,i),function(t,e,n,r){t!==e?r.push({i:n.push(ma(n)+"skewX(",null,")")-2,x:Zi(t,e)}):e&&n.push(ma(n)+"skewX("+e+")")}(e.skew,n.skew,r,i),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(ma(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Zi(t[0],e[0])},{i:i-2,x:Zi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(ma(n)+"scale("+e+")")}(e.scale,n.scale,r,i),e=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join("")}}function ba(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function _a(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function xa(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;for(var n=wa(t),r=wa(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function wa(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Aa(t){t.fixed|=2}function ka(t){t.fixed&=-7}function Ma(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Ta(t){t.fixed&=-5}t.interpolateTransform=ya,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(xa(t[n]));return e}},t.layout.chord=function(){var e,n,r,i,a,o,s,u={},l=0;function c(){var u,c,d,h,p,v={},g=[],m=t.range(i),y=[];for(e=[],n=[],u=0,h=-1;++h<i;){for(c=0,p=-1;++p<i;)c+=r[h][p];g.push(c),y.push(t.range(i)),u+=c}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),o&&y.forEach(function(t,e){t.sort(function(t,n){return o(r[e][t],r[e][n])})}),u=(Tt-l*i)/u,c=0,h=-1;++h<i;){for(d=c,p=-1;++p<i;){var b=m[h],_=y[b][p],x=r[b][_],w=c,A=c+=x*u;v[b+"-"+_]={index:b,subindex:_,startAngle:w,endAngle:A,value:x}}n[b]={index:b,startAngle:d,endAngle:c,value:g[b]},c+=l}for(h=-1;++h<i;)for(p=h-1;++p<i;){var k=v[h+"-"+p],M=v[p+"-"+h];(k.value||M.value)&&e.push(k.value<M.value?{source:M,target:k}:{source:k,target:M})}s&&f()}function f(){e.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return u.matrix=function(t){return arguments.length?(i=(r=t)&&r.length,e=n=null,u):r},u.padding=function(t){return arguments.length?(l=t,e=n=null,u):l},u.sortGroups=function(t){return arguments.length?(a=t,e=n=null,u):a},u.sortSubgroups=function(t){return arguments.length?(o=t,e=null,u):o},u.sortChords=function(t){return arguments.length?(s=t,e&&f(),u):s},u.chords=function(){return e||c(),e},u.groups=function(){return n||c(),n},u},t.layout.force=function(){var e,n,r,i,a,o,s={},u=t.dispatch("start","tick","end"),l=[1,1],c=.9,f=Sa,d=Ca,h=-30,p=Ea,v=.1,g=.64,m=[],y=[];function b(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,u=a*a+o*o;if(s*s/g<u){if(u<p){var l=e.charge/u;t.px-=a*l,t.py-=o*l}return!0}if(e.point&&u&&u<p){var l=e.pointCharge/u;t.px-=a*l,t.py-=o*l}}return!e.charge}}function _(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return e=null,u.end({type:"end",alpha:r=0}),!0;var n,s,f,d,p,g,_,x,w,A=m.length,k=y.length;for(s=0;s<k;++s)f=y[s],d=f.source,p=f.target,x=p.x-d.x,w=p.y-d.y,(g=x*x+w*w)&&(g=r*a[s]*((g=Math.sqrt(g))-i[s])/g,x*=g,w*=g,p.x-=x*(_=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=w*_,d.x+=x*(_=1-_),d.y+=w*_);if((_=r*v)&&(x=l[0]/2,w=l[1]/2,s=-1,_))for(;++s<A;)(f=m[s]).x+=(x-f.x)*_,f.y+=(w-f.y)*_;if(h)for(function t(e,n,r){var i=0,a=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,u=s.length,l=-1;++l<u;)null!=(o=s[l])&&(t(o,n,r),e.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*r[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,a+=c*e.point.y}e.cx=i/e.charge,e.cy=a/e.charge}(n=t.geom.quadtree(m),r,o),s=-1;++s<A;)(f=m[s]).fixed||n.visit(b(f));for(s=-1;++s<A;)(f=m[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);u.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(f="function"===typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"===typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(h="function"===typeof t?t:+t,s):h},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(v=+t,s):v},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:r=0})):t>0&&(u.start({type:"start",alpha:r=t}),e=ke(s.tick)),s):r},s.start=function(){var t,e,n,r=m.length,u=y.length,c=l[0],p=l[1];for(t=0;t<r;++t)(n=m[t]).index=t,n.weight=0;for(t=0;t<u;++t)"number"==typeof(n=y[t]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=m[t],isNaN(n.x)&&(n.x=v("x",c)),isNaN(n.y)&&(n.y=v("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"===typeof f)for(t=0;t<u;++t)i[t]=+f.call(this,y[t],t);else for(t=0;t<u;++t)i[t]=f;if(a=[],"function"===typeof d)for(t=0;t<u;++t)a[t]=+d.call(this,y[t],t);else for(t=0;t<u;++t)a[t]=d;if(o=[],"function"===typeof h)for(t=0;t<r;++t)o[t]=+h.call(this,m[t],t);else for(t=0;t<r;++t)o[t]=h;function v(n,i){if(!e){for(e=new Array(r),l=0;l<r;++l)e[l]=[];for(l=0;l<u;++l){var a=y[l];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var o,s=e[t],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][n]))return o;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=t.behavior.drag().origin(P).on("dragstart.force",Aa).on("drag.force",_).on("dragend.force",ka)),!arguments.length)return n;this.on("mouseover.force",Ma).on("mouseout.force",Ta).call(n)},t.rebind(s,u,"on")};var Sa=20,Ca=1,Ea=1/0;function Oa(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=ja,e}function Pa(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function La(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function Ra(t){return t.children}function Da(t){return t.value}function Fa(t,e){return e.value-t.value}function ja(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=Fa,e=Ra,n=Da;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=e.call(r,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;n&&(a.value=0),a.children=l}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return La(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Pa(t,function(t){t.children&&(t.value=0)}),La(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(t,r){var i=e.call(this,t,r);return function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=e.value?r/e.value:0;++l<o;)t(s=a[l],n,u=s.value*r,i),n+=u}}(i[0],0,n[0],n[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}(i[0])),i}return r.size=function(t){return arguments.length?(n=t,r):n},Oa(r,e)},t.layout.pie=function(){var e=Number,n=Na,r=0,i=Tt,a=0;function o(s){var u,l=s.length,c=s.map(function(t,n){return+e.call(o,t,n)}),f=+("function"===typeof r?r.apply(this,arguments):r),d=("function"===typeof i?i.apply(this,arguments):i)-f,h=Math.min(Math.abs(d)/l,+("function"===typeof a?a.apply(this,arguments):a)),p=h*(d<0?-1:1),v=t.sum(c),g=v?(d-l*p)/v:0,m=t.range(l),y=[];return null!=n&&m.sort(n===Na?function(t,e){return c[e]-c[t]}:function(t,e){return n(s[t],s[e])}),m.forEach(function(t){y[t]={data:s[t],value:u=c[t],startAngle:f,endAngle:f+=u*g+p,padAngle:h}}),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(t){return arguments.length?(n=t,o):n},o.startAngle=function(t){return arguments.length?(r=t,o):r},o.endAngle=function(t){return arguments.length?(i=t,o):i},o.padAngle=function(t){return arguments.length?(a=t,o):a},o};var Na={};function za(t){return t.x}function Ia(t){return t.y}function Ba(t,e,n){t.y0=e,t.y=n}t.layout.stack=function(){var e=P,n=Ha,r=Wa,i=Ba,a=za,o=Ia;function s(u,l){if(!(h=u.length))return u;var c=u.map(function(t,n){return e.call(s,t,n)}),f=c.map(function(t){return t.map(function(t,e){return[a.call(s,t,e),o.call(s,t,e)]})}),d=n.call(s,f,l);c=t.permute(c,d),f=t.permute(f,d);var h,p,v,g,m=r.call(s,f,l),y=c[0].length;for(v=0;v<y;++v)for(i.call(s,c[0][v],g=m[v],f[0][v][1]),p=1;p<h;++p)i.call(s,c[p][v],g+=f[p-1][v][1],f[p][v][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(t){return arguments.length?(n="function"===typeof t?t:qa.get(t)||Ha,s):n},s.offset=function(t){return arguments.length?(r="function"===typeof t?t:Ua.get(t)||Wa,s):r},s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(o=t,s):o},s.out=function(t){return arguments.length?(i=t,s):i},s};var qa=t.map({"inside-out":function(e){var n,r,i=e.length,a=e.map(Ga),o=e.map(Va),s=t.range(i).sort(function(t,e){return a[t]-a[e]}),u=0,l=0,c=[],f=[];for(n=0;n<i;++n)r=s[n],u<l?(u+=o[r],c.push(r)):(l+=o[r],f.push(r));return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:Ha}),Ua=t.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,u=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)u[n]=(s-o[n])/2;return u},wiggle:function(t){var e,n,r,i,a,o,s,u,l,c=t.length,f=t[0],d=f.length,h=[];for(h[0]=u=l=0,n=1;n<d;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,a=0,s=f[n][0]-f[n-1][0];e<c;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}h[n]=u-=i?a/i*s:0,u<l&&(l=u)}for(n=0;n<d;++n)h[n]-=l;return h},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:Wa});function Ha(e){return t.range(e.length)}function Wa(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Ga(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Va(t){return t.reduce(Ya,0)}function Ya(t,e){return t+e[1]}function Za(t,e){return Xa(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Xa(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function $a(e){return[t.min(e),t.max(e)]}function Ja(t,e){return t.value-e.value}function Ka(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Qa(t,e){t._pack_next=e,e._pack_prev=t}function to(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function eo(t){if((e=t.children)&&(u=e.length)){var e,n,r,i,a,o,s,u,l=1/0,c=-1/0,f=1/0,d=-1/0;if(e.forEach(no),(n=e[0]).x=-n.r,n.y=0,b(n),u>1&&((r=e[1]).x=r.r,r.y=0,b(r),u>2))for(i=e[2],io(n,r,i),b(i),Ka(n,i),n._pack_prev=i,Ka(i,r),r=n._pack_next,a=3;a<u;a++){io(n,r,i=e[a]);var h=0,p=1,v=1;for(o=r._pack_next;o!==r;o=o._pack_next,p++)if(to(o,i)){h=1;break}if(1==h)for(s=n._pack_prev;s!==o._pack_prev&&!to(s,i);s=s._pack_prev,v++);h?(p<v||p==v&&r.r<n.r?Qa(n,r=o):Qa(n=s,r),a--):(Ka(n,i),r=i,b(i))}var g=(l+c)/2,m=(f+d)/2,y=0;for(a=0;a<u;a++)(i=e[a]).x-=g,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(ro)}function b(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}}function no(t){t._pack_next=t._pack_prev=t}function ro(t){delete t._pack_next,delete t._pack_prev}function io(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a,u=.5+((r*=r)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+u*i+l*a,n.y=t.y+u*a-l*i}else n.x=t.x+r,n.y=t.y}function ao(t,e){return t.parent==e.parent?1:2}function oo(t){var e=t.children;return e.length?e[0]:t.t}function so(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function uo(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function lo(t,e,n){return t.a.parent===e.parent?t.a:n}function co(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function fo(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function ho(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function po(t){return t.rangeExtent?t.rangeExtent():ho(t.range())}function vo(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function go(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function mo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:yo}t.layout.histogram=function(){var e=!0,n=Number,r=$a,i=Za;function a(a,o){for(var s,u,l=[],c=a.map(n,this),f=r.call(this,c,o),d=i.call(this,f,c,o),o=-1,h=c.length,p=d.length-1,v=e?1:1/h;++o<p;)(s=l[o]=[]).dx=d[o+1]-(s.x=d[o]),s.y=0;if(p>0)for(o=-1;++o<h;)(u=c[o])>=f[0]&&u<=f[1]&&((s=l[t.bisect(d,u,1,p)-1]).y+=v,s.push(a[o]));return l}return a.value=function(t){return arguments.length?(n=t,a):n},a.range=function(t){return arguments.length?(r=ge(t),a):r},a.bins=function(t){return arguments.length?(i="number"===typeof t?function(e){return Xa(e,t)}:ge(t),a):i},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(Ja),r=0,i=[1,1];function a(t,a){var o=n.call(this,t,a),s=o[0],u=i[0],l=i[1],c=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};if(s.x=s.y=0,La(s,function(t){t.r=+c(t.value)}),La(s,eo),r){var f=r*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;La(s,function(t){t.r+=f}),La(s,eo),La(s,function(t){t.r-=f})}return function t(e,n,r,i){var a=e.children;if(e.x=n+=i*e.x,e.y=r+=i*e.y,e.r*=i,a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,r,i)}(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),o}return a.size=function(t){return arguments.length?(i=t,a):i},a.radius=function(t){return arguments.length?(e=null==t||"function"===typeof t?t:+t,a):e},a.padding=function(t){return arguments.length?(r=+t,a):r},Oa(a,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=ao,r=[1,1],i=null;function a(t,a){var l=e.call(this,t,a),c=l[0],f=function(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(c);if(La(f,o),f.parent.m=-f.z,Pa(f,s),i)Pa(c,u);else{var d=c,h=c,p=c;Pa(c,function(t){t.x<d.x&&(d=t),t.x>h.x&&(h=t),t.depth>p.depth&&(p=t)});var v=n(d,h)/2-d.x,g=r[0]/(h.x+n(h,d)/2+v),m=r[1]/(p.depth||1);Pa(c,function(t){t.x=(t.x+v)*g,t.y=t.depth*m})}return l}function o(t){var e=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+n(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+n(t._,i._));t.parent.A=function(t,e,r){if(e){for(var i,a=t,o=t,s=e,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,d=u.m;s=so(s),a=oo(a),s&&a;)u=oo(u),(o=so(o)).a=t,(i=s.z+f-a.z-l+n(s._,a._))>0&&(uo(lo(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=a.m,d+=u.m,c+=o.m;s&&!so(o)&&(o.t=s,o.m+=f-c),a&&!oo(u)&&(u.t=a,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=r[0],t.y=t.depth*r[1]}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(i=null==(r=t)?u:null,a):i?null:r},a.nodeSize=function(t){return arguments.length?(i=null==(r=t)?null:u,a):i?r:null},Oa(a,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=ao,r=[1,1],i=!1;function a(a,o){var s,u=e.call(this,a,o),l=u[0],c=0;La(l,function(e){var r=e.children;r&&r.length?(e.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(r),e.y=function(e){return 1+t.max(e,function(t){return t.y})}(r)):(e.x=s?c+=n(e,s):0,e.y=0,s=e)});var f=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(l),d=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(l),h=f.x-n(f,d)/2,p=d.x+n(d,f)/2;return La(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),u}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(i=null==(r=t),a):i?null:r},a.nodeSize=function(t){return arguments.length?(i=null!=(r=t),a):i?r:null},Oa(a,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),r=Math.round,i=[1,1],a=null,o=co,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,a=o(t),s=[],l=e.slice(),d=1/0,v="slice"===u?a.dx:"dice"===u?a.dy:"slice-dice"===u?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(c(l,a.dx*a.dy/t.value),s.area=0;(i=l.length)>0;)s.push(n=l[i-1]),s.area+=n.area,"squarify"!==u||(r=h(s,v))<=d?(l.pop(),d=r):(s.area-=s.pop().area,p(s,v,a,!1),v=Math.min(a.dx,a.dy),s.length=s.area=0,d=1/0);s.length&&(p(s,v,a,!0),s.length=s.area=0),e.forEach(f)}}function d(t){var e=t.children;if(e&&e.length){var n,r=o(t),i=e.slice(),a=[];for(c(i,r.dx*r.dy/t.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(p(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);e.forEach(d)}}function h(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*l/r,r/(e*a*l)):1/0}function p(t,e,n,i){var a,o=-1,s=t.length,u=n.x,l=n.y,c=e?r(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<s;)(a=t[o]).x=u,a.y=l,a.dy=c,u+=a.dx=Math.min(n.x+n.dx-u,c?r(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-u,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<s;)(a=t[o]).x=u,a.y=l,a.dx=c,l+=a.dy=Math.min(n.y+n.dy-l,c?r(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function v(t){var r=e||n(t),a=r[0];return a.x=a.y=0,a.value?(a.dx=i[0],a.dy=i[1]):a.dx=a.dy=0,e&&n.revalue(a),c([a],a.dx*a.dy/a.value),(e?d:f)(a),s&&(e=r),r}return v.size=function(t){return arguments.length?(i=t,v):i},v.padding=function(t){if(!arguments.length)return a;function e(e){return fo(e,t)}var n;return o=null==(a=t)?co:"function"===(n=typeof t)?function(e){var n=t.call(v,e,e.depth);return null==n?co(e):fo(e,"number"===typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,v},v.round=function(t){return arguments.length?(r=t?Math.round:Number,v):r!=Number},v.sticky=function(t){return arguments.length?(s=t,e=null,v):s},v.ratio=function(t){return arguments.length?(l=t,v):l},v.mode=function(t){return arguments.length?(u=t+"",v):u},Oa(v,n)},t.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},t.scale={};var yo={floor:P,ceil:P};function bo(e,n,r,i){var a=[],o=[],s=0,u=Math.min(e.length,n.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<=u;)a.push(r(e[s-1],e[s])),o.push(i(n[s-1],n[s]));return function(n){var r=t.bisect(e,n,1,u)-1;return o[r](a[r](n))}}function _o(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function xo(t,e){return go(t,mo(wo(t,e)[2])),go(t,mo(wo(t,e)[2])),t}function wo(t,e){null==e&&(e=10);var n=ho(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ao(e,n){return t.range.apply(t,wo(e,n))}function ko(e,n,r){var i=wo(e,n);if(r){var a=Pe.exec(r);if(a.shift(),"s"===a[8]){var o=t.formatPrefix(Math.max(y(i[0]),y(i[1])));return a[7]||(a[7]="."+To(o.scale(i[2]))),a[8]="f",r=t.format(a.join("")),function(t){return r(o.scale(t))+o.symbol}}a[7]||(a[7]="."+function(t,e){var n=To(e[2]);return t in Mo?Math.abs(n-To(Math.max(y(e[0]),y(e[1]))))+ +("e"!==t):n-2*("%"===t)}(a[8],i)),r=a.join("")}else r=",."+To(i[2])+"f";return t.format(r)}t.scale.linear=function(){return function t(e,n,r,i){var a,o;function s(){var t=Math.min(e.length,n.length)>2?bo:vo,s=i?_a:ba;return a=t(e,n,s,r),o=t(n,e,s,Ki),u}function u(t){return a(t)}return u.invert=function(t){return o(t)},u.domain=function(t){return arguments.length?(e=t.map(Number),s()):e},u.range=function(t){return arguments.length?(n=t,s()):n},u.rangeRound=function(t){return u.range(t).interpolate(da)},u.clamp=function(t){return arguments.length?(i=t,s()):i},u.interpolate=function(t){return arguments.length?(r=t,s()):r},u.ticks=function(t){return Ao(e,t)},u.tickFormat=function(t,n){return ko(e,t,n)},u.nice=function(t){return xo(e,t),s()},u.copy=function(){return t(e,n,r,i)},s()}([0,1],[0,1],Ki,!1)};var Mo={s:1,g:1,p:1,r:1,e:1};function To(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(n,r,i,a){function o(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(r)}function s(t){return i?Math.pow(r,t):-Math.pow(r,-t)}function u(t){return n(o(t))}return u.invert=function(t){return s(n.invert(t))},u.domain=function(t){return arguments.length?(i=t[0]>=0,n.domain((a=t.map(Number)).map(o)),u):a},u.base=function(t){return arguments.length?(r=+t,n.domain(a.map(o)),u):r},u.nice=function(){var t=go(a.map(o),i?Math:Co);return n.domain(t),a=t.map(s),u},u.ticks=function(){var t=ho(a),e=[],n=t[0],u=t[1],l=Math.floor(o(n)),c=Math.ceil(o(u)),f=r%1?2:r;if(isFinite(c-l)){if(i){for(;l<c;l++)for(var d=1;d<f;d++)e.push(s(l)*d);e.push(s(l))}else for(e.push(s(l));l++<c;)for(var d=f-1;d>0;d--)e.push(s(l)*d);for(l=0;e[l]<n;l++);for(c=e.length;e[c-1]>u;c--);e=e.slice(l,c)}return e},u.tickFormat=function(e,n){if(!arguments.length)return So;arguments.length<2?n=So:"function"!==typeof n&&(n=t.format(n));var i=Math.max(1,r*e/u.ticks().length);return function(t){var e=t/s(Math.round(o(t)));return e*r<r-.5&&(e*=r),e<=i?n(t):""}},u.copy=function(){return e(n.copy(),r,i,a)},_o(u,n)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var So=t.format(".0e"),Co={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Eo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,n,r){var i=Eo(n),a=Eo(1/n);function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),o):r},o.ticks=function(t){return Ao(r,t)},o.tickFormat=function(t,e){return ko(r,t,e)},o.nice=function(t){return o.domain(xo(r,t))},o.exponent=function(t){return arguments.length?(i=Eo(n=t),a=Eo(1/n),e.domain(r.map(i)),o):n},o.copy=function(){return t(e.copy(),n,r)},_o(o,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(n,r){var i,a,o;function s(t){return a[((i.get(t)||("range"===r.t?i.set(t,n.push(t)):NaN))-1)%a.length]}function u(e,r){return t.range(n.length).map(function(t){return e+r*t})}return s.domain=function(t){if(!arguments.length)return n;n=[],i=new _;for(var e,a=-1,o=t.length;++a<o;)i.has(e=t[a])||i.set(e,n.push(e));return s[r.t].apply(s,r.a)},s.range=function(t){return arguments.length?(a=t,o=0,r={t:"range",a:arguments},s):a},s.rangePoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],l=t[1],c=n.length<2?(i=(i+l)/2,0):(l-i)/(n.length-1+e);return a=u(i+c*e/2,c),o=0,r={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],l=t[1],c=n.length<2?(i=l=Math.round((i+l)/2),0):(l-i)/(n.length-1+e)|0;return a=u(i+Math.round(c*e/2+(l-i-(n.length-1+e)*c)/2),c),o=0,r={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=(f-c)/(n.length-e+2*i);return a=u(c+d*i,d),l&&a.reverse(),o=d*(1-e),r={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=Math.floor((f-c)/(n.length-e+2*i));return a=u(c+Math.round((f-c-(n.length-e)*d)/2),d),l&&a.reverse(),o=Math.round(d*(1-e)),r={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return o},s.rangeExtent=function(){return ho(r.a[0])},s.copy=function(){return e(n,r)},s.domain(n)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Oo)},t.scale.category20=function(){return t.scale.ordinal().range(Po)},t.scale.category20b=function(){return t.scale.ordinal().range(Lo)},t.scale.category20c=function(){return t.scale.ordinal().range(Ro)};var Oo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),Po=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),Lo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),Ro=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);function Do(){return 0}t.scale.quantile=function(){return function e(n,r){var i;function a(){var e=0,a=r.length;for(i=[];++e<a;)i[e-1]=t.quantile(n,e/a);return o}function o(e){if(!isNaN(e=+e))return r[t.bisect(i,e)]}return o.domain=function(t){return arguments.length?(n=t.map(h).filter(p).sort(d),a()):n},o.range=function(t){return arguments.length?(r=t,a()):r},o.quantiles=function(){return i},o.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},o.copy=function(){return e(n,r)},a()}([],[])},t.scale.quantize=function(){return function t(e,n,r){var i,a;function o(t){return r[Math.max(0,Math.min(a,Math.floor(i*(t-e))))]}function s(){return i=r.length/(n-e),a=r.length-1,o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]},o.range=function(t){return arguments.length?(r=t,s()):r},o.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]},o.copy=function(){return t(e,n,r)},s()}(0,1,[0,1])},t.scale.threshold=function(){return function e(n,r){function i(e){if(e<=e)return r[t.bisect(n,e)]}return i.domain=function(t){return arguments.length?(n=t,i):n},i.range=function(t){return arguments.length?(r=t,i):r},i.invertExtent=function(t){return t=r.indexOf(t),[n[t-1],n[t]]},i.copy=function(){return e(n,r)},i}([.5],[0,1])},t.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return Ao(e,t)},n.tickFormat=function(t,n){return ko(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},t.svg={},t.svg.arc=function(){var t=jo,e=No,n=Do,r=Fo,i=zo,a=Io,o=Bo;function s(){var s=Math.max(0,+t.apply(this,arguments)),l=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Ct,f=a.apply(this,arguments)-Ct,d=Math.abs(f-c),h=c>f?0:1;if(l<s&&(p=l,l=s,s=p),d>=St)return u(l,h)+(s?u(s,1-h):"")+"Z";var p,v,g,m,y,b,_,x,w,A,k,M,T=0,S=0,C=[];if((m=(+o.apply(this,arguments)||0)/2)&&(g=r===Fo?Math.sqrt(s*s+l*l):+r.apply(this,arguments),h||(S*=-1),l&&(S=Dt(g/l*Math.sin(m))),s&&(T=Dt(g/s*Math.sin(m)))),l){y=l*Math.cos(c+S),b=l*Math.sin(c+S),_=l*Math.cos(f-S),x=l*Math.sin(f-S);var E=Math.abs(f-c-2*S)<=Mt?0:1;if(S&&qo(y,b,_,x)===h^E){var O=(c+f)/2;y=l*Math.cos(O),b=l*Math.sin(O),_=x=null}}else y=b=0;if(s){w=s*Math.cos(f-T),A=s*Math.sin(f-T),k=s*Math.cos(c+T),M=s*Math.sin(c+T);var P=Math.abs(c-f+2*T)<=Mt?0:1;if(T&&qo(w,A,k,M)===1-h^P){var L=(c+f)/2;w=s*Math.cos(L),A=s*Math.sin(L),k=M=null}}else w=A=0;if(d>At&&(p=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){v=s<l^h?0:1;var R=p,D=p;if(d<Mt){var F=null==k?[w,A]:null==_?[y,b]:li([y,b],[k,M],[_,x],[w,A]),j=y-F[0],N=b-F[1],z=_-F[0],I=x-F[1],B=1/Math.sin(Math.acos((j*z+N*I)/(Math.sqrt(j*j+N*N)*Math.sqrt(z*z+I*I)))/2),q=Math.sqrt(F[0]*F[0]+F[1]*F[1]);D=Math.min(p,(s-q)/(B-1)),R=Math.min(p,(l-q)/(B+1))}if(null!=_){var U=Uo(null==k?[w,A]:[k,M],[y,b],l,R,h),H=Uo([_,x],[w,A],l,R,h);p===R?C.push("M",U[0],"A",R,",",R," 0 0,",v," ",U[1],"A",l,",",l," 0 ",1-h^qo(U[1][0],U[1][1],H[1][0],H[1][1]),",",h," ",H[1],"A",R,",",R," 0 0,",v," ",H[0]):C.push("M",U[0],"A",R,",",R," 0 1,",v," ",H[0])}else C.push("M",y,",",b);if(null!=k){var W=Uo([y,b],[k,M],s,-D,h),G=Uo([w,A],null==_?[y,b]:[_,x],s,-D,h);p===D?C.push("L",G[0],"A",D,",",D," 0 0,",v," ",G[1],"A",s,",",s," 0 ",h^qo(G[1][0],G[1][1],W[1][0],W[1][1]),",",1-h," ",W[1],"A",D,",",D," 0 0,",v," ",W[0]):C.push("L",G[0],"A",D,",",D," 0 0,",v," ",W[0])}else C.push("L",w,",",A)}else C.push("M",y,",",b),null!=_&&C.push("A",l,",",l," 0 ",E,",",h," ",_,",",x),C.push("L",w,",",A),null!=k&&C.push("A",s,",",s," 0 ",P,",",1-h," ",k,",",M);return C.push("Z"),C.join("")}function u(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=ge(e),s):t},s.outerRadius=function(t){return arguments.length?(e=ge(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=ge(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==Fo?Fo:ge(t),s):r},s.startAngle=function(t){return arguments.length?(i=ge(t),s):i},s.endAngle=function(t){return arguments.length?(a=ge(t),s):a},s.padAngle=function(t){return arguments.length?(o=ge(t),s):o},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ct;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Fo="auto";function jo(t){return t.innerRadius}function No(t){return t.outerRadius}function zo(t){return t.startAngle}function Io(t){return t.endAngle}function Bo(t){return t&&t.padAngle}function qo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Uo(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=t[0]+u,f=t[1]+l,d=e[0]+u,h=e[1]+l,p=(c+d)/2,v=(f+h)/2,g=d-c,m=h-f,y=g*g+m*m,b=n-r,_=c*h-d*f,x=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-_*_)),w=(_*m-g*x)/y,A=(-_*g-m*x)/y,k=(_*m+g*x)/y,M=(-_*g+m*x)/y,T=w-p,S=A-v,C=k-p,E=M-v;return T*T+S*S>C*C+E*E&&(w=k,A=M),[[w-u,A-l],[w*n/b,A*n/b]]}function Ho(t){var e=ri,n=ii,r=Xn,i=Go,a=i.key,o=.7;function s(a){var s,u=[],l=[],c=-1,f=a.length,d=ge(e),h=ge(n);function p(){u.push("M",i(t(l),o))}for(;++c<f;)r.call(this,s=a[c],c)?l.push([+d.call(this,s,c),+h.call(this,s,c)]):l.length&&(p(),l=[]);return l.length&&p(),u.length?u.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(a="function"===typeof t?i=t:(i=Wo.get(t)||Go).key,s):a},s.tension=function(t){return arguments.length?(o=t,s):o},s}t.svg.line=function(){return Ho(P)};var Wo=t.map({linear:Go,"linear-closed":Vo,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Yo,"step-after":Zo,basis:Jo,"basis-open":function(t){if(t.length<4)return Go(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(Ko(es,a)+","+Ko(es,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),ns(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);for(e=[Ko(es,o),",",Ko(es,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),ns(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*u);return Jo(t)},cardinal:function(t,e){return t.length<3?Go(t):t[0]+Xo(t,$o(t,e))},"cardinal-open":function(t,e){return t.length<4?Go(t):t[1]+Xo(t.slice(1,-1),$o(t,e))},"cardinal-closed":function(t,e){return t.length<3?Vo(t):t[0]+Xo((t.push(t[0]),t),$o([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Go(t):t[0]+Xo(t,function(t){for(var e,n,r,i,a=[],o=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=rs(i,a);++e<n;)r[e]=(o+(o=rs(i=a,a=t[e+1])))/2;return r[e]=o,r}(t),s=-1,u=t.length-1;++s<u;)e=rs(t[s],t[s+1]),y(e)<At?o[s]=o[s+1]=0:(n=o[s]/e,r=o[s+1]/e,(i=n*n+r*r)>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}});function Go(t){return t.length>1?t.join("L"):t+"Z"}function Vo(t){return t.join("L")+"Z"}function Yo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Zo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Xo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Go(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],u=2),e.length>1){s=e[1],a=t[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<e.length;l++,u++)a=t[u],s=e[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=t[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function $o(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Jo(t){if(t.length<3)return Go(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",Ko(es,o),",",Ko(es,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),ns(u,o,s);return t.pop(),u.push("L",r),u.join("")}function Ko(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Wo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Qo=[0,2/3,1/3,0],ts=[0,1/3,2/3,0],es=[0,1/6,2/3,1/6];function ns(t,e,n){t.push("C",Ko(Qo,e),",",Ko(Qo,n),",",Ko(ts,e),",",Ko(ts,n),",",Ko(es,e),",",Ko(es,n))}function rs(t,e){return(e[1]-t[1])/(e[0]-t[0])}function is(t){for(var e,n,r,i=-1,a=t.length;++i<a;)e=t[i],n=e[0],r=e[1]-Ct,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function as(t){var e=ri,n=ri,r=0,i=ii,a=Xn,o=Go,s=o.key,u=o,l="L",c=.7;function f(s){var f,d,h,p=[],v=[],g=[],m=-1,y=s.length,b=ge(e),_=ge(r),x=e===n?function(){return d}:ge(n),w=r===i?function(){return h}:ge(i);function A(){p.push("M",o(t(g),c),l,u(t(v.reverse()),c),"Z")}for(;++m<y;)a.call(this,f=s[m],m)?(v.push([d=+b.call(this,f,m),h=+_.call(this,f,m)]),g.push([+x.call(this,f,m),+w.call(this,f,m)])):v.length&&(A(),v=[],g=[]);return v.length&&A(),p.length?p.join(""):null}return f.x=function(t){return arguments.length?(e=n=t,f):n},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(n=t,f):n},f.y=function(t){return arguments.length?(r=i=t,f):i},f.y0=function(t){return arguments.length?(r=t,f):r},f.y1=function(t){return arguments.length?(i=t,f):i},f.defined=function(t){return arguments.length?(a=t,f):a},f.interpolate=function(t){return arguments.length?(s="function"===typeof t?o=t:(o=Wo.get(t)||Go).key,u=o.reverse||o,l=o.closed?"M":"L",f):s},f.tension=function(t){return arguments.length?(c=t,f):c},f}function os(t){return t.radius}function ss(t){return[t.x,t.y]}function us(){return 64}function ls(){return"circle"}function cs(t){var e=Math.sqrt(t/Mt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Ho(is);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Yo.reverse=Zo,Zo.reverse=Yo,t.svg.area=function(){return as(P)},t.svg.area.radial=function(){var t=as(is);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=Hr,e=Wr,n=os,r=zo,i=Io;function a(n,r){var i,a,l=o(this,t,n,r),c=o(this,e,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+(a=c,(i=l).a0==a.a0&&i.a1==a.a1?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),u=n.call(t,s,o),l=r.call(t,s,o)-Ct,c=i.call(t,s,o)-Ct;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Mt)+",1 "+e}function u(t,e,n,r){return"Q 0,0 "+r}return a.radius=function(t){return arguments.length?(n=ge(t),a):n},a.source=function(e){return arguments.length?(t=ge(e),a):t},a.target=function(t){return arguments.length?(e=ge(t),a):e},a.startAngle=function(t){return arguments.length?(r=ge(t),a):r},a.endAngle=function(t){return arguments.length?(i=ge(t),a):i},a},t.svg.diagonal=function(){var t=Hr,e=Wr,n=ss;function r(r,i){var a=t.call(this,r,i),o=e.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(e){return arguments.length?(t=ge(e),r):t},r.target=function(t){return arguments.length?(e=ge(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=ss,r=e.projection;return e.projection=function(t){return arguments.length?r(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Ct;return[n*Math.cos(r),n*Math.sin(r)]}}(n=t)):n},e},t.svg.symbol=function(){var t=ls,e=us;function n(n,r){return(fs.get(t.call(this,n,r))||cs)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=ge(e),n):t},n.size=function(t){return arguments.length?(e=ge(t),n):e},n};var fs=t.map({circle:cs,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*hs)),n=e*hs;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ds),n=e*ds/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ds),n=e*ds/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});t.svg.symbolTypes=fs.keys();var ds=Math.sqrt(3),hs=Math.tan(30*Et);Y.transition=function(t){for(var e,n,r=ms||++_s,i=As(t),a=[],o=ys||{time:Date.now(),ease:sa,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&ks(n,c,i,r,o),e.push(n)}return gs(a,i,r)},Y.interrupt=function(t){return this.each(null==t?ps:vs(As(t)))};var ps=vs(As());function vs(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function gs(t,e,n){return U(t,bs),t.namespace=e,t.id=n,t}var ms,ys,bs=[],_s=0;function xs(t,e,n,r){var i=t.id,a=t.namespace;return ct(t,"function"===typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function ws(t){return null==t&&(t=""),function(){this.textContent=t}}function As(t){return null==t?"__transition__":"__transition_"+t+"__"}function ks(t,e,n,r,i){var a,o,s,u,l,c=t[n]||(t[n]={active:0,count:0}),f=c[r];function d(n){var i=c.active,d=c[i];for(var p in d&&(d.timer.c=null,d.timer.t=NaN,--c.count,delete c[i],d.event&&d.event.interrupt.call(t,t.__data__,d.index)),c)if(+p<r){var v=c[p];v.timer.c=null,v.timer.t=NaN,--c.count,delete c[p]}o.c=h,ke(function(){return o.c&&h(n||1)&&(o.c=null,o.t=NaN),1},0,a),c.active=r,f.event&&f.event.start.call(t,t.__data__,e),l=[],f.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&l.push(r)}),u=f.ease,s=f.duration}function h(i){for(var a=i/s,o=u(a),d=l.length;d>0;)l[--d].call(t,o);if(a>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}f||(a=i.time,o=ke(function(t){var e=f.delay;if(o.t=e+a,e<=t)return d(t-e);o.c=d},0,a),f=c[r]={tween:new _,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}bs.call=Y.call,bs.empty=Y.empty,bs.node=Y.node,bs.size=Y.size,t.transition=function(e,n){return e&&e.transition?ms?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=bs,bs.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=Z(t);for(var s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),ks(n,c,a,i,r[a][i]),e.push(n)):e.push(null)}return gs(o,a,i)},bs.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,u=[];t=X(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],d=-1,h=f.length;++d<h;)if(r=f[d]){a=r[s][o],n=t.call(r,r.__data__,d,l),u.push(e=[]);for(var p=-1,v=n.length;++p<v;)(i=n[p])&&ks(i,p,s,o,a),e.push(i)}return gs(u,s,o)},bs.filter=function(t){var e,n,r=[];"function"!==typeof t&&(t=lt(t));for(var i=0,a=this.length;i<a;i++){r.push(e=[]);for(var o=this[i],s=0,u=o.length;s<u;s++)(n=o[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return gs(r,this.namespace,this.id)},bs.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):ct(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},bs.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var r="transform"==e?ya:Ki,i=t.ns.qualify(e);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}return xs(this,"attr."+e,n,i.local?function(t){return null==t?o:(t+="",function(){var e,n=this.getAttributeNS(i.space,i.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(t){return null==t?a:(t+="",function(){var e,n=this.getAttribute(i);return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})})},bs.attrTween=function(e,n){var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?function(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},bs.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}return xs(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Ki(i,e),function(e){this.style.setProperty(t,r(e),n)})})})},bs.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var a=e.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}})},bs.text=function(t){return xs(this,"text",t,ws)},bs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},bs.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!==typeof e&&(e=t.ease.apply(t,arguments)),ct(this,function(t){t[r][n].ease=e}))},bs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:ct(this,"function"===typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},bs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:ct(this,"function"===typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},bs.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var a=ys,o=ms;try{ms=r,ct(this,function(t,n,a){ys=t[i][r],e.call(t,t.__data__,n,a)})}finally{ys=a,ms=o}}else ct(this,function(a){var o=a[i][r];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},bs.transition=function(){for(var t,e,n,r=this.id,i=++_s,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(t=[]);for(var l=this[s],c=0,f=l.length;c<f;c++)(e=l[c])&&(n=e[a][r],ks(e,c,a,i,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),t.push(e)}return gs(o,a,i)},t.svg.axis=function(){var e,n=t.scale.linear(),i=Ms,a=6,o=6,s=3,u=[10],l=null;function c(r){r.each(function(){var r,c=t.select(this),f=this.__chart__||n,d=this.__chart__=n.copy(),h=null==l?d.ticks?d.ticks.apply(d,u):d.domain():l,p=null==e?d.tickFormat?d.tickFormat.apply(d,u):P:e,v=c.selectAll(".tick").data(h,d),g=v.enter().insert("g",".domain").attr("class","tick").style("opacity",At),m=t.transition(v.exit()).style("opacity",At).remove(),y=t.transition(v.order()).style("opacity",1),b=Math.max(a,0)+s,_=po(d),x=c.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),t.transition(x));g.append("line"),g.append("text");var A,k,M,T,S=g.select("line"),C=y.select("line"),E=v.select("text").text(p),O=g.select("text"),L=y.select("text"),R="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(r=Ss,A="x",M="y",k="x2",T="y2",E.attr("dy",R<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+R*o+"V0H"+_[1]+"V"+R*o)):(r=Cs,A="y",M="x",k="y2",T="x2",E.attr("dy",".32em").style("text-anchor",R<0?"end":"start"),w.attr("d","M"+R*o+","+_[0]+"H0V"+_[1]+"H"+R*o)),S.attr(T,R*a),O.attr(M,R*b),C.attr(k,0).attr(T,R*a),L.attr(A,0).attr(M,R*b),d.rangeBand){var D=d,F=D.rangeBand()/2;f=d=function(t){return D(t)+F}}else f.rangeBand?f=d:m.call(r,d,f);g.call(r,f,d),y.call(r,d,d)})}return c.scale=function(t){return arguments.length?(n=t,c):n},c.orient=function(t){return arguments.length?(i=t in Ts?t+"":Ms,c):i},c.ticks=function(){return arguments.length?(u=r(arguments),c):u},c.tickValues=function(t){return arguments.length?(l=t,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(t){var e=arguments.length;return e?(a=+t,o=+arguments[e-1],c):a},c.innerTickSize=function(t){return arguments.length?(a=+t,c):a},c.outerTickSize=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(s=+t,c):s},c.tickSubdivide=function(){return arguments.length&&c},c};var Ms="bottom",Ts={top:1,right:1,bottom:1,left:1};function Ss(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Cs(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}t.svg.brush=function(){var e,n,r=B(d,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],u=[0,0],l=!0,c=!0,f=Os[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(f,P);r.exit().remove(),r.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Es[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",d.empty()?"none":null);var o,s=t.transition(e),u=t.transition(n);i&&(o=po(i),u.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=po(a),u.attr("y",o[0]).attr("height",o[1]-o[0]),v(s)),h(s)})}function h(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)]+","+u[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function v(t){t.select(".extent").attr("y",u[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1]-u[0])}function g(){var f,g,m=this,y=t.select(t.event.target),b=r.of(m,arguments),_=t.select(m),x=y.datum(),w=!/^(n|s)$/.test(x)&&i,A=!/^(e|w)$/.test(x)&&a,k=y.classed("extent"),M=bt(m),T=t.mouse(m),S=t.select(o(m)).on("keydown.brush",function(){32==t.event.keyCode&&(k||(f=null,T[0]-=s[1],T[1]-=u[1],k=2),z())}).on("keyup.brush",function(){32==t.event.keyCode&&2==k&&(T[0]+=s[1],T[1]+=u[1],k=0,z())});if(t.event.changedTouches?S.on("touchmove.brush",O).on("touchend.brush",L):S.on("mousemove.brush",O).on("mouseup.brush",L),_.interrupt().selectAll("*").interrupt(),k)T[0]=s[0]-T[0],T[1]=u[0]-T[1];else if(x){var C=+/w$/.test(x),E=+/^n/.test(x);g=[s[1-C]-T[0],u[1-E]-T[1]],T[0]=s[C],T[1]=u[E]}else t.event.altKey&&(f=T.slice());function O(){var e=t.mouse(m),n=!1;g&&(e[0]+=g[0],e[1]+=g[1]),k||(t.event.altKey?(f||(f=[(s[0]+s[1])/2,(u[0]+u[1])/2]),T[0]=s[+(e[0]<f[0])],T[1]=u[+(e[1]<f[1])]):f=null),w&&P(e,i,0)&&(p(_),n=!0),A&&P(e,a,1)&&(v(_),n=!0),n&&(h(_),b({type:"brush",mode:k?"move":"resize"}))}function P(t,r,i){var a,o,d=po(r),h=d[0],p=d[1],v=T[i],g=i?u:s,m=g[1]-g[0];if(k&&(h-=v,p-=m+v),a=(i?c:l)?Math.max(h,Math.min(p,t[i])):t[i],k?o=(a+=v)+m:(f&&(v=Math.max(h,Math.min(p,2*f[i]-a))),v<a?(o=a,a=v):o=v),g[0]!=a||g[1]!=o)return i?n=null:e=null,g[0]=a,g[1]=o,!0}function L(){O(),_.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),t.select("body").style("cursor",null),S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),b({type:"brushend"})}_.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),O()}return d.event=function(i){i.each(function(){var i=r.of(this,arguments),a={x:s,y:u,i:e,j:n},o=this.__chart__||a;this.__chart__=a,ms?t.select(this).transition().each("start.brush",function(){e=o.i,n=o.j,s=o.x,u=o.y,i({type:"brushstart"})}).tween("brush:brush",function(){var t=Qi(s,a.x),r=Qi(u,a.y);return e=n=null,function(e){s=a.x=t(e),u=a.y=r(e),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=a.i,n=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},d.x=function(t){return arguments.length?(f=Os[!(i=t)<<1|!a],d):i},d.y=function(t){return arguments.length?(f=Os[!i<<1|!(a=t)],d):a},d.clamp=function(t){return arguments.length?(i&&a?(l=!!t[0],c=!!t[1]):i?l=!!t:a&&(c=!!t),d):i&&a?[l,c]:i?l:a?c:null},d.extent=function(t){var r,o,l,c,f;return arguments.length?(i&&(r=t[0],o=t[1],a&&(r=r[0],o=o[0]),e=[r,o],i.invert&&(r=i(r),o=i(o)),o<r&&(f=r,r=o,o=f),r==s[0]&&o==s[1]||(s=[r,o])),a&&(l=t[0],c=t[1],i&&(l=l[1],c=c[1]),n=[l,c],a.invert&&(l=a(l),c=a(c)),c<l&&(f=l,l=c,c=f),l==u[0]&&c==u[1]||(u=[l,c])),d):(i&&(e?(r=e[0],o=e[1]):(r=s[0],o=s[1],i.invert&&(r=i.invert(r),o=i.invert(o)),o<r&&(f=r,r=o,o=f))),a&&(n?(l=n[0],c=n[1]):(l=u[0],c=u[1],a.invert&&(l=a.invert(l),c=a.invert(c)),c<l&&(f=l,l=c,c=f))),i&&a?[[r,l],[o,c]]:i?[r,o]:a&&[l,c])},d.clear=function(){return d.empty()||(s=[0,0],u=[0,0],e=n=null),d},d.empty=function(){return!!i&&s[0]==s[1]||!!a&&u[0]==u[1]},t.rebind(d,r,"on")};var Es={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Os=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ps=De.format=cn.timeFormat,Ls=Ps.utc,Rs=Ls("%Y-%m-%dT%H:%M:%S.%LZ");function Ds(t){return t.toISOString()}function Fs(e,n,r){function i(t){return e(t)}function a(e,r){var i=e[1]-e[0],a=i/r,o=t.bisect(Ns,a);return o==Ns.length?[n.year,wo(e.map(function(t){return t/31536e6}),r)[2]]:o?n[a/Ns[o-1]<Ns[o]/a?o-1:o]:[Bs,wo(e,r)[2]]}return i.invert=function(t){return js(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(js)},i.nice=function(t,e){var n=i.domain(),r=ho(n),o=null==t?a(r,10):"number"===typeof t&&a(r,t);function s(n){return!isNaN(n)&&!t.range(n,js(+n+1),e).length}return o&&(t=o[0],e=o[1]),i.domain(go(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=js(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=js(+e+1);return e}}:t))},i.ticks=function(t,e){var n=ho(i.domain()),r=null==t?a(n,10):"number"===typeof t?a(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],js(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return r},i.copy=function(){return Fs(e.copy(),n,r)},_o(i,e)}function js(t){return new Date(t)}Ps.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ds:Rs,Ds.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ds.toString=Rs.toString,De.second=ze(function(t){return new Fe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),De.seconds=De.second.range,De.seconds.utc=De.second.utc.range,De.minute=ze(function(t){return new Fe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),De.minutes=De.minute.range,De.minutes.utc=De.minute.utc.range,De.hour=ze(function(t){var e=t.getTimezoneOffset()/60;return new Fe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),De.hours=De.hour.range,De.hours.utc=De.hour.utc.range,De.month=ze(function(t){return(t=De.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),De.months=De.month.range,De.months.utc=De.month.utc.range;var Ns=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],zs=[[De.second,1],[De.second,5],[De.second,15],[De.second,30],[De.minute,1],[De.minute,5],[De.minute,15],[De.minute,30],[De.hour,1],[De.hour,3],[De.hour,6],[De.hour,12],[De.day,1],[De.day,2],[De.week,1],[De.month,1],[De.month,3],[De.year,1]],Is=Ps.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Xn]]),Bs={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map(js)},floor:P,ceil:P};zs.year=De.year,De.scale=function(){return Fs(t.scale.linear(),zs,Is)};var qs=zs.map(function(t){return[t[0].utc,t[1]]}),Us=Ls.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Xn]]);function Hs(t){return JSON.parse(t.responseText)}function Ws(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}qs.year=De.year.utc,De.scale.utc=function(){return Fs(t.scale.linear(),qs,Us)},t.text=me(function(t){return t.responseText}),t.json=function(t,e){return ye(t,"application/json",Hs,e)},t.html=function(t,e){return ye(t,"text/html",Ws,e)},t.xml=me(function(t){return t.responseXML}),"object"===typeof e&&e.exports?e.exports=t:this.d3=t}()},{}],8:[function(t,n,r){(function(e,i){!function(t,e){"object"===typeof r&&"undefined"!==typeof n?n.exports=e():t.ES6Promise=e()}(this,function(){"use strict";function n(t){return"function"===typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=0,o=void 0,s=void 0,u=function(t,e){v[a]=t,v[a+1]=e,2===(a+=2)&&(s?s(g):m())},l="undefined"!==typeof window?window:void 0,c=l||{},f=c.MutationObserver||c.WebKitMutationObserver,d="undefined"===typeof self&&"undefined"!==typeof e&&"[object process]"==={}.toString.call(e),h="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(g,1)}}var v=new Array(1e3);function g(){for(var t=0;t<a;t+=2){var e=v[t],n=v[t+1];e(n),v[t]=void 0,v[t+1]=void 0}a=0}var m=void 0;function y(t,e){var n=arguments,r=this,i=new this.constructor(x);void 0===i[_]&&z(i);var a=r._state;return a?function(){var t=n[a-1];u(function(){return j(a,i,t,r._result)})}():L(r,i,t,e),i}function b(t){if(t&&"object"===typeof t&&t.constructor===this)return t;var e=new this(x);return C(e,t),e}m=d?function(){return e.nextTick(g)}:f?function(){var t=0,e=new f(g),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():h?function(){var t=new MessageChannel;return t.port1.onmessage=g,function(){return t.port2.postMessage(0)}}():void 0===l&&"function"===typeof t?function(){try{var e=t,n=e("vertx");return o=n.runOnLoop||n.runOnContext,function(){o(g)}}catch(r){return p()}}():p();var _=Math.random().toString(36).substring(16);function x(){}var w=void 0,A=1,k=2,M=new D;function T(t){try{return t.then}catch(e){return M.error=e,M}}function S(t,e,r){e.constructor===t.constructor&&r===y&&e.constructor.resolve===b?function(t,e){e._state===A?O(t,e._result):e._state===k?P(t,e._result):L(e,void 0,function(e){return C(t,e)},function(e){return P(t,e)})}(t,e):r===M?P(t,M.error):void 0===r?O(t,e):n(r)?function(t,e,n){u(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}(n,e,function(n){r||(r=!0,e!==n?C(t,n):O(t,n))},function(e){r||(r=!0,P(t,e))},t._label);!r&&i&&(r=!0,P(t,i))},t)}(t,e,r):O(t,e)}function C(t,e){var n;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):"function"===typeof(n=e)||"object"===typeof n&&null!==n?S(t,e,T(e)):O(t,e)}function E(t){t._onerror&&t._onerror(t._result),R(t)}function O(t,e){t._state===w&&(t._result=e,t._state=A,0!==t._subscribers.length&&u(R,t))}function P(t,e){t._state===w&&(t._state=k,t._result=e,u(E,t))}function L(t,e,n,r){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+A]=n,i[a+k]=r,0===a&&t._state&&u(R,t)}function R(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,a=t._result,o=0;o<e.length;o+=3)r=e[o],i=e[o+n],r?j(n,r,i,a):i(a);t._subscribers.length=0}}function D(){this.error=null}var F=new D;function j(t,e,r,i){var a=n(r),o=void 0,s=void 0,u=void 0,l=void 0;if(a){if((o=function(t,e){try{return t(e)}catch(n){return F.error=n,F}}(r,i))===F?(l=!0,s=o.error,o=null):u=!0,e===o)return void P(e,new TypeError("A promises callback cannot return that same promise."))}else o=i,u=!0;e._state!==w||(a&&u?C(e,o):l?P(e,s):t===A?O(e,o):t===k&&P(e,o))}var N=0;function z(t){t[_]=N++,t._state=void 0,t._result=void 0,t._subscribers=[]}function I(t,e){this._instanceConstructor=t,this.promise=new t(x),this.promise[_]||z(this.promise),r(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}function B(t){this[_]=N++,this._result=this._state=void 0,this._subscribers=[],x!==t&&("function"!==typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof B?function(t,e){try{e(function(e){C(t,e)},function(e){P(t,e)})}catch(n){P(t,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function q(){var t=void 0;if("undefined"!==typeof i)t=i;else if("undefined"!==typeof self)t=self;else try{t=Function("return this")()}catch(r){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(r){}if("[object Promise]"===n&&!e.cast)return}t.Promise=B}return I.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===w&&n<t;n++)this._eachEntry(e[n],n)},I.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=T(t);if(i===y&&t._state!==w)this._settledAt(t._state,e,t._result);else if("function"!==typeof i)this._remaining--,this._result[e]=t;else if(n===B){var a=new n(x);S(a,t,i),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},I.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===w&&(this._remaining--,t===k?P(r,n):this._result[e]=n),0===this._remaining&&O(r,this._result)},I.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(k,e,t)})},B.all=function(t){return new I(this,t).promise},B.race=function(t){var e=this;return r(t)?new e(function(n,r){for(var i=t.length,a=0;a<i;a++)e.resolve(t[a]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},B.resolve=b,B.reject=function(t){var e=new this(x);return P(e,t),e},B._setScheduler=function(t){s=t},B._setAsap=function(t){u=t},B._asap=u,B.prototype={constructor:B,then:y,catch:function(t){return this.then(null,t)}},q(),B.polyfill=q,B.Promise=B,B})}).call(this,t("_process"),"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:24}],9:[function(t,e,n){"use strict";var r=t("is-string-blank");e.exports=function(t){var e=typeof t;if("string"===e){var n=t;if(0===(t=+t)&&r(n))return!1}else if("number"!==e)return!1;return t-t<1}},{"is-string-blank":14}],10:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,f=r*s,d=i*o,h=i*s,p=i*u,v=a*o,g=a*s,m=a*u;return t[0]=1-f-p,t[1]=c+m,t[2]=d-g,t[3]=0,t[4]=c-m,t[5]=1-l-p,t[6]=h+v,t[7]=0,t[8]=d+g,t[9]=h-v,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],11:[function(t,n,r){(function(e){"use strict";var r,i=t("is-browser");r="function"===typeof e.matchMedia?!e.matchMedia("(hover: none)").matches:i,n.exports=r}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"is-browser":13}],12:[function(t,e,n){"use strict";var r=t("is-browser");e.exports=r&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(n){t=!1}return t}()},{"is-browser":13}],13:[function(t,e,n){e.exports=!0},{}],14:[function(t,e,n){"use strict";e.exports=function(t){for(var e,n=t.length,r=0;r<n;r++)if(((e=t.charCodeAt(r))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},{}],15:[function(t,e,n){var r={left:0,top:0};e.exports=function(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var i,a=t.clientX||0,o=t.clientY||0,s=(i=e)===window||i===document||i===document.body?r:i.getBoundingClientRect();return n[0]=a-s.left,n[1]=o-s.top,n}},{}],16:[function(t,e,n){var r,i=t("./lib/build-log"),a=t("./lib/epsilon"),o=t("./lib/intersecter"),s=t("./lib/segment-chainer"),u=t("./lib/segment-selector"),l=t("./lib/geojson"),c=!1,f=a();function d(t,e,n){var i=r.segments(t),a=r.segments(e),o=r.combine(i,a),s=n(o);return r.polygon(s)}r={buildLog:function(t){return!0===t?c=i():!1===t&&(c=!1),!1!==c&&c.list},epsilon:function(t){return f.epsilon(t)},segments:function(t){var e=o(!0,f,c);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){var n=o(!1,f,c);return{combined:n.calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:u.union(t.combined,c),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:u.intersect(t.combined,c),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:u.difference(t.combined,c),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:u.differenceRev(t.combined,c),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:u.xor(t.combined,c),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:s(t.segments,f,c),inverted:t.inverted}},polygonFromGeoJSON:function(t){return l.toPolygon(r,t)},polygonToGeoJSON:function(t){return l.fromPolygon(r,f,t)},union:function(t,e){return d(t,e,r.selectUnion)},intersect:function(t,e){return d(t,e,r.selectIntersect)},difference:function(t,e){return d(t,e,r.selectDifference)},differenceRev:function(t,e){return d(t,e,r.selectDifferenceRev)},xor:function(t,e){return d(t,e,r.selectXor)}},"object"===typeof window&&(window.PolyBool=r),e.exports=r},{"./lib/build-log":17,"./lib/epsilon":18,"./lib/geojson":19,"./lib/intersecter":20,"./lib/segment-chainer":22,"./lib/segment-selector":23}],17:[function(t,e,n){e.exports=function(){var t,e=0,n=!1;function r(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return r("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return r("div_seg",{seg:t,pt:e}),r("chop",{seg:t,pt:e})},statusRemove:function(t){return r("pop_seg",{seg:t})},segmentUpdate:function(t){return r("seg_update",{seg:t})},segmentNew:function(t,e){return r("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return r("rem_seg",{seg:t})},tempStatus:function(t,e,n){return r("temp_status",{seg:t,above:e,below:n})},rewind:function(t){return r("rewind",{seg:t})},status:function(t,e,n){return r("status",{seg:t,above:e,below:n})},vert:function(e){return e===n?t:(n=e,r("vert",{x:e}))},log:function(t){return"string"!==typeof t&&(t=JSON.stringify(t,!1,"  ")),r("log",{txt:t})},reset:function(){return r("reset")},selected:function(t){return r("selected",{segs:t})},chainStart:function(t){return r("chain_start",{seg:t})},chainRemoveHead:function(t,e){return r("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return r("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return r("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return r("chain_match",{index:t})},chainClose:function(t){return r("chain_close",{index:t})},chainAddHead:function(t,e){return r("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return r("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return r("chain_con",{index1:t,index2:e})},chainReverse:function(t){return r("chain_rev",{index:t})},chainJoin:function(t,e){return r("chain_join",{index1:t,index2:e})},done:function(){return r("done")}}}},{}],18:[function(t,e,n){e.exports=function(t){"number"!==typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"===typeof e&&(t=e),t},pointAboveOrOnLine:function(e,n,r){var i=n[0],a=n[1],o=r[0],s=r[1],u=e[0],l=e[1];return(o-i)*(l-a)-(s-a)*(u-i)>=-t},pointBetween:function(e,n,r){var i=e[1]-n[1],a=r[0]-n[0],o=e[0]-n[0],s=r[1]-n[1],u=o*a+i*s;if(u<t)return!1;var l=a*a+s*s;return!(u-l>-t)},pointsSameX:function(e,n){return Math.abs(e[0]-n[0])<t},pointsSameY:function(e,n){return Math.abs(e[1]-n[1])<t},pointsSame:function(t,n){return e.pointsSameX(t,n)&&e.pointsSameY(t,n)},pointsCompare:function(t,n){return e.pointsSameX(t,n)?e.pointsSameY(t,n)?0:t[1]<n[1]?-1:1:t[0]<n[0]?-1:1},pointsCollinear:function(e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=n[0]-r[0],s=n[1]-r[1];return Math.abs(i*s-o*a)<t},linesIntersect:function(e,n,r,i){var a=n[0]-e[0],o=n[1]-e[1],s=i[0]-r[0],u=i[1]-r[1],l=a*u-o*s;if(Math.abs(l)<t)return!1;var c=e[0]-r[0],f=e[1]-r[1],d=(s*f-u*c)/l,h=(a*f-o*c)/l,p={alongA:0,alongB:0,pt:[e[0]+d*a,e[1]+d*o]};return p.alongA=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,p.alongB=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,p},pointInsideRegion:function(e,n){for(var r=e[0],i=e[1],a=n[n.length-1][0],o=n[n.length-1][1],s=!1,u=0;u<n.length;u++){var l=n[u][0],c=n[u][1];c-i>t!=o-i>t&&(a-l)*(i-c)/(o-c)+l-r>t&&(s=!s),a=l,o=c}return s}};return e}},{}],19:[function(t,e,n){var r={toPolygon:function(t,e){function n(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function n(e){var n=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[n]})}for(var r=n(e[0]),i=1;i<e.length;i++)r=t.selectDifference(t.combine(r,n(e[i])));return r}if("Polygon"===e.type)return t.polygon(n(e.coordinates));if("MultiPolygon"===e.type){for(var r=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)r=t.selectUnion(t.combine(r,n(e.coordinates[i])));return t.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,n){function r(t,n){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],n)}function i(t){return{region:t,children:[]}}n=t.polygon(t.segments(n));var a=i(null);function o(t,e){for(var n=0;n<t.children.length;n++){var a=t.children[n];if(r(e,a.region))return void o(a,e)}for(var s=i(e),n=0;n<t.children.length;n++){var a=t.children[n];r(a.region,e)&&(s.children.push(a),t.children.splice(n,1),n--)}t.children.push(s)}for(var s=0;s<n.regions.length;s++){var u=n.regions[s];u.length<3||o(a,u)}function l(t,e){for(var n=0,r=t[t.length-1][0],i=t[t.length-1][1],a=[],o=0;o<t.length;o++){var s=t[o][0],u=t[o][1];a.push([s,u]),n+=u*r-s*i,r=s,i=u}var l=n<0;return l!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var c=[];function f(t){var e=[l(t.region,!1)];c.push(e);for(var n=0;n<t.children.length;n++)e.push(d(t.children[n]))}function d(t){for(var e=0;e<t.children.length;e++)f(t.children[e]);return l(t.region,!0)}for(var s=0;s<a.children.length;s++)f(a.children[s]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};e.exports=r},{}],20:[function(t,e,n){var r=t("./linked-list");e.exports=function(t,e,n){function i(t,e,r){return{id:n?n.segmentId():-1,start:t,end:e,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var a=r.create();function o(t,n){a.insertBefore(t,function(r){var i=function(t,n,r,i,a,o){var s=e.pointsCompare(n,a);return 0!==s?s:e.pointsSame(r,o)?0:t!==i?t?1:-1:e.pointAboveOrOnLine(r,i?a:o,i?o:a)?1:-1}(t.isStart,t.pt,n,r.isStart,r.pt,r.other.pt);return i<0})}function s(t,e){var n=function(t,e){var n=r.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return o(n,t.end),n}(t,e);return function(t,e,n){var i=r.node({isStart:!1,pt:e.end,seg:e,primary:n,other:t,status:null});t.other=i,o(i,t.pt)}(n,t,e),n}function u(t,e){var r=i(e,t.seg.end,t.seg);return function(t,e){n&&n.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,o(t.other,t.pt)}(t,e),s(r,t.primary)}function l(i,o){var s=r.create();function l(t){return s.findTransition(function(n){var r=function(t,n){var r=t.seg.start,i=t.seg.end,a=n.seg.start,o=n.seg.end;return e.pointsCollinear(r,a,o)?e.pointsCollinear(i,a,o)?1:e.pointAboveOrOnLine(i,a,o)?1:-1:e.pointAboveOrOnLine(r,a,o)?1:-1}(t,n.ev);return r>0})}function c(t,r){var i=t.seg,a=r.seg,o=i.start,s=i.end,l=a.start,c=a.end;n&&n.checkIntersection(i,a);var f=e.linesIntersect(o,s,l,c);if(!1===f){if(!e.pointsCollinear(o,s,l))return!1;if(e.pointsSame(o,c)||e.pointsSame(s,l))return!1;var d=e.pointsSame(o,l),h=e.pointsSame(s,c);if(d&&h)return r;var p=!d&&e.pointBetween(o,l,c),v=!h&&e.pointBetween(s,l,c);if(d)return v?u(r,s):u(t,c),r;p&&(h||(v?u(r,s):u(t,c)),u(r,o))}else 0===f.alongA&&(-1===f.alongB?u(t,l):0===f.alongB?u(t,f.pt):1===f.alongB&&u(t,c)),0===f.alongB&&(-1===f.alongA?u(r,o):0===f.alongA?u(r,f.pt):1===f.alongA&&u(r,s));return!1}for(var f=[];!a.isEmpty();){var d=a.getHead();if(n&&n.vert(d.pt[0]),d.isStart){n&&n.segmentNew(d.seg,d.primary);var h=l(d),p=h.before?h.before.ev:null,v=h.after?h.after.ev:null;n&&n.tempStatus(d.seg,!!p&&p.seg,!!v&&v.seg);var g,m,y=function(){if(p){var t=c(d,p);if(t)return t}return!!v&&c(d,v)}();if(y&&(t?(m=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above):y.seg.otherFill=d.seg.myFill,n&&n.segmentUpdate(y.seg),d.other.remove(),d.remove()),a.getHead()!==d){n&&n.rewind(d.seg);continue}t?(m=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=v?v.seg.myFill.above:i,d.seg.myFill.above=m?!d.seg.myFill.below:d.seg.myFill.below):null===d.seg.otherFill&&(g=v?d.primary===v.primary?v.seg.otherFill.above:v.seg.myFill.above:d.primary?o:i,d.seg.otherFill={above:g,below:g}),n&&n.status(d.seg,!!p&&p.seg,!!v&&v.seg),d.other.status=h.insert(r.node({ev:d}))}else{var b=d.status;if(null===b)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(b.prev)&&s.exists(b.next)&&c(b.prev.ev,b.next.ev),n&&n.statusRemove(b.ev.seg),b.remove(),!d.primary){var _=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=_}f.push(d.seg)}a.getHead().remove()}return n&&n.done(),f}return t?{addRegion:function(t){for(var r,i,a,o=t[t.length-1],u=0;u<t.length;u++){r=o,o=t[u];var l=e.pointsCompare(r,o);0!==l&&s((i=l<0?r:o,a=l<0?o:r,{id:n?n.segmentId():-1,start:i,end:a,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return l(t,!1)}}:{calculate:function(t,e,n,r){return t.forEach(function(t){s(i(t.start,t.end,t),!0)}),n.forEach(function(t){s(i(t.start,t.end,t),!1)}),l(e,r)}}}},{"./linked-list":21}],21:[function(t,e,n){e.exports={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,n){for(var r=t.root,i=t.root.next;null!==i;){if(n(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);r=i,i=i.next}r.next=e,e.prev=r,e.next=null},findTransition:function(e){for(var n=t.root,r=t.root.next;null!==r&&!e(r);)n=r,r=r.next;return{before:n===t.root?null:n,after:r,insert:function(t){return t.prev=n,t.next=r,n.next=t,null!==r&&(r.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},{}],22:[function(t,e,n){e.exports=function(t,e,n){var r=[],i=[];return t.forEach(function(t){var a=t.start,o=t.end;if(e.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},l=s,c=0;c<r.length;c++){var f=(g=r[c])[0],d=(g[1],g[g.length-1]);if(g[g.length-2],e.pointsSame(f,a)){if(k(c,!0,!0))break}else if(e.pointsSame(f,o)){if(k(c,!0,!1))break}else if(e.pointsSame(d,a)){if(k(c,!1,!0))break}else if(e.pointsSame(d,o)&&k(c,!1,!1))break}if(l===s)return r.push([a,o]),void(n&&n.chainNew(a,o));if(l===u){n&&n.chainMatch(s.index);var h=s.index,p=s.matches_pt1?o:a,v=s.matches_head,g=r[h],m=v?g[0]:g[g.length-1],y=v?g[1]:g[g.length-2],b=v?g[g.length-1]:g[0],_=v?g[g.length-2]:g[1];return e.pointsCollinear(y,m,p)&&(v?(n&&n.chainRemoveHead(s.index,p),g.shift()):(n&&n.chainRemoveTail(s.index,p),g.pop()),m=y),e.pointsSame(b,p)?(r.splice(h,1),e.pointsCollinear(_,b,m)&&(v?(n&&n.chainRemoveTail(s.index,m),g.pop()):(n&&n.chainRemoveHead(s.index,m),g.shift())),n&&n.chainClose(s.index),void i.push(g)):void(v?(n&&n.chainAddHead(s.index,p),g.unshift(p)):(n&&n.chainAddTail(s.index,p),g.push(p)))}var x=s.index,w=u.index;n&&n.chainConnect(x,w);var A=r[x].length<r[w].length;s.matches_head?u.matches_head?A?(M(x),T(x,w)):(M(w),T(w,x)):T(w,x):u.matches_head?T(x,w):A?(M(x),T(w,x)):(M(w),T(x,w))}function k(t,e,n){return l.index=t,l.matches_head=e,l.matches_pt1=n,l===s?(l=u,!1):(l=null,!0)}function M(t){n&&n.chainReverse(t),r[t].reverse()}function T(t,i){var a=r[t],o=r[i],s=a[a.length-1],u=a[a.length-2],l=o[0],c=o[1];e.pointsCollinear(u,s,l)&&(n&&n.chainRemoveTail(t,s),a.pop(),s=u),e.pointsCollinear(s,l,c)&&(n&&n.chainRemoveHead(i,l),o.shift()),n&&n.chainJoin(t,i),r[t]=a.concat(o),r.splice(i,1)}}),i}},{}],23:[function(t,e,n){function r(t,e,n){var r=[];return t.forEach(function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&r.push({id:n?n.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})}),n&&n.selected(r),r}var i={union:function(t,e){return r(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return r(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return r(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return r(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return r(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}};e.exports=i},{}],24:[function(t,e,n){var r,i,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var l,c=[],f=!1,d=-1;function h(){f&&l&&(f=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function g(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new v(t,e)),1!==c.length||f||u(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],25:[function(t,e,n){!function(t){var n=/^\s+/,r=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,u=t.random;function l(e,u){if(u=u||{},(e=e||"")instanceof l)return e;if(!(this instanceof l))return new l(e,u);var c=function(e){var i,a,u,l={r:0,g:0,b:0},c=1,f=null,d=null,h=null,p=!1,v=!1;return"string"==typeof e&&(e=function(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e,i=!1;if(S[t])t=S[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=N.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=N.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=N.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=N.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=N.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=N.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=N.hex8.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),a:j(e[4]),format:i?"name":"hex8"}:(e=N.hex6.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),format:i?"name":"hex"}:(e=N.hex4.exec(t))?{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),a:j(e[4]+""+e[4]),format:i?"name":"hex8"}:!!(e=N.hex3.exec(t))&&{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),format:i?"name":"hex"}}(e)),"object"==typeof e&&(z(e.r)&&z(e.g)&&z(e.b)?(i=e.r,a=e.g,u=e.b,l={r:255*O(i,255),g:255*O(a,255),b:255*O(u,255)},p=!0,v="%"===String(e.r).substr(-1)?"prgb":"rgb"):z(e.h)&&z(e.s)&&z(e.v)?(f=D(e.s),d=D(e.v),l=function(e,n,r){e=6*O(e,360),n=O(n,100),r=O(r,100);var i=t.floor(e),a=e-i,o=r*(1-n),s=r*(1-a*n),u=r*(1-(1-a)*n),l=i%6;return{r:255*[r,s,o,o,u,r][l],g:255*[u,r,r,s,o,o][l],b:255*[o,o,u,r,r,s][l]}}(e.h,f,d),p=!0,v="hsv"):z(e.h)&&z(e.s)&&z(e.l)&&(f=D(e.s),h=D(e.l),l=function(t,e,n){var r,i,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=O(t,360),e=O(e,100),n=O(n,100),0===e)r=i=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=o(u,s,t+1/3),i=o(u,s,t),a=o(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,f,h),p=!0,v="hsl"),e.hasOwnProperty("a")&&(c=e.a)),c=E(c),{ok:p,format:e.format||v,r:o(255,s(l.r,0)),g:o(255,s(l.g,0)),b:o(255,s(l.b,0)),a:c}}(e);this._originalInput=e,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=a(100*this._a)/100,this._format=u.format||c.format,this._gradientType=u.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=c.ok,this._tc_id=i++}function c(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,a=s(t,e,n),u=o(t,e,n),l=(a+u)/2;if(a==u)r=i=0;else{var c=a-u;switch(i=l>.5?c/(2-a-u):c/(a+u),a){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,l:l}}function f(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,a=s(t,e,n),u=o(t,e,n),l=a,c=a-u;if(i=0===a?0:c/a,a==u)r=0;else{switch(a){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,v:l}}function d(t,e,n,r){var i=[R(a(t).toString(16)),R(a(e).toString(16)),R(a(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function h(t,e,n,r){var i=[R(F(r)),R(a(t).toString(16)),R(a(e).toString(16)),R(a(n).toString(16))];return i.join("")}function p(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s-=e/100,n.s=P(n.s),l(n)}function v(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s+=e/100,n.s=P(n.s),l(n)}function g(t){return l(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l+=e/100,n.l=P(n.l),l(n)}function y(t,e){e=0===e?0:e||10;var n=l(t).toRgb();return n.r=s(0,o(255,n.r-a(-e/100*255))),n.g=s(0,o(255,n.g-a(-e/100*255))),n.b=s(0,o(255,n.b-a(-e/100*255))),l(n)}function b(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l-=e/100,n.l=P(n.l),l(n)}function _(t,e){var n=l(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,l(n)}function x(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function w(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+120)%360,s:e.s,l:e.l}),l({h:(n+240)%360,s:e.s,l:e.l})]}function A(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+90)%360,s:e.s,l:e.l}),l({h:(n+180)%360,s:e.s,l:e.l}),l({h:(n+270)%360,s:e.s,l:e.l})]}function k(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+72)%360,s:e.s,l:e.l}),l({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var r=l(t).toHsl(),i=360/n,a=[l(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(l(r));return a}function T(t,e){e=e||6;for(var n=l(t).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/e;e--;)o.push(l({h:r,s:i,v:a})),a=(a+s)%1;return o}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,n,r,i,a,o,s=this.toRgb();return e=s.r/255,n=s.g/255,r=s.b/255,i=e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4),a=n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4),o=r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4),.2126*i+.7152*a+.0722*o},setAlpha:function(t){return this._a=E(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=f(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),r=a(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),r=a(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return d(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[R(a(t).toString(16)),R(a(e).toString(16)),R(a(n).toString(16)),R(F(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*O(this._r,255))+"%",g:a(100*O(this._g,255))+"%",b:a(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*O(this._r,255))+"%, "+a(100*O(this._g,255))+"%, "+a(100*O(this._b,255))+"%)":"rgba("+a(100*O(this._r,255))+"%, "+a(100*O(this._g,255))+"%, "+a(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+h(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=l(t);n="#"+h(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!e&&r&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},l.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:D(t[r]));t=n}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:u(),g:u(),b:u()})},l.mix=function(t,e,n){n=0===n?0:n||50;var r=l(t).toRgb(),i=l(e).toRgb(),a=n/100,o={r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a};return l(o)},l.readability=function(e,n){var r=l(e),i=l(n);return(t.max(r.getLuminance(),i.getLuminance())+.05)/(t.min(r.getLuminance(),i.getLuminance())+.05)},l.isReadable=function(t,e,n){var r,i,a=l.readability(t,e);switch(i=!1,(r=function(t){var e,n;return e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},l.mostReadable=function(t,e,n){var r,i,a,o,s=null,u=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var c=0;c<e.length;c++)(r=l.readability(t,e[c]))>u&&(u=r,s=l(e[c]));return l.isReadable(t,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,l.mostReadable(t,["#fff","#000"],n))};var S=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=l.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(S);function E(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function O(e,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var r=function(t){return"string"===typeof t&&-1!=t.indexOf("%")}(e);return e=o(n,s(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function P(t){return o(1,s(0,t))}function L(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function D(t){return t<=1&&(t=100*t+"%"),t}function F(e){return t.round(255*parseFloat(e)).toString(16)}function j(t){return L(t)/255}var N=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function z(t){return!!N.CSS_UNIT.exec(t)}"undefined"!==typeof e&&e.exports?e.exports=l:window.tinycolor=l}(Math)},{}],26:[function(t,e,n){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],27:[function(t,e,n){"use strict";var r=t("./arrow_paths"),i=t("../../plots/font_attributes"),a=t("../../plots/cartesian/constants"),o=t("../../plot_api/plot_template").templatedArray;e.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":194,"../../plots/cartesian/constants":210,"../../plots/font_attributes":230,"./arrow_paths":26}],28:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("./draw").draw;function o(t){var e=t._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var n=i.getFromId(t,e.xref),r=i.getFromId(t,e.yref);e._extremes={},n&&s(e,n),r&&s(e,r)})}function s(t,e){var n,r=e._id,a=r.charAt(0),o=t[a],s=t["a"+a],u=t[a+"ref"],l=t["a"+a+"ref"],c=t["_"+a+"padplus"],f=t["_"+a+"padminus"],d={x:1,y:-1}[a]*t[a+"shift"],h=3*t.arrowsize*t.arrowwidth||0,p=h+d,v=h-d,g=3*t.startarrowsize*t.arrowwidth||0,m=g+d,y=g-d;if(l===u){var b=i.findExtremes(e,[e.r2c(o)],{ppadplus:p,ppadminus:v}),_=i.findExtremes(e,[e.r2c(s)],{ppadplus:Math.max(c,m),ppadminus:Math.max(f,y)});n={min:[b.min[0],_.min[0]],max:[b.max[0],_.max[0]]}}else m=s?m+s:m,y=s?y-s:y,n=i.findExtremes(e,[e.r2c(o)],{ppadplus:Math.max(c,p,m),ppadminus:Math.max(f,v,y)});t._extremes[r]=n}e.exports=function(t){var e=t._fullLayout,n=r.filterVisible(e.annotations);if(n.length&&t._fullData.length)return r.syncOrAsync([a,o],t)}},{"../../lib":160,"../../plots/cartesian/axes":204,"./draw":33}],29:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry"),a=t("../../plot_api/plot_template").arrayEditor;function o(t,e){var n,r,i,a,o,u,l,c=t._fullLayout.annotations,f=[],d=[],h=[],p=(e||[]).length;for(n=0;n<c.length;n++)if(i=c[n],a=i.clicktoshow){for(r=0;r<p;r++)if(o=e[r],u=o.xaxis,l=o.yaxis,u._id===i.xref&&l._id===i.yref&&u.d2r(o.x)===s(i._xclick,u)&&l.d2r(o.y)===s(i._yclick,l)){(i.visible?"onout"===a?d:h:f).push(n);break}r===p&&i.visible&&"onout"===a&&d.push(n)}return{on:f,off:d,explicitOff:h}}function s(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}e.exports={hasClickToShow:function(t,e){var n=o(t,e);return n.on.length>0||n.explicitOff.length>0},onClick:function(t,e){var n,s,u=o(t,e),l=u.on,c=u.off.concat(u.explicitOff),f={},d=t._fullLayout.annotations;if(l.length||c.length){for(n=0;n<l.length;n++)(s=a(t.layout,"annotations",d[l[n]])).modifyItem("visible",!0),r.extendFlat(f,s.getUpdateObj());for(n=0;n<c.length;n++)(s=a(t.layout,"annotations",d[c[n]])).modifyItem("visible",!1),r.extendFlat(f,s.getUpdateObj());return i.call("update",t,{},f)}}}},{"../../lib":160,"../../plot_api/plot_template":194,"../../registry":243}],30:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../color");e.exports=function(t,e,n,a){a("opacity");var o=a("bgcolor"),s=a("bordercolor"),u=i.opacity(s);a("borderpad");var l=a("borderwidth"),c=a("showarrow");a("text",c?" ":n._dfltTitle.annotation),a("textangle"),r.coerceFont(a,"font",n.font),a("width"),a("align");var f=a("height");if(f&&a("valign"),c){var d,h,p=a("arrowside");-1!==p.indexOf("end")&&(d=a("arrowhead"),h=a("arrowsize")),-1!==p.indexOf("start")&&(a("startarrowhead",d),a("startarrowsize",h)),a("arrowcolor",u?e.bordercolor:i.defaultLine),a("arrowwidth",2*(u&&l||1)),a("standoff"),a("startstandoff")}var v=a("hovertext"),g=n.hoverlabel||{};if(v){var m=a("hoverlabel.bgcolor",g.bgcolor||(i.opacity(o)?i.rgb(o):i.defaultLine)),y=a("hoverlabel.bordercolor",g.bordercolor||i.contrast(m));r.coerceFont(a,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||y})}a("captureevents",!!v)}},{"../../lib":160,"../color":42}],31:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,n,a){e=e||{};var o="log"===n&&"linear"===e.type,s="linear"===n&&"log"===e.type;if(o||s)for(var u,l,c=t._fullLayout.annotations,f=e._id.charAt(0),d=0;d<c.length;d++)u=c[d],l="annotations["+d+"].",u[f+"ref"]===e._id&&h(f),u["a"+f+"ref"]===e._id&&h("a"+f);function h(t){var n=u[t],s=null;s=o?i(n,e.range):Math.pow(10,n),r(s)||(s=null),a(l+t,s)}}},{"../../lib/to_log_range":183,"fast-isnumeric":9}],32:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./common_defaults"),s=t("./attributes");function u(t,e,n){function a(n,i){return r.coerce(t,e,s,n,i)}var u=a("visible"),l=a("clicktoshow");if(u||l){o(t,e,n,a);for(var c=e.showarrow,f=["x","y"],d=[-10,-30],h={_fullLayout:n},p=0;p<2;p++){var v=f[p],g=i.coerceRef(t,e,h,v,"","paper");if("paper"!==g){var m=i.getFromId(h,g);m._annIndices.push(e._index)}if(i.coercePosition(e,h,a,g,v,.5),c){var y="a"+v,b=i.coerceRef(t,e,h,y,"pixel");"pixel"!==b&&b!==g&&(b=e[y]="pixel");var _="pixel"===b?d[p]:.4;i.coercePosition(e,h,a,b,y,_)}a(v+"anchor"),a(v+"shift")}if(r.noneOrAll(t,e,["x","y"]),c&&r.noneOrAll(t,e,["ax","ay"]),l){var x=a("xclick"),w=a("yclick");e._xclick=void 0===x?e.x:i.cleanPosition(x,h,e.xref),e._yclick=void 0===w?e.y:i.cleanPosition(w,h,e.yref)}}}e.exports=function(t,e){a(t,e,{name:"annotations",handleItemDefaults:u})}},{"../../lib":160,"../../plots/array_container_defaults":200,"../../plots/cartesian/axes":204,"./attributes":27,"./common_defaults":30}],33:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../plots/plots"),o=t("../../lib"),s=t("../../plots/cartesian/axes"),u=t("../color"),l=t("../drawing"),c=t("../fx"),f=t("../../lib/svg_text_utils"),d=t("../../lib/setcursor"),h=t("../dragelement"),p=t("../../plot_api/plot_template").arrayEditor,v=t("./draw_arrow_head");function g(t,e){var n=t._fullLayout,r=n.annotations[e]||{},i=s.getFromId(t,r.xref),a=s.getFromId(t,r.yref);i&&i.setScale(),a&&a.setScale(),m(t,r,e,!1,i,a)}function m(t,e,n,a,s,g){var m,y,b=t._fullLayout,_=t._fullLayout._size,x=t._context.edits;a?(m="annotation-"+a,y=a+".annotations"):(m="annotation",y="annotations");var w=p(t.layout,y,e),A=w.modifyBase,k=w.modifyItem,M=w.getUpdateObj;b._infolayer.selectAll("."+m+'[data-index="'+n+'"]').remove();var T="clip"+b._uid+"_ann"+n;if(e._input&&!1!==e.visible){var S={x:{},y:{}},C=+e.textangle||0,E=b._infolayer.append("g").classed(m,!0).attr("data-index",String(n)).style("opacity",e.opacity),O=E.append("g").classed("annotation-text-g",!0),P=x[e.showarrow?"annotationTail":"annotationPosition"],L=e.captureevents||x.annotationText||P,R=O.append("g").style("pointer-events",L?"all":null).call(d,"pointer").on("click",function(){t._dragging=!1,t.emit("plotly_clickannotation",H(r.event))});e.hovertext&&R.on("mouseover",function(){var n=e.hoverlabel,r=n.font,i=this.getBoundingClientRect(),a=t.getBoundingClientRect();c.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:e.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:t})}).on("mouseout",function(){c.loneUnhover(b._hoverlayer.node())});var D=e.borderwidth,F=e.borderpad,j=D+F,N=R.append("rect").attr("class","bg").style("stroke-width",D+"px").call(u.stroke,e.bordercolor).call(u.fill,e.bgcolor),z=e.width||e.height,I=b._topclips.selectAll("#"+T).data(z?[0]:[]);I.enter().append("clipPath").classed("annclip",!0).attr("id",T).append("rect"),I.exit().remove();var B=e.font,q=b._meta?o.templateString(e.text,b._meta):e.text,U=R.append("text").classed("annotation-text",!0).text(q);x.annotationText?U.call(f.makeEditable,{delegate:R,gd:t}).call(W).on("edit",function(n){e.text=n,this.call(W),k("text",n),s&&s.autorange&&A(s._name+".autorange",!0),g&&g.autorange&&A(g._name+".autorange",!0),i.call("_guiRelayout",t,M())}):U.call(W)}else r.selectAll("#"+T).remove();function H(t){var r={index:n,annotation:e._input,fullAnnotation:e,event:t};return a&&(r.subplotId=a),r}function W(n){return n.call(l.font,B).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),f.convertToTspans(n,t,G),n}function G(){var n=U.selectAll("a");if(1===n.size()&&n.text()===U.text()){var r=R.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"});r.node().appendChild(N.node())}var c=R.select(".annotation-text-math-group"),p=!c.empty(),m=l.bBox((p?c:U).node()),y=m.width,w=m.height,L=e.width||y,F=e.height||w,B=Math.round(L+2*j),q=Math.round(F+2*j);function W(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var G=!1,V=["x","y"],Y=0;Y<V.length;Y++){var Z,X,$,J,K,Q=V[Y],tt=e[Q+"ref"]||Q,et=e["a"+Q+"ref"],nt={x:s,y:g}[Q],rt=(C+("x"===Q?0:-90))*Math.PI/180,it=B*Math.cos(rt),at=q*Math.sin(rt),ot=Math.abs(it)+Math.abs(at),st=e[Q+"anchor"],ut=e[Q+"shift"]*("x"===Q?1:-1),lt=S[Q];if(nt){var ct=nt.r2fraction(e[Q]);(ct<0||ct>1)&&(et===tt?((ct=nt.r2fraction(e["a"+Q]))<0||ct>1)&&(G=!0):G=!0),Z=nt._offset+nt.r2p(e[Q]),J=.5}else"x"===Q?($=e[Q],Z=_.l+_.w*$):($=1-e[Q],Z=_.t+_.h*$),J=e.showarrow?.5:$;if(e.showarrow){lt.head=Z;var ft=e["a"+Q];K=it*W(.5,e.xanchor)-at*W(.5,e.yanchor),et===tt?(lt.tail=nt._offset+nt.r2p(ft),X=K):(lt.tail=Z+ft,X=K+ft),lt.text=lt.tail+K;var dt=b["x"===Q?"width":"height"];if("paper"===tt&&(lt.head=o.constrain(lt.head,1,dt-1)),"pixel"===et){var ht=-Math.max(lt.tail-3,lt.text),pt=Math.min(lt.tail+3,lt.text)-dt;ht>0?(lt.tail+=ht,lt.text+=ht):pt>0&&(lt.tail-=pt,lt.text-=pt)}lt.tail+=ut,lt.head+=ut}else K=ot*W(J,st),X=K,lt.text=Z+K;lt.text+=ut,K+=ut,X+=ut,e["_"+Q+"padplus"]=ot/2+X,e["_"+Q+"padminus"]=ot/2-X,e["_"+Q+"size"]=ot,e["_"+Q+"shift"]=K}if(t._dragging||!G){var vt=0,gt=0;if("left"!==e.align&&(vt=(L-y)*("center"===e.align?.5:1)),"top"!==e.valign&&(gt=(F-w)*("middle"===e.valign?.5:1)),p)c.select("svg").attr({x:j+vt-1,y:j+gt}).call(l.setClipUrl,z?T:null,t);else{var mt=j+gt-m.top,yt=j+vt-m.left;U.call(f.positionText,yt,mt).call(l.setClipUrl,z?T:null,t)}I.select("rect").call(l.setRect,j,j,L,F),N.call(l.setRect,D/2,D/2,B-D,q-D),R.call(l.setTranslate,Math.round(S.x.text-B/2),Math.round(S.y.text-q/2)),O.attr({transform:"rotate("+C+","+S.x.text+","+S.y.text+")"});var bt,_t=function(n,r){E.selectAll(".annotation-arrow-g").remove();var c=S.x.head,f=S.y.head,d=S.x.tail+n,p=S.y.tail+r,m=S.x.text+n,y=S.y.text+r,b=o.rotationXYMatrix(C,m,y),w=o.apply2DTransform(b),T=o.apply2DTransform2(b),P=+N.attr("width"),L=+N.attr("height"),D=m-.5*P,F=D+P,j=y-.5*L,z=j+L,I=[[D,j,D,z],[D,z,F,z],[F,z,F,j],[F,j,D,j]].map(T);if(!I.reduce(function(t,e){return t^!!o.segmentsIntersect(c,f,c+1e6,f+1e6,e[0],e[1],e[2],e[3])},!1)){I.forEach(function(t){var e=o.segmentsIntersect(d,p,c,f,t[0],t[1],t[2],t[3]);e&&(d=e.x,p=e.y)});var B=e.arrowwidth,q=e.arrowcolor,U=e.arrowside,H=E.append("g").style({opacity:u.opacity(q)}).classed("annotation-arrow-g",!0),W=H.append("path").attr("d","M"+d+","+p+"L"+c+","+f).style("stroke-width",B+"px").call(u.stroke,u.rgb(q));if(v(W,U,e),x.annotationPosition&&W.node().parentNode&&!a){var G=c,V=f;if(e.standoff){var Y=Math.sqrt(Math.pow(c-d,2)+Math.pow(f-p,2));G+=e.standoff*(d-c)/Y,V+=e.standoff*(p-f)/Y}var Z,X,$=H.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-G)+","+(p-V),transform:"translate("+G+","+V+")"}).style("stroke-width",B+6+"px").call(u.stroke,"rgba(0,0,0,0)").call(u.fill,"rgba(0,0,0,0)");h.init({element:$.node(),gd:t,prepFn:function(){var t=l.getTranslate(R);Z=t.x,X=t.y,s&&s.autorange&&A(s._name+".autorange",!0),g&&g.autorange&&A(g._name+".autorange",!0)},moveFn:function(t,n){var r=w(Z,X),i=r[0]+t,a=r[1]+n;R.call(l.setTranslate,i,a),k("x",s?s.p2r(s.r2p(e.x)+t):e.x+t/_.w),k("y",g?g.p2r(g.r2p(e.y)+n):e.y-n/_.h),e.axref===e.xref&&k("ax",s.p2r(s.r2p(e.ax)+t)),e.ayref===e.yref&&k("ay",g.p2r(g.r2p(e.ay)+n)),H.attr("transform","translate("+t+","+n+")"),O.attr({transform:"rotate("+C+","+i+","+a+")"})},doneFn:function(){i.call("_guiRelayout",t,M());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};e.showarrow&&_t(0,0),P&&h.init({element:R.node(),gd:t,prepFn:function(){bt=O.attr("transform")},moveFn:function(t,n){var r="pointer";if(e.showarrow)e.axref===e.xref?k("ax",s.p2r(s.r2p(e.ax)+t)):k("ax",e.ax+t),e.ayref===e.yref?k("ay",g.p2r(g.r2p(e.ay)+n)):k("ay",e.ay+n),_t(t,n);else{if(a)return;var i,o;if(s)i=s.p2r(s.r2p(e.x)+t);else{var u=e._xsize/_.w,l=e.x+(e._xshift-e.xshift)/_.w-u/2;i=h.align(l+t/_.w,u,0,1,e.xanchor)}if(g)o=g.p2r(g.r2p(e.y)+n);else{var c=e._ysize/_.h,f=e.y-(e._yshift+e.yshift)/_.h-c/2;o=h.align(f-n/_.h,c,0,1,e.yanchor)}k("x",i),k("y",o),s&&g||(r=h.getCursor(s?.5:i,g?.5:o,e.xanchor,e.yanchor))}O.attr({transform:"translate("+t+","+n+")"+bt}),d(R,r)},clickFn:function(n,r){e.captureevents&&t.emit("plotly_clickannotation",H(r))},doneFn:function(){d(R),i.call("_guiRelayout",t,M());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}else R.remove()}}e.exports={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var n=0;n<e.annotations.length;n++)e.annotations[n].visible&&g(t,n);return a.previousPromises(t)},drawOne:g,drawRaw:m}},{"../../lib":160,"../../lib/setcursor":179,"../../lib/svg_text_utils":181,"../../plot_api/plot_template":194,"../../plots/cartesian/axes":204,"../../plots/plots":236,"../../registry":243,"../color":42,"../dragelement":60,"../drawing":63,"../fx":81,"./draw_arrow_head":34,d3:7}],34:[function(t,e,n){"use strict";var r=t("d3"),i=t("../color"),a=t("./arrow_paths");e.exports=function(t,e,n){var o,s,u,l,c=t.node(),f=a[n.arrowhead||0],d=a[n.startarrowhead||0],h=(n.arrowwidth||1)*(n.arrowsize||1),p=(n.arrowwidth||1)*(n.startarrowsize||1),v=e.indexOf("start")>=0,g=e.indexOf("end")>=0,m=f.backoff*h+n.standoff,y=d.backoff*p+n.startstandoff;if("line"===c.nodeName){o={x:+t.attr("x1"),y:+t.attr("y1")},s={x:+t.attr("x2"),y:+t.attr("y2")};var b=o.x-s.x,_=o.y-s.y;if(u=Math.atan2(_,b),l=u+Math.PI,m&&y&&m+y>Math.sqrt(b*b+_*_))return void L();if(m){if(m*m>b*b+_*_)return void L();var x=m*Math.cos(u),w=m*Math.sin(u);s.x+=x,s.y+=w,t.attr({x2:s.x,y2:s.y})}if(y){if(y*y>b*b+_*_)return void L();var A=y*Math.cos(u),k=y*Math.sin(u);o.x-=A,o.y-=k,t.attr({x1:o.x,y1:o.y})}}else if("path"===c.nodeName){var M=c.getTotalLength(),T="";if(M<m+y)return void L();var S=c.getPointAtLength(0),C=c.getPointAtLength(.1);u=Math.atan2(S.y-C.y,S.x-C.x),o=c.getPointAtLength(Math.min(y,M)),T="0px,"+y+"px,";var E=c.getPointAtLength(M),O=c.getPointAtLength(M-.1);l=Math.atan2(E.y-O.y,E.x-O.x),s=c.getPointAtLength(Math.max(0,M-m));var P=T?y+m:m;T+=M-P+"px,"+M+"px",t.style("stroke-dasharray",T)}function L(){t.style("stroke-dasharray","0px,100px")}function R(e,a,o,s){e.path&&(e.noRotate&&(o=0),r.select(c.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+a.x+","+a.y+")"+(o?"rotate("+180*o/Math.PI+")":"")+"scale("+s+")"}).style({fill:i.rgb(n.arrowcolor),"stroke-width":0}))}v&&R(d,o,u,p),g&&R(f,s,l,h)}},{"../color":42,"./arrow_paths":26,d3:7}],35:[function(t,e,n){"use strict";var r=t("./draw"),i=t("./click");e.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":214,"./attributes":27,"./calc_autorange":28,"./click":29,"./convert_coords":31,"./defaults":32,"./draw":33}],36:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray;e.exports=i(a("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":187,"../../plot_api/plot_template":194,"../annotations/attributes":27}],37:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes");function a(t,e){var n=e.fullSceneLayout,a=n.domain,o=e.fullLayout._size,s={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},r.extendFlat(t._xa,s),i.setConvert(t._xa),t._xa._offset=o.l+a.x[0]*o.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*o.w*(a.x[1]-a.x[0])},t._ya={},r.extendFlat(t._ya,s),i.setConvert(t._ya),t._ya._offset=o.t+(1-a.y[1])*o.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*o.h*(a.y[1]-a.y[0])}}e.exports=function(t){for(var e=t.fullSceneLayout,n=e.annotations,r=0;r<n.length;r++)a(n[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},{"../../lib":160,"../../plots/cartesian/axes":204}],38:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("../annotations/common_defaults"),s=t("./attributes");function u(t,e,n,a){function u(n,i){return r.coerce(t,e,s,n,i)}function l(t){var r=t+"axis",a={_fullLayout:{}};return a._fullLayout[r]=n[r],i.coercePosition(e,a,u,t,t,.5)}var c=u("visible");c&&(o(t,e,a.fullLayout,u),l("x"),l("y"),l("z"),r.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",u("xanchor"),u("yanchor"),u("xshift"),u("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",u("ax",-10),u("ay",-30),r.noneOrAll(t,e,["ax","ay"])))}e.exports=function(t,e,n){a(t,e,{name:"annotations",handleItemDefaults:u,fullLayout:n.fullLayout})}},{"../../lib":160,"../../plots/array_container_defaults":200,"../../plots/cartesian/axes":204,"../annotations/common_defaults":30,"./attributes":36}],39:[function(t,e,n){"use strict";var r=t("../annotations/draw").drawRaw,i=t("../../plots/gl3d/project"),a=["x","y","z"];e.exports=function(t){for(var e=t.fullSceneLayout,n=t.dataScale,o=e.annotations,s=0;s<o.length;s++){for(var u=o[s],l=!1,c=0;c<3;c++){var f=a[c],d=u[f],h=e[f+"axis"],p=h.r2fraction(d);if(p<0||p>1){l=!0;break}}l?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(u._pdata=i(t.glplot.cameraParams,[e.xaxis.r2l(u.x)*n[0],e.yaxis.r2l(u.y)*n[1],e.zaxis.r2l(u.z)*n[2]]),r(t.graphDiv,u,s,t.id,u._xa,u._ya))}}},{"../../plots/gl3d/project":233,"../annotations/draw":33}],40:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib");e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:function(t,e){var n=r.subplotsRegistry.gl3d;if(n)for(var a=n.attrRegex,o=Object.keys(t),s=0;s<o.length;s++){var u=o[s];a.test(u)&&(t[u].annotations||[]).length&&(i.pushUnique(e._basePlotModules,n),i.pushUnique(e._subplots.gl3d,u))}},convert:t("./convert"),draw:t("./draw")}},{"../../lib":160,"../../registry":243,"./attributes":36,"./convert":37,"./defaults":38,"./draw":39}],41:[function(t,e,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],42:[function(t,e,n){"use strict";var r=t("tinycolor2"),i=t("fast-isnumeric"),a=e.exports={},o=t("./attributes");a.defaults=o.defaults;var s=a.defaultLine=o.defaultLine;a.lightLine=o.lightLine;var u=a.background=o.background;function l(t){if(i(t)||"string"!==typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var n=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var r=n[1].trim().split(/\s*[\s,]\s*/),a="a"===e.charAt(3)&&4===r.length;if(!a&&3!==r.length)return t;for(var o=0;o<r.length;o++){if(!r[o].length)return t;if(r[o]=Number(r[o]),!(r[o]>=0))return t;if(3===o)r[o]>1&&(r[o]=1);else if(r[o]>=1)return t}var s=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return a?"rgba("+s+", "+r[3]+")":"rgb("+s+")"}a.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},a.rgb=function(t){return a.tinyRGB(r(t))},a.opacity=function(t){return t?r(t).getAlpha():0},a.addOpacity=function(t,e){var n=r(t).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+e+")"},a.combine=function(t,e){var n=r(t).toRgb();if(1===n.a)return r(t).toRgbString();var i=r(e||u).toRgb(),a=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},o={r:a.r*(1-n.a)+n.r*n.a,g:a.g*(1-n.a)+n.g*n.a,b:a.b*(1-n.a)+n.b*n.a};return r(o).toRgbString()},a.contrast=function(t,e,n){var i=r(t);1!==i.getAlpha()&&(i=r(a.combine(t,u)));var o=i.isDark()?e?i.lighten(e):u:n?i.darken(n):s;return o.toString()},a.stroke=function(t,e){var n=r(e);t.style({stroke:a.tinyRGB(n),"stroke-opacity":n.getAlpha()})},a.fill=function(t,e){var n=r(e);t.style({fill:a.tinyRGB(n),"fill-opacity":n.getAlpha()})},a.clean=function(t){if(t&&"object"===typeof t){var e,n,r,i,o=Object.keys(t);for(e=0;e<o.length;e++)if(r=o[e],i=t[r],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=l(i[n]);else t[r]=l(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=l(i[n][1]));else if(Array.isArray(i)){var s=i[0];if(!Array.isArray(s)&&s&&"object"===typeof s)for(n=0;n<i.length;n++)a.clean(i[n])}else i&&"object"===typeof i&&a.clean(i)}}},{"./attributes":41,"fast-isnumeric":9,tinycolor2:25}],43:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/layout_attributes"),i=t("../../plots/font_attributes"),a=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll;e.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:a({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":155,"../../plot_api/edit_types":187,"../../plots/cartesian/layout_attributes":216,"../../plots/font_attributes":230}],44:[function(t,e,n){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],45:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/plot_template"),a=t("../../plots/cartesian/tick_value_defaults"),o=t("../../plots/cartesian/tick_mark_defaults"),s=t("../../plots/cartesian/tick_label_defaults"),u=t("./attributes");e.exports=function(t,e,n){var l=i.newContainer(e,"colorbar"),c=t.colorbar||{};function f(t,e){return r.coerce(c,l,u,t,e)}var d=f("thicknessmode");f("thickness","fraction"===d?30/(n.width-n.margin.l-n.margin.r):30);var h=f("lenmode");f("len","fraction"===h?1:n.height-n.margin.t-n.margin.b),f("x"),f("xanchor"),f("xpad"),f("y"),f("yanchor"),f("ypad"),r.noneOrAll(c,l,["x","y"]),f("outlinecolor"),f("outlinewidth"),f("bordercolor"),f("borderwidth"),f("bgcolor"),a(c,l,f,"linear");var p={outerTicks:!1,font:n.font};s(c,l,f,"linear",p),o(c,l,f,"linear",p),f("title.text",n._dfltTitle.colorbar),r.coerceFont(f,"title.font",n.font),f("title.side")}},{"../../lib":160,"../../plot_api/plot_template":194,"../../plots/cartesian/tick_label_defaults":223,"../../plots/cartesian/tick_mark_defaults":224,"../../plots/cartesian/tick_value_defaults":225,"./attributes":43}],46:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../plots/cartesian/axes"),u=t("../dragelement"),l=t("../../lib"),c=t("../../lib/extend").extendFlat,f=t("../../lib/setcursor"),d=t("../drawing"),h=t("../color"),p=t("../titles"),v=t("../../lib/svg_text_utils"),g=t("../colorscale/helpers").flipScale,m=t("../../plots/cartesian/axis_defaults"),y=t("../../plots/cartesian/position_defaults"),b=t("../../plots/cartesian/layout_attributes"),_=t("../../constants/alignment"),x=_.LINE_SPACING,w=_.FROM_TL,A=_.FROM_BR,k=t("./constants").cn;function M(t,e,n){var o=n._fullLayout,u=o._size,f=e._fillcolor,g=e._line,_=e.title,M=_.side,T=e._zrange||r.extent(("function"===typeof f?f:g.color).domain()),S="function"===typeof g.color?g.color:function(){return g.color},C="function"===typeof f?f:function(){return f},E=e._levels,O=function(t,e,n){var r,i,a=e._levels,o=[],s=[],u=a.end+a.size/100,l=a.size,c=1.001*n[0]-.001*n[1],f=1.001*n[1]-.001*n[0];for(i=0;i<1e5&&(r=a.start+i*l,!(l>0?r>=u:r<=u));i++)r>c&&r<f&&o.push(r);if(e._fillgradient)s=[0];else if("function"===typeof e._fillcolor){var d=e._filllevels;if(d)for(u=d.end+d.size/100,l=d.size,i=0;i<1e5&&(r=d.start+i*l,!(l>0?r>=u:r<=u));i++)r>n[0]&&r<n[1]&&s.push(r);else(s=o.map(function(t){return t-a.size/2})).push(s[s.length-1]+a.size)}else e._fillcolor&&"string"===typeof e._fillcolor&&(s=[0]);return a.size<0&&(o.reverse(),s.reverse()),{line:o,fill:s}}(0,e,T),P=O.fill,L=O.line,R=Math.round(e.thickness*("fraction"===e.thicknessmode?u.w:1)),D=R/u.w,F=Math.round(e.len*("fraction"===e.lenmode?u.h:1)),j=F/u.h,N=e.xpad/u.w,z=(e.borderwidth+e.outlinewidth)/2,I=e.ypad/u.h,B=Math.round(e.x*u.w+e.xpad),q=e.x-D*({middle:.5,right:1}[e.xanchor]||0),U=e.y+j*(({top:-.5,bottom:.5}[e.yanchor]||0)-.5),H=Math.round(u.h*(1-U)),W=H-F;e._lenFrac=j,e._thickFrac=D,e._xLeftFrac=q,e._yBottomFrac=U;var G=function(t,e,n){var r=t._fullLayout,i={type:"linear",range:n,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:"right",position:1},a={type:"linear",_id:"y"+e._id},o={letter:"y",font:r.font,noHover:!0,noTickson:!0,calendar:r.calendar};function s(t,e){return l.coerce(i,a,b,t,e)}return m(i,a,s,o,r),y(i,a,s,o),a}(n,e,T);if(G.position=e.x+N+D,-1!==["top","bottom"].indexOf(M)&&(G.title.side=M,G.titlex=e.x+N,G.titley=U+("top"===_.side?j-I:I)),g.color&&"auto"===e.tickmode){G.tickmode="linear",G.tick0=E.start;var V=E.size,Y=l.constrain((H-W)/50,4,15)+1,Z=(T[1]-T[0])/((e.nticks||Y)*V);if(Z>1){var X=Math.pow(10,Math.floor(Math.log(Z)/Math.LN10));V*=X*l.roundUp(Z/X,[2,5,10]),(Math.abs(E.start)/E.size+1e-6)%1<2e-6&&(G.tick0=0)}G.dtick=V}G.domain=[U+I,U+j-I],G.setScale(),t.attr("transform","translate("+Math.round(u.l)+","+Math.round(u.t)+")");var $,J=t.select("."+k.cbtitleunshift).attr("transform","translate(-"+Math.round(u.l)+",-"+Math.round(u.t)+")"),K=t.select("."+k.cbaxis),Q=0;function tt(r,i){var a={propContainer:G,propName:e._propPrefix+"title",traceIndex:e._traceIndex,_meta:e._meta,placeholder:o._dfltTitle.colorbar,containerGroup:t.select("."+k.cbtitle)},s="h"===r.charAt(0)?r.substr(1):"h"+r;t.selectAll("."+s+",."+s+"-math-group").remove(),p.draw(n,r,c(a,i||{}))}return l.syncOrAsync([a.previousPromises,function(){if(-1!==["top","bottom"].indexOf(M)){var t,n=u.l+(e.x+N)*u.w,r=G.title.font.size;t="top"===M?(1-(U+j-I))*u.h+u.t+3+.75*r:(1-(U+I))*u.h+u.t-3-.25*r,tt(G._id+"title",{attributes:{x:n,y:t,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(M)){var a=t.select("."+k.cbtitle),o=a.select("text"),c=[-e.outlinewidth/2,e.outlinewidth/2],f=a.select(".h"+G._id+"title-math-group").node(),h=15.6;if(o.node()&&(h=parseInt(o.node().style.fontSize,10)*x),f?(Q=d.bBox(f).height)>h&&(c[1]-=(Q-h)/2):o.node()&&!o.classed(k.jsPlaceholder)&&(Q=d.bBox(o.node()).height),Q){if(Q+=5,"top"===M)G.domain[1]-=Q/u.h,c[1]*=-1;else{G.domain[0]+=Q/u.h;var p=v.lineCount(o);c[1]+=(1-p)*h}a.attr("transform","translate("+c+")"),G.setScale()}}t.selectAll("."+k.cbfills+",."+k.cblines).attr("transform","translate(0,"+Math.round(u.h*(1-G.domain[1]))+")"),K.attr("transform","translate(0,"+Math.round(-u.t)+")");var m=t.select("."+k.cbfills).selectAll("rect."+k.cbfill).data(P);m.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),m.exit().remove();var y=T.map(G.c2p).map(Math.round).sort(function(t,e){return t-e});m.each(function(t,a){var o=[0===a?T[0]:(P[a]+P[a-1])/2,a===P.length-1?T[1]:(P[a]+P[a+1])/2].map(G.c2p).map(Math.round);o[1]=l.constrain(o[1]+(o[1]>o[0])?1:-1,y[0],y[1]);var s=r.select(this).attr({x:B,width:Math.max(R,2),y:r.min(o),height:Math.max(r.max(o)-r.min(o),2)});if(e._fillgradient)d.gradient(s,n,e._id,"vertical",e._fillgradient,"fill");else{var u=C(t).replace("e-","");s.attr("fill",i(u).toHexString())}});var b=t.select("."+k.cblines).selectAll("path."+k.cbline).data(g.color&&g.width?L:[]);b.enter().append("path").classed(k.cbline,!0),b.exit().remove(),b.each(function(t){r.select(this).attr("d","M"+B+","+(Math.round(G.c2p(t))+g.width/2%1)+"h"+R).call(d.lineGroupStyle,g.width,S(t),g.dash)}),K.selectAll("g."+G._id+"tick,path").remove();var _=B+R+(e.outlinewidth||0)/2-("outside"===e.ticks?1:0),w=s.calcTicks(G),A=s.makeTransFn(G),E=s.getTickSigns(G)[2];return s.drawTicks(n,G,{vals:"inside"===G.ticks?s.clipEnds(G,w):w,layer:K,path:s.makeTickPath(G,_,E),transFn:A}),s.drawLabels(n,G,{vals:w,layer:K,transFn:A,labelFns:s.makeLabelFns(G,_)})},function(){if(-1===["top","bottom"].indexOf(M)){var t=G.title.font.size,e=G._offset+G._length/2,i=u.l+(G.position||0)*u.w+("right"===G.side?10+t*(G.showticklabels?1:.5):-10-t*(G.showticklabels?.5:0));tt("h"+G._id+"title",{avoid:{selection:r.select(n).selectAll("g."+G._id+"tick"),side:M,offsetLeft:u.l,offsetTop:0,maxShift:o.width},attributes:{x:i,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},a.previousPromises,function(){var r=R+e.outlinewidth/2+d.bBox(K.node()).width;if(($=J.select("text")).node()&&!$.classed(k.jsPlaceholder)){var i,o=J.select(".h"+G._id+"title-math-group").node();i=o&&-1!==["top","bottom"].indexOf(M)?d.bBox(o).width:d.bBox(J.node()).right-B-u.l,r=Math.max(r,i)}var s=2*e.xpad+r+e.borderwidth+e.outlinewidth/2,l=H-W;t.select("."+k.cbbg).attr({x:B-e.xpad-(e.borderwidth+e.outlinewidth)/2,y:W-z,width:Math.max(s,2),height:Math.max(l+2*z,2)}).call(h.fill,e.bgcolor).call(h.stroke,e.bordercolor).style("stroke-width",e.borderwidth),t.selectAll("."+k.cboutline).attr({x:B,y:W+e.ypad+("top"===M?Q:0),width:Math.max(R,2),height:Math.max(l-2*e.ypad-Q,2)}).call(h.stroke,e.outlinecolor).style({fill:"none","stroke-width":e.outlinewidth});var c=({center:.5,right:1}[e.xanchor]||0)*s;t.attr("transform","translate("+(u.l-c)+","+u.t+")");var f={},p=w[e.yanchor],v=A[e.yanchor];"pixels"===e.lenmode?(f.y=e.y,f.t=l*p,f.b=l*v):(f.t=f.b=0,f.yt=e.y+e.len*p,f.yb=e.y-e.len*v);var g=w[e.xanchor],m=A[e.xanchor];if("pixels"===e.thicknessmode)f.x=e.x,f.l=s*g,f.r=s*m;else{var y=s-R;f.l=y*g,f.r=y*m,f.xl=e.x-e.thickness*g,f.xr=e.x+e.thickness*m}a.autoMargin(n,e._id,f)}],n)}e.exports={draw:function(t){var e=t._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(t){var e,n,r,i,a=t._fullLayout,o=t.calcdata,s=[];function u(t){return c(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function l(){"function"===typeof i.calc?i.calc(t,r,e):(e._fillgradient=n.reversescale?g(n.colorscale):n.colorscale,e._zrange=[n[i.min],n[i.max]])}for(var f=0;f<o.length;f++){var d=o[f],h=(r=d[0].trace)._module.colorbar;if(!0===r.visible&&h)for(var p=Array.isArray(h),v=p?h:[h],m=0;m<v.length;m++){var y=(i=v[m]).container;(n=y?r[y]:r)&&n.showscale&&((e=u(n.colorbar))._id="cb"+r.uid+(p&&y?"-"+y:""),e._traceIndex=r.index,e._propPrefix=(y?y+".":"")+"colorbar.",e._meta=r._meta,l(),s.push(e))}}for(var b in a._colorAxes)if((n=a[b]).showscale){var _=a._colorAxes[b];(e=u(n.colorbar))._id="cb"+b,e._propPrefix=b+".colorbar.",e._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==_[0]&&(r=_[1],i.calc=r._module.colorbar.calc),l(),s.push(e)}return s}(t),function(t){return t._id});e.enter().append("g").attr("class",function(t){return t._id}).classed(k.colorbar,!0),e.each(function(e){var n=r.select(this);l.ensureSingle(n,"rect",k.cbbg),l.ensureSingle(n,"g",k.cbfills),l.ensureSingle(n,"g",k.cblines),l.ensureSingle(n,"g",k.cbaxis,function(t){t.classed(k.crisp,!0)}),l.ensureSingle(n,"g",k.cbtitleunshift,function(t){t.append("g").classed(k.cbtitle,!0)}),l.ensureSingle(n,"rect",k.cboutline);var i=M(n,e,t);i&&i.then&&(t._promises||[]).push(i),t._context.edits.colorbarPosition&&function(t,e,n){var r,i,a,s=n._fullLayout._size;u.init({element:t.node(),gd:n,prepFn:function(){r=t.attr("transform"),f(t)},moveFn:function(n,o){t.attr("transform",r+" translate("+n+","+o+")"),i=u.align(e._xLeftFrac+n/s.w,e._thickFrac,0,1,e.xanchor),a=u.align(e._yBottomFrac-o/s.h,e._lenFrac,0,1,e.yanchor);var l=u.getCursor(i,a,e.xanchor,e.yanchor);f(t,l)},doneFn:function(){if(f(t),void 0!==i&&void 0!==a){var r={};r[e._propPrefix+"x"]=i,r[e._propPrefix+"y"]=a,void 0!==e._traceIndex?o.call("_guiRestyle",n,r,e._traceIndex):o.call("_guiRelayout",n,r)}}})}(n,e,t)}),e.exit().each(function(e){a.autoMargin(t,e._id)}).remove(),e.order()}}},{"../../constants/alignment":137,"../../lib":160,"../../lib/extend":155,"../../lib/setcursor":179,"../../lib/svg_text_utils":181,"../../plots/cartesian/axes":204,"../../plots/cartesian/axis_defaults":206,"../../plots/cartesian/layout_attributes":216,"../../plots/cartesian/position_defaults":219,"../../plots/plots":236,"../../registry":243,"../color":42,"../colorscale/helpers":53,"../dragelement":60,"../drawing":63,"../titles":130,"./constants":44,d3:7,tinycolor2:25}],47:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t){return r.isPlainObject(t.colorbar)}},{"../../lib":160}],48:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":43,"./defaults":45,"./draw":46,"./has_colorbar":47}],49:[function(t,e,n){"use strict";var r=t("../colorbar/attributes"),i=t("../../lib/regex").counter,a=t("./scales.js").scales;function o(t){return"`"+t+"`"}Object.keys(a),e.exports=function(t,e){t=t||"";var n,s=(e=e||{}).cLetter||"c",u=("onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(t),"noScale"in e?e.noScale:"marker.line"===t),l="showScaleDflt"in e?e.showScaleDflt:"z"===s,c="string"===typeof e.colorscaleDflt?a[e.colorscaleDflt]:null,f=e.editTypeOverride||"",d=t?t+".":"";"colorAttr"in e?(n=e.colorAttr,e.colorAttr):o(d+(n={z:"z",c:"color"}[s]));var h=s+"auto",p=s+"min",v=s+"max",g=s+"mid",m=(o(d+h),o(d+p),o(d+v),{});m[p]=m[v]=void 0;var y={};y[h]=!1;var b={};return"color"===n&&(b.color={valType:"color",arrayOk:!0,editType:f||"style"},e.anim&&(b.color.anim=!0)),b[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},b[p]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:y},b[v]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:y},b[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},b.colorscale={valType:"colorscale",editType:"calc",dflt:c,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},u||(b.showscale={valType:"boolean",dflt:l,editType:"calc"},b.colorbar=r),e.noColorAxis||(b.coloraxis={valType:"subplotid",regex:i("coloraxis"),dflt:null,editType:"calc"}),b}},{"../../lib/regex":175,"../colorbar/attributes":43,"./scales.js":57}],50:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("./helpers").extractOpts;e.exports=function(t,e,n){var o,s=t._fullLayout,u=n.vals,l=n.containerStr,c=l?i.nestedProperty(e,l).get():e,f=a(c),d=!1!==f.auto,h=f.min,p=f.max,v=f.mid,g=function(){return i.aggNums(Math.min,null,u)},m=function(){return i.aggNums(Math.max,null,u)};void 0===h?h=g():d&&(h=c._colorAx&&r(h)?Math.min(h,g()):g()),void 0===p?p=m():d&&(p=c._colorAx&&r(p)?Math.max(p,m()):m()),d&&void 0!==v&&(p-v>v-h?h=v-(p-v):p-v<v-h&&(p=v+(v-h))),h===p&&(h-=.5,p+=.5),f._sync("min",h),f._sync("max",p),f.autocolorscale&&(o=h*p<0?s.colorscale.diverging:h>=0?s.colorscale.sequential:s.colorscale.sequentialminus,f._sync("colorscale",o))}},{"../../lib":160,"./helpers":53,"fast-isnumeric":9}],51:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./helpers").hasColorscale,a=t("./helpers").extractOpts;e.exports=function(t,e){function n(t,e){var n=t["_"+e];void 0!==n&&(t[e]=n)}function o(t,i){var o=i.container?r.nestedProperty(t,i.container).get():t;if(o)if(o.coloraxis)o._colorAx=e[o.coloraxis];else{var s=a(o),u=s.auto;(u||void 0===s.min)&&n(o,i.min),(u||void 0===s.max)&&n(o,i.max),s.autocolorscale&&n(o,"colorscale")}}for(var s=0;s<t.length;s++){var u=t[s],l=u._module.colorbar;if(l)if(Array.isArray(l))for(var c=0;c<l.length;c++)o(u,l[c]);else o(u,l);i(u,"marker.line")&&o(u,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in e._colorAxes)o(e[f],{min:"cmin",max:"cmax"})}},{"../../lib":160,"./helpers":53}],52:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../colorbar/has_colorbar"),o=t("../colorbar/defaults"),s=t("./scales").isValid,u=t("../../registry").traceIs;function l(t,e){var n=e.slice(0,e.length-1);return e?i.nestedProperty(t,n).get()||{}:t}e.exports=function t(e,n,c,f,d){var h=d.prefix,p=d.cLetter,v="_module"in n,g=l(e,h),m=l(n,h),y=l(n._template||{},h)||{},b=function(){return delete e.coloraxis,delete n.coloraxis,t(e,n,c,f,d)};if(v){var _=c._colorAxes||{},x=f(h+"coloraxis");if(x){var w=u(n,"contour")&&i.nestedProperty(n,"contours.coloring").get()||"heatmap",A=_[x];return void(A?(A[2].push(b),A[0]!==w&&(A[0]=!1,i.warn(["Ignoring coloraxis:",x,"setting","as it is linked to incompatible colorscales."].join(" ")))):_[x]=[w,n,[b]])}}var k=g[p+"min"],M=g[p+"max"],T=r(k)&&r(M)&&k<M,S=f(h+p+"auto",!T);S?f(h+p+"mid"):(f(h+p+"min"),f(h+p+"max"));var C,E=g.colorscale,O=y.colorscale;if(void 0!==E&&(C=!s(E)),void 0!==O&&(C=!s(O)),f(h+"autocolorscale",C),f(h+"colorscale"),f(h+"reversescale"),"marker.line."!==h){var P;h&&v&&(P=a(g));var L=f(h+"showscale",P);L&&o(g,m,c)}}},{"../../lib":160,"../../registry":243,"../colorbar/defaults":45,"../colorbar/has_colorbar":47,"./scales":57,"fast-isnumeric":9}],53:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),a=t("fast-isnumeric"),o=t("../../lib"),s=t("../color"),u=t("./scales").isValid,l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],c=["min","max","mid","auto"];function f(t){var e,n,r,i=t._colorAx,a=i||t,o={};for(n=0;n<l.length;n++)r=l[n],o[r]=a[r];if(i)for(e="c",n=0;n<c.length;n++)r=c[n],o[r]=a["c"+r];else{var s;for(n=0;n<c.length;n++)r=c[n],(s="c"+r)in a?o[r]=a[s]:(s="z"+r)in a&&(o[r]=a[s]);e=s.charAt(0)}return o._sync=function(t,n){var r=-1!==c.indexOf(t)?e+t:t;a[r]=a["_"+r]=n},o}function d(t){for(var e=f(t),n=e.min,r=e.max,i=e.reversescale?h(e.colorscale):e.colorscale,a=i.length,o=new Array(a),s=new Array(a),u=0;u<a;u++){var l=i[u];o[u]=n+l[0]*(r-n),s[u]=l[1]}return{domain:o,range:s}}function h(t){for(var e=t.length,n=new Array(e),r=e-1,i=0;r>=0;r--,i++){var a=t[r];n[i]=[1-a[0],a[1]]}return n}function p(t,e){e=e||{};for(var n=t.domain,o=t.range,u=o.length,l=new Array(u),c=0;c<u;c++){var f=i(o[c]).toRgb();l[c]=[f.r,f.g,f.b,f.a]}var d,h=r.scale.linear().domain(n).range(l).clamp(!0),p=e.noNumericCheck,g=e.returnArray;return(d=p&&g?h:p?function(t){return v(h(t))}:g?function(t){return a(t)?h(t):i(t).isValid()?t:s.defaultLine}:function(t){return a(t)?v(h(t)):i(t).isValid()?t:s.defaultLine}).domain=h.domain,d.range=function(){return o},d}function v(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return i(e).toRgbString()}e.exports={hasColorscale:function(t,e){var n=e?o.nestedProperty(t,e).get()||{}:t,r=n.color,i=!1;if(o.isArrayOrTypedArray(r))for(var s=0;s<r.length;s++)if(a(r[s])){i=!0;break}return o.isPlainObject(n)&&(i||!0===n.showscale||a(n.cmin)&&a(n.cmax)||u(n.colorscale)||o.isPlainObject(n.colorbar))},extractOpts:f,extractScale:d,flipScale:h,makeColorScaleFunc:p,makeColorScaleFuncFromTrace:function(t,e){return p(d(t),e)}}},{"../../lib":160,"../color":42,"./scales":57,d3:7,"fast-isnumeric":9,tinycolor2:25}],54:[function(t,e,n){"use strict";var r=t("./scales"),i=t("./helpers");e.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},{"./attributes":49,"./calc":50,"./cross_trace_defaults":51,"./defaults":52,"./helpers":53,"./layout_attributes":55,"./layout_defaults":56,"./scales":57}],55:[function(t,e,n){"use strict";var r=t("../../lib/extend").extendFlat,i=t("./attributes"),a=t("./scales").scales;e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":155,"./attributes":49,"./scales":57}],56:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/plot_template"),a=t("./layout_attributes"),o=t("./defaults");e.exports=function(t,e){function n(n,i){return r.coerce(t,e,a,n,i)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var s,u,l=e._colorAxes;function c(t,e){return r.coerce(s,u,a.coloraxis,t,e)}for(var f in l){var d=l[f];if(d[0])s=t[f]||{},(u=i.newContainer(e,f,"coloraxis"))._name=f,o(s,u,e,c,{prefix:"",cLetter:"c"});else{for(var h=0;h<d[2].length;h++)d[2][h]();delete e._colorAxes[f]}}}},{"../../lib":160,"../../plot_api/plot_template":194,"./defaults":52,"./layout_attributes":55}],57:[function(t,e,n){"use strict";var r=t("tinycolor2"),i={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=i.RdBu;function o(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!==+t[0][0]||1!==+t[t.length-1][0])return!1;for(var n=0;n<t.length;n++){var i=t[n];if(2!==i.length||+i[0]<e||!r(i[1]).isValid())return!1;e=+i[0]}return!0}e.exports={scales:i,defaultScale:a,get:function(t,e){if(e||(e=a),!t)return e;function n(){try{t=i[t]||JSON.parse(t)}catch(n){t=e}}return"string"===typeof t&&(n(),"string"===typeof t&&n()),o(t)?t:e},isValid:function(t){return void 0!==i[t]||o(t)}}},{tinycolor2:25}],58:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){var a=(t-n)/(r-n),o=a+e/(r-n),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s}},{}],59:[function(t,e,n){"use strict";var r=t("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(t,e,n,a){return t="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*t),0,2),e="bottom"===a?0:"middle"===a?1:"top"===a?2:r.constrain(Math.floor(3*e),0,2),i[e][t]}},{"../../lib":160}],60:[function(t,e,n){"use strict";var r=t("mouse-event-offset"),i=t("has-hover"),a=t("has-passive-events"),o=t("../../lib").removeElement,s=t("../../plots/cartesian/constants"),u=e.exports={};u.align=t("./align"),u.getCursor=t("./cursor");var l=t("./unhover");function c(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function f(t){return r(t.changedTouches?t.changedTouches[0]:t,document.body)}u.unhover=l.wrapped,u.unhoverRaw=l.raw,u.init=function(t){var e,n,r,l,d,h,p,v,g=t.gd,m=1,y=g._context.doubleClickDelay,b=t.element;g._mouseDownTime||(g._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=x,a?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=x,b.addEventListener("touchstart",x,{passive:!1})):b.ontouchstart=x;var _=t.clampFn||function(t,e,n){return Math.abs(t)<n&&(t=0),Math.abs(e)<n&&(e=0),[t,e]};function x(a){g._dragged=!1,g._dragging=!0;var o=f(a);e=o[0],n=o[1],p=a.target,h=a,v=2===a.buttons||a.ctrlKey,"undefined"===typeof a.clientX&&"undefined"===typeof a.clientY&&(a.clientX=e,a.clientY=n),(r=(new Date).getTime())-g._mouseDownTime<y?m+=1:(m=1,g._mouseDownTime=r),t.prepFn&&t.prepFn(a,e,n),i&&!v?(d=c()).style.cursor=window.getComputedStyle(b).cursor:i||(d=document,l=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),!1!==t.dragmode&&(a.preventDefault(),document.addEventListener("mousemove",w),document.addEventListener("touchmove",w))}function w(r){r.preventDefault();var i=f(r),a=t.minDrag||s.MINDRAG,o=_(i[0]-e,i[1]-n,a),l=o[0],c=o[1];(l||c)&&(g._dragged=!0,u.unhover(g)),g._dragged&&t.moveFn&&!v&&(g._dragdata={element:b,dx:l,dy:c},t.moveFn(l,c))}function A(e){if(delete g._dragdata,!1!==t.dragmode&&(e.preventDefault(),document.removeEventListener("mousemove",w),document.removeEventListener("touchmove",w)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),i?o(d):l&&(d.documentElement.style.cursor=l,l=null),g._dragging){if(g._dragging=!1,(new Date).getTime()-g._mouseDownTime>y&&(m=Math.max(m-1,1)),g._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(m,h),!v){var n;try{n=new MouseEvent("click",e)}catch(a){var r=f(e);(n=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,r[0],r[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}p.dispatchEvent(n)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},u.coverSlip=c},{"../../lib":160,"../../plots/cartesian/constants":210,"./align":58,"./cursor":59,"./unhover":61,"has-hover":11,"has-passive-events":12,"mouse-event-offset":15}],61:[function(t,e,n){"use strict";var r=t("../../lib/events"),i=t("../../lib/throttle"),a=t("../../lib/dom").getGraphDiv,o=t("../fx/constants"),s=e.exports={};s.wrapped=function(t,e,n){(t=a(t))._fullLayout&&i.clear(t._fullLayout._uid+o.HOVERID),s.raw(t,e,n)},s.raw=function(t,e){var n=t._fullLayout,i=t._hoverdata;e||(e={}),e.target&&!1===r.triggerHandler(t,"plotly_beforehover",e)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&i&&t.emit("plotly_unhover",{event:e,points:i}))}},{"../../lib/dom":153,"../../lib/events":154,"../../lib/throttle":182,"../fx/constants":75}],62:[function(t,e,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],63:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("tinycolor2"),o=t("../../registry"),s=t("../color"),u=t("../colorscale"),l=t("../../lib"),c=t("../../lib/svg_text_utils"),f=t("../../constants/xmlns_namespaces"),d=t("../../constants/alignment"),h=d.LINE_SPACING,p=t("../../constants/interactions").DESELECTDIM,v=t("../../traces/scatter/subtypes"),g=t("../../traces/scatter/make_bubble_size_func"),m=e.exports={};m.font=function(t,e,n,r){l.isPlainObject(e)&&(r=e.color,n=e.size,e=e.family),e&&t.style("font-family",e),n+1&&t.style("font-size",n+"px"),r&&t.call(s.fill,r)},m.setPosition=function(t,e,n){t.attr("x",e).attr("y",n)},m.setSize=function(t,e,n){t.attr("width",e).attr("height",n)},m.setRect=function(t,e,n,r,i){t.call(m.setPosition,e,n).call(m.setSize,r,i)},m.translatePoint=function(t,e,n,r){var a=n.c2p(t.x),o=r.c2p(t.y);return!!(i(a)&&i(o)&&e.node())&&("text"===e.node().nodeName?e.attr("x",a).attr("y",o):e.attr("transform","translate("+a+","+o+")"),!0)},m.translatePoints=function(t,e,n){t.each(function(t){var i=r.select(this);m.translatePoint(t,i,e,n)})},m.hideOutsideRangePoint=function(t,e,n,r,i,a){e.attr("display",n.isPtWithinRange(t,i)&&r.isPtWithinRange(t,a)?null:"none")},m.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var n=e.xaxis,i=e.yaxis;t.each(function(e){var a=e[0].trace,s=a.xcalendar,u=a.ycalendar,l=o.traceIs(a,"bar-like")?".bartext":".point,.textpoint";t.selectAll(l).each(function(t){m.hideOutsideRangePoint(t,r.select(this),n,i,s,u)})})}},m.crispRound=function(t,e,n){return e&&i(e)?t._context.staticPlot?e:e<1?1:Math.round(e):n||0},m.singleLineStyle=function(t,e,n,r,i){e.style("fill","none");var a=(((t||[])[0]||{}).trace||{}).line||{},o=n||a.width||0,u=i||a.dash||"";s.stroke(e,r||a.color),m.dashLine(e,u,o)},m.lineGroupStyle=function(t,e,n,i){t.style("fill","none").each(function(t){var a=(((t||[])[0]||{}).trace||{}).line||{},o=e||a.width||0,u=i||a.dash||"";r.select(this).call(s.stroke,n||a.color).call(m.dashLine,u,o)})},m.dashLine=function(t,e,n){n=+n||0,e=m.dashStyle(e,n),t.style({"stroke-dasharray":e,"stroke-width":n+"px"})},m.dashStyle=function(t,e){e=+e||1;var n=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=n+"px,"+n+"px":"dash"===t?t=3*n+"px,"+3*n+"px":"longdash"===t?t=5*n+"px,"+5*n+"px":"dashdot"===t?t=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===t&&(t=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),t},m.singleFillStyle=function(t){var e=r.select(t.node()),n=e.data(),i=(((n[0]||[])[0]||{}).trace||{}).fillcolor;i&&t.call(s.fill,i)},m.fillGroupStyle=function(t){t.style("stroke-width",0).each(function(t){var e=r.select(this);t[0].trace&&e.call(s.fill,t[0].trace.fillcolor)})};var y=t("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(y).forEach(function(t){var e=y[t];m.symbolList=m.symbolList.concat([e.n,t,e.n+100,t+"-open"]),m.symbolNames[e.n]=t,m.symbolFuncs[e.n]=e.f,e.needLine&&(m.symbolNeedLines[e.n]=!0),e.noDot?m.symbolNoDot[e.n]=!0:m.symbolList=m.symbolList.concat([e.n+200,t+"-dot",e.n+300,t+"-open-dot"]),e.noFill&&(m.symbolNoFill[e.n]=!0)});var b=m.symbolNames.length,_="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function x(t,e){var n=t%100;return m.symbolFuncs[n](e)+(t>=200?_:"")}m.symbolNumber=function(t){if("string"===typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=m.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=b||t>=400?0:Math.floor(Math.max(t,0))};var w={x1:1,x2:0,y1:0,y2:0},A={x1:0,x2:0,y1:1,y2:0},k=r.format("~.1f"),M={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:A},verticalreversed:{node:"linearGradient",attrs:A,reversed:!0}};m.gradient=function(t,e,n,i,o,u){for(var c=o.length,f=M[i],d=new Array(c),h=0;h<c;h++)f.reversed?d[c-1-h]=[k(100*(1-o[h][0])),o[h][1]]:d[h]=[k(100*o[h][0]),o[h][1]];var p="g"+e._fullLayout._uid+"-"+n,v=e._fullLayout._defs.select(".gradients").selectAll("#"+p).data([i+d.join(";")],l.identity);v.exit().remove(),v.enter().append(f.node).each(function(){var t=r.select(this);f.attrs&&t.attr(f.attrs),t.attr("id",p);var e=t.selectAll("stop").data(d);e.exit().remove(),e.enter().append("stop"),e.each(function(t){var e=a(t[1]);r.select(this).attr({offset:t[0]+"%","stop-color":s.tinyRGB(e),"stop-opacity":e.getAlpha()})})}),t.style(u,F(p,e)).style(u+"-opacity",null)},m.initGradients=function(t){var e=l.ensureSingle(t._fullLayout._defs,"g","gradients");e.selectAll("linearGradient,radialGradient").remove()},m.pointStyle=function(t,e,n){if(t.size()){var i=m.makePointStyleFns(e);t.each(function(t){m.singlePointStyle(t,r.select(this),e,i,n)})}},m.singlePointStyle=function(t,e,n,r,i){var a=n.marker,o=a.line;if(e.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(t):void 0===t.mo?a.opacity:t.mo),r.ms2mrc){var u;u="various"===t.ms||"various"===a.size?3:r.ms2mrc(t.ms),t.mrc=u,r.selectedSizeFn&&(u=t.mrc=r.selectedSizeFn(t));var c=m.symbolNumber(t.mx||a.symbol)||0;t.om=c%200>=100,e.attr("d",x(c,u))}var f,d,h,p=!1;if(t.so)h=o.outlierwidth,d=o.outliercolor,f=a.outliercolor;else{var v=(o||{}).width;h=(t.mlw+1||v+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,d="mlc"in t?t.mlcc=r.lineScale(t.mlc):l.isArrayOrTypedArray(o.color)?s.defaultLine:o.color,l.isArrayOrTypedArray(a.color)&&(f=s.defaultLine,p=!0),f="mc"in t?t.mcc=r.markerScale(t.mc):a.color||"rgba(0,0,0,0)",r.selectedColorFn&&(f=r.selectedColorFn(t))}if(t.om)e.call(s.stroke,f).style({"stroke-width":(h||1)+"px",fill:"none"});else{e.style("stroke-width",h+"px");var g=a.gradient,y=t.mgt;if(y?p=!0:y=g&&g.type,Array.isArray(y)&&(y=y[0],M[y]||(y=0)),y&&"none"!==y){var b=t.mgc;b?p=!0:b=g.color;var _=n.uid;p&&(_+="-"+t.i),m.gradient(e,i,_,y,[[0,b],[1,f]],"fill")}else s.fill(e,f);h&&s.stroke(e,d)}},m.makePointStyleFns=function(t){var e={},n=t.marker;return e.markerScale=m.tryColorscale(n,""),e.lineScale=m.tryColorscale(n,"line"),o.traceIs(t,"symbols")&&(e.ms2mrc=v.isBubble(t)?g(t):function(){return(n.size||6)/2}),t.selectedpoints&&l.extendFlat(e,m.makeSelectedPointStyleFns(t)),e},m.makeSelectedPointStyleFns=function(t){var e={},n=t.selected||{},r=t.unselected||{},i=t.marker||{},a=n.marker||{},s=r.marker||{},u=i.opacity,c=a.opacity,f=s.opacity,d=void 0!==c,h=void 0!==f;(l.isArrayOrTypedArray(u)||d||h)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?i.opacity:t.mo;return t.selected?d?c:e:h?f:p*e});var v=i.color,g=a.color,m=s.color;(g||m)&&(e.selectedColorFn=function(t){var e=t.mcc||v;return t.selected?g||e:m||e});var y=i.size,b=a.size,_=s.size,x=void 0!==b,w=void 0!==_;return o.traceIs(t,"symbols")&&(x||w)&&(e.selectedSizeFn=function(t){var e=t.mrc||y/2;return t.selected?x?b/2:e:w?_/2:e}),e},m.makeSelectedTextStyleFns=function(t){var e={},n=t.selected||{},r=t.unselected||{},i=t.textfont||{},a=n.textfont||{},o=r.textfont||{},u=i.color,l=a.color,c=o.color;return e.selectedTextColorFn=function(t){var e=t.tc||u;return t.selected?l||e:c||(l?e:s.addOpacity(e,p))},e},m.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=m.makeSelectedPointStyleFns(e),i=e.marker||{},a=[];n.selectedOpacityFn&&a.push(function(t,e){t.style("opacity",n.selectedOpacityFn(e))}),n.selectedColorFn&&a.push(function(t,e){s.fill(t,n.selectedColorFn(e))}),n.selectedSizeFn&&a.push(function(t,e){var r=e.mx||i.symbol||0,a=n.selectedSizeFn(e);t.attr("d",x(m.symbolNumber(r),a)),e.mrc2=a}),a.length&&t.each(function(t){for(var e=r.select(this),n=0;n<a.length;n++)a[n](e,t)})}},m.tryColorscale=function(t,e){var n=e?l.nestedProperty(t,e).get():t;if(n){var r=n.color;if((n.colorscale||n._colorAx)&&l.isArrayOrTypedArray(r))return u.makeColorScaleFuncFromTrace(n)}return l.identity};var T={start:1,end:-1,middle:0,bottom:1,top:-1};function S(t,e,n,i){var a=r.select(t.node().parentNode),o=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",s=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",u=i?i/.8+1:0,l=(c.lineCount(t)-1)*h+1,f=T[s]*u,d=.75*n+T[o]*u+(T[o]-1)*l*n/2;t.attr("text-anchor",s),a.attr("transform","translate("+f+","+d+")")}function C(t,e){var n=t.ts||e.textfont.size;return i(n)&&n>0?n:0}m.textPointStyle=function(t,e,n){if(t.size()){var i;if(e.selectedpoints){var a=m.makeSelectedTextStyleFns(e);i=a.selectedTextColorFn}t.each(function(t){var a=r.select(this),o=l.extractOption(t,e,"tx","text");if(o||0===o){var s=t.tp||e.textposition,u=C(t,e),f=i?i(t):t.tc||e.textfont.color;a.call(m.font,t.tf||e.textfont.family,u,f).text(o).call(c.convertToTspans,n).call(S,s,u,t.mrc)}else a.remove()})}},m.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=m.makeSelectedTextStyleFns(e);t.each(function(t){var i=r.select(this),a=n.selectedTextColorFn(t),o=t.tp||e.textposition,u=C(t,e);s.fill(i,a),S(i,o,u,t.mrc2||t.mrc)})}};var E=.5;function O(t,e,n,i){var a=t[0]-e[0],o=t[1]-e[1],s=n[0]-e[0],u=n[1]-e[1],l=Math.pow(a*a+o*o,E/2),c=Math.pow(s*s+u*u,E/2),f=(c*c*a-l*l*s)*i,d=(c*c*o-l*l*u)*i,h=3*c*(l+c),p=3*l*(l+c);return[[r.round(e[0]+(h&&f/h),2),r.round(e[1]+(h&&d/h),2)],[r.round(e[0]-(p&&f/p),2),r.round(e[1]-(p&&d/p),2)]]}m.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var n,r="M"+t[0],i=[];for(n=1;n<t.length-1;n++)i.push(O(t[n-1],t[n],t[n+1],e));for(r+="Q"+i[0][0]+" "+t[1],n=2;n<t.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+t[n];return r+="Q"+i[t.length-3][1]+" "+t[t.length-1]},m.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var n,r="M"+t[0],i=t.length-1,a=[O(t[i],t[0],t[1],e)];for(n=1;n<i;n++)a.push(O(t[n-1],t[n],t[n+1],e));for(a.push(O(t[i-1],t[i],t[0],e)),n=1;n<=i;n++)r+="C"+a[n-1][1]+" "+a[n][0]+" "+t[n];return r+="C"+a[i][1]+" "+a[0][0]+" "+t[0]+"Z"};var P={hv:function(t,e){return"H"+r.round(e[0],2)+"V"+r.round(e[1],2)},vh:function(t,e){return"V"+r.round(e[1],2)+"H"+r.round(e[0],2)},hvh:function(t,e){return"H"+r.round((t[0]+e[0])/2,2)+"V"+r.round(e[1],2)+"H"+r.round(e[0],2)},vhv:function(t,e){return"V"+r.round((t[1]+e[1])/2,2)+"H"+r.round(e[0],2)+"V"+r.round(e[1],2)}},L=function(t,e){return"L"+r.round(e[0],2)+","+r.round(e[1],2)};m.steps=function(t){var e=P[t]||L;return function(t){for(var n="M"+r.round(t[0][0],2)+","+r.round(t[0][1],2),i=1;i<t.length;i++)n+=e(t[i-1],t[i]);return n}},m.makeTester=function(){var t=l.ensureSingleById(r.select("body"),"svg","js-plotly-tester",function(t){t.attr(f.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),e=l.ensureSingle(t,"path","js-reference-point",function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=t,m.testref=e},m.savedBBoxes={};var R=0;function D(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}function F(t,e){if(!t)return null;var n=e._context,r=n._exportedPlot?"":n._baseUrl||"";return"url('"+r+"#"+t+"')"}m.bBox=function(t,e,n){var i,a,o;if(n||(n=D(t)),n){if(i=m.savedBBoxes[n])return l.extendFlat({},i)}else if(1===t.childNodes.length){var s=t.childNodes[0];if(n=D(s)){var u=+s.getAttribute("x")||0,f=+s.getAttribute("y")||0,d=s.getAttribute("transform");if(!d){var h=m.bBox(s,!1,n);return u&&(h.left+=u,h.right+=u),f&&(h.top+=f,h.bottom+=f),h}if(n+="~"+u+"~"+f+"~"+d,i=m.savedBBoxes[n])return l.extendFlat({},i)}}e?a=t:(o=m.tester.node(),a=t.cloneNode(!0),o.appendChild(a)),r.select(a).attr("transform",null).call(c.positionText,0,0);var p=a.getBoundingClientRect(),v=m.testref.node().getBoundingClientRect();e||o.removeChild(a);var g={height:p.height,width:p.width,left:p.left-v.left,top:p.top-v.top,right:p.right-v.left,bottom:p.bottom-v.top};return R>=1e4&&(m.savedBBoxes={},R=0),n&&(m.savedBBoxes[n]=g),R++,l.extendFlat({},g)},m.setClipUrl=function(t,e,n){t.attr("clip-path",F(e,n))},m.getTranslate=function(t){var e=t.attr?"attr":"getAttribute",n=t[e]("transform")||"",r=n.replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+r[0]||0,y:+r[1]||0}},m.setTranslate=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",a=t[r]("transform")||"";return e=e||0,n=n||0,a=a.replace(/(\btranslate\(.*?\);?)/,"").trim(),a=(a+=" translate("+e+", "+n+")").trim(),t[i]("transform",a),a},m.getScale=function(t){var e=t.attr?"attr":"getAttribute",n=t[e]("transform")||"",r=n.replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+r[0]||1,y:+r[1]||1}},m.setScale=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",a=t[r]("transform")||"";return e=e||1,n=n||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+=" scale("+e+", "+n+")").trim(),t[i]("transform",a),a};var j=/\s*sc.*/;m.setPointGroupScale=function(t,e,n){if(e=e||1,n=n||1,t){var r=1===e&&1===n?"":" scale("+e+","+n+")";t.each(function(){var t=(this.getAttribute("transform")||"").replace(j,"");t=(t+=r).trim(),this.setAttribute("transform",t)})}};var N=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(t,e,n){t&&t.each(function(){var t,i=r.select(this),a=i.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),u=(i.attr("transform")||"").match(N);t=1===e&&1===n?[]:["translate("+o+","+s+")","scale("+e+","+n+")","translate("+-o+","+-s+")"],u&&t.push(u),i.attr("transform",t.join(" "))}})}},{"../../constants/alignment":137,"../../constants/interactions":139,"../../constants/xmlns_namespaces":141,"../../lib":160,"../../lib/svg_text_utils":181,"../../registry":243,"../../traces/scatter/make_bubble_size_func":297,"../../traces/scatter/subtypes":304,"../color":42,"../colorscale":54,"./symbol_defs":64,d3:7,"fast-isnumeric":9,tinycolor2:25}],64:[function(t,e,n){"use strict";var r=t("d3");e.exports={circle:{n:0,f:function(t){var e=r.round(t,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(t){var e=r.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(t){var e=r.round(.4*t,2),n=r.round(1.2*t,2);return"M"+n+","+e+"H"+e+"V"+n+"H-"+e+"V"+e+"H-"+n+"V-"+e+"H-"+e+"V-"+n+"H"+e+"V-"+e+"H"+n+"Z"}},x:{n:4,f:function(t){var e=r.round(.8*t/Math.sqrt(2),2),n="l"+e+","+e,i="l"+e+",-"+e,a="l-"+e+",-"+e,o="l-"+e+","+e;return"M0,"+e+n+i+a+i+a+o+a+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(t){var e=r.round(2*t/Math.sqrt(3),2),n=r.round(t/2,2),i=r.round(t,2);return"M-"+e+","+n+"H"+e+"L0,-"+i+"Z"}},"triangle-down":{n:6,f:function(t){var e=r.round(2*t/Math.sqrt(3),2),n=r.round(t/2,2),i=r.round(t,2);return"M-"+e+",-"+n+"H"+e+"L0,"+i+"Z"}},"triangle-left":{n:7,f:function(t){var e=r.round(2*t/Math.sqrt(3),2),n=r.round(t/2,2),i=r.round(t,2);return"M"+n+",-"+e+"V"+e+"L-"+i+",0Z"}},"triangle-right":{n:8,f:function(t){var e=r.round(2*t/Math.sqrt(3),2),n=r.round(t/2,2),i=r.round(t,2);return"M-"+n+",-"+e+"V"+e+"L"+i+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M-"+n+",-"+e+"H"+e+"V"+n+"Z"}},"triangle-se":{n:10,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M"+e+",-"+n+"V"+e+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M"+n+","+e+"H-"+e+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M-"+e+","+n+"V-"+e+"H"+n+"Z"}},pentagon:{n:13,f:function(t){var e=r.round(.951*t,2),n=r.round(.588*t,2),i=r.round(-t,2),a=r.round(-.309*t,2),o=r.round(.809*t,2);return"M"+e+","+a+"L"+n+","+o+"H-"+n+"L-"+e+","+a+"L0,"+i+"Z"}},hexagon:{n:14,f:function(t){var e=r.round(t,2),n=r.round(t/2,2),i=r.round(t*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+e+"L-"+i+","+n+"V-"+n+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=r.round(t,2),n=r.round(t/2,2),i=r.round(t*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+e+",0L"+n+",-"+i+"H-"+n+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=r.round(.924*t,2),n=r.round(.383*t,2);return"M-"+n+",-"+e+"H"+n+"L"+e+",-"+n+"V"+n+"L"+n+","+e+"H-"+n+"L-"+e+","+n+"V-"+n+"Z"}},star:{n:17,f:function(t){var e=1.4*t,n=r.round(.225*e,2),i=r.round(.951*e,2),a=r.round(.363*e,2),o=r.round(.588*e,2),s=r.round(-e,2),u=r.round(-.309*e,2),l=r.round(.118*e,2),c=r.round(.809*e,2),f=r.round(.382*e,2);return"M"+n+","+u+"H"+i+"L"+a+","+l+"L"+o+","+c+"L0,"+f+"L-"+o+","+c+"L-"+a+","+l+"L-"+i+","+u+"H-"+n+"L0,"+s+"Z"}},hexagram:{n:18,f:function(t){var e=r.round(.66*t,2),n=r.round(.38*t,2),i=r.round(.76*t,2);return"M-"+i+",0l-"+n+",-"+e+"h"+i+"l"+n+",-"+e+"l"+n+","+e+"h"+i+"l-"+n+","+e+"l"+n+","+e+"h-"+i+"l-"+n+","+e+"l-"+n+",-"+e+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=r.round(t*Math.sqrt(3)*.8,2),n=r.round(.8*t,2),i=r.round(1.6*t,2),a=r.round(4*t,2),o="A "+a+","+a+" 0 0 1 ";return"M-"+e+","+n+o+e+","+n+o+"0,-"+i+o+"-"+e+","+n+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=r.round(t*Math.sqrt(3)*.8,2),n=r.round(.8*t,2),i=r.round(1.6*t,2),a=r.round(4*t,2),o="A "+a+","+a+" 0 0 1 ";return"M"+e+",-"+n+o+"-"+e+",-"+n+o+"0,"+i+o+e+",-"+n+"Z"}},"star-square":{n:21,f:function(t){var e=r.round(1.1*t,2),n=r.round(2*t,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+e+",-"+e+i+"-"+e+","+e+i+e+","+e+i+e+",-"+e+i+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=r.round(1.4*t,2),n=r.round(1.9*t,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+e+",0"+i+"0,"+e+i+e+",0"+i+"0,-"+e+i+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=r.round(.7*t,2),n=r.round(1.4*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=r.round(1.4*t,2),n=r.round(.7*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){var e=r.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=r.round(t,2),n=r.round(t/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){var e=r.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){var e=r.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=r.round(1.3*t,2),n=r.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){var e=r.round(1.4*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=r.round(1.2*t,2),n=r.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=r.round(t/2,2),n=r.round(t,2);return"M"+e+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+e+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+e+","+i+"L0,0M"+e+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+e+",-"+i+"L0,0M"+e+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M"+i+","+e+"L0,0M"+i+",-"+e+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+i+","+e+"L0,0M-"+i+",-"+e+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){var e=r.round(1.4*t,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){var e=r.round(1.4*t,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){var e=r.round(t,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0}}},{d3:7}],65:[function(t,e,n){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],66:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../registry"),a=t("../../plots/cartesian/axes"),o=t("../../lib"),s=t("./compute_error");function u(t,e,n,i){var u=e["error_"+i]||{},l=u.visible&&-1!==["linear","log"].indexOf(n.type),c=[];if(l){for(var f=s(u),d=0;d<t.length;d++){var h=t[d],p=h.i;if(void 0===p)p=d;else if(null===p)continue;var v=h[i];if(r(n.c2l(v))){var g=f(v,p);if(r(g[0])&&r(g[1])){var m=h[i+"s"]=v-g[0],y=h[i+"h"]=v+g[1];c.push(m,y)}}}var b=n._id,_=e._extremes[b],x=a.findExtremes(n,c,o.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(x.min),_.max=_.max.concat(x.max)}}e.exports=function(t){for(var e=t.calcdata,n=0;n<e.length;n++){var r=e[n],o=r[0].trace;if(!0===o.visible&&i.traceIs(o,"errorBarsOK")){var s=a.getFromId(t,o.xaxis),l=a.getFromId(t,o.yaxis);u(r,o,s,"x"),u(r,o,l,"y")}}}},{"../../lib":160,"../../plots/cartesian/axes":204,"../../registry":243,"./compute_error":67,"fast-isnumeric":9}],67:[function(t,e,n){"use strict";function r(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}e.exports=function(t){var e=t.type,n=t.symmetric;if("data"===e){var i=t.array||[];if(n)return function(t,e){var n=+i[e];return[n,n]};var a=t.arrayminus||[];return function(t,e){var n=+i[e],r=+a[e];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var o=r(e,t.value),s=r(e,t.valueminus);return n||void 0===t.valueminus?function(t){var e=o(t);return[e,e]}:function(t){return[s(t),o(t)]}}},{}],68:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../registry"),a=t("../../lib"),o=t("../../plot_api/plot_template"),s=t("./attributes");e.exports=function(t,e,n,u){var l="error_"+u.axis,c=o.newContainer(e,l),f=t[l]||{};function d(t,e){return a.coerce(f,c,s,t,e)}var h=void 0!==f.array||void 0!==f.value||"sqrt"===f.type,p=d("visible",h);if(!1!==p){var v=d("type","array"in f?"data":"percent"),g=!0;"sqrt"!==v&&(g=d("symmetric",!(("data"===v?"arrayminus":"valueminus")in f))),"data"===v?(d("array"),d("traceref"),g||(d("arrayminus"),d("tracerefminus"))):"percent"!==v&&"constant"!==v||(d("value"),g||d("valueminus"));var m="copy_"+u.inherit+"style";if(u.inherit){var y=e["error_"+u.inherit];(y||{}).visible&&d(m,!(f.color||r(f.thickness)||r(f.width)))}u.inherit&&c[m]||(d("color",n),d("thickness"),d("width",i.traceIs(e,"gl3d")?0:4))}}},{"../../lib":160,"../../plot_api/plot_template":194,"../../registry":243,"./attributes":65,"fast-isnumeric":9}],69:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/edit_types").overrideAll,a=t("./attributes"),o={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;var s={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a),error_z:r.extendFlat({},a)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:i(s,"calc","nested"),scattergl:i(o,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:function(t,e,n){(e.error_y||{}).visible&&(n.yerr=t.yh-t.y,e.error_y.symmetric||(n.yerrneg=t.y-t.ys)),(e.error_x||{}).visible&&(n.xerr=t.xh-t.x,e.error_x.symmetric||(n.xerrneg=t.x-t.xs))}}},{"../../lib":160,"../../plot_api/edit_types":187,"./attributes":65,"./calc":66,"./compute_error":67,"./defaults":68,"./plot":70,"./style":71}],70:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../drawing"),o=t("../../traces/scatter/subtypes");e.exports=function(t,e,n,s){var u=n.xaxis,l=n.yaxis,c=s&&s.duration>0;e.each(function(e){var f,d=e[0].trace,h=d.error_x||{},p=d.error_y||{};d.ids&&(f=function(t){return t.id});var v=o.hasMarkers(d)&&d.marker.maxdisplayed>0;p.visible||h.visible||(e=[]);var g=r.select(this).selectAll("g.errorbar").data(e,f);if(g.exit().remove(),e.length){h.visible||g.selectAll("path.xerror").remove(),p.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var m=g.enter().append("g").classed("errorbar",!0);c&&m.style("opacity",0).transition().duration(s.duration).style("opacity",1),a.setClipUrl(g,n.layerClipId,t),g.each(function(t){var e=r.select(this),n=function(t,e,n){var r={x:e.c2p(t.x),y:n.c2p(t.y)};return void 0!==t.yh&&(r.yh=n.c2p(t.yh),r.ys=n.c2p(t.ys),i(r.ys)||(r.noYS=!0,r.ys=n.c2p(t.ys,!0))),void 0!==t.xh&&(r.xh=e.c2p(t.xh),r.xs=e.c2p(t.xs),i(r.xs)||(r.noXS=!0,r.xs=e.c2p(t.xs,!0))),r}(t,u,l);if(!v||t.vis){var a,o=e.select("path.yerror");if(p.visible&&i(n.x)&&i(n.yh)&&i(n.ys)){var f=p.width;a="M"+(n.x-f)+","+n.yh+"h"+2*f+"m-"+f+",0V"+n.ys,n.noYS||(a+="m-"+f+",0h"+2*f),o.size()?c&&(o=o.transition().duration(s.duration).ease(s.easing)):o=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),o.attr("d",a)}else o.remove();var d=e.select("path.xerror");if(h.visible&&i(n.y)&&i(n.xh)&&i(n.xs)){var g=(h.copy_ystyle?p:h).width;a="M"+n.xh+","+(n.y-g)+"v"+2*g+"m0,-"+g+"H"+n.xs,n.noXS||(a+="m0,-"+g+"v"+2*g),d.size()?c&&(d=d.transition().duration(s.duration).ease(s.easing)):d=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),d.attr("d",a)}else d.remove()}})}})}},{"../../traces/scatter/subtypes":304,"../drawing":63,d3:7,"fast-isnumeric":9}],71:[function(t,e,n){"use strict";var r=t("d3"),i=t("../color");e.exports=function(t){t.each(function(t){var e=t[0].trace,n=e.error_y||{},a=e.error_x||{},o=r.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),a.copy_ystyle&&(a=n),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(i.stroke,a.color)})}},{"../color":42,d3:7}],72:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("./layout_attributes").hoverlabel,a=t("../../lib/extend").extendFlat;e.exports={hoverlabel:{bgcolor:a({},i.bgcolor,{arrayOk:!0}),bordercolor:a({},i.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:a({},i.align,{arrayOk:!0}),namelength:a({},i.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":155,"../../plots/font_attributes":230,"./layout_attributes":82}],73:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry");function a(t,e,n,i){i=i||r.identity,Array.isArray(t)&&(e[0][n]=i(t))}e.exports=function(t){var e=t.calcdata,n=t._fullLayout;function o(t){return function(e){return r.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var s=0;s<e.length;s++){var u=e[s],l=u[0].trace;if(!i.traceIs(l,"pie-like")){var c=i.traceIs(l,"2dMap")?a:r.fillArray;c(l.hoverinfo,u,"hi",o(l)),l.hovertemplate&&c(l.hovertemplate,u,"ht"),l.hoverlabel&&(c(l.hoverlabel.bgcolor,u,"hbg"),c(l.hoverlabel.bordercolor,u,"hbc"),c(l.hoverlabel.font.size,u,"hts"),c(l.hoverlabel.font.color,u,"htc"),c(l.hoverlabel.font.family,u,"htf"),c(l.hoverlabel.namelength,u,"hnl"),c(l.hoverlabel.align,u,"hta"))}}}},{"../../lib":160,"../../registry":243}],74:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./hover").hover;e.exports=function(t,e,n){var a=r.getComponentMethod("annotations","onClick")(t,t._hoverdata);function o(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==n&&i(t,e,n,!0),t._hoverdata&&e&&e.target&&(a&&a.then?a.then(o):o(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":243,"./hover":78}],75:[function(t,e,n){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],76:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),a=t("./hoverlabel_defaults");e.exports=function(t,e,n,o){var s=r.extendFlat({},o.hoverlabel);e.hovertemplate&&(s.namelength=-1),a(t,e,function(n,a){return r.coerce(t,e,i,n,a)},s)}},{"../../lib":160,"./attributes":72,"./hoverlabel_defaults":79}],77:[function(t,e,n){"use strict";var r=t("../../lib");n.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},n.isTraceInSubplots=function(t,e){if("splom"===t.type){for(var r=t.xaxes||[],i=t.yaxes||[],a=0;a<r.length;a++)for(var o=0;o<i.length;o++)if(-1!==e.indexOf(r[a]+i[o]))return!0;return!1}return-1!==e.indexOf(n.getSubplot(t))},n.flat=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=e;return n},n.p2c=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].p2c(e);return n},n.getDistanceFunction=function(t,e,r,i){return"closest"===t?i||n.quadrature(e,r):"x"===t?e:r},n.getClosest=function(t,e,n){if(!1!==n.index)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var r=0;r<t.length;r++){var i=e(t[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},n.inbox=function(t,e,n){return t*e<0||0===t?n:1/0},n.quadrature=function(t,e){return function(n){var r=t(n),i=e(n);return Math.sqrt(r*r+i*i)}},n.makeEventData=function(t,e,r){var i="index"in t?t.index:t.pointNumber,a={data:e._input,fullData:e,curveNumber:e.index,pointNumber:i};if(e._indexToPoints){var o=e._indexToPoints[i];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=i;return e._module.eventData?a=e._module.eventData(a,t,e,r,i):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),n.appendArrayPointValue(a,e,i),a},n.appendArrayPointValue=function(t,e,n){var i=e._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var u=i[s],l=a(u);if(void 0===t[l]){var c=r.nestedProperty(e,u).get(),f=o(c,n);void 0!==f&&(t[l]=f)}}},n.appendArrayMultiPointValues=function(t,e,n){var i=e._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var u=i[s],l=a(u);if(void 0===t[l]){for(var c=r.nestedProperty(e,u).get(),f=new Array(n.length),d=0;d<n.length;d++)f[d]=o(c,n[d]);t[l]=f}}};var i={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function a(t){return i[t]||t}function o(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}},{"../../lib":160}],78:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("tinycolor2"),o=t("../../lib"),s=t("../../lib/events"),u=t("../../lib/svg_text_utils"),l=t("../../lib/override_cursor"),c=t("../drawing"),f=t("../color"),d=t("../dragelement"),h=t("../../plots/cartesian/axes"),p=t("../../registry"),v=t("./helpers"),g=t("./constants"),m=g.YANGLE,y=Math.PI*m/180,b=1/Math.sin(y),_=Math.cos(y),x=Math.sin(y),w=g.HOVERARROWSIZE,A=g.HOVERTEXTPAD;n.hover=function(t,e,n,a){t=o.getGraphDiv(t),o.throttle(t._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){!function(t,e,n,a){n||(n="xy");var u=Array.isArray(n)?n:[n],c=t._fullLayout,g=c._plots||[],m=g[n],y=c._has("cartesian");if(m){var _=m.overlays.map(function(t){return t.id});u=u.concat(_)}for(var x=u.length,w=new Array(x),A=new Array(x),k=!1,O=0;O<x;O++){var P=u[O],L=g[P];if(L)k=!0,w[O]=h.getFromId(t,L.xaxis._id),A[O]=h.getFromId(t,L.yaxis._id);else{var R=c[P]._subplot;w[O]=R.xaxis,A[O]=R.yaxis}}var D=e.hovermode||c.hovermode;if(D&&!k&&(D="closest"),-1===["x","y","closest"].indexOf(D)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return d.unhoverRaw(t,e);var F,j,N,z,I,B,q,U,H,W,G,V,Y,Z=-1===c.hoverdistance?1/0:c.hoverdistance,X=-1===c.spikedistance?1/0:c.spikedistance,$=[],J=[],K={hLinePoint:null,vLinePoint:null},Q=!1;if(Array.isArray(e))for(D="array",N=0;N<e.length;N++)(I=t.calcdata[e[N].curveNumber||0])&&(B=I[0].trace,"skip"!==I[0].trace.hoverinfo&&(J.push(I),"h"===B.orientation&&(Q=!0)));else{for(z=0;z<t.calcdata.length;z++)I=t.calcdata[z],"skip"!==(B=I[0].trace).hoverinfo&&v.isTraceInSubplots(B,u)&&(J.push(I),"h"===B.orientation&&(Q=!0));var tt,et,nt=!e.target;if(nt)tt="xpx"in e?e.xpx:w[0]._length/2,et="ypx"in e?e.ypx:A[0]._length/2;else{if(!1===s.triggerHandler(t,"plotly_beforehover",e))return;var rt=e.target.getBoundingClientRect();if(tt=e.clientX-rt.left,et=e.clientY-rt.top,tt<0||tt>w[0]._length||et<0||et>A[0]._length)return d.unhoverRaw(t,e)}if(e.pointerX=tt+w[0]._offset,e.pointerY=et+A[0]._offset,F="xval"in e?v.flat(u,e.xval):v.p2c(w,tt),j="yval"in e?v.flat(u,e.yval):v.p2c(A,et),!i(F[0])||!i(j[0]))return o.warn("Fx.hover failed",e,t),d.unhoverRaw(t,e)}var it=1/0;for(z=0;z<J.length;z++)if((I=J[z])&&I[0]&&I[0].trace&&!0===(B=I[0].trace).visible&&0!==B._length&&-1===["carpet","contourcarpet"].indexOf(B._module.name)){if("splom"===B.type?q=u[U=0]:(q=v.getSubplot(B),U=u.indexOf(q)),H=D,V={cd:I,trace:B,xa:w[U],ya:A[U],maxHoverDistance:Z,maxSpikeDistance:X,index:!1,distance:Math.min(it,Z),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:f.defaultLine,name:B.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},c[q]&&(V.subplot=c[q]._subplot),c._splomScenes&&c._splomScenes[B.uid]&&(V.scene=c._splomScenes[B.uid]),Y=$.length,"array"===H){var at=e[z];"pointNumber"in at?(V.index=at.pointNumber,H="closest"):(H="","xval"in at&&(W=at.xval,H="x"),"yval"in at&&(G=at.yval,H=H?"closest":"y"))}else W=F[U],G=j[U];if(0!==Z)if(B._module&&B._module.hoverPoints){var ot=B._module.hoverPoints(V,W,G,H,c._hoverlayer);if(ot)for(var st,ut=0;ut<ot.length;ut++)st=ot[ut],i(st.x0)&&i(st.y0)&&$.push(S(st,D))}else o.log("Unrecognized trace type in hover:",B);if("closest"===D&&$.length>Y&&($.splice(0,Y),it=$[0].distance),y&&0!==X&&0===$.length){V.distance=X,V.index=!1;var lt=B._module.hoverPoints(V,W,G,"closest",c._hoverlayer);if(lt&&(lt=lt.filter(function(t){return t.spikeDistance<=X})),lt&&lt.length){var ct,ft=lt.filter(function(t){return t.xa.showspikes});if(ft.length){var dt=ft[0];i(dt.x0)&&i(dt.y0)&&(ct=gt(dt),(!K.vLinePoint||K.vLinePoint.spikeDistance>ct.spikeDistance)&&(K.vLinePoint=ct))}var ht=lt.filter(function(t){return t.ya.showspikes});if(ht.length){var pt=ht[0];i(pt.x0)&&i(pt.y0)&&(ct=gt(pt),(!K.hLinePoint||K.hLinePoint.spikeDistance>ct.spikeDistance)&&(K.hLinePoint=ct))}}}}function vt(t,e){for(var n,r=null,i=1/0,a=0;a<t.length;a++)(n=t[a].spikeDistance)<i&&n<=e&&(r=t[a],i=n);return r}function gt(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}var mt={fullLayout:c,container:c._hoverlayer,outerContainer:c._paperdiv,event:e},yt=t._spikepoints,bt={vLinePoint:K.vLinePoint,hLinePoint:K.hLinePoint};if(t._spikepoints=bt,y&&0!==X&&0!==$.length){var _t=$.filter(function(t){return t.ya.showspikes}),xt=vt(_t,X);K.hLinePoint=gt(xt);var wt=$.filter(function(t){return t.xa.showspikes}),At=vt(wt,X);K.vLinePoint=gt(At)}if(0===$.length){var kt=d.unhoverRaw(t,e);return!y||null===K.hLinePoint&&null===K.vLinePoint||E(yt)&&C(K,mt),kt}y&&E(yt)&&C(K,mt),$.sort(function(t,e){return t.distance-e.distance});var Mt=t._hoverdata,Tt=[];for(N=0;N<$.length;N++){var St=$[N],Ct=v.makeEventData(St,St.trace,St.cd);if(!1!==St.hovertemplate){var Et=!1;St.cd[St.index]&&St.cd[St.index].ht&&(Et=St.cd[St.index].ht),St.hovertemplate=Et||St.trace.hovertemplate||!1}St.eventData=[Ct],Tt.push(Ct)}t._hoverdata=Tt;var Ot="y"===D&&(J.length>1||$.length>1)||"closest"===D&&Q&&$.length>1,Pt=f.combine(c.plot_bgcolor||f.background,c.paper_bgcolor),Lt={hovermode:D,rotateLabels:Ot,bgColor:Pt,container:c._hoverlayer,outerContainer:c._paperdiv,commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance},Rt=M($,Lt,t);if(function(t,e,n){var r,i,a,o,s,u,l,c=0,f=1,d=t.size(),h=new Array(d),p=0;function v(t){var e=t[0],n=t[t.length-1];if(i=e.pmin-e.pos-e.dp+e.size,a=n.pos+n.dp+n.size-e.pmax,i>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=i;r=!1}if(!(a<.01)){if(i<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=a;r=!1}if(r){var l=0;for(o=0;o<t.length;o++)(u=t[o]).pos+u.dp+u.size>e.pmax&&l++;for(o=t.length-1;o>=0&&!(l<=0);o--)(u=t[o]).pos>e.pmax-1&&(u.del=!0,l--);for(o=0;o<t.length&&!(l<=0);o++)if((u=t[o]).pos<e.pmin+1)for(u.del=!0,l--,a=2*u.size,s=t.length-1;s>=0;s--)t[s].dp-=a;for(o=t.length-1;o>=0&&!(l<=0);o--)(u=t[o]).pos+u.dp+u.size>e.pmax&&(u.del=!0,l--)}}}for(t.each(function(t){var r=t[e],i="x"===r._id.charAt(0),a=r.range;0===p&&a&&a[0]>a[1]!==i&&(f=-1),h[p++]=[{datum:t,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(i?b:1)/2,pmin:0,pmax:i?n.width:n.height}]}),h.sort(function(t,e){return t[0].posref-e[0].posref||f*(e[0].traceIndex-t[0].traceIndex)});!r&&c<=d;){for(c++,r=!0,o=0;o<h.length-1;){var g=h[o],m=h[o+1],y=g[g.length-1],_=m[0];if((i=y.pos+y.dp+y.size-_.pos-_.dp+_.size)>.01&&y.pmin===_.pmin&&y.pmax===_.pmax){for(s=m.length-1;s>=0;s--)m[s].dp+=i;for(g.push.apply(g,m),h.splice(o+1,1),l=0,s=g.length-1;s>=0;s--)l+=g[s].dp;for(a=l/g.length,s=g.length-1;s>=0;s--)g[s].dp-=a;r=!1}else o++}h.forEach(v)}for(o=h.length-1;o>=0;o--){var x=h[o];for(s=x.length-1;s>=0;s--){var w=x[s],A=w.datum;A.offset=w.dp,A.del=w.del}}}(Rt,Ot?"xa":"ya",c),T(Rt,Ot),e.target&&e.target.tagName){var Dt=p.getComponentMethod("annotations","hasClickToShow")(t,Tt);l(r.select(e.target),Dt?"pointer":"")}e.target&&!a&&function(t,e,n){if(!n||n.length!==t._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],a=t._hoverdata[r];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber)||String(i.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(t,0,Mt)&&(Mt&&t.emit("plotly_unhover",{event:e,points:Mt}),t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:w,yaxes:A,xvals:F,yvals:j}))}(t,e,n,a)})},n.loneHover=function(t,e){var n=!0;Array.isArray(t)||(n=!1,t=[t]);var i=t.map(function(t){return{color:t.color||f.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,nameLength:t.nameLength,textAlign:t.textAlign,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,eventData:t.eventData||!1,hovertemplateLabels:t.hovertemplateLabels||!1}}),a=r.select(e.container),o=e.outerContainer?r.select(e.outerContainer):a,s={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||f.background,container:a,outerContainer:o},u=M(i,s,e.gd),l=0,c=0;return u.sort(function(t,e){return t.y0-e.y0}).each(function(t,n){var r=t.y0-t.by/2;t.offset=r-5<l?l-r+5:0,l=r+t.by+t.offset,n===e.anchorIndex&&(c=t.offset)}).each(function(t){t.offset-=c}),T(u,s.rotateLabels),n?u:u.node()};var k=/<extra>([\s\S]*)<\/extra>/;function M(t,e,n){var i=n._fullLayout,a=e.hovermode,s=e.rotateLabels,l=e.bgColor,d=e.container,h=e.outerContainer,p=e.commonLabelOpts||{},v=e.fontFamily||g.HOVERFONT,y=e.fontSize||g.HOVERFONTSIZE,b=t[0],_=b.xa,x=b.ya,M="y"===a?"yLabel":"xLabel",T=b[M],S=(String(T)||"").split(" ")[0],C=h.node().getBoundingClientRect(),E=C.top,P=C.width,L=C.height,R=void 0!==T&&b.distance<=e.hoverdistance&&("x"===a||"y"===a);if(R){var D,F,j=!0;for(D=0;D<t.length;D++)if(j&&void 0===t[D].zLabel&&(j=!1),F=t[D].hoverinfo||t[D].trace.hoverinfo){var N=Array.isArray(F)?F:F.split("+");if(-1===N.indexOf("all")&&-1===N.indexOf(a)){R=!1;break}}j&&(R=!1)}var z=d.selectAll("g.axistext").data(R?[0]:[]);z.enter().append("g").classed("axistext",!0),z.exit().remove(),z.each(function(){var e=r.select(this),i=o.ensureSingle(e,"path","",function(t){t.style({"stroke-width":"1px"})}),s=o.ensureSingle(e,"text","",function(t){t.attr("data-notex",1)}),l=p.bgcolor||f.defaultLine,d=p.bordercolor||f.contrast(l),h=f.contrast(l);i.style({fill:l,stroke:d}),s.text(T).call(c.font,p.font.family||v,p.font.size||y,p.font.color||h).call(u.positionText,0,0).call(u.convertToTspans,n),e.attr("transform","");var g=s.node().getBoundingClientRect();if("x"===a){s.attr("text-anchor","middle").call(u.positionText,0,"top"===_.side?E-g.bottom-w-A:E-g.top+w+A);var m="top"===_.side?"-":"";i.attr("d","M0,0L"+w+","+m+w+"H"+(A+g.width/2)+"v"+m+(2*A+g.height)+"H-"+(A+g.width/2)+"V"+m+w+"H-"+w+"Z"),e.attr("transform","translate("+(_._offset+(b.x0+b.x1)/2)+","+(x._offset+("top"===_.side?0:x._length))+")")}else{s.attr("text-anchor","right"===x.side?"start":"end").call(u.positionText,("right"===x.side?1:-1)*(A+w),E-g.top-g.height/2);var k="right"===x.side?"":"-";i.attr("d","M0,0L"+k+w+","+w+"V"+(A+g.height/2)+"h"+k+(2*A+g.width)+"V-"+(A+g.height/2)+"H"+k+w+"V-"+w+"Z"),e.attr("transform","translate("+(_._offset+("right"===x.side?_._length:0))+","+(x._offset+(b.y0+b.y1)/2)+")")}t=t.filter(function(t){return void 0!==t.zLabelVal||(t[M]||"").split(" ")[0]===S})});var I=d.selectAll("g.hovertext").data(t,function(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")});return I.enter().append("g").classed("hovertext",!0).each(function(){var t=r.select(this);t.append("rect").call(f.fill,f.addOpacity(l,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(c.font,v,y)}),I.exit().remove(),I.each(function(t){var e=r.select(this).attr("transform",""),d="",h="",p=t.bgcolor||t.color,g=f.combine(f.opacity(p)?p:f.defaultLine,l),b=f.combine(f.opacity(t.color)?t.color:f.defaultLine,l),_=t.borderColor||f.contrast(g);void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name&&(t.trace._meta&&(t.name=o.templateString(t.name,t.trace._meta)),d=O(t.name,t.nameLength)),void 0!==t.zLabel?(void 0!==t.xLabel&&(h+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(h+="y: "+t.yLabel+"<br>"),"choropleth"!==t.trace.type&&"choroplethmapbox"!==t.trace.type&&(h+=(h?"z: ":"")+t.zLabel)):R&&t[a+"Label"]===T?h=t[("x"===a?"y":"x")+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&"scattercarpet"!==t.trace.type&&(h=t.yLabel):h=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",!t.text&&0!==t.text||Array.isArray(t.text)||(h+=(h?"<br>":"")+t.text),void 0!==t.extraText&&(h+=(h?"<br>":"")+t.extraText),""!==h||t.hovertemplate||(""===d&&e.remove(),h=d);var x=i._d3locale,M=t.hovertemplate||!1,S=t.hovertemplateLabels||t,C=t.eventData[0]||{};M&&(h=(h=o.hovertemplateString(M,S,x,C,t.trace._meta)).replace(k,function(e,n){return d=O(n,t.nameLength),""}));var D=e.select("text.nums").call(c.font,t.fontFamily||v,t.fontSize||y,t.fontColor||_).text(h).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,n),F=e.select("text.name"),j=0,N=0;if(d&&d!==h){F.call(c.font,t.fontFamily||v,t.fontSize||y,b).text(d).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,n);var z=F.node().getBoundingClientRect();j=z.width+2*A,N=z.height+2*A}else F.remove(),e.select("rect").remove();e.select("path").style({fill:g,stroke:_});var I,B,q=D.node().getBoundingClientRect(),U=t.xa._offset+(t.x0+t.x1)/2,H=t.ya._offset+(t.y0+t.y1)/2,W=Math.abs(t.x1-t.x0),G=Math.abs(t.y1-t.y0),V=q.width+w+A+j;if(t.ty0=E-q.top,t.bx=q.width+2*A,t.by=Math.max(q.height+2*A,N),t.anchor="start",t.txwidth=q.width,t.tx2width=j,t.offset=0,s)t.pos=U,I=H+G/2+V<=L,B=H-G/2-V>=0,"top"!==t.idealAlign&&I||!B?I?(H+=G/2,t.anchor="start"):t.anchor="middle":(H-=G/2,t.anchor="end");else if(t.pos=H,I=U+W/2+V<=P,B=U-W/2-V>=0,"left"!==t.idealAlign&&I||!B)if(I)U+=W/2,t.anchor="start";else{t.anchor="middle";var Y=V/2,Z=U+Y-P,X=U-Y;Z>0&&(U-=Z),X<0&&(U+=-X)}else U-=W/2,t.anchor="end";D.attr("text-anchor",t.anchor),j&&F.attr("text-anchor",t.anchor),e.attr("transform","translate("+U+","+H+")"+(s?"rotate("+m+")":""))}),I}function T(t,e){t.each(function(t){var n=r.select(this);if(t.del)return n.remove();var i=n.select("text.nums"),a=t.anchor,o="end"===a?-1:1,s={start:1,end:-1,middle:0}[a],l=s*(w+A),f=l+s*(t.txwidth+A),d=0,h=t.offset;"middle"===a&&(l-=t.tx2width/2,f+=t.txwidth/2+A),e&&(h*=-x,d=t.offset*_),n.select("path").attr("d","middle"===a?"M-"+(t.bx/2+t.tx2width/2)+","+(h-t.by/2)+"h"+t.bx+"v"+t.by+"h-"+t.bx+"Z":"M0,0L"+(o*w+d)+","+(w+h)+"v"+(t.by/2-w)+"h"+o*t.bx+"v-"+t.by+"H"+(o*w+d)+"V"+(h-w)+"Z");var p=l+d,v=h+t.ty0-t.by/2+A,g=t.textAlign||"auto";"auto"!==g&&("left"===g&&"start"!==a?(i.attr("text-anchor","start"),p="middle"===a?-t.bx/2-t.tx2width/2+A:-t.bx-A):"right"===g&&"end"!==a&&(i.attr("text-anchor","end"),p="middle"===a?t.bx/2-t.tx2width/2-A:t.bx+A)),i.call(u.positionText,p,v),t.tx2width&&(n.select("text.name").call(u.positionText,f+s*A+d,h+t.ty0-t.by/2+A),n.select("rect").call(c.setRect,f+(s-1)*t.tx2width/2+d,h-t.by/2-1,t.tx2width,t.by+2))})}function S(t,e){var n=t.index,r=t.trace||{},a=t.cd[0],s=t.cd[n]||{};function u(t){return t||i(t)&&0===t}var l=Array.isArray(n)?function(t,e){var i=o.castOption(a,n,t);return u(i)?i:o.extractOption({},r,"",e)}:function(t,e){return o.extractOption(s,r,t,e)};function c(e,n,r){var i=l(n,r);u(i)&&(t[e]=i)}if(c("hoverinfo","hi","hoverinfo"),c("bgcolor","hbg","hoverlabel.bgcolor"),c("borderColor","hbc","hoverlabel.bordercolor"),c("fontFamily","htf","hoverlabel.font.family"),c("fontSize","hts","hoverlabel.font.size"),c("fontColor","htc","hoverlabel.font.color"),c("nameLength","hnl","hoverlabel.namelength"),c("textAlign","hta","hoverlabel.align"),t.posref="y"===e||"closest"===e&&"h"===r.orientation?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=o.constrain(t.x0,0,t.xa._length),t.x1=o.constrain(t.x1,0,t.xa._length),t.y0=o.constrain(t.y0,0,t.ya._length),t.y1=o.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:h.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:h.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!isNaN(t.xerr)&&!("log"===t.xa.type&&t.xerr<=0)){var f=h.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+f+" / -"+h.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" \xb1 "+f,"x"===e&&(t.distance+=1)}if(!isNaN(t.yerr)&&!("log"===t.ya.type&&t.yerr<=0)){var d=h.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+d+" / -"+h.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" \xb1 "+d,"y"===e&&(t.distance+=1)}var p=t.hoverinfo||t.trace.hoverinfo;return p&&"all"!==p&&(-1===(p=Array.isArray(p)?p:p.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===p.indexOf("y")&&(t.yLabel=void 0),-1===p.indexOf("z")&&(t.zLabel=void 0),-1===p.indexOf("text")&&(t.text=void 0),-1===p.indexOf("name")&&(t.name=void 0)),t}function C(t,e){var n,r,i=e.container,o=e.fullLayout,s=e.event,u=!!t.hLinePoint,l=!!t.vLinePoint;if(i.selectAll(".spikeline").remove(),l||u){var d=f.combine(o.plot_bgcolor,o.paper_bgcolor);if(u){var h,p,v=t.hLinePoint;n=v&&v.xa;var g=(r=v&&v.ya).spikesnap;"cursor"===g?(h=s.pointerX,p=s.pointerY):(h=n._offset+v.x,p=r._offset+v.y);var m,y,b=a.readability(v.color,d)<1.5?f.contrast(d):v.color,_=r.spikemode,x=r.spikethickness,w=r.spikecolor||b,A=r._boundingBox,k=(A.left+A.right)/2<h?A.right:A.left;-1===_.indexOf("toaxis")&&-1===_.indexOf("across")||(-1!==_.indexOf("toaxis")&&(m=k,y=h),-1!==_.indexOf("across")&&(m=r._counterSpan[0],y=r._counterSpan[1]),i.insert("line",":first-child").attr({x1:m,x2:y,y1:p,y2:p,"stroke-width":x,stroke:w,"stroke-dasharray":c.dashStyle(r.spikedash,x)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:m,x2:y,y1:p,y2:p,"stroke-width":x+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)),-1!==_.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:k+("right"!==r.side?x:-x),cy:p,r:x,fill:w}).classed("spikeline",!0)}if(l){var M,T,S=t.vLinePoint;n=S&&S.xa,r=S&&S.ya;var C=n.spikesnap;"cursor"===C?(M=s.pointerX,T=s.pointerY):(M=n._offset+S.x,T=r._offset+S.y);var E,O,P=a.readability(S.color,d)<1.5?f.contrast(d):S.color,L=n.spikemode,R=n.spikethickness,D=n.spikecolor||P,F=n._boundingBox,j=(F.top+F.bottom)/2<T?F.bottom:F.top;-1===L.indexOf("toaxis")&&-1===L.indexOf("across")||(-1!==L.indexOf("toaxis")&&(E=j,O=T),-1!==L.indexOf("across")&&(E=n._counterSpan[0],O=n._counterSpan[1]),i.insert("line",":first-child").attr({x1:M,x2:M,y1:E,y2:O,"stroke-width":R,stroke:D,"stroke-dasharray":c.dashStyle(n.spikedash,R)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:M,x2:M,y1:E,y2:O,"stroke-width":R+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)),-1!==L.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:M,cy:j-("top"!==n.side?R:-R),r:R,fill:D}).classed("spikeline",!0)}}}function E(t,e){return!e||e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint}function O(t,e){return u.plainText(t||"",{len:e,allowedTags:["br","sub","sup","b","i","em"]})}},{"../../lib":160,"../../lib/events":154,"../../lib/override_cursor":171,"../../lib/svg_text_utils":181,"../../plots/cartesian/axes":204,"../../registry":243,"../color":42,"../dragelement":60,"../drawing":63,"./constants":75,"./helpers":77,d3:7,"fast-isnumeric":9,tinycolor2:25}],79:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e,n,i){n("hoverlabel.bgcolor",(i=i||{}).bgcolor),n("hoverlabel.bordercolor",i.bordercolor),n("hoverlabel.namelength",i.namelength),r.coerceFont(n,"hoverlabel.font",i.font),n("hoverlabel.align",i.align)}},{"../../lib":160}],80:[function(t,e,n){"use strict";t("../../constants/docs").FORMAT_LINK,e.exports=function(t,e){t=t||{},(e=e||{}).description&&e.description;var n=e.keys||[];if(n.length>0){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";1===n.length?r[0]:(r.slice(0,-1).join(", "),r.slice(-1))}var a={valType:"string",dflt:"",editType:t.editType||"none"};return!1!==t.arrayOk&&(a.arrayOk=!0),a}},{"../../constants/docs":138}],81:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),a=t("../dragelement"),o=t("./helpers"),s=t("./layout_attributes"),u=t("./hover");e.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:s},attributes:t("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(t,e,n){return i.castOption(t,e,"hoverlabel."+n)},castHoverinfo:function(t,e,n){return i.castOption(t,n,"hoverinfo",function(n){return i.coerceHoverinfo({hoverinfo:n},{_module:t._module},e)})},hover:u.hover,unhover:a.unhover,loneHover:u.loneHover,loneUnhover:function(t){var e=i.isD3Selection(t)?t:r.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t("./click")}},{"../../lib":160,"../dragelement":60,"./attributes":72,"./calc":73,"./click":74,"./constants":75,"./defaults":76,"./helpers":77,"./hover":78,"./layout_attributes":82,"./layout_defaults":83,"./layout_global_defaults":84,d3:7}],82:[function(t,e,n){"use strict";var r=t("./constants"),i=t("../../plots/font_attributes")({editType:"none"});i.family.dflt=r.HOVERFONT,i.size.dflt=r.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":230,"./constants":75}],83:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,n){function a(n,a){return r.coerce(t,e,i,n,a)}var o,s=a("clickmode"),u=a("dragmode");"select"===u&&a("selectdirection"),e._has("cartesian")?s.indexOf("select")>-1?o="closest":(e._isHoriz=function(t,e){for(var n=e._scatterStackOpts||{},r=0;r<t.length;r++){var i=t[r],a=i.xaxis+i.yaxis,o=n[a]||{},s=o[i.stackgroup]||{};if("h"!==i.orientation&&"h"!==s.orientation)return!1}return!0}(n,e),o=e._isHoriz?"y":"x"):o="closest";var l=a("hovermode",o);l&&(a("hoverdistance"),a("spikedistance"));var c=e._has("mapbox"),f=e._has("geo"),d=e._basePlotModules.length;"zoom"===e.dragmode&&((c||f)&&1===d||c&&f&&2===d)&&(e.dragmode="pan")}},{"../../lib":160,"./layout_attributes":82}],84:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./hoverlabel_defaults"),a=t("./layout_attributes");e.exports=function(t,e){i(t,e,function(n,i){return r.coerce(t,e,a,n,i)})}},{"../../lib":160,"./hoverlabel_defaults":79,"./layout_attributes":82}],85:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../lib/regex").counter,a=t("../../plots/domain").attributes,o=t("../../plots/cartesian/constants").idRegex,s=t("../../plot_api/plot_template"),u={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[i("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function l(t,e,n){var r=e[n+"axes"],i=Object.keys((t._splomAxes||{})[n]||{});return Array.isArray(r)?r:i.length?i:void 0}function c(t,e,n,r,i,a){var o=e(t+"gap",n),s=e("domain."+t);e(t+"side",r);for(var u=new Array(i),l=s[0],c=(s[1]-l)/(i-o),f=c*(1-o),d=0;d<i;d++){var h=l+c*d;u[a?i-1-d:d]=[h,h+f]}return u}function f(t,e,n,r,i){var a,o=new Array(n);function s(t,n){-1!==e.indexOf(n)&&void 0===r[n]?(o[t]=n,r[n]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<n;a++)s(a,t[a]);else for(s(0,i),a=1;a<n;a++)s(a,i+(a+1));return o}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:u}},layoutAttributes:u,sizeDefaults:function(t,e){var n=t.grid||{},i=l(e,n,"x"),a=l(e,n,"y");if(t.grid||i||a){var o,f,d=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),h=Array.isArray(i),p=Array.isArray(a),v=h&&i!==n.xaxes&&p&&a!==n.yaxes;d?(o=n.subplots.length,f=n.subplots[0].length):(p&&(o=a.length),h&&(f=i.length));var g=s.newContainer(e,"grid"),m=M("rows",o),y=M("columns",f);if(m*y>1){if(!d&&!h&&!p){var b="independent"===M("pattern");b&&(d=!0)}g._hasSubplotGrid=d;var _,x,w="top to bottom"===M("roworder"),A=d?.2:.1,k=d?.3:.1;v&&e._splomGridDflt&&(_=e._splomGridDflt.xside,x=e._splomGridDflt.yside),g._domains={x:c("x",M,A,_,y),y:c("y",M,k,x,m,w)}}else delete e.grid}function M(t,e){return r.coerce(n,g,u,t,e)}},contentDefaults:function(t,e){var n=e.grid;if(n&&n._domains){var r,i,a,o,s,u,c,d=t.grid||{},h=e._subplots,p=n._hasSubplotGrid,v=n.rows,g=n.columns,m="independent"===n.pattern,y=n._axisMap={};if(p){var b=d.subplots||[];u=n.subplots=new Array(v);var _=1;for(r=0;r<v;r++){var x=u[r]=new Array(g),w=b[r]||[];for(i=0;i<g;i++)if(m?(s=1===_?"xy":"x"+_+"y"+_,_++):s=w[i],x[i]="",-1!==h.cartesian.indexOf(s)){if(c=s.indexOf("y"),a=s.slice(0,c),o=s.slice(c),void 0!==y[a]&&y[a]!==i||void 0!==y[o]&&y[o]!==r)continue;x[i]=s,y[a]=i,y[o]=r}}}else{var A=l(e,d,"x"),k=l(e,d,"y");n.xaxes=f(A,h.xaxis,g,y,"x"),n.yaxes=f(k,h.yaxis,v,y,"y")}var M=n._anchors={},T="top to bottom"===n.roworder;for(var S in y){var C,E,O,P=S.charAt(0),L=n[P+"side"];if(L.length<8)M[S]="free";else if("x"===P){if("t"===L.charAt(0)===T?(C=0,E=1,O=v):(C=v-1,E=-1,O=-1),p){var R=y[S];for(r=C;r!==O;r+=E)if((s=u[r][R])&&(c=s.indexOf("y"),s.slice(0,c)===S)){M[S]=s.slice(c);break}}else for(r=C;r!==O;r+=E)if(o=n.yaxes[r],-1!==h.cartesian.indexOf(S+o)){M[S]=o;break}}else if("l"===L.charAt(0)?(C=0,E=1,O=g):(C=g-1,E=-1,O=-1),p){var D=y[S];for(r=C;r!==O;r+=E)if((s=u[D][r])&&(c=s.indexOf("y"),s.slice(c)===S)){M[S]=s.slice(0,c);break}}else for(r=C;r!==O;r+=E)if(a=n.xaxes[r],-1!==h.cartesian.indexOf(a+S)){M[S]=a;break}}}}}},{"../../lib":160,"../../lib/regex":175,"../../plot_api/plot_template":194,"../../plots/cartesian/constants":210,"../../plots/domain":229}],86:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/constants"),i=t("../../plot_api/plot_template").templatedArray;e.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":194,"../../plots/cartesian/constants":210}],87:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,n,a){e=e||{};var o="log"===n&&"linear"===e.type,s="linear"===n&&"log"===e.type;if(o||s)for(var u,l,c=t._fullLayout.images,f=e._id.charAt(0),d=0;d<c.length;d++)if(u=c[d],l="images["+d+"].",u[f+"ref"]===e._id){var h=u[f],p=u["size"+f],v=null,g=null;if(o){v=i(h,e.range);var m=p/Math.pow(10,v)/2;g=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else v=Math.pow(10,h),g=v*(Math.pow(10,p/2)-Math.pow(10,-p/2));r(v)?r(g)||(g=null):(v=null,g=null),a(l+f,v),a(l+"size"+f,g)}}},{"../../lib/to_log_range":183,"fast-isnumeric":9}],88:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./attributes");function s(t,e,n){function a(n,i){return r.coerce(t,e,o,n,i)}var s=a("source"),u=a("visible",!!s);if(!u)return e;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var l={_fullLayout:n},c=["x","y"],f=0;f<2;f++){var d=c[f],h=i.coerceRef(t,e,l,d,"paper");if("paper"!==h){var p=i.getFromId(l,h);p._imgIndices.push(e._index)}i.coercePosition(e,l,a,h,d,0)}return e}e.exports=function(t,e){var n={name:"images",handleItemDefaults:s};a(t,e,n)}},{"../../lib":160,"../../plots/array_container_defaults":200,"../../plots/cartesian/axes":204,"./attributes":86}],89:[function(t,e,n){"use strict";var r=t("d3"),i=t("../drawing"),a=t("../../plots/cartesian/axes"),o=t("../../constants/xmlns_namespaces");e.exports=function(t){var e,n,s=t._fullLayout,u=[],l={},c=[];for(n=0;n<s.images.length;n++){var f=s.images[n];if(f.visible)if("below"===f.layer&&"paper"!==f.xref&&"paper"!==f.yref){e=f.xref+f.yref;var d=s._plots[e];if(!d){c.push(f);continue}d.mainplot&&(e=d.mainplot.id),l[e]||(l[e]=[]),l[e].push(f)}else"above"===f.layer?u.push(f):c.push(f)}var h={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function p(e){var n=r.select(this);if(!this.img||this.img.src!==e.source){n.attr("xmlns",o.svg);var i=new Promise(function(t){var r=new Image;function i(){n.remove(),t()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height;var r=e.getContext("2d");r.drawImage(this,0,0);var i=e.toDataURL("image/png");n.attr("xlink:href",i),t()},n.on("error",i),r.src=e.source}.bind(this));t._promises.push(i)}}function v(e){var n=r.select(this),o=a.getFromId(t,e.xref),u=a.getFromId(t,e.yref),l=s._size,c=o?Math.abs(o.l2p(e.sizex)-o.l2p(0)):e.sizex*l.w,f=u?Math.abs(u.l2p(e.sizey)-u.l2p(0)):e.sizey*l.h,d=c*h.x[e.xanchor].offset,p=f*h.y[e.yanchor].offset,v=h.x[e.xanchor].sizing+h.y[e.yanchor].sizing,g=(o?o.r2p(e.x)+o._offset:e.x*l.w+l.l)+d,m=(u?u.r2p(e.y)+u._offset:l.h-e.y*l.h+l.t)+p;switch(e.sizing){case"fill":v+=" slice";break;case"stretch":v="none"}n.attr({x:g,y:m,width:c,height:f,preserveAspectRatio:v,opacity:e.opacity});var y=o?o._id:"",b=u?u._id:"",_=y+b;i.setClipUrl(n,_?"clip"+s._uid+_:null,t)}var g=s._imageLowerLayer.selectAll("image").data(c),m=s._imageUpperLayer.selectAll("image").data(u);g.enter().append("image"),m.enter().append("image"),g.exit().remove(),m.exit().remove(),g.each(function(t){p.bind(this)(t),v.bind(this)(t)}),m.each(function(t){p.bind(this)(t),v.bind(this)(t)});var y=Object.keys(s._plots);for(n=0;n<y.length;n++){e=y[n];var b=s._plots[e];if(b.imagelayer){var _=b.imagelayer.selectAll("image").data(l[e]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(t){p.bind(this)(t),v.bind(this)(t)})}}}},{"../../constants/xmlns_namespaces":141,"../../plots/cartesian/axes":204,"../drawing":63,d3:7}],90:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":214,"./attributes":86,"./convert_coords":87,"./defaults":88,"./draw":89}],91:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes");e.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":230,"../color/attributes":41}],92:[function(t,e,n){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,textOffsetX:40}},{}],93:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),a=t("../../plot_api/plot_template"),o=t("./attributes"),s=t("../../plots/layout_attributes"),u=t("./helpers");e.exports=function(t,e,n){for(var l,c,f,d,h=t.legend||{},p=0,v=!1,g="normal",m=0;m<n.length;m++){var y=n[m];y.visible&&((y.showlegend||y._dfltShowLegend)&&(p++,y.showlegend&&(v=!0,(r.traceIs(y,"pie-like")||!0===y._input.showlegend)&&p++)),(r.traceIs(y,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(y.fill))&&(g=u.isGrouped({traceorder:g})?"grouped+reversed":"reversed"),void 0!==y.legendgroup&&""!==y.legendgroup&&(g=u.isReversed({traceorder:g})?"reversed+grouped":"grouped"))}var b=i.coerce(t,e,s,"showlegend",v&&p>1);if(!1!==b||h.uirevision){var _=a.newContainer(e,"legend");if(w("uirevision",e.uirevision),!1!==b){if(w("bgcolor",e.paper_bgcolor),w("bordercolor"),w("borderwidth"),i.coerceFont(w,"font",e.font),w("orientation"),"h"===_.orientation){var x=t.xaxis;r.getComponentMethod("rangeslider","isVisible")(x)?(l=0,f="left",c=1.1,d="bottom"):(l=0,f="left",c=-.1,d="top")}w("traceorder",g),u.isGrouped(e.legend)&&w("tracegroupgap"),w("itemsizing"),w("itemclick"),w("itemdoubleclick"),w("x",l),w("xanchor",f),w("y",c),w("yanchor",d),w("valign"),i.noneOrAll(h,_,["x","y"])}}function w(t,e){return i.coerce(h,_,o,t,e)}}},{"../../lib":160,"../../plot_api/plot_template":194,"../../plots/layout_attributes":234,"../../registry":243,"./attributes":91,"./helpers":97}],94:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib/events"),u=t("../dragelement"),l=t("../drawing"),c=t("../color"),f=t("../../lib/svg_text_utils"),d=t("./handle_click"),h=t("./constants"),p=t("../../constants/alignment"),v=p.LINE_SPACING,g=p.FROM_TL,m=p.FROM_BR,y=t("./get_legend_data"),b=t("./style"),_=t("./helpers");function x(t,e,n,r,i){var a=n.data()[0][0].trace,u={event:i,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};a._group&&(u.group=a._group),o.traceIs(a,"pie-like")&&(u.label=n.datum()[0].label);var l=s.triggerHandler(t,"plotly_legendclick",u);if(!1!==l)if(1===r)e._clickTimeout=setTimeout(function(){d(n,t,r)},t._context.doubleClickDelay);else if(2===r){e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0;var c=s.triggerHandler(t,"plotly_legenddoubleclick",u);!1!==c&&d(n,t,r)}}function w(t,e,n){var r=t.data()[0][0],a=e._fullLayout,s=r.trace,u=o.traceIs(s,"pie-like"),c=s.index,d=e._context.edits.legendText&&!u,p=u?r.label:s.name;s._meta&&(p=i.templateString(p,s._meta));var g=i.ensureSingle(t,"text","legendtext");function m(n){f.convertToTspans(n,e,function(){!function(t,e){var n=t.data()[0][0];if(n.trace.showlegend){var r,i,a=t.select("g[class*=math-group]"),o=a.node(),s=e._fullLayout.legend.font.size*v;if(o){var u=l.bBox(o);r=u.height,i=u.width,l.setTranslate(a,0,r/4)}else{var c=t.select(".legendtext"),d=f.lineCount(c),p=c.node();r=s*d,i=p?l.bBox(p).width:0;var g=s*(.3+(1-d)/2);f.positionText(c,h.textOffsetX,g)}n.lineHeight=s,n.height=Math.max(r,16)+3,n.width=i}else t.remove()}(t,e)})}g.attr("text-anchor","start").classed("user-select-none",!0).call(l.font,a.legend.font).text(d?A(p,n):p),f.positionText(g,h.textOffsetX,0),d?g.call(f.makeEditable,{gd:e,text:p}).call(m).on("edit",function(t){this.text(A(t,n)).call(m);var a=r.trace._fullInput||{},s={};if(o.hasTransform(a,"groupby")){var u=o.getTransformIndices(a,"groupby"),l=u[u.length-1],f=i.keyedContainer(a,"transforms["+l+"].styles","target","value.name");f.set(r.trace._group,t),s=f.constructUpdate()}else s.name=t;return o.call("_guiRestyle",e,s,c)}):m(g)}function A(t,e){var n=Math.max(4,e);if(t&&t.trim().length>=n/2)return t;for(var r=n-(t=t||"").length;r>0;r--)t+=" ";return t}function k(t,e){var n,a=e._context.doubleClickDelay,o=1,s=i.ensureSingle(t,"rect","legendtoggle",function(t){t.style("cursor","pointer").attr("pointer-events","all").call(c.fill,"rgba(0,0,0,0)")});s.on("mousedown",function(){(n=(new Date).getTime())-e._legendMouseDownTime<a?o+=1:(o=1,e._legendMouseDownTime=n)}),s.on("mouseup",function(){if(!e._dragged&&!e._editing){var n=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>a&&(o=Math.max(o-1,1)),x(e,n,t,o,r.event)}})}function M(t,e,n){var a=t._fullLayout,o=a.legend,s=o.borderwidth,u=_.isGrouped(o),c=0;if(o._width=0,o._height=0,_.isVertical(o))u&&e.each(function(t,e){l.setTranslate(this,0,e*o.tracegroupgap)}),n.each(function(t){var e=t[0],n=e.height,r=e.width;l.setTranslate(this,s,5+s+o._height+n/2),o._height+=n,o._width=Math.max(o._width,r)}),o._width+=45+2*s,o._height+=10+2*s,u&&(o._height+=(o._lgroupsLength-1)*o.tracegroupgap),c=40;else if(u){var f,d=0,h=0,p=e.data(),v=0;for(f=0;f<p.length;f++){var g=p[f],m=g.map(function(t){return t[0].width}),y=i.aggNums(Math.max,null,m),b=g.reduce(function(t,e){return t+e[0].height},0);h=Math.max(h,y),d=Math.max(d,b),v=Math.max(v,g.length)}h+=5,h+=40;var x=[o._width],w=[],A=0;for(f=0;f<p.length;f++){a._size.w<s+o._width+5+h?(x[x.length-1]=x[0],o._width=h,A++):o._width+=h+s;var k=A*d;k+=A>0?o.tracegroupgap:0,w.push(k),x.push(o._width)}e.each(function(t,e){l.setTranslate(this,x[e],w[e])}),e.each(function(){var t=r.select(this),e=t.selectAll("g.traces"),n=0;e.each(function(t){var e=t[0],r=e.height;l.setTranslate(this,0,5+s+n+r/2),n+=r})});var M=w[w.length-1]+d;o._height=10+2*s+M;var T=Math.max.apply(null,x);o._width=T+h+40,o._width+=2*s}else{var S=0,C=0,E=0,O=0,P=0;n.each(function(t){E=Math.max(40+t[0].width,E),P+=40+t[0].width+5});var L=a._size.w>s+P-5;n.each(function(t){var e=t[0],n=L?40+t[0].width:E;s+O+5+n>a._size.w&&(O=0,S+=C,o._height+=C,C=0),l.setTranslate(this,s+O,5+s+e.height/2+S),o._width+=5+n,O+=5+n,C=Math.max(e.height,C)}),L?o._height=C:o._height+=C,o._width+=2*s,o._height+=10+2*s}o._width=Math.ceil(o._width),o._height=Math.ceil(o._height);var R=t._context.edits.legendText||t._context.edits.legendPosition;n.each(function(t){var e=t[0],n=r.select(this).select(".legendtoggle");l.setRect(n,0,-e.height/2,(R?0:o._width)+c,e.height)})}function T(t){var e=t._fullLayout,n=e.legend,r="left";i.isRightAnchor(n)?r="right":i.isCenterAnchor(n)&&(r="center");var o="top";i.isBottomAnchor(n)?o="bottom":i.isMiddleAnchor(n)&&(o="middle"),a.autoMargin(t,"legend",{x:n.x,y:n.y,l:n._width*g[r],r:n._width*m[r],b:n._height*m[o],t:n._height*g[o]})}e.exports=function(t){var e=t._fullLayout,n="legend"+e._uid;if(e._infolayer&&t.calcdata){t._legendMouseDownTime||(t._legendMouseDownTime=0);var s=e.legend,f=e.showlegend&&y(t.calcdata,s),d=e.hiddenlabels||[];if(!e.showlegend||!f.length)return e._infolayer.selectAll(".legend").remove(),e._topdefs.select("#"+n).remove(),void a.autoMargin(t,"legend");for(var p=0,v=0;v<f.length;v++)for(var _=0;_<f[v].length;_++){var A=f[v][_][0],S=A.trace,C=o.traceIs(S,"pie-like"),E=C?A.label:S.name;p=Math.max(p,E&&E.length||0)}var O=!1,P=i.ensureSingle(e._infolayer,"g","legend",function(t){t.attr("pointer-events","all"),O=!0}),L=i.ensureSingleById(e._topdefs,"clipPath",n,function(t){t.append("rect")}),R=i.ensureSingle(P,"rect","bg",function(t){t.attr("shape-rendering","crispEdges")});R.call(c.stroke,s.bordercolor).call(c.fill,s.bgcolor).style("stroke-width",s.borderwidth+"px");var D=i.ensureSingle(P,"g","scrollbox"),F=i.ensureSingle(P,"rect","scrollbar",function(t){t.attr({rx:20,ry:3,width:0,height:0}).call(c.fill,"#808BA4")}),j=D.selectAll("g.groups").data(f);j.enter().append("g").attr("class","groups"),j.exit().remove();var N=j.selectAll("g.traces").data(i.identity);N.enter().append("g").attr("class","traces"),N.exit().remove(),N.style("opacity",function(t){var e=t[0].trace;return o.traceIs(e,"pie-like")?-1!==d.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){r.select(this).call(w,t,p)}).call(b,t).each(function(){r.select(this).call(k,t)}),i.syncOrAsync([a.previousPromises,function(){O&&(M(t,j,N),T(t));var c=e.width,f=e.height;M(t,j,N),s._height>f?function(t){var e=t._fullLayout.legend,n="left";i.isRightAnchor(e)?n="right":i.isCenterAnchor(e)&&(n="center"),a.autoMargin(t,"legend",{x:e.x,y:.5,l:e._width*g[n],r:e._width*m[n],b:0,t:0})}(t):T(t);var d=e._size,p=d.l+d.w*s.x,v=d.t+d.h*(1-s.y);i.isRightAnchor(s)?p-=s._width:i.isCenterAnchor(s)&&(p-=s._width/2),i.isBottomAnchor(s)?v-=s._height:i.isMiddleAnchor(s)&&(v-=s._height/2);var y=s._width,b=d.w;y>b?(p=d.l,y=b):(p+y>c&&(p=c-y),p<0&&(p=0),y=Math.min(c-p,s._width));var _,w,A,k,S=s._height,C=d.h;if(S>C?(v=d.t,S=C):(v+S>f&&(v=f-S),v<0&&(v=0),S=Math.min(f-v,s._height)),l.setTranslate(P,p,v),F.on(".drag",null),P.on("wheel",null),s._height<=S||t._context.staticPlot)R.attr({width:y-s.borderwidth,height:S-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),l.setTranslate(D,0,0),L.select("rect").attr({width:y-2*s.borderwidth,height:S-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth}),l.setClipUrl(D,n,t),l.setRect(F,0,0,0,0),delete s._scrollY;else{var E,z,I=Math.max(h.scrollBarMinHeight,S*S/s._height),B=S-I-2*h.scrollBarMargin,q=s._height-S,U=B/q,H=Math.min(s._scrollY||0,q);R.attr({width:y-2*s.borderwidth+h.scrollBarWidth+h.scrollBarMargin,height:S-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),L.select("rect").attr({width:y-2*s.borderwidth+h.scrollBarWidth+h.scrollBarMargin,height:S-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth+H}),l.setClipUrl(D,n,t),G(H,I,U),P.on("wheel",function(){G(H=i.constrain(s._scrollY+r.event.deltaY/B*q,0,q),I,U),0!==H&&H!==q&&r.event.preventDefault()});var W=r.behavior.drag().on("dragstart",function(){E=r.event.sourceEvent.clientY,z=H}).on("drag",function(){var t=r.event.sourceEvent;2===t.buttons||t.ctrlKey||G(H=i.constrain((t.clientY-E)/U+z,0,q),I,U)});F.call(W)}function G(e,n,r){s._scrollY=t._fullLayout.legend._scrollY=e,l.setTranslate(D,0,-e),l.setRect(F,y,h.scrollBarMargin+e*r,h.scrollBarWidth,n),L.select("rect").attr({y:s.borderwidth+e})}t._context.edits.legendPosition&&(P.classed("cursor-move",!0),u.init({element:P.node(),gd:t,prepFn:function(){var t=l.getTranslate(P);A=t.x,k=t.y},moveFn:function(t,e){var n=A+t,r=k+e;l.setTranslate(P,n,r),_=u.align(n,0,d.l,d.l+d.w,s.xanchor),w=u.align(r,0,d.t+d.h,d.t,s.yanchor)},doneFn:function(){void 0!==_&&void 0!==w&&o.call("_guiRelayout",t,{"legend.x":_,"legend.y":w})},clickFn:function(n,r){var i=e._infolayer.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return r.clientX>=t.left&&r.clientX<=t.right&&r.clientY>=t.top&&r.clientY<=t.bottom});i.size()>0&&x(t,P,i,n,r)}}))}],t)}}},{"../../constants/alignment":137,"../../lib":160,"../../lib/events":154,"../../lib/svg_text_utils":181,"../../plots/plots":236,"../../registry":243,"../color":42,"../dragelement":60,"../drawing":63,"./constants":92,"./get_legend_data":95,"./handle_click":96,"./helpers":97,"./style":99,d3:7}],95:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./helpers");e.exports=function(t,e){var n,a,o={},s=[],u=!1,l={},c=0;function f(t,n){if(""!==t&&i.isGrouped(e))-1===s.indexOf(t)?(s.push(t),u=!0,o[t]=[[n]]):o[t].push([n]);else{var r="~~i"+c;s.push(r),o[r]=[[n]],c++}}for(n=0;n<t.length;n++){var d=t[n],h=d[0],p=h.trace,v=p.legendgroup;if(p.visible&&p.showlegend)if(r.traceIs(p,"pie-like"))for(l[v]||(l[v]={}),a=0;a<d.length;a++){var g=d[a].label;l[v][g]||(f(v,{label:g,color:d[a].color,i:d[a].i,trace:p,pts:d[a].pts}),l[v][g]=!0)}else f(v,h)}if(!s.length)return[];var m,y,b=s.length;if(u&&i.isGrouped(e))for(y=new Array(b),n=0;n<b;n++)m=o[s[n]],y[n]=i.isReversed(e)?m.reverse():m;else{for(y=[new Array(b)],n=0;n<b;n++)m=o[s[n]][0],y[0][i.isReversed(e)?b-n-1:n]=m;b=1}return e._lgroupsLength=b,y}},{"../../registry":243,"./helpers":97}],96:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry"),a=!0;e.exports=function(t,e,n){var o=e._fullLayout;if(!e._dragged&&!e._editing){var s,u=o.legend.itemclick,l=o.legend.itemdoubleclick;if(1===n&&"toggle"===u&&"toggleothers"===l&&a&&e.data&&e._context.showTips?(r.notifier(r._(e,"Double-click on legend to isolate one trace"),"long"),a=!1):a=!1,1===n?s=u:2===n&&(s=l),s){var c,f,d,h,p,v=o.hiddenlabels?o.hiddenlabels.slice():[],g=t.data()[0][0],m=e._fullData,y=g.trace,b=y.legendgroup,_={},x=[],w=[],A=[];if(i.traceIs(y,"pie-like")){var k=g.label,M=v.indexOf(k);"toggle"===s?-1===M?v.push(k):v.splice(M,1):"toggleothers"===s&&(v=[],e.calcdata[0].forEach(function(t){k!==t.label&&v.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===v.length&&-1===M&&(v=[])),i.call("_guiRelayout",e,"hiddenlabels",v)}else{var T,S=b&&b.length,C=[];if(S)for(c=0;c<m.length;c++)(T=m[c]).visible&&T.legendgroup===b&&C.push(c);if("toggle"===s){var E;switch(y.visible){case!0:E="legendonly";break;case!1:E=!1;break;case"legendonly":E=!0}if(S)for(c=0;c<m.length;c++)!1!==m[c].visible&&m[c].legendgroup===b&&N(m[c],E);else N(y,E)}else if("toggleothers"===s){var O,P,L,R=!0;for(c=0;c<m.length;c++)if(!(O=m[c]===y)&&!(P=S&&m[c].legendgroup===b)&&!0===m[c].visible&&!i.traceIs(m[c],"notLegendIsolatable")){R=!1;break}for(c=0;c<m.length;c++)if(!1!==m[c].visible&&!i.traceIs(m[c],"notLegendIsolatable"))switch(y.visible){case"legendonly":N(m[c],!0);break;case!0:L=!!R||"legendonly",O=m[c]===y,P=O||S&&m[c].legendgroup===b,N(m[c],!!P||L)}}for(c=0;c<w.length;c++)if(d=w[c]){var D=d.constructUpdate(),F=Object.keys(D);for(f=0;f<F.length;f++)h=F[f],(_[h]=_[h]||[])[A[c]]=D[h]}for(p=Object.keys(_),c=0;c<p.length;c++)for(h=p[c],f=0;f<x.length;f++)_[h].hasOwnProperty(f)||(_[h][f]=void 0);i.call("_guiRestyle",e,_,x)}}}function j(t,e,n){var r=x.indexOf(t),i=_[e];return i||(i=_[e]=[]),-1===x.indexOf(t)&&(x.push(t),r=x.length-1),i[r]=n,r}function N(t,e){var n=t._fullInput;if(i.hasTransform(n,"groupby")){var a=w[n.index];if(!a){var o=i.getTransformIndices(n,"groupby"),s=o[o.length-1];a=r.keyedContainer(n,"transforms["+s+"].styles","target","value.visible"),w[n.index]=a}var u=a.get(t._group);void 0===u&&(u=!0),!1!==u&&a.set(t._group,e),A[n.index]=j(n.index,"visible",!1!==n.visible)}else{var l=!1!==n.visible&&e;j(n.index,"visible",l)}}}},{"../../lib":160,"../../registry":243}],97:[function(t,e,n){"use strict";n.isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},n.isVertical=function(t){return"h"!==t.orientation},n.isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},{}],98:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":91,"./defaults":93,"./draw":94,"./style":99}],99:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../lib"),o=t("../drawing"),s=t("../color"),u=t("../../traces/scatter/subtypes"),l=t("../../traces/pie/style_one"),c=t("../../traces/pie/helpers").castOption,f=12,d=5,h=2,p=10,v=5;e.exports=function(t,e){var n=e._fullLayout,g=n.legend,m="constant"===g.itemsizing;function y(t,e,n,r){var i;if(t+1)i=t;else{if(!(e&&e.width>0))return 0;i=e.width}return m?r:Math.min(i,n)}function b(t,e,n){var a=t[0].trace,o=a.marker||{},u=o.line||{},l=n?a.type===n&&a.visible:i.traceIs(a,"bar"),c=r.select(e).select("g.legendpoints").selectAll("path.legend"+n).data(l?[t]:[]);c.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.each(function(t){var e=r.select(this),n=t[0],i=y(n.mlw,o.line,v,h);e.style("stroke-width",i+"px").call(s.fill,n.mc||o.color),i&&s.stroke(e,n.mlc||u.color)})}function _(t,e,n){var o=t[0],s=o.trace,u=n?s.type===n&&s.visible:i.traceIs(s,n),f=r.select(e).select("g.legendpoints").selectAll("path.legend"+n).data(u?[t]:[]);if(f.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),f.exit().remove(),f.size()){var d=(s.marker||{}).line,p=y(c(d.width,o.pts),d,v,h),g=a.minExtend(s,{marker:{line:{width:p}}});g.marker.line.color=d.color;var m=a.minExtend(o,{trace:g});l(f,m,g)}}t.each(function(t){var e=r.select(this),n=a.ensureSingle(e,"g","layers");n.style("opacity",t[0].trace.opacity);var i=g.valign,o=t[0].lineHeight,s=t[0].height;if("middle"!==i&&o&&s){var u={top:1,bottom:-1}[i],l=u*(.5*(o-s+3));n.attr("transform","translate(0,"+l+")")}else n.attr("transform",null);var c=n.selectAll("g.legendfill").data([t]);c.enter().append("g").classed("legendfill",!0);var f=n.selectAll("g.legendlines").data([t]);f.enter().append("g").classed("legendlines",!0);var d=n.selectAll("g.legendsymbols").data([t]);d.enter().append("g").classed("legendsymbols",!0),d.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var e=t[0].trace,n=[];"waterfall"===e.type&&e.visible&&(n=t[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var i=r.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);i.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1),i.exit().remove(),i.each(function(t){var n=r.select(this),i=e[t[0]].marker,a=y(void 0,i.line,v,h);n.attr("d",t[1]).style("stroke-width",a+"px").call(s.fill,i.color),a&&n.call(s.stroke,i.line.color)})}).each(function(t){b(t,this,"funnel")}).each(function(t){b(t,this)}).each(function(t){var n=t[0].trace,u=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(i.traceIs(n,"box-violin")&&n.visible?[t]:[]);u.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),u.exit().remove(),u.each(function(){var t=r.select(this);if("all"!==n.boxpoints&&"all"!==n.points||0!==s.opacity(n.fillcolor)||0!==s.opacity((n.line||{}).color)){var i=y(void 0,n.line,v,h);t.style("stroke-width",i+"px").call(s.fill,n.fillcolor),i&&s.stroke(t,n.line.color)}else{var l=a.minExtend(n,{marker:{size:m?f:a.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});u.call(o.pointStyle,l,e)}})}).each(function(t){_(t,this,"funnelarea")}).each(function(t){_(t,this,"pie")}).each(function(t){var n,i,s=t[0],l=s.trace,c=l.visible&&l.fill&&"none"!==l.fill,f=u.hasLines(l),h=l.contours,v=!1,g=!1;if(h){var m=h.coloring;"lines"===m?v=!0:f="none"===m||"heatmap"===m||h.showlines,"constraint"===h.type?c="="!==h._operation:"fill"!==m&&"heatmap"!==m||(g=!0)}var b=u.hasMarkers(l)||u.hasText(l),_=c||g,x=f||v,w=b||!_?"M5,0":x?"M5,-2":"M5,-3",A=r.select(this),k=A.select(".legendfill").selectAll("path").data(c||g?[t]:[]);if(k.enter().append("path").classed("js-fill",!0),k.exit().remove(),k.attr("d",w+"h30v6h-30z").call(c?o.fillGroupStyle:function(t){if(t.size()){var n="legendfill-"+l.uid;o.gradient(t,e,n,"horizontalreversed",l.colorscale,"fill")}}),f||v){var M=y(void 0,l.line,p,d);i=a.minExtend(l,{line:{width:M}}),n=[a.minExtend(s,{trace:i})]}var T=A.select(".legendlines").selectAll("path").data(f||v?[n]:[]);T.enter().append("path").classed("js-line",!0),T.exit().remove(),T.attr("d",w+(v?"l30,0.0001":"h30")).call(f?o.lineGroupStyle:function(t){if(t.size()){var n="legendline-"+l.uid;o.lineGroupStyle(t),o.gradient(t,e,n,"horizontalreversed",l.colorscale,"stroke")}})}).each(function(t){var n,i,s=t[0],l=s.trace,c=u.hasMarkers(l),p=u.hasText(l),v=u.hasLines(l);function g(t,e,n,r){var i=a.nestedProperty(l,t).get(),o=a.isArrayOrTypedArray(i)&&e?e(i):i;if(m&&o&&void 0!==r&&(o=r),n){if(o<n[0])return n[0];if(o>n[1])return n[1]}return o}function y(t){return t[0]}if(c||p||v){var b={},_={};if(c){b.mc=g("marker.color",y),b.mx=g("marker.symbol",y),b.mo=g("marker.opacity",a.mean,[.2,1]),b.mlc=g("marker.line.color",y),b.mlw=g("marker.line.width",a.mean,[0,5],h),_.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var x=g("marker.size",a.mean,[2,16],f);b.ms=x,_.marker.size=x}v&&(_.line={width:g("line.width",y,[0,10],d)}),p&&(b.tx="Aa",b.tp=g("textposition",y),b.ts=10,b.tc=g("textfont.color",y),b.tf=g("textfont.family",y)),n=[a.minExtend(s,b)],(i=a.minExtend(l,_)).selectedpoints=null}var w=r.select(this).select("g.legendpoints"),A=w.selectAll("path.scatterpts").data(c?n:[]);A.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)"),A.exit().remove(),A.call(o.pointStyle,i,e),c&&(n[0].mrc=3);var k=w.selectAll("g.pointtext").data(p?n:[]);k.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),k.exit().remove(),k.selectAll("text").call(o.textPointStyle,i,e)}).each(function(t){var e=t[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data("candlestick"===e.type&&e.visible?[t,t]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(t,n){var i=r.select(this),a=e[n?"increasing":"decreasing"],o=y(void 0,a.line,v,h);i.style("stroke-width",o+"px").call(s.fill,a.fillcolor),o&&s.stroke(i,a.line.color)})}).each(function(t){var e=t[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data("ohlc"===e.type&&e.visible?[t,t]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(t,n){var i=r.select(this),a=e[n?"increasing":"decreasing"],u=y(void 0,a.line,v,h);i.style("fill","none").call(o.dashLine,a.line.dash,u),u&&s.stroke(i,a.line.color)})})}},{"../../lib":160,"../../registry":243,"../../traces/pie/helpers":273,"../../traces/pie/style_one":279,"../../traces/scatter/subtypes":304,"../color":42,"../drawing":63,d3:7}],100:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../plots/plots"),a=t("../../plots/cartesian/axis_ids"),o=t("../../lib"),s=t("../../fonts/ploticon"),u=o._,l=e.exports={};function c(t,e){var n,i,o=e.currentTarget,s=o.getAttribute("data-attr"),u=o.getAttribute("data-val")||!0,l=t._fullLayout,c={},f=a.list(t,null,!0),d="on";if("zoom"===s){var h,p="in"===u?.5:2,v=(1+p)/2,g=(1-p)/2;for(i=0;i<f.length;i++)if(!(n=f[i]).fixedrange)if(h=n._name,"auto"===u)c[h+".autorange"]=!0;else if("reset"===u){if(void 0===n._rangeInitial)c[h+".autorange"]=!0;else{var m=n._rangeInitial.slice();c[h+".range[0]"]=m[0],c[h+".range[1]"]=m[1]}void 0!==n._showSpikeInitial&&(c[h+".showspikes"]=n._showSpikeInitial,"on"!==d||n._showSpikeInitial||(d="off"))}else{var y=[n.r2l(n.range[0]),n.r2l(n.range[1])],b=[v*y[0]+g*y[1],v*y[1]+g*y[0]];c[h+".range[0]"]=n.l2r(b[0]),c[h+".range[1]"]=n.l2r(b[1])}l._cartesianSpikesEnabled=d}else{if("hovermode"!==s||"x"!==u&&"y"!==u){if("hovermode"===s&&"closest"===u){for(i=0;i<f.length;i++)n=f[i],"on"!==d||n.showspikes||(d="off");l._cartesianSpikesEnabled=d}}else u=l._isHoriz?"y":"x",o.setAttribute("data-val",u);c[s]=u}r.call("_guiRelayout",t,c)}function f(t,e){for(var n=e.currentTarget,i=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=t._fullLayout._subplots.gl3d,s={},u=i.split("."),l=0;l<o.length;l++)s[o[l]+"."+u[1]]=a;var c="pan"===a?a:"zoom";s.dragmode=c,r.call("_guiRelayout",t,s)}function d(t,e){for(var n=e.currentTarget,i=n.getAttribute("data-attr"),a=t._fullLayout,o=a._subplots.gl3d,s={},u=0;u<o.length;u++){var l=o[u],c=l+".camera",f=a[l]._scene;"resetLastSave"===i?(s[c+".up"]=f.viewInitial.up,s[c+".eye"]=f.viewInitial.eye,s[c+".center"]=f.viewInitial.center):"resetDefault"===i&&(s[c+".up"]=null,s[c+".eye"]=null,s[c+".center"]=null)}r.call("_guiRelayout",t,s)}function h(t,e){var n=e.currentTarget,r=n._previousVal,i=t._fullLayout,a=i._subplots.gl3d,o=["xaxis","yaxis","zaxis"],s={},u={};if(r)u=r,n._previousVal=null;else{for(var l=0;l<a.length;l++){var c=a[l],f=i[c],d=c+".hovermode";s[d]=f.hovermode,u[d]=!1;for(var h=0;h<3;h++){var p=o[h],v=c+"."+p+".showspikes";u[v]=!1,s[v]=f[p].showspikes}}n._previousVal=s}return u}function p(t,e){for(var n=e.currentTarget,i=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=t._fullLayout,s=o._subplots.geo,u=0;u<s.length;u++){var l=s[u],c=o[l];if("zoom"===i){var f=c.projection.scale,d="in"===a?2*f:.5*f;r.call("_guiRelayout",t,l+".projection.scale",d)}else"reset"===i&&m(t,"geo")}}function v(t){var e=t._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function g(t){var e=v(t);r.call("_guiRelayout",t,"hovermode",e)}function m(t,e){for(var n=t._fullLayout,i=n._subplots[e],a={},o=0;o<i.length;o++)for(var s=i[o],u=n[s]._subplot,l=u.viewInitial,c=Object.keys(l),f=0;f<c.length;f++){var d=c[f];a[s+"."+d]=l[d]}r.call("_guiRelayout",t,a)}l.toImage={name:"toImage",title:function(t){var e=t._context.toImageButtonOptions||{},n=e.format||"png";return u(t,"png"===n?"Download plot as a png":"Download plot")},icon:s.camera,click:function(t){var e=t._context.toImageButtonOptions,n={format:e.format||"png"};o.notifier(u(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&o.isIE()&&(o.notifier(u(t,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach(function(t){t in e&&(n[t]=e[t])}),r.call("downloadImage",t,n).then(function(e){o.notifier(u(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(u(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(t){return u(t,"Edit in Chart Studio")},icon:s.disk,click:function(t){i.sendDataToCloud(t)}},l.editInChartStudio={name:"editInChartStudio",title:function(t){return u(t,"Edit in Chart Studio")},icon:s.pencil,click:function(t){i.sendDataToCloud(t)}},l.zoom2d={name:"zoom2d",title:function(t){return u(t,"Zoom")},attr:"dragmode",val:"zoom",icon:s.zoombox,click:c},l.pan2d={name:"pan2d",title:function(t){return u(t,"Pan")},attr:"dragmode",val:"pan",icon:s.pan,click:c},l.select2d={name:"select2d",title:function(t){return u(t,"Box Select")},attr:"dragmode",val:"select",icon:s.selectbox,click:c},l.lasso2d={name:"lasso2d",title:function(t){return u(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:s.lasso,click:c},l.zoomIn2d={name:"zoomIn2d",title:function(t){return u(t,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:c},l.zoomOut2d={name:"zoomOut2d",title:function(t){return u(t,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:c},l.autoScale2d={name:"autoScale2d",title:function(t){return u(t,"Autoscale")},attr:"zoom",val:"auto",icon:s.autoscale,click:c},l.resetScale2d={name:"resetScale2d",title:function(t){return u(t,"Reset axes")},attr:"zoom",val:"reset",icon:s.home,click:c},l.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return u(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:c},l.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return u(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:s.tooltip_compare,gravity:"ne",click:c},l.zoom3d={name:"zoom3d",title:function(t){return u(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:s.zoombox,click:f},l.pan3d={name:"pan3d",title:function(t){return u(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:s.pan,click:f},l.orbitRotation={name:"orbitRotation",title:function(t){return u(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:s["3d_rotate"],click:f},l.tableRotation={name:"tableRotation",title:function(t){return u(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:s["z-axis"],click:f},l.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return u(t,"Reset camera to default")},attr:"resetDefault",icon:s.home,click:d},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return u(t,"Reset camera to last save")},attr:"resetLastSave",icon:s.movie,click:d},l.hoverClosest3d={name:"hoverClosest3d",title:function(t){return u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(t,e){var n=h(t,e);r.call("_guiRelayout",t,n)}},l.zoomInGeo={name:"zoomInGeo",title:function(t){return u(t,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:p},l.zoomOutGeo={name:"zoomOutGeo",title:function(t){return u(t,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:p},l.resetGeo={name:"resetGeo",title:function(t){return u(t,"Reset")},attr:"reset",val:null,icon:s.autoscale,click:p},l.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:g},l.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:g},l.hoverClosestPie={name:"hoverClosestPie",title:function(t){return u(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:g},l.resetViewSankey={name:"resetSankeyGroup",title:function(t){return u(t,"Reset view")},icon:s.home,click:function(t){for(var e={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<t._fullData.length;n++){var i=t._fullData[n]._viewInitial;e["node.groups"].push(i.node.groups.slice()),e["node.x"].push(i.node.x.slice()),e["node.y"].push(i.node.y.slice())}r.call("restyle",t,e)}},l.toggleHover={name:"toggleHover",title:function(t){return u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(t,e){var n=h(t,e);n.hovermode=v(t),r.call("_guiRelayout",t,n)}},l.resetViews={name:"resetViews",title:function(t){return u(t,"Reset views")},icon:s.home,click:function(t,e){var n=e.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),c(t,e),n.setAttribute("data-attr","resetLastSave"),d(t,e),m(t,"geo"),m(t,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(t){return u(t,"Toggle Spike Lines")},icon:s.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout;e._cartesianSpikesEnabled="on"===e._cartesianSpikesEnabled?"off":"on";var n=function(t){for(var e,n,r=t._fullLayout,i=a.list(t,null,!0),o={},s=0;s<i.length;s++)e=i[s],n=e._name,o[n+".showspikes"]="on"===r._cartesianSpikesEnabled||e._showSpikeInitial;return o}(t);r.call("_guiRelayout",t,n)}},l.resetViewMapbox={name:"resetViewMapbox",title:function(t){return u(t,"Reset view")},attr:"reset",icon:s.home,click:function(t){m(t,"mapbox")}}},{"../../fonts/ploticon":144,"../../lib":160,"../../plots/cartesian/axis_ids":207,"../../plots/plots":236,"../../registry":243}],101:[function(t,e,n){"use strict";n.manage=t("./manage")},{"./manage":102}],102:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axis_ids"),i=t("../../traces/scatter/subtypes"),a=t("../../registry"),o=t("./modebar"),s=t("./buttons");e.exports=function(t){var e=t._fullLayout,n=t._context,u=e._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,c=n.modeBarButtons;l=Array.isArray(c)&&c.length?function(t){for(var e=0;e<t.length;e++)for(var n=t[e],r=0;r<n.length;r++){var i=n[r];if("string"===typeof i){if(void 0===s[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][r]=s[i]}}return t}(c):!n.displayModeBar&&n.watermark?[]:function(t){var e=t._fullLayout,n=t._fullData,o=t._context,u=o.modeBarButtonsToRemove,l=o.modeBarButtonsToAdd,c=e._has("cartesian"),f=e._has("gl3d"),d=e._has("geo"),h=e._has("pie"),p=e._has("funnelarea"),v=e._has("gl2d"),g=e._has("ternary"),m=e._has("mapbox"),y=e._has("polar"),b=e._has("sankey"),_=function(t){for(var e=r.list({_fullLayout:t},null,!0),n=0;n<e.length;n++)if(!e[n].fixedrange)return!1;return!0}(e),x=[];function w(t){if(t.length){for(var e=[],n=0;n<t.length;n++){var r=t[n];-1===u.indexOf(r)&&e.push(s[r])}x.push(e)}}var A=["toImage"];o.showEditInChartStudio?A.push("editInChartStudio"):o.showSendToCloud&&A.push("sendDataToCloud"),w(A);var k=[],M=[],T=[],S=[];return(c||v||h||p||g)+d+f+m+y>1?(M=["toggleHover"],T=["resetViews"]):d?(k=["zoomInGeo","zoomOutGeo"],M=["hoverClosestGeo"],T=["resetGeo"]):f?(M=["hoverClosest3d"],T=["resetCameraDefault3d","resetCameraLastSave3d"]):m?(M=["toggleHover"],T=["resetViewMapbox"]):v?M=["hoverClosestGl2d"]:h?M=["hoverClosestPie"]:b?(M=["hoverClosestCartesian","hoverCompareCartesian"],T=["resetViewSankey"]):M=["toggleHover"],c&&(M=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),function(t){for(var e=0;e<t.length;e++)if(!a.traceIs(t[e],"noHover"))return!1;return!0}(n)&&(M=[]),!c&&!v||_||(k=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==T[0]&&(T=["resetScale2d"])),f?S=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||v)&&!_||g?S=["zoom2d","pan2d"]:m||d?S=["pan2d"]:y&&(S=["zoom2d"]),function(t){for(var e=!1,n=0;n<t.length&&!e;n++){var r=t[n];r._module&&r._module.selectPoints&&(a.traceIs(r,"scatter-like")?(i.hasMarkers(r)||i.hasText(r))&&(e=!0):a.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(e=!0))}return e}(n)&&S.push("select2d","lasso2d"),w(S),w(k.concat(T)),w(M),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}(x,l)}(t),u?u.update(t,l):e._modeBar=o(t,l)}else u&&(u.destroy(),delete e._modeBar)}},{"../../plots/cartesian/axis_ids":207,"../../registry":243,"../../traces/scatter/subtypes":304,"./buttons":100,"./modebar":103}],103:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../lib"),o=t("../../fonts/ploticon"),s=new DOMParser;function u(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var l=u.prototype;l.update=function(t,e){this.graphInfo=t;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var o=r.modebar,s="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";a.deleteRelatedStyleRule(i),a.addRelatedStyleRule(i,s+"#"+i+" .modebar-group","background-color: "+o.bgcolor),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+o.color),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+o.activecolor),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+o.activecolor);var u=!this.hasButtons(e),l=this.hasLogo!==n.displaylogo,c=this.locale!==n.locale;if(this.locale=n.locale,(u||l||c)&&(this.removeAllButtons(),this.updateButtons(e),n.watermark||n.displaylogo)){var f=this.getLogo();n.watermark&&(f.className=f.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()},l.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var n=e.createGroup();t.forEach(function(t){var r=t.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");e.buttonsNames.push(r);var i=e.createButton(t);e.buttonElements.push(i),n.appendChild(i)}),e.element.appendChild(n)})},l.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},l.createButton=function(t){var e=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=t.title;void 0===i?i=t.name:"function"===typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==t.attr&&n.setAttribute("data-attr",t.attr);var a=t.val;void 0!==a&&("function"===typeof a&&(a=a(this.graphInfo)),n.setAttribute("data-val",a));var s=t.click;if("function"!==typeof s)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(n){t.click(e.graphInfo,n),e.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",t.toggle||!1),t.toggle&&r.select(n).classed("active",!0);var u=t.icon;return"function"===typeof u?n.appendChild(u()):n.appendChild(this.createIcon(u||o.question)),n.setAttribute("data-gravity",t.gravity||"n"),n},l.createIcon=function(t){var e,n=i(t.height)?Number(t.height):t.ascent-t.descent,r="http://www.w3.org/2000/svg";if(t.path){(e=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,t.width,n].join(" ")),e.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",t.path),t.transform?a.setAttribute("transform",t.transform):void 0!==t.ascent&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(a)}if(t.svg){var o=s.parseFromString(t.svg,"application/xml");e=o.childNodes[0]}return e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},l.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,n=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var i=t.getAttribute("data-val")||!0,o=t.getAttribute("data-attr"),s="true"===t.getAttribute("data-toggle"),u=r.select(t);if(s)o===n&&u.classed("active",!u.classed("active"));else{var l=null===o?o:a.nestedProperty(e,o).get();u.classed("active",l===i)}})},l.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n){if(t[n].length!==e[n].length)return!1;for(var r=0;r<t[n].length;r++)if(t[n][r].name!==e[n][r].name)return!1}return!0},l.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plot.ly/",e.target="_blank",e.setAttribute("data-title",a._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(o.newplotlylogo)),t.appendChild(e),t},l.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},l.destroy=function(){a.removeElement(this.container.querySelector(".modebar")),a.deleteRelatedStyleRule(this._uid)},e.exports=function(t,e){var n=t._fullLayout,i=new u({graphInfo:t,container:n._modebardiv.node(),buttons:e});return n._privateplot&&r.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../fonts/ploticon":144,"../../lib":160,d3:7,"fast-isnumeric":9}],104:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),a=t("../../plot_api/plot_template").templatedArray,o=a("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":194,"../../plots/font_attributes":230,"../color/attributes":41}],105:[function(t,e,n){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],106:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../color"),a=t("../../plot_api/plot_template"),o=t("../../plots/array_container_defaults"),s=t("./attributes"),u=t("./constants");function l(t,e,n,i){var a=i.calendar;function o(n,i){return r.coerce(t,e,s.buttons,n,i)}var u=o("visible");if(u){var l=o("step");"all"!==l&&(!a||"gregorian"===a||"month"!==l&&"year"!==l?o("stepmode"):e.stepmode="backward",o("count")),o("label")}}e.exports=function(t,e,n,c,f){var d=t.rangeselector||{},h=a.newContainer(e,"rangeselector");function p(t,e){return r.coerce(d,h,s,t,e)}var v=o(d,h,{name:"buttons",handleItemDefaults:l,calendar:f}),g=p("visible",v.length>0);if(g){var m=function(t,e,n){for(var r=n.filter(function(n){return e[n].anchor===t._id}),i=0,a=0;a<r.length;a++){var o=e[r[a]].domain;o&&(i=Math.max(o[1],i))}return[t.domain[0],i+u.yPad]}(e,n,c);p("x",m[0]),p("y",m[1]),r.noneOrAll(t,e,["x","y"]),p("xanchor"),p("yanchor"),r.coerceFont(p,"font",n.font);var y=p("bgcolor");p("activecolor",i.contrast(y,u.lightAmount,u.darkAmount)),p("bordercolor"),p("borderwidth")}}},{"../../lib":160,"../../plot_api/plot_template":194,"../../plots/array_container_defaults":200,"../color":42,"./attributes":104,"./constants":105}],107:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../plots/plots"),o=t("../color"),s=t("../drawing"),u=t("../../lib"),l=t("../../lib/svg_text_utils"),c=t("../../plots/cartesian/axis_ids"),f=t("../../constants/alignment"),d=f.LINE_SPACING,h=f.FROM_TL,p=f.FROM_BR,v=t("./constants"),g=t("./get_update_object");function m(t){return t._id}function y(t,e,n){var r=u.ensureSingle(t,"rect","selector-rect",function(t){t.attr("shape-rendering","crispEdges")});r.attr({rx:v.rx,ry:v.ry}),r.call(o.stroke,e.bordercolor).call(o.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,n)).style("stroke-width",e.borderwidth+"px")}function b(t,e,n,r){var i,a,o=u.ensureSingle(t,"text","selector-text",function(t){t.classed("user-select-none",!0).attr("text-anchor","middle")});o.call(s.font,e.font).text((i=n,a=r._fullLayout._meta,i.label?a?u.templateString(i.label,a):i.label:"all"===i.step?"all":i.count+i.step.charAt(0))).call(function(t){l.convertToTspans(t,r)})}e.exports=function(t){var e=t._fullLayout,n=e._infolayer.selectAll(".rangeselector").data(function(t){for(var e=c.list(t,"x",!0),n=[],r=0;r<e.length;r++){var i=e[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(t),m);n.enter().append("g").classed("rangeselector",!0),n.exit().remove(),n.style({cursor:"pointer","pointer-events":"all"}),n.each(function(e){var n=r.select(this),o=e,c=o.rangeselector,f=n.selectAll("g.button").data(u.filterVisible(c.buttons));f.enter().append("g").classed("button",!0),f.exit().remove(),f.each(function(e){var n=r.select(this),a=g(o,e);e._isActive=function(t,e,n){if("all"===e.step)return!0===t.autorange;var r=Object.keys(n);return t.range[0]===n[r[0]]&&t.range[1]===n[r[1]]}(o,e,a),n.call(y,c,e),n.call(b,c,e,t),n.on("click",function(){t._dragged||i.call("_guiRelayout",t,a)}),n.on("mouseover",function(){e._isHovered=!0,n.call(y,c,e)}),n.on("mouseout",function(){e._isHovered=!1,n.call(y,c,e)})}),function(t,e,n,i,o){var c=0,f=0,g=n.borderwidth;e.each(function(){var t=r.select(this),e=t.select(".selector-text"),i=n.font.size*d,a=Math.max(i*l.lineCount(e),16)+3;f=Math.max(f,a)}),e.each(function(){var t=r.select(this),e=t.select(".selector-rect"),i=t.select(".selector-text"),a=i.node()&&s.bBox(i.node()).width,o=n.font.size*d,u=l.lineCount(i),h=Math.max(a+10,v.minButtonWidth);t.attr("transform","translate("+(g+c)+","+g+")"),e.attr({x:0,y:0,width:h,height:f}),l.positionText(i,h/2,f/2-(u-1)*o/2+3),c+=h+5});var m=t._fullLayout._size,y=m.l+m.w*n.x,b=m.t+m.h*(1-n.y),_="left";u.isRightAnchor(n)&&(y-=c,_="right"),u.isCenterAnchor(n)&&(y-=c/2,_="center");var x="top";u.isBottomAnchor(n)&&(b-=f,x="bottom"),u.isMiddleAnchor(n)&&(b-=f/2,x="middle"),c=Math.ceil(c),f=Math.ceil(f),y=Math.round(y),b=Math.round(b),a.autoMargin(t,i+"-range-selector",{x:n.x,y:n.y,l:c*h[_],r:c*p[_],b:f*p[x],t:f*h[x]}),o.attr("transform","translate("+y+","+b+")")}(t,f,c,o._name,n)})}},{"../../constants/alignment":137,"../../lib":160,"../../lib/svg_text_utils":181,"../../plots/cartesian/axis_ids":207,"../../plots/plots":236,"../../registry":243,"../color":42,"../drawing":63,"./constants":105,"./get_update_object":108,d3:7}],108:[function(t,e,n){"use strict";var r=t("d3");e.exports=function(t,e){var n=t._name,i={};if("all"===e.step)i[n+".autorange"]=!0;else{var a=function(t,e){var n,i=t.range,a=new Date(t.r2l(i[1])),o=e.step,s=e.count;switch(e.stepmode){case"backward":n=t.l2r(+r.time[o].utc.offset(a,-s));break;case"todate":var u=r.time[o].utc.offset(a,-s);n=t.l2r(+r.time[o].utc.ceil(u))}var l=i[1];return[n,l]}(t,e);i[n+".range[0]"]=a[0],i[n+".range[1]"]=a[1]}return i}},{d3:7}],109:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":104,"./defaults":106,"./draw":107}],110:[function(t,e,n){"use strict";var r=t("../color/attributes");e.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":41}],111:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axis_ids").list,i=t("../../plots/cartesian/autorange").getAutoRange,a=t("./constants");e.exports=function(t){for(var e=r(t,"x",!0),n=0;n<e.length;n++){var o=e[n],s=o[a.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=i(t,o))}}},{"../../plots/cartesian/autorange":203,"../../plots/cartesian/axis_ids":207,"./constants":112}],112:[function(t,e,n){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],113:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/plot_template"),a=t("../../plots/cartesian/axis_ids"),o=t("./attributes"),s=t("./oppaxis_attributes");e.exports=function(t,e,n){var u=t[n],l=e[n];if(u.rangeslider||e._requestRangeslider[l._id]){r.isPlainObject(u.rangeslider)||(u.rangeslider={});var c,f,d=u.rangeslider,h=i.newContainer(l,"rangeslider"),p=A("visible");if(p){A("bgcolor",e.plot_bgcolor),A("bordercolor"),A("borderwidth"),A("thickness"),A("autorange",!l.isValidRange(d.range)),A("range");var v=e._subplots;if(v)for(var g=v.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===a.name2id(n)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),m=r.simpleMap(g,a.id2name),y=0;y<m.length;y++){var b=m[y];c=d[b]||{},f=i.newContainer(h,b,"yaxis");var _,x=e[b];c.range&&x.isValidRange(c.range)&&(_="fixed");var w=k("rangemode",_);"match"!==w&&k("range",x.range.slice())}h._input=d}}function A(t,e){return r.coerce(d,h,o,t,e)}function k(t,e){return r.coerce(c,f,s,t,e)}}},{"../../lib":160,"../../plot_api/plot_template":194,"../../plots/cartesian/axis_ids":207,"./attributes":110,"./oppaxis_attributes":117}],114:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../plots/plots"),o=t("../../lib"),s=t("../drawing"),u=t("../color"),l=t("../titles"),c=t("../../plots/cartesian"),f=t("../../plots/cartesian/axis_ids"),d=t("../dragelement"),h=t("../../lib/setcursor"),p=t("./constants");function v(t,e,n,r){var i=o.ensureSingle(t,"rect",p.bgClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=r.borderwidth%2===0?r.borderwidth:r.borderwidth-1,u=-r._offsetShift,l=s.crispRound(e,r.borderwidth);i.attr({width:r._width+a,height:r._height+a,transform:"translate("+u+","+u+")",fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":l})}function g(t,e,n,r){var i=e._fullLayout,a=o.ensureSingleById(i._topdefs,"clipPath",r._clipId,function(t){t.append("rect").attr({x:0,y:0})});a.select("rect").attr({width:r._width,height:r._height})}function m(t,e,n,i){var u,l=e.calcdata,d=t.selectAll("g."+p.rangePlotClassName).data(n._subplotsWith,o.identity);d.enter().append("g").attr("class",function(t){return p.rangePlotClassName+" "+t}).call(s.setClipUrl,i._clipId,e),d.order(),d.exit().remove(),d.each(function(t,o){var s=r.select(this),d=0===o,h=f.getFromId(e,t,"y"),p=h._name,v=i[p],g={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};g.layout[p]={type:h.type,domain:[0,1],range:"match"!==v.rangemode?v.range.slice():h.range.slice(),calendar:h.calendar},a.supplyDefaults(g);var m=g._fullLayout.xaxis,y=g._fullLayout[p];m.clearCalc(),m.setScale(),y.clearCalc(),y.setScale();var b={id:t,plotgroup:s,xaxis:m,yaxis:y,isRangePlot:!0};d?u=b:(b.mainplot="xy",b.mainplotinfo=u),c.rangePlot(e,b,function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],a=i[0].trace;a.xaxis+a.yaxis===e&&n.push(i)}return n}(l,t))})}function y(t,e,n,r,i){var a=o.ensureSingle(t,"rect",p.maskMinClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})});a.attr("height",r._height).call(u.fill,p.maskColor);var s=o.ensureSingle(t,"rect",p.maskMaxClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})});if(s.attr("height",r._height).call(u.fill,p.maskColor),"match"!==i.rangemode){var l=o.ensureSingle(t,"rect",p.maskMinOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",r._width).call(u.fill,p.maskOppAxisColor);var c=o.ensureSingle(t,"rect",p.maskMaxOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})});c.attr("width",r._width).style("border-top",p.maskOppBorder).call(u.fill,p.maskOppAxisColor)}}function b(t,e,n,r){if(!e._context.staticPlot){var i=o.ensureSingle(t,"rect",p.slideBoxClassName,function(t){t.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})});i.attr({height:r._height,fill:p.slideBoxFill})}}function _(t,e,n,r){var i=o.ensureSingle(t,"g",p.grabberMinClassName),a=o.ensureSingle(t,"g",p.grabberMaxClassName),s={x:0,width:p.handleWidth,rx:p.handleRadius,fill:u.background,stroke:u.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"},l={y:Math.round(r._height/4),height:Math.round(r._height/2)},c=o.ensureSingle(i,"rect",p.handleMinClassName,function(t){t.attr(s)});c.attr(l);var f=o.ensureSingle(a,"rect",p.handleMaxClassName,function(t){t.attr(s)});if(f.attr(l),!e._context.staticPlot){var d={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:p.grabAreaCursor},h=o.ensureSingle(i,"rect",p.grabAreaMinClassName,function(t){t.attr(d)});h.attr("height",r._height);var v=o.ensureSingle(a,"rect",p.grabAreaMaxClassName,function(t){t.attr(d)});v.attr("height",r._height)}}e.exports=function(t){for(var e=t._fullLayout,n=e._rangeSliderData,a=0;a<n.length;a++){var s=n[a][p.name];s._clipId=s._id+"-"+e._uid}var u=e._infolayer.selectAll("g."+p.containerClassName).data(n,function(t){return t._name});u.exit().each(function(t){var n=t[p.name];e._topdefs.select("#"+n._clipId).remove()}).remove(),0!==n.length&&(u.enter().append("g").classed(p.containerClassName,!0).attr("pointer-events","all"),u.each(function(n){var a=r.select(this),s=n[p.name],u=e[f.id2name(n.anchor)],c=s[f.id2name(n.anchor)];if(s.range){var x,w=o.simpleMap(s.range,n.r2l),A=o.simpleMap(n.range,n.r2l);x=A[0]<A[1]?[Math.min(w[0],A[0]),Math.max(w[1],A[1])]:[Math.max(w[0],A[0]),Math.min(w[1],A[1])],s.range=s._input.range=o.simpleMap(x,n.l2r)}n.cleanRange("rangeslider.range");var k=e.margin,M=e._size,T=n.domain,S=s._tickHeight,C=s._oppBottom;s._width=M.w*(T[1]-T[0]);var E=Math.round(k.l+M.w*T[0]),O=Math.round(M.t+M.h*(1-C)+S+s._offsetShift+p.extraPad);a.attr("transform","translate("+E+","+O+")");var P=n.r2l(s.range[0]),L=n.r2l(s.range[1]),R=L-P;if(s.p2d=function(t){return t/s._width*R+P},s.d2p=function(t){return(t-P)/R*s._width},s._rl=[P,L],"match"!==c.rangemode){var D=u.r2l(c.range[0]),F=u.r2l(c.range[1]),j=F-D;s.d2pOppAxis=function(t){return(t-D)/j*s._height}}a.call(v,t,n,s).call(g,t,n,s).call(m,t,n,s).call(y,t,n,s,c).call(b,t,n,s).call(_,t,n,s),function(t,e,n,a){var s=t.select("rect."+p.slideBoxClassName).node(),u=t.select("rect."+p.grabAreaMinClassName).node(),l=t.select("rect."+p.grabAreaMaxClassName).node();t.on("mousedown",function(){var c=r.event,f=c.target,p=c.clientX,v=p-t.node().getBoundingClientRect().left,g=a.d2p(n._rl[0]),m=a.d2p(n._rl[1]),y=d.coverSlip();function b(t){var c,d,b,_=+t.clientX-p;switch(f){case s:b="ew-resize",c=g+_,d=m+_;break;case u:b="col-resize",c=g+_,d=m;break;case l:b="col-resize",c=g,d=m+_;break;default:b="ew-resize",c=v,d=v+_}if(d<c){var x=d;d=c,c=x}a._pixelMin=c,a._pixelMax=d,h(r.select(y),b),function(t,e,n,r){function a(t){return n.l2r(o.constrain(t,r._rl[0],r._rl[1]))}var s=a(r.p2d(r._pixelMin)),u=a(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){i.call("_guiRelayout",e,n._name+".range",[s,u])})}(0,e,n,a)}y.addEventListener("mousemove",b),y.addEventListener("mouseup",function t(){y.removeEventListener("mousemove",b),y.removeEventListener("mouseup",t),o.removeElement(y)})})}(a,t,n,s),function(t,e,n,r,i,a){var s=p.handleWidth/2;function u(t){return o.constrain(t,0,r._width)}function l(t){return o.constrain(t,0,r._height)}function c(t){return o.constrain(t,-s,r._width+s)}var f=u(r.d2p(n._rl[0])),d=u(r.d2p(n._rl[1]));if(t.select("rect."+p.slideBoxClassName).attr("x",f).attr("width",d-f),t.select("rect."+p.maskMinClassName).attr("width",f),t.select("rect."+p.maskMaxClassName).attr("x",d).attr("width",r._width-d),"match"!==a.rangemode){var h=r._height-l(r.d2pOppAxis(i._rl[1])),v=r._height-l(r.d2pOppAxis(i._rl[0]));t.select("rect."+p.maskMinOppAxisClassName).attr("x",f).attr("height",h).attr("width",d-f),t.select("rect."+p.maskMaxOppAxisClassName).attr("x",f).attr("y",v).attr("height",r._height-v).attr("width",d-f),t.select("rect."+p.slideBoxClassName).attr("y",h).attr("height",v-h)}var g=Math.round(c(f-s))-.5,m=Math.round(c(d-s))+.5;t.select("g."+p.grabberMinClassName).attr("transform","translate("+g+",0.5)"),t.select("g."+p.grabberMaxClassName).attr("transform","translate("+m+",0.5)")}(a,0,n,s,u,c),"bottom"===n.side&&l.draw(t,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:e._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:O+s._height+s._offsetShift+10+1.5*n.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":160,"../../lib/setcursor":179,"../../plots/cartesian":215,"../../plots/cartesian/axis_ids":207,"../../plots/plots":236,"../../registry":243,"../color":42,"../dragelement":60,"../drawing":63,"../titles":130,"./constants":112,d3:7}],115:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axis_ids"),i=t("./constants"),a=i.name;function o(t){var e=t&&t[a];return e&&e.visible}n.isVisible=o,n.makeData=function(t){var e=r.list({_fullLayout:t},"x",!0),n=t.margin,i=[];if(!t._has("gl2d"))for(var s=0;s<e.length;s++){var u=e[s];if(o(u)){i.push(u);var l=u[a];l._id=a+u._id,l._height=(t.height-n.b-n.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}t._rangeSliderData=i},n.autoMarginOpts=function(t,e){for(var n=e[a],o=1/0,s=e._counterAxes,u=0;u<s.length;u++){var l=s[u],c=r.getFromId(t,l);o=Math.min(o,c.domain[0])}n._oppBottom=o;var f="bottom"===e.side&&e._boundingBox.height||0;return n._tickHeight=f,{x:0,y:o,l:0,r:0,t:0,b:n._height+t._fullLayout.margin.b+f,pad:i.extraPad+2*n._offsetShift}}},{"../../plots/cartesian/axis_ids":207,"./constants":112}],116:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),a=t("./oppaxis_attributes"),o=t("./helpers");e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:a})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":160,"./attributes":110,"./calc_autorange":111,"./defaults":113,"./draw":114,"./helpers":115,"./oppaxis_attributes":117}],117:[function(t,e,n){"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],118:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../traces/scatter/attributes").line,a=t("../drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray;e.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},i.color,{editType:"arraydraw"}),width:o({},i.width,{editType:"calc+arraydraw"}),dash:o({},a,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":155,"../../plot_api/plot_template":194,"../../traces/scatter/attributes":281,"../annotations/attributes":27,"../drawing/attributes":62}],119:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("./constants"),o=t("./helpers");function s(t){return l(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function u(t){return l(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function l(t,e,n,i,s,u){var l=t/2,c=u;if("pixel"===e){var f=s?o.extractPathCoords(s,u?a.paramIsY:a.paramIsX):[n,i],d=r.aggNums(Math.max,null,f),h=r.aggNums(Math.min,null,f),p=h<0?Math.abs(h)+l:l,v=d>0?d+l:l;return{ppad:l,ppadplus:c?p:v,ppadminus:c?v:p}}return{ppad:l}}function c(t,e,n,r,i){var s="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[s(e),s(n)];if(r){var u,l,c,f,d,h=1/0,p=-1/0,v=r.match(a.segmentRE);for("date"===t.type&&(s=o.decodeDate(s)),u=0;u<v.length;u++)l=v[u],void 0!==(c=i[l.charAt(0)].drawn)&&(!(f=v[u].substr(1).match(a.paramRE))||f.length<c||((d=s(f[c]))<h&&(h=d),d>p&&(p=d)));return p>=h?[h,p]:void 0}}e.exports=function(t){var e=t._fullLayout,n=r.filterVisible(e.shapes);if(n.length&&t._fullData.length)for(var o=0;o<n.length;o++){var l,f,d=n[o];if(d._extremes={},"paper"!==d.xref){var h="pixel"===d.xsizemode?d.xanchor:d.x0,p="pixel"===d.xsizemode?d.xanchor:d.x1;l=i.getFromId(t,d.xref),(f=c(l,h,p,d.path,a.paramIsX))&&(d._extremes[l._id]=i.findExtremes(l,f,s(d)))}if("paper"!==d.yref){var v="pixel"===d.ysizemode?d.yanchor:d.y0,g="pixel"===d.ysizemode?d.yanchor:d.y1;l=i.getFromId(t,d.yref),(f=c(l,v,g,d.path,a.paramIsY))&&(d._extremes[l._id]=i.findExtremes(l,f,u(d)))}}}},{"../../lib":160,"../../plots/cartesian/axes":204,"./constants":120,"./helpers":123}],120:[function(t,e,n){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],121:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./attributes"),s=t("./helpers");function u(t,e,n){function a(n,i){return r.coerce(t,e,o,n,i)}var u=a("visible");if(u){a("layer"),a("opacity"),a("fillcolor"),a("line.color"),a("line.width"),a("line.dash");for(var l=t.path?"path":"rect",c=a("type",l),f=a("xsizemode"),d=a("ysizemode"),h=["x","y"],p=0;p<2;p++){var v,g,m,y=h[p],b=y+"anchor",_="x"===y?f:d,x={_fullLayout:n},w=i.coerceRef(t,e,x,y,"","paper");if("paper"!==w?((v=i.getFromId(x,w))._shapeIndices.push(e._index),m=s.rangeToShapePosition(v),g=s.shapePositionToRange(v)):g=m=r.identity,"path"!==c){var A=y+"0",k=y+"1",M=t[A],T=t[k];t[A]=g(t[A],!0),t[k]=g(t[k],!0),"pixel"===_?(a(A,0),a(k,10)):(i.coercePosition(e,x,a,w,A,.25),i.coercePosition(e,x,a,w,k,.75)),e[A]=m(e[A]),e[k]=m(e[k]),t[A]=M,t[k]=T}if("pixel"===_){var S=t[b];t[b]=g(t[b],!0),i.coercePosition(e,x,a,w,b,.25),e[b]=m(e[b]),t[b]=S}}"path"===c?a("path"):r.noneOrAll(t,e,["x0","x1","y0","y1"])}}e.exports=function(t,e){a(t,e,{name:"shapes",handleItemDefaults:u})}},{"../../lib":160,"../../plots/array_container_defaults":200,"../../plots/cartesian/axes":204,"./attributes":118,"./helpers":123}],122:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),a=t("../../plots/cartesian/axes"),o=t("../color"),s=t("../drawing"),u=t("../../plot_api/plot_template").arrayEditor,l=t("../dragelement"),c=t("../../lib/setcursor"),f=t("./constants"),d=t("./helpers");function h(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var n=t._fullLayout.shapes[e]||{};if(n._input&&!1!==n.visible)if("below"!==n.layer)y(t._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)y(t._fullLayout._shapeLowerLayer);else{var h=t._fullLayout._plots[n.xref+n.yref];if(h){var m=h.mainplotinfo||h;y(m.shapelayer)}else y(t._fullLayout._shapeLowerLayer)}function y(h){var m={"data-index":e,"fill-rule":"evenodd",d:v(t,n)},y=n.line.width?n.line.color:"rgba(0,0,0,0)",b=h.append("path").attr(m).style("opacity",n.opacity).call(o.stroke,y).call(o.fill,n.fillcolor).call(s.dashLine,n.line.dash,n.line.width);p(b,t,n),t._context.edits.shapePosition&&function(t,e,n,o,h){var m,y,b,_,x,w,A,k,M,T,S,C,E,O,P,L,R=10,D=10,F="pixel"===n.xsizemode,j="pixel"===n.ysizemode,N="line"===n.type,z="path"===n.type,I=u(t.layout,"shapes",n),B=I.modifyItem,q=a.getFromId(t,n.xref),U=a.getFromId(t,n.yref),H=d.getDataToPixel(t,q),W=d.getDataToPixel(t,U,!0),G=d.getPixelToData(t,q),V=d.getPixelToData(t,U,!0),Y=N?function(){var t=Math.max(n.line.width,10),r=h.append("g").attr("data-index",o);r.append("path").attr("d",e.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var i={"fill-opacity":"0"},a=t/2>10?t/2:10;return r.append("circle").attr({"data-line-point":"start-point",cx:F?H(n.xanchor)+n.x0:H(n.x0),cy:j?W(n.yanchor)-n.y0:W(n.y0),r:a}).style(i).classed("cursor-grab",!0),r.append("circle").attr({"data-line-point":"end-point",cx:F?H(n.xanchor)+n.x1:H(n.x1),cy:j?W(n.yanchor)-n.y1:W(n.y1),r:a}).style(i).classed("cursor-grab",!0),r}():e,Z={element:Y.node(),gd:t,prepFn:function(r){F&&(x=H(n.xanchor)),j&&(w=W(n.yanchor)),"path"===n.type?P=n.path:(m=F?n.x0:H(n.x0),y=j?n.y0:W(n.y0),b=F?n.x1:H(n.x1),_=j?n.y1:W(n.y1)),m<b?(M=m,E="x0",T=b,O="x1"):(M=b,E="x1",T=m,O="x0"),!j&&y<_||j&&y>_?(A=y,S="y0",k=_,C="y1"):(A=_,S="y1",k=y,C="y0"),X(r),K(h,n),function(t,e,n){var r=e.xref,i=e.yref,o=a.getFromId(n,r),u=a.getFromId(n,i),l="";"paper"===r||o.autorange||(l+=r),"paper"===i||u.autorange||(l+=i),s.setClipUrl(t,l?"clip"+n._fullLayout._uid+l:null,n)}(e,n,t),Z.moveFn="move"===L?$:J},doneFn:function(){c(e),Q(h),p(e,t,n),r.call("_guiRelayout",t,I.getUpdateObj())},clickFn:function(){Q(h)}};function X(t){if(N)L="path"===t.target.tagName?"move":"start-point"===t.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var n=Z.element.getBoundingClientRect(),r=n.right-n.left,i=n.bottom-n.top,a=t.clientX-n.left,o=t.clientY-n.top,s=!z&&r>R&&i>D&&!t.shiftKey?l.getCursor(a/r,1-o/i):"move";c(e,s),L=s.split("-")[0]}}function $(r,i){if("path"===n.type){var a=function(t){return t},o=a,s=a;F?B("xanchor",n.xanchor=G(x+r)):(o=function(t){return G(H(t)+r)},q&&"date"===q.type&&(o=d.encodeDate(o))),j?B("yanchor",n.yanchor=V(w+i)):(s=function(t){return V(W(t)+i)},U&&"date"===U.type&&(s=d.encodeDate(s))),B("path",n.path=g(P,o,s))}else F?B("xanchor",n.xanchor=G(x+r)):(B("x0",n.x0=G(m+r)),B("x1",n.x1=G(b+r))),j?B("yanchor",n.yanchor=V(w+i)):(B("y0",n.y0=V(y+i)),B("y1",n.y1=V(_+i)));e.attr("d",v(t,n)),K(h,n)}function J(r,i){if(z){var a=function(t){return t},o=a,s=a;F?B("xanchor",n.xanchor=G(x+r)):(o=function(t){return G(H(t)+r)},q&&"date"===q.type&&(o=d.encodeDate(o))),j?B("yanchor",n.yanchor=V(w+i)):(s=function(t){return V(W(t)+i)},U&&"date"===U.type&&(s=d.encodeDate(s))),B("path",n.path=g(P,o,s))}else if(N){if("resize-over-start-point"===L){var u=m+r,l=j?y-i:y+i;B("x0",n.x0=F?u:G(u)),B("y0",n.y0=j?l:V(l))}else if("resize-over-end-point"===L){var c=b+r,f=j?_-i:_+i;B("x1",n.x1=F?c:G(c)),B("y1",n.y1=j?f:V(f))}}else{var p=~L.indexOf("n")?A+i:A,I=~L.indexOf("s")?k+i:k,Y=~L.indexOf("w")?M+r:M,Z=~L.indexOf("e")?T+r:T;~L.indexOf("n")&&j&&(p=A-i),~L.indexOf("s")&&j&&(I=k-i),(!j&&I-p>D||j&&p-I>D)&&(B(S,n[S]=j?p:V(p)),B(C,n[C]=j?I:V(I))),Z-Y>R&&(B(E,n[E]=F?Y:G(Y)),B(O,n[O]=F?Z:G(Z)))}e.attr("d",v(t,n)),K(h,n)}function K(t,e){(F||j)&&function(){var n="path"!==e.type,r=t.selectAll(".visual-cue").data([0]);r.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var a=H(F?e.xanchor:i.midRange(n?[e.x0,e.x1]:d.extractPathCoords(e.path,f.paramIsX))),o=W(j?e.yanchor:i.midRange(n?[e.y0,e.y1]:d.extractPathCoords(e.path,f.paramIsY)));if(a=d.roundPositionForSharpStrokeRendering(a,1),o=d.roundPositionForSharpStrokeRendering(o,1),F&&j){var s="M"+(a-1-1)+","+(o-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";r.attr("d",s)}else if(F){var u="M"+(a-1-1)+","+(o-9-1)+"v18 h2 v-18 Z";r.attr("d",u)}else{var l="M"+(a-9-1)+","+(o-1-1)+"h18 v2 h-18 Z";r.attr("d",l)}}()}function Q(t){t.selectAll(".visual-cue").remove()}l.init(Z),Y.node().onmousemove=X}(t,b,n,e,h)}}function p(t,e,n){var r=(n.xref+n.yref).replace(/paper/g,"");s.setClipUrl(t,r?"clip"+e._fullLayout._uid+r:null,e)}function v(t,e){var n,r,o,s,u,l,c,h,p=e.type,v=a.getFromId(t,e.xref),g=a.getFromId(t,e.yref),m=t._fullLayout._size;if(v?(n=d.shapePositionToRange(v),r=function(t){return v._offset+v.r2p(n(t,!0))}):r=function(t){return m.l+m.w*t},g?(o=d.shapePositionToRange(g),s=function(t){return g._offset+g.r2p(o(t,!0))}):s=function(t){return m.t+m.h*(1-t)},"path"===p)return v&&"date"===v.type&&(r=d.decodeDate(r)),g&&"date"===g.type&&(s=d.decodeDate(s)),function(t,e,n){var r=t.path,a=t.xsizemode,o=t.ysizemode,s=t.xanchor,u=t.yanchor;return r.replace(f.segmentRE,function(t){var r=0,l=t.charAt(0),c=f.paramIsX[l],d=f.paramIsY[l],h=f.numParams[l],p=t.substr(1).replace(f.paramRE,function(t){return c[r]?t="pixel"===a?e(s)+Number(t):e(t):d[r]&&(t="pixel"===o?n(u)-Number(t):n(t)),++r>h&&(t="X"),t});return r>h&&(p=p.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+t)),l+p})}(e,r,s);if("pixel"===e.xsizemode){var y=r(e.xanchor);u=y+e.x0,l=y+e.x1}else u=r(e.x0),l=r(e.x1);if("pixel"===e.ysizemode){var b=s(e.yanchor);c=b-e.y0,h=b-e.y1}else c=s(e.y0),h=s(e.y1);if("line"===p)return"M"+u+","+c+"L"+l+","+h;if("rect"===p)return"M"+u+","+c+"H"+l+"V"+h+"H"+u+"Z";var _=(u+l)/2,x=(c+h)/2,w=Math.abs(_-u),A=Math.abs(x-c),k="A"+w+","+A,M=_+w+","+x,T=_+","+(x-A);return"M"+M+k+" 0 1,1 "+T+k+" 0 0,1 "+M+"Z"}function g(t,e,n){return t.replace(f.segmentRE,function(t){var r=0,i=t.charAt(0),a=f.paramIsX[i],o=f.paramIsY[i],s=f.numParams[i],u=t.substr(1).replace(f.paramRE,function(t){return r>=s?t:(a[r]?t=e(t):o[r]&&(t=n(t)),r++,t)});return i+u})}e.exports={draw:function(t){var e=t._fullLayout;for(var n in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._plots){var r=e._plots[n].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<e.shapes.length;i++)e.shapes[i].visible&&h(t,i)},drawOne:h}},{"../../lib":160,"../../lib/setcursor":179,"../../plot_api/plot_template":194,"../../plots/cartesian/axes":204,"../../registry":243,"../color":42,"../dragelement":60,"../drawing":63,"./constants":120,"./helpers":123}],123:[function(t,e,n){"use strict";var r=t("./constants"),i=t("../../lib");n.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},n.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},n.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},n.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},n.extractPathCoords=function(t,e){var n=[],a=t.match(r.segmentRE);return a.forEach(function(t){var a=e[t.charAt(0)].drawn;if(void 0!==a){var o=t.substr(1).match(r.paramRE);!o||o.length<a||n.push(i.cleanNumber(o[a]))}}),n},n.getDataToPixel=function(t,e,r){var i,a=t._fullLayout._size;if(e){var o=n.shapePositionToRange(e);i=function(t){return e._offset+e.r2p(o(t,!0))},"date"===e.type&&(i=n.decodeDate(i))}else i=r?function(t){return a.t+a.h*(1-t)}:function(t){return a.l+a.w*t};return i},n.getPixelToData=function(t,e,r){var i,a=t._fullLayout._size;if(e){var o=n.rangeToShapePosition(e);i=function(t){return o(e.p2r(t-e._offset))}}else i=r?function(t){return 1-(t-a.t)/a.h}:function(t){return(t-a.l)/a.w};return i},n.roundPositionForSharpStrokeRendering=function(t,e){var n=1===Math.round(e%2),r=Math.round(t);return n?r+.5:r}},{"../../lib":160,"./constants":120}],124:[function(t,e,n){"use strict";var r=t("./draw");e.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":214,"./attributes":118,"./calc_autorange":119,"./defaults":121,"./draw":122}],125:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../../plots/pad_attributes"),a=t("../../lib/extend").extendDeepAll,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/animation_attributes"),u=t("../../plot_api/plot_template").templatedArray,l=t("./constants"),c=u("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});e.exports=o(u("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:l.gripBgActiveColor},bgcolor:{valType:"color",dflt:l.railBgColor},bordercolor:{valType:"color",dflt:l.railBorderColor},borderwidth:{valType:"number",min:0,dflt:l.railBorderWidth},ticklen:{valType:"number",min:0,dflt:l.tickLength},tickcolor:{valType:"color",dflt:l.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:l.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":155,"../../plot_api/edit_types":187,"../../plot_api/plot_template":194,"../../plots/animation_attributes":199,"../../plots/font_attributes":230,"../../plots/pad_attributes":235,"./constants":126}],126:[function(t,e,n){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],127:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/array_container_defaults"),a=t("./attributes"),o=t("./constants"),s=o.name,u=a.steps;function l(t,e,n){function o(n,i){return r.coerce(t,e,a,n,i)}for(var s=i(t,e,{name:"steps",handleItemDefaults:c}),u=0,l=0;l<s.length;l++)s[l].visible&&u++;if(u<2?e.visible=!1:o("visible")){e._stepCount=u;var f=e._visibleSteps=r.filterVisible(s),d=o("active");(s[d]||{}).visible||(e.active=f[0]._index),o("x"),o("y"),r.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font);var h=o("currentvalue.visible");h&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),r.coerceFont(o,"currentvalue.font",e.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function c(t,e){function n(n,i){return r.coerce(t,e,u,n,i)}if("skip"===t.method||Array.isArray(t.args)?n("visible"):e.visible=!1){n("method"),n("args");var i=n("label","step-"+e._index);n("value",i),n("execute")}}e.exports=function(t,e){i(t,e,{name:s,handleItemDefaults:l})}},{"../../lib":160,"../../plots/array_container_defaults":200,"./attributes":125,"./constants":126}],128:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plots/plots"),a=t("../color"),o=t("../drawing"),s=t("../../lib"),u=t("../../lib/svg_text_utils"),l=t("../../plot_api/plot_template").arrayEditor,c=t("./constants"),f=t("../../constants/alignment"),d=f.LINE_SPACING,h=f.FROM_TL,p=f.FROM_BR;function v(t){return c.autoMarginIdRoot+t._index}function g(t){return t._index}function m(t,e){var n=o.tester.selectAll("g."+c.labelGroupClass).data(e._visibleSteps);n.enter().append("g").classed(c.labelGroupClass,!0);var a=0,l=0;n.each(function(t){var n=r.select(this),i=_(n,{step:t},e),s=i.node();if(s){var u=o.bBox(s);l=Math.max(l,u.height),a=Math.max(a,u.width)}}),n.remove();var f=e._dims={};f.inputAreaWidth=Math.max(c.railWidth,c.gripHeight);var d=t._fullLayout._size;f.lx=d.l+d.w*e.x,f.ly=d.t+d.h*(1-e.y),"fraction"===e.lenmode?f.outerLength=Math.round(d.w*e.len):f.outerLength=e.len,f.inputAreaStart=0,f.inputAreaLength=Math.round(f.outerLength-e.pad.l-e.pad.r);var g=f.inputAreaLength-2*c.stepInset,m=g/(e._stepCount-1),b=a+c.labelPadding;if(f.labelStride=Math.max(1,Math.ceil(b/m)),f.labelHeight=l,f.currentValueMaxWidth=0,f.currentValueHeight=0,f.currentValueTotalHeight=0,f.currentValueMaxLines=1,e.currentvalue.visible){var x=o.tester.append("g");n.each(function(t){var n=y(x,e,t.label),r=n.node()&&o.bBox(n.node())||{width:0,height:0},i=u.lineCount(n);f.currentValueMaxWidth=Math.max(f.currentValueMaxWidth,Math.ceil(r.width)),f.currentValueHeight=Math.max(f.currentValueHeight,Math.ceil(r.height)),f.currentValueMaxLines=Math.max(f.currentValueMaxLines,i)}),f.currentValueTotalHeight=f.currentValueHeight+e.currentvalue.offset,x.remove()}f.height=f.currentValueTotalHeight+c.tickOffset+e.ticklen+c.labelOffset+f.labelHeight+e.pad.t+e.pad.b;var w="left";s.isRightAnchor(e)&&(f.lx-=f.outerLength,w="right"),s.isCenterAnchor(e)&&(f.lx-=f.outerLength/2,w="center");var A="top";s.isBottomAnchor(e)&&(f.ly-=f.height,A="bottom"),s.isMiddleAnchor(e)&&(f.ly-=f.height/2,A="middle"),f.outerLength=Math.ceil(f.outerLength),f.height=Math.ceil(f.height),f.lx=Math.round(f.lx),f.ly=Math.round(f.ly);var k={y:e.y,b:f.height*p[A],t:f.height*h[A]};"fraction"===e.lenmode?(k.l=0,k.xl=e.x-e.len*h[w],k.r=0,k.xr=e.x+e.len*p[w]):(k.x=e.x,k.l=f.outerLength*h[w],k.r=f.outerLength*p[w]),i.autoMargin(t,v(e),k)}function y(t,e,n){if(e.currentvalue.visible){var r,i,a=e._dims;switch(e.currentvalue.xanchor){case"right":r=a.inputAreaLength-c.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":r=.5*a.inputAreaLength,i="middle";break;default:r=c.currentValueInset,i="left"}var l=s.ensureSingle(t,"text",c.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":i,"data-notex":1})}),f=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"===typeof n)f+=n;else{var h=e.steps[e.active].label,p=e._gd._fullLayout._meta;p&&(h=s.templateString(h,p)),f+=h}e.currentvalue.suffix&&(f+=e.currentvalue.suffix),l.call(o.font,e.currentvalue.font).text(f).call(u.convertToTspans,e._gd);var v=u.lineCount(l),g=(a.currentValueMaxLines+1-v)*e.currentvalue.font.size*d;return u.positionText(l,r,g),l}}function b(t,e,n){var r=s.ensureSingle(t,"rect",c.gripRectClass,function(r){r.call(k,e,t,n).style("pointer-events","all")});r.attr({width:c.gripWidth,height:c.gripHeight,rx:c.gripRadius,ry:c.gripRadius}).call(a.stroke,n.bordercolor).call(a.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function _(t,e,n){var r=s.ensureSingle(t,"text",c.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})}),i=e.step.label,a=n._gd._fullLayout._meta;return a&&(i=s.templateString(i,a)),r.call(o.font,n.font).text(i).call(u.convertToTspans,n._gd),r}function x(t,e){var n=s.ensureSingle(t,"g",c.labelsClass),i=e._dims,a=n.selectAll("g."+c.labelGroupClass).data(i.labelSteps);a.enter().append("g").classed(c.labelGroupClass,!0),a.exit().remove(),a.each(function(t){var n=r.select(this);n.call(_,t,e),o.setTranslate(n,S(e,t.fraction),c.tickOffset+e.ticklen+e.font.size*d+c.labelOffset+i.currentValueTotalHeight)})}function w(t,e,n,r,i){var a=Math.round(r*(n._stepCount-1)),o=n._visibleSteps[a]._index;o!==n.active&&A(t,e,n,o,!0,i)}function A(t,e,n,r,a,o){var s=n.active;n.active=r,l(t.layout,c.name,n).applyUpdate("active",r);var u=n.steps[n.active];e.call(T,n,o),e.call(y,n),t.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:a,previousActive:s}),u&&u.method&&a&&(e._nextMethod?(e._nextMethod.step=u,e._nextMethod.doCallback=a,e._nextMethod.doTransition=o):(e._nextMethod={step:u,doCallback:a,doTransition:o},e._nextMethodRaf=window.requestAnimationFrame(function(){var n=e._nextMethod.step;n.method&&(n.execute&&i.executeAPICommand(t,n.method,n.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function k(t,e,n){var i=n.node(),o=r.select(e);function s(){return n.data()[0]}t.on("mousedown",function(){var t=s();e.emit("plotly_sliderstart",{slider:t});var u=n.select("."+c.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),u.call(a.fill,t.activebgcolor);var l=C(t,r.mouse(i)[0]);w(e,n,t,l,!0),t._dragging=!0,o.on("mousemove",function(){var t=s(),a=C(t,r.mouse(i)[0]);w(e,n,t,a,!1)}),o.on("mouseup",function(){var t=s();t._dragging=!1,u.call(a.fill,t.bgcolor),o.on("mouseup",null),o.on("mousemove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function M(t,e){var n=t.selectAll("rect."+c.tickRectClass).data(e._visibleSteps),i=e._dims;n.enter().append("rect").classed(c.tickRectClass,!0),n.exit().remove(),n.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(t,n){var s=n%i.labelStride===0,u=r.select(this);u.attr({height:s?e.ticklen:e.minorticklen}).call(a.fill,e.tickcolor),o.setTranslate(u,S(e,n/(e._stepCount-1))-.5*e.tickwidth,(s?c.tickOffset:c.minorTickOffset)+i.currentValueTotalHeight)})}function T(t,e,n){for(var r=t.select("rect."+c.gripRectClass),i=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){i=a;break}var o=S(e,i/(e._stepCount-1));if(!e._invokingCommand){var s=r;n&&e.transition.duration>0&&(s=s.transition().duration(e.transition.duration).ease(e.transition.easing)),s.attr("transform","translate("+(o-.5*c.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function S(t,e){var n=t._dims;return n.inputAreaStart+c.stepInset+(n.inputAreaLength-2*c.stepInset)*Math.min(1,Math.max(0,e))}function C(t,e){var n=t._dims;return Math.min(1,Math.max(0,(e-c.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*c.stepInset-2*n.inputAreaStart)))}function E(t,e,n){var r=n._dims,i=s.ensureSingle(t,"rect",c.railTouchRectClass,function(r){r.call(k,e,t,n).style("pointer-events","all")});i.attr({width:r.inputAreaLength,height:Math.max(r.inputAreaWidth,c.tickOffset+n.ticklen+r.labelHeight)}).call(a.fill,n.bgcolor).attr("opacity",0),o.setTranslate(i,0,r.currentValueTotalHeight)}function O(t,e){var n=e._dims,r=n.inputAreaLength-2*c.railInset,i=s.ensureSingle(t,"rect",c.railRectClass);i.attr({width:r,height:c.railWidth,rx:c.railRadius,ry:c.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),o.setTranslate(i,c.railInset,.5*(n.inputAreaWidth-c.railWidth)+n.currentValueTotalHeight)}e.exports=function(t){var e=t._fullLayout,n=function(t,e){for(var n=t[c.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&(a._gd=e,r.push(a))}return r}(e,t),a=e._infolayer.selectAll("g."+c.containerClassName).data(n.length>0?[0]:[]);function s(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),i.autoMargin(t,v(e))}if(a.enter().append("g").classed(c.containerClassName,!0).style("cursor","ew-resize"),a.exit().each(function(){r.select(this).selectAll("g."+c.groupClassName).each(s)}).remove(),0!==n.length){var u=a.selectAll("g."+c.groupClassName).data(n,g);u.enter().append("g").classed(c.groupClassName,!0),u.exit().each(s).remove();for(var l=0;l<n.length;l++){var f=n[l];m(t,f)}u.each(function(e){var n=r.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var n=t._stepCount,r=0;r<n;r+=e.labelStride)e.labelSteps.push({fraction:r/(n-1),step:t._visibleSteps[r]})}(e),i.manageCommandObserver(t,e,e._visibleSteps,function(e){var r=n.data()[0];r.active!==e.index&&(r._dragging||A(t,n,r,e.index,!1,!0))}),function(t,e,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),e.call(y,n).call(O,n).call(x,n).call(M,n).call(E,t,n).call(b,t,n);var r=n._dims;o.setTranslate(e,r.lx+n.pad.l,r.ly+n.pad.t),e.call(T,n,!1),e.call(y,n)}(t,r.select(this),e)})}}},{"../../constants/alignment":137,"../../lib":160,"../../lib/svg_text_utils":181,"../../plot_api/plot_template":194,"../../plots/plots":236,"../color":42,"../drawing":63,"./constants":126,d3:7}],129:[function(t,e,n){"use strict";var r=t("./constants");e.exports={moduleType:"component",name:r.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":125,"./constants":126,"./defaults":127,"./draw":128}],130:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib"),u=t("../drawing"),l=t("../color"),c=t("../../lib/svg_text_utils"),f=t("../../constants/interactions");e.exports={draw:function(t,e,n){var h,p=n.propContainer,v=n.propName,g=n.placeholder,m=n.traceIndex,y=n.avoid||{},b=n.attributes,_=n.transform,x=n.containerGroup,w=t._fullLayout,A=1,k=!1,M=p.title,T=(M&&M.text?M.text:"").trim(),S=M&&M.font?M.font:{},C=S.family,E=S.size,O=S.color;"title.text"===v?h="titleText":-1!==v.indexOf("axis")?h="axisTitleText":v.indexOf(!0)&&(h="colorbarTitleText");var P=t._context.edits[h];""===T?A=0:T.replace(d," % ")===g.replace(d," % ")&&(A=.2,k=!0,P||(T="")),n._meta?T=s.templateString(T,n._meta):w._meta&&(T=s.templateString(T,w._meta));var L=T||P;x||(x=s.ensureSingle(w._infolayer,"g","g-"+e));var R=x.selectAll("text").data(L?[0]:[]);if(R.enter().append("text"),R.text(T).attr("class",e),R.exit().remove(),!L)return x;function D(t){s.syncOrAsync([F,j],t)}function F(e){var n;return _?(n="",_.rotate&&(n+="rotate("+[_.rotate,b.x,b.y]+")"),_.offset&&(n+="translate(0, "+_.offset+")")):n=null,e.attr("transform",n),e.style({"font-family":C,"font-size":r.round(E,2)+"px",fill:l.rgb(O),opacity:A*l.opacity(O),"font-weight":a.fontWeight}).attr(b).call(c.convertToTspans,t),a.previousPromises(t)}function j(t){var e=r.select(t.node().parentNode);if(y&&y.selection&&y.side&&T){e.attr("transform",null);var n=0,a={left:"right",right:"left",top:"bottom",bottom:"top"}[y.side],o=-1!==["left","top"].indexOf(y.side)?-1:1,l=i(y.pad)?y.pad:2,c=u.bBox(e.node()),f={left:0,top:0,right:w.width,bottom:w.height},d=y.maxShift||(f[y.side]-c[y.side])*("left"===y.side||"top"===y.side?-1:1);if(d<0)n=d;else{var h=y.offsetLeft||0,p=y.offsetTop||0;c.left-=h,c.right-=h,c.top-=p,c.bottom-=p,y.selection.each(function(){var t=u.bBox(this);s.bBoxIntersect(c,t,l)&&(n=Math.max(n,o*(t[y.side]-c[a])+l))}),n=Math.min(d,n)}if(n>0||d<0){var v={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[y.side];e.attr("transform","translate("+v+")")}}}return R.call(D),P&&(T?R.on(".opacity",null):(A=0,k=!0,R.text(g).on("mouseover.opacity",function(){r.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})),R.call(c.makeEditable,{gd:t}).on("edit",function(e){void 0!==m?o.call("_guiRestyle",t,v,e,m):o.call("_guiRelayout",t,v,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(D)}).on("input",function(t){this.text(t||" ").call(c.positionText,b.x,b.y)})),R.classed("js-placeholder",k),x}};var d=/ [XY][0-9]* /},{"../../constants/interactions":139,"../../lib":160,"../../lib/svg_text_utils":181,"../../plots/plots":236,"../../registry":243,"../color":42,"../drawing":63,d3:7,"fast-isnumeric":9}],131:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),a=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/pad_attributes"),u=t("../../plot_api/plot_template").templatedArray,l=u("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});e.exports=o(u("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:l,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":155,"../../plot_api/edit_types":187,"../../plot_api/plot_template":194,"../../plots/font_attributes":230,"../../plots/pad_attributes":235,"../color/attributes":41}],132:[function(t,e,n){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],133:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/array_container_defaults"),a=t("./attributes"),o=t("./constants"),s=o.name,u=a.buttons;function l(t,e,n){function o(n,i){return r.coerce(t,e,a,n,i)}var s=i(t,e,{name:"buttons",handleItemDefaults:c}),u=o("visible",s.length>0);u&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),r.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font),o("bgcolor",n.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function c(t,e){function n(n,i){return r.coerce(t,e,u,n,i)}var i=n("visible","skip"===t.method||Array.isArray(t.args));i&&(n("method"),n("args"),n("label"),n("execute"))}e.exports=function(t,e){var n={name:s,handleItemDefaults:l};i(t,e,n)}},{"../../lib":160,"../../plots/array_container_defaults":200,"./attributes":131,"./constants":132}],134:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plots/plots"),a=t("../color"),o=t("../drawing"),s=t("../../lib"),u=t("../../lib/svg_text_utils"),l=t("../../plot_api/plot_template").arrayEditor,c=t("../../constants/alignment").LINE_SPACING,f=t("./constants"),d=t("./scrollbox");function h(t){return t._index}function p(t,e){return+t.attr(f.menuIndexAttrName)===e._index}function v(t,e,n,r,i,a,o,s){e.active=o,l(t.layout,f.name,e).applyUpdate("active",o),"buttons"===e.type?m(t,r,null,null,e):"dropdown"===e.type&&(i.attr(f.menuIndexAttrName,"-1"),g(t,r,i,a,e),s||m(t,r,i,a,e))}function g(t,e,n,r,i){var a=s.ensureSingle(e,"g",f.headerClassName,function(t){t.style("pointer-events","all")}),u=i._dims,l=i.active,c=i.buttons[l]||f.blankHeaderOpts,d={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},h={width:u.headerWidth,height:u.headerHeight};a.call(y,i,c,t).call(T,i,d,h);var v=s.ensureSingle(e,"text",f.headerArrowClassName,function(t){t.classed("user-select-none",!0).attr("text-anchor","end").call(o.font,i.font).text(f.arrowSymbol[i.direction])});v.attr({x:u.headerWidth-f.arrowOffsetX+i.pad.l,y:u.headerHeight/2+f.textOffsetY+i.pad.t}),a.on("click",function(){n.call(S,String(p(n,i)?-1:i._index)),m(t,e,n,r,i)}),a.on("mouseover",function(){a.call(w)}),a.on("mouseout",function(){a.call(A,i)}),o.setTranslate(e,u.lx,u.ly)}function m(t,e,n,a,o){n||(n=e).attr("pointer-events","all");var u=function(t){return-1===+t.attr(f.menuIndexAttrName)}(n)&&"buttons"!==o.type?[]:o.buttons,l="dropdown"===o.type?f.dropdownButtonClassName:f.buttonClassName,c=n.selectAll("g."+l).data(s.filterVisible(u)),d=c.enter().append("g").classed(l,!0),h=c.exit();"dropdown"===o.type?(d.attr("opacity","0").transition().attr("opacity","1"),h.transition().attr("opacity","0").remove()):h.remove();var p=0,g=0,m=o._dims,b=-1!==["up","down"].indexOf(o.direction);"dropdown"===o.type&&(b?g=m.headerHeight+f.gapButtonHeader:p=m.headerWidth+f.gapButtonHeader),"dropdown"===o.type&&"up"===o.direction&&(g=-f.gapButtonHeader+f.gapButton-m.openHeight),"dropdown"===o.type&&"left"===o.direction&&(p=-f.gapButtonHeader+f.gapButton-m.openWidth);var _={x:m.lx+p+o.pad.l,y:m.ly+g+o.pad.t,yPad:f.gapButton,xPad:f.gapButton,index:0},k={l:_.x+o.borderwidth,t:_.y+o.borderwidth};c.each(function(s,u){var l=r.select(this);l.call(y,o,s,t).call(T,o,_),l.on("click",function(){r.event.defaultPrevented||(v(t,o,0,e,n,a,u),s.execute&&i.executeAPICommand(t,s.method,s.args),t.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active}))}),l.on("mouseover",function(){l.call(w)}),l.on("mouseout",function(){l.call(A,o),c.call(x,o)})}),c.call(x,o),b?(k.w=Math.max(m.openWidth,m.headerWidth),k.h=_.y-k.t):(k.w=_.x-k.l,k.h=Math.max(m.openHeight,m.headerHeight)),k.direction=o.direction,a&&(c.size()?function(t,e,n,r,i,a){var o,s,u,l=i.direction,c="up"===l||"down"===l,d=i._dims,h=i.active;if(c)for(s=0,u=0;u<h;u++)s+=d.heights[u]+f.gapButton;else for(o=0,u=0;u<h;u++)o+=d.widths[u]+f.gapButton;r.enable(a,o,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1"),r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,o,k):function(t){var e=!!t.hbar,n=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,n||t.disable()}),n&&t.vbar.transition().attr("opacity","0").each("end",function(){n=!1,e||t.disable()})}(a))}function y(t,e,n,r){t.call(b,e).call(_,e,n,r)}function b(t,e){var n=s.ensureSingle(t,"rect",f.itemRectClassName,function(t){t.attr({rx:f.rx,ry:f.ry,"shape-rendering":"crispEdges"})});n.call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function _(t,e,n,r){var i=s.ensureSingle(t,"text",f.itemTextClassName,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})}),a=n.label,l=r._fullLayout._meta;l&&(a=s.templateString(a,l)),i.call(o.font,e.font).text(a).call(u.convertToTspans,r)}function x(t,e){var n=e.active;t.each(function(t,i){var o=r.select(this);i===n&&e.showactive&&o.select("rect."+f.itemRectClassName).call(a.fill,f.activeColor)})}function w(t){t.select("rect."+f.itemRectClassName).call(a.fill,f.hoverColor)}function A(t,e){t.select("rect."+f.itemRectClassName).call(a.fill,e.bgcolor)}function k(t,e){var n=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=o.tester.selectAll("g."+f.dropdownButtonClassName).data(s.filterVisible(e.buttons));a.enter().append("g").classed(f.dropdownButtonClassName,!0);var l=-1!==["up","down"].indexOf(e.direction);a.each(function(i,a){var s=r.select(this);s.call(y,e,i,t);var d=s.select("."+f.itemTextClassName),h=d.node()&&o.bBox(d.node()).width,p=Math.max(h+f.textPadX,f.minWidth),v=e.font.size*c,g=u.lineCount(d),m=Math.max(v*g,f.minHeight)+f.textOffsetY;m=Math.ceil(m),p=Math.ceil(p),n.widths[a]=p,n.heights[a]=m,n.height1=Math.max(n.height1,m),n.width1=Math.max(n.width1,p),l?(n.totalWidth=Math.max(n.totalWidth,p),n.openWidth=n.totalWidth,n.totalHeight+=m+f.gapButton,n.openHeight+=m+f.gapButton):(n.totalWidth+=p+f.gapButton,n.openWidth+=p+f.gapButton,n.totalHeight=Math.max(n.totalHeight,m),n.openHeight=n.totalHeight)}),l?n.totalHeight-=f.gapButton:n.totalWidth-=f.gapButton,n.headerWidth=n.width1+f.arrowPadX,n.headerHeight=n.height1,"dropdown"===e.type&&(l?(n.width1+=f.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=f.arrowPadX),a.remove();var d=n.totalWidth+e.pad.l+e.pad.r,h=n.totalHeight+e.pad.t+e.pad.b,p=t._fullLayout._size;n.lx=p.l+p.w*e.x,n.ly=p.t+p.h*(1-e.y);var v="left";s.isRightAnchor(e)&&(n.lx-=d,v="right"),s.isCenterAnchor(e)&&(n.lx-=d/2,v="center");var g="top";s.isBottomAnchor(e)&&(n.ly-=h,g="bottom"),s.isMiddleAnchor(e)&&(n.ly-=h/2,g="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),i.autoMargin(t,M(e),{x:e.x,y:e.y,l:d*({right:1,center:.5}[v]||0),r:d*({left:1,center:.5}[v]||0),b:h*({top:1,middle:.5}[g]||0),t:h*({bottom:1,middle:.5}[g]||0)})}function M(t){return f.autoMarginIdRoot+t._index}function T(t,e,n,r){r=r||{};var i=t.select("."+f.itemRectClassName),a=t.select("."+f.itemTextClassName),s=e.borderwidth,l=n.index,d=e._dims;o.setTranslate(t,s+n.x,s+n.y);var h=-1!==["up","down"].indexOf(e.direction),p=r.height||(h?d.heights[l]:d.height1);i.attr({x:0,y:0,width:r.width||(h?d.width1:d.widths[l]),height:p});var v=e.font.size*c,g=u.lineCount(a),m=(g-1)*v/2;u.positionText(a,f.textOffsetX,p/2-m+f.textOffsetY),h?n.y+=d.heights[l]+n.yPad:n.x+=d.widths[l]+n.xPad,n.index++}function S(t,e){t.attr(f.menuIndexAttrName,e||"-1").selectAll("g."+f.dropdownButtonClassName).remove()}e.exports=function(t){var e=t._fullLayout,n=s.filterVisible(e[f.name]);function a(e){i.autoMargin(t,M(e))}var o=e._menulayer.selectAll("g."+f.containerClassName).data(n.length>0?[0]:[]);if(o.enter().append("g").classed(f.containerClassName,!0).style("cursor","pointer"),o.exit().each(function(){r.select(this).selectAll("g."+f.headerGroupClassName).each(a)}).remove(),0!==n.length){var u=o.selectAll("g."+f.headerGroupClassName).data(n,h);u.enter().append("g").classed(f.headerGroupClassName,!0);for(var l=s.ensureSingle(o,"g",f.dropdownButtonGroupClassName,function(t){t.style("pointer-events","all")}),c=0;c<n.length;c++){var y=n[c];k(t,y)}var b="updatemenus"+e._uid,_=new d(t,l,b);u.enter().size()&&(l.node().parentNode.appendChild(l.node()),l.call(S)),u.exit().each(function(t){l.call(S),a(t)}).remove(),u.each(function(e){var n=r.select(this),a="dropdown"===e.type?l:null;i.manageCommandObserver(t,e,e.buttons,function(r){v(t,e,e.buttons[r.index],n,a,_,r.index,!0)}),"dropdown"===e.type?(g(t,n,l,_,e),p(l,e)&&m(t,n,l,_,e)):m(t,n,null,null,e)})}}},{"../../constants/alignment":137,"../../lib":160,"../../lib/svg_text_utils":181,"../../plot_api/plot_template":194,"../../plots/plots":236,"../color":42,"../drawing":63,"./constants":132,"./scrollbox":136,d3:7}],135:[function(t,e,n){arguments[4][129][0].apply(n,arguments)},{"./attributes":131,"./constants":132,"./defaults":133,"./draw":134,dup:129}],136:[function(t,e,n){"use strict";e.exports=s;var r=t("d3"),i=t("../color"),a=t("../drawing"),o=t("../../lib");function s(t,e,n){this.gd=t,this.container=e,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(t,e,n){var o=this.gd._fullLayout,u=o.width,l=o.height;this.position=t;var c,f,d,h,p=this.position.l,v=this.position.w,g=this.position.t,m=this.position.h,y=this.position.direction,b="down"===y,_="left"===y,x="right"===y,w="up"===y,A=v,k=m;b||_||x||w||(this.position.direction="down",b=!0);var M=b||w;M?(f=(c=p)+A,b?(d=g,h=Math.min(d+k,l),k=h-d):(h=g+k,d=Math.max(h-k,0),k=h-d)):(h=(d=g)+k,_?(f=p+A,c=Math.max(f-A,0),A=f-c):(c=p,f=Math.min(c+A,u),A=f-c)),this._box={l:c,t:d,w:A,h:k};var T=v>A,S=s.barLength+2*s.barPad,C=s.barWidth+2*s.barPad,E=p,O=g+m;O+C>l&&(O=l-C);var P=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(i.fill,s.barColor),T?(this.hbar=P.attr({rx:s.barRadius,ry:s.barRadius,x:E,y:O,width:S,height:C}),this._hbarXMin=E+S/2,this._hbarTranslateMax=A-S):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var L=m>k,R=s.barWidth+2*s.barPad,D=s.barLength+2*s.barPad,F=p+v,j=g;F+R>u&&(F=u-R);var N=this.container.selectAll("rect.scrollbar-vertical").data(L?[0]:[]);N.exit().on(".drag",null).remove(),N.enter().append("rect").classed("scrollbar-vertical",!0).call(i.fill,s.barColor),L?(this.vbar=N.attr({rx:s.barRadius,ry:s.barRadius,x:F,y:j,width:R,height:D}),this._vbarYMin=j+D/2,this._vbarTranslateMax=k-D):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var z=this.id,I=c-.5,B=L?f+R+.5:f+.5,q=d-.5,U=T?h+C+.5:h+.5,H=o._topdefs.selectAll("#"+z).data(T||L?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",z).append("rect"),T||L?(this._clipRect=H.select("rect").attr({x:Math.floor(I),y:Math.floor(q),width:Math.ceil(B)-Math.floor(I),height:Math.ceil(U)-Math.floor(q)}),this.container.call(a.setClipUrl,z,this.gd),this.bg.attr({x:p,y:g,width:v,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),T||L){var W=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(W);var G=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));T&&this.hbar.on(".drag",null).call(G),L&&this.vbar.on(".drag",null).call(G)}this.setTranslate(e,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=r.event.dx),this.vbar&&(e-=r.event.dy),this.setTranslate(t,e)},s.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=r.event.deltaY),this.vbar&&(e+=r.event.deltaY),this.setTranslate(t,e)},s.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var n=t+this._hbarXMin,i=n+this._hbarTranslateMax,a=o.constrain(r.event.x,n,i),s=(a-n)/(i-n),u=this.position.w-this._box.w;t=s*u}if(this.vbar){var l=e+this._vbarYMin,c=l+this._vbarTranslateMax,f=o.constrain(r.event.y,l,c),d=(f-l)/(c-l),h=this.position.h-this._box.h;e=d*h}this.setTranslate(t,e)},s.prototype.setTranslate=function(t,e){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(t=o.constrain(t||0,0,n),e=o.constrain(e||0,0,r),this.translateX=t,this.translateY=e,this.container.call(a.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var i=t/n;this.hbar.call(a.setTranslate,t+i*this._hbarTranslateMax,e)}if(this.vbar){var s=e/r;this.vbar.call(a.setTranslate,t,e+s*this._vbarTranslateMax)}}},{"../../lib":160,"../color":42,"../drawing":63,d3:7}],137:[function(t,e,n){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],138:[function(t,e,n){"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Formatting.md#format"}},{}],139:[function(t,e,n){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],140:[function(t,e,n){"use strict";e.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],141:[function(t,e,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],142:[function(t,e,n){"use strict";n.version="1.49.2",t("es6-promise").polyfill(),t("../build/plotcss"),t("./fonts/mathjax_config")();for(var r=t("./registry"),i=n.register=r.register,a=t("./plot_api"),o=Object.keys(a),s=0;s<o.length;s++){var u=o[s];"_"!==u.charAt(0)&&(n[u]=a[u]),i({moduleType:"apiMethod",name:u,fn:a[u]})}i(t("./traces/scatter")),i([t("./components/fx"),t("./components/legend"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar")]),i([t("./locale-en"),t("./locale-en-us")]),n.Icons=t("./fonts/ploticon"),n.Plots=t("./plots/plots"),n.Fx=t("./components/fx"),n.Snapshot=t("./snapshot"),n.PlotSchema=t("./plot_api/plot_schema"),n.Queue=t("./lib/queue"),n.d3=t("d3")},{"../build/plotcss":1,"./components/annotations":35,"./components/annotations3d":40,"./components/colorbar":48,"./components/colorscale":54,"./components/errorbars":69,"./components/fx":81,"./components/grid":85,"./components/images":90,"./components/legend":98,"./components/rangeselector":109,"./components/rangeslider":116,"./components/shapes":124,"./components/sliders":129,"./components/updatemenus":135,"./fonts/mathjax_config":143,"./fonts/ploticon":144,"./lib/queue":174,"./locale-en":185,"./locale-en-us":184,"./plot_api":189,"./plot_api/plot_schema":193,"./plots/plots":236,"./registry":243,"./snapshot":248,"./traces/scatter":292,d3:7,"es6-promise":8}],143:[function(t,e,n){"use strict";e.exports=function(){if("undefined"!==typeof MathJax){var t="local"!==(window.PlotlyConfig||{}).MathJaxConfig;t&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}}},{}],144:[function(t,e,n){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],145:[function(t,e,n){"use strict";n.isLeftAnchor=function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},n.isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},n.isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},n.isTopAnchor=function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},n.isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},n.isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3}},{}],146:[function(t,e,n){"use strict";var r=t("./mod"),i=r.mod,a=r.modHalf,o=Math.PI,s=2*o;function u(t){return Math.abs(t[1]-t[0])>s-1e-14}function l(t,e){return a(e-t,s)}function c(t,e){if(u(e))return!0;var n,r;e[0]<e[1]?(n=e[0],r=e[1]):(n=e[1],r=e[0]),n=i(n,s),r=i(r,s),n>r&&(r+=s);var a=i(t,s),o=a+s;return a>=n&&a<=r||o>=n&&o<=r}function f(t,e,n,r,i,a,l){i=i||0,a=a||0;var c,f,d,h,p,v=u([n,r]);function g(t,e){return[t*Math.cos(e)+i,a-t*Math.sin(e)]}v?(c=0,f=o,d=s):n<r?(c=n,d=r):(c=r,d=n),t<e?(h=t,p=e):(h=e,p=t);var m,y=Math.abs(d-c)<=o?0:1;function b(t,e,n){return"A"+[t,t]+" "+[0,y,n]+" "+g(t,e)}return v?m=null===h?"M"+g(p,c)+b(p,f,0)+b(p,d,0)+"Z":"M"+g(h,c)+b(h,f,0)+b(h,d,0)+"ZM"+g(p,c)+b(p,f,1)+b(p,d,1)+"Z":null===h?(m="M"+g(p,c)+b(p,d,0),l&&(m+="L0,0Z")):m="M"+g(h,c)+"L"+g(p,c)+b(p,d,0)+"L"+g(h,d)+b(h,c,1)+"Z",m}e.exports={deg2rad:function(t){return t/180*o},rad2deg:function(t){return t/o*180},angleDelta:l,angleDist:function(t,e){return Math.abs(l(t,e))},isFullCircle:u,isAngleInsideSector:c,isPtInsideSector:function(t,e,n,r){return!!c(e,r)&&(n[0]<n[1]?(i=n[0],a=n[1]):(i=n[1],a=n[0]),t>=i&&t<=a);var i,a},pathArc:function(t,e,n,r,i){return f(null,t,e,n,r,i,0)},pathSector:function(t,e,n,r,i){return f(null,t,e,n,r,i,1)},pathAnnulus:function(t,e,n,r,i,a){return f(t,e,n,r,i,a,1)}}},{"./mod":167}],147:[function(t,e,n){"use strict";var r=Array.isArray,i="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},a="undefined"===typeof DataView?function(){}:DataView;function o(t){return i.isView(t)&&!(t instanceof a)}function s(t){return r(t)||o(t)}function u(t,e,n){if(s(t)){if(s(t[0])){for(var r=n,i=0;i<t.length;i++)r=e(r,t[i].length);return r}return t.length}return 0}n.isTypedArray=o,n.isArrayOrTypedArray=s,n.isArray1D=function(t){return!s(t[0])},n.ensureArray=function(t,e){return r(t)||(t=[]),t.length=e,t},n.concat=function(){var t,e,n,i,a,o,s,u,l=[],c=!0,f=0;for(n=0;n<arguments.length;n++)i=arguments[n],(o=i.length)&&(e?l.push(i):(e=i,a=o),r(i)?t=!1:(c=!1,f?t!==i.constructor&&(t=!1):t=i.constructor),f+=o);if(!f)return[];if(!l.length)return e;if(c)return e.concat.apply(e,l);if(t){for((s=new t(f)).set(e),n=0;n<l.length;n++)i=l[n],s.set(i,a),a+=i.length;return s}for(s=new Array(f),u=0;u<e.length;u++)s[u]=e[u];for(n=0;n<l.length;n++){for(i=l[n],u=0;u<i.length;u++)s[a+u]=i[u];a+=u}return s},n.maxRowLength=function(t){return u(t,Math.max,0)},n.minRowLength=function(t){return u(t,Math.min,1/0)}},{}],148:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../constants/numerical").BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(t){return"string"===typeof t&&(t=t.replace(a,"")),r(t)?Number(t):i}},{"../constants/numerical":140,"fast-isnumeric":9}],149:[function(t,e,n){"use strict";e.exports=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0,depth:!0})})}},{}],150:[function(t,e,n){"use strict";e.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}},{}],151:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("tinycolor2"),a=t("../plots/attributes"),o=t("../components/colorscale/scales"),s=t("../constants/interactions").DESELECTDIM,u=t("./nested_property"),l=t("./regex").counter,c=t("./mod").modHalf,f=t("./array").isArrayOrTypedArray;function d(t,e){var r=n.valObjectMeta[e.valType];if(e.arrayOk&&f(t))return!0;if(r.validateFunction)return r.validateFunction(t,e);var i={},a=i,o={set:function(t){a=t}};return r.coerceFunction(t,o,i,e),a!==i}n.valObjectMeta={data_array:{coerceFunction:function(t,e,n){f(t)?e.set(t):void 0!==n&&e.set(n)}},enumerated:{coerceFunction:function(t,e,n,r){r.coerceNumber&&(t=+t),-1===r.values.indexOf(t)?e.set(n):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var n=e.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){var a=new RegExp(i.substr(1,i.length-2));if(a.test(t))return!0}else if(t===n[r])return!0}return!1}},boolean:{coerceFunction:function(t,e,n){!0===t||!1===t?e.set(t):e.set(n)}},number:{coerceFunction:function(t,e,n,i){!r(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(n):e.set(+t)}},integer:{coerceFunction:function(t,e,n,i){t%1||!r(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(n):e.set(+t)}},string:{coerceFunction:function(t,e,n,r){if("string"!==typeof t){var i="number"===typeof t;!0!==r.strict&&i?e.set(String(t)):e.set(n)}else r.noBlank&&!t?e.set(n):e.set(t)}},color:{coerceFunction:function(t,e,n){i(t).isValid()?e.set(t):e.set(n)}},colorlist:{coerceFunction:function(t,e,n){Array.isArray(t)&&t.length&&t.every(function(t){return i(t).isValid()})?e.set(t):e.set(n)}},colorscale:{coerceFunction:function(t,e,n){e.set(o.get(t,n))}},angle:{coerceFunction:function(t,e,n){"auto"===t?e.set("auto"):r(t)?e.set(c(+t,360)):e.set(n)}},subplotid:{coerceFunction:function(t,e,n,r){var i=r.regex||l(n);"string"===typeof t&&i.test(t)?e.set(t):e.set(n)},validateFunction:function(t,e){var n=e.dflt;return t===n||"string"===typeof t&&!!l(n).test(t)}},flaglist:{coerceFunction:function(t,e,n,r){if("string"===typeof t)if(-1===(r.extras||[]).indexOf(t)){for(var i=t.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?e.set(i.join("+")):e.set(n)}else e.set(t);else e.set(n)}},any:{coerceFunction:function(t,e,n){void 0===t?e.set(n):e.set(t)}},info_array:{coerceFunction:function(t,e,r,i){function a(t,e,r){var i,a={set:function(t){i=t}};return void 0===r&&(r=e.dflt),n.valObjectMeta[e.valType].coerceFunction(t,a,r,e),i}var o=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var s,u,l,c,f,d,h=i.items,p=[],v=Array.isArray(h),g=v&&o&&Array.isArray(h[0]),m=o&&v&&!g,y=v&&!m?h.length:t.length;if(r=Array.isArray(r)?r:[],o)for(s=0;s<y;s++)for(p[s]=[],l=Array.isArray(t[s])?t[s]:[],f=m?h.length:v?h[s].length:l.length,u=0;u<f;u++)c=m?h[u]:v?h[s][u]:h,void 0!==(d=a(l[u],c,(r[s]||[])[u]))&&(p[s][u]=d);else for(s=0;s<y;s++)void 0!==(d=a(t[s],v?h[s]:h,r[s]))&&(p[s]=d);e.set(p)}else e.set(r)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var n=e.items,r=Array.isArray(n),i=2===e.dimensions;if(!e.freeLength&&t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(i){if(!Array.isArray(t[a])||!e.freeLength&&t[a].length!==n[a].length)return!1;for(var o=0;o<t[a].length;o++)if(!d(t[a][o],r?n[a][o]:n))return!1}else if(!d(t[a],r?n[a]:n))return!1;return!0}}},n.coerce=function(t,e,r,i,a){var o=u(r,i).get(),s=u(t,i),l=u(e,i),c=s.get(),h=e._template;if(void 0===c&&h&&(c=u(h,i).get(),h=0),void 0===a&&(a=o.dflt),o.arrayOk&&f(c))return l.set(c),c;var p=n.valObjectMeta[o.valType].coerceFunction;p(c,l,a,o);var v=l.get();return h&&v===a&&!d(c,o)&&(c=u(h,i).get(),p(c,l,a,o),v=l.get()),v},n.coerce2=function(t,e,r,i,a){var o=u(t,i),s=n.coerce(t,e,r,i,a),l=o.get();return void 0!==l&&null!==l&&s},n.coerceFont=function(t,e,n){var r={};return n=n||{},r.family=t(e+".family",n.family),r.size=t(e+".size",n.size),r.color=t(e+".color",n.color),r},n.coerceHoverinfo=function(t,e,r){var i,o=e._module.attributes,s=o.hoverinfo?o:a,u=s.hoverinfo;if(1===r._dataLength){var l="all"===u.dflt?u.flags.slice():u.dflt.split("+");l.splice(l.indexOf("name"),1),i=l.join("+")}return n.coerce(t,e,s,"hoverinfo",i)},n.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var n,r,i=t.marker.opacity;void 0!==i&&(f(i)||t.selected||t.unselected||(n=i,r=s*i),e("selected.marker.opacity",n),e("unselected.marker.opacity",r))}},n.validate=d},{"../components/colorscale/scales":57,"../constants/interactions":139,"../plots/attributes":201,"./array":147,"./mod":167,"./nested_property":168,"./regex":175,"fast-isnumeric":9,tinycolor2:25}],152:[function(t,e,n){"use strict";var r,i,a=t("d3"),o=t("fast-isnumeric"),s=t("./loggers"),u=t("./mod").mod,l=t("../constants/numerical"),c=l.BADNUM,f=l.ONEDAY,d=l.ONEHOUR,h=l.ONEMIN,p=l.ONESEC,v=l.EPOCHJD,g=t("../registry"),m=a.time.format.utc,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,_=(new Date).getFullYear()-70;function x(t){return t&&g.componentsRegistry.calendars&&"string"===typeof t&&"gregorian"!==t}function w(t,e){return String(t+Math.pow(10,e)).substr(1)}n.dateTick0=function(t,e){return x(t)?e?g.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:g.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"},n.dfltRange=function(t){return x(t)?g.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},n.isJSDate=function(t){return"object"===typeof t&&null!==t&&"function"===typeof t.getTime},n.dateTime2ms=function(t,e){if(n.isJSDate(t)){var a=t.getTimezoneOffset()*h,o=(t.getUTCMinutes()-t.getMinutes())*h+(t.getUTCSeconds()-t.getSeconds())*p+(t.getUTCMilliseconds()-t.getMilliseconds());if(o){var s=3*h;a=a-s/2+u(o-a+s/2,s)}return(t=Number(t)-a)>=r&&t<=i?t:c}if("string"!==typeof t&&"number"!==typeof t)return c;t=String(t);var l=x(e),m=t.charAt(0);!l||"G"!==m&&"g"!==m||(t=t.substr(1),e="");var w=l&&"chinese"===e.substr(0,7),A=t.match(w?b:y);if(!A)return c;var k=A[1],M=A[3]||"1",T=Number(A[5]||1),S=Number(A[7]||0),C=Number(A[9]||0),E=Number(A[11]||0);if(l){if(2===k.length)return c;var O;k=Number(k);try{var P=g.getComponentMethod("calendars","getCal")(e);if(w){var L="i"===M.charAt(M.length-1);M=parseInt(M,10),O=P.newDate(k,P.toMonthIndex(k,M,L),T)}else O=P.newDate(k,Number(M),T)}catch(D){return c}return O?(O.toJD()-v)*f+S*d+C*h+E*p:c}k=2===k.length?(Number(k)+2e3-_)%100+_:Number(k),M-=1;var R=new Date(Date.UTC(2e3,M,T,S,C));return R.setUTCFullYear(k),R.getUTCMonth()!==M?c:R.getUTCDate()!==T?c:R.getTime()+E*p},r=n.MIN_MS=n.dateTime2ms("-9999"),i=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(t,e){return n.dateTime2ms(t,e)!==c};var A=90*f,k=3*d,M=5*h;function T(t,e,n,r,i){if((e||n||r||i)&&(t+=" "+w(e,2)+":"+w(n,2),(r||i)&&(t+=":"+w(r,2),i))){for(var a=4;i%10===0;)a-=1,i/=10;t+="."+w(i,a)}return t}n.ms2DateTime=function(t,e,n){if("number"!==typeof t||!(t>=r&&t<=i))return c;e||(e=0);var a,o,s,l,y,b,_=Math.floor(10*u(t+.05,1)),w=Math.round(t-_/10);if(x(n)){var S=Math.floor(w/f)+v,C=Math.floor(u(t,f));try{a=g.getComponentMethod("calendars","getCal")(n).fromJD(S).formatDate("yyyy-mm-dd")}catch(E){a=m("G%Y-%m-%d")(new Date(w))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=e<A?Math.floor(C/d):0,s=e<A?Math.floor(C%d/h):0,l=e<k?Math.floor(C%h/p):0,y=e<M?C%p*10+_:0}else b=new Date(w),a=m("%Y-%m-%d")(b),o=e<A?b.getUTCHours():0,s=e<A?b.getUTCMinutes():0,l=e<k?b.getUTCSeconds():0,y=e<M?10*b.getUTCMilliseconds()+_:0;return T(a,o,s,l,y)},n.ms2DateTimeLocal=function(t){if(!(t>=r+f&&t<=i-f))return c;var e=Math.floor(10*u(t+.05,1)),n=new Date(Math.round(t-e/10)),o=a.time.format("%Y-%m-%d")(n),s=n.getHours(),l=n.getMinutes(),d=n.getSeconds(),h=10*n.getUTCMilliseconds()+e;return T(o,s,l,d,h)},n.cleanDate=function(t,e,r){if(t===c)return e;if(n.isJSDate(t)||"number"===typeof t&&isFinite(t)){if(x(r))return s.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=n.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!n.isDateTime(t,r))return s.error("unrecognized date",t),e;return t};var S=/%\d?f/g;function C(t,e,n,r){t=t.replace(S,function(t){var n=Math.min(+t.charAt(1)||6,6),r=(e/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0";return r});var i=new Date(Math.floor(e+.05));if(x(r))try{t=g.getComponentMethod("calendars","worldCalFmt")(t,e,r)}catch(a){return"Invalid"}return n(t)(i)}var E=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(t,e,n,r,i,a){if(i=x(i)&&i,!e)if("y"===n)e=a.year;else if("m"===n)e=a.month;else{if("d"!==n)return function(t,e){var n=u(t+.05,f),r=w(Math.floor(n/d),2)+":"+w(u(Math.floor(n/h),60),2);if("M"!==e){o(e)||(e=0);var i=Math.min(u(t/p,60),E[e]),a=(100+i).toFixed(e).substr(1);e>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+a}return r}(t,n)+"\n"+C(a.dayMonthYear,t,r,i);e=a.dayMonth+"\n"+a.year}return C(e,t,r,i)};var O=3*f;n.incrementMonth=function(t,e,n){n=x(n)&&n;var r=u(t,f);if(t=Math.round(t-r),n)try{var i=Math.round(t/f)+v,a=g.getComponentMethod("calendars","getCal")(n),o=a.fromJD(i);return e%12?a.add(o,e,"m"):a.add(o,e/12,"y"),(o.toJD()-v)*f+r}catch(c){s.error("invalid ms "+t+" in calendar "+n)}var l=new Date(t+O);return l.setUTCMonth(l.getUTCMonth()+e)+r-O},n.findExactDates=function(t,e){for(var n,r,i=0,a=0,s=0,u=0,l=x(e)&&g.getComponentMethod("calendars","getCal")(e),c=0;c<t.length;c++)if(r=t[c],o(r)){if(!(r%f))if(l)try{1===(n=l.fromJD(r/f+v)).day()?1===n.month()?i++:a++:s++}catch(h){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:a++:s++}else u++;s+=a+=i;var d=t.length-u;return{exactYears:i/d,exactMonths:a/d,exactDays:s/d}}},{"../constants/numerical":140,"../registry":243,"./loggers":164,"./mod":167,d3:7,"fast-isnumeric":9}],153:[function(t,e,n){"use strict";var r=t("d3"),i=t("./loggers");function a(t){var e=t&&t.parentNode;e&&e.removeChild(t)}function o(t,e,n){var r="plotly.js-style-"+t,a=document.getElementById(r);a||((a=document.createElement("style")).setAttribute("id",r),a.appendChild(document.createTextNode("")),document.head.appendChild(a));var o=a.sheet;o.insertRule?o.insertRule(e+"{"+n+"}",0):o.addRule?o.addRule(e,n,0):i.warn("addStyleRule failed")}e.exports={getGraphDiv:function(t){var e;if("string"===typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null===t||void 0===t)throw new Error("DOM element provided is null or undefined");return t},isPlotDiv:function(t){var e=r.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:a,addStyleRule:function(t,e){o("global",t,e)},addRelatedStyleRule:o,deleteRelatedStyleRule:function(t){var e="plotly.js-style-"+t,n=document.getElementById(e);n&&a(n)}}},{"./loggers":164,d3:7}],154:[function(t,e,n){"use strict";var r=t("events").EventEmitter,i={init:function(t){if(t._ev instanceof r)return t;var e=new r,n=new r;return t._ev=e,t._internalEv=n,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=n.on.bind(n),t._internalOnce=n.once.bind(n),t._removeInternalListener=n.removeListener.bind(n),t._removeAllInternalListeners=n.removeAllListeners.bind(n),t.emit=function(r,i){"undefined"!==typeof jQuery&&jQuery(t).trigger(r,i),e.emit(r,i),n.emit(r,i)},t},triggerHandler:function(t,e,n){var r,i;"undefined"!==typeof jQuery&&(r=jQuery(t).triggerHandler(e,n));var a=t._ev;if(!a)return r;var o,s=a._events[e];if(!s)return r;function u(t){return t.listener?(a.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(a,[n]))):t.apply(a,[n])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)u(s[o]);return i=u(s[o]),void 0!==r?r:i},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}};e.exports=i},{events:6}],155:[function(t,e,n){"use strict";var r=t("./is_plain_object.js"),i=Array.isArray;function a(t,e,n,o){var s,u,l,c,f,d,h=t[0],p=t.length;if(2===p&&i(h)&&i(t[1])&&0===h.length){if(function(t,e){var n,r;for(n=0;n<t.length;n++){if(null!==(r=t[n])&&"object"===typeof r)return!1;void 0!==r&&(e[n]=r)}return!0}(t[1],h))return h;h.splice(0,h.length)}for(var v=1;v<p;v++)for(u in s=t[v])l=h[u],c=s[u],o&&i(c)?h[u]=c:e&&c&&(r(c)||(f=i(c)))?(f?(f=!1,d=l&&i(l)?l:[]):d=l&&r(l)?l:{},h[u]=a([d,c],e,n,o)):("undefined"!==typeof c||n)&&(h[u]=c);return h}n.extendFlat=function(){return a(arguments,!1,!1,!1)},n.extendDeep=function(){return a(arguments,!0,!1,!1)},n.extendDeepAll=function(){return a(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return a(arguments,!0,!1,!0)}},{"./is_plain_object.js":161}],156:[function(t,e,n){"use strict";e.exports=function(t){for(var e={},n=[],r=0,i=0;i<t.length;i++){var a=t[i];1!==e[a]&&(e[a]=1,n[r++]=a)}return n}},{}],157:[function(t,e,n){"use strict";function r(t){return!0===t.visible}function i(t){var e=t[0].trace;return!0===e.visible&&0!==e._length}e.exports=function(t){for(var e,n=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?i:r),a=[],o=0;o<t.length;o++){var s=t[o];n(s)&&a.push(s)}return a}},{}],158:[function(t,e,n){"use strict";var r,i,a,o=t("./mod").mod;function s(t,e,n,r,i,a,o,s){var u=n-t,l=i-t,c=o-i,f=r-e,d=a-e,h=s-a,p=u*h-c*f;if(0===p)return null;var v=(l*h-c*d)/p,g=(l*f-u*d)/p;return g<0||g>1||v<0||v>1?null:{x:t+u*v,y:e+f*v}}function u(t,e,n,r,i){var a=r*t+i*e;if(a<0)return r*r+i*i;if(a>n){var o=r-t,s=i-e;return o*o+s*s}var u=r*e-i*t;return u*u/n}n.segmentsIntersect=s,n.segmentDistance=function(t,e,n,r,i,a,o,l){if(s(t,e,n,r,i,a,o,l))return 0;var c=n-t,f=r-e,d=o-i,h=l-a,p=c*c+f*f,v=d*d+h*h,g=Math.min(u(c,f,p,i-t,a-e),u(c,f,p,o-t,l-e),u(d,h,v,t-i,e-a),u(d,h,v,n-i,r-a));return Math.sqrt(g)},n.getTextLocation=function(t,e,n,s){if(t===i&&s===a||(r={},i=t,a=s),r[n])return r[n];var u=t.getPointAtLength(o(n-s/2,e)),l=t.getPointAtLength(o(n+s/2,e)),c=Math.atan((l.y-u.y)/(l.x-u.x)),f=t.getPointAtLength(o(n,e)),d=(4*f.x+u.x+l.x)/6,h=(4*f.y+u.y+l.y)/6,p={x:d,y:h,theta:c};return r[n]=p,p},n.clearLocationCache=function(){i=null},n.getVisibleSegment=function(t,e,n){var r,i,a=e.left,o=e.right,s=e.top,u=e.bottom,l=0,c=t.getTotalLength(),f=c;function d(e){var n=t.getPointAtLength(e);0===e?r=n:e===c&&(i=n);var l=n.x<a?a-n.x:n.x>o?n.x-o:0,f=n.y<s?s-n.y:n.y>u?n.y-u:0;return Math.sqrt(l*l+f*f)}for(var h=d(l);h;){if((l+=h+n)>f)return;h=d(l)}for(h=d(f);h;){if(l>(f-=h+n))return;h=d(f)}return{min:l,max:f,len:f-l,total:c,isClosed:0===l&&f===c&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(t,e,n,r){for(var i,a,o,s=(r=r||{}).pathLength||t.getTotalLength(),u=r.tolerance||.001,l=r.iterationLimit||30,c=t.getPointAtLength(0)[n]>t.getPointAtLength(s)[n]?-1:1,f=0,d=0,h=s;f<l;){if(i=(d+h)/2,a=t.getPointAtLength(i),o=a[n]-e,Math.abs(o)<u)return a;c*o>0?h=i:d=i,f++}return a}},{"./mod":167}],159:[function(t,e,n){"use strict";e.exports=function(t){return t}},{}],160:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../constants/numerical"),o=a.FP_SAFE,s=a.BADNUM,u=e.exports={};u.nestedProperty=t("./nested_property"),u.keyedContainer=t("./keyed_container"),u.relativeAttr=t("./relative_attr"),u.isPlainObject=t("./is_plain_object"),u.toLogRange=t("./to_log_range"),u.relinkPrivateKeys=t("./relink_private");var l=t("./array");u.isTypedArray=l.isTypedArray,u.isArrayOrTypedArray=l.isArrayOrTypedArray,u.isArray1D=l.isArray1D,u.ensureArray=l.ensureArray,u.concat=l.concat,u.maxRowLength=l.maxRowLength,u.minRowLength=l.minRowLength;var c=t("./mod");u.mod=c.mod,u.modHalf=c.modHalf;var f=t("./coerce");u.valObjectMeta=f.valObjectMeta,u.coerce=f.coerce,u.coerce2=f.coerce2,u.coerceFont=f.coerceFont,u.coerceHoverinfo=f.coerceHoverinfo,u.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity,u.validate=f.validate;var d=t("./dates");u.dateTime2ms=d.dateTime2ms,u.isDateTime=d.isDateTime,u.ms2DateTime=d.ms2DateTime,u.ms2DateTimeLocal=d.ms2DateTimeLocal,u.cleanDate=d.cleanDate,u.isJSDate=d.isJSDate,u.formatDate=d.formatDate,u.incrementMonth=d.incrementMonth,u.dateTick0=d.dateTick0,u.dfltRange=d.dfltRange,u.findExactDates=d.findExactDates,u.MIN_MS=d.MIN_MS,u.MAX_MS=d.MAX_MS;var h=t("./search");u.findBin=h.findBin,u.sorterAsc=h.sorterAsc,u.sorterDes=h.sorterDes,u.distinctVals=h.distinctVals,u.roundUp=h.roundUp,u.sort=h.sort,u.findIndexOfMin=h.findIndexOfMin;var p=t("./stats");u.aggNums=p.aggNums,u.len=p.len,u.mean=p.mean,u.median=p.median,u.midRange=p.midRange,u.variance=p.variance,u.stdev=p.stdev,u.interp=p.interp;var v=t("./matrix");u.init2dArray=v.init2dArray,u.transposeRagged=v.transposeRagged,u.dot=v.dot,u.translationMatrix=v.translationMatrix,u.rotationMatrix=v.rotationMatrix,u.rotationXYMatrix=v.rotationXYMatrix,u.apply2DTransform=v.apply2DTransform,u.apply2DTransform2=v.apply2DTransform2;var g=t("./angles");u.deg2rad=g.deg2rad,u.rad2deg=g.rad2deg,u.angleDelta=g.angleDelta,u.angleDist=g.angleDist,u.isFullCircle=g.isFullCircle,u.isAngleInsideSector=g.isAngleInsideSector,u.isPtInsideSector=g.isPtInsideSector,u.pathArc=g.pathArc,u.pathSector=g.pathSector,u.pathAnnulus=g.pathAnnulus;var m=t("./anchor_utils");u.isLeftAnchor=m.isLeftAnchor,u.isCenterAnchor=m.isCenterAnchor,u.isRightAnchor=m.isRightAnchor,u.isTopAnchor=m.isTopAnchor,u.isMiddleAnchor=m.isMiddleAnchor,u.isBottomAnchor=m.isBottomAnchor;var y=t("./geometry2d");u.segmentsIntersect=y.segmentsIntersect,u.segmentDistance=y.segmentDistance,u.getTextLocation=y.getTextLocation,u.clearLocationCache=y.clearLocationCache,u.getVisibleSegment=y.getVisibleSegment,u.findPointOnPath=y.findPointOnPath;var b=t("./extend");u.extendFlat=b.extendFlat,u.extendDeep=b.extendDeep,u.extendDeepAll=b.extendDeepAll,u.extendDeepNoArrays=b.extendDeepNoArrays;var _=t("./loggers");u.log=_.log,u.warn=_.warn,u.error=_.error;var x=t("./regex");u.counterRegex=x.counter;var w=t("./throttle");u.throttle=w.throttle,u.throttleDone=w.done,u.clearThrottle=w.clear;var A=t("./dom");function k(t){var e={};for(var n in t)for(var r=t[n],i=0;i<r.length;i++)e[r[i]]=+n;return e}u.getGraphDiv=A.getGraphDiv,u.isPlotDiv=A.isPlotDiv,u.removeElement=A.removeElement,u.addStyleRule=A.addStyleRule,u.addRelatedStyleRule=A.addRelatedStyleRule,u.deleteRelatedStyleRule=A.deleteRelatedStyleRule,u.clearResponsive=t("./clear_responsive"),u.makeTraceGroups=t("./make_trace_groups"),u._=t("./localize"),u.notifier=t("./notifier"),u.filterUnique=t("./filter_unique"),u.filterVisible=t("./filter_visible"),u.pushUnique=t("./push_unique"),u.cleanNumber=t("./clean_number"),u.ensureNumber=function(t){return i(t)?(t=Number(t))<-o||t>o?s:i(t)?Number(t):s:s},u.isIndex=function(t,e){return!(void 0!==e&&t>=e)&&i(t)&&t>=0&&t%1===0},u.noop=t("./noop"),u.identity=t("./identity"),u.repeat=function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n},u.swapAttrs=function(t,e,n,r){n||(n="x"),r||(r="y");for(var i=0;i<e.length;i++){var a=e[i],o=u.nestedProperty(t,a.replace("?",n)),s=u.nestedProperty(t,a.replace("?",r)),l=o.get();o.set(s.get()),s.set(l)}},u.raiseToTop=function(t){t.parentNode.appendChild(t)},u.cancelTransition=function(t){return t.transition().duration(0)},u.constrain=function(t,e,n){return e>n?Math.max(n,Math.min(e,t)):Math.max(e,Math.min(n,t))},u.bBoxIntersect=function(t,e,n){return n=n||0,t.left<=e.right+n&&e.left<=t.right+n&&t.top<=e.bottom+n&&e.top<=t.bottom+n},u.simpleMap=function(t,e,n,r){for(var i=t.length,a=new Array(i),o=0;o<i;o++)a[o]=e(t[o],n,r);return a},u.randstr=function t(e,n,r,i){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var a,o,s,l=Math.log(Math.pow(2,n))/Math.log(r),c="";for(a=2;l===1/0;a*=2)l=Math.log(Math.pow(2,n/a))/Math.log(r)*a;var f=l-Math.floor(l);for(a=0;a<Math.floor(l);a++)s=Math.floor(Math.random()*r).toString(r),c=s+c;f&&(o=Math.pow(r,f),s=Math.floor(Math.random()*o).toString(r),c=s+c);var d=parseInt(c,r);return e&&e[c]||d!==1/0&&d>=Math.pow(2,n)?i>10?(u.warn("randstr failed uniqueness"),c):t(e,n,r,(i||0)+1):c},u.OptionControl=function(t,e){t||(t={}),e||(e="opt");var n={optionList:[],_newoption:function(r){r[e]=t,n[r.name]=r,n.optionList.push(r)}};return n["_"+e]=t,n},u.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var n,r,i,a,o=t.length,s=2*o,u=2*e-1,l=new Array(u),c=new Array(o);for(n=0;n<u;n++)l[n]=(1-Math.cos(Math.PI*(n+1)/e))/(2*e);for(n=0;n<o;n++){for(a=0,r=0;r<u;r++)(i=n+r+1-e)<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=t[i]*l[r];c[n]=a}return c},u.syncOrAsync=function(t,e,n){var r,i;function a(){return u.syncOrAsync(t,e,n)}for(;t.length;)if(i=t.splice(0,1)[0],(r=i(e))&&r.then)return r.then(a).then(void 0,u.promiseError);return n&&n(e)},u.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},u.noneOrAll=function(t,e,n){if(t){var r,i,a=!1,o=!0;for(r=0;r<n.length;r++)void 0!==(i=t[n[r]])&&null!==i?a=!0:o=!1;if(a&&!o)for(r=0;r<n.length;r++)t[n[r]]=e[n[r]]}},u.mergeArray=function(t,e,n,r){var i="function"===typeof r;if(u.isArrayOrTypedArray(t))for(var a=Math.min(t.length,e.length),o=0;o<a;o++){var s=t[o];e[o][n]=i?r(s):s}},u.mergeArrayCastPositive=function(t,e,n){return u.mergeArray(t,e,n,function(t){var e=+t;return isFinite(e)&&e>0?e:0})},u.fillArray=function(t,e,n,r){if(r=r||u.identity,u.isArrayOrTypedArray(t))for(var i=0;i<e.length;i++)e[i][n]=r(t[i])},u.castOption=function(t,e,n,r){r=r||u.identity;var i=u.nestedProperty(t,n).get();return u.isArrayOrTypedArray(i)?Array.isArray(e)&&u.isArrayOrTypedArray(i[e[0]])?r(i[e[0]][e[1]]):r(i[e]):i},u.extractOption=function(t,e,n,r){if(n in t)return t[n];var i=u.nestedProperty(e,r).get();return Array.isArray(i)?void 0:i},u.tagSelected=function(t,e,n){var r,i,a=e.selectedpoints,o=e._indexToPoints;o&&(r=k(o));for(var s=0;s<a.length;s++){var l=a[s];if(u.isIndex(l)){var c=r?r[l]:l,f=n?n[c]:c;void 0!==(i=f)&&i<t.length&&(t[f].selected=1)}}},u.selIndices2selPoints=function(t){var e=t.selectedpoints,n=t._indexToPoints;if(n){for(var r=k(n),i=[],a=0;a<e.length;a++){var o=e[a];if(u.isIndex(o)){var s=r[o];u.isIndex(s)&&i.push(s)}}return i}return e},u.getTargetArray=function(t,e){var n=e.target;if("string"===typeof n&&n){var r=u.nestedProperty(t,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},u.minExtend=function(t,e){var n={};"object"!==typeof e&&(e={});var r,i,a,o=Object.keys(t);for(r=0;r<o.length;r++)i=o[r],a=t[i],"_"!==i.charAt(0)&&"function"!==typeof a&&("module"===i?n[i]=a:Array.isArray(a)?n[i]="colorscale"===i?a.slice():a.slice(0,3):n[i]=a&&"object"===typeof a?u.minExtend(t[i],e[i]):a);for(o=Object.keys(e),r=0;r<o.length;r++)i=o[r],"object"===typeof(a=e[i])&&i in n&&"object"===typeof n[i]||(n[i]=a);return n},u.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},u.containsAny=function(t,e){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1},u.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var M=/MSIE [1-9]\./;u.isIE9orBelow=function(){return u.isIE()&&M.test(window.navigator.userAgent)};var T=/Version\/[\d\.]+.*Safari/;u.isSafari=function(){return T.test(window.navigator.userAgent)},u.isD3Selection=function(t){return t&&"function"===typeof t.classed},u.ensureSingle=function(t,e,n,r){var i=t.select(e+(n?"."+n:""));if(i.size())return i;var a=t.append(e);return n&&a.classed(n,!0),r&&a.call(r),a},u.ensureSingleById=function(t,e,n,r){var i=t.select(e+"#"+n);if(i.size())return i;var a=t.append(e).attr("id",n);return r&&a.call(r),a},u.objectFromPath=function(t,e){for(var n,r=t.split("."),i=n={},a=0;a<r.length;a++){var o=r[a],s=null,u=r[a].match(/(.*)\[([0-9]+)\]/);u?(o=u[1],s=u[2],n=n[o]=[],a===r.length-1?n[s]=e:n[s]={},n=n[s]):(a===r.length-1?n[o]=e:n[o]={},n=n[o])}return i};var S=/^([^\[\.]+)\.(.+)?/,C=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;u.expandObjectPaths=function(t){var e,n,r,i,a,o,s;if("object"===typeof t&&!Array.isArray(t))for(n in t)t.hasOwnProperty(n)&&((e=n.match(S))?(i=t[n],r=e[1],delete t[n],t[r]=u.extendDeepNoArrays(t[r]||{},u.objectFromPath(n,u.expandObjectPaths(i))[r])):(e=n.match(C))?(i=t[n],r=e[1],a=parseInt(e[2]),delete t[n],t[r]=t[r]||[],"."===e[3]?(s=e[4],o=t[r][a]=t[r][a]||{},u.extendDeepNoArrays(o,u.objectFromPath(s,u.expandObjectPaths(i)))):t[r][a]=u.expandObjectPaths(i)):t[n]=u.expandObjectPaths(t[n]));return t},u.numSeparate=function(t,e,n){if(n||(n=!1),"string"!==typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"===typeof t&&(t=String(t));var r=/(\d+)(\d{3})/,i=e.charAt(0),a=e.charAt(1),o=t.split("."),s=o[0],u=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+a+"$2");return s+u},u.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)(:[^}]*)?}/g;var E=/^\w*$/;u.templateString=function(t,e){var n={};return t.replace(u.TEMPLATE_STRING_REGEX,function(t,r){return E.test(r)?e[r]||"":(n[r]=n[r]||u.nestedProperty(e,r).get,n[r]()||"")})};var O=/^:/,P=0;u.hovertemplateString=function(t,e,n){var i=arguments,a={};return t.replace(u.TEMPLATE_STRING_REGEX,function(t,o,s){var l,c,f,d;for(f=3;f<i.length;f++){if((l=i[f]).hasOwnProperty(o)){c=l[o];break}if(E.test(o)||(c=a[o]||u.nestedProperty(l,o).get())&&(a[o]=c),void 0!==c)break}return void 0===c&&(P<10&&(u.warn("Variable '"+o+"' in hovertemplate could not be found!"),c=t),10===P&&u.warn("Too many hovertemplate warnings - additional warnings will be suppressed"),P++),s?(d=n?n.numberFormat:r.format,c=d(s.replace(O,""))(c)):e.hasOwnProperty(o+"Label")&&(c=e[o+"Label"]),c})},u.subplotSort=function(t,e){for(var n=Math.min(t.length,e.length)+1,r=0,i=0,a=0;a<n;a++){var o=t.charCodeAt(a)||0,s=e.charCodeAt(a)||0,u=o>=48&&o<=57,l=s>=48&&s<=57;if(u&&(r=10*r+o-48),l&&(i=10*i+s-48),!u||!l){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var L=2e9;u.seedPseudoRandom=function(){L=2e9},u.pseudoRandom=function(){var t=L;return L=(69069*L+1)%4294967296,Math.abs(L-t)<429496729?u.pseudoRandom():L/4294967296},u.fillText=function(t,e,n){var r=Array.isArray(n)?function(t){n.push(t)}:function(t){n.text=t},i=u.extractOption(t,e,"htx","hovertext");if(u.isValidTextValue(i))return r(i);var a=u.extractOption(t,e,"tx","text");return u.isValidTextValue(a)?r(a):void 0},u.isValidTextValue=function(t){return t||0===t},u.formatPercent=function(t,e){e=e||0;for(var n=(Math.round(100*t*Math.pow(10,e))*Math.pow(.1,e)).toFixed(e)+"%",r=0;r<e;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},u.isHidden=function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e}},{"../constants/numerical":140,"./anchor_utils":145,"./angles":146,"./array":147,"./clean_number":148,"./clear_responsive":150,"./coerce":151,"./dates":152,"./dom":153,"./extend":155,"./filter_unique":156,"./filter_visible":157,"./geometry2d":158,"./identity":159,"./is_plain_object":161,"./keyed_container":162,"./localize":163,"./loggers":164,"./make_trace_groups":165,"./matrix":166,"./mod":167,"./nested_property":168,"./noop":169,"./notifier":170,"./push_unique":173,"./regex":175,"./relative_attr":176,"./relink_private":177,"./search":178,"./stats":180,"./throttle":182,"./to_log_range":183,d3:7,"fast-isnumeric":9}],161:[function(t,e,n){"use strict";e.exports=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype}},{}],162:[function(t,e,n){"use strict";var r=t("./nested_property"),i=/^\w*$/;e.exports=function(t,e,n,a){var o,s,u;n=n||"name",a=a||"value";var l={};e&&e.length?(u=r(t,e),s=u.get()):s=t,e=e||"";var c={};if(s)for(o=0;o<s.length;o++)c[s[o][n]]=o;var f=i.test(a),d={set:function(t,e){var i=null===e?4:0;if(!s){if(!u||4===i)return;s=[],u.set(s)}var o=c[t];if(void 0===o){if(4===i)return;i|=3,o=s.length,c[t]=o}else e!==(f?s[o][a]:r(s[o],a).get())&&(i|=2);var h=s[o]=s[o]||{};return h[n]=t,f?h[a]=e:r(h,a).set(e),null!==e&&(i&=-5),l[o]=l[o]|i,d},get:function(t){if(s){var e=c[t];return void 0===e?void 0:f?s[e][a]:r(s[e],a).get()}},rename:function(t,e){var r=c[t];return void 0===r?d:(l[r]=1|l[r],c[e]=r,delete c[t],s[r][n]=e,d)},remove:function(t){var e=c[t];if(void 0===e)return d;var i=s[e];if(Object.keys(i).length>2)return l[e]=2|l[e],d.set(t,null);if(f){for(o=e;o<s.length;o++)l[o]=3|l[o];for(o=e;o<s.length;o++)c[s[o][n]]--;s.splice(e,1),delete c[t]}else r(i,a).set(null),l[e]=6|l[e];return d},constructUpdate:function(){for(var t,i,o={},u=Object.keys(l),c=0;c<u.length;c++)i=u[c],t=e+"["+i+"]",s[i]?(1&l[i]&&(o[t+"."+n]=s[i][n]),2&l[i]&&(o[t+"."+a]=f?4&l[i]?null:s[i][a]:4&l[i]?null:r(s[i],a).get())):o[t]=null;return o}};return d}},{"./nested_property":168}],163:[function(t,e,n){"use strict";var r=t("../registry");e.exports=function(t,e){for(var n=t._context.locale,i=0;i<2;i++){for(var a=t._context.locales,o=0;o<2;o++){var s=(a[n]||{}).dictionary;if(s){var u=s[e];if(u)return u}a=r.localeRegistry}var l=n.split("-")[0];if(l===n)break;n=l}return e}},{"../registry":243}],164:[function(t,e,n){"use strict";var r=t("../plot_api/plot_config").dfltConfig,i=e.exports={};function a(t,e){if(t&&t.apply)try{return void t.apply(console,e)}catch(r){}for(var n=0;n<e.length;n++)try{t(e[n])}catch(r){console.log(e[n])}}i.log=function(){if(r.logging>1){for(var t=["LOG:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.trace||console.log,t)}},i.warn=function(){if(r.logging>0){for(var t=["WARN:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.trace||console.log,t)}},i.error=function(){if(r.logging>0){for(var t=["ERROR:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.error,t)}}},{"../plot_api/plot_config":192}],165:[function(t,e,n){"use strict";var r=t("d3");e.exports=function(t,e,n){var i=t.selectAll("g."+n.replace(/\s/g,".")).data(e,function(t){return t[0].trace.uid});i.exit().remove(),i.enter().append("g").attr("class",n),i.order();var a=t.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each(function(t){t[0][a]=r.select(this)}),i}},{d3:7}],166:[function(t,e,n){"use strict";n.init2dArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=new Array(e);return n},n.transposeRagged=function(t){var e,n,r=0,i=t.length;for(e=0;e<i;e++)r=Math.max(r,t[e].length);var a=new Array(r);for(e=0;e<r;e++)for(a[e]=new Array(i),n=0;n<i;n++)a[e][n]=t[n][e];return a},n.dot=function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var r,i,a=t.length;if(t[0].length)for(r=new Array(a),i=0;i<a;i++)r[i]=n.dot(t[i],e);else if(e[0].length){var o=n.transposeRagged(e);for(r=new Array(o.length),i=0;i<o.length;i++)r[i]=n.dot(t,o[i])}else for(r=0,i=0;i<a;i++)r+=t[i]*e[i];return r},n.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},n.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},n.rotationXYMatrix=function(t,e,r){return n.dot(n.dot(n.translationMatrix(e,r),n.rotationMatrix(t)),n.translationMatrix(-e,-r))},n.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var r=1===arguments.length?e[0]:[e[0],e[1]];return n.dot(t,[r[0],r[1],1]).slice(0,2)}},n.apply2DTransform2=function(t){var e=n.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}}},{}],167:[function(t,e,n){"use strict";e.exports={mod:function(t,e){var n=t%e;return n<0?n+e:n},modHalf:function(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}}},{}],168:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./array").isArrayOrTypedArray;function a(t,e){return function(){var n,r,o,s,u,l=t;for(s=0;s<e.length-1;s++){if(-1===(n=e[s])){for(r=!0,o=[],u=0;u<l.length;u++)o[u]=a(l[u],e.slice(s+1))(),o[u]!==o[0]&&(r=!1);return r?o[0]:o}if("number"===typeof n&&!i(l))return;if("object"!==typeof(l=l[n])||null===l)return}if("object"===typeof l&&null!==l&&null!==(o=l[e[s]]))return o}}e.exports=function(t,e){if(r(e))e=String(e);else if("string"!==typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var n,i,o,s=0,l=e.split(".");s<l.length;){if(n=String(l[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])l[s]=n[1];else{if(0!==s)throw"bad property string";l.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),o=0;o<i.length;o++)s++,l.splice(s,0,Number(i[o]))}s++}return"object"!==typeof t?function(t,e,n){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:n,obj:t}}(t,e,l):{set:u(t,l,e),get:a(t,l),astr:e,parts:l,obj:t}};var o=/(^|\.)args\[/;function s(t,e){return void 0===t||null===t&&!e.match(o)}function u(t,e,n){return function(r){var a,o,u=t,d="",h=[[t,d]],p=s(r,n);for(o=0;o<e.length-1;o++){if("number"===typeof(a=e[o])&&!i(u))throw"array index but container is not an array";if(-1===a){if(p=!c(u,e.slice(o+1),r,n))break;return}if(!f(u,a,e[o+1],p))break;if("object"!==typeof(u=u[a])||null===u)throw"container is not an object";d=l(d,a),h.push([u,d])}if(p){if(o===e.length-1&&(delete u[e[o]],Array.isArray(u)&&+e[o]===u.length-1))for(;u.length&&void 0===u[u.length-1];)u.pop()}else u[e[o]]=r}}function l(t,e){var n=e;return r(e)?n="["+e+"]":t&&(n="."+e),t+n}function c(t,e,n,r){var a,o=i(n),l=!0,c=n,d=r.replace("-1",0),h=!o&&s(n,d),p=e[0];for(a=0;a<t.length;a++)d=r.replace("-1",a),o&&(c=n[a%n.length],h=s(c,d)),h&&(l=!1),f(t,a,p,h)&&u(t[a],e,r.replace("-1",a))(c);return l}function f(t,e,n,r){if(void 0===t[e]){if(r)return!1;t[e]="number"===typeof n?[]:{}}return!0}},{"./array":147,"fast-isnumeric":9}],169:[function(t,e,n){"use strict";e.exports=function(){}},{}],170:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=[];e.exports=function(t,e){if(-1===a.indexOf(t)){a.push(t);var n=1e3;i(e)?n=e:"long"===e&&(n=3e3);var o=r.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0);var s=o.selectAll(".notifier-note").data(a);s.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var e=r.select(this);e.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){e.transition().call(u)});for(var i=e.append("p"),a=t.split(/<br\s*\/?>/g),o=0;o<a.length;o++)o&&i.append("br"),i.append("span").text(a[o]);e.transition().duration(700).style("opacity",1).transition().delay(n).call(u)})}function u(t){t.duration(700).style("opacity",0).each("end",function(t){var e=a.indexOf(t);-1!==e&&a.splice(e,1),r.select(this).remove()})}}},{d3:7,"fast-isnumeric":9}],171:[function(t,e,n){"use strict";var r=t("./setcursor"),i="data-savedcursor";e.exports=function(t,e){var n=t.attr(i);if(e){if(!n){for(var a=(t.attr("class")||"").split(" "),o=0;o<a.length;o++){var s=a[o];0===s.indexOf("cursor-")&&t.attr(i,s.substr(7)).classed(s,!1)}t.attr(i)||t.attr(i,"!!")}r(t,e)}else n&&(t.attr(i,null),"!!"===n?r(t):r(t,n))}},{"./setcursor":179}],172:[function(t,e,n){"use strict";var r=t("./matrix").dot,i=t("../constants/numerical").BADNUM,a=e.exports={};a.tester=function(t){var e,n=t.slice(),r=n[0][0],a=r,o=n[0][1],s=o;for(n.push(n[0]),e=1;e<n.length;e++)r=Math.min(r,n[e][0]),a=Math.max(a,n[e][0]),o=Math.min(o,n[e][1]),s=Math.max(s,n[e][1]);var u,l=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(l=!0,u=function(t){return t[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(l=!0,u=function(t){return t[1]===n[0][1]}));var c=!0,f=n[0];for(e=1;e<n.length;e++)if(f[0]!==n[e][0]||f[1]!==n[e][1]){c=!1;break}return{xmin:r,xmax:a,ymin:o,ymax:s,pts:n,contains:l?function(t,e){var n=t[0],l=t[1];return!(n===i||n<r||n>a||l===i||l<o||l>s)&&(!e||!u(t))}:function(t,e){var u=t[0],l=t[1];if(u===i||u<r||u>a||l===i||l<o||l>s)return!1;var c,f,d,h,p,v=n.length,g=n[0][0],m=n[0][1],y=0;for(c=1;c<v;c++)if(f=g,d=m,g=n[c][0],m=n[c][1],h=Math.min(f,g),!(u<h||u>Math.max(f,g)||l>Math.max(d,m)))if(l<Math.min(d,m))u!==h&&y++;else{if(l===(p=g===f?l:d+(u-f)*(m-d)/(g-f)))return 1!==c||!e;l<=p&&u!==h&&y++}return y%2===1},isRect:l,degenerate:c}},a.isSegmentBent=function(t,e,n,i){var a,o,s,u=t[e],l=[t[n][0]-u[0],t[n][1]-u[1]],c=r(l,l),f=Math.sqrt(c),d=[-l[1]/f,l[0]/f];for(a=e+1;a<n;a++)if(o=[t[a][0]-u[0],t[a][1]-u[1]],(s=r(o,l))<0||s>c||Math.abs(r(o,d))>i)return!0;return!1},a.filter=function(t,e){var n=[t[0]],r=0,i=0;function o(o){t.push(o);var s=n.length,u=r;n.splice(i+1);for(var l=u+1;l<t.length;l++)(l===t.length-1||a.isSegmentBent(t,u,l+1,e))&&(n.push(t[l]),n.length<s-2&&(r=l,i=n.length-1),u=l)}if(t.length>1){var s=t.pop();o(s)}return{addPt:o,raw:t,filtered:n}}},{"../constants/numerical":140,"./matrix":166}],173:[function(t,e,n){"use strict";e.exports=function(t,e){if(e instanceof RegExp){for(var n=e.toString(),r=0;r<t.length;r++)if(t[r]instanceof RegExp&&t[r].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t}},{}],174:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plot_api/plot_config").dfltConfig,a={add:function(t,e,n,r,a){var o,s;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,o),t.undoQueue.index+=1):o=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(e),o.undo.args.unshift(n),o.redo.calls.push(r),o.redo.args.push(a)),t.undoQueue.queue.length>i.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)a.plotDo(t,e.undo.calls[n],e.undo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)a.plotDo(t,e.redo.calls[n],e.redo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}},plotDo:function(t,e,n){t.autoplay=!0,n=function(t,e){for(var n,i=[],a=0;a<e.length;a++)n=e[a],i[a]=n===t?n:"object"===typeof n?Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;return i}(t,n),e.apply(null,n)}};e.exports=a},{"../lib":160,"../plot_api/plot_config":192}],175:[function(t,e,n){"use strict";n.counter=function(t,e,n,r){var i=(e||"")+(n?"":"$"),a=!1===r?"":"^";return"xy"===t?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(a+t+"([2-9]|[1-9][0-9]+)?"+i)}},{}],176:[function(t,e,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;e.exports=function(t,e){for(;e;){var n=t.match(r);if(n)t=n[1];else{if(!t.match(i))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e}},{}],177:[function(t,e,n){"use strict";var r=t("./array").isArrayOrTypedArray,i=t("./is_plain_object");e.exports=function t(e,n){for(var a in n){var o=n[a],s=e[a];if(s!==o)if("_"===a.charAt(0)||"function"===typeof o){if(a in e)continue;e[a]=o}else if(r(o)&&r(s)&&i(o[0])){if("customdata"===a||"ids"===a)continue;for(var u=Math.min(o.length,s.length),l=0;l<u;l++)s[l]!==o[l]&&i(o[l])&&i(s[l])&&t(s[l],o[l])}else i(o)&&i(s)&&(t(s,o),Object.keys(s).length||delete e[a])}}},{"./array":147,"./is_plain_object":161}],178:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./loggers"),a=t("./identity");function o(t,e){return t<e}function s(t,e){return t<=e}function u(t,e){return t>e}function l(t,e){return t>=e}n.findBin=function(t,e,n){if(r(e.start))return n?Math.ceil((t-e.start)/e.size-1e-9)-1:Math.floor((t-e.start)/e.size+1e-9);var a,c,f=0,d=e.length,h=0,p=d>1?(e[d-1]-e[0])/(d-1):1;for(c=p>=0?n?o:s:n?l:u,t+=1e-9*p*(n?-1:1)*(p>=0?1:-1);f<d&&h++<100;)a=Math.floor((f+d)/2),c(e[a],t)?f=a+1:d=a;return h>90&&i.log("Long binary search..."),f-1},n.sorterAsc=function(t,e){return t-e},n.sorterDes=function(t,e){return e-t},n.distinctVals=function(t){var e=t.slice();e.sort(n.sorterAsc);for(var r=e.length-1,i=e[r]-e[0]||1,a=i/(r||1)/1e4,o=[e[0]],s=0;s<r;s++)e[s+1]>e[s]+a&&(i=Math.min(i,e[s+1]-e[s]),o.push(e[s+1]));return{vals:o,minDiff:i}},n.roundUp=function(t,e,n){for(var r,i=0,a=e.length-1,o=0,s=n?0:1,u=n?1:0,l=n?Math.ceil:Math.floor;i<a&&o++<100;)r=l((i+a)/2),e[r]<=t?i=r+s:a=r-u;return e[i]},n.sort=function(t,e){for(var n=0,r=0,i=1;i<t.length;i++){var a=e(t[i],t[i-1]);if(a<0?n=1:a>0&&(r=1),n&&r)return t.sort(e)}return r?t:t.reverse()},n.findIndexOfMin=function(t,e){e=e||a;for(var n,r=1/0,i=0;i<t.length;i++){var o=e(t[i]);o<r&&(r=o,n=i)}return n}},{"./identity":159,"./loggers":164,"fast-isnumeric":9}],179:[function(t,e,n){"use strict";e.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],180:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./array").isArrayOrTypedArray;n.aggNums=function(t,e,a,o){var s,u;if((!o||o>a.length)&&(o=a.length),r(e)||(e=!1),i(a[0])){for(u=new Array(o),s=0;s<o;s++)u[s]=n.aggNums(t,e,a[s]);a=u}for(s=0;s<o;s++)r(e)?r(a[s])&&(e=t(+e,+a[s])):e=a[s];return e},n.len=function(t){return n.aggNums(function(t){return t+1},0,t)},n.mean=function(t,e){return e||(e=n.len(t)),n.aggNums(function(t,e){return t+e},0,t)/e},n.midRange=function(t){if(void 0!==t&&0!==t.length)return(n.aggNums(Math.max,null,t)+n.aggNums(Math.min,null,t))/2},n.variance=function(t,e,i){return e||(e=n.len(t)),r(i)||(i=n.mean(t,e)),n.aggNums(function(t,e){return t+Math.pow(e-i,2)},0,t)/e},n.stdev=function(t,e,r){return Math.sqrt(n.variance(t,e,r))},n.median=function(t){var e=t.slice().sort();return n.interp(e,.5)},n.interp=function(t,e){if(!r(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var n=e%1;return n*t[Math.ceil(e)]+(1-n)*t[Math.floor(e)]}},{"./array":147,"fast-isnumeric":9}],181:[function(t,e,n){"use strict";var r=t("d3"),i=t("../lib"),a=t("../constants/xmlns_namespaces"),o=t("../constants/alignment").LINE_SPACING;function s(t,e){return t.node().getBoundingClientRect()[e]}var u=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(t,e,T){var S=t.text(),E=!t.attr("data-notex")&&"undefined"!==typeof MathJax&&S.match(u),O=r.select(t.node().parentNode);if(!O.empty()){var P=t.attr("class")?t.attr("class").split(" ")[0]:"text";return P+="-math",O.selectAll("svg."+P).remove(),O.selectAll("g."+P+"-group").remove(),t.style("display",null).attr({"data-unformatted":S,"data-math":"N"}),E?(e&&e._promises||[]).push(new Promise(function(e){t.style("display","none");var n=parseInt(t.node().style.fontSize,10),a={fontSize:n};!function(t,e,n){var a,o,s,u;MathJax.Hub.Queue(function(){return o=i.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var n="math-output-"+i.randstr({},64);return u=r.select("body").append("div").attr({id:n}).style({visibility:"hidden",position:"absolute"}).style({"font-size":e.fontSize+"px"}).text(t.replace(l,"\\lt ").replace(c,"\\gt ")),MathJax.Hub.Typeset(u.node())},function(){var e=r.select("body").select("#MathJax_SVG_glyphs");if(u.select(".MathJax_SVG").empty()||!u.select("svg").node())i.log("There was an error in the tex syntax.",t),n();else{var o=u.select("svg").node().getBoundingClientRect();n(u.select(".MathJax_SVG"),e,o)}if(u.remove(),"SVG"!==a)return MathJax.Hub.setRenderer(a)},function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(o)})}(E[2],a,function(r,i,a){O.selectAll("svg."+P).remove(),O.selectAll("g."+P+"-group").remove();var o=r&&r.select("svg");if(!o||!o.node())return L(),void e();var u=O.append("g").classed(P+"-group",!0).attr({"pointer-events":"none","data-unformatted":S,"data-math":"Y"});u.node().appendChild(o.node()),i&&i.node()&&o.node().insertBefore(i.node().cloneNode(!0),o.node().firstChild),o.attr({class:P,height:a.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var l=t.node().style.fill||"black",c=o.select("g");c.attr({fill:l,stroke:l});var f=s(c,"width"),d=s(c,"height"),h=+t.attr("x")-f*{start:0,middle:.5,end:1}[t.attr("text-anchor")||"start"],p=n||s(t,"height"),v=-p/4;"y"===P[0]?(u.attr({transform:"rotate("+[-90,+t.attr("x"),+t.attr("y")]+") translate("+[-f/2,v-d/2]+")"}),o.attr({x:+t.attr("x"),y:+t.attr("y")})):"l"===P[0]?o.attr({x:t.attr("x"),y:v-d/2}):"a"===P[0]&&0!==P.indexOf("atitle")?o.attr({x:0,y:v}):o.attr({x:h,y:+t.attr("y")+v-d/2}),T&&T.call(t,u),e(u)})})):L(),t}function L(){O.empty()||(P=t.attr("class")+"-math",O.select("svg."+P).remove()),t.text("").style("white-space","pre");var e=function(t,e){e=e.replace(g," ");var n,s=!1,u=[],l=-1;function c(){l++;var e=document.createElementNS(a.svg,"tspan");r.select(e).attr({class:"line",dy:l*o+"em"}),t.appendChild(e),n=e;var i=u;if(u=[{node:e}],i.length>1)for(var s=1;s<i.length;s++)T(i[s])}function T(t){var e,i=t.type,o={};if("a"===i){e="a";var s=t.target,l=t.href,c=t.popup;l&&(o={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":l},c&&(o.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+c+'");return false;'))}else e="tspan";t.style&&(o.style=t.style);var f=document.createElementNS(a.svg,e);if("sup"===i||"sub"===i){S(n,p),n.appendChild(f);var v=document.createElementNS(a.svg,"tspan");S(v,p),r.select(v).attr("dy",h[i]),o.dy=d[i],n.appendChild(f),n.appendChild(v)}else n.appendChild(f);r.select(f).attr(o),n=t.node=f,u.push(t)}function S(t,e){t.appendChild(document.createTextNode(e))}function E(t){if(1!==u.length){var r=u.pop();t!==r.type&&i.log("Start tag <"+r.type+"> doesnt match end tag <"+t+">. Pretending it did match.",e),n=u[u.length-1].node}else i.log("Ignoring unexpected end tag </"+t+">.",e)}b.test(e)?c():(n=t,u=[{node:t}]);for(var O=e.split(m),P=0;P<O.length;P++){var L=O[P],R=L.match(y),D=R&&R[2].toLowerCase(),F=f[D];if("br"===D)c();else if(void 0===F)S(n,C(L));else if(R[1])E(D);else{var j=R[4],N={type:D},z=k(j,_);if(z?(z=z.replace(M,"$1 fill:"),F&&(z+=";"+F)):F&&(z=F),z&&(N.style=z),"a"===D){s=!0;var I=k(j,x);if(I){var B=document.createElement("a");B.href=I,-1!==v.indexOf(B.protocol)&&(N.href=encodeURI(decodeURI(I)),N.target=k(j,w)||"_blank",N.popup=k(j,A))}}T(N)}}return s}(t.node(),S);e&&t.style("pointer-events","all"),n.positionText(t),T&&T.call(t)}};var l=/(<|&lt;|&#60;)/g,c=/(>|&gt;|&#62;)/g,f={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},d={sub:"0.3em",sup:"-0.6em"},h={sub:"-0.21em",sup:"0.42em"},p="\u200b",v=["http:","https:","mailto:","",void 0,":"],g=/(\r\n?|\n)/g,m=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,b=/<br(\s+.*)?>/i,_=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,x=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,A=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function k(t,e){if(!t)return null;var n=t.match(e),r=n&&(n[3]||n[4]);return r&&C(r)}var M=/(^|;)\s*color:/;n.plainText=function(t,e){for(var n=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,r=void 0!==e.allowedTags?e.allowedTags:["br"],i="...".length,a=t.split(m),o=[],s="",u=0,l=0;l<a.length;l++){var c=a[l],f=c.match(y),d=f&&f[2].toLowerCase();if(d)-1!==r.indexOf(d)&&(o.push(c),s=d);else{var h=c.length;if(u+h<n)o.push(c),u+=h;else if(u<n){var p=n-u;s&&("br"!==s||p<=i||h<=i)&&o.pop(),n>i?o.push(c.substr(0,p-i)+"..."):o.push(c.substr(0,p));break}s=""}}return o.join("")};var T={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function C(t){return t.replace(S,function(t,e){return("#"===e.charAt(0)?function(t){if(!(t>1114111)){var e=String.fromCodePoint;if(e)return e(t);var n=String.fromCharCode;return t<=65535?n(t):n(55232+(t>>10),t%1024+56320)}}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):T[e])||t})}function E(t,e,n){var r,i,a,o=n.horizontalAlign,s=n.verticalAlign||"top",u=t.node().getBoundingClientRect(),l=e.node().getBoundingClientRect();return i="bottom"===s?function(){return u.bottom-r.height}:"middle"===s?function(){return u.top+(u.height-r.height)/2}:function(){return u.top},a="right"===o?function(){return u.right-r.width}:"center"===o?function(){return u.left+(u.width-r.width)/2}:function(){return u.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:i()-l.top+"px",left:a()-l.left+"px","z-index":1e3}),this}}n.convertEntities=C,n.lineCount=function(t){return t.selectAll("tspan.line").size()||1},n.positionText=function(t,e,n){return t.each(function(){var t=r.select(this);function i(e,n){return void 0===n?null===(n=t.attr(e))&&(t.attr(e,0),n=0):t.attr(e,n),n}var a=i("x",e),o=i("y",n);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:a,y:o})})},n.makeEditable=function(t,e){var n=e.gd,i=e.delegate,a=r.dispatch("edit","input","cancel"),o=i||t;if(t.style({"pointer-events":i?"none":"all"}),1!==t.size())throw new Error("boo");function s(){!function(){var i=r.select(n).select(".svg-container"),o=i.append("div"),s=t.node().style,l=parseFloat(s.fontSize||12),c=e.text;void 0===c&&(c=t.attr("data-unformatted")),o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":l,color:e.fill||s.fill||"black",opacity:1,"background-color":e.background||"transparent",outline:"#ffffff33 1px solid",margin:[-l/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(c).call(E(t,i,e)).on("blur",function(){n._editing=!1,t.text(this.textContent).style({opacity:1});var e,i=r.select(this).attr("class");(e=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(t.node().parentNode).select(e).style({opacity:0});var o=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),a.edit.call(t,o)}).on("focus",function(){var t=this;n._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===t)return!1;document.activeElement===o.node()&&o.node().blur()})}).on("keyup",function(){27===r.event.which?(n._editing=!1,t.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),a.cancel.call(t,this.textContent)):(a.input.call(t,this.textContent),r.select(this).call(E(t,i,e)))}).on("keydown",function(){13===r.event.which&&this.blur()}).call(u)}(),t.style({opacity:0});var i,s=o.attr("class");(i=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(t.node().parentNode).select(i).style({opacity:0})}function u(t){var e=t.node(),n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),e.focus()}return e.immediate?s():o.on("click",s),r.rebind(t,a,"on")}},{"../constants/alignment":137,"../constants/xmlns_namespaces":141,"../lib":160,d3:7}],182:[function(t,e,n){"use strict";var r={};function i(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}n.throttle=function(t,e,n){var a=r[t],o=Date.now();if(!a){for(var s in r)r[s].ts<o-6e4&&delete r[s];a=r[t]={ts:0,timer:null}}function u(){n(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}i(a),o>a.ts+e?u():a.timer=setTimeout(function(){u(),a.timer=null},e)},n.done=function(t){var e=r[t];return e&&e.timer?new Promise(function(t){var n=e.onDone;e.onDone=function(){n&&n(),t(),e.onDone=null}}):Promise.resolve()},n.clear=function(t){if(t)i(r[t]),delete r[t];else for(var e in r)n.clear(e)}},{}],183:[function(t,e,n){"use strict";var r=t("fast-isnumeric");e.exports=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(e[0],e[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),n}},{"fast-isnumeric":9}],184:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],185:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],186:[function(t,e,n){"use strict";var r=t("../registry");e.exports=function(t){for(var e,n,i=r.layoutArrayContainers,a=r.layoutArrayRegexes,o=t.split("[")[0],s=0;s<a.length;s++)if((n=t.match(a[s]))&&0===n.index){e=n[0];break}if(e||(e=i[i.indexOf(o)]),!e)return!1;var u=t.substr(e.length);return u?!!(n=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(n[1]),property:n[3]||""}:{array:e,index:"",property:""}}},{"../registry":243}],187:[function(t,e,n){"use strict";var r=t("../lib"),i=r.extendFlat,a=r.isPlainObject,o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},s={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},u=o.flags.slice().concat(["fullReplot"]),l=s.flags.slice().concat("layoutReplot");function c(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!1;return e}function f(t,e,n){var r=i({},t);for(var o in r){var s=r[o];a(s)&&(r[o]=d(s,e,0,o))}return"from-root"===n&&(r.editType=e),r}function d(t,e,n,r){if(t.valType){var a=i({},t);if(a.editType=e,Array.isArray(t.items)){a.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)a.items[o]=d(t.items[o],e)}return a}return f(t,e,"_"===r.charAt(0)?"nested":"from-root")}e.exports={traces:o,layout:s,traceFlags:function(){return c(u)},layoutFlags:function(){return c(l)},update:function(t,e){var n=e.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)t[r[i]]=!0},overrideAll:f}},{"../lib":160}],188:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("gl-mat4/fromQuat"),a=t("../registry"),o=t("../lib"),s=t("../plots/plots"),u=t("../plots/cartesian/axis_ids"),l=t("../components/color"),c=u.cleanId,f=u.getFromTrace,d=a.traceIs;function h(t,e){var n=t[e],r=e.charAt(0);n&&"paper"!==n&&(t[e]=c(n,r))}function p(t){function e(e,n){var r=t[e],i=t.title&&t.title[n];r&&!i&&(t.title||(t.title={}),t.title[n]=t[e],delete t[e])}t&&("string"!==typeof t.title&&"number"!==typeof t.title||(t.title={text:t.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function v(t){if(!o.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"===typeof e||"number"===typeof e)&&String(e)}function g(t,e,n,r){if(n&&!r)return t;if(r&&!n)return e;if(!t.trim())return e;if(!e.trim())return t;var i,a=Math.min(t.length,e.length);for(i=0;i<a&&t.charAt(i)===e.charAt(i);i++);var o=t.substr(0,i);return o.trim()}function m(t){var e="middle",n="center";return"string"===typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?n="left":-1!==t.indexOf("right")&&(n="right")),e+" "+n}function y(t,e){return e in t&&"object"===typeof t[e]&&0===Object.keys(t[e]).length}n.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&o.log("Clearing previous rejected promises from queue."),t._promises=[]},n.cleanLayout=function(t){var e,r;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var a=(s.subplotsRegistry.cartesian||{}).attrRegex,u=(s.subplotsRegistry.polar||{}).attrRegex,f=(s.subplotsRegistry.ternary||{}).attrRegex,d=(s.subplotsRegistry.gl3d||{}).attrRegex,v=Object.keys(t);for(e=0;e<v.length;e++){var g=v[e];if(a&&a.test(g)){var m=t[g];m.anchor&&"free"!==m.anchor&&(m.anchor=c(m.anchor)),m.overlaying&&(m.overlaying=c(m.overlaying)),m.type||(m.isdate?m.type="date":m.islog?m.type="log":!1===m.isdate&&!1===m.islog&&(m.type="linear")),"withzero"!==m.autorange&&"tozero"!==m.autorange||(m.autorange=!0,m.rangemode="tozero"),delete m.islog,delete m.isdate,delete m.categories,y(m,"domain")&&delete m.domain,void 0!==m.autotick&&(void 0===m.tickmode&&(m.tickmode=m.autotick?"auto":"linear"),delete m.autotick),p(m)}else if(u&&u.test(g)){var b=t[g];p(b.radialaxis)}else if(f&&f.test(g)){var _=t[g];p(_.aaxis),p(_.baxis),p(_.caxis)}else if(d&&d.test(g)){var x=t[g],w=x.cameraposition;if(Array.isArray(w)&&4===w[0].length){var A=w[0],k=w[1],M=w[2],T=i([],A),S=[];for(r=0;r<3;++r)S[r]=k[r]+M*T[2+4*r];x.camera={eye:{x:S[0],y:S[1],z:S[2]},center:{x:k[0],y:k[1],z:k[2]},up:{x:0,y:0,z:1}},delete x.cameraposition}p(x.xaxis),p(x.yaxis),p(x.zaxis)}}var C=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<C;e++){var E=t.annotations[e];o.isPlainObject(E)&&(E.ref&&("paper"===E.ref?(E.xref="paper",E.yref="paper"):"data"===E.ref&&(E.xref="x",E.yref="y"),delete E.ref),h(E,"xref"),h(E,"yref"))}var O=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<O;e++){var P=t.shapes[e];o.isPlainObject(P)&&(h(P,"xref"),h(P,"yref"))}var L=t.legend;return L&&(L.x>3?(L.x=1.02,L.xanchor="left"):L.x<-2&&(L.x=-.02,L.xanchor="right"),L.y>3?(L.y=1.02,L.yanchor="bottom"):L.y<-2&&(L.y=-.02,L.yanchor="top")),p(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),l.clean(t),t.template&&t.template.layout&&n.cleanLayout(t.template.layout),t},n.cleanData=function(t){for(var e=0;e<t.length;e++){var r,i=t[e];if("histogramy"===i.type&&"xbins"in i&&!("ybins"in i)&&(i.ybins=i.xbins,delete i.xbins),i.error_y&&"opacity"in i.error_y){var u=l.defaults,f=i.error_y.color||(d(i,"bar")?l.defaultLine:u[e%u.length]);i.error_y.color=l.addOpacity(l.rgb(f),l.opacity(f)*i.error_y.opacity),delete i.error_y.opacity}if("bardir"in i&&("h"!==i.bardir||!d(i,"bar")&&"histogram"!==i.type.substr(0,9)||(i.orientation="h",n.swapXYData(i)),delete i.bardir),"histogramy"===i.type&&n.swapXYData(i),"histogramx"!==i.type&&"histogramy"!==i.type||(i.type="histogram"),"scl"in i&&!("colorscale"in i)&&(i.colorscale=i.scl,delete i.scl),"reversescl"in i&&!("reversescale"in i)&&(i.reversescale=i.reversescl,delete i.reversescl),i.xaxis&&(i.xaxis=c(i.xaxis,"x")),i.yaxis&&(i.yaxis=c(i.yaxis,"y")),d(i,"gl3d")&&i.scene&&(i.scene=s.subplotsRegistry.gl3d.cleanId(i.scene)),!d(i,"pie-like")&&!d(i,"bar-like"))if(Array.isArray(i.textposition))for(r=0;r<i.textposition.length;r++)i.textposition[r]=m(i.textposition[r]);else i.textposition&&(i.textposition=m(i.textposition));var h=a.getModule(i);if(h&&h.colorbar){var b=h.colorbar.container,_=b?i[b]:i;_&&_.colorscale&&("YIGnBu"===_.colorscale&&(_.colorscale="YlGnBu"),"YIOrRd"===_.colorscale&&(_.colorscale="YlOrRd"))}if("surface"===i.type&&o.isPlainObject(i.contours)){var x=["x","y","z"];for(r=0;r<x.length;r++){var w=i.contours[x[r]];o.isPlainObject(w)&&(w.highlightColor&&(w.highlightcolor=w.highlightColor,delete w.highlightColor),w.highlightWidth&&(w.highlightwidth=w.highlightWidth,delete w.highlightWidth))}}if("candlestick"===i.type||"ohlc"===i.type){var A=!1!==(i.increasing||{}).showlegend,k=!1!==(i.decreasing||{}).showlegend,M=v(i.increasing),T=v(i.decreasing);if(!1!==M&&!1!==T){var S=g(M,T,A,k);S&&(i.name=S)}else!M&&!T||i.name||(i.name=M||T)}if(Array.isArray(i.transforms)){var C=i.transforms;for(r=0;r<C.length;r++){var E=C[r];if(o.isPlainObject(E))switch(E.type){case"filter":E.filtersrc&&(E.target=E.filtersrc,delete E.filtersrc),E.calendar&&(E.valuecalendar||(E.valuecalendar=E.calendar),delete E.calendar);break;case"groupby":if(E.styles=E.styles||E.style,E.styles&&!Array.isArray(E.styles)){var O=E.styles,P=Object.keys(O);E.styles=[];for(var L=0;L<P.length;L++)E.styles.push({target:P[L],value:O[P[L]]})}}}}y(i,"line")&&delete i.line,"marker"in i&&(y(i.marker,"line")&&delete i.marker.line,y(i,"marker")&&delete i.marker),l.clean(i),i.autobinx&&(delete i.autobinx,delete i.xbins),i.autobiny&&(delete i.autobiny,delete i.ybins),p(i),i.colorbar&&p(i.colorbar),i.marker&&i.marker.colorbar&&p(i.marker.colorbar),i.line&&i.line.colorbar&&p(i.line.colorbar),i.aaxis&&p(i.aaxis),i.baxis&&p(i.baxis)}},n.swapXYData=function(t){var e;if(o.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var n=t.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);o.swapAttrs(t,["error_?.copy_ystyle"]),r&&o.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof t.hoverinfo){var i=t.hoverinfo.split("+");for(e=0;e<i.length;e++)"x"===i[e]?i[e]="y":"y"===i[e]&&(i[e]="x");t.hoverinfo=i.join("+")}},n.coerceTraceIndices=function(t,e){if(r(e))return[e];if(!Array.isArray(e)||!e.length)return t.data.map(function(t,e){return e});if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++)o.isIndex(e[i],t.data.length)?n.push(e[i]):o.warn("trace index (",e[i],") is not a number or is out of bounds");return n}return e},n.manageArrayContainers=function(t,e,n){var i=t.obj,a=t.parts,s=a.length,u=a[s-1],l=r(u);if(l&&null===e){var c=a.slice(0,s-1).join("."),f=o.nestedProperty(i,c).get();f.splice(u,1)}else l&&void 0===t.get()?(void 0===t.get()&&(n[t.astr]=null),t.set(e)):t.set(e)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function _(t){var e=t.search(b);if(e>0)return t.substr(0,e)}n.hasParent=function(t,e){for(var n=_(e);n;){if(n in t)return!0;n=_(n)}return!1};var x=["x","y","z"];n.clearAxisTypes=function(t,e,n){for(var r=0;r<e.length;r++)for(var i=t._fullData[r],a=0;a<3;a++){var s=f(t,i,x[a]);if(s&&"log"!==s.type){var u=s._name,l=s._id.substr(1);if("scene"===l.substr(0,5)){if(void 0!==n[l])continue;u=l+"."+u}var c=u+".type";void 0===n[u]&&void 0===n[c]&&o.nestedProperty(t.layout,c).set(null)}}}},{"../components/color":42,"../lib":160,"../plots/cartesian/axis_ids":207,"../plots/plots":236,"../registry":243,"fast-isnumeric":9,"gl-mat4/fromQuat":10}],189:[function(t,e,n){"use strict";var r=t("./plot_api");n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=t("./to_image"),n.validate=t("./validate"),n.downloadImage=t("../snapshot/download");var i=t("./template_api");n.makeTemplate=i.makeTemplate,n.validateTemplate=i.validateTemplate},{"../snapshot/download":245,"./plot_api":191,"./template_api":196,"./to_image":197,"./validate":198}],190:[function(t,e,n){"use strict";var r=t("../lib/is_plain_object"),i=t("../lib/noop"),a=t("../lib/loggers"),o=t("../lib/search").sorterAsc,s=t("../registry");n.containerArrayMatch=t("./container_array_match");var u=n.isAddVal=function(t){return"add"===t||r(t)},l=n.isRemoveVal=function(t){return null===t||"remove"===t};n.applyContainerArrayChanges=function(t,e,n,r,c){var f=e.astr,d=s.getComponentMethod(f,"supplyLayoutDefaults"),h=s.getComponentMethod(f,"draw"),p=s.getComponentMethod(f,"drawOne"),v=r.replot||r.recalc||d===i||h===i,g=t.layout,m=t._fullLayout;if(n[""]){Object.keys(n).length>1&&a.warn("Full array edits are incompatible with other edits",f);var y=n[""][""];if(l(y))e.set(null);else{if(!Array.isArray(y))return a.warn("Unrecognized full array edit value",f,y),!0;e.set(y)}return!v&&(d(g,m),h(t),!0)}var b,_,x,w,A,k,M,T,S=Object.keys(n).map(Number).sort(o),C=e.get(),E=C||[],O=c(m,f).get(),P=[],L=-1,R=E.length;for(b=0;b<S.length;b++)if(x=S[b],w=n[x],A=Object.keys(w),k=w[""],M=u(k),x<0||x>E.length-(M?0:1))a.warn("index out of range",f,x);else if(void 0!==k)A.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",f,x),l(k)?P.push(x):M?("add"===k&&(k={}),E.splice(x,0,k),O&&O.splice(x,0,{})):a.warn("Unrecognized full object edit value",f,x,k),-1===L&&(L=x);else for(_=0;_<A.length;_++)T=f+"["+x+"].",c(E[x],A[_],T).set(w[A[_]]);for(b=P.length-1;b>=0;b--)E.splice(P[b],1),O&&O.splice(P[b],1);if(E.length?C||e.set(E):e.set(null),v)return!1;if(d(g,m),p!==i){var D;if(-1===L)D=S;else{for(R=Math.max(E.length,R),D=[],b=0;b<S.length&&!((x=S[b])>=L);b++)D.push(x);for(b=L;b<R;b++)D.push(b)}for(b=0;b<D.length;b++)p(t,D[b])}else h(t);return!0}},{"../lib/is_plain_object":161,"../lib/loggers":164,"../lib/noop":169,"../lib/search":178,"../registry":243,"./container_array_match":186}],191:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("has-hover"),o=t("../lib"),s=o.nestedProperty,u=t("../lib/events"),l=t("../lib/queue"),c=t("../registry"),f=t("./plot_schema"),d=t("../plots/plots"),h=t("../plots/polar/legacy"),p=t("../plots/cartesian/axes"),v=t("../components/drawing"),g=t("../components/color"),m=t("../plots/cartesian/graph_interact").initInteractions,y=t("../constants/xmlns_namespaces"),b=t("../lib/svg_text_utils"),_=t("../plots/cartesian/select").clearSelect,x=t("./plot_config").dfltConfig,w=t("./manage_arrays"),A=t("./helpers"),k=t("./subroutines"),M=t("./edit_types"),T=t("../plots/cartesian/constants").AX_NAME_PATTERN,S=0,C=5;function E(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function O(t,e){try{t._fullLayout._paper.style("background",e)}catch(n){o.error(n)}}function P(t,e){var n=g.combine(e,"white");O(t,n)}function L(t,e){if(!t._context){t._context=o.extendDeep({},x);var n=r.select("base");t._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:""}var i,s,u,l=t._context;if(e){for(s=Object.keys(e),i=0;i<s.length;i++)"editable"!==(u=s[i])&&"edits"!==u&&u in l&&("setBackground"===u&&"opaque"===e[u]?l[u]=P:l[u]=e[u]);e.plot3dPixelRatio&&!l.plotGlPixelRatio&&(l.plotGlPixelRatio=l.plot3dPixelRatio);var c=e.editable;if(void 0!==c)for(l.editable=c,s=Object.keys(l.edits),i=0;i<s.length;i++)l.edits[s[i]]=c;if(e.edits)for(s=Object.keys(e.edits),i=0;i<s.length;i++)(u=s[i])in l.edits&&(l.edits[u]=e.edits[u]);l._exportedPlot=e._exportedPlot}l.staticPlot&&(l.editable=!1,l.edits={},l.autosizable=!1,l.scrollZoom=!1,l.doubleClick=!1,l.showTips=!1,l.showLink=!1,l.displayModeBar=!1),"hover"!==l.displayModeBar||a||(l.displayModeBar=!0),"transparent"!==l.setBackground&&"function"===typeof l.setBackground||(l.setBackground=O),l._hasZeroHeight=l._hasZeroHeight||0===t.clientHeight,l._hasZeroWidth=l._hasZeroWidth||0===t.clientWidth;var f=l.scrollZoom,d=l._scrollZoom={};if(!0===f)d.cartesian=1,d.gl3d=1,d.geo=1,d.mapbox=1;else if("string"===typeof f){var h=f.split("+");for(i=0;i<h.length;i++)d[h[i]]=1}else!1!==f&&(d.gl3d=1,d.geo=1,d.mapbox=1)}function R(t,e){var n,r,i=e+1,a=[];for(n=0;n<t.length;n++)(r=t[n])<0?a.push(i+r):a.push(r);return a}function D(t,e,n){var r,i;for(r=0;r<e.length;r++){if((i=e[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=t.data.length||i<-t.data.length)throw new Error(n+" must be valid indices for gd.data.");if(e.indexOf(i,r+1)>-1||i>=0&&e.indexOf(-t.data.length+i)>-1||i<0&&e.indexOf(t.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function F(t,e,n){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if("undefined"===typeof e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),D(t,e,"currentIndices"),"undefined"===typeof n||Array.isArray(n)||(n=[n]),"undefined"!==typeof n&&D(t,n,"newIndices"),"undefined"!==typeof n&&e.length!==n.length)throw new Error("current and new indices must be of equal length.")}function j(t,e,n,r,a){!function(t,e,n,r){var i=o.isPlainObject(r);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!o.isPlainObject(e))throw new Error("update must be a key:value object");if("undefined"===typeof n)throw new Error("indices must be an integer or array of integers");for(var a in D(t,n,"indices"),e){if(!Array.isArray(e[a])||e[a].length!==n.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in r)||!Array.isArray(r[a])||r[a].length!==e[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,n,r);for(var u=function(t,e,n,r){var a,u,l,c,f,d=o.isPlainObject(r),h=[];for(var p in Array.isArray(n)||(n=[n]),n=R(n,t.data.length-1),e)for(var v=0;v<n.length;v++){if(a=t.data[n[v]],l=s(a,p),u=l.get(),c=e[p][v],!o.isArrayOrTypedArray(c))throw new Error("attribute: "+p+" index: "+v+" must be an array");if(!o.isArrayOrTypedArray(u))throw new Error("cannot extend missing or non-array attribute: "+p);if(u.constructor!==c.constructor)throw new Error("cannot extend array with an array of a different type: "+p);f=d?r[p][v]:r,i(f)||(f=-1),h.push({prop:l,target:u,insert:c,maxp:Math.floor(f)})}return h}(t,e,n,r),l={},c={},f=0;f<u.length;f++){var d=u[f].prop,h=u[f].maxp,p=a(u[f].target,u[f].insert,h);d.set(p[0]),Array.isArray(l[d.astr])||(l[d.astr]=[]),l[d.astr].push(p[1]),Array.isArray(c[d.astr])||(c[d.astr]=[]),c[d.astr].push(u[f].target.length)}return{update:l,maxPoints:c}}function N(t,e){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}function z(t,e,r,i){t=o.getGraphDiv(t),A.clearPromiseQueue(t);var a={};if("string"===typeof e)a[e]=r;else{if(!o.isPlainObject(e))return o.warn("Restyle fail.",e,r,i),Promise.reject();a=o.extendFlat({},e),void 0===i&&(i=r)}Object.keys(a).length&&(t.changed=!0);var s=A.coerceTraceIndices(t,i),u=U(t,a,s),c=u.flags;c.calc&&(t.calcdata=void 0),c.clearAxisTypes&&A.clearAxisTypes(t,s,{});var f=[];c.fullReplot?f.push(n.plot):(f.push(d.previousPromises),d.supplyDefaults(t),c.markerSize&&(d.doCalcdata(t),V(f)),c.style&&f.push(k.doTraceStyle),c.colorbars&&f.push(k.doColorBars),f.push(E)),f.push(d.rehover,d.redrag),l.add(t,z,[t,u.undoit,u.traces],z,[t,u.redoit,u.traces]);var h=o.syncOrAsync(f,t);return h&&h.then||(h=Promise.resolve()),h.then(function(){return t.emit("plotly_restyle",u.eventData),t})}function I(t){return void 0===t?null:t}function B(t,e){return e?function(e,n,r){var i=s(e,n),a=i.set;return i.set=function(e){var o=(r||"")+n;q(o,i.get(),e,t),a(e)},i}:s}function q(t,e,n,r){if(Array.isArray(e)||Array.isArray(n))for(var i=Array.isArray(e)?e:[],a=Array.isArray(n)?n:[],s=Math.max(i.length,a.length),u=0;u<s;u++)q(t+"["+u+"]",i[u],a[u],r);else if(o.isPlainObject(e)||o.isPlainObject(n)){var l=o.isPlainObject(e)?e:{},c=o.isPlainObject(n)?n:{},f=o.extendFlat({},l,c);for(var d in f)q(t+"."+d,l[d],c[d],r)}else void 0===r[t]&&(r[t]=I(e))}function U(t,e,n){var r,i=t._fullLayout,a=t._fullData,u=t.data,l=i._guiEditing,h=B(i._preGUI,l),v=o.extendDeepAll({},e);H(e);var g,m=M.traceFlags(),y={},b={};function _(){return n.map(function(){})}function x(t){var e=p.id2name(t);-1===g.indexOf(e)&&g.push(e)}function w(t){return"LAYOUT"+t+".autorange"}function k(t){return"LAYOUT"+t+".range"}function T(t){for(var e=t;e<a.length;e++)if(a[e]._input===u[t])return a[e]}function S(r,a,o){if(Array.isArray(r))r.forEach(function(t){S(t,a,o)});else if(!(r in e||A.hasParent(e,r))){var s;if("LAYOUT"===r.substr(0,6))s=h(t.layout,r.replace("LAYOUT",""));else{var c=n[o],f=i._tracePreGUI[T(c)._fullInput.uid];s=B(f,l)(u[c],r)}r in b||(b[r]=_()),void 0===b[r][o]&&(b[r][o]=I(s.get())),void 0!==a&&s.set(a)}}function C(t){return function(e){return a[e][t]}}function E(t){return function(e,r){return!1===e?a[n[r]][t]:null}}for(var O in e){if(A.hasParent(e,O))throw new Error("cannot set "+O+" and a parent attribute simultaneously");var P,L,R,D,F,j,N=e[O];if("autobinx"!==O&&"autobiny"!==O||(O=O.charAt(O.length-1)+"bins",N=Array.isArray(N)?N.map(E(O)):!1===N?n.map(C(O)):null),y[O]=N,"LAYOUT"!==O.substr(0,6)){for(b[O]=_(),r=0;r<n.length;r++){P=u[n[r]],L=T(n[r]);var z=i._tracePreGUI[L._fullInput.uid];if(R=B(z,l)(P,O),D=R.get(),void 0!==(F=Array.isArray(N)?N[r%N.length]:N)){var q=R.parts[R.parts.length-1],U=O.substr(0,O.length-q.length-1),W=U?U+".":"",G=U?s(L,U).get():L;if((j=f.getTraceValObject(L,R.parts))&&j.impliedEdits&&null!==F)for(var V in j.impliedEdits)S(o.relativeAttr(O,V),j.impliedEdits[V],r);else if("thicknessmode"!==q&&"lenmode"!==q||D===F||"fraction"!==F&&"pixels"!==F||!G){if("type"===O&&("pie"===F!==("pie"===D)||"funnelarea"===F!==("funnelarea"===D))){var Y="x",Z="y";"bar"!==F&&"bar"!==D||"h"!==P.orientation||(Y="y",Z="x"),o.swapAttrs(P,["?","?src"],"labels",Y),o.swapAttrs(P,["d?","?0"],"label",Y),o.swapAttrs(P,["?","?src"],"values",Z),"pie"===D||"funnelarea"===D?(s(P,"marker.color").set(s(P,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):c.traceIs(P,"cartesian")&&s(P,"marker.colors").set(s(P,"marker.color").get())}}else{var X=i._size,$=G.orient,J="top"===$||"bottom"===$;if("thicknessmode"===q){var K=J?X.h:X.w;S(W+"thickness",G.thickness*("fraction"===F?1/K:K),r)}else{var Q=J?X.w:X.h;S(W+"len",G.len*("fraction"===F?1/Q:Q),r)}}if(b[O][r]=I(D),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(O)){if("orientation"===O){R.set(F);var tt=P.x&&!P.y?"h":"v";if((R.get()||tt)===L.orientation)continue}else"orientationaxes"===O&&(P.orientation={v:"h",h:"v"}[L.orientation]);A.swapXYData(P),m.calc=m.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(R.parts[0])?(A.manageArrayContainers(R,F,b),m.calc=!0):(j?j.arrayOk&&!c.traceIs(L,"regl")&&(o.isArrayOrTypedArray(F)||o.isArrayOrTypedArray(D))?m.calc=!0:M.update(m,j):m.calc=!0,R.set(F))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(O)&&p.swap(t,n),"orientationaxes"===O){var et=s(t.layout,"hovermode");"x"===et.get()?et.set("y"):"y"===et.get()&&et.set("x")}if(-1!==["orientation","type"].indexOf(O)){for(g=[],r=0;r<n.length;r++){var nt=u[n[r]];c.traceIs(nt,"cartesian")&&(x(nt.xaxis||"x"),x(nt.yaxis||"y"))}S(g.map(w),!0,0),S(g.map(k),[0,1],0)}}else R=h(t.layout,O.replace("LAYOUT","")),b[O]=[I(R.get())],R.set(Array.isArray(N)?N[0]:N),m.calc=!0}return(m.calc||m.plot)&&(m.fullReplot=!0),{flags:m,undoit:b,redoit:y,traces:n,eventData:o.extendDeepNoArrays([],[v,n])}}function H(t){var e,n,r,i=o.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,s=Object.keys(t);for(e=0;e<s.length;e++)n=s[e],r=t[n],"title"!==n&&!i.test(n)&&!a.test(n)||"string"!==typeof r&&"number"!==typeof r?n.indexOf("titlefont")>-1?u(n,n.replace("titlefont","title.font")):n.indexOf("titleposition")>-1?u(n,n.replace("titleposition","title.position")):n.indexOf("titleside")>-1?u(n,n.replace("titleside","title.side")):n.indexOf("titleoffset")>-1&&u(n,n.replace("titleoffset","title.offset")):u(n,n.replace("title","title.text"));function u(e,n){t[n]=t[e],delete t[e]}}function W(t,e,n){if(t=o.getGraphDiv(t),A.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var r={};if("string"===typeof e)r[e]=n;else{if(!o.isPlainObject(e))return o.warn("Relayout fail.",e,n),Promise.reject();r=o.extendFlat({},e)}Object.keys(r).length&&(t.changed=!0);var i=$(t,r),a=i.flags;a.calc&&(t.calcdata=void 0);var s=[d.previousPromises];a.layoutReplot?s.push(k.layoutReplot):Object.keys(r).length&&(G(t,a,i)||d.supplyDefaults(t),a.legend&&s.push(k.doLegend),a.layoutstyle&&s.push(k.layoutStyles),a.axrange&&V(s,i.rangesAltered),a.ticks&&s.push(k.doTicksRelayout),a.modebar&&s.push(k.doModeBar),a.camera&&s.push(k.doCamera),a.colorbars&&s.push(k.doColorBars),s.push(E)),s.push(d.rehover,d.redrag),l.add(t,W,[t,i.undoit],W,[t,i.redoit]);var u=o.syncOrAsync(s,t);return u&&u.then||(u=Promise.resolve(t)),u.then(function(){return t.emit("plotly_relayout",i.eventData),t})}function G(t,e,n){var r=t._fullLayout;if(!e.axrange)return!1;for(var i in e)if("axrange"!==i&&e[i])return!1;for(var a in n.rangesAltered){var o=p.id2name(a),s=t.layout[o],u=r[o];if(u.autorange=s.autorange,u.range=s.range.slice(),u.cleanRange(),u._matchGroup)for(var l in u._matchGroup)if(l!==a){var c=r[p.id2name(l)];c.autorange=u.autorange,c.range=u.range.slice(),c._input.range=u.range.slice()}}return!0}function V(t,e){var n=e?function(t){var n=[],r=!0;for(var i in e){var a=p.getFromId(t,i);if(n.push(i),a._matchGroup)for(var o in a._matchGroup)e[o]||n.push(o);a.automargin&&(r=!1)}return p.draw(t,n,{skipTitle:r})}:function(t){return p.draw(t,"redraw")};t.push(_,k.doAutoRangeAndConstraints,n,k.drawData,k.finalDraw)}var Y=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Z=/^[xyz]axis[0-9]*\.autorange$/,X=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function $(t,e){var n,r,i,a=t.layout,u=t._fullLayout,l=u._guiEditing,d=B(u._preGUI,l),h=Object.keys(e),v=p.list(t),g=o.extendDeepAll({},e),m={};for(H(e),h=Object.keys(e),r=0;r<h.length;r++)if(0===h[r].indexOf("allaxes")){for(i=0;i<v.length;i++){var y=v[i]._id.substr(1),b=-1!==y.indexOf("scene")?y+".":"",_=h[r].replace("allaxes",b+v[i]._name);e[_]||(e[_]=e[h[r]])}delete e[h[r]]}var x=M.layoutFlags(),k={},S={};function C(t,n){if(Array.isArray(t))t.forEach(function(t){C(t,n)});else if(!(t in e||A.hasParent(e,t))){var r=d(a,t);t in S||(S[t]=I(r.get())),void 0!==n&&r.set(n)}}var E,O={};function P(t){var e=p.name2id(t.split(".")[0]);return O[e]=1,e}for(var L in e){if(A.hasParent(e,L))throw new Error("cannot set "+L+" and a parent attribute simultaneously");for(var R=d(a,L),D=e[L],F=R.parts.length,j=F-1;j>0&&"string"!==typeof R.parts[j];)j--;var N=R.parts[j],z=R.parts[j-1]+"."+N,q=R.parts.slice(0,j).join("."),U=s(t.layout,q).get(),W=s(u,q).get(),G=R.get();if(void 0!==D){k[L]=D,S[L]="reverse"===N?D:I(G);var V=f.getLayoutValObject(u,R.parts);if(V&&V.impliedEdits&&null!==D)for(var $ in V.impliedEdits)C(o.relativeAttr(L,$),V.impliedEdits[$]);if(-1!==["width","height"].indexOf(L))if(D){C("autosize",null);var K="height"===L?"width":"height";C(K,u[K])}else u[L]=t._initialAutoSize[L];else if("autosize"===L)C("width",D?null:u.width),C("height",D?null:u.height);else if(z.match(Y))P(z),s(u,q+"._inputRange").set(null);else if(z.match(Z)){P(z),s(u,q+"._inputRange").set(null);var Q=s(u,q).get();Q._inputDomain&&(Q._input.domain=Q._inputDomain.slice())}else z.match(X)&&s(u,q+"._inputDomain").set(null);if("type"===N){var tt=U,et="linear"===W.type&&"log"===D,nt="log"===W.type&&"linear"===D;if(et||nt){if(tt&&tt.range)if(W.autorange)et&&(tt.range=tt.range[1]>tt.range[0]?[1,2]:[2,1]);else{var rt=tt.range[0],it=tt.range[1];et?(rt<=0&&it<=0&&C(q+".autorange",!0),rt<=0?rt=it/1e6:it<=0&&(it=rt/1e6),C(q+".range[0]",Math.log(rt)/Math.LN10),C(q+".range[1]",Math.log(it)/Math.LN10)):(C(q+".range[0]",Math.pow(10,rt)),C(q+".range[1]",Math.pow(10,it)))}else C(q+".autorange",!0);Array.isArray(u._subplots.polar)&&u._subplots.polar.length&&u[R.parts[0]]&&"radialaxis"===R.parts[1]&&delete u[R.parts[0]]._subplot.viewInitial["radialaxis.range"],c.getComponentMethod("annotations","convertCoords")(t,W,D,C),c.getComponentMethod("images","convertCoords")(t,W,D,C)}else C(q+".autorange",!0),C(q+".range",null);s(u,q+"._inputRange").set(null)}else if(N.match(T)){var at=s(u,L).get(),ot=(D||{}).type;ot&&"-"!==ot||(ot="linear"),c.getComponentMethod("annotations","convertCoords")(t,at,ot,C),c.getComponentMethod("images","convertCoords")(t,at,ot,C)}var st=w.containerArrayMatch(L);if(st){n=st.array,r=st.index;var ut=st.property,lt=V||{editType:"calc"};""!==r&&""===ut&&(w.isAddVal(D)?S[L]=null:w.isRemoveVal(D)?S[L]=(s(a,n).get()||[])[r]:o.warn("unrecognized full object value",e)),M.update(x,lt),m[n]||(m[n]={});var ct=m[n][r];ct||(ct=m[n][r]={}),ct[ut]=D,delete e[L]}else"reverse"===N?(U.range?U.range.reverse():(C(q+".autorange",!0),U.range=[1,0]),W.autorange?x.calc=!0:x.plot=!0):(u._has("scatter-like")&&u._has("regl")&&"dragmode"===L&&("lasso"===D||"select"===D)&&"lasso"!==G&&"select"!==G?x.plot=!0:u._has("gl2d")?x.plot=!0:V?M.update(x,V):x.calc=!0,R.set(D))}}for(n in m){var ft=w.applyContainerArrayChanges(t,d(a,n),m[n],x,d);ft||(x.plot=!0)}var dt=u._axisConstraintGroups||[];for(E in O)for(r=0;r<dt.length;r++){var ht=dt[r];if(ht[E])for(var pt in x.calc=!0,ht)O[pt]||(p.getFromId(t,pt)._constraintShrinkable=!0)}return(J(t)||e.height||e.width)&&(x.plot=!0),(x.plot||x.calc)&&(x.layoutReplot=!0),{flags:x,rangesAltered:O,undoit:S,redoit:k,eventData:g}}function J(t){var e=t._fullLayout,n=e.width,r=e.height;return t.layout.autosize&&d.plotAutoSize(t,t.layout,e),e.width!==n||e.height!==r}function K(t,e,r,i){if(t=o.getGraphDiv(t),A.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);o.isPlainObject(e)||(e={}),o.isPlainObject(r)||(r={}),Object.keys(e).length&&(t.changed=!0),Object.keys(r).length&&(t.changed=!0);var a=A.coerceTraceIndices(t,i),s=U(t,o.extendFlat({},e),a),u=s.flags,c=$(t,o.extendFlat({},r)),f=c.flags;(u.calc||f.calc)&&(t.calcdata=void 0),u.clearAxisTypes&&A.clearAxisTypes(t,a,r);var h=[];f.layoutReplot?h.push(k.layoutReplot):u.fullReplot?h.push(n.plot):(h.push(d.previousPromises),G(t,f,c)||d.supplyDefaults(t),u.style&&h.push(k.doTraceStyle),(u.colorbars||f.colorbars)&&h.push(k.doColorBars),f.legend&&h.push(k.doLegend),f.layoutstyle&&h.push(k.layoutStyles),f.axrange&&V(h,c.rangesAltered),f.ticks&&h.push(k.doTicksRelayout),f.modebar&&h.push(k.doModeBar),f.camera&&h.push(k.doCamera),h.push(E)),h.push(d.rehover,d.redrag),l.add(t,K,[t,s.undoit,c.undoit,s.traces],K,[t,s.redoit,c.redoit,s.traces]);var p=o.syncOrAsync(h,t);return p&&p.then||(p=Promise.resolve(t)),p.then(function(){return t.emit("plotly_update",{data:s.eventData,layout:c.eventData}),t})}function Q(t){return function(e){e._fullLayout._guiEditing=!0;var n=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,n}}var tt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],et=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=t.match(r.pattern);if(i)return{head:i[1],attr:r.attr}}}function rt(t,e){var n=s(e,t).get();if(void 0!==n)return n;var r=t.split(".");for(r.pop();r.length>1;)if(r.pop(),void 0!==(n=s(e,r.join(".")+".uirevision").get()))return n;return e.uirevision}function it(t,e){for(var n=0;n<e.length;n++)if(e[n]._fullInput.uid===t)return n;return-1}function at(t,e,n){for(var r=0;r<e.length;r++)if(e[r].uid===t)return r;return!e[n]||e[n].uid?-1:n}function ot(t,e){var n=o.isPlainObject(t),r=Array.isArray(t);return n||r?(n&&o.isPlainObject(e)||r&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function st(t,e,n,r){var i,a,u,l=r.getValObject,c=r.flags,f=r.immutable,d=r.inArray,h=r.arrayIndex;function p(){var t=i.editType;d&&-1!==t.indexOf("arraydraw")?o.pushUnique(c.arrays[d],h):(M.update(c,i),"none"!==t&&c.nChanges++,r.transition&&i.anim&&c.nChangesAnim++,(Y.test(u)||Z.test(u))&&(c.rangesAltered[n[0]]=1),X.test(u)&&s(e,"_inputDomain").set(null),"datarevision"===a&&(c.newDataRevision=1))}function v(t){return"data_array"===t.valType||t.arrayOk}for(a in t){if(c.calc&&!r.transition)return;var g=t[a],m=e[a],y=n.concat(a);if(u=y.join("."),"_"!==a.charAt(0)&&"function"!==typeof g&&g!==m){if(("tick0"===a||"dtick"===a)&&"geo"!==n[0]){var b=e.tickmode;if("auto"===b||"array"===b||!b)continue}if(("range"!==a||!e.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==e.type)&&(i=l(y))&&(!i._compareAsJSON||JSON.stringify(g)!==JSON.stringify(m))){var _,x=i.valType,w=v(i),A=Array.isArray(g),k=Array.isArray(m);if(A&&k){var T="_input_"+a,S=t[T],C=e[T];if(Array.isArray(S)&&S===C)continue}if(void 0===m)w&&A?c.calc=!0:p();else if(i._isLinkedToArray){var E=[],O=!1;d||(c.arrays[a]=E);var P=Math.min(g.length,m.length),L=Math.max(g.length,m.length);if(P!==L){if("arraydraw"!==i.editType){p();continue}O=!0}for(_=0;_<P;_++)st(g[_],m[_],y.concat(_),o.extendFlat({inArray:a,arrayIndex:_},r));if(O)for(_=P;_<L;_++)E.push(_)}else!x&&o.isPlainObject(g)?st(g,m,y,r):w?A&&k?(f&&(c.calc=!0),(f||r.newDataRevision)&&p()):A!==k?c.calc=!0:p():A&&k&&g.length===m.length&&String(g)===String(m)||p()}}}for(a in e)if(!(a in t||"_"===a.charAt(0)||"function"===typeof e[a])){if(v(i=l(n.concat(a)))&&Array.isArray(e[a]))return void(c.calc=!0);p()}}function ut(t){var e=r.select(t),n=t._fullLayout;if(n._container=e.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var i={};r.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),n._uid=o.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var a=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=a.append("g").classed("imagelayer",!0),n._shapeLowerLayer=a.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}n.animate=function(t,e,n){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var r=t._transitionData;r._frameQueue||(r._frameQueue=[]);var i=(n=d.supplyAnimationDefaults(n)).transition,a=n.frame;function s(t){return Array.isArray(i)?t>=i.length?i[0]:i[t]:i}function u(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function l(t,e){var n=0;return function(){if(t&&++n===e)return t()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise(function(a,c){function f(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var e=r._currentFrame=r._frameQueue.shift();if(e){var n=e.name?e.name.toString():null;t._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=e.frameOpts.duration,d.transition(t,e.frame.data,e.frame.layout,A.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:n,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}function h(){t.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null,function t(){r._animationRaf=window.requestAnimationFrame(t),Date.now()-r._lastFrameAt>r._timeToNext&&f()}()}var p,v,g=0;function m(t){return Array.isArray(i)?g>=i.length?t.transitionOpts=i[g]:t.transitionOpts=i[0]:t.transitionOpts=i,g++,t}var y=[],b=void 0===e||null===e,_=Array.isArray(e),x=!b&&!_&&o.isPlainObject(e);if(x)y.push({type:"object",data:m(o.extendFlat({},e))});else if(b||-1!==["string","number"].indexOf(typeof e))for(p=0;p<r._frames.length;p++)(v=r._frames[p])&&(b||String(v.group)===String(e))&&y.push({type:"byname",name:String(v.name),data:m({name:v.name})});else if(_)for(p=0;p<e.length;p++){var w=e[p];-1!==["number","string"].indexOf(typeof w)?(w=String(w),y.push({type:"byname",name:w,data:m({name:w})})):o.isPlainObject(w)&&y.push({type:"object",data:m(o.extendFlat({},w))})}for(p=0;p<y.length;p++)if("byname"===(v=y[p]).type&&!r._frameHash[v.data.name])return o.warn('animate failure: frame not found: "'+v.data.name+'"'),void c();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var e=r._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&y.reverse();var k=t._fullLayout._currentFrame;if(k&&n.fromcurrent){var M=-1;for(p=0;p<y.length;p++)if("byname"===(v=y[p]).type&&v.name===k){M=p;break}if(M>0&&M<y.length-1){var T=[];for(p=0;p<y.length;p++)v=y[p],("byname"!==y[p].type||p>M)&&T.push(v);y=T}}y.length>0?function(e){if(0!==e.length){for(var i=0;i<e.length;i++){var o;o="byname"===e[i].type?d.computeFrame(t,e[i].name):e[i].data;var f=u(i),p=s(i);p.duration=Math.min(p.duration,f.duration);var v={frame:o,name:e[i].name,frameOpts:f,transitionOpts:p};i===e.length-1&&(v.onComplete=l(a,2),v.onInterrupt=c),r._frameQueue.push(v)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||h()}}(y):(t.emit("plotly_animated"),a())})},n.addFrames=function(t,e,n){if(t=o.getGraphDiv(t),null===e||void 0===e)return Promise.resolve();if(!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var r,i,a,s,u=t._transitionData._frames,c=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var f=u.length+2*e.length,h=[],p={};for(r=e.length-1;r>=0;r--)if(o.isPlainObject(e[r])){var v=e[r].name,g=(c[v]||p[v]||{}).name,m=e[r].name,y=c[g]||p[g];g&&m&&"number"===typeof m&&y&&S<C&&(S++,o.warn('addFrames: overwriting frame "'+(c[g]||p[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===C&&o.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[v]={name:v},h.push({frame:d.supplyFrameDefaults(e[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:f+r})}h.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var b=[],_=[],x=u.length;for(r=h.length-1;r>=0;r--){if("number"===typeof(i=h[r].frame).name&&o.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;c[i.name="frame "+t._transitionData._counter++];);if(c[i.name]){for(a=0;a<u.length&&(u[a]||{}).name!==i.name;a++);b.push({type:"replace",index:a,value:i}),_.unshift({type:"replace",index:a,value:u[a]})}else s=Math.max(0,Math.min(h[r].index,x)),b.push({type:"insert",index:s,value:i}),_.unshift({type:"delete",index:s}),x++}var w=d.modifyFrames,A=d.modifyFrames,k=[t,_],M=[t,b];return l&&l.add(t,w,k,A,M),d.modifyFrames(t,b)},n.deleteFrames=function(t,e){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var n,r,i=t._transitionData._frames,a=[],s=[];if(!e)for(e=[],n=0;n<i.length;n++)e.push(n);for((e=e.slice()).sort(),n=e.length-1;n>=0;n--)r=e[n],a.push({type:"delete",index:r}),s.unshift({type:"insert",index:r,value:i[r]});var u=d.modifyFrames,c=d.modifyFrames,f=[t,s],h=[t,a];return l&&l.add(t,u,f,c,h),d.modifyFrames(t,a)},n.addTraces=function t(e,r,i){e=o.getGraphDiv(e);var a,s,u=[],c=n.deleteTraces,f=t,d=[e,u],h=[e,r];for(function(t,e,n){var r,i;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if("undefined"===typeof e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),r=0;r<e.length;r++)if("object"!==typeof(i=e[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if("undefined"===typeof n||Array.isArray(n)||(n=[n]),"undefined"!==typeof n&&n.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,r,i),Array.isArray(r)||(r=[r]),r=r.map(function(t){return o.extendFlat({},t)}),A.cleanData(r),a=0;a<r.length;a++)e.data.push(r[a]);for(a=0;a<r.length;a++)u.push(-r.length+a);if("undefined"===typeof i)return s=n.redraw(e),l.add(e,c,d,f,h),s;Array.isArray(i)||(i=[i]);try{F(e,u,i)}catch(p){throw e.data.splice(e.data.length-r.length,r.length),p}return l.startSequence(e),l.add(e,c,d,f,h),s=n.moveTraces(e,u,i),l.stopSequence(e),s},n.deleteTraces=function t(e,r){e=o.getGraphDiv(e);var i,a,s=[],u=n.addTraces,c=t,f=[e,s,r],d=[e,r];if("undefined"===typeof r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),D(e,r,"indices"),(r=R(r,e.data.length-1)).sort(o.sorterDes),i=0;i<r.length;i+=1)a=e.data.splice(r[i],1)[0],s.push(a);var h=n.redraw(e);return l.add(e,u,f,c,d),h},n.extendTraces=function t(e,r,i,a){var s=j(e=o.getGraphDiv(e),r,i,a,function(t,e,n){var r,i;if(o.isTypedArray(t))if(n<0){var a=new t.constructor(0),s=N(t,e);n<0?(r=s,i=a):(r=a,i=s)}else if(r=new t.constructor(n),i=new t.constructor(t.length+e.length-n),n===e.length)r.set(e),i.set(t);else if(n<e.length){var u=e.length-n;r.set(e.subarray(u)),i.set(t),i.set(e.subarray(0,u),t.length)}else{var l=n-e.length,c=t.length-l;r.set(t.subarray(c)),r.set(e,l),i.set(t.subarray(0,c))}else r=t.concat(e),i=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,i]}),u=n.redraw(e),c=[e,s.update,i,s.maxPoints];return l.add(e,n.prependTraces,c,t,arguments),u},n.moveTraces=function t(e,r,i){e=o.getGraphDiv(e);var a,s=[],u=[],c=t,f=t,d=[e,i,r],h=[e,r,i];if(F(e,r,i),r=Array.isArray(r)?r:[r],"undefined"===typeof i)for(i=[],a=0;a<r.length;a++)i.push(-r.length+a);for(i=Array.isArray(i)?i:[i],r=R(r,e.data.length-1),i=R(i,e.data.length-1),a=0;a<e.data.length;a++)-1===r.indexOf(a)&&s.push(e.data[a]);for(a=0;a<r.length;a++)u.push({newIndex:i[a],trace:e.data[r[a]]});for(u.sort(function(t,e){return t.newIndex-e.newIndex}),a=0;a<u.length;a+=1)s.splice(u[a].newIndex,0,u[a].trace);e.data=s;var p=n.redraw(e);return l.add(e,c,d,f,h),p},n.prependTraces=function t(e,r,i,a){var s=j(e=o.getGraphDiv(e),r,i,a,function(t,e,n){var r,i;if(o.isTypedArray(t))if(n<=0){var a=new t.constructor(0),s=N(e,t);n<0?(r=s,i=a):(r=a,i=s)}else if(r=new t.constructor(n),i=new t.constructor(t.length+e.length-n),n===e.length)r.set(e),i.set(t);else if(n<e.length){var u=e.length-n;r.set(e.subarray(0,u)),i.set(e.subarray(u)),i.set(t,u)}else{var l=n-e.length;r.set(e),r.set(t.subarray(0,l),e.length),i.set(t.subarray(l))}else r=e.concat(t),i=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,i]}),u=n.redraw(e),c=[e,s.update,i,s.maxPoints];return l.add(e,n.extendTraces,c,t,arguments),u},n.newPlot=function(t,e,r,i){return t=o.getGraphDiv(t),d.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),d.purge(t),n.plot(t,e,r,i)},n.plot=function(t,e,i,a){var s;if(t=o.getGraphDiv(t),u.init(t),o.isPlainObject(e)){var l=e;e=l.data,i=l.layout,a=l.config,s=l.frames}if(!1===u.triggerHandler(t,"plotly_beforeplot",[e,i,a]))return Promise.reject();e||i||o.isPlotDiv(t)||o.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",t),L(t,a),i||(i={}),r.select(t).classed("js-plotly-plot",!0),v.makeTester(),Array.isArray(t._promises)||(t._promises=[]);var f=0===(t.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(A.cleanData(e),f?t.data=e:t.data.push.apply(t.data,e),t.empty=!1),t.layout&&!f||(t.layout=A.cleanLayout(i)),d.supplyDefaults(t);var g=t._fullLayout,y=g._has("cartesian");if(!g._has("polar")&&e&&e[0]&&e[0].r)return o.log("Legacy polar charts are deprecated!"),function(t,e,n){var i=r.select(t).selectAll(".plot-container").data([0]);i.enter().insert("div",":first-child").classed("plot-container plotly",!0);var a=i.selectAll(".svg-container").data([0]);a.enter().append("div").classed("svg-container",!0).style("position","relative"),a.html(""),e&&(t.data=e),n&&(t.layout=n),h.manager.fillLayout(t),a.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=h.manager.framework(t),t.framework({data:t.data,layout:t.layout},a.node()),t.framework.setUndoPoint();var s=t.framework.svg(),u=1,l=t._fullLayout.title?t._fullLayout.title.text:"";""!==l&&l||(u=0);var c=function(){this.call(b.convertToTspans,t)},f=s.select(".title-group text").call(c);if(t._context.edits.titleText){var p=o._(t,"Click to enter Plot title");l&&l!==p||(u=.2,f.attr({"data-unformatted":p}).text(p).style({opacity:u}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)})),f.call(function e(){this.call(b.makeEditable,{gd:t}).on("edit",function(n){t.framework({layout:{title:{text:n}}}),this.text(n).call(c),this.call(e)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(c)})})}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),d.addLinks(t),Promise.resolve()}(t,e,i);g._replotting=!0,f&&ut(t),t.framework!==ut&&(t.framework=ut,ut(t)),v.initGradients(t),f&&p.saveShowSpikeInitial(t);var _=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;_&&d.doCalcdata(t);for(var x=0;x<t.calcdata.length;x++)t.calcdata[x][0].trace=t._fullData[x];t._context.responsive?t._responsiveChartHandler||(t._responsiveChartHandler=function(){o.isHidden(t)||d.resize(t)},window.addEventListener("resize",t._responsiveChartHandler)):o.clearResponsive(t);var w=o.extendFlat({},g._size),M=0;function T(){return d.clearAutoMarginIds(t),k.drawMarginPushers(t),p.allowAutoMargin(t),d.doAutoMargin(t),d.previousPromises(t)}function S(){t._transitioning||(k.doAutoRangeAndConstraints(t),f&&p.saveRangeInitial(t),c.getComponentMethod("rangeslider","calcAutorange")(t))}var C=[d.previousPromises,function(){if(s)return n.addFrames(t,s)},function e(){for(var n=g._basePlotModules,r=0;r<n.length;r++)n[r].drawFramework&&n[r].drawFramework(t);if(!g._glcanvas&&g._has("gl")&&(g._glcanvas=g._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),g._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),g._glcanvas){g._glcanvas.attr("width",g.width).attr("height",g.height);var i=g._glcanvas.data()[0].regl;if(i&&(Math.floor(g.width)!==i._gl.drawingBufferWidth||Math.floor(g.height)!==i._gl.drawingBufferHeight)){var a="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!M)return o.log(a+" Clearing graph and plotting again."),d.cleanPlot([],{},t._fullData,g),d.supplyDefaults(t),g=t._fullLayout,d.doCalcdata(t),M++,e();o.error(a)}}return"h"===g.modebar.orientation?g._modebardiv.style("height",null).style("width","100%"):g._modebardiv.style("width",null).style("height",g.height+"px"),d.previousPromises(t)},T,function(){if(d.didMarginChange(w,g._size))return o.syncOrAsync([T,k.layoutStyles],t)}];y&&C.push(function(){if(_)return o.syncOrAsync([c.getComponentMethod("shapes","calcAutorange"),c.getComponentMethod("annotations","calcAutorange"),S],t);S()}),C.push(k.layoutStyles),y&&C.push(function(){return p.draw(t,f?"":"redraw")}),C.push(k.drawData,k.finalDraw,m,d.addLinks,d.rehover,d.redrag,d.doAutoMargin,d.previousPromises);var O=o.syncOrAsync(C,t);return O&&O.then||(O=Promise.resolve()),O.then(function(){return E(t),t})},n.purge=function(t){var e=(t=o.getGraphDiv(t))._fullLayout||{},n=t._fullData||[];return d.cleanPlot([],{},n,e),d.purge(t),u.purge(t),e._container&&e._container.remove(),delete t._context,t},n.react=function(t,e,r,i){var a,u,l=(t=o.getGraphDiv(t))._fullData,h=t._fullLayout;if(o.isPlotDiv(t)&&l&&h){if(o.isPlainObject(e)){var p=e;e=p.data,r=p.layout,i=p.config,a=p.frames}var v=!1;if(i){var g=o.extendDeep({},t._context);t._context=void 0,L(t,i),v=function t(e,n){var r;for(r in e)if("_"!==r.charAt(0)){var i=e[r],a=n[r];if(i!==a)if(o.isPlainObject(i)&&o.isPlainObject(a)){if(t(i,a))return!0}else{if(!Array.isArray(i)||!Array.isArray(a))return!0;if(i.length!==a.length)return!0;for(var s=0;s<i.length;s++)if(i[s]!==a[s]){if(!o.isPlainObject(i[s])||!o.isPlainObject(a[s]))return!0;if(t(i[s],a[s]))return!0}}}}(g,t._context)}t.data=e||[],A.cleanData(t.data),t.layout=r||{},A.cleanLayout(t.layout),function(t,e,n,r){var i,a,u,l,c,f,d,h,p=r._preGUI,v=[],g={};for(i in p){if(c=nt(i,tt)){if(a=c.attr||c.head+".uirevision",u=s(r,a).get(),(l=u&&rt(a,e))&&l===u&&(null===(f=p[i])&&(f=void 0),d=s(e,i),ot(h=d.get(),f))){void 0===h&&"autorange"===i.substr(i.length-9)&&v.push(i.substr(0,i.length-10)),d.set(I(s(r,i).get()));continue}}else o.warn("unrecognized GUI edit: "+i);delete p[i],"range["===i.substr(i.length-8,6)&&(g[i.substr(0,i.length-9)]=1)}for(var m=0;m<v.length;m++){var y=v[m];if(g[y]){var b=s(e,y).get();b&&delete b.autorange}}var _=r._tracePreGUI;for(var x in _){var w,A=_[x],k=null;for(i in A){if(!k){var M=it(x,n);if(M<0){delete _[x];break}var T=n[M];w=T._fullInput;var S=at(x,t,w.index);if(S<0){delete _[x];break}k=t[S]}if(c=nt(i,et)){if(c.attr?(u=s(r,c.attr).get(),l=u&&rt(c.attr,e)):(u=w.uirevision,void 0===(l=k.uirevision)&&(l=e.uirevision)),l&&l===u&&(null===(f=A[i])&&(f=void 0),d=s(k,i),ot(h=d.get(),f))){d.set(I(s(w,i).get()));continue}}else o.warn("unrecognized GUI edit: "+i+" in trace uid "+x);delete A[i]}}}(t.data,t.layout,l,h),d.supplyDefaults(t,{skipUpdateCalc:!0});var m=t._fullData,y=t._fullLayout,b=void 0===y.datarevision,_=y.transition,x=function(t,e,n,r,i){var a=M.layoutFlags();return a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,st(e,n,[],{getValObject:function(t){return f.getLayoutValObject(n,t)},flags:a,immutable:r,transition:i,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0),i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some"),a}(t,h,y,b,_),w=x.newDataRevision,T=function(t,e,n,r,i,a){var o=e.length===n.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,u,l=M.traceFlags();l.arrays={},l.nChanges=0,l.nChangesAnim=0;var c={getValObject:function(t){var e=f.getTraceValObject(u,t);return!u._module.animatable&&e.anim&&(e.anim=!1),e},flags:l,immutable:r,transition:i,newDataRevision:a,gd:t},h={};for(s=0;s<e.length;s++)if(n[s]){if(u=n[s]._fullInput,d.hasMakesDataTransform(u)&&(u=n[s]),h[u.uid])continue;h[u.uid]=1,st(e[s]._fullInput,u,[],c)}return(l.calc||l.plot)&&(l.fullReplot=!0),i&&l.nChanges&&l.nChangesAnim&&(l.anim=l.nChanges===l.nChangesAnim&&o?"all":"some"),l}(t,l,m,b,_,w);J(t)&&(x.layoutReplot=!0),T.calc||x.calc?t.calcdata=void 0:d.supplyDefaultsUpdateCalc(t.calcdata,m);var S=[];if(a&&(t._transitionData={},d.createTransitionData(t),S.push(function(){return n.addFrames(t,a)})),y.transition&&!v&&(T.anim||x.anim))d.doCalcdata(t),k.doAutoRangeAndConstraints(t),S.push(function(){return d.transitionFromReact(t,T,x,h)});else if(T.fullReplot||x.layoutReplot||v)t._fullLayout._skipDefaults=!0,S.push(n.plot);else{for(var C in x.arrays){var O=x.arrays[C];if(O.length){var P=c.getComponentMethod(C,"drawOne");if(P!==o.noop)for(var R=0;R<O.length;R++)P(t,O[R]);else{var D=c.getComponentMethod(C,"draw");if(D===o.noop)throw new Error("cannot draw components: "+C);D(t)}}}S.push(d.previousPromises),T.style&&S.push(k.doTraceStyle),(T.colorbars||x.colorbars)&&S.push(k.doColorBars),x.legend&&S.push(k.doLegend),x.layoutstyle&&S.push(k.layoutStyles),x.axrange&&V(S),x.ticks&&S.push(k.doTicksRelayout),x.modebar&&S.push(k.doModeBar),x.camera&&S.push(k.doCamera),S.push(E)}S.push(d.rehover,d.redrag),(u=o.syncOrAsync(S,t))&&u.then||(u=Promise.resolve(t))}else u=n.newPlot(t,e,r,i);return u.then(function(){return t.emit("plotly_react",{data:e,layout:r}),t})},n.redraw=function(t){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return A.cleanData(t.data),A.cleanLayout(t.layout),t.calcdata=void 0,n.plot(t).then(function(){return t.emit("plotly_redraw"),t})},n.relayout=W,n.restyle=z,n.setPlotConfig=function(t){return o.extendFlat(x,t)},n.update=K,n._guiRelayout=Q(W),n._guiRestyle=Q(z),n._guiUpdate=Q(K),n._storeDirectGUIEdit=function(t,e,n){for(var r in n){var i=s(t,r);q(r,i.get(),n[r],e)}}},{"../components/color":42,"../components/drawing":63,"../constants/xmlns_namespaces":141,"../lib":160,"../lib/events":154,"../lib/queue":174,"../lib/svg_text_utils":181,"../plots/cartesian/axes":204,"../plots/cartesian/constants":210,"../plots/cartesian/graph_interact":213,"../plots/cartesian/select":221,"../plots/plots":236,"../plots/polar/legacy":239,"../registry":243,"./edit_types":187,"./helpers":188,"./manage_arrays":190,"./plot_config":192,"./plot_schema":193,"./subroutines":195,d3:7,"fast-isnumeric":9,"has-hover":11}],192:[function(t,e,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:"https://plot.ly"},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"boolean",dflt:1},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};!function t(e,n){for(var r in e){var i=e[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),t(i,n[r]))}}(r,i),e.exports={configAttributes:r,dfltConfig:i}},{}],193:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib"),a=t("../plots/attributes"),o=t("../plots/layout_attributes"),s=t("../plots/frame_attributes"),u=t("../plots/animation_attributes"),l=t("./plot_config").configAttributes,c=t("../plots/polar/legacy/area_attributes"),f=t("../plots/polar/legacy/axis_attributes"),d=t("./edit_types"),h=i.extendFlat,p=i.extendDeepAll,v=i.isPlainObject,g=i.isArrayOrTypedArray,m=i.nestedProperty,y=i.valObjectMeta,b="_isSubplotObj",_="_isLinkedToArray",x=[b,_,"_arrayAttrRegexps","_deprecated"];function w(t,e,n){if(!t)return!1;if(t._isLinkedToArray)if(A(e[n]))n++;else if(n<e.length)return!1;for(;n<e.length;n++){var r=t[e[n]];if(!v(r))break;if(t=r,n===e.length-1)break;if(t._isLinkedToArray){if(!A(e[++n]))return!1}else if("info_array"===t.valType){var i=e[++n];if(!A(i))return!1;var a=t.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===t.dimensions){if(n++,e.length===n)return t;var o=e[n];if(!A(o))return!1;t=a[i][o]}else t=a[i]}else t=a}}return t}function A(t){return t===Math.round(t)&&t>=0}function k(){var t,e,n={};for(t in p(n,o),r.subplotsRegistry)if((e=r.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(e.attr))for(var i=0;i<e.attr.length;i++)S(n,e,e.attr[i]);else{var a="subplot"===e.attr?e.name:e.attr;S(n,e,a)}for(t in n=function(t){return h(t,{radialaxis:f.radialaxis,angularaxis:f.angularaxis}),h(t,f.layout),t}(n),r.componentsRegistry){var s=(e=r.componentsRegistry[t]).schema;if(s&&(s.subplots||s.layout)){var u=s.subplots;if(u&&u.xaxis&&!u.yaxis)for(var l in u.xaxis)delete n.yaxis[l]}else"colorscale"===e.name?p(n,e.layoutAttributes):e.layoutAttributes&&C(n,e.layoutAttributes,e.name)}return{layoutAttributes:T(n)}}function M(){var t={frames:p({},s)};return T(t),t.frames}function T(t){return function(t){n.crawl(t,function(t,e,r){n.isValObject(t)?"data_array"===t.valType?(t.role="data",r[e+"src"]={valType:"string",editType:"none"}):!0===t.arrayOk&&(r[e+"src"]={valType:"string",editType:"none"}):v(t)&&(t.role="object")})}(t),function(t){n.crawl(t,function(t,e,n){if(t){var r=t[_];r&&(delete t[_],n[e]={items:{}},n[e].items[r]=t,n[e].role="object")}})}(t),function(t){!function t(e){for(var n in e)if(v(e[n]))t(e[n]);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)t(e[n][r]);else e[n]instanceof RegExp&&(e[n]=e[n].toString())}(t)}(t),t}function S(t,e,n){var r=m(t,n),i=p({},e.layoutAttributes);i[b]=!0,r.set(i)}function C(t,e,n){var r=m(t,n);r.set(p(r.get()||{},e))}n.IS_SUBPLOT_OBJ=b,n.IS_LINKED_TO_ARRAY=_,n.DEPRECATED="_deprecated",n.UNDERSCORE_ATTRS=x,n.get=function(){var t={};r.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,i;"area"===t?(e={attributes:c},i={}):(e=r.modules[t]._module,i=e.basePlotModule);var o={type:null},s=p({},a),u=p({},e.attributes);n.crawl(u,function(t,e,n,r,i){m(s,i).set(void 0),void 0===t&&m(u,i).set(void 0)}),p(o,s),r.traceIs(t,"noOpacity")&&delete o.opacity,r.traceIs(t,"showLegend")||(delete o.showlegend,delete o.legendgroup),r.traceIs(t,"noHover")&&(delete o.hoverinfo,delete o.hoverlabel),e.selectPoints||delete o.selectedpoints,p(o,u),i.attributes&&p(o,i.attributes),o.type=t;var l={meta:e.meta||{},categories:e.categories||{},animatable:Boolean(e.animatable),type:t,attributes:T(o)};if(e.layoutAttributes){var f={};p(f,e.layoutAttributes),l.layoutAttributes=T(f)}return e.animatable||n.crawl(l,function(t){n.isValObject(t)&&"anim"in t&&delete t.anim}),l}(e)});var e={};return Object.keys(r.transformsRegistry).forEach(function(t){e[t]=function(t){var e=r.transformsRegistry[t],n=p({},e.attributes);return Object.keys(r.componentsRegistry).forEach(function(e){var i=r.componentsRegistry[e];i.schema&&i.schema.transforms&&i.schema.transforms[t]&&Object.keys(i.schema.transforms[t]).forEach(function(e){C(n,i.schema.transforms[t][e],e)})}),{attributes:T(n)}}(t)}),{defs:{valObjects:y,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:d.traces,layout:d.layout},impliedEdits:{}},traces:t,layout:k(),transforms:e,frames:M(),animation:T(u),config:T(l)}},n.crawl=function(t,e,r,i){var a=r||0;i=i||"",Object.keys(t).forEach(function(r){var o=t[r];if(-1===x.indexOf(r)){var s=(i?i+".":"")+r;e(o,r,t,a,s),n.isValObject(o)||v(o)&&"impliedEdits"!==r&&n.crawl(o,e,a+1,s)}})},n.isValObject=function(t){return t&&void 0!==t.valType},n.findArrayAttributes=function(t){var e,r,i=[],o=[],s=[];function u(t,n,a,u){o=o.slice(0,u).concat([n]),s=s.slice(0,u).concat([t&&t._isLinkedToArray]);var l=t&&("data_array"===t.valType||!0===t.arrayOk)&&!("colorbar"===o[u-1]&&("ticktext"===n||"tickvals"===n));l&&function t(e,n,a){var u=e[o[n]],l=a+o[n];if(n===o.length-1)g(u)&&i.push(r+l);else if(s[n]){if(Array.isArray(u))for(var c=0;c<u.length;c++)v(u[c])&&t(u[c],n+1,l+"["+c+"].")}else v(u)&&t(u,n+1,l+".")}(e,0,"")}e=t,r="",n.crawl(a,u),t._module&&t._module.attributes&&n.crawl(t._module.attributes,u);var l=t.transforms;if(l)for(var c=0;c<l.length;c++){var f=l[c],d=f._module;d&&(r="transforms["+c+"].",e=f,n.crawl(d.attributes,u))}return i},n.getTraceValObject=function(t,e){var n,i,o=e[0],s=1;if("transforms"===o){if(1===e.length)return a.transforms;var u=t.transforms;if(!Array.isArray(u)||!u.length)return!1;var l=e[1];if(!A(l)||l>=u.length)return!1;n=(r.transformsRegistry[u[l].type]||{}).attributes,i=n&&n[e[2]],s=3}else if("area"===t.type)i=c[o];else{var f=t._module;if(f||(f=(r.modules[t.type||a.type.dflt]||{})._module),!f)return!1;if(n=f.attributes,!(i=n&&n[o])){var d=f.basePlotModule;d&&d.attributes&&(i=d.attributes[o])}i||(i=a[o])}return w(i,e,s)},n.getLayoutValObject=function(t,e){var n=function(t,e){var n,i,a,s,u=t._basePlotModules;if(u){var l;for(n=0;n<u.length;n++){if((a=u[n]).attrRegex&&a.attrRegex.test(e)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!l&&a.layoutAttributes&&(l=a.layoutAttributes)}var c=a.baseLayoutAttrOverrides;if(c&&e in c)return c[e]}if(l)return l}var d=t._modules;if(d)for(n=0;n<d.length;n++)if((s=d[n].layoutAttributes)&&e in s)return s[e];for(i in r.componentsRegistry){if("colorscale"===(a=r.componentsRegistry[i]).name&&0===e.indexOf("coloraxis"))return a.layoutAttributes[e];if(!a.schema&&e===a.name)return a.layoutAttributes}return e in o?o[e]:"radialaxis"===e||"angularaxis"===e?f[e]:f.layout[e]||!1}(t,e[0]);return w(n,e,1)}},{"../lib":160,"../plots/animation_attributes":199,"../plots/attributes":201,"../plots/frame_attributes":231,"../plots/layout_attributes":234,"../plots/polar/legacy/area_attributes":237,"../plots/polar/legacy/axis_attributes":238,"../registry":243,"./edit_types":187,"./plot_config":192}],194:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plots/attributes"),a="templateitemname",o={name:{valType:"string",editType:"none"}};function s(t){return t&&"string"===typeof t}function u(t){var e=t.length-1;return"s"!==t.charAt(e)&&r.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}o[a]={valType:"string",editType:"calc"},n.templatedArray=function(t,e){return e._isLinkedToArray=t,e.name=o.name,e[a]=o[a],e},n.traceTemplater=function(t){var e,n,a={};for(e in t)n=t[e],Array.isArray(n)&&n.length&&(a[e]=0);return{newTrace:function(o){var s={type:e=r.coerce(o,{},i,"type"),_template:null};if(e in a){n=t[e];var u=a[e]%n.length;a[e]++,s._template=n[u]}return s}}},n.newContainer=function(t,e,n){var i=t._template,a=i&&(i[e]||n&&i[n]);r.isPlainObject(a)||(a=null);var o=t[e]={_template:a};return o},n.arrayTemplater=function(t,e,n){var r=t._template,i=r&&r[u(e)],o=r&&r[e];Array.isArray(o)&&o.length||(o=[]);var l={};return{newItem:function(t){var e={name:t.name,_input:t},r=e[a]=t[a];if(!s(r))return e._template=i,e;for(var u=0;u<o.length;u++){var c=o[u];if(c.name===r)return l[r]=1,e._template=c,e}return e[n]=t[n]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<o.length;e++){var n=o[e],r=n.name;if(s(r)&&!l[r]){var i={_template:n,name:r,_input:{_templateitemname:r}};i[a]=n[a],t.push(i),l[r]=1}}return t}}},n.arrayDefaultKey=u,n.arrayEditor=function(t,e,n){var i=(r.nestedProperty(t,e).get()||[]).length,o=n._index,s=o>=i&&(n._input||{})._templateitemname;s&&(o=i);var u,l=e+"["+o+"]";function c(){u={},s&&(u[l]={},u[l][a]=s)}function f(t,e){s?r.nestedProperty(u[l],t).set(e):u[l+"."+t]=e}function d(){var t=u;return c(),t}return c(),{modifyBase:function(t,e){u[t]=e},modifyItem:f,getUpdateObj:d,applyUpdate:function(e,n){e&&f(e,n);var i=d();for(var a in i)r.nestedProperty(t,a).set(i[a])}}}},{"../lib":160,"../plots/attributes":201}],195:[function(t,e,n){"use strict";var r=t("d3"),i=t("../registry"),a=t("../plots/plots"),o=t("../lib"),s=t("../lib/clear_gl_canvases"),u=t("../components/color"),l=t("../components/drawing"),c=t("../components/titles"),f=t("../components/modebar"),d=t("../plots/cartesian/axes"),h=t("../constants/alignment"),p=t("../plots/cartesian/constraints"),v=p.enforce,g=p.clean,m=t("../plots/cartesian/autorange").doAutoRange,y="start",b="middle",_="end";function x(t,e,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&a[0]<e[1]&&a[1]>e[0])return!0}return!1}function w(t){var e,i,a,s,c,p,v=t._fullLayout,g=v._size,m=g.p,y=d.list(t,"",!0);if(v._paperdiv.style({width:t._context.responsive&&v.autosize&&!t._context._hasZeroWidth&&!t.layout.width?"100%":v.width+"px",height:t._context.responsive&&v.autosize&&!t._context._hasZeroHeight&&!t.layout.height?"100%":v.height+"px"}).selectAll(".main-svg").call(l.setSize,v.width,v.height),t._context.setBackground(t,v.paper_bgcolor),n.drawMainTitle(t),f.manage(t),!v._has("cartesian"))return t._promises.length&&Promise.all(t._promises);function b(t,e,n){var r=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===n?e._offset-m-r:e._offset+e._length+m+r:g.t+g.h*(1-(t.position||0))+r%1:e?"right"===n?e._offset+e._length+m+r:e._offset-m-r:g.l+g.w*(t.position||0)+r%1}for(e=0;e<y.length;e++){var _=(s=y[e])._anchorAxis;s._linepositions={},s._lw=l.crispRound(t,s.linewidth,1),s._mainLinePosition=b(s,_,s.side),s._mainMirrorPosition=s.mirror&&_?b(s,_,h.OPPOSITE_SIDE[s.side]):null}var w=[],k=[],T=[],S=1===u.opacity(v.paper_bgcolor)&&1===u.opacity(v.plot_bgcolor)&&v.paper_bgcolor===v.plot_bgcolor;for(i in v._plots)if((a=v._plots[i]).mainplot)a.bg&&a.bg.remove(),a.bg=void 0;else{var C=a.xaxis.domain,E=a.yaxis.domain,O=a.plotgroup;if(x(C,E,T)){var P=O.node(),L=a.bg=o.ensureSingle(O,"rect","bg");P.insertBefore(L.node(),P.childNodes[0]),k.push(i)}else O.select("rect.bg").remove(),T.push([C,E]),S||(w.push(i),k.push(i))}var R,D,F,j,N,z,I,B,q,U,H,W,G,V=v._bgLayer.selectAll(".bg").data(w);for(V.enter().append("rect").classed("bg",!0),V.exit().remove(),V.each(function(t){v._plots[t].bg=r.select(this)}),e=0;e<k.length;e++)a=v._plots[k[e]],c=a.xaxis,p=a.yaxis,a.bg&&a.bg.call(l.setRect,c._offset-m,p._offset-m,c._length+2*m,p._length+2*m).call(u.fill,v.plot_bgcolor).style("stroke-width",0);if(!v._hasOnlyLargeSploms)for(i in v._plots){a=v._plots[i],c=a.xaxis,p=a.yaxis;var Y,Z,X=a.clipId="clip"+v._uid+i+"plot",$=o.ensureSingleById(v._clips,"clipPath",X,function(t){t.classed("plotclip",!0).append("rect")});a.clipRect=$.select("rect").attr({width:c._length,height:p._length}),l.setTranslate(a.plot,c._offset,p._offset),a._hasClipOnAxisFalse?(Y=null,Z=X):(Y=X,Z=null),l.setClipUrl(a.plot,Y,t),a.layerClipId=Z}function J(t){return"M"+R+","+t+"H"+D}function K(t){return"M"+c._offset+","+t+"h"+c._length}function Q(t){return"M"+t+","+B+"V"+I}function tt(t){return"M"+t+","+p._offset+"v"+p._length}function et(t,e,n){if(!t.showline||i!==t._mainSubplot)return"";if(!t._anchorAxis)return n(t._mainLinePosition);var r=e(t._mainLinePosition);return t.mirror&&(r+=e(t._mainMirrorPosition)),r}for(i in v._plots){a=v._plots[i],c=a.xaxis,p=a.yaxis;var nt="M0,0";A(c,i)&&(N=M(c,"left",p,y),R=c._offset-(N?m+N:0),z=M(c,"right",p,y),D=c._offset+c._length+(z?m+z:0),F=b(c,p,"bottom"),j=b(c,p,"top"),!(G=!c._anchorAxis||i!==c._mainSubplot)||"allticks"!==c.mirror&&"all"!==c.mirror||(c._linepositions[i]=[F,j]),nt=et(c,J,K),G&&c.showline&&("all"===c.mirror||"allticks"===c.mirror)&&(nt+=J(F)+J(j)),a.xlines.style("stroke-width",c._lw+"px").call(u.stroke,c.showline?c.linecolor:"rgba(0,0,0,0)")),a.xlines.attr("d",nt);var rt="M0,0";A(p,i)&&(H=M(p,"bottom",c,y),I=p._offset+p._length+(H?m:0),W=M(p,"top",c,y),B=p._offset-(W?m:0),q=b(p,c,"left"),U=b(p,c,"right"),!(G=!p._anchorAxis||i!==p._mainSubplot)||"allticks"!==p.mirror&&"all"!==p.mirror||(p._linepositions[i]=[q,U]),rt=et(p,Q,tt),G&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(rt+=Q(q)+Q(U)),a.ylines.style("stroke-width",p._lw+"px").call(u.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),a.ylines.attr("d",rt)}return d.makeClipPaths(t),t._promises.length&&Promise.all(t._promises)}function A(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function k(t,e,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=h.FROM_BL[e];return n.side===e?r.domain[i]===t.domain[i]:n.mirror&&r.domain[1-i]===t.domain[1-i]}function M(t,e,n,r){if(k(t,e,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&k(t,e,a))return a._lw}return 0}function T(t,e){var n=t.title,r=t._size,i=0;switch(e===y?i=n.pad.l:e===_&&(i=-n.pad.r),n.xref){case"paper":return r.l+r.w*n.x+i;case"container":default:return t.width*n.x+i}}function S(t,e){var n=t.title,r=t._size,i=0;if("0em"!==e&&e?e===h.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b,"auto"===n.y)return r.t/2;switch(n.yref){case"paper":return r.t+r.h-r.h*n.y+i;case"container":default:return t.height-t.height*n.y+i}}n.layoutStyles=function(t){return o.syncOrAsync([a.doAutoMargin,w],t)},n.drawMainTitle=function(t){var e=t._fullLayout,n=function(t){var e=t.title,n=b;return o.isRightAnchor(e)?n=_:o.isLeftAnchor(e)&&(n=y),n}(e),r=function(t){var e=t.title,n="0em";return o.isTopAnchor(e)?n=h.CAP_SHIFT+"em":o.isMiddleAnchor(e)&&(n=h.MID_SHIFT+"em"),n}(e);c.draw(t,"gtitle",{propContainer:e,propName:"title.text",placeholder:e._dfltTitle.plot,attributes:{x:T(e,n),y:S(e,r),"text-anchor":n,dy:r}})},n.doTraceStyle=function(t){var e,r=t.calcdata,o=[];for(e=0;e<r.length;e++){var u=r[e],l=u[0]||{},c=l.trace||{},f=c._module||{},d=f.arraysToCalcdata;d&&d(u,c);var h=f.editStyle;h&&o.push({fn:h,cd0:l})}if(o.length){for(e=0;e<o.length;e++){var p=o[e];p.fn(t,p.cd0)}s(t),n.redrawReglTraces(t)}return a.style(t),i.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doColorBars=function(t){return i.getComponentMethod("colorbar","draw")(t),a.previousPromises(t)},n.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,i.call("plot",t,"",e)},n.doLegend=function(t){return i.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doTicksRelayout=function(t){return d.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(i.subplotsRegistry.splom.updateGrid(t),s(t),n.redrawReglTraces(t)),n.drawMainTitle(t),a.previousPromises(t)},n.doModeBar=function(t){var e=t._fullLayout;f.manage(t);for(var n=0;n<e._basePlotModules.length;n++){var r=e._basePlotModules[n].updateFx;r&&r(t)}return a.previousPromises(t)},n.doCamera=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,r=0;r<n.length;r++){var i=e[n[r]],a=i._scene,o=i.camera;a.setCamera(o)}},n.drawData=function(t){var e=t._fullLayout;s(t);for(var r=e._basePlotModules,o=0;o<r.length;o++)r[o].plot(t);return n.redrawReglTraces(t),a.style(t),i.getComponentMethod("shapes","draw")(t),i.getComponentMethod("annotations","draw")(t),e._replotting=!1,a.previousPromises(t)},n.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var n,r,i=t._fullData,a=[],s=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),n=0;n<i.length;n++){var u=i[n];!0===u.visible&&0!==u._length&&("splom"===u.type?e._splomScenes[u.uid].draw():"scattergl"===u.type?o.pushUnique(a,u.xaxis+u.yaxis):"scatterpolargl"===u.type&&o.pushUnique(s,u.subplot))}for(n=0;n<a.length;n++)(r=e._plots[a[n]])._scene&&r._scene.draw();for(n=0;n<s.length;n++)(r=e[s[n]]._subplot)._scene&&r._scene.draw()}},n.doAutoRangeAndConstraints=function(t){for(var e,n,r=t._fullLayout,i=d.list(t,"",!0),a=r._axisMatchGroups||[],s=0;s<i.length;s++)e=i[s],g(t,e),m(t,e);v(t);t:for(var u=0;u<a.length;u++){var l,c=a[u],f=null;for(l in c){if(!1===(e=d.getFromId(t,l)).autorange)continue t;n=o.simpleMap(e.range,e.r2l),f?f[0]<f[1]?(f[0]=Math.min(f[0],n[0]),f[1]=Math.max(f[1],n[1])):(f[0]=Math.max(f[0],n[0]),f[1]=Math.min(f[1],n[1])):f=n}for(l in c)(e=d.getFromId(t,l)).range=o.simpleMap(f,e.l2r),e._input.range=e.range.slice(),e.setScale()}},n.finalDraw=function(t){i.getComponentMethod("shapes","draw")(t),i.getComponentMethod("images","draw")(t),i.getComponentMethod("annotations","draw")(t),i.getComponentMethod("rangeslider","draw")(t),i.getComponentMethod("rangeselector","draw")(t)},n.drawMarginPushers=function(t){i.getComponentMethod("legend","draw")(t),i.getComponentMethod("rangeselector","draw")(t),i.getComponentMethod("sliders","draw")(t),i.getComponentMethod("updatemenus","draw")(t),i.getComponentMethod("colorbar","draw")(t)}},{"../components/color":42,"../components/drawing":63,"../components/modebar":101,"../components/titles":130,"../constants/alignment":137,"../lib":160,"../lib/clear_gl_canvases":149,"../plots/cartesian/autorange":203,"../plots/cartesian/axes":204,"../plots/cartesian/constraints":211,"../plots/plots":236,"../registry":243,d3:7}],196:[function(t,e,n){"use strict";var r=t("../lib"),i=r.isPlainObject,a=t("./plot_schema"),o=t("../plots/plots"),s=t("../plots/attributes"),u=t("./plot_template"),l=t("./plot_config").dfltConfig;function c(t,e){t=r.extendDeep({},t);var n,a,o=Object.keys(t).sort();function s(e,n,r){if(i(n)&&i(e))c(e,n);else if(Array.isArray(n)&&Array.isArray(e)){var o=u.arrayTemplater({_template:t},r);for(a=0;a<n.length;a++){var s=n[a],l=o.newItem(s)._template;l&&c(l,s)}var f=o.defaultItems();for(a=0;a<f.length;a++)n.push(f[a]._template);for(a=0;a<n.length;a++)delete n[a].templateitemname}}for(n=0;n<o.length;n++){var l=o[n],d=t[l];if(l in e?s(d,e[l],l):e[l]=d,f(l)===l)for(var h in e){var p=f(h);h===p||p!==l||h in t||s(d,e[h],l)}}}function f(t){return t.replace(/[0-9]+$/,"")}function d(t,e,n,a,o){var s=o&&n(o);for(var l in t){var c=t[l],p=h(t,l,a),v=h(t,l,o),g=n(v);if(!g){var m=f(l);m!==l&&(v=h(t,m,o),g=n(v))}if((!s||s!==g)&&!(!g||g._noTemplating||"data_array"===g.valType||g.arrayOk&&Array.isArray(c)))if(!g.valType&&i(c))d(c,e,n,p,v);else if(g._isLinkedToArray&&Array.isArray(c))for(var y=!1,b=0,_={},x=0;x<c.length;x++){var w=c[x];if(i(w)){var A=w.name;if(A)_[A]||(d(w,e,n,h(c,b,p),h(c,b,v)),b++,_[A]=1);else if(!y){var k=u.arrayDefaultKey(l),M=h(t,k,a),T=h(c,b,p);d(w,e,n,T,h(c,b,v));var S=r.nestedProperty(e,T),C=r.nestedProperty(e,M);C.set(S.get()),S.set(null),y=!0}}}else{var E=r.nestedProperty(e,p);E.set(c)}}}function h(t,e,n){return n?Array.isArray(t)?n+"["+e+"]":n+"."+e:e}function p(t){for(var e=0;e<t.length;e++)if(i(t[e]))return!0}function v(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}n.makeTemplate=function(t){t=r.isPlainObject(t)?t:r.getGraphDiv(t),t=r.extendDeep({_context:l},{data:t.data,layout:t.layout}),o.supplyDefaults(t);var e=t.data||[],n=t.layout||{};n._basePlotModules=t._fullLayout._basePlotModules,n._modules=t._fullLayout._modules;var u={data:{},layout:{}};e.forEach(function(t){var e={};d(t,e,function(t,e){return a.getTraceValObject(t,r.nestedProperty({},e).parts)}.bind(null,t));var n=r.coerce(t,{},s,"type"),i=u.data[n];i||(i=u.data[n]=[]),i.push(e)}),d(n,u.layout,function(t,e){return a.getLayoutValObject(t,r.nestedProperty({},e).parts)}.bind(null,n)),delete u.layout.template;var f=n.template;if(i(f)){var h,p,v,g,m,y,b=f.layout;i(b)&&c(b,u.layout);var _=f.data;if(i(_)){for(p in u.data)if(v=_[p],Array.isArray(v)){for(m=u.data[p],y=m.length,g=v.length,h=0;h<y;h++)c(v[h%g],m[h]);for(h=y;h<g;h++)m.push(r.extendDeep({},v[h]))}for(p in _)p in u.data||(u.data[p]=r.extendDeep([],_[p]))}}return u},n.validateTemplate=function(t,e){var n=r.extendDeep({},{_context:l,data:t.data,layout:t.layout}),a=n.layout||{};i(e)||(e=a.template||{});var s=e.layout,u=e.data,c=[];n.layout=a,n.layout.template=e,o.supplyDefaults(n);var d=n._fullLayout,g=n._fullData,m={};if(i(s)?(function t(e,n){for(var r in e)if("_"!==r.charAt(0)&&i(e[r])){var a,o=f(r),s=[];for(a=0;a<n.length;a++)s.push(h(e,r,n[a])),o!==r&&s.push(h(e,o,n[a]));for(a=0;a<s.length;a++)m[s[a]]=1;t(e[r],s)}}(d,["layout"]),function t(e,n){for(var r in e)if(-1===r.indexOf("defaults")&&i(e[r])){var a=h(e,r,n);m[a]?t(e[r],a):c.push({code:"unused",path:a})}}(s,"layout")):c.push({code:"layout"}),i(u)){for(var y,b={},_=0;_<g.length;_++){var x=g[_];y=x.type,b[y]=(b[y]||0)+1,x._fullInput._template||c.push({code:"missing",index:x._fullInput.index,traceType:y})}for(y in u){var w=u[y].length,A=b[y]||0;w>A?c.push({code:"unused",traceType:y,templateCount:w,dataCount:A}):A>w&&c.push({code:"reused",traceType:y,templateCount:w,dataCount:A})}}else c.push({code:"data"});if(function t(e,n){for(var r in e)if("_"!==r.charAt(0)){var a=e[r],o=h(e,r,n);i(a)?(Array.isArray(e)&&!1===a._template&&a.templateitemname&&c.push({code:"missing",path:o,templateitemname:a.templateitemname}),t(a,o)):Array.isArray(a)&&p(a)&&t(a,o)}}({data:g,layout:d},""),c.length)return c.map(v)}},{"../lib":160,"../plots/attributes":201,"../plots/plots":236,"./plot_config":192,"./plot_schema":193,"./plot_template":194}],197:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./plot_api"),a=t("../lib"),o=t("../snapshot/helpers"),s=t("../snapshot/tosvg"),u=t("../snapshot/svgtoimg"),l={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};e.exports=function(t,e){var n,c,f,d;function h(t){return!(t in e)||a.validate(e[t],l[t])}if(e=e||{},a.isPlainObject(t)?(n=t.data||[],c=t.layout||{},f=t.config||{},d={}):(t=a.getGraphDiv(t),n=a.extendDeep([],t.data),c=a.extendDeep({},t.layout),f=t._context,d=t._fullLayout||{}),!h("width")&&null!==e.width||!h("height")&&null!==e.height)throw new Error("Height and width should be pixel values.");if(!h("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var p={};function v(t,n){return a.coerce(e,p,l,t,n)}var g=v("format"),m=v("width"),y=v("height"),b=v("scale"),_=v("setBackground"),x=v("imageDataOnly"),w=document.createElement("div");w.style.position="absolute",w.style.left="-5000px",document.body.appendChild(w);var A=a.extendFlat({},c);m?A.width=m:null===e.width&&r(d.width)&&(A.width=d.width),y?A.height=y:null===e.height&&r(d.height)&&(A.height=d.height);var k=a.extendFlat({},f,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),M=o.getRedrawFunc(w);function T(){return new Promise(function(t){setTimeout(t,o.getDelay(w._fullLayout))})}function S(){return new Promise(function(t,e){var n=s(w,g,b),r=w._fullLayout.width,l=w._fullLayout.height;if(i.purge(w),document.body.removeChild(w),"svg"===g)return t(x?n:o.encodeSVG(n));var c=document.createElement("canvas");c.id=a.randstr(),u({format:g,width:r,height:l,scale:b,canvas:c,svg:n,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){i.plot(w,n,A,k).then(M).then(T).then(S).then(function(e){t(function(t){return x?t.replace(o.IMAGE_URL_PREFIX,""):t}(e))}).catch(function(t){e(t)})})}},{"../lib":160,"../snapshot/helpers":247,"../snapshot/svgtoimg":249,"../snapshot/tosvg":251,"./plot_api":191,"fast-isnumeric":9}],198:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plots/plots"),a=t("./plot_schema"),o=t("./plot_config").dfltConfig,s=r.isPlainObject,u=Array.isArray,l=r.isArrayOrTypedArray;function c(t,e,n,i,a,o){o=o||[];for(var f=Object.keys(t),d=0;d<f.length;d++){var g=f[d];if("transforms"!==g){var m=o.slice();m.push(g);var y=t[g],b=e[g],_=v(n,g),x="info_array"===(_||{}).valType,w="colorscale"===(_||{}).valType,A=(_||{}).items;if(p(n,g))if(s(y)&&s(b))c(y,b,_,i,a,m);else if(x&&u(y)){y.length>b.length&&i.push(h("unused",a,m.concat(b.length)));var k,M,T,S,C,E=b.length,O=Array.isArray(A);if(O&&(E=Math.min(E,A.length)),2===_.dimensions)for(M=0;M<E;M++)if(u(y[M])){y[M].length>b[M].length&&i.push(h("unused",a,m.concat(M,b[M].length)));var P=b[M].length;for(k=0;k<(O?Math.min(P,A[M].length):P);k++)T=O?A[M][k]:A,S=y[M][k],C=b[M][k],r.validate(S,T)?C!==S&&C!==+S&&i.push(h("dynamic",a,m.concat(M,k),S,C)):i.push(h("value",a,m.concat(M,k),S))}else i.push(h("array",a,m.concat(M),y[M]));else for(M=0;M<E;M++)T=O?A[M]:A,S=y[M],C=b[M],r.validate(S,T)?C!==S&&C!==+S&&i.push(h("dynamic",a,m.concat(M),S,C)):i.push(h("value",a,m.concat(M),S))}else if(_.items&&!x&&u(y)){var L,R,D=A[Object.keys(A)[0]],F=[];for(L=0;L<b.length;L++){var j=b[L]._index||L;if((R=m.slice()).push(j),s(y[j])&&s(b[L])){F.push(j);var N=y[j],z=b[L];s(N)&&!1!==N.visible&&!1===z.visible?i.push(h("invisible",a,R)):c(N,z,D,i,a,R)}}for(L=0;L<y.length;L++)(R=m.slice()).push(L),s(y[L])?-1===F.indexOf(L)&&i.push(h("unused",a,R)):i.push(h("object",a,R,y[L]))}else!s(y)&&s(b)?i.push(h("object",a,m,y)):l(y)||!l(b)||x||w?g in e?r.validate(y,_)?"enumerated"===_.valType&&(_.coerceNumber&&y!==+b||y!==b)&&i.push(h("dynamic",a,m,y,b)):i.push(h("value",a,m,y)):i.push(h("unused",a,m,y)):i.push(h("array",a,m,y));else i.push(h("schema",a,m))}}return i}e.exports=function(t,e){var n,l,f=a.get(),d=[],p={_context:r.extendFlat({},o)};u(t)?(p.data=r.extendDeep([],t),n=t):(p.data=[],n=[],d.push(h("array","data"))),s(e)?(p.layout=r.extendDeep({},e),l=e):(p.layout={},l={},arguments.length>1&&d.push(h("object","layout"))),i.supplyDefaults(p);for(var v=p._fullData,g=n.length,m=0;m<g;m++){var y=n[m],b=["data",m];if(s(y)){var _=v[m],x=_.type,w=f.traces[x].attributes;w.type={valType:"enumerated",values:[x]},!1===_.visible&&!1!==y.visible&&d.push(h("invisible",b)),c(y,_,w,d,b);var A=y.transforms,k=_.transforms;if(A){u(A)||d.push(h("array",b,["transforms"])),b.push("transforms");for(var M=0;M<A.length;M++){var T=["transforms",M],S=A[M].type;if(s(A[M])){var C=f.transforms[S]?f.transforms[S].attributes:{};C.type={valType:"enumerated",values:Object.keys(f.transforms)},c(A[M],k[M],C,d,b,T)}else d.push(h("object",b,T))}}}else d.push(h("object",b))}var E=p._fullLayout,O=function(t,e){for(var n=t.layout.layoutAttributes,i=0;i<e.length;i++){var a=e[i],o=t.traces[a.type],s=o.layoutAttributes;s&&(a.subplot?r.extendFlat(n[o.attributes.subplot.dflt],s):r.extendFlat(n,s))}return n}(f,v);return c(l,E,O,d,"layout"),0===d.length?void 0:d};var f={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":d(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":d(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return d(t)+"key "+e+" is not part of the schema"},unused:function(t,e,n){var r=s(n)?"container":"key";return d(t)+r+" "+e+" did not get coerced"},dynamic:function(t,e,n,r){return[d(t)+"key",e,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?d(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,n){return[d(t)+"key "+e,"is set to an invalid value ("+n+")"].join(" ")}};function d(t){return u(t)?"In data trace "+t[1]+", ":"In "+t+", "}function h(t,e,n,i,a){var o,s;n=n||"",u(e)?(o=e[0],s=e[1]):(o=e,s=null);var l=function(t){if(!u(t))return String(t);for(var e="",n=0;n<t.length;n++){var r=t[n];"number"===typeof r?e=e.substr(0,e.length-1)+"["+r+"]":e+=r,n<t.length-1&&(e+=".")}return e}(n),c=f[t](e,l,i,a);return r.log(c),{code:t,container:o,trace:s,path:n,astr:l,msg:c}}function p(t,e){var n=m(e),r=n.keyMinusId,i=n.id;return!!(r in t&&t[r]._isSubplotObj&&i)||e in t}function v(t,e){if(e in t)return t[e];var n=m(e);return t[n.keyMinusId]}var g=r.counterRegex("([a-z]+)");function m(t){var e=t.match(g);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":160,"../plots/plots":236,"./plot_config":192,"./plot_schema":193}],199:[function(t,e,n){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],200:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plot_api/plot_template");e.exports=function(t,e,n){var a,o,s=n.name,u=n.inclusionAttr||"visible",l=e[s],c=r.isArrayOrTypedArray(t[s])?t[s]:[],f=e[s]=[],d=i.arrayTemplater(e,s,u);for(a=0;a<c.length;a++){var h=c[a];r.isPlainObject(h)?o=d.newItem(h):(o=d.newItem({}))[u]=!1,o._index=a,!1!==o[u]&&n.handleItemDefaults(h,o,e,n),f.push(o)}var p=d.defaultItems();for(a=0;a<p.length;a++)(o=p[a])._index=f.length,n.handleItemDefaults({},o,e,n,{}),f.push(o);if(r.isArrayOrTypedArray(l)){var v=Math.min(l.length,f.length);for(a=0;a<v;a++)r.relinkPrivateKeys(f[a],l[a])}return f}},{"../lib":160,"../plot_api/plot_template":194}],201:[function(t,e,n){"use strict";var r=t("../components/fx/attributes");e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":72}],202:[function(t,e,n){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],203:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../constants/numerical").FP_SAFE,o=t("../../registry");function s(t,e){var n,r,a=[],o=u(e),s=l(t,e),c=s.min,f=s.max;if(0===c.length||0===f.length)return i.simpleMap(e.range,e.r2l);var d=c[0].val,h=f[0].val;for(n=1;n<c.length&&d===h;n++)d=Math.min(d,c[n].val);for(n=1;n<f.length&&d===h;n++)h=Math.max(h,f[n].val);var p=!1;if(e.range){var v=i.simpleMap(e.range,e.r2l);p=v[1]<v[0]}"reversed"===e.autorange&&(p=!0,e.autorange=!0);var g,m,y,b,_,x,w=e.rangemode,A="tozero"===w,k="nonnegative"===w,M=e._length,T=M/10,S=0;for(n=0;n<c.length;n++)for(g=c[n],r=0;r<f.length;r++)m=f[r],(x=m.val-g.val)>0&&((_=M-o(g)-o(m))>T?x/_>S&&(y=g,b=m,S=x/_):x/M>S&&(y={val:g.val,pad:0},b={val:m.val,pad:0},S=x/M));if(d===h){var C=d-1,E=d+1;if(A)if(0===d)a=[0,1];else{var O=(d>0?f:c).reduce(function(t,e){return Math.max(t,o(e))},0),P=d/(1-Math.min(.5,O/M));a=d>0?[0,P]:[P,0]}else a=k?[Math.max(0,C),Math.max(1,E)]:[C,E]}else A?(y.val>=0&&(y={val:0,pad:0}),b.val<=0&&(b={val:0,pad:0})):k&&(y.val-S*o(y)<0&&(y={val:0,pad:0}),b.val<=0&&(b={val:1,pad:0})),S=(b.val-y.val)/(M-o(y)-o(b)),a=[y.val-S*o(y),b.val+S*o(b)];return p&&a.reverse(),i.simpleMap(a,e.l2r||Number)}function u(t){var e=t._length/20;return"domain"===t.constrain&&t._inputDomain&&(e*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(t){return t.pad+(t.extrapad?e:0)}}function l(t,e){var n,r,i,a=e._id,o=t._fullData,s=t._fullLayout,u=[],l=[];function d(t,e){for(n=0;n<e.length;n++){var o=t[e[n]],s=(o._extremes||{})[a];if(!0===o.visible&&s){for(r=0;r<s.min.length;r++)i=s.min[r],c(u,i.val,i.pad,{extrapad:i.extrapad});for(r=0;r<s.max.length;r++)i=s.max[r],f(l,i.val,i.pad,{extrapad:i.extrapad})}}}return d(o,e._traceIndices),d(s.annotations||[],e._annIndices||[]),d(s.shapes||[],e._shapeIndices||[]),{min:u,max:l}}function c(t,e,n,r){d(t,e,n,r,p)}function f(t,e,n,r){d(t,e,n,r,v)}function d(t,e,n,r,i){for(var a=r.tozero,o=r.extrapad,s=!0,u=0;u<t.length&&s;u++){var l=t[u];if(i(l.val,e)&&l.pad>=n&&(l.extrapad||!o)){s=!1;break}i(e,l.val)&&l.pad<=n&&(o||!l.extrapad)&&(t.splice(u,1),u--)}if(s){var c=a&&0===e;t.push({val:e,pad:c?0:n,extrapad:!c&&o})}}function h(t){return r(t)&&Math.abs(t)<a}function p(t,e){return t<=e}function v(t,e){return t>=e}e.exports={getAutoRange:s,makePadFn:u,doAutoRange:function(t,e){if(e.setScale(),e.autorange){e.range=s(t,e),e._r=e.range.slice(),e._rl=i.simpleMap(e._r,e.r2l);var n=e._input,r={};r[e._attr+".range"]=e.range,r[e._attr+".autorange"]=e.autorange,o.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,r),n.range=e.range.slice(),n.autorange=e.autorange}var a=e._anchorAxis;if(a&&a.rangeslider){var u=a.rangeslider[e._name];u&&"auto"===u.rangemode&&(u.range=s(t,e)),a._input.rangeslider[e._name]=i.extendFlat({},u)}},findExtremes:function(t,e,n){n||(n={}),t._m||t.setScale();var i,o,s,u,l,d,p,v,g,m=[],y=[],b=e.length,_=n.padded||!1,x=n.tozero&&("linear"===t.type||"-"===t.type),w="log"===t.type,A=!1;function k(t){if(Array.isArray(t))return A=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var M=k((t._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),T=k((t._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),S=k(n.vpadplus||n.vpad),C=k(n.vpadminus||n.vpad);if(!A){if(v=1/0,g=-1/0,w)for(i=0;i<b;i++)(o=e[i])<v&&o>0&&(v=o),o>g&&o<a&&(g=o);else for(i=0;i<b;i++)(o=e[i])<v&&o>-a&&(v=o),o>g&&o<a&&(g=o);e=[v,g],b=2}var E={tozero:x,extrapad:_};function O(n){s=e[n],r(s)&&(d=M(n),p=T(n),v=s-C(n),g=s+S(n),w&&v<g/10&&(v=g/10),u=t.c2l(v),l=t.c2l(g),x&&(u=Math.min(0,u),l=Math.max(0,l)),h(u)&&c(m,u,p,E),h(l)&&f(y,l,d,E))}var P=Math.min(6,b);for(i=0;i<P;i++)O(i);for(i=b-1;i>=P;i--)O(i);return{min:m,max:y,opts:n}},concatExtremes:l}},{"../../constants/numerical":140,"../../lib":160,"../../registry":243,"fast-isnumeric":9}],204:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib"),u=t("../../lib/svg_text_utils"),l=t("../../components/titles"),c=t("../../components/color"),f=t("../../components/drawing"),d=t("./layout_attributes"),h=t("./clean_ticks"),p=t("../../constants/numerical"),v=p.ONEAVGYEAR,g=p.ONEAVGMONTH,m=p.ONEDAY,y=p.ONEHOUR,b=p.ONEMIN,_=p.ONESEC,x=p.MINUS_SIGN,w=p.BADNUM,A=t("../../constants/alignment").MID_SHIFT,k=t("../../constants/alignment").LINE_SPACING,M=e.exports={};M.setConvert=t("./set_convert");var T=t("./axis_autotype"),S=t("./axis_ids");M.id2name=S.id2name,M.name2id=S.name2id,M.cleanId=S.cleanId,M.list=S.list,M.listIds=S.listIds,M.getFromId=S.getFromId,M.getFromTrace=S.getFromTrace;var C=t("./autorange");M.getAutoRange=C.getAutoRange,M.findExtremes=C.findExtremes,M.coerceRef=function(t,e,n,r,i,a){var o=r.charAt(r.length-1),u=n._fullLayout._subplots[o+"axis"],l=r+"ref",c={};return i||(i=u[0]||a),a||(a=i),c[l]={valType:"enumerated",values:u.concat(a?[a]:[]),dflt:i},s.coerce(t,e,c,l)},M.coercePosition=function(t,e,n,r,i,a){var o,u;if("paper"===r||"pixel"===r)o=s.ensureNumber,u=n(i,a);else{var l=M.getFromId(e,r);a=l.fraction2r(a),u=n(i,a),o=l.cleanPos}t[i]=o(u)},M.cleanPosition=function(t,e,n){var r="paper"===n||"pixel"===n?s.ensureNumber:M.getFromId(e,n).cleanPos;return r(t)},M.redrawComponents=function(t,e){e=e||M.listIds(t);var n=t._fullLayout;function r(r,i,a,s){for(var u=o.getComponentMethod(r,i),l={},c=0;c<e.length;c++)for(var f=n[M.id2name(e[c])],d=f[a],h=0;h<d.length;h++){var p=d[h];if(!l[p]&&(u(t,p),l[p]=1,s))return}}r("annotations","drawOne","_annIndices"),r("shapes","drawOne","_shapeIndices"),r("images","draw","_imgIndices",!0)};var E=M.getDataConversions=function(t,e,n,r){var i,a="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(a)){if(i={type:T(r),_categories:[]},M.setConvert(i),"category"===i.type)for(var o=0;o<r.length;o++)i.d2c(r[o])}else i=M.getFromTrace(t,e,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:P,c2d:P}:{d2c:O,c2d:O}};function O(t){return+t}function P(t){return String(t)}M.getDataToCoordFunc=function(t,e,n,r){return E(t,e,n,r).d2c},M.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},M.minDtick=function(t,e,n,r){-1===["log","category","multicategory"].indexOf(t.type)&&r?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=n):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((n-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=n):((e/t._minDtick+1e-6)%1>2e-6||((n-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},M.saveRangeInitial=function(t,e){for(var n=M.list(t,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||e&&s)&&(a._rangeInitial=a.range.slice(),r=!0)}return r},M.saveShowSpikeInitial=function(t,e){for(var n=M.list(t,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,u=s||!(o.showspikes===o._showspikes);(s||e&&u)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,r},M.autoBin=function(t,e,n,r,a,o){var u,l=s.aggNums(Math.min,null,t),c=s.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:l-.5,end:c+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:c-l};if(a||(a=e.calendar),u="log"===e.type?{type:"linear",range:[l,c]}:{type:e.type,range:s.simpleMap([l,c],e.c2r,0,a),calendar:a},M.setConvert(u),o=o&&h.dtick(o,u.type))u.dtick=o,u.tick0=h.tick0(void 0,u.type,a);else{var f;if(n)f=(c-l)/n;else{var d=s.distinctVals(t),p=Math.pow(10,Math.floor(Math.log(d.minDiff)/Math.LN10)),v=p*s.roundUp(d.minDiff/p,[.9,1.9,4.9,9.9],!0);f=Math.max(v,2*s.stdev(t)/Math.pow(t.length,r?.25:.4)),i(f)||(f=1)}M.autoTicks(u,f)}var g,y,b=u.dtick,_=M.tickIncrement(M.tickFirst(u),b,"reverse",a);if("number"===typeof b)_=function(t,e,n,r,a){var o=0,s=0,u=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var f=0;f<e.length;f++)e[f]%1===0?u++:i(e[f])||l++,c(e[f])&&o++,c(e[f]+n.dtick/2)&&s++;var d=e.length-l;if(u===d&&"date"!==n.type)n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick);else if(s<.1*d&&(o>.3*d||c(r)||c(a))){var h=n.dtick/2;t+=t+h<r?h:-h}return t}(_,t,u,l,c),y=1+Math.floor((c-_)/b),g=_+y*b;else for("M"===u.dtick.charAt(0)&&(_=function(t,e,n,r,i){var a=s.findExactDates(e,i);if(a.exactDays>.8){var o=Number(n.substr(1));a.exactYears>.8&&o%12===0?t=M.tickIncrement(t,"M6","reverse")+1.5*m:a.exactMonths>.8?t=M.tickIncrement(t,"M1","reverse")+15.5*m:t-=m/2;var u=M.tickIncrement(t,n);if(u<=r)return u}return t}(_,t,b,l,a)),g=_,y=0;g<=c;)g=M.tickIncrement(g,b,!1,a),y++;return{start:e.c2r(_,0,a),end:e.c2r(g,0,a),size:b,_dataSpan:c-l}},M.prepTicks=function(t){var e=s.simpleMap(t.range,t.r2l);if("auto"===t.tickmode||!t.dtick){var n,r=t.nticks;r||("category"===t.type||"multicategory"===t.type?(n=t.tickfont?1.2*(t.tickfont.size||12):15,r=t._length/n):(n="y"===t._id.charAt(0)?40:80,r=s.constrain(t._length/n,4,9)+1),"radialaxis"===t._name&&(r*=2)),"array"===t.tickmode&&(r*=100),M.autoTicks(t,Math.abs(e[1]-e[0])/r),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),B(t)},M.calcTicks=function(t){M.prepTicks(t);var e=s.simpleMap(t.range,t.r2l);if("array"===t.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,r=new Array(e.length),i=s.simpleMap(t.range,t.r2l),a=1.0001*i[0]-1e-4*i[1],o=1.0001*i[1]-1e-4*i[0],u=Math.min(a,o),l=Math.max(a,o),c=0;Array.isArray(n)||(n=[]);var f="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var d=0;d<e.length;d++){var h=f(e[d]);h>u&&h<l&&(void 0===n[d]?r[c]=M.tickText(t,h):r[c]=q(t,h,String(n[d])),c++)}return c<e.length&&r.splice(c,e.length-c),r}(t);t._tmin=M.tickFirst(t);var n=1.0001*e[0]-1e-4*e[1],r=1.0001*e[1]-1e-4*e[0],a=e[1]<e[0];if(t._tmin<n!==a)return[];var o=[];"category"!==t.type&&"multicategory"!==t.type||(r=a?Math.max(-.5,r):Math.min(t._categories.length-.5,r));for(var u="log"===t.type&&!(i(t.dtick)||"L"===t.dtick.charAt(0)),l=null,c=Math.max(1e3,t._length||0),f=t._tmin;(a?f>=r:f<=r)&&!(o.length>c||f===l);f=M.tickIncrement(f,t.dtick,a,t.calendar)){l=f;var d=!1;u&&f!==(0|f)&&(d=!0),o.push({minor:d,value:f})}rt(t)&&360===Math.abs(e[1]-e[0])&&o.pop(),t._tmax=(o[o.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;for(var h=new Array(o.length),p=0;p<o.length;p++)h[p]=M.tickText(t,o[p].value,!1,o[p].minor);return t._inCalcTicks=!1,h};var L=[2,5,10],R=[1,2,3,6,12],D=[1,2,5,10,15,30],F=[1,2,3,7,14],j=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],N=[-.301,0,.301,.699,1],z=[15,30,45,90,180];function I(t,e,n){return e*s.roundUp(t/e,n)}function B(t){var e=t.dtick;if(t._tickexponent=0,i(e)||"string"===typeof e||(e=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type){var n=t.r2l(t.tick0),r=t.l2r(n).replace(/(^-|i)/g,""),a=r.length;if("M"===String(e).charAt(0))a>10||"01-01"!==r.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12===0?"y":"m";else if(e>=m&&a<=10||e>=15*m)t._tickround="d";else if(e>=b&&a<=16||e>=y)t._tickround="M";else if(e>=_&&a<=19||e>=b)t._tickround="S";else{var o=t.l2r(n+e).replace(/^-/,"").length;t._tickround=Math.max(a,o)-20,t._tickround<0&&(t._tickround=4)}}else if(i(e)||"L"===e.charAt(0)){var s=t.range.map(t.r2d||Number);i(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var u=Math.max(Math.abs(s[0]),Math.abs(s[1])),l=Math.floor(Math.log(u)/Math.LN10+.01);Math.abs(l)>3&&(H(t.exponentformat)&&!W(l)?t._tickexponent=3*Math.round((l-1)/3):t._tickexponent=l)}else t._tickround=null}function q(t,e,n){var r=t.tickfont||{};return{x:e,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}M.autoTicks=function(t,e){var n;function r(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=s.dateTick0(t.calendar);var a=2*e;a>v?(e/=v,n=r(10),t.dtick="M"+12*I(e,n,L)):a>g?(e/=g,t.dtick="M"+I(e,1,R)):a>m?(t.dtick=I(e,m,F),t.tick0=s.dateTick0(t.calendar,!0)):a>y?t.dtick=I(e,y,R):a>b?t.dtick=I(e,b,D):a>_?t.dtick=I(e,_,D):(n=r(10),t.dtick=I(e,n,L))}else if("log"===t.type){t.tick0=0;var o=s.simpleMap(t.range,t.r2l);if(e>.7)t.dtick=Math.ceil(e);else if(Math.abs(o[1]-o[0])<1){var u=1.5*Math.abs((o[1]-o[0])/e);e=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/u,n=r(10),t.dtick="L"+I(e,n,L)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):rt(t)?(t.tick0=0,n=1,t.dtick=I(e,n,z)):(t.tick0=0,n=r(10),t.dtick=I(e,n,L));if(0===t.dtick&&(t.dtick=1),!i(t.dtick)&&"string"!==typeof t.dtick){var l=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(l)}},M.tickIncrement=function(t,e,n,a){var o=n?-1:1;if(i(e))return t+o*e;var u=e.charAt(0),l=o*Number(e.substr(1));if("M"===u)return s.incrementMonth(t,l,a);if("L"===u)return Math.log(Math.pow(10,t)+l)/Math.LN10;if("D"===u){var c="D2"===e?N:j,f=t+.01*o,d=s.roundUp(s.mod(f,1),c,n);return Math.floor(f)+Math.log(r.round(Math.pow(10,d),1))/Math.LN10}throw"unrecognized dtick "+String(e)},M.tickFirst=function(t){var e=t.r2l||Number,n=s.simpleMap(t.range,e),a=n[1]<n[0],o=a?Math.floor:Math.ceil,u=1.0001*n[0]-1e-4*n[1],l=t.dtick,c=e(t.tick0);if(i(l)){var f=o((u-c)/l)*l+c;return"category"!==t.type&&"multicategory"!==t.type||(f=s.constrain(f,0,t._categories.length-1)),f}var d=l.charAt(0),h=Number(l.substr(1));if("M"===d){for(var p,v,g,m=0,y=c;m<10;){if(((p=M.tickIncrement(y,l,a,t.calendar))-u)*(y-u)<=0)return a?Math.min(y,p):Math.max(y,p);v=(u-(y+p)/2)/(p-y),g=d+(Math.abs(Math.round(v))||1)*h,y=M.tickIncrement(y,g,v<0?!a:a,t.calendar),m++}return s.error("tickFirst did not converge",t),y}if("L"===d)return Math.log(o((Math.pow(10,u)-c)/h)*h+c)/Math.LN10;if("D"===d){var b="D2"===l?N:j,_=s.roundUp(s.mod(u,1),b,a);return Math.floor(u)+Math.log(r.round(Math.pow(10,_),1))/Math.LN10}throw"unrecognized dtick "+String(l)},M.tickText=function(t,e,n,r){var a,o=q(t,e),u="array"===t.tickmode,l=n||u,c=t.type,f="category"===c?t.d2l_noadd:t.d2l;if(u&&Array.isArray(t.ticktext)){var d=s.simpleMap(t.range,t.r2l),h=Math.abs(d[1]-d[0])/1e4;for(a=0;a<t.ticktext.length&&!(Math.abs(e-f(t.tickvals[a]))<h);a++);if(a<t.ticktext.length)return o.text=String(t.ticktext[a]),o}function p(r){if(void 0===r)return!0;if(n)return"none"===r;var i={first:t._tmin,last:t._tmax}[r];return"all"!==r&&e!==i}var v=n?"never":"none"!==t.exponentformat&&p(t.showexponent)?"hide":"";if("date"===c?function(t,e,n,r){var a=t._tickround,o=n&&t.hoverformat||M.getTickFormat(t);r&&(a=i(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var u,l=s.formatDate(e.x,o,a,t._dateFormat,t.calendar,t._extraFormat),c=l.indexOf("\n");-1!==c&&(u=l.substr(c+1),l=l.substr(0,c)),r&&("00:00:00"===l||"00:00"===l?(l=u,u=""):8===l.length&&(l=l.replace(/:00$/,""))),u&&(n?"d"===a?l+=", "+u:l=u+(l?", "+l:""):t._inCalcTicks&&u===t._prevDateHead||(l+="<br>"+u,t._prevDateHead=u)),e.text=l}(t,o,n,l):"log"===c?function(t,e,n,r,a){var o=t.dtick,u=e.x,l=t.tickformat,c="string"===typeof o&&o.charAt(0);if("never"===a&&(a=""),r&&"L"!==c&&(o="L3",c="L"),l||"L"===c)e.text=G(Math.pow(10,u),t,a,r);else if(i(o)||"D"===c&&s.mod(u+.01,1)<.1){var f=Math.round(u),d=Math.abs(f),h=t.exponentformat;"power"===h||H(h)&&W(f)?(e.text=0===f?1:1===f?"10":"10<sup>"+(f>1?"":x)+d+"</sup>",e.fontSize*=1.25):("e"===h||"E"===h)&&d>2?e.text="1"+h+(f>0?"+":x)+d:(e.text=G(Math.pow(10,u),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==c)throw"unrecognized dtick "+String(o);e.text=String(Math.round(Math.pow(10,s.mod(u,1)))),e.fontSize*=.75}if("D1"===t.dtick){var p=String(e.text).charAt(0);"0"!==p&&"1"!==p||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(u<0?.5:.25)))}}(t,o,0,l,v):"category"===c?function(t,e){var n=t._categories[Math.round(e.x)];void 0===n&&(n=""),e.text=String(n)}(t,o):"multicategory"===c?function(t,e,n){var r=Math.round(e.x),i=t._categories[r]||[],a=void 0===i[1]?"":String(i[1]),o=void 0===i[0]?"":String(i[0]);n?e.text=o+" - "+a:(e.text=a,e.text2=o)}(t,o,n):rt(t)?function(t,e,n,r,i){if("radians"!==t.thetaunit||n)e.text=G(e.x,t,i,r);else{var a=e.x/180;if(0===a)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var n=function(t){for(var n=1;!e(Math.round(t*n)/n,t);)n*=10;return n}(t),r=t*n,i=Math.abs(function t(n,r){return e(r,0)?n:t(r,n%r)}(r,n));return[Math.round(r/i),Math.round(n/i)]}(a);if(o[1]>=100)e.text=G(s.deg2rad(e.x),t,i,r);else{var u=e.x<0;1===o[1]?1===o[0]?e.text="\u03c0":e.text=o[0]+"\u03c0":e.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join(""),u&&(e.text=x+e.text)}}}}(t,o,n,l,v):function(t,e,n,r,i){"never"===i?i="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide"),e.text=G(e.x,t,i,r)}(t,o,0,l,v),r||(t.tickprefix&&!p(t.showtickprefix)&&(o.text=t.tickprefix+o.text),t.ticksuffix&&!p(t.showticksuffix)&&(o.text+=t.ticksuffix)),"boundaries"===t.tickson||t.showdividers){var g=function(e){var n=t.l2p(e);return n>=0&&n<=t._length?e:null};o.xbnd=[g(o.x-.5),g(o.x+t.dtick-.5)]}return o},M.hoverLabelText=function(t,e,n){if(n!==w&&n!==e)return M.hoverLabelText(t,e)+" - "+M.hoverLabelText(t,n);var r="log"===t.type&&e<=0,i=M.tickText(t,t.c2l(r?-e:e),"hover").text;return r?0===e?"0":x+i:i};var U=["f","p","n","\u03bc","m","","k","M","G","T"];function H(t){return"SI"===t||"B"===t}function W(t){return t>14||t<-15}function G(t,e,n,r){var a=t<0,o=e._tickround,u=n||e.exponentformat||"B",l=e._tickexponent,c=M.getTickFormat(e),f=e.separatethousands;if(r){var d={exponentformat:u,dtick:"none"===e.showexponent?e.dtick:i(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};B(d),o=(Number(d._tickround)||0)+4,l=d._tickexponent,e.hoverformat&&(c=e.hoverformat)}if(c)return e._numFormat(c)(t).replace(/-/g,x);var h,p=Math.pow(10,-o)/2;if("none"===u&&(l=0),(t=Math.abs(t))<p)t="0",a=!1;else{if(t+=p,l&&(t*=Math.pow(10,-l),o+=l),0===o)t=String(Math.floor(t));else if(o<0){t=(t=String(Math.round(t))).substr(0,t.length+o);for(var v=o;v<0;v++)t+="0"}else{var g=(t=String(t)).indexOf(".")+1;g&&(t=t.substr(0,g+o).replace(/\.?0+$/,""))}t=s.numSeparate(t,e._separators,f)}return l&&"hide"!==u&&(H(u)&&W(l)&&(u="power"),h=l<0?x+-l:"power"!==u?"+"+l:String(l),"e"===u||"E"===u?t+=u+h:"power"===u?t+="\xd710<sup>"+h+"</sup>":"B"===u&&9===l?t+="B":H(u)&&(t+=U[l/3+5])),a?x+t:t}function V(t,e){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i];r[a.text2]?r[a.text2].push(a.x):r[a.text2]=[a.x]}for(var o in r)n.push(q(t,s.interp(r[o],.5),o));return n}function Y(t,e){var n=t._id.charAt(0),r=t._tickAngles[e]||0,i=s.deg2rad(r),a=Math.sin(i),o=Math.cos(i),u=0,l=0;return t._selections[e].each(function(){var t=J(this),e=f.bBox(t.node()),n=e.width,r=e.height;u=Math.max(u,o*n,a*r),l=Math.max(l,a*n,o*r)}),{x:l,y:u}[n]}function Z(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function X(t,e){var n,r=t._fullLayout._size,i=e._id.charAt(0),a=e.side;return"free"!==e.anchor?n=S.getFromId(t,e.anchor):"x"===i?n={_offset:r.t+(1-(e.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(e.position||0)*r.w,_length:0}),"top"===a||"left"===a?n._offset:"bottom"===a||"right"===a?n._offset+n._length:void 0}function $(t,e){var n=t.l2p(e);return n>1&&n<t._length-1}function J(t){var e=r.select(t),n=e.select(".text-math-group");return n.empty()?e.select("text"):n}function K(t){return t._id+".automargin"}function Q(t){return t._id+".rangeslider"}function tt(t,e){for(var n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n])}function et(t,e,n){var r,i,a=[],o=[],u=t.layout;for(r=0;r<e.length;r++)a.push(M.getFromId(t,e[r]));for(r=0;r<n.length;r++)o.push(M.getFromId(t,n[r]));var l=Object.keys(d),c=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(r=0;r<l.length;r++){var h=l[r],p=a[0][h],v=o[0][h],g=!0,m=!1,y=!1;if("_"!==h.charAt(0)&&"function"!==typeof p&&-1===c.indexOf(h)){for(i=1;i<a.length&&g;i++){var b=a[i][h];"type"===h&&-1!==f.indexOf(p)&&-1!==f.indexOf(b)&&p!==b?m=!0:b!==p&&(g=!1)}for(i=1;i<o.length&&g;i++){var _=o[i][h];"type"===h&&-1!==f.indexOf(v)&&-1!==f.indexOf(_)&&v!==_?y=!0:o[i][h]!==v&&(g=!1)}g&&(m&&(u[a[0]._name].type="linear"),y&&(u[o[0]._name].type="linear"),nt(u,h,a,o,t._fullLayout._dfltTitle))}}for(r=0;r<t._fullLayout.annotations.length;r++){var x=t._fullLayout.annotations[r];-1!==e.indexOf(x.xref)&&-1!==n.indexOf(x.yref)&&s.swapAttrs(u.annotations[r],["?"])}}function nt(t,e,n,r,i){var a,o=s.nestedProperty,u=o(t[n[0]._name],e).get(),l=o(t[r[0]._name],e).get();for("title"===e&&(u&&u.text===i.x&&(u.text=i.y),l&&l.text===i.y&&(l.text=i.x)),a=0;a<n.length;a++)o(t,n[a]._name+"."+e).set(l);for(a=0;a<r.length;a++)o(t,r[a]._name+"."+e).set(u)}function rt(t){return"angularaxis"===t._id}M.getTickFormat=function(t){var e,n,r;function i(t){return"string"!==typeof t?t:Number(t.replace("M",""))*g}function a(t,e){var n=["L","D"];if(typeof t===typeof e){if("number"===typeof t)return t-e;var r=n.indexOf(t.charAt(0)),i=n.indexOf(e.charAt(0));return r===i?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):r-i}return"number"===typeof t?1:-1}function o(t,e,n){var r=n||function(t){return t},i=e[0],a=e[1];return(!i&&"number"!==typeof i||r(i)<=r(t))&&(!a&&"number"!==typeof a||r(a)>=r(t))}function s(t,e){var n=null===e[0],r=null===e[1],i=a(t,e[0])>=0,o=a(t,e[1])<=0;return(n||i)&&(r||o)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&o(t.dtick,r.dtickrange,i)){n=r;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&s(t.dtick,r.dtickrange)){n=r;break}}return n?n.value:t.tickformat},M.getSubplots=function(t,e){var n=t._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=e?M.findSubplotsWithAxis(r,e):r;return i.sort(function(t,e){var n=t.substr(1).split("y"),r=e.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]}),i},M.findSubplotsWithAxis=function(t,e){for(var n=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),r=[],i=0;i<t.length;i++){var a=t[i];n.test(a)&&r.push(a)}return r},M.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){var n,i,a={_offset:0,_length:e.width,_id:""},o={_offset:0,_length:e.height,_id:""},s=M.list(t,"x",!0),u=M.list(t,"y",!0),l=[];for(n=0;n<s.length;n++)for(l.push({x:s[n],y:o}),i=0;i<u.length;i++)0===n&&l.push({x:a,y:u[i]}),l.push({x:s[n],y:u[i]});var c=e._clips.selectAll(".axesclip").data(l,function(t){return t.x._id+t.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+e._uid+t.x._id+t.y._id}).append("rect"),c.exit().remove(),c.each(function(t){r.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})}},M.draw=function(t,e,n){var r=t._fullLayout;"redraw"===e&&r._paper.selectAll("g.subplot").each(function(t){var e=t[0],n=r._plots[e],i=n.xaxis,a=n.yaxis;n.xaxislayer.selectAll("."+i._id+"tick").remove(),n.yaxislayer.selectAll("."+a._id+"tick").remove(),n.xaxislayer.selectAll("."+i._id+"tick2").remove(),n.yaxislayer.selectAll("."+a._id+"tick2").remove(),n.xaxislayer.selectAll("."+i._id+"divider").remove(),n.yaxislayer.selectAll("."+a._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+i._id+"title").remove(),r._infolayer.select(".g-"+a._id+"title").remove()});var i=e&&"redraw"!==e?e:M.listIds(t);return s.syncOrAsync(i.map(function(e){return function(){if(e){var r=M.getFromId(t,e),i=M.drawOne(t,r,n);return r._r=r.range.slice(),r._rl=s.simpleMap(r._r,r.r2l),i}}}))},M.drawOne=function(t,e,n){var r,i,u;n=n||{},e.setScale();var d=t._fullLayout,h=e._id,p=h.charAt(0),v=M.counterLetter(h),g=e._mainSubplot,m=e._mainLinePosition,y=e._mainMirrorPosition,b=d._plots[g],_=b[p+"axislayer"],x=e._subplotsWith,w=e._vals=M.calcTicks(e),A=[e.mirror,m,y].join("_");for(r=0;r<w.length;r++)w[r].axInfo=A;if(e.visible){e._selections={},e._tickAngles={};var T,S,C=M.makeTransFn(e);if("boundaries"===e.tickson){var E=function(t,e){var n,r=[],i=function(t,e){var n=t.xbnd[e];null!==n&&r.push(s.extendFlat({},t,{x:n}))};if(e.length){for(n=0;n<e.length;n++)i(e[n],0);i(e[n-1],1)}return r}(0,w);S=M.clipEnds(e,E),T="inside"===e.ticks?S:E}else S=M.clipEnds(e,w),T="inside"===e.ticks?S:w;var O=e._gridVals=S,P=function(t,e){var n,r,i=[],a=function(t,e){var n=t.xbnd[e];null!==n&&i.push(s.extendFlat({},t,{x:n}))};if(t.showdividers&&e.length){for(n=0;n<e.length;n++){var o=e[n];o.text2!==r&&a(o,0),r=o.text2}a(e[n-1],1)}return i}(e,w);if(!d._hasOnlyLargeSploms){var L={};for(r=0;r<x.length;r++){i=x[r];var R=(u=d._plots[i])[v+"axis"],D=R._mainAxis._id;if(!L[D]){L[D]=1;var F="x"===p?"M0,"+R._offset+"v"+R._length:"M"+R._offset+",0h"+R._length;M.drawGrid(t,e,{vals:O,counterAxis:R,layer:u.gridlayer.select("."+h),path:F,transFn:C}),M.drawZeroLine(t,e,{counterAxis:R,layer:u.zerolinelayer,path:F,transFn:C})}}}var j=M.getTickSigns(e),N=[];if(e.ticks){var z,I,B,q=M.makeTickPath(e,m,j[2]);if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(z=M.makeTickPath(e,y,j[3]),I=q+z):(z="",I=q),e.showdividers&&"outside"===e.ticks&&"boundaries"===e.tickson){var U={};for(r=0;r<P.length;r++)U[P[r].x]=1;B=function(t){return U[t.x]?z:I}}else B=I;M.drawTicks(t,e,{vals:T,layer:_,path:B,transFn:C}),N=Object.keys(e._linepositions||{})}for(r=0;r<N.length;r++){i=N[r],u=d._plots[i];var H=e._linepositions[i]||[],W=M.makeTickPath(e,H[0],j[0])+M.makeTickPath(e,H[1],j[1]);M.drawTicks(t,e,{vals:T,layer:u[p+"axislayer"],path:W,transFn:C})}var G=[];if(G.push(function(){return M.drawLabels(t,e,{vals:w,layer:_,transFn:C,labelFns:M.makeLabelFns(e,m)})}),"multicategory"===e.type){var $=0,J={x:2,y:10}[p],tt=j[2]*("inside"===e.ticks?-1:1);G.push(function(){return $+=Y(e,h+"tick")+J,$+=e._tickAngles[h+"tick"]?e.tickfont.size*k:0,M.drawLabels(t,e,{vals:V(e,w),layer:_,cls:h+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:C,labelFns:M.makeLabelFns(e,m+$*tt)})}),G.push(function(){return $+=Y(e,h+"tick2"),e._labelLength=$,function(t,e,n){var r=e._id+"divider",i=n.vals,a=n.layer.selectAll("path."+r).data(i,Z);a.exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(c.stroke,e.dividercolor).style("stroke-width",f.crispRound(t,e.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)}(t,e,{vals:P,layer:_,path:M.makeTickPath(e,m,tt,$),transFn:C})})}var et=o.getComponentMethod("rangeslider","isVisible")(e);return G.push(function(){if(e.showticklabels){var n=t.getBoundingClientRect(),r=_.node().getBoundingClientRect();e._boundingBox={width:r.width,height:r.height,left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,bottom:r.bottom-n.top}}else{var i,a=d._size;"x"===p?(i="free"===e.anchor?a.t+a.h*(1-e.position):a.t+a.h*(1-e._anchorAxis.domain[{bottom:0,top:1}[e.side]]),e._boundingBox={top:i,bottom:i,left:e._offset,right:e._offset+e._length,width:e._length,height:0}):(i="free"===e.anchor?a.l+a.w*e.position:a.l+a.w*e._anchorAxis.domain[{left:0,right:1}[e.side]],e._boundingBox={left:i,right:i,bottom:e._offset+e._length,top:e._offset,height:e._length,width:0})}if(x){for(var o=e._counterSpan=[1/0,-1/0],s=0;s<x.length;s++){var u=d._plots[x[s]],l=u["x"===p?"yaxis":"xaxis"];nt(o,[l._offset,l._offset+l._length])}"free"===e.anchor&&nt(o,"x"===p?[e._boundingBox.bottom,e._boundingBox.top]:[e._boundingBox.right,e._boundingBox.left])}},function(){var n,r,i=e.side.charAt(0);if(et&&(r=o.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),a.autoMargin(t,Q(e),r),e.automargin&&(!et||"b"!==i)){n={x:0,y:0,r:0,l:0,t:0,b:0};var s,u,l=e._boundingBox,c=X(t,e);switch(p+i){case"xb":s=0,u=l.top-c,n[i]=l.height;break;case"xt":s=1,u=c-l.bottom,n[i]=l.height;break;case"yl":s=0,u=c-l.right,n[i]=l.width;break;case"yr":s=1,u=l.left-c,n[i]=l.width}if(n[v]="free"===e.anchor?e.position:e._anchorAxis.domain[s],n[i]>0&&(n[i]+=u),e.title.text!==d._dfltTitle[p]&&(n[i]+=e.title.font.size),"x"===p&&l.width>0){var f=l.right-(e._offset+e._length);f>0&&(n.x=1,n.r=f);var h=e._offset-l.left;h>0&&(n.x=0,n.l=h)}else if("y"===p&&l.height>0){var g=l.bottom-(e._offset+e._length);g>0&&(n.y=0,n.b=g);var m=e._offset-l.top;m>0&&(n.y=1,n.t=m)}}a.autoMargin(t,K(e),n)}),n.skipTitle||et&&e._boundingBox&&"bottom"===e.side||G.push(function(){return function(t,e){var n,r=t._fullLayout,i=e._id,a=i.charAt(0),o=e.title.font.size;n="multicategory"===e.type?e._labelLength:10+1.5*o+(e.linewidth?e.linewidth-1:0);var s,u,c,d,h=X(t,e);if("x"===a?(u=e._offset+e._length/2,c="top"===e.side?-n-o*(e.showticklabels?1:0):n+o*(e.showticklabels?1.5:.5),c+=h):(c=e._offset+e._length/2,u="right"===e.side?n+o*(e.showticklabels?1:.5):-n-o*(e.showticklabels?.5:0),u+=h,s={rotate:"-90",offset:0}),"multicategory"!==e.type){var p=e._selections[e._id+"tick"];if(d={selection:p,side:e.side},p&&p.node()&&p.node().parentNode){var v=f.getTranslate(p.node().parentNode);d.offsetLeft=v.x,d.offsetTop=v.y}}return l.draw(t,i+"title",{propContainer:e,propName:e._name+".title.text",placeholder:r._dfltTitle[a],avoid:d,transform:s,attributes:{x:u,y:c,"text-anchor":"middle"}})}(t,e)}),s.syncOrAsync(G)}function nt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.max(t[1],e[1])}},M.getTickSigns=function(t){var e=t._id.charAt(0),n={x:"top",y:"right"}[e],r=t.side===n?1:-1,i=[-1,1,r,-r];return"inside"!==t.ticks===("x"===e)&&(i=i.map(function(t){return-t})),i},M.makeTransFn=function(t){var e=t._id.charAt(0),n=t._offset;return"x"===e?function(e){return"translate("+(n+t.l2p(e.x))+",0)"}:function(e){return"translate(0,"+(n+t.l2p(e.x))+")"}},M.makeTickPath=function(t,e,n,r){r=void 0!==r?r:t.ticklen;var i=t._id.charAt(0),a=(t.linewidth||1)/2;return"x"===i?"M0,"+(e+a*n)+"v"+r*n:"M"+(e+a*n)+",0h"+r*n},M.makeLabelFns=function(t,e,n){var r=t._id.charAt(0),a="boundaries"!==t.tickson&&"outside"===t.ticks,o=0,u=0;if(a&&(o+=t.ticklen),n&&"outside"===t.ticks){var l=s.deg2rad(n);o=t.ticklen*Math.cos(l)+1,u=t.ticklen*Math.sin(l)}t.showticklabels&&(a||t.showline)&&(o+=.2*t.tickfont.size);var c,f,d,h,p={labelStandoff:o+=(t.linewidth||1)/2,labelShift:u};return"x"===r?(h="bottom"===t.side?1:-1,c=u*h,f=e+o*h,d="bottom"===t.side?1:-.2,p.xFn=function(t){return t.dx+c},p.yFn=function(t){return t.dy+f+t.fontSize*d},p.anchorFn=function(t,e){return i(e)&&0!==e&&180!==e?e*h<0?"end":"start":"middle"},p.heightFn=function(e,n,r){return n<-60||n>60?-.5*r:"top"===t.side?-r:0}):"y"===r&&(h="right"===t.side?1:-1,c=o,f=-u*h,d=90===Math.abs(t.tickangle)?.5:0,p.xFn=function(t){return t.dx+e+(c+t.fontSize*d)*h},p.yFn=function(t){return t.dy+f+t.fontSize*A},p.anchorFn=function(e,n){return i(n)&&90===Math.abs(n)?"middle":"right"===t.side?"start":"end"},p.heightFn=function(e,n,r){return(n*="left"===t.side?1:-1)<-30?-r:n<30?-.5*r:0}),p},M.drawTicks=function(t,e,n){n=n||{};var r=e._id+"tick",i=n.layer.selectAll("path."+r).data(e.ticks?n.vals:[],Z);i.exit().remove(),i.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(c.stroke,e.tickcolor).style("stroke-width",f.crispRound(t,e.tickwidth,1)+"px").attr("d",n.path),i.attr("transform",n.transFn)},M.drawGrid=function(t,e,n){n=n||{};var r=e._id+"grid",i=n.vals,a=n.counterAxis;if(!1===e.showgrid)i=[];else if(a&&M.shouldShowZeroLine(t,e,a))for(var o="array"===e.tickmode,s=0;s<i.length;s++){var u=i[s].x;if(o?!u:Math.abs(u)<e.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!o)break;s--}}var l=n.layer.selectAll("path."+r).data(i,Z);l.exit().remove(),l.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),e._gw=f.crispRound(t,e.gridwidth,1),l.attr("transform",n.transFn).attr("d",n.path).call(c.stroke,e.gridcolor||"#ddd").style("stroke-width",e._gw+"px"),"function"===typeof n.path&&l.attr("d",n.path)},M.drawZeroLine=function(t,e,n){n=n||n;var r=e._id+"zl",i=M.shouldShowZeroLine(t,e,n.counterAxis),a=n.layer.selectAll("path."+r).data(i?[{x:0,id:e._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(t,e){return S.idSort(t.id,e.id)})}),a.attr("transform",n.transFn).attr("d",n.path).call(c.stroke,e.zerolinecolor||c.defaultLine).style("stroke-width",f.crispRound(t,e.zerolinewidth,e._gw||1)+"px")},M.drawLabels=function(t,e,n){n=n||{};var a=e._id,o=a.charAt(0),l=n.cls||a+"tick",c=n.vals,d=n.labelFns,h=n.secondary?0:e.tickangle,p=(e._tickAngles||{})[l],v=n.layer.selectAll("g."+l).data(e.showticklabels?c:[],Z),g=[];function m(t,e){t.each(function(t){var a=r.select(this),o=a.select(".text-math-group"),s=d.anchorFn(t,e),l=n.transFn.call(a.node(),t)+(i(e)&&0!==+e?" rotate("+e+","+d.xFn(t)+","+(d.yFn(t)-t.fontSize/2)+")":""),c=u.lineCount(a),h=k*t.fontSize,p=d.heightFn(t,i(e)?+e:0,(c-1)*h);if(p&&(l+=" translate(0, "+p+")"),o.empty())a.select("text").attr({transform:l,"text-anchor":s});else{var v=f.bBox(o.node()).width,g=v*{end:-.5,start:.5}[s];o.attr("transform",l+(g?"translate("+g+",0)":""))}})}v.enter().append("g").classed(l,1).append("text").attr("text-anchor","middle").each(function(e){var n=r.select(this),i=t._promises.length;n.call(u.positionText,d.xFn(e),d.yFn(e)).call(f.font,e.font,e.fontSize,e.fontColor).text(e.text).call(u.convertToTspans,t),t._promises[i]?g.push(t._promises.pop().then(function(){m(n,h)})):m(n,h)}),v.exit().remove(),n.repositionOnUpdate&&v.each(function(t){r.select(this).select("text").call(u.positionText,d.xFn(t),d.yFn(t))}),m(v,p||h),e._selections&&(e._selections[l]=v);var y=s.syncOrAsync([function(){return g.length&&Promise.all(g)},function(){m(v,h);var t=null;if(c.length&&"x"===o&&!i(h)&&("log"!==e.type||"D"!==String(e.dtick).charAt(0))){t=0;var r,a=0,u=[];if(v.each(function(t){a=Math.max(a,t.fontSize);var n=e.l2p(t.x),r=J(this),i=f.bBox(r.node());u.push({top:0,bottom:10,height:10,left:n-i.width/2,right:n+i.width/2+2,width:i.width+2})}),"boundaries"!==e.tickson&&!e.showdividers||n.secondary){var d=c.length,p=Math.abs((c[d-1].x-c[0].x)*e._m)/(d-1),g=p<2.5*a||"multicategory"===e.type;for(r=0;r<u.length-1;r++)if(s.bBoxIntersect(u[r],u[r+1])){t=g?90:30;break}}else{var y=2;for(e.ticks&&(y+=e.tickwidth/2),r=0;r<u.length;r++){var b=c[r].xbnd,_=u[r];if(null!==b[0]&&_.left-e.l2p(b[0])<y||null!==b[1]&&e.l2p(b[1])-_.right<y){t=90;break}}}t&&m(v,t)}e._tickAngles&&(e._tickAngles[l]=null===t?i(h)?h:0:t)}]);return y&&y.then&&t._promises.push(y),y},M.shouldShowZeroLine=function(t,e,n){var r=s.simpleMap(e.range,e.r2l);return r[0]*r[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&e._gridVals.length&&($(e,0)||!function(t,e,n,r){var i=n._mainAxis;if(i){var a=t._fullLayout,o=e._id.charAt(0),s=M.counterLetter(e._id),u=e._offset+(Math.abs(r[0])<Math.abs(r[1])===("x"===o)?0:e._length),l=a._plots[n._mainSubplot];if(!(l.mainplotinfo||l).overlays.length)return h(n);for(var c=M.list(t,s),f=0;f<c.length;f++){var d=c[f];if(d._mainAxis===i&&h(d))return!0}}function h(t){if(!t.showline||!t.linewidth)return!1;var n=Math.max((t.linewidth+e.zerolinewidth)/2,1);function r(t){return"number"===typeof t&&Math.abs(t-u)<n}if(r(t._mainLinePosition)||r(t._mainMirrorPosition))return!0;var i=t._linepositions||{};for(var a in i)if(r(i[a][0])||r(i[a][1]))return!0}}(t,e,n,r)||function(t,e){for(var n=t._fullData,r=e._mainSubplot,i=e._id.charAt(0),a=0;a<n.length;a++){var s=n[a];if(!0===s.visible&&s.xaxis+s.yaxis===r){if(o.traceIs(s,"bar-like")&&s.orientation==={x:"h",y:"v"}[i])return!0;if(s.fill&&s.fill.charAt(s.fill.length-1)===i)return!0}}return!1}(t,e))},M.clipEnds=function(t,e){return e.filter(function(e){return $(t,e.x)})},M.allowAutoMargin=function(t){for(var e=M.list(t,"",!0),n=0;n<e.length;n++){var r=e[n];r.automargin&&a.allowAutoMargin(t,K(r)),o.getComponentMethod("rangeslider","isVisible")(r)&&a.allowAutoMargin(t,Q(r))}},M.swap=function(t,e){for(var n=function(t,e){var n,r,i=[];for(n=0;n<e.length;n++){var a=[],o=t._fullData[e[n]].xaxis,s=t._fullData[e[n]].yaxis;if(o&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(o)&&-1===i[r].y.indexOf(s)||a.push(r);if(a.length){var u,l=i[a[0]];if(a.length>1)for(r=1;r<a.length;r++)u=i[a[r]],tt(l.x,u.x),tt(l.y,u.y);tt(l.x,[o]),tt(l.y,[s])}else i.push({x:[o],y:[s]})}}return i}(t,e),r=0;r<n.length;r++)et(t,n[r].x,n[r].y)}},{"../../components/color":42,"../../components/drawing":63,"../../components/titles":130,"../../constants/alignment":137,"../../constants/numerical":140,"../../lib":160,"../../lib/svg_text_utils":181,"../../plots/plots":236,"../../registry":243,"./autorange":203,"./axis_autotype":205,"./axis_ids":207,"./clean_ticks":209,"./layout_attributes":216,"./set_convert":222,d3:7,"fast-isnumeric":9}],205:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../constants/numerical").BADNUM;e.exports=function(t,e,n){return!(n=n||{}).noMultiCategory&&(o=t,i.isArrayOrTypedArray(o[0])&&i.isArrayOrTypedArray(o[1]))?"multicategory":function(t,e){for(var n=Math.max(1,(t.length-1)/1e3),a=0,o=0,s={},u=0;u<t.length;u+=n){var l=t[Math.round(u)],c=String(l);s[c]||(s[c]=1,i.isDateTime(l,e)&&(a+=1),r(l)&&(o+=1))}return a>2*o}(t,e)?"date":function(t){for(var e=Math.max(1,(t.length-1)/1e3),n=0,r=0,o={},s=0;s<t.length;s+=e){var u=t[Math.round(s)],l=String(u);o[l]||(o[l]=1,"boolean"===typeof u?r++:i.cleanNumber(u)!==a?n++:"string"===typeof u&&r++)}return r>2*n}(t)?"category":function(t){if(!t)return!1;for(var e=0;e<t.length;e++)if(r(t[e]))return!0;return!1}(t)?"linear":"-";var o}},{"../../constants/numerical":140,"../../lib":160,"fast-isnumeric":9}],206:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),a=t("./layout_attributes"),o=t("./tick_value_defaults"),s=t("./tick_mark_defaults"),u=t("./tick_label_defaults"),l=t("./category_order_defaults"),c=t("./line_grid_defaults"),f=t("./set_convert");e.exports=function(t,e,n,d,h){var p=d.letter,v=d.font||{},g=d.splomStash||{},m=n("visible",!d.visibleDflt),y=e.type;if("date"===y){var b=r.getComponentMethod("calendars","handleDefaults");b(t,e,"calendar",d.calendar)}f(e,h);var _=!e.isValidRange(t.range);_&&d.reverseDflt&&(_="reversed");var x=n("autorange",_);!x||"linear"!==y&&"-"!==y||n("rangemode"),n("range"),e.cleanRange(),l(t,e,n,d),"category"===y||d.noHover||n("hoverformat");var w=n("color"),A=w!==a.color.dflt?w:v.color,k=g.label||h._dfltTitle[p];if(u(t,e,n,y,d,{pass:1}),!m)return e;n("title.text",k),i.coerceFont(n,"title.font",{family:v.family,size:Math.round(1.2*v.size),color:A}),o(t,e,n,y),u(t,e,n,y,d,{pass:2}),s(t,e,n,d),c(t,e,n,{dfltColor:w,bgColor:d.bgColor,showGrid:d.showGrid,attributes:a}),(e.showline||e.ticks)&&n("mirror"),d.automargin&&n("automargin");var M,T="multicategory"===e.type;if(d.noTickson||"category"!==e.type&&!T||!e.ticks&&!e.showgrid||(T&&(M="boundaries"),n("tickson",M)),T){var S=n("showdividers");S&&(n("dividercolor"),n("dividerwidth"))}return e}},{"../../lib":160,"../../registry":243,"./category_order_defaults":208,"./layout_attributes":216,"./line_grid_defaults":218,"./set_convert":222,"./tick_label_defaults":223,"./tick_mark_defaults":224,"./tick_value_defaults":225}],207:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./constants");n.id2name=function(t){if("string"===typeof t&&t.match(i.AX_ID_PATTERN)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},n.name2id=function(t){if(t.match(i.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},n.cleanId=function(t,e){if(t.match(i.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)){var n=t.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),t.charAt(0)+n}},n.list=function(t,e,r){var i=t._fullLayout;if(!i)return[];var a,o=n.listIds(t,e),s=new Array(o.length);for(a=0;a<o.length;a++){var u=o[a];s[a]=i[u.charAt(0)+"axis"+u.substr(1)]}if(!r){var l=i._subplots.gl3d||[];for(a=0;a<l.length;a++){var c=i[l[a]];e?s.push(c[e+"axis"]):s.push(c.xaxis,c.yaxis,c.zaxis)}}return s},n.listIds=function(t,e){var n=t._fullLayout;if(!n)return[];var r=n._subplots;return e?r[e+"axis"]:r.xaxis.concat(r.yaxis)},n.getFromId=function(t,e,r){var i=t._fullLayout;return"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),i[n.id2name(e)]},n.getFromTrace=function(t,e,i){var a=t._fullLayout,o=null;if(r.traceIs(e,"gl3d")){var s=e.scene;"scene"===s.substr(0,5)&&(o=a[s][i+"axis"])}else o=n.getFromId(t,e[i+"axis"]||i);return o},n.idSort=function(t,e){var n=t.charAt(0),r=e.charAt(0);return n!==r?n>r?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},n.getAxisGroup=function(t,e){for(var n=t._axisMatchGroups,r=0;r<n.length;r++){var i=n[r];if(i[e])return"g"+r}return e}},{"../../registry":243,"./constants":210}],208:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){if("category"===e.type){var i,a=t.categoryarray,o=Array.isArray(a)&&a.length>0;o&&(i="array");var s,u=n("categoryorder",i);"array"===u&&(s=n("categoryarray")),o||"array"!==u||(u=e.categoryorder="trace"),"trace"===u?e._initialCategories=[]:"array"===u?e._initialCategories=s.slice():(s=function(t,e){var n,r,i,a=e.dataAttr||t._id.charAt(0),o={};if(e.axData)n=e.axData;else for(n=[],r=0;r<e.data.length;r++){var s=e.data[r];s[a+"axis"]===t._id&&n.push(s)}for(r=0;r<n.length;r++){var u=n[r][a];for(i=0;i<u.length;i++){var l=u[i];null!==l&&void 0!==l&&(o[l]=1)}}return Object.keys(o)}(e,r).sort(),"category ascending"===u?e._initialCategories=s:"category descending"===u&&(e._initialCategories=s.reverse()))}}},{}],209:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../constants/numerical").ONEDAY;n.dtick=function(t,e){var n="log"===e,i="date"===e,o="category"===e,s=i?a:1;if(!t)return s;if(r(t))return(t=Number(t))<=0?s:o?Math.max(1,Math.round(t)):i?Math.max(.1,t):t;if("string"!==typeof t||!i&&!n)return s;var u=t.charAt(0),l=t.substr(1);return(l=r(l)?Number(l):0)<=0||!(i&&"M"===u&&l===Math.round(l)||n&&"L"===u||n&&"D"===u&&(1===l||2===l))?s:t},n.tick0=function(t,e,n,a){return"date"===e?i.cleanDate(t,i.dateTick0(n)):"D1"!==a&&"D2"!==a?r(t)?Number(t):0:void 0}},{"../../constants/numerical":140,"../../lib":160,"fast-isnumeric":9}],210:[function(t,e,n){"use strict";var r=t("../../lib/regex").counter;e.exports={idRegex:{x:r("x"),y:r("y")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":175}],211:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./axis_ids").id2name,a=t("./scale_zoom"),o=t("./autorange").makePadFn,s=t("./autorange").concatExtremes,u=t("../../constants/numerical").ALMOST_EQUAL,l=t("../../constants/alignment").FROM_BL;function c(t,e,n,r,a){var o,s,u,l,c="range"!==a,f=r[i(e)].type,d=[];for(s=0;s<n.length;s++)if((u=n[s])!==e&&(l=r[i(u)]).type===f)if(l.fixedrange){if(c&&l.anchor){var h=r[i(l.anchor)];h.fixedrange&&d.push(u)}}else d.push(u);for(o=0;o<t.length;o++)if(t[o][e]){var p=t[o],v=[];for(s=0;s<d.length;s++)u=d[s],p[u]||v.push(u);return{linkableAxes:v,thisGroup:p}}return{linkableAxes:d,thisGroup:null}}function f(t,e,n,r,i){var a,o,s,u,l;null===e?((e={})[n]=1,l=t.length,t.push(e)):l=t.indexOf(e);var c=Object.keys(e);for(a=0;a<t.length;a++)if(s=t[a],a!==l&&s[r]){var f=s[r];for(o=0;o<c.length;o++)u=c[o],s[u]=f*i*e[u];return void t.splice(l,1)}if(1!==i)for(o=0;o<c.length;o++)e[c[o]]*=i;e[r]=1}function d(t,e){var n=t._inputDomain,r=l[t.constraintoward],i=n[0]+(n[1]-n[0])*r;t.domain=t._input.domain=[i+(n[0]-i)/e,i+(n[1]-i)/e],t.setScale()}n.handleConstraintDefaults=function(t,e,n,i,a){var o,s,u,l,d=a._axisConstraintGroups,h=a._axisMatchGroups,p=e._id,v=p.charAt(0),g=((a._splomAxes||{})[v]||{})[p]||{},m=e._id,y=m.charAt(0),b=n("constrain");if(r.coerce(t,e,{constraintoward:{valType:"enumerated",values:"x"===y?["left","center","right"]:["bottom","middle","top"],dflt:"x"===y?"center":"middle"}},"constraintoward"),!t.matches&&!g.matches||e.fixedrange||(s=c(h,m,i,a),o=r.coerce(t,e,{matches:{valType:"enumerated",values:s.linkableAxes||[],dflt:g.matches}},"matches")),o||!t.scaleanchor||e.fixedrange&&"domain"!==b||(l=c(d,m,i,a,b),u=r.coerce(t,e,{scaleanchor:{valType:"enumerated",values:l.linkableAxes||[]}},"scaleanchor")),o?(delete e.constrain,f(h,s.thisGroup,m,o,1)):-1!==i.indexOf(t.matches)&&r.warn("ignored "+e._name+'.matches: "'+t.matches+'" to avoid either an infinite loop or because the target axis has fixed range.'),u){var _=n("scaleratio");_||(_=e.scaleratio=1),f(d,l.thisGroup,m,u,_)}else-1!==i.indexOf(t.scaleanchor)&&r.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')},n.enforce=function(t){var e,n,r,l,c,f,h,p=t._fullLayout,v=p._axisConstraintGroups||[];for(e=0;e<v.length;e++){var g=v[e],m=Object.keys(g),y=1/0,b=0,_=1/0,x={},w={},A=!1;for(n=0;n<m.length;n++)r=m[n],w[r]=l=p[i(r)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),x[r]=c=Math.abs(l._m)/g[r],y=Math.min(y,c),"domain"!==l.constrain&&l._constraintShrinkable||(_=Math.min(_,c)),delete l._constraintShrinkable,b=Math.max(b,c),"domain"===l.constrain&&(A=!0);if(!(y>u*b)||A)for(n=0;n<m.length;n++)if(r=m[n],c=x[r],l=w[r],f=l.constrain,c!==_||"domain"===f)if(h=c/_,"range"===f)a(l,h);else{var k=l._inputDomain,M=(l.domain[1]-l.domain[0])/(k[1]-k[0]),T=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if((h/=M)*T<1){l.domain=l._input.domain=k.slice(),a(l,h);continue}if(T<1&&(l.range=l._input.range=l._inputRange.slice(),h*=T),l.autorange){var S=l.r2l(l.range[0]),C=l.r2l(l.range[1]),E=(S+C)/2,O=E,P=E,L=Math.abs(C-E),R=E-L*h*1.0001,D=E+L*h*1.0001,F=o(l);d(l,h);var j,N,z=Math.abs(l._m),I=s(t,l),B=I.min,q=I.max;for(N=0;N<B.length;N++)(j=B[N].val-F(B[N])/z)>R&&j<O&&(O=j);for(N=0;N<q.length;N++)(j=q[N].val+F(q[N])/z)<D&&j>P&&(P=j);var U=(P-O)/(2*L);h/=U,O=l.l2r(O),P=l.l2r(P),l.range=l._input.range=S<C?[O,P]:[P,O]}d(l,h)}}},n.clean=function(t,e){if(e._inputDomain){for(var n=!1,r=e._id,i=t._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}}},{"../../constants/alignment":137,"../../constants/numerical":140,"../../lib":160,"./autorange":203,"./axis_ids":207,"./scale_zoom":220}],212:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),a=t("has-passive-events"),o=t("../../registry"),s=t("../../lib"),u=t("../../lib/svg_text_utils"),l=t("../../components/color"),c=t("../../components/drawing"),f=t("../../components/fx"),d=t("./axes"),h=t("../../lib/setcursor"),p=t("../../components/dragelement"),v=t("../../constants/alignment").FROM_TL,g=t("../../lib/clear_gl_canvases"),m=t("../../plot_api/subroutines").redrawReglTraces,y=t("../plots"),b=t("./axis_ids").getFromId,_=t("./select").prepSelect,x=t("./select").clearSelect,w=t("./select").selectOnClick,A=t("./scale_zoom"),k=t("./constants"),M=k.MINDRAG,T=k.MINZOOM,S=!0;function C(t,e,n,r){var i=s.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return i.call(h,r),i.node()}function E(t,e,n,i,a,o,s){var u=C(t,"rect",e,n);return r.select(u).call(c.setRect,i,a,o,s),u}function O(t,e){for(var n=0;n<t.length;n++)if(!t[n].fixedrange)return e;return""}function P(t,e,n,r,i){for(var a=0;a<t.length;a++){var o=t[a];if(!o.fixedrange){var s=o._rl[0],u=o._rl[1]-s;r[o._name+".range[0]"]=o.l2r(s+u*e),r[o._name+".range[1]"]=o.l2r(s+u*n)}}if(i&&i.length){var l=(e+(1-n))/2;P(i,l,1-l,r,[])}}function L(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.fixedrange||(r.range=[r.l2r(r._rl[0]-e/r._m),r.l2r(r._rl[1]-e/r._m)])}}function R(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function D(t,e,n,r,i){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+n+", "+r+")").attr("d",i+"Z")}function F(t,e,n){return t.append("path").attr("class","zoombox-corners").style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+e+", "+n+")").attr("d","M0,0Z")}function j(t,e,n,r,i,a){t.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),N(t,e,i,a)}function N(t,e,n,r){n||(t.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function z(t){r.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function I(t){S&&t.data&&t._context.showTips&&(s.notifier(s._(t,"Double-click to zoom back out"),"long"),S=!1)}function B(t){return"lasso"===t||"select"===t}function q(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,T)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function U(t,e,n,r){for(var i,a,o,u,l=!1,c={},f={},d=0;d<e.length;d++){var h=e[d];for(i in n)if(h[i]){for(o in h)("x"===o.charAt(0)?n:r)[o]||(c[o]=i);for(a in r)h[a]&&(l=!0)}for(a in r)if(h[a])for(u in h)("x"===u.charAt(0)?n:r)[u]||(f[u]=a)}l&&(s.extendFlat(c,f),f={});var p={},v=[];for(o in c){var g=b(t,o);v.push(g),p[g._id]=g}var m={},y=[];for(u in f){var _=b(t,u);y.push(_),m[_._id]=_}return{xaHash:p,yaHash:m,xaxes:v,yaxes:y,xLinks:c,yLinks:f,isSubplotConstrained:l}}function H(t,e){if(a){var n=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(n,t._onwheel),t._onwheel=e,t.addEventListener(n,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel&&(t.onmousewheel=e)}function W(t){var e=[];for(var n in t)e.push(t[n]);return e}e.exports={makeDragBox:function(t,e,n,a,l,h,S,C){var N,G,V,Y,Z,X,$,J,K,Q,tt,et,nt,rt,it,at,ot,st,ut,lt,ct,ft=t._fullLayout._zoomlayer,dt=S+C==="nsew",ht=1===(S+C).length;function pt(){if(N=e.xaxis,G=e.yaxis,K=N._length,Q=G._length,$=N._offset,J=G._offset,(V={})[N._id]=N,(Y={})[G._id]=G,S&&C)for(var n=e.overlays,r=0;r<n.length;r++){var i=n[r].xaxis;V[i._id]=i;var a=n[r].yaxis;Y[a._id]=a}Z=W(V),X=W(Y),nt=O(Z,C),rt=O(X,S),it=!rt&&!nt,tt=U(t,t._fullLayout._axisConstraintGroups,V,Y),et=U(t,t._fullLayout._axisMatchGroups,V,Y),at=C||tt.isSubplotConstrained||et.isSubplotConstrained,ot=S||tt.isSubplotConstrained||et.isSubplotConstrained;var o=t._fullLayout;st=o._has("scattergl"),ut=o._has("splom"),lt=o._has("svg")}pt();var vt=function(t,e,n){return t?"nsew"===t?n?"":"pan"===e?"move":"crosshair":t.toLowerCase()+"-resize":"pointer"}(rt+nt,t._fullLayout.dragmode,dt),gt=E(e,S+C+"drag",vt,n,a,l,h);if(it&&!dt)return gt.onmousedown=null,gt.style.pointerEvents="none",gt;var mt,yt,bt,_t,xt,wt,At,kt,Mt,Tt,St={element:gt,gd:t,plotinfo:e};function Ct(){St.plotinfo.selection=!1,x(t)}function Et(n,i){var a=t._fullLayout.clickmode;if(z(t),2!==n||ht||function(){if(!t._transitioningWithDuration){var e=t._context.doubleClick,n=[];nt&&(n=n.concat(Z)),rt&&(n=n.concat(X)),et.xaxes&&(n=n.concat(et.xaxes)),et.yaxes&&(n=n.concat(et.yaxes));var r,i,a,s={};if("reset+autosize"===e)for(e="autosize",i=0;i<n.length;i++)if((r=n[i])._rangeInitial&&(r.range[0]!==r._rangeInitial[0]||r.range[1]!==r._rangeInitial[1])||!r._rangeInitial&&!r.autorange){e="reset";break}if("autosize"===e)for(i=0;i<n.length;i++)(r=n[i]).fixedrange||(s[r._name+".autorange"]=!0);else if("reset"===e)for((nt||tt.isSubplotConstrained)&&(n=n.concat(tt.xaxes)),rt&&!tt.isSubplotConstrained&&(n=n.concat(tt.yaxes)),tt.isSubplotConstrained&&(nt?rt||(n=n.concat(X)):n=n.concat(Z)),i=0;i<n.length;i++)(r=n[i]).fixedrange||(r._rangeInitial?(a=r._rangeInitial,s[r._name+".range[0]"]=a[0],s[r._name+".range[1]"]=a[1]):s[r._name+".autorange"]=!0);t.emit("plotly_doubleclick",null),o.call("_guiRelayout",t,s)}}(),dt)a.indexOf("select")>-1&&w(i,t,Z,X,e.id,St),a.indexOf("event")>-1&&f.click(t,i,e.id);else if(1===n&&ht){var s=S?G:N,l="s"===S||"w"===C?0:1,c=s._name+".range["+l+"]",d=function(t,e){var n,i=t.range[e],a=Math.abs(i-t.range[1-e]);return"date"===t.type?i:"log"===t.type?(n=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3,r.format("."+n+"g")(Math.pow(10,i))):(n=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4,r.format("."+String(n)+"g")(i))}(s,l),h="left",p="middle";if(s.fixedrange)return;S?(p="n"===S?"top":"bottom","right"===s.side&&(h="right")):"e"===C&&(h="right"),t._context.showAxisRangeEntryBoxes&&r.select(gt).call(u.makeEditable,{gd:t,immediate:!0,background:t._fullLayout.paper_bgcolor,text:String(d),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:h,verticalAlign:p}).on("edit",function(e){var n=s.d2r(e);void 0!==n&&o.call("_guiRelayout",t,c,n)})}}function Ot(e,n){if(t._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(K,e+mt)),i=Math.max(0,Math.min(Q,n+yt)),a=Math.abs(r-mt),o=Math.abs(i-yt);function s(){At="",bt.r=bt.l,bt.t=bt.b,Mt.attr("d","M0,0Z")}if(bt.l=Math.min(mt,r),bt.r=Math.max(mt,r),bt.t=Math.min(yt,i),bt.b=Math.max(yt,i),tt.isSubplotConstrained)a>T||o>T?(At="xy",a/K>o/Q?(o=a*Q/K,yt>i?bt.t=yt-o:bt.b=yt+o):(a=o*K/Q,mt>r?bt.l=mt-a:bt.r=mt+a),Mt.attr("d",q(bt))):s();else if(et.isSubplotConstrained)if(a>T||o>T){At="xy";var u=Math.min(bt.l/K,(Q-bt.b)/Q),l=Math.max(bt.r/K,(Q-bt.t)/Q);bt.l=u*K,bt.r=l*K,bt.b=(1-u)*Q,bt.t=(1-l)*Q,Mt.attr("d",q(bt))}else s();else!rt||o<Math.min(Math.max(.6*a,M),T)?a<M||!nt?s():(bt.t=0,bt.b=Q,At="x",Mt.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-T-.5)+"h-3v"+(2*T+1)+"h3ZM"+(t.r+.5)+","+(e-T-.5)+"h3v"+(2*T+1)+"h-3Z"}(bt,yt))):!nt||a<Math.min(.6*o,T)?(bt.l=0,bt.r=K,At="y",Mt.attr("d",function(t,e){return"M"+(e-T-.5)+","+(t.t-.5)+"v-3h"+(2*T+1)+"v3ZM"+(e-T-.5)+","+(t.b+.5)+"v3h"+(2*T+1)+"v-3Z"}(bt,mt))):(At="xy",Mt.attr("d",q(bt)));bt.w=bt.r-bt.l,bt.h=bt.b-bt.t,At&&(Tt=!0),t._dragged=Tt,j(kt,Mt,bt,xt,wt,_t),Pt(),t.emit("plotly_relayouting",ct),wt=!0}function Pt(){ct={},"xy"!==At&&"x"!==At||(P(Z,bt.l/K,bt.r/K,ct,tt.xaxes),zt("x",ct)),"xy"!==At&&"y"!==At||(P(X,(Q-bt.b)/Q,(Q-bt.t)/Q,ct,tt.yaxes),zt("y",ct))}function Lt(){if(Math.min(bt.h,bt.w)<2*M)return z(t);Pt(),z(t),Bt(),I(t)}St.prepFn=function(e,n,r){var a=St.dragmode,o=t._fullLayout.dragmode;o!==a&&(St.dragmode=o),pt(),it||(dt?e.shiftKey?"pan"===o?o="zoom":B(o)||(o="pan"):e.ctrlKey&&(o="pan"):o="pan"),St.minDrag="lasso"===o?1:void 0,B(o)?(St.xaxes=Z,St.yaxes=X,_(e,n,r,St,o)):(St.clickFn=Et,B(a)&&Ct(),it||("zoom"===o?(St.moveFn=Ot,St.doneFn=Lt,St.minDrag=1,function(e,n,r){var a=gt.getBoundingClientRect();mt=n-a.left,yt=r-a.top,bt={l:mt,r:mt,w:0,t:yt,b:yt,h:0},_t=t._hmpixcount?t._hmlumcount/t._hmpixcount:i(t._fullLayout.plot_bgcolor).getLuminance(),wt=!1,At="xy",Tt=!1,kt=D(ft,_t,$,J,xt="M0,0H"+K+"V"+Q+"H0V0"),Mt=F(ft,$,J)}(0,n,r)):"pan"===o&&(St.moveFn=Nt,St.doneFn=Bt))),t._fullLayout._redrag=function(){var e=t._dragdata;if(e&&e.element===gt){var n=t._fullLayout.dragmode;B(n)||(pt(),qt([0,0,K,Q]),St.moveFn(e.dx,e.dy))}}},p.init(St);var Rt=[0,0,K,Q],Dt=null,Ft=k.REDRAWDELAY,jt=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function Nt(e,n){if(!t._transitioningWithDuration){if(t._fullLayout._replotting=!0,"ew"===nt||"ns"===rt)return nt&&(L(Z,e),zt("x")),rt&&(L(X,n),zt("y")),qt([nt?-e:0,rt?-n:0,K,Q]),It(),void t.emit("plotly_relayouting",ct);if(tt.isSubplotConstrained&&nt&&rt){var r="w"===nt===("n"===rt)?1:-1,i=(e/K+r*n/Q)/2;e=i*K,n=r*i*Q}"w"===nt?e=u(Z,0,e):"e"===nt?e=u(Z,1,-e):nt||(e=0),"n"===rt?n=u(X,1,n):"s"===rt?n=u(X,0,-n):rt||(n=0);var a="w"===nt?e:0,o="n"===rt?n:0;if(tt.isSubplotConstrained){var s;if(!nt&&1===rt.length){for(s=0;s<Z.length;s++)Z[s].range=Z[s]._r.slice(),A(Z[s],1-n/Q);a=(e=n*K/Q)/2}if(!rt&&1===nt.length){for(s=0;s<X.length;s++)X[s].range=X[s]._r.slice(),A(X[s],1-e/K);o=(n=e*Q/K)/2}}zt("x"),zt("y"),qt([a,o,K-e,Q-n]),It(),t.emit("plotly_relayouting",ct)}function u(t,e,n){for(var r,i,a=1-e,o=0;o<t.length;o++){var s=t[o];if(!s.fixedrange){r=s,i=s._rl[a]+(s._rl[e]-s._rl[a])/R(n/s._length);var u=s.l2r(i);!1!==u&&void 0!==u&&(s.range[e]=u)}}return r._length*(r._rl[e]-i)/(r._rl[e]-r._rl[a])}}function zt(t,e){for(var n=et.isSubplotConstrained?{x:X,y:Z}[t]:et[t+"axes"],r=et.isSubplotConstrained?{x:Z,y:X}[t]:[],i=0;i<n.length;i++){var a=n[i],o=a._id,s=et.xLinks[o]||et.yLinks[o],u=r[0]||V[s]||Y[s];u&&(e?(e[a._name+".range[0]"]=e[u._name+".range[0]"],e[a._name+".range[1]"]=e[u._name+".range[1]"]):a.range=u.range.slice())}}function It(){var e,n=[];function r(t){for(e=0;e<t.length;e++)t[e].fixedrange||n.push(t[e]._id)}for(at&&(r(Z),r(tt.xaxes),r(et.xaxes)),ot&&(r(X),r(tt.yaxes),r(et.yaxes)),ct={},e=0;e<n.length;e++){var i=n[e],a=b(t,i);d.drawOne(t,a,{skipTitle:!0}),ct[a._name+".range[0]"]=a.range[0],ct[a._name+".range[1]"]=a.range[1]}d.redrawComponents(t,n)}function Bt(){qt([0,0,K,Q]),s.syncOrAsync([y.previousPromises,function(){t._fullLayout._replotting=!1,o.call("_guiRelayout",t,ct)}],t)}function qt(e){var n,r,i,a,u=t._fullLayout,l=u._plots,f=u._subplots.cartesian;if(ut&&o.subplotsRegistry.splom.drag(t),st)for(n=0;n<f.length;n++)if(r=l[f[n]],i=r.xaxis,a=r.yaxis,r._scene){var d=s.simpleMap(i.range,i.r2l),h=s.simpleMap(a.range,a.r2l);r._scene.update({range:[d[0],h[0],d[1],h[1]]})}if((ut||st)&&(g(t),m(t)),lt){var p=e[2]/N._length,v=e[3]/G._length;for(n=0;n<f.length;n++){r=l[f[n]],i=r.xaxis,a=r.yaxis;var y,b,_,x,w=at&&!i.fixedrange&&V[i._id],A=ot&&!a.fixedrange&&Y[a._id];if(w?(y=p,_=C?e[0]:Wt(i,y)):et.xaHash[i._id]?(y=p,_=e[0]*i._length/N._length):et.yaHash[i._id]?(y=v,_="ns"===rt?-e[1]*i._length/G._length:Wt(i,y,{n:"top",s:"bottom"}[rt])):(y=Ut(i,p,v),_=Ht(i,y)),A?(b=v,x=S?e[1]:Wt(a,b)):et.yaHash[a._id]?(b=v,x=e[1]*a._length/G._length):et.xaHash[a._id]?(b=p,x="ew"===nt?-e[0]*a._length/N._length:Wt(a,b,{e:"right",w:"left"}[nt])):(b=Ut(a,p,v),x=Ht(a,b)),y||b){y||(y=1),b||(b=1);var k=i._offset-_/y,M=a._offset-x/b;r.clipRect.call(c.setTranslate,_,x).call(c.setScale,y,b),r.plot.call(c.setTranslate,k,M).call(c.setScale,1/y,1/b),y===r.xScaleFactor&&b===r.yScaleFactor||(c.setPointGroupScale(r.zoomScalePts,y,b),c.setTextPointsScale(r.zoomScaleTxt,y,b)),c.hideOutsideRangePoints(r.clipOnAxisFalseTraces,r),r.xScaleFactor=y,r.yScaleFactor=b}}}}function Ut(t,e,n){return t.fixedrange?0:at&&tt.xaHash[t._id]?e:ot&&(tt.isSubplotConstrained?tt.xaHash:tt.yaHash)[t._id]?n:0}function Ht(t,e){return e?(t.range=t._r.slice(),A(t,e),Wt(t,e)):0}function Wt(t,e,n){return t._length*(1-e)*v[n||t.constraintoward||"middle"]}return S.length*C.length!==1&&H(gt,function(e){if(t._context._scrollZoom.cartesian||t._fullLayout._enablescrollzoom){if(Ct(),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();pt(),clearTimeout(Dt);var n=-e.deltaY;if(isFinite(n)||(n=e.wheelDelta/10),isFinite(n)){var r,i=Math.exp(-Math.min(Math.max(n,-20),20)/200),a=jt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),o=(e.clientX-a.left)/a.width,u=(a.bottom-e.clientY)/a.height;if(at){for(C||(o=.5),r=0;r<Z.length;r++)l(Z[r],o,i);zt("x"),Rt[2]*=i,Rt[0]+=Rt[2]*o*(1/i-1)}if(ot){for(S||(u=.5),r=0;r<X.length;r++)l(X[r],u,i);zt("y"),Rt[3]*=i,Rt[1]+=Rt[3]*(1-u)*(1/i-1)}return qt(Rt),It(),t.emit("plotly_relayouting",ct),Dt=setTimeout(function(){Rt=[0,0,K,Q],Bt()},Ft),void e.preventDefault()}s.log("Did not find wheel motion attributes: ",e)}function l(t,e,n){if(!t.fixedrange){var r=s.simpleMap(t.range,t.r2l),i=r[0]+(r[1]-r[0])*e;t.range=r.map(function(e){return t.l2r(i+(e-i)*n)})}}}),gt},makeDragger:C,makeRectDragger:E,makeZoombox:D,makeCorners:F,updateZoombox:j,xyCorners:q,transitionZoombox:N,removeZoombox:z,showDoubleClickNotifier:I,attachWheelEventHandler:H}},{"../../components/color":42,"../../components/dragelement":60,"../../components/drawing":63,"../../components/fx":81,"../../constants/alignment":137,"../../lib":160,"../../lib/clear_gl_canvases":149,"../../lib/setcursor":179,"../../lib/svg_text_utils":181,"../../plot_api/subroutines":195,"../../registry":243,"../plots":236,"./axes":204,"./axis_ids":207,"./constants":210,"./scale_zoom":220,"./select":221,d3:7,"has-passive-events":12,tinycolor2:25}],213:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/fx"),a=t("../../components/dragelement"),o=t("../../lib/setcursor"),s=t("./dragbox").makeDragBox,u=t("./constants").DRAGGERSIZE;n.initInteractions=function(t){var e=t._fullLayout;if(t._context.staticPlot)r.select(t).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){var o=Object.keys(e._plots||{}).sort(function(t,n){if((e._plots[t].mainplot&&!0)===(e._plots[n].mainplot&&!0)){var r=t.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return e._plots[t].mainplot?1:-1});o.forEach(function(n){var r=e._plots[n],o=r.xaxis,l=r.yaxis;if(!r.mainplot){var c=s(t,r,o._offset,l._offset,o._length,l._length,"ns","ew");c.onmousemove=function(e){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===n&&i.hover(t,e,n)},i.hover(t,e,n),t._fullLayout._lasthover=c,t._fullLayout._hoversubplot=n},c.onmouseout=function(e){t._dragging||(t._fullLayout._hoversubplot=null,a.unhover(t,e))},t._context.showAxisDragHandles&&(s(t,r,o._offset-u,l._offset-u,u,u,"n","w"),s(t,r,o._offset+o._length,l._offset-u,u,u,"n","e"),s(t,r,o._offset-u,l._offset+l._length,u,u,"s","w"),s(t,r,o._offset+o._length,l._offset+l._length,u,u,"s","e"))}if(t._context.showAxisDragHandles){if(n===o._mainSubplot){var f=o._mainLinePosition;"top"===o.side&&(f-=u),s(t,r,o._offset+.1*o._length,f,.8*o._length,u,"","ew"),s(t,r,o._offset,f,.1*o._length,u,"","w"),s(t,r,o._offset+.9*o._length,f,.1*o._length,u,"","e")}if(n===l._mainSubplot){var d=l._mainLinePosition;"right"!==l.side&&(d-=u),s(t,r,d,l._offset+.1*l._length,u,.8*l._length,"ns",""),s(t,r,d,l._offset+.9*l._length,u,.1*l._length,"s",""),s(t,r,d,l._offset,u,.1*l._length,"n","")}}});var l=e._hoverlayer.node();l.onmousemove=function(n){n.target=t._fullLayout._lasthover,i.hover(t,n,e._hoversubplot)},l.onclick=function(e){e.target=t._fullLayout._lasthover,i.click(t,e)},l.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)},n.updateFx(t)}},n.updateFx=function(t){var e=t._fullLayout,n="pan"===e.dragmode?"move":"crosshair";o(e._draggers,n)}},{"../../components/dragelement":60,"../../components/fx":81,"../../lib/setcursor":179,"./constants":210,"./dragbox":212,d3:7}],214:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib");e.exports=function(t){return function(e,n){var a=e[t];if(Array.isArray(a))for(var o=r.subplotsRegistry.cartesian,s=o.idRegex,u=n._subplots,l=u.xaxis,c=u.yaxis,f=u.cartesian,d=n._has("cartesian")||n._has("gl2d"),h=0;h<a.length;h++){var p=a[h];if(i.isPlainObject(p)){var v=p.xref,g=p.yref,m=s.x.test(v),y=s.y.test(g);if(m||y){d||i.pushUnique(n._basePlotModules,o);var b=!1;m&&-1===l.indexOf(v)&&(l.push(v),b=!0),y&&-1===c.indexOf(g)&&(c.push(g),b=!0),b&&m&&y&&f.push(v+g)}}}}}},{"../../lib":160,"../../registry":243}],215:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../lib"),o=t("../plots"),s=t("../../components/drawing"),u=t("../get_data").getModuleCalcData,l=t("./axis_ids"),c=t("./constants"),f=t("../../constants/xmlns_namespaces"),d=a.ensureSingle;function h(t,e,n){return a.ensureSingle(t,e,n,function(t){t.datum(n)})}function p(t,e,n,a,o){for(var l,f,d,h=c.traceLayerClasses,p=t._fullLayout,v=p._modules,g=[],m=[],y=0;y<v.length;y++){var b=(l=v[y]).name,_=i.modules[b].categories;if(_.svg){var x=l.layerName||b+"layer",w=l.plot;f=u(n,w),d=f[0],n=f[1],d.length&&g.push({i:h.indexOf(x),className:x,plotMethod:w,cdModule:d}),_.zoomScale&&m.push("."+x)}}g.sort(function(t,e){return t.i-e.i});var A=e.plot.selectAll("g.mlayer").data(g,function(t){return t.className});if(A.enter().append("g").attr("class",function(t){return t.className}).classed("mlayer",!0).classed("rangeplot",e.isRangePlot),A.exit().remove(),A.order(),A.each(function(n){var i=r.select(this),u=n.className;n.plotMethod(t,e,n.cdModule,i,a,o),-1===c.clipOnAxisFalseQuery.indexOf("."+u)&&s.setClipUrl(i,e.layerClipId,t)}),p._has("scattergl")&&(l=i.getModule("scattergl"),d=u(n,l)[0],l.plot(t,e,d)),!t._context.staticPlot&&(e._hasClipOnAxisFalse&&(e.clipOnAxisFalseTraces=e.plot.selectAll(c.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),m.length)){var k=e.plot.selectAll(m.join(",")).selectAll(".trace");e.zoomScalePts=k.selectAll("path.point"),e.zoomScaleTxt=k.selectAll(".textpoint")}}function v(t,e){var n=e.plotgroup,r=e.id,i=c.layerValue2layerClass[e.xaxis.layer],a=c.layerValue2layerClass[e.yaxis.layer],o=t._fullLayout._hasOnlyLargeSploms;if(e.mainplot){var s=e.mainplotinfo,u=s.plotgroup,f=r+"-x",p=r+"-y";e.gridlayer=s.gridlayer,e.zerolinelayer=s.zerolinelayer,d(s.overlinesBelow,"path",f),d(s.overlinesBelow,"path",p),d(s.overaxesBelow,"g",f),d(s.overaxesBelow,"g",p),e.plot=d(s.overplot,"g",r),d(s.overlinesAbove,"path",f),d(s.overlinesAbove,"path",p),d(s.overaxesAbove,"g",f),d(s.overaxesAbove,"g",p),e.xlines=u.select(".overlines-"+i).select("."+f),e.ylines=u.select(".overlines-"+a).select("."+p),e.xaxislayer=u.select(".overaxes-"+i).select("."+f),e.yaxislayer=u.select(".overaxes-"+a).select("."+p)}else if(o)e.xlines=d(n,"path","xlines-above"),e.ylines=d(n,"path","ylines-above"),e.xaxislayer=d(n,"g","xaxislayer-above"),e.yaxislayer=d(n,"g","yaxislayer-above");else{var v=d(n,"g","layer-subplot");e.shapelayer=d(v,"g","shapelayer"),e.imagelayer=d(v,"g","imagelayer"),e.gridlayer=d(n,"g","gridlayer"),e.zerolinelayer=d(n,"g","zerolinelayer"),d(n,"path","xlines-below"),d(n,"path","ylines-below"),e.overlinesBelow=d(n,"g","overlines-below"),d(n,"g","xaxislayer-below"),d(n,"g","yaxislayer-below"),e.overaxesBelow=d(n,"g","overaxes-below"),e.plot=d(n,"g","plot"),e.overplot=d(n,"g","overplot"),e.xlines=d(n,"path","xlines-above"),e.ylines=d(n,"path","ylines-above"),e.overlinesAbove=d(n,"g","overlines-above"),d(n,"g","xaxislayer-above"),d(n,"g","yaxislayer-above"),e.overaxesAbove=d(n,"g","overaxes-above"),e.xlines=n.select(".xlines-"+i),e.ylines=n.select(".ylines-"+a),e.xaxislayer=n.select(".xaxislayer-"+i),e.yaxislayer=n.select(".yaxislayer-"+a)}o||(h(e.gridlayer,"g",e.xaxis._id),h(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map(function(t){return t[0]}).sort(l.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function g(t,e){if(t){var n={};for(var i in t.each(function(t){var i=t[0],a=r.select(this);a.remove(),m(i,e),n[i]=!0}),e._plots)for(var a=e._plots[i],o=a.overlays||[],s=0;s<o.length;s++){var u=o[s];n[u.id]&&u.plot.selectAll(".trace").remove()}}}function m(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=c.idRegex,n.attrRegex=c.attrRegex,n.attributes=t("./attributes"),n.layoutAttributes=t("./layout_attributes"),n.supplyLayoutDefaults=t("./layout_defaults"),n.transitionAxes=t("./transition_axes"),n.finalizeSubplots=function(t,e){var n,r,i,o=e._subplots,s=o.xaxis,u=o.yaxis,f=o.cartesian,d=f.concat(o.gl2d||[]),h={},p={};for(n=0;n<d.length;n++){var v=d[n].split("y");h[v[0]]=1,p["y"+v[1]]=1}for(n=0;n<s.length;n++)r=s[n],h[r]||(i=(t[l.id2name(r)]||{}).anchor,c.idRegex.y.test(i)||(i="y"),f.push(r+i),d.push(r+i),p[i]||(p[i]=1,a.pushUnique(u,i)));for(n=0;n<u.length;n++)i=u[n],p[i]||(r=(t[l.id2name(i)]||{}).anchor,c.idRegex.x.test(r)||(r="x"),f.push(r+i),d.push(r+i),h[r]||(h[r]=1,a.pushUnique(s,r)));if(!d.length){for(var g in r="",i="",t)if(c.attrRegex.test(g)){var m=g.charAt(0);"x"===m?(!r||+g.substr(5)<+r.substr(5))&&(r=g):(!i||+g.substr(5)<+i.substr(5))&&(i=g)}r=r?l.name2id(r):"x",i=i?l.name2id(i):"y",s.push(r),u.push(i),f.push(r+i)}},n.plot=function(t,e,n,r){var i,a=t._fullLayout,o=a._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(i=0;i<o.length;i++){for(var u,l=o[i],c=a._plots[l],f=[],d=0;d<s.length;d++){var h=s[d],v=h[0].trace;v.xaxis+v.yaxis===l&&((-1!==e.indexOf(v.index)||v.carpet)&&(u&&u[0].trace.xaxis+u[0].trace.yaxis===l&&-1!==["tonextx","tonexty","tonext"].indexOf(v.fill)&&-1===f.indexOf(u)&&f.push(u),f.push(h)),u=h)}p(t,c,f,n,r)}},n.clean=function(t,e,n,r){var i,a,o,s=r._plots||{},u=e._plots||{},c=r._subplots||{};if(r._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(o in s)(i=s[o]).plotgroup&&i.plotgroup.remove();var f=r._has&&r._has("gl"),d=e._has&&e._has("gl");if(f&&!d)for(o in s)(i=s[o])._scene&&i._scene.destroy();if(c.xaxis&&c.yaxis){var h=l.listIds({_fullLayout:r});for(a=0;a<h.length;a++){var p=h[a];e[l.id2name(p)]||r._infolayer.selectAll(".g-"+p+"title").remove()}}var v=r._has&&r._has("cartesian"),y=e._has&&e._has("cartesian");if(v&&!y)g(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups;else if(c.cartesian)for(a=0;a<c.cartesian.length;a++){var b=c.cartesian[a];if(!u[b]){var _="."+b+",."+b+"-x,."+b+"-y";r._cartesianlayer.selectAll(_).remove(),m(b,r)}}},n.drawFramework=function(t){var e=t._fullLayout,n=function(t){var e,n,r,i,a,o,s=t._fullLayout,u=s._subplots.cartesian,l=u.length,c=[],f=[];for(e=0;e<l;e++){r=u[e],i=s._plots[r],a=i.xaxis,o=i.yaxis;var d=a._mainAxis,h=o._mainAxis,p=d._id+h._id,v=s._plots[p];i.overlays=[],p!==r&&v?(i.mainplot=p,i.mainplotinfo=v,f.push(r)):(i.mainplot=void 0,i.mainPlotinfo=void 0,c.push(r))}for(e=0;e<f.length;e++)r=f[e],(i=s._plots[r]).mainplotinfo.overlays.push(i);var g=c.concat(f),m=new Array(l);for(e=0;e<l;e++){r=g[e],i=s._plots[r],a=i.xaxis,o=i.yaxis;var y=[r,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(n=0;n<i.overlays.length;n++)y.push(i.overlays[n].id);m[e]=y}return m}(t),i=e._cartesianlayer.selectAll(".subplot").data(n,String);i.enter().append("g").attr("class",function(t){return"subplot "+t[0]}),i.order(),i.exit().call(g,e),i.each(function(n){var i=n[0],a=e._plots[i];a.plotgroup=r.select(this),v(t,a),a.draglayer=d(e._draggers,"g",i)})},n.rangePlot=function(t,e,n){v(t,e),p(t,e,n),o.style(t)},n.toSVG=function(t){var e=t._fullLayout._glimages,n=r.select(t).selectAll(".svg-container"),i=n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");i.each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:f.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":63,"../../constants/xmlns_namespaces":141,"../../lib":160,"../../registry":243,"../get_data":232,"../plots":236,"./attributes":202,"./axis_ids":207,"./constants":210,"./graph_interact":213,"./layout_attributes":216,"./layout_defaults":217,"./transition_axes":226,d3:7}],216:[function(t,e,n){"use strict";var r=t("../font_attributes"),i=t("../../components/color/attributes"),a=t("../../components/drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray,u=(t("../../constants/docs").FORMAT_LINK,t("../../constants/docs").DATE_FORMAT_LINK,t("./constants"));e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":41,"../../components/drawing/attributes":62,"../../constants/docs":138,"../../lib/extend":155,"../../plot_api/plot_template":194,"../font_attributes":230,"./constants":210}],217:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/color"),a=t("../../plot_api/plot_template"),o=t("../layout_attributes"),s=t("./layout_attributes"),u=t("./type_defaults"),l=t("./axis_defaults"),c=t("./constraints").handleConstraintDefaults,f=t("./position_defaults"),d=t("./axis_ids"),h=d.id2name,p=d.name2id,v=t("../../registry"),g=v.traceIs,m=v.getComponentMethod;function y(t,e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]}e.exports=function(t,e,n){var d,v,b={},_={},x={},w={},A={},k={},M={},T={},S={};for(d=0;d<n.length;d++){var C=n[d];if(g(C,"cartesian")||g(C,"gl2d")){var E,O;if(C.xaxis)E=h(C.xaxis),y(b,E,C);else if(C.xaxes)for(v=0;v<C.xaxes.length;v++)y(b,h(C.xaxes[v]),C);if(C.yaxis)O=h(C.yaxis),y(b,O,C);else if(C.yaxes)for(v=0;v<C.yaxes.length;v++)y(b,h(C.yaxes[v]),C);if("funnel"===C.type?"h"===C.orientation?(E&&(_[E]=!0),O&&(M[O]=!0)):O&&(x[O]=!0):(O&&(A[O]=!0,k[O]=!0),g(C,"carpet")&&("carpet"!==C.type||C._cheater)||E&&(w[E]=!0)),"carpet"===C.type&&C._cheater&&E&&(_[E]=!0),g(C,"2dMap")&&(T[E]=!0,T[O]=!0),g(C,"oriented")){var P="h"===C.orientation?O:E;S[P]=!0}}}var L=e._subplots,R=L.xaxis,D=L.yaxis,F=r.simpleMap(R,h),j=r.simpleMap(D,h),N=F.concat(j),z=i.background;R.length&&D.length&&(z=r.coerce(t,e,o,"plot_bgcolor"));var I,B,q,U,H=i.combine(z,e.paper_bgcolor);function W(t,e){return r.coerce(q,U,s,t,e)}function G(t,e){return r.coerce2(q,U,s,t,e)}function V(t){return"x"===t?D:R}var Y={x:V("x"),y:V("y")},Z=Y.x.concat(Y.y);function X(e,n){for(var r="x"===e?F:j,i=[],a=0;a<r.length;a++){var o=r[a];o===n||(t[o]||{}).overlaying||i.push(p(o))}return i}for(d=0;d<N.length;d++){I=N[d],B=I.charAt(0),r.isPlainObject(t[I])||(t[I]={}),q=t[I],U=a.newContainer(e,I,B+"axis");var $=b[I]||[];U._traceIndices=$.map(function(t){return t._expandedIndex}),U._annIndices=[],U._shapeIndices=[],U._imgIndices=[],U._subplotsWith=[],U._counterAxes=[],U._name=U._attr=I;var J=U._id=p(I),K=X(B,I),Q="x"===B&&!w[I]&&_[I]||"y"===B&&!A[I]&&x[I],tt="y"===B&&!k[I]&&M[I],et={letter:B,font:e.font,outerTicks:T[I],showGrid:!S[I],data:$,bgColor:H,calendar:e.calendar,automargin:!0,visibleDflt:Q,reverseDflt:tt,splomStash:((e._splomAxes||{})[B]||{})[J]};W("uirevision",e.uirevision),u(q,U,W,et),l(q,U,W,et,e);var nt=G("spikecolor"),rt=G("spikethickness"),it=G("spikedash"),at=G("spikemode"),ot=G("spikesnap"),st=W("showspikes",!!nt||!!rt||!!it||!!at||!!ot);st||(delete U.spikecolor,delete U.spikethickness,delete U.spikedash,delete U.spikemode,delete U.spikesnap),f(q,U,W,{letter:B,counterAxes:Y[B],overlayableAxes:K,grid:e.grid}),U._input=q}var ut=m("rangeslider","handleDefaults"),lt=m("rangeselector","handleDefaults");for(d=0;d<F.length;d++)I=F[d],q=t[I],U=e[I],ut(t,e,I),"date"===U.type&&lt(q,U,e,j,U.calendar),W("fixedrange");for(d=0;d<j.length;d++){I=j[d],q=t[I],U=e[I];var ct=e[h(U.anchor)],ft=m("rangeslider","isVisible")(ct);W("fixedrange",ft)}var dt=e._axisConstraintGroups=[],ht=e._axisMatchGroups=[];for(d=0;d<N.length;d++)I=N[d],B=I.charAt(0),q=t[I],U=e[I],c(q,U,W,Z,e);for(d=0;d<ht.length;d++){var pt,vt=ht[d],gt=null,mt=null;for(pt in vt)(U=e[h(pt)]).matches||(gt=U.range,mt=U.autorange);if(null===gt||null===mt)for(pt in vt){U=e[h(pt)],gt=U.range,mt=U.autorange;break}for(pt in vt)(U=e[h(pt)]).matches&&(U.range=gt.slice(),U.autorange=mt),U._matchGroup=vt;if(dt.length)for(pt in vt)for(v=0;v<dt.length;v++){var yt=dt[v];for(var bt in yt)pt===bt&&(r.warn("Axis "+bt+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete yt[bt],Object.keys(yt).length<2&&dt.splice(v,1))}}}},{"../../components/color":42,"../../lib":160,"../../plot_api/plot_template":194,"../../registry":243,"../layout_attributes":234,"./axis_defaults":206,"./axis_ids":207,"./constraints":211,"./layout_attributes":216,"./position_defaults":219,"./type_defaults":227}],218:[function(t,e,n){"use strict";var r=t("tinycolor2").mix,i=t("../../components/color/attributes").lightFraction,a=t("../../lib");e.exports=function(t,e,n,o){var s=(o=o||{}).dfltColor;function u(n,r){return a.coerce2(t,e,o.attributes,n,r)}var l=u("linecolor",s),c=u("linewidth"),f=n("showline",o.showLine||!!l||!!c);f||(delete e.linecolor,delete e.linewidth);var d=r(s,o.bgColor,o.blend||i).toRgbString(),h=u("gridcolor",d),p=u("gridwidth"),v=n("showgrid",o.showGrid||!!h||!!p);if(v||(delete e.gridcolor,delete e.gridwidth),!o.noZeroLine){var g=u("zerolinecolor",s),m=u("zerolinewidth"),y=n("zeroline",o.showGrid||!!g||!!m);y||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":41,"../../lib":160,tinycolor2:25}],219:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib");e.exports=function(t,e,n,a){var o,s,u,l,c=a.counterAxes||[],f=a.overlayableAxes||[],d=a.letter,h=a.grid;h&&(s=h._domains[d][h._axisMap[e._id]],o=h._anchors[e._id],s&&(u=h[d+"side"].split(" ")[0],l=h.domain[d]["right"===u||"top"===u?1:0])),s=s||[0,1],o=o||(r(t.position)?"free":c[0]||"free"),u=u||("x"===d?"bottom":"left"),l=l||0;var p=i.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(c),dflt:o}},"anchor");"free"===p&&n("position",l),i.coerce(t,e,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:u}},"side");var v=!1;if(f.length&&(v=i.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(f),dflt:!1}},"overlaying")),!v){var g=n("domain",s);g[0]>g[1]-1/4096&&(e.domain=s),i.noneOrAll(t.domain,e.domain,s)}return n("layer"),e}},{"../../lib":160,"fast-isnumeric":9}],220:[function(t,e,n){"use strict";var r=t("../../constants/alignment").FROM_BL;e.exports=function(t,e,n){void 0===n&&(n=r[t.constraintoward||"center"]);var i=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=i[0]+(i[1]-i[0])*n;t.range=t._input.range=[t.l2r(a+(i[0]-a)*e),t.l2r(a+(i[1]-a)*e)]}},{"../../constants/alignment":137}],221:[function(t,e,n){"use strict";var r=t("polybooljs"),i=t("../../registry"),a=t("../../components/color"),o=t("../../components/fx"),s=t("../../lib"),u=t("../../lib/polygon"),l=t("../../lib/throttle"),c=t("../../components/fx/helpers").makeEventData,f=t("./axis_ids").getFromId,d=t("../../lib/clear_gl_canvases"),h=t("../../plot_api/subroutines").redrawReglTraces,p=t("./constants"),v=p.MINSELECT,g=u.filter,m=u.tester;function y(t){return t._id}function b(t,e,n,r,i,a,o){var s,u,l,c,f,d,h,p,v,g,m=e._hoverdata,y=e._fullLayout.clickmode,b=y.indexOf("event")>-1,_=[];if(function(t){return t&&Array.isArray(t)&&!0!==t[0].hoverOnBox}(m)){A(t,e,a),s=M(e,n,r,i);var x=function(t,e){var n,r,i=t[0],a=-1,o=[];for(r=0;r<e.length;r++)if(n=e[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(m,s),O=x.pointNumbers.length>0;if(O?function(t,e){var n,r,i,a=[];for(i=0;i<t.length;i++)(n=t[i]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&a.push(n);if(1===a.length&&a[0]===e.searchInfo&&(r=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length){for(i=0;i<e.pointNumbers.length;i++)if(r.selectedpoints.indexOf(e.pointNumbers[i])<0)return!1;return!0}return!1}(s,x):function(t){var e,n,r,i=0;for(r=0;r<t.length;r++)if(e=t[r],(n=e.cd[0].trace).selectedpoints){if(n.selectedpoints.length>1)return!1;if((i+=n.selectedpoints.length)>1)return!1}return 1===i}(s)&&(h=S(x))){for(o&&o.remove(),g=0;g<s.length;g++)(u=s[g])._module.selectPoints(u,!1);C(e,s),k(a),b&&e.emit("plotly_deselect",null)}else{p=t.shiftKey&&(void 0!==h?h:S(x)),l=function(t,e,n){return{pointNumber:t,searchInfo:e,subtract:n}}(x.pointNumber,x.searchInfo,p);var P=a.selectionDefs.concat([l]);for(c=w(P),g=0;g<s.length;g++)if(f=s[g]._module.selectPoints(s[g],c),d=E(f,s[g]),_.length)for(var L=0;L<d.length;L++)_.push(d[L]);else _=d;C(e,s,v={points:_}),l&&a&&a.selectionDefs.push(l),o&&T(a.mergedPolygons,o),b&&e.emit("plotly_selected",v)}}}function _(t){return"pointNumber"in t&&"searchInfo"in t}function x(t){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,n,r,i){var a=t.searchInfo.cd[0].trace._expandedIndex,o=i.cd[0].trace._expandedIndex;return o===a&&r===t.pointNumber},isRect:!1,degenerate:!1,subtract:t.subtract}}function w(t){for(var e=[],n=_(t[0])?0:t[0][0][0],r=n,i=_(t[0])?0:t[0][0][1],a=i,o=0;o<t.length;o++)if(_(t[o]))e.push(x(t[o]));else{var s=u.tester(t[o]);s.subtract=t[o].subtract,e.push(s),n=Math.min(n,s.xmin),r=Math.max(r,s.xmax),i=Math.min(i,s.ymin),a=Math.max(a,s.ymax)}return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(t,n,r,i){for(var a=!1,o=0;o<e.length;o++)e[o].contains(t,n,r,i)&&(a=!1===e[o].subtract);return a},isRect:!1,degenerate:!1}}function A(t,e,n){var r=e._fullLayout,i=n.plotinfo,a=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,o=t.shiftKey||t.altKey;a&&o&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):o&&i.selection||k(n),a||(O(e),r._lastSelectedSubplot=i.id)}function k(t){var e=t.plotinfo;e.selection={},e.selection.selectionDefs=t.selectionDefs=[],e.selection.mergedPolygons=t.mergedPolygons=[]}function M(t,e,n,r){var i,a,o,s=[],u=e.map(y),l=n.map(y);for(o=0;o<t.calcdata.length;o++)if(i=t.calcdata[o],!0===(a=i[0].trace).visible&&a._module&&a._module.selectPoints)if(!r||a.subplot!==r&&a.geo!==r)if("splom"===a.type&&a._xaxes[u[0]]&&a._yaxes[l[0]]){var c=h(a._module,i,e[0],n[0]);c.scene=t._fullLayout._splomScenes[a.uid],s.push(c)}else if("sankey"===a.type){var d=h(a._module,i,e[0],n[0]);s.push(d)}else{if(-1===u.indexOf(a.xaxis))continue;if(-1===l.indexOf(a.yaxis))continue;s.push(h(a._module,i,f(t,a.xaxis),f(t,a.yaxis)))}else s.push(h(a._module,i,e[0],n[0]));return s;function h(t,e,n,r){return{_module:t,cd:e,xaxis:n,yaxis:r}}}function T(t,e){var n,r,i=[];for(n=0;n<t.length;n++){var a=t[n];i.push(a.join("L")+"L"+a[0])}r=t.length>0?"M"+i.join("M")+"Z":"M0,0Z",e.attr("d",r)}function S(t){var e=t.searchInfo.cd[0].trace,n=t.pointNumber,r=t.pointNumbers,i=r.length>0,a=i?r[0]:n;return!!e.selectedpoints&&e.selectedpoints.indexOf(a)>-1}function C(t,e,n){var r,a,o,s;for(r=0;r<e.length;r++){var u=e[r].cd[0].trace._fullInput,l=t._fullLayout._tracePreGUI[u.uid]||{};void 0===l.selectedpoints&&(l.selectedpoints=u._input.selectedpoints||null)}if(n){var c=n.points||[];for(r=0;r<e.length;r++)(s=e[r].cd[0].trace)._input.selectedpoints=s._fullInput.selectedpoints=[],s._fullInput!==s&&(s.selectedpoints=[]);for(r=0;r<c.length;r++){var f=c[r],p=f.data,v=f.fullData;f.pointIndices?([].push.apply(p.selectedpoints,f.pointIndices),s._fullInput!==s&&[].push.apply(v.selectedpoints,f.pointIndices)):(p.selectedpoints.push(f.pointIndex),s._fullInput!==s&&v.selectedpoints.push(f.pointIndex))}}else for(r=0;r<e.length;r++)delete(s=e[r].cd[0].trace).selectedpoints,delete s._input.selectedpoints,s._fullInput!==s&&delete s._fullInput.selectedpoints;var g=!1;for(r=0;r<e.length;r++){a=e[r],o=a.cd,s=o[0].trace,i.traceIs(s,"regl")&&(g=!0);var m=a._module,y=m.styleOnSelect||m.style;y&&(y(t,o,o[0].node3),o[0].nodeRangePlot3&&y(t,o,o[0].nodeRangePlot3))}g&&(d(t),h(t))}function E(t,e){if(Array.isArray(t))for(var n=e.cd,r=e.cd[0].trace,i=0;i<t.length;i++)t[i]=c(t[i],r,n);return t}function O(t){var e=t._fullLayout||{},n=e._zoomlayer;n&&n.selectAll(".select-outline").remove()}e.exports={prepSelect:function(t,e,n,i,u){var c,f,d,h,y,_,x,S=i.gd,O=S._fullLayout,P=O._zoomlayer,L=i.element.getBoundingClientRect(),R=i.plotinfo,D=R.xaxis._offset,F=R.yaxis._offset,j=e-L.left,N=n-L.top,z=j,I=N,B="M"+j+","+N,q=i.xaxes[0]._length,U=i.yaxes[0]._length,H=i.xaxes.concat(i.yaxes),W=t.altKey;A(t,S,i),"lasso"===u&&(c=g([[j,N]],p.BENDPX));var G=P.selectAll("path.select-outline-"+R.id).data([1,2]);G.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+R.id}).attr("transform","translate("+D+", "+F+")").attr("d",B+"Z");var V,Y=P.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1}).attr("transform","translate("+D+", "+F+")").attr("d","M0,0Z"),Z=O._uid+p.SELECTID,X=[],$=M(S,i.xaxes,i.yaxes,i.subplot);function J(t,e){return"log"===t.type?t.p2d(e):t.p2r(e)}function K(t){var e="y"===t._id.charAt(0)?1:0;return function(n){return J(t,n[e])}}function Q(t,e){return t-e}V=R.fillRangeItems?R.fillRangeItems:"select"===u?function(t,e){var n=t.range={};for(y=0;y<H.length;y++){var r=H[y],i=r._id.charAt(0);n[r._id]=[J(r,e[i+"min"]),J(r,e[i+"max"])].sort(Q)}}:function(t,e,n){var r=t.lassoPoints={};for(y=0;y<H.length;y++){var i=H[y];r[i._id]=n.filtered.map(K(i))}},i.moveFn=function(t,e){z=Math.max(0,Math.min(q,t+j)),I=Math.max(0,Math.min(U,e+N));var n=Math.abs(z-j),a=Math.abs(I-N);if("select"===u){var o=O.selectdirection;"h"===(o="any"===O.selectdirection?a<Math.min(.6*n,v)?"h":n<Math.min(.6*a,v)?"v":"d":O.selectdirection)?((h=[[j,0],[j,U],[z,U],[z,0]]).xmin=Math.min(j,z),h.xmax=Math.max(j,z),h.ymin=Math.min(0,U),h.ymax=Math.max(0,U),Y.attr("d","M"+h.xmin+","+(N-v)+"h-4v"+2*v+"h4ZM"+(h.xmax-1)+","+(N-v)+"h4v"+2*v+"h-4Z")):"v"===o?((h=[[0,N],[0,I],[q,I],[q,N]]).xmin=Math.min(0,q),h.xmax=Math.max(0,q),h.ymin=Math.min(N,I),h.ymax=Math.max(N,I),Y.attr("d","M"+(j-v)+","+h.ymin+"v-4h"+2*v+"v4ZM"+(j-v)+","+(h.ymax-1)+"v4h"+2*v+"v-4Z")):"d"===o&&((h=[[j,N],[j,I],[z,I],[z,N]]).xmin=Math.min(j,z),h.xmax=Math.max(j,z),h.ymin=Math.min(N,I),h.ymax=Math.max(N,I),Y.attr("d","M0,0Z"))}else"lasso"===u&&(c.addPt([z,I]),h=c.filtered);i.selectionDefs&&i.selectionDefs.length?(d=function(t,e,n){return n?r.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions:r.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(i.mergedPolygons,h,W),h.subtract=W,f=w(i.selectionDefs.concat([h]))):(d=[h],f=m(h)),T(d,G),l.throttle(Z,p.SELECTDELAY,function(){var t;X=[];var e,n=[];for(y=0;y<$.length;y++)if(_=$[y],e=_._module.selectPoints(_,f),n.push(e),t=E(e,_),X.length)for(var r=0;r<t.length;r++)X.push(t[r]);else X=t;C(S,$,x={points:X}),V(x,h,c),i.gd.emit("plotly_selecting",x)})},i.clickFn=function(t,e){var n=O.clickmode;Y.remove(),l.done(Z).then(function(){if(l.clear(Z),2===t){for(G.remove(),y=0;y<$.length;y++)(_=$[y])._module.selectPoints(_,!1);C(S,$),k(i),S.emit("plotly_deselect",null)}else n.indexOf("select")>-1&&b(e,S,i.xaxes,i.yaxes,i.subplot,i,G),"event"===n&&S.emit("plotly_selected",void 0);o.click(S,e)}).catch(s.error)},i.doneFn=function(){Y.remove(),l.done(Z).then(function(){l.clear(Z),i.gd.emit("plotly_selected",x),h&&i.selectionDefs&&(h.subtract=W,i.selectionDefs.push(h),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,d)),i.doneFnCompleted&&i.doneFnCompleted(X)}).catch(s.error)}},clearSelect:O,selectOnClick:b}},{"../../components/color":42,"../../components/fx":81,"../../components/fx/helpers":77,"../../lib":160,"../../lib/clear_gl_canvases":149,"../../lib/polygon":172,"../../lib/throttle":182,"../../plot_api/subroutines":195,"../../registry":243,"./axis_ids":207,"./constants":210,polybooljs:16}],222:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../lib"),o=a.cleanNumber,s=a.ms2DateTime,u=a.dateTime2ms,l=a.ensureNumber,c=a.isArrayOrTypedArray,f=t("../../constants/numerical"),d=f.FP_SAFE,h=f.BADNUM,p=f.LOG_CLIP,v=t("./constants"),g=t("./axis_ids");function m(t){return Math.pow(10,t)}function y(t){return null!==t&&void 0!==t}e.exports=function(t,e){e=e||{};var n=t._id||"x",f=n.charAt(0);function b(e,n){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&n&&t.range&&2===t.range.length){var r=t.range[0],i=t.range[1];return.5*(r+i-2*p*Math.abs(r-i))}return h}function _(e,n,r){var o=u(e,r||t.calendar);if(o===h){if(!i(e))return h;e=+e;var s=Math.floor(10*a.mod(e+.05,1)),l=Math.round(e-s/10);o=u(new Date(l))+s/10}return o}function x(e,n,r){return s(e,n,r||t.calendar)}function w(e){return t._categories[Math.round(e)]}function A(e){if(y(e)){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push("number"===typeof e?String(e):e);var n=t._categories.length-1;return t._categoriesMap[e]=n,n}return h}function k(e){if(t._categoriesMap)return t._categoriesMap[e]}function M(t){var e=k(t);return void 0!==e?e:i(t)?+t:void 0}function T(e){return i(e)?r.round(t._b+t._m*e,2):h}function S(e){return(e-t._b)/t._m}t.c2l="log"===t.type?b:l,t.l2c="log"===t.type?m:l,t.l2p=T,t.p2l=S,t.c2p="log"===t.type?function(t,e){return T(b(t,e))}:T,t.p2c="log"===t.type?function(t){return m(S(t))}:S,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=o,t.c2d=t.c2r=t.l2d=t.l2r=l,t.d2p=t.r2p=function(e){return t.l2p(o(e))},t.p2d=t.p2r=S,t.cleanPos=l):"log"===t.type?(t.d2r=t.d2l=function(t,e){return b(o(t),e)},t.r2d=t.r2c=function(t){return m(o(t))},t.d2c=t.r2l=o,t.c2d=t.l2r=l,t.c2r=b,t.l2d=m,t.d2p=function(e,n){return t.l2p(t.d2r(e,n))},t.p2d=function(t){return m(S(t))},t.r2p=function(e){return t.l2p(o(e))},t.p2r=S,t.cleanPos=l):"date"===t.type?(t.d2r=t.r2d=a.identity,t.d2c=t.r2c=t.d2l=t.r2l=_,t.c2d=t.c2r=t.l2d=t.l2r=x,t.d2p=t.r2p=function(e,n,r){return t.l2p(_(e,0,r))},t.p2d=t.p2r=function(t,e,n){return x(S(t),e,n)},t.cleanPos=function(e){return a.cleanDate(e,h,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=A,t.r2d=t.c2d=t.l2d=w,t.d2r=t.d2l_noadd=M,t.r2c=function(e){var n=M(e);return void 0!==n?n:t.fraction2r(.5)},t.l2r=t.c2r=l,t.r2l=M,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return w(S(t))},t.r2p=t.d2p,t.p2r=S,t.cleanPos=function(t){return"string"===typeof t&&""!==t?t:l(t)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=w,t.d2r=t.d2l_noadd=M,t.r2c=function(e){var n=M(e);return void 0!==n?n:t.fraction2r(.5)},t.r2c_just_indices=k,t.l2r=t.c2r=l,t.r2l=M,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return w(S(t))},t.r2p=t.d2p,t.p2r=S,t.cleanPos=function(t){return Array.isArray(t)||"string"===typeof t&&""!==t?t:l(t)},t.setupMultiCategory=function(r){var i,o,s=t._traceIndices,u=e._axisMatchGroups;if(u&&u.length&&0===t._categories.length)for(i=0;i<u.length;i++){var l=u[i];if(l[n])for(var d in l)if(d!==n){var h=e[g.id2name(d)];s=s.concat(h._traceIndices)}}var p=[[0,{}],[0,{}]],v=[];for(i=0;i<s.length;i++){var m=r[s[i]];if(f in m){var b=m[f],_=m._length||a.minRowLength(b);if(c(b[0])&&c(b[1]))for(o=0;o<_;o++){var x=b[0][o],w=b[1][o];y(x)&&y(w)&&(v.push([x,w]),x in p[0][1]||(p[0][1][x]=p[0][0]++),w in p[1][1]||(p[1][1][w]=p[1][0]++))}}}for(v.sort(function(t,e){var n=p[0][1],r=n[t[0]]-n[e[0]];if(r)return r;var i=p[1][1];return i[t[1]]-i[e[1]]}),i=0;i<v.length;i++)A(v[i])}),t.fraction2r=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return t.l2r(n+e*(r-n))},t.r2fraction=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return(t.r2l(e)-n)/(r-n)},t.cleanRange=function(e,n){n||(n={}),e||(e="range");var r,o,s=a.nestedProperty(t,e).get();if(o=(o="date"===t.type?a.dfltRange(t.calendar):"y"===f?v.DFLTRANGEY:n.dfltRange||v.DFLTRANGEX).slice(),s&&2===s.length)for("date"!==t.type||t.autorange||(s[0]=a.cleanDate(s[0],h,t.calendar),s[1]=a.cleanDate(s[1],h,t.calendar)),r=0;r<2;r++)if("date"===t.type){if(!a.isDateTime(s[r],t.calendar)){t[e]=o;break}if(t.r2l(s[0])===t.r2l(s[1])){var u=a.constrain(t.r2l(s[0]),a.MIN_MS+1e3,a.MAX_MS-1e3);s[0]=t.l2r(u-1e3),s[1]=t.l2r(u+1e3);break}}else{if(!i(s[r])){if(!i(s[1-r])){t[e]=o;break}s[r]=s[1-r]*(r?10:.1)}if(s[r]<-d?s[r]=-d:s[r]>d&&(s[r]=d),s[0]===s[1]){var l=Math.max(1,Math.abs(1e-6*s[0]));s[0]-=l,s[1]+=l}}else a.nestedProperty(t,e).set(o)},t.setScale=function(n){var r=e._size;if(t.overlaying){var i=g.getFromId({_fullLayout:e},t.overlaying);t.domain=i.domain}var a=n&&t._r?"_r":"range",o=t.calendar;t.cleanRange(a);var s=t.r2l(t[a][0],o),u=t.r2l(t[a][1],o);if("y"===f?(t._offset=r.t+(1-t.domain[1])*r.h,t._length=r.h*(t.domain[1]-t.domain[0]),t._m=t._length/(s-u),t._b=-t._m*u):(t._offset=r.l+t.domain[0]*r.w,t._length=r.w*(t.domain[1]-t.domain[0]),t._m=t._length/(u-s),t._b=-t._m*s),!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.makeCalcdata=function(e,n){var r,i,o,s,u=t.type,l="date"===u&&e[n+"calendar"];if(n in e){if(r=e[n],s=e._length||a.minRowLength(r),a.isTypedArray(r)&&("linear"===u||"log"===u)){if(s===r.length)return r;if(r.subarray)return r.subarray(0,s)}if("multicategory"===u)return function(t,e){for(var n=new Array(e),r=0;r<e;r++){var i=(t[0]||[])[r],a=(t[1]||[])[r];n[r]=k([i,a])}return n}(r,s);for(i=new Array(s),o=0;o<s;o++)i[o]=t.d2c(r[o],0,l)}else{var c=n+"0"in e?t.d2c(e[n+"0"],0,l):0,f=e["d"+n]?Number(e["d"+n]):1;for(r=e[{x:"y",y:"x"}[n]],s=e._length||r.length,i=new Array(s),o=0;o<s;o++)i[o]=c+o*f}return i},t.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&i(t.r2l(e[0]))&&i(t.r2l(e[1]))},t.isPtWithinRange=function(e,n){var r=t.c2l(e[f],null,n),i=t.r2l(t.range[0]),a=t.r2l(t.range[1]);return i<a?i<=r&&r<=a:a<=r&&r<=i},t.clearCalc=function(){var r=function(){t._categories=[],t._categoriesMap={}},i=e._axisMatchGroups;if(i&&i.length){for(var a=!1,o=0;o<i.length;o++){var s=i[o];if(s[n]){a=!0;var u=null,l=null;for(var c in s){var f=e[g.id2name(c)];if(f._categories){u=f._categories,l=f._categoriesMap;break}}u&&l?(t._categories=u,t._categoriesMap=l):r();break}}a||r()}else r();if(t._initialCategories)for(var d=0;d<t._initialCategories.length;d++)A(t._initialCategories[d])},t.sortByInitialCategories=function(){var r=[];if(t._categories=[],t._categoriesMap={},t._initialCategories)for(var i=0;i<t._initialCategories.length;i++)A(t._initialCategories[i]);r=r.concat(t._traceIndices);var a=t._matchGroup;for(var o in a)if(n!==o){var s=e[g.id2name(o)];s._categories=t._categories,s._categoriesMap=t._categoriesMap,r=r.concat(s._traceIndices)}return r};var C=e._d3locale;"date"===t.type&&(t._dateFormat=C?C.timeFormat.utc:r.time.format.utc,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=C?C.numberFormat:r.format,delete t._minDtick,delete t._forceTick0}},{"../../constants/numerical":140,"../../lib":160,"./axis_ids":207,"./constants":210,d3:7,"fast-isnumeric":9}],223:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes"),a=t("../array_container_defaults");function o(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(n){return t[n]===t[e[0]]})||1===e.length)return t[e[0]]}function s(t,e){function n(n,a){return r.coerce(t,e,i.tickformatstops,n,a)}var a=n("enabled");a&&(n("dtickrange"),n("value"))}e.exports=function(t,e,n,u,l,c){c&&1!==c.pass||function(t,e,n,r,i){var a=o(t);n("tickprefix")&&n("showtickprefix",a),n("ticksuffix",i.tickSuffixDflt)&&n("showticksuffix",a)}(t,0,n,0,l),c&&2!==c.pass||function(t,e,n,u,l){var c=o(t);if(n("tickprefix")&&n("showtickprefix",c),n("ticksuffix",l.tickSuffixDflt)&&n("showticksuffix",c),n("showticklabels")){var f=l.font||{},d=e.color,h=d&&d!==i.color.dflt?d:f.color;if(r.coerceFont(n,"tickfont",{family:f.family,size:f.size,color:h}),n("tickangle"),"category"!==u){var p=n("tickformat"),v=t.tickformatstops;Array.isArray(v)&&v.length&&a(t,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:s}),p||"date"===u||(n("showexponent",c),n("exponentformat"),n("separatethousands"))}}}(t,e,n,u,l)}},{"../../lib":160,"../array_container_defaults":200,"./layout_attributes":216}],224:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,n,a){var o=r.coerce2(t,e,i,"ticklen"),s=r.coerce2(t,e,i,"tickwidth"),u=r.coerce2(t,e,i,"tickcolor",e.color),l=n("ticks",a.outerTicks||o||s||u?"outside":"");l||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":160,"./layout_attributes":216}],225:[function(t,e,n){"use strict";var r=t("./clean_ticks");e.exports=function(t,e,n,i){var a;if("array"!==t.tickmode||"log"!==i&&"date"!==i){var o=Array.isArray(t.tickvals)?"array":t.dtick?"linear":"auto";a=n("tickmode",o)}else a=e.tickmode="auto";if("auto"===a)n("nticks");else if("linear"===a){var s=e.dtick=r.dtick(t.dtick,i);e.tick0=r.tick0(t.tick0,i,e.calendar,s)}else if("multicategory"!==i){var u=n("tickvals");void 0===u?e.tickmode="auto":n("ticktext")}}},{"./clean_ticks":209}],226:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../components/drawing"),o=t("./axes");e.exports=function(t,e,n,s){var u=t._fullLayout;if(0!==e.length){var l,c,f,d;s&&(l=s());var h=r.ease(n.easing);return t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(d),d=null,function(){for(var n={},r=0;r<e.length;r++){var a=e[r];a.xr0&&(n[a.plotinfo.xaxis._name+".range"]=a.xr0.slice()),a.yr0&&(n[a.plotinfo.yaxis._name+".range"]=a.yr0.slice())}return i.call("relayout",t,n).then(function(){for(var t=0;t<e.length;t++)p(e[t].plotinfo)})}()}),c=Date.now(),d=window.requestAnimationFrame(function r(){f=Date.now();for(var a=Math.min(1,(f-c)/n.duration),o=h(a),s=0;s<e.length;s++)v(e[s],o);f-c>n.duration?(function(){for(var n={},r=0;r<e.length;r++){var a=e[r];a.xr1&&(n[a.plotinfo.xaxis._name+".range"]=a.xr1.slice()),a.yr1&&(n[a.plotinfo.yaxis._name+".range"]=a.yr1.slice())}l&&l(),i.call("relayout",t,n).then(function(){for(var t=0;t<e.length;t++)p(e[t].plotinfo)})}(),d=window.cancelAnimationFrame(r)):d=window.requestAnimationFrame(r)}),Promise.resolve()}function p(t){var e=t.xaxis,n=t.yaxis;u._defs.select("#"+t.clipId+"> rect").call(a.setTranslate,0,0).call(a.setScale,1,1),t.plot.call(a.setTranslate,e._offset,n._offset).call(a.setScale,1,1);var r=t.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(a.setPointGroupScale,1,1),r.selectAll(".textpoint").call(a.setTextPointsScale,1,1),r.call(a.hideOutsideRangePoints,t)}function v(e,n){var r=e.plotinfo,i=r.xaxis,s=r.yaxis,u=e.xr0,l=e.xr1,c=i._length,f=e.yr0,d=e.yr1,h=s._length,p=!!l,v=!!d,g=[];if(p){var m=u[1]-u[0],y=l[1]-l[0];g[0]=(u[0]*(1-n)+n*l[0]-u[0])/(u[1]-u[0])*c,g[2]=c*(1-n+n*y/m),i.range[0]=u[0]*(1-n)+n*l[0],i.range[1]=u[1]*(1-n)+n*l[1]}else g[0]=0,g[2]=c;if(v){var b=f[1]-f[0],_=d[1]-d[0];g[1]=(f[1]*(1-n)+n*d[1]-f[1])/(f[0]-f[1])*h,g[3]=h*(1-n+n*_/b),s.range[0]=f[0]*(1-n)+n*d[0],s.range[1]=f[1]*(1-n)+n*d[1]}else g[1]=0,g[3]=h;o.drawOne(t,i,{skipTitle:!0}),o.drawOne(t,s,{skipTitle:!0}),o.redrawComponents(t,[i._id,s._id]);var x=p?c/g[2]:1,w=v?h/g[3]:1,A=p?g[0]:0,k=v?g[1]:0,M=p?g[0]/g[2]*c:0,T=v?g[1]/g[3]*h:0,S=i._offset-M,C=s._offset-T;r.clipRect.call(a.setTranslate,A,k).call(a.setScale,1/x,1/w),r.plot.call(a.setTranslate,S,C).call(a.setScale,x,w),a.setPointGroupScale(r.zoomScalePts,1/x,1/w),a.setTextPointsScale(r.zoomScaleTxt,1/x,1/w)}o.redrawComponents(t)}},{"../../components/drawing":63,"../../registry":243,"./axes":204,d3:7}],227:[function(t,e,n){"use strict";var r=t("../../registry").traceIs,i=t("./axis_autotype");function a(t){return{v:"x",h:"y"}[t.orientation||"v"]}function o(t,e){var n=a(t),i=r(t,"box-violin"),o=r(t._fullInput||{},"candlestick");return i&&!o&&e===n&&void 0===t[n]&&void 0===t[n+"0"]}e.exports=function(t,e,n,s){var u=n("type",(s.splomStash||{}).type);"-"===u&&(function(t,e){if("-"===t.type){var n=t._id,s=n.charAt(0);-1!==n.indexOf("scene")&&(n=s);var u=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if("splom"===i.type&&i._length>0&&(i["_"+n+"axes"]||{})[e])return i;if((i[n+"axis"]||n)===e){if(o(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(e,n,s);if(u)if("histogram"!==u.type||s!=={v:"y",h:"x"}[u.orientation||"v"]){var l,c=s+"calendar",f=u[c],d={noMultiCategory:!r(u,"cartesian")||r(u,"noMultiCategory")};if(o(u,s)){var h=a(u),p=[];for(l=0;l<e.length;l++){var v=e[l];r(v,"box-violin")&&(v[s+"axis"]||s)===n&&(void 0!==v[h]?p.push(v[h][0]):void 0!==v.name?p.push(v.name):p.push("text"),v[c]!==f&&(f=void 0))}t.type=i(p,f,d)}else if("splom"===u.type){var g=u.dimensions,m=g[u._axesDim[n]];m.visible&&(t.type=i(m.values,f,d))}else t.type=i(u[s]||[u[s+"0"]],f,d)}else t.type="linear"}}(e,s.data),"-"===e.type?e.type="linear":t.type=e.type)}},{"../../registry":243,"./axis_autotype":205}],228:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib");function a(t,e,n){var r,a,o,s=!1;if("data"===e.type)r=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;r=t._fullLayout}return a=i.nestedProperty(r,e.prop).get(),(o=n[e.type]=n[e.type]||{}).hasOwnProperty(e.prop)&&o[e.prop]!==a&&(s=!0),o[e.prop]=a,{changed:s,value:a}}function o(t,e){var n=[],r=e[0],a={};if("string"===typeof r)a[r]=e[1];else{if(!i.isPlainObject(r))return n;a=r}return u(a,function(t,e,r){n.push({type:"layout",prop:t,value:r})},"",0),n}function s(t,e){var n,r,a,o,s=[];if(r=e[0],a=e[1],n=e[2],o={},"string"===typeof r)o[r]=a;else{if(!i.isPlainObject(r))return s;o=r,void 0===n&&(n=a)}return void 0===n&&(n=null),u(o,function(e,r,i){var a,o;if(Array.isArray(i)){o=i.slice();var u=Math.min(o.length,t.data.length);n&&(u=Math.min(u,n.length)),a=[];for(var l=0;l<u;l++)a[l]=n?n[l]:l}else o=i,a=n?n.slice():null;if(null===a)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(a)){if(!Array.isArray(o)){var c=o;o=[];for(var f=0;f<a.length;f++)o[f]=c}o.length=Math.min(a.length,o.length)}s.push({type:"data",prop:e,traces:a,value:o})},"",0),s}function u(t,e,n,r){Object.keys(t).forEach(function(a){var o=t[a];if("_"!==a[0]){var s=n+(r>0?".":"")+a;i.isPlainObject(o)?u(o,e,s,r+1):e(s,a,o)}})}n.manageCommandObserver=function(t,e,r,o){var s={},u=!0;e&&e._commandObserver&&(s=e._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var l=n.hasSimpleAPICommandBindings(t,r,s.lookupTable);if(e&&e._commandObserver){if(l)return s;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,s}if(l){a(t,l,s.cache),s.check=function(){if(u){var e=a(t,l,s.cache);return e.changed&&o&&void 0!==s.lookupTable[e.value]&&(s.disable(),Promise.resolve(o({value:e.value,type:l.type,prop:l.prop,traces:l.traces,index:s.lookupTable[e.value]})).then(s.enable,s.enable)),e.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<c.length;f++)t._internalOn(c[f],s.check);s.remove=function(){for(var e=0;e<c.length;e++)t._removeInternalListener(c[e],s.check)}}else i.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){u=!1},s.enable=function(){u=!0},e&&(e._commandObserver=s),s},n.hasSimpleAPICommandBindings=function(t,e,r){var i,a,o=e.length;for(i=0;i<o;i++){var s,u=e[i],l=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!l)return!1;var f=n.computeAPICommandBindings(t,l,c);if(1!==f.length)return!1;if(a){if((s=f[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var d=0;d<a.traces.length;d++)if(a.traces[d]!==s.traces[d])return!1}else if(s.prop!==a.prop)return!1}else a=f[0],Array.isArray(a.traces)&&a.traces.sort();var h=(s=f[0]).value;if(Array.isArray(h)){if(1!==h.length)return!1;h=h[0]}r&&(r[h]=i)}return a},n.executeAPICommand=function(t,e,n){if("skip"===e)return Promise.resolve();var a=r.apiMethodRegistry[e],o=[t];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)o.push(n[s]);return a.apply(null,o).catch(function(t){return i.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},n.computeAPICommandBindings=function(t,e,n){var r;switch(Array.isArray(n)||(n=[]),e){case"restyle":r=s(t,n);break;case"relayout":r=o(0,n);break;case"update":r=s(t,[n[0],n[2]]).concat(o(0,[n[1]]));break;case"animate":r=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}},{"../lib":160,"../registry":243}],229:[function(t,e,n){"use strict";var r=t("../lib/extend").extendFlat;n.attributes=function(t,e){e=e||{};var n={valType:"info_array",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},i=(t.name&&t.name,t.trace,e.description&&e.description,{x:r({},n,{}),y:r({},n,{}),editType:t.editType});return t.noGridCell||(i.row={valType:"integer",min:0,dflt:0,editType:t.editType},i.column={valType:"integer",min:0,dflt:0,editType:t.editType}),i},n.defaults=function(t,e,n,r){var i=r&&r.x||[0,1],a=r&&r.y||[0,1],o=e.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete t.domain.column);var u=n("domain.row");void 0!==u&&(u<o.rows?a=o._domains.y[u]:delete t.domain.row)}n("domain.x",i),n("domain.y",a)}},{"../lib/extend":155}],230:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType,n=t.colorEditType;void 0===n&&(n=e);var r={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:n},editType:e};return t.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r}},{}],231:[function(t,e,n){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],232:[function(t,e,n){"use strict";var r=t("../registry"),i=t("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(t,e,n){var i=r.subplotsRegistry[e];if(!i)return[];for(var a=i.attr,o=[],s=0;s<t.length;s++){var u=t[s],l=u[0].trace;l[a]===n&&o.push(u)}return o},n.getModuleCalcData=function(t,e){var n,i=[],a=[];if(!(n="string"===typeof e?r.getModule(e).plot:"function"===typeof e?e:e.plot))return[i,t];for(var o=0;o<t.length;o++){var s=t[o],u=s[0].trace;!0===u.visible&&0!==u._length&&(u._module.plot===n?i.push(s):a.push(s))}return[i,a]},n.getSubplotData=function(t,e,n){if(!r.subplotsRegistry[e])return[];var a,o,s,u=r.subplotsRegistry[e].attr,l=[];if("gl2d"===e){var c=n.match(i);o="x"+c[1],s="y"+c[2]}for(var f=0;f<t.length;f++)a=t[f],"gl2d"===e&&r.traceIs(a,"gl2d")?a[u[0]]===o&&a[u[1]]===s&&l.push(a):a[u]===n&&l.push(a);return l}},{"../registry":243,"./cartesian/constants":210}],233:[function(t,e,n){"use strict";function r(t,e){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=t[4*n+r]*e[n];return i}e.exports=function(t,e){return r(t.projection,r(t.view,r(t.model,[e[0],e[1],e[2],1])))}},{}],234:[function(t,e,n){"use strict";var r=t("./font_attributes"),i=t("./animation_attributes"),a=t("../components/color/attributes"),o=t("./pad_attributes"),s=t("../lib/extend").extendFlat,u=r({editType:"calc"});u.family.dflt='"Open Sans", verdana, arial, sans-serif',u.size.dflt=12,u.color.dflt=a.defaultLine,e.exports={font:u,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(o({editType:"layoutstyle"}),{}),editType:"layoutstyle"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":41,"../lib/extend":155,"./animation_attributes":199,"./font_attributes":230,"./pad_attributes":235}],235:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],236:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../registry"),o=t("../plot_api/plot_schema"),s=t("../plot_api/plot_template"),u=t("../lib"),l=t("../components/color"),c=t("../constants/numerical").BADNUM,f=t("./cartesian/axis_ids"),d=t("./animation_attributes"),h=t("./frame_attributes"),p=u.relinkPrivateKeys,v=u._,g=e.exports={};u.extendFlat(g,a),g.attributes=t("./attributes"),g.attributes.type.values=g.allTypes,g.fontAttrs=t("./font_attributes"),g.layoutAttributes=t("./layout_attributes"),g.fontWeight="normal";var m=g.transformsRegistry,y=t("./command");g.executeAPICommand=y.executeAPICommand,g.computeAPICommandBindings=y.computeAPICommandBindings,g.manageCommandObserver=y.manageCommandObserver,g.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,g.redrawText=function(t){var e=(t=u.getGraphDiv(t))._fullLayout||{},n=e._has&&e._has("polar"),r=!n&&t.data&&t.data[0]&&t.data[0].r;if(!r)return new Promise(function(e){setTimeout(function(){a.getComponentMethod("annotations","draw")(t),a.getComponentMethod("legend","draw")(t),a.getComponentMethod("colorbar","draw")(t),e(g.previousPromises(t))},300)})},g.resize=function(t){return t=u.getGraphDiv(t),new Promise(function(e,n){t&&!u.isHidden(t)||n(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._redrawTimer=setTimeout(function(){if(!t.layout||t.layout.width&&t.layout.height||u.isHidden(t))e(t);else{delete t.layout.width,delete t.layout.height;var n=t.changed;t.autoplay=!0,a.call("relayout",t,{autosize:!0}).then(function(){t.changed=n,e(t)})}},100)})},g.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},g.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,n=u.ensureSingle(e._paper,"text","js-plot-link-container",function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:l.defaultLine,"pointer-events":"all"}).each(function(){var t=r.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)})}),i=n.node(),a={y:e._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=e.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=e._paper.attr("width")-7),n.attr(a);var o=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),c=n.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var n=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)n.on("click",function(){g.sendDataToCloud(t)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}(t,o),s.text(o.text()&&c.text()?" - ":"")}},g.sendDataToCloud=function(t){t.emit("plotly_beforeexport");var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL,n=r.select(t).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:e+"/external",method:"post",target:"_blank"}),a=i.append("input").attr({type:"text",name:"data"});return a.node().value=g.graphJson(t,!1,"keepdata"),i.node().submit(),n.remove(),t.emit("plotly_afterexport"),!1};var b=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function x(t,e){var n=t._context.locale,r=!1,i={};function o(t){for(var n=!0,a=0;a<e.length;a++){var o=e[a];i[o]||(t[o]?i[o]=t[o]:n=!1)}n&&(r=!0)}for(var s=0;s<2;s++){for(var u=t._context.locales,l=0;l<2;l++){var c=(u[n]||{}).format;if(c&&(o(c),r))break;u=a.localeRegistry}var f=n.split("-")[0];if(r||f===n)break;n=f}return r||o(a.localeRegistry.en.format),i}function w(t,e){var n={_fullLayout:e},r="x"===t._id.charAt(0),i=t._mainAxis._anchorAxis,a="",o="",s="";if(i&&(s=i._mainAxis._id,a=r?t._id+s:s+t._id),!a||!e._plots[a]){a="";for(var u=t._counterAxes,l=0;l<u.length;l++){var c=u[l],d=r?t._id+c:c+t._id;o||(o=d);var h=f.getFromId(n,c);if(s&&h.overlaying===s){a=d;break}}}return a||o}function A(t){var e=t.transforms;if(Array.isArray(e)&&e.length)for(var n=0;n<e.length;n++){var r=e[n],i=r._module||m[r.type];if(i&&i.makesData)return!0}return!1}function k(t,e,n,r){for(var i=t.transforms,a=[t],o=0;o<i.length;o++){var s=i[o],u=m[s.type];u&&u.transform&&(a=u.transform(a,{transform:s,fullTrace:t,fullData:e,layout:n,fullLayout:r,transformIndex:o}))}return a}function M(t){var e=t.margin;if(!t._size){var n=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)};n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b}t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={})}g.supplyDefaults=function(t,e){var n=e&&e.skipUpdateCalc,i=t._fullLayout||{};if(i._skipDefaults)delete i._skipDefaults;else{var o,s=t._fullLayout={},l=t.layout||{},c=t._fullData||[],f=t._fullData=[],d=t.data||[],h=t.calcdata||[],m=t._context||{};t._transitionData||g.createTransitionData(t),s._dfltTitle={plot:v(t,"Click to enter Plot title"),x:v(t,"Click to enter X axis title"),y:v(t,"Click to enter Y axis title"),colorbar:v(t,"Click to enter Colorscale title"),annotation:v(t,"new text")},s._traceWord=v(t,"trace");var y=x(t,b);if(s._mapboxAccessToken=m.mapboxAccessToken,i._initialAutoSizeIsDone){var w=i.width,A=i.height;g.supplyLayoutGlobalDefaults(l,s,y),l.width||(s.width=w),l.height||(s.height=A),g.sanitizeMargins(s)}else{g.supplyLayoutGlobalDefaults(l,s,y);var k=!l.width||!l.height,T=s.autosize,S=m.autosizable,C=k&&(T||S);C?g.plotAutoSize(t,l,s):k&&g.sanitizeMargins(s),!T&&k&&(l.width=s.width,l.height=s.height)}s._d3locale=function(t,e){return t.decimal=e.charAt(0),t.thousands=e.charAt(1),r.locale(t)}(y,s.separators),s._extraFormat=x(t,_),s._initialAutoSizeIsDone=!0,s._dataLength=d.length,s._modules=[],s._visibleModules=[],s._basePlotModules=[];var E=s._subplots=function(){var t,e,n=a.collectableSubplotTypes,r={};if(!n){n=[];var i=a.subplotsRegistry;for(var o in i){var s=i[o],l=s.attr;if(l&&(n.push(o),Array.isArray(l)))for(e=0;e<l.length;e++)u.pushUnique(n,l[e])}}for(t=0;t<n.length;t++)r[n[t]]=[];return r}(),O=s._splomAxes={x:{},y:{}},P=s._splomSubplots={};s._splomGridDflt={},s._scatterStackOpts={},s._firstScatter={},s._alignmentOpts={},s._colorAxes={},s._requestRangeslider={},s._traceUids=function(t,e){var n,r,i=e.length,a=[];for(n=0;n<t.length;n++){var o=t[n]._fullInput;o!==r&&a.push(o),r=o}var s=a.length,l=new Array(i),c={};function f(t,e){l[e]=t,c[t]=1}function d(t,e){if(t&&"string"===typeof t&&!c[t])return f(t,e),!0}for(n=0;n<i;n++){var h=e[n].uid;"number"===typeof h&&(h=String(h)),d(h,n)||n<s&&d(a[n].uid,n)||f(u.randstr(c),n)}return l}(c,d),s._globalTransforms=(t._context||{}).globalTransforms,g.supplyDataDefaults(d,f,l,s);var L=Object.keys(O.x),R=Object.keys(O.y);if(L.length>1&&R.length>1){for(a.getComponentMethod("grid","sizeDefaults")(l,s),o=0;o<L.length;o++)u.pushUnique(E.xaxis,L[o]);for(o=0;o<R.length;o++)u.pushUnique(E.yaxis,R[o]);for(var D in P)u.pushUnique(E.cartesian,D)}if(s._has=g._hasPlotType.bind(s),c.length===f.length)for(o=0;o<f.length;o++)p(f[o],c[o]);g.supplyLayoutModuleDefaults(l,s,f,t._transitionData);var F=s._visibleModules,j=[];for(o=0;o<F.length;o++){var N=F[o].crossTraceDefaults;N&&u.pushUnique(j,N)}for(o=0;o<j.length;o++)j[o](f,s);s._hasOnlyLargeSploms=1===s._basePlotModules.length&&"splom"===s._basePlotModules[0].name&&L.length>15&&R.length>15&&0===s.shapes.length&&0===s.images.length,s._hasCartesian=s._has("cartesian"),s._hasGeo=s._has("geo"),s._hasGL3D=s._has("gl3d"),s._hasGL2D=s._has("gl2d"),s._hasTernary=s._has("ternary"),s._hasPie=s._has("pie"),g.linkSubplots(f,s,c,i),g.cleanPlot(f,s,c,i),i._zoomlayer&&!t._dragging&&i._zoomlayer.selectAll(".select-outline").remove(),function(t,e){var n,r=[];e.meta&&(n=e._meta={meta:e.meta,layout:{meta:e.meta}});for(var i=0;i<t.length;i++){var a=t[i];a.meta?r[a.index]=a._meta={meta:a.meta}:e.meta&&(a._meta={meta:e.meta}),e.meta&&(a._meta.layout={meta:e.meta})}r.length&&(n||(n=e._meta={}),n.data=r)}(f,s),p(s,i),a.getComponentMethod("colorscale","crossTraceDefaults")(f,s),s._preGUI||(s._preGUI={}),s._tracePreGUI||(s._tracePreGUI={});var z,I=s._tracePreGUI,B={};for(z in I)B[z]="old";for(o=0;o<f.length;o++)z=f[o]._fullInput.uid,B[z]||(I[z]={}),B[z]="new";for(z in B)"old"===B[z]&&delete I[z];M(s),a.getComponentMethod("rangeslider","makeData")(s),n||h.length!==f.length||g.supplyDefaultsUpdateCalc(h,f)}},g.supplyDefaultsUpdateCalc=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=(t[n]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform){var o,s,l,c=a._arrayAttrs;for(o=0;o<c.length;o++)s=c[o],l=u.nestedProperty(a,s).get().slice(),u.nestedProperty(r,s).set(l)}i.trace=r}}},g.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},g._hasPlotType=function(t){var e,n=this._basePlotModules||[];for(e=0;e<n.length;e++)if(n[e].name===t)return!0;var r=this._modules||[];for(e=0;e<r.length;e++){var i=r[e].name;if(i===t)return!0;var o=a.modules[i];if(o&&o.categories[t])return!0}return!1},g.cleanPlot=function(t,e,n,r){var i,a,o=r._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(t,e,n,r)}var u=r._has&&r._has("gl"),l=e._has&&e._has("gl");u&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var c=!!r._infolayer;t:for(i=0;i<n.length;i++){var f=n[i],d=f.uid;for(a=0;a<t.length;a++){var h=t[a];if(d===h.uid)continue t}c&&r._infolayer.select(".cb"+d).remove()}},g.linkSubplots=function(t,e,n,r){var i,a,o=r._plots||{},s=e._plots={},l=e._subplots,c={_fullData:t,_fullLayout:e},d=l.cartesian.concat(l.gl2d||[]);for(i=0;i<d.length;i++){var h,p=d[i],v=o[p],g=f.getFromId(c,p,"x"),m=f.getFromId(c,p,"y");for(v?h=s[p]=v:(h=s[p]={}).id=p,g._counterAxes.push(m._id),m._counterAxes.push(g._id),g._subplotsWith.push(p),m._subplotsWith.push(p),h.xaxis=g,h.yaxis=m,h._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var y=t[a];if(y.xaxis===h.xaxis._id&&y.yaxis===h.yaxis._id&&!1===y.cliponaxis){h._hasClipOnAxisFalse=!0;break}}}var b,_=f.list(c,null,!0);for(i=0;i<_.length;i++){b=_[i];var x=null;b.overlaying&&(x=f.getFromId(c,b.overlaying))&&x.overlaying&&(b.overlaying=!1,x=null),b._mainAxis=x||b,x&&(b.domain=x.domain.slice()),b._anchorAxis="free"===b.anchor?null:f.getFromId(c,b.anchor)}for(i=0;i<_.length;i++)(b=_[i])._counterAxes.sort(f.idSort),b._subplotsWith.sort(u.subplotSort),b._mainSubplot=w(b,e)},g.clearExpandedTraceDefaultColors=function(t){var e,n,r;for(n=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],o.crawl(t._module.attributes,function(t,r,i,a){n[a]=r,n.length=a+1,"color"===t.valType&&void 0===t.dflt&&e.push(n.join("."))})),r=0;r<e.length;r++){var i=u.nestedProperty(t,"_input."+e[r]);i.get()||u.nestedProperty(t,e[r]).set(null)}},g.supplyDataDefaults=function(t,e,n,r){var i,o,l,c=r._modules,f=r._visibleModules,d=r._basePlotModules,h=0,v=0;function m(t){e.push(t);var n=t._module;n&&(u.pushUnique(c,n),!0===t.visible&&u.pushUnique(f,n),u.pushUnique(d,t._module.basePlotModule),h++,!1!==t._input.visible&&v++)}r._transformModules=[];var y={},b=[],_=(n.template||{}).data||{},x=s.traceTemplater(_);for(i=0;i<t.length;i++){if(l=t[i],(o=x.newTrace(l)).uid=r._traceUids[i],g.supplyTraceDefaults(l,o,v,r,i),o.index=i,o._input=l,o._expandedIndex=h,o.transforms&&o.transforms.length)for(var w=!1!==l.visible&&!1===o.visible,A=k(o,e,n,r),M=0;M<A.length;M++){var T=A[M],S={_template:o._template,type:o.type,uid:o.uid+M};w&&!1===T.visible&&delete T.visible,g.supplyTraceDefaults(T,S,h,r,i),p(S,T),S.index=i,S._input=l,S._fullInput=o,S._expandedIndex=h,S._expandedInput=T,m(S)}else o._fullInput=o,o._expandedInput=o,m(o);a.traceIs(o,"carpetAxis")&&(y[o.carpet]=o),a.traceIs(o,"carpetDependent")&&b.push(i)}for(i=0;i<b.length;i++)if((o=e[b[i]]).visible){var C=y[o.carpet];o._carpet=C,C&&C.visible?(o.xaxis=C.xaxis,o.yaxis=C.yaxis):o.visible=!1}},g.supplyAnimationDefaults=function(t){var e;t=t||{};var n={};function r(e,r){return u.coerce(t||{},n,d,e,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(t.frame))for(n.frame=[],e=0;e<t.frame.length;e++)n.frame[e]=g.supplyAnimationFrameDefaults(t.frame[e]||{});else n.frame=g.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(n.transition=[],e=0;e<t.transition.length;e++)n.transition[e]=g.supplyAnimationTransitionDefaults(t.transition[e]||{});else n.transition=g.supplyAnimationTransitionDefaults(t.transition||{});return n},g.supplyAnimationFrameDefaults=function(t){var e={};function n(n,r){return u.coerce(t||{},e,d.frame,n,r)}return n("duration"),n("redraw"),e},g.supplyAnimationTransitionDefaults=function(t){var e={};function n(n,r){return u.coerce(t||{},e,d.transition,n,r)}return n("duration"),n("easing"),e},g.supplyFrameDefaults=function(t){var e={};function n(n,r){return u.coerce(t,e,h,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),e},g.supplyTraceDefaults=function(t,e,n,r,i){var o,s=r.colorway||l.defaults,c=s[n%s.length];function f(n,r){return u.coerce(t,e,g.attributes,n,r)}var d=f("visible");f("type"),f("name",r._traceWord+" "+i),f("uirevision",r.uirevision);var h=g.getModule(e);if(e._module=h,h){var p=h.basePlotModule,v=p.attr,m=p.attributes;if(v&&m){var y=r._subplots,b="";if("gl2d"!==p.name||d){if(Array.isArray(v))for(o=0;o<v.length;o++){var _=v[o],x=u.coerce(t,e,m,_);y[_]&&u.pushUnique(y[_],x),b+=x}else b=u.coerce(t,e,m,v);y[p.name]&&u.pushUnique(y[p.name],b)}}}return d&&(f("customdata"),f("ids"),f("meta"),a.traceIs(e,"showLegend")?(e._dfltShowLegend=!0,f("showlegend"),f("legendgroup")):e._dfltShowLegend=!1,h&&h.supplyDefaults(t,e,c,r),a.traceIs(e,"noOpacity")||f("opacity"),a.traceIs(e,"notLegendIsolatable")&&(e.visible=!!e.visible),a.traceIs(e,"noHover")||(e.hovertemplate||u.coerceHoverinfo(t,e,r),"parcats"!==e.type&&a.getComponentMethod("fx","supplyDefaults")(t,e,c,r)),h&&h.selectPoints&&f("selectedpoints"),g.supplyTransformDefaults(t,e,r)),e},g.hasMakesDataTransform=A,g.supplyTransformDefaults=function(t,e,n){if(e._length||A(t)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(t.transforms)||0!==r.length)for(var a=t.transforms||[],o=r.concat(a),s=e.transforms=[],l=0;l<o.length;l++){var c,f=o[l],d=f.type,h=m[d],p=!(f._module&&f._module===h),v=h&&"function"===typeof h.transform;h||u.warn("Unrecognized transform type "+d+"."),h&&h.supplyDefaults&&(p||v)?((c=h.supplyDefaults(f,e,n,t)).type=d,c._module=h,u.pushUnique(i,h)):c=u.extendFlat({},f),s.push(c)}}},g.supplyLayoutGlobalDefaults=function(t,e,n){function r(n,r){return u.coerce(t,e,g.layoutAttributes,n,r)}var i=t.template;u.isPlainObject(i)&&(e.template=i,e._template=i.layout,e._dataTemplate=i.data);var o=u.coerceFont(r,"font");r("title.text",e._dfltTitle.plot),u.coerceFont(r,"title.font",{family:o.family,size:Math.round(1.4*o.size),color:o.color}),r("title.xref"),r("title.yref"),r("title.x"),r("title.y"),r("title.xanchor"),r("title.yanchor"),r("title.pad.t"),r("title.pad.r"),r("title.pad.b"),r("title.pad.l"),r("autosize",!(t.width&&t.height)),r("width"),r("height"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),t.width&&t.height&&g.sanitizeMargins(e),a.getComponentMethod("grid","sizeDefaults")(t,e),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision");var s=r("uirevision");r("editrevision",s),r("selectionrevision",s),r("modebar.orientation"),r("modebar.bgcolor",l.addOpacity(e.paper_bgcolor,.5));var c=l.contrast(l.rgb(e.modebar.bgcolor));r("modebar.color",l.addOpacity(c,.3)),r("modebar.activecolor",l.addOpacity(c,.7)),r("modebar.uirevision",s),r("meta"),u.isPlainObject(t.transition)&&(r("transition.duration"),r("transition.easing"),r("transition.ordering")),a.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),a.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,r)},g.plotAutoSize=function(t,e,n){var r,a,o=t._context||{},s=o.frameMargins,l=u.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),o.fillFrame)r=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden";else{var c=l?window.getComputedStyle(t):{};if(r=parseFloat(c.width)||parseFloat(c.maxWidth)||n.width,a=parseFloat(c.height)||parseFloat(c.maxHeight)||n.height,i(s)&&s>0){var f=1-2*s;r=Math.round(f*r),a=Math.round(f*a)}}var d=g.layoutAttributes.width.min,h=g.layoutAttributes.height.min;r<d&&(r=d),a<h&&(a=h);var p=!e.width&&Math.abs(n.width-r)>1,v=!e.height&&Math.abs(n.height-a)>1;(v||p)&&(p&&(n.width=r),v&&(n.height=a)),t._initialAutoSize||(t._initialAutoSize={width:r,height:a}),g.sanitizeMargins(n)},g.supplyLayoutModuleDefaults=function(t,e,n,r){var i,o,s,l=a.componentsRegistry,c=e._basePlotModules,f=a.subplotsRegistry.cartesian;for(i in l)(s=l[i]).includeBasePlot&&s.includeBasePlot(t,e);for(var d in c.length||c.push(f),e._has("cartesian")&&(a.getComponentMethod("grid","contentDefaults")(t,e),f.finalizeSubplots(t,e)),e._subplots)e._subplots[d].sort(u.subplotSort);for(o=0;o<c.length;o++)(s=c[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n);var h=e._modules;for(o=0;o<h.length;o++)(s=h[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n);var p=e._transformModules;for(o=0;o<p.length;o++)(s=p[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n,r);for(i in l)(s=l[i]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n)},g.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),void 0!==e._geocontainer&&e._geocontainer.remove(),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),u.clearThrottle(),u.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._dragdata,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},g.style=function(t){var e,n=t._fullLayout._visibleModules,r=[];for(e=0;e<n.length;e++){var i=n[e];i.style&&u.pushUnique(r,i.style)}for(e=0;e<r.length;e++)r[e](t)},g.sanitizeMargins=function(t){if(t&&t.margin){var e,n=t.width,r=t.height,i=t.margin,a=n-(i.l+i.r),o=r-(i.t+i.b);a<0&&(e=(n-1)/(i.l+i.r),i.l=Math.floor(e*i.l),i.r=Math.floor(e*i.r)),o<0&&(e=(r-1)/(i.t+i.b),i.t=Math.floor(e*i.t),i.b=Math.floor(e*i.b))}},g.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1},g.autoMargin=function(t,e,n){var r=t._fullLayout,i=r._pushmargin,a=r._pushmarginIds;if(!1!==r.margin.autoexpand){if(n){var o=n.pad;if(void 0===o){var s=r.margin;o=Math.min(12,s.l,s.r,s.t,s.b)}n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0);var u=void 0!==n.xl?n.xl:n.x,l=void 0!==n.xr?n.xr:n.x,c=void 0!==n.yt?n.yt:n.y,f=void 0!==n.yb?n.yb:n.y;i[e]={l:{val:u,size:n.l+o},r:{val:l,size:n.r+o},b:{val:f,size:n.b+o},t:{val:c,size:n.t+o}},a[e]=1}else delete i[e],delete a[e];r._replotting||g.doAutoMargin(t)}},g.doAutoMargin=function(t){var e=t._fullLayout;e._size||(e._size={}),M(e);var n=e._size,r=e.margin,o=u.extendFlat({},n),s=r.l,l=r.r,c=r.t,f=r.b,d=e.width,h=e.height,p=e._pushmargin,v=e._pushmarginIds;if(!1!==e.margin.autoexpand){for(var m in p)v[m]||delete p[m];for(var y in p.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:f}},p){var b=p[y].l||{},_=p[y].b||{},x=b.val,w=b.size,A=_.val,k=_.size;for(var T in p){if(i(w)&&p[T].r){var S=p[T].r.val,C=p[T].r.size;if(S>x){var E=(w*S+(C-d)*x)/(S-x),O=(C*(1-x)+(w-d)*(1-S))/(S-x);E>=0&&O>=0&&d-(E+O)>0&&E+O>s+l&&(s=E,l=O)}}if(i(k)&&p[T].t){var P=p[T].t.val,L=p[T].t.size;if(P>A){var R=(k*P+(L-h)*A)/(P-A),D=(L*(1-A)+(k-h)*(1-P))/(P-A);R>=0&&D>=0&&h-(D+R)>0&&R+D>f+c&&(f=R,c=D)}}}}}if(n.l=Math.round(s),n.r=Math.round(l),n.t=Math.round(c),n.b=Math.round(f),n.p=Math.round(r.pad),n.w=Math.round(d)-n.l-n.r,n.h=Math.round(h)-n.t-n.b,!e._replotting&&g.didMarginChange(o,n))return"_redrawFromAutoMarginCount"in e?e._redrawFromAutoMarginCount++:e._redrawFromAutoMarginCount=1,a.call("plot",t)};var T=["l","r","t","b","p","w","h"];function S(t,e,n){var r=!1,i=[g.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},n.prepareFn,g.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(i){t._transitioning=!0,e.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){r=!0}),n.redraw&&t._transitionData._interruptCallbacks.push(function(){return a.call("redraw",t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var o=0,s=0;function u(){return o++,function(){var e;s++,r||s!==o||(e=i,t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(n.redraw)return a.call("redraw",t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(e)))}}n.runFn(u),setTimeout(u())})}],o=u.syncOrAsync(i,t);return o&&o.then||(o=Promise.resolve()),o.then(function(){return t})}g.didMarginChange=function(t,e){for(var n=0;n<T.length;n++){var r=T[n],a=t[r],o=e[r];if(!i(a)||Math.abs(o-a)>1)return!0}return!1},g.graphJson=function(t,e,n,r,i){(i&&e&&!t._fullData||i&&!e&&!t._fullLayout)&&g.supplyDefaults(t);var a=i?t._fullData:t.data,o=i?t._fullLayout:t.layout,s=(t._transitionData||{})._frames;function l(t){if("function"===typeof t)return null;if(u.isPlainObject(t)){var e,r,i={};for(e in t)if("function"!==typeof t[e]&&-1===["_","["].indexOf(e.charAt(0))){if("keepdata"===n){if("src"===e.substr(e.length-3))continue}else if("keepstream"===n){if("string"===typeof(r=t[e+"src"])&&r.indexOf(":")>0&&!u.isPlainObject(t.stream))continue}else if("keepall"!==n&&"string"===typeof(r=t[e+"src"])&&r.indexOf(":")>0)continue;i[e]=l(t[e])}return i}return Array.isArray(t)?t.map(l):u.isTypedArray(t)?u.simpleMap(t,u.identity):u.isJSDate(t)?u.ms2DateTimeLocal(+t):t}var c={data:(a||[]).map(function(t){var n=l(t);return e&&delete n.fit,n})};return e||(c.layout=l(o)),t.framework&&t.framework.isPolar&&(c=t.framework.getConfig()),s&&(c.frames=l(s)),"object"===r?c:JSON.stringify(c)},g.modifyFrames=function(t,e){var n,r,i,a=t._transitionData._frames,o=t._transitionData._frameHash;for(n=0;n<e.length;n++)switch((r=e[n]).type){case"replace":i=r.value;var s=(a[r.index]||{}).name,u=i.name;a[r.index]=o[u]=i,u!==s&&(delete o[s],o[u]=i);break;case"insert":i=r.value,o[i.name]=i,a.splice(r.index,0,i);break;case"delete":i=a[r.index],delete o[i.name],a.splice(r.index,1)}return Promise.resolve()},g.computeFrame=function(t,e){var n,r,i,a,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=o[e.toString()];if(!s)return!1;for(var u=[s],l=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===l.indexOf(s.name);)u.push(s),l.push(s.name);for(var c={};s=u.pop();)if(s.layout&&(c.layout=g.extendLayout(c.layout,s.layout)),s.data){if(c.data||(c.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(c.traces||(c.traces=[]),n=0;n<s.data.length;n++)void 0!==(i=r[n])&&null!==i&&(-1===(a=c.traces.indexOf(i))&&(a=c.data.length,c.traces[a]=i),c.data[a]=g.extendTrace(c.data[a],s.data[n]))}return c},g.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},n=t._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(e[i.name]=i)}},g.extendObjectWithContainers=function(t,e,n){var r,i,a,o,s,l,c,f,d=u.extendDeepNoArrays({},e||{}),h=u.expandObjectPaths(d),p={};if(n&&n.length)for(a=0;a<n.length;a++)r=u.nestedProperty(h,n[a]),void 0===(i=r.get())?u.nestedProperty(p,n[a]).set(null):(r.set(null),u.nestedProperty(p,n[a]).set(i));if(t=u.extendDeepNoArrays(t||{},h),n&&n.length)for(a=0;a<n.length;a++)if(s=u.nestedProperty(p,n[a]),c=s.get()){for(l=u.nestedProperty(t,n[a]),f=l.get(),Array.isArray(f)||(f=[],l.set(f)),o=0;o<c.length;o++){var v=c[o];f[o]=null===v?null:g.extendObjectWithContainers(f[o],v)}l.set(f)}return t},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=a.layoutArrayContainers,g.extendTrace=function(t,e){return g.extendObjectWithContainers(t,e,g.dataArrayContainers)},g.extendLayout=function(t,e){return g.extendObjectWithContainers(t,e,g.layoutArrayContainers)},g.transition=function(t,e,n,r,i,a){var o={redraw:i.redraw},s={},l=[];return o.prepareFn=function(){for(var i=Array.isArray(e)?e.length:0,a=r.slice(0,i),o=0;o<a.length;o++){var c=a[o],f=t._fullData[c],d=f._module;if(d){if(d.animatable){var h=d.basePlotModule.name;s[h]||(s[h]=[]),s[h].push(c)}t.data[a[o]]=g.extendTrace(t.data[a[o]],e[o])}}var p=u.expandObjectPaths(u.extendDeepNoArrays({},n)),v=/^[xy]axis[0-9]*$/;for(var m in p)v.test(m)&&delete p[m].range;g.extendLayout(t.layout,p),delete t.calcdata,g.supplyDefaults(t),g.doCalcdata(t);var y=u.expandObjectPaths(n);if(y){var b=t._fullLayout._plots;for(var _ in b){var x,w,A,k,M=b[_],T=M.xaxis,S=M.yaxis,C=T.range.slice(),E=S.range.slice();Array.isArray(y[T._name+".range"])?x=y[T._name+".range"].slice():Array.isArray((y[T._name]||{}).range)&&(x=y[T._name].range.slice()),Array.isArray(y[S._name+".range"])?w=y[S._name+".range"].slice():Array.isArray((y[S._name]||{}).range)&&(w=y[S._name].range.slice()),C&&x&&(C[0]!==x[0]||C[1]!==x[1])&&(A={xr0:C,xr1:x}),E&&w&&(E[0]!==w[0]||E[1]!==w[1])&&(k={yr0:E,yr1:w}),(A||k)&&l.push(u.extendFlat({plotinfo:M},A,k))}}return Promise.resolve()},o.runFn=function(e){var r,i,o=t._fullLayout._basePlotModules,c=l.length;if(n)for(i=0;i<o.length;i++)o[i].transitionAxes&&o[i].transitionAxes(t,l,a,e);for(var f in c?((r=u.extendFlat({},a)).duration=0,delete s.cartesian):r=a,s){var d=s[f],h=t._fullData[d[0]]._module;h.basePlotModule.plot(t,d,r,e)}},S(t,a,o)},g.transitionFromReact=function(t,e,n,r){var i=t._fullLayout,a=i.transition,o={},s=[];return o.prepareFn=function(){var t=i._plots;for(var a in o.redraw=!1,"some"===e.anim&&(o.redraw=!0),"some"===n.anim&&(o.redraw=!0),t){var l,c,f=t[a],d=f.xaxis,h=f.yaxis,p=r[d._name].range.slice(),v=r[h._name].range.slice(),g=d.range.slice(),m=h.range.slice();d.setScale(),h.setScale(),p[0]===g[0]&&p[1]===g[1]||(l={xr0:p,xr1:g}),v[0]===m[0]&&v[1]===m[1]||(c={yr0:v,yr1:m}),(l||c)&&s.push(u.extendFlat({plotinfo:f},l,c))}return Promise.resolve()},o.runFn=function(n){for(var r,i,o,l=t._fullData,c=t._fullLayout,f=c._basePlotModules,d=[],h=0;h<l.length;h++)d.push(h);function p(){for(var e=0;e<f.length;e++)f[e].transitionAxes&&f[e].transitionAxes(t,s,r,n)}function v(){for(var e=0;e<f.length;e++)f[e].plot(t,o,i,n)}s.length&&e.anim?"traces first"===a.ordering?(r=u.extendFlat({},a,{duration:0}),o=d,i=a,v(),setTimeout(p,a.duration)):(r=a,o=null,i=u.extendFlat({},a,{duration:0}),p(),v()):s.length?(r=a,p()):e.anim&&(o=d,i=a,v())},S(t,a,o)},g.doCalcdata=function(t,e){var n,r,i,s,l=f.list(t),d=t._fullData,h=t._fullLayout,p=new Array(d.length),v=(t.calcdata||[]).slice();for(t.calcdata=p,h._numBoxes=0,h._numViolins=0,h._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,h._piecolormap={},h._sunburstcolormap={},h._funnelareacolormap={},i=0;i<d.length;i++)Array.isArray(e)&&-1===e.indexOf(i)&&(p[i]=v[i]);for(i=0;i<d.length;i++)(n=d[i])._arrayAttrs=o.findArrayAttributes(n),n._extremes={};var g=h._subplots.polar||[];for(i=0;i<g.length;i++)l.push(h[g[i]].radialaxis,h[g[i]].angularaxis);var y=!1;function b(e){if(n=d[e],r=n._module,!0===n.visible&&n.transforms){if(r&&r.calc){var i=r.calc(t,n);i[0]&&i[0].t&&i[0].t._scene&&delete i[0].t._scene.dirty}for(s=0;s<n.transforms.length;s++){var a=n.transforms[s];(r=m[a.type])&&r.calcTransform&&(n._hasCalcTransform=!0,y=!0,r.calcTransform(t,n,a))}}}function _(e,i){if(n=d[e],!!(r=n._module).isContainer===i){var a=[];if(!0===n.visible&&0!==n._length){delete n._indexToPoints;var o=n.transforms||[];for(s=o.length-1;s>=0;s--)if(o[s].enabled){n._indexToPoints=o[s]._indexToPoints;break}r&&r.calc&&(a=r.calc(t,n))}Array.isArray(a)&&a[0]||(a=[{x:c,y:c}]),a[0].t||(a[0].t={}),a[0].trace=n,p[e]=a}}for(E(l,d),i=0;i<d.length;i++)_(i,!0);for(i=0;i<d.length;i++)b(i);for(y&&E(l,d),i=0;i<d.length;i++)_(i,!0);for(i=0;i<d.length;i++)_(i,!1);O(t);var x=function(t,e){var n,r,i,o,s,l=[];function c(t,n,r){var i=n._id.charAt(0);if("histogram2dcontour"===t){var a=n._counterAxes[0],o=f.getFromId(e,a),s="x"===i||"x"===a&&"category"===o.type,u="y"===i||"y"===a&&"category"===o.type;return function(t,e){return 0===t||0===e?-1:s&&t===r[e].length-1?-1:u&&e===r.length-1?-1:("y"===i?e:t)-1}}return function(t,e){return"y"===i?e:t}}var d={min:function(t){return u.aggNums(Math.min,null,t)},max:function(t){return u.aggNums(Math.max,null,t)},sum:function(t){return u.aggNums(function(t,e){return t+e},null,t)},total:function(t){return u.aggNums(function(t,e){return t+e},null,t)},mean:function(t){return u.mean(t)},median:function(t){return u.median(t)}};for(n=0;n<t.length;n++){var h=t[n];if("category"===h.type){var p=h.categoryorder.match(C);if(p){var v=p[1],g=p[2],m=[];for(r=0;r<h._categories.length;r++)m.push([h._categories[r],[]]);for(r=0;r<h._traceIndices.length;r++){var y=h._traceIndices[r],b=e._fullData[y],_=h._id.charAt(0);if(!0===b.visible){var x=b.type;a.traceIs(b,"histogram")&&(delete b._xautoBinFinished,delete b._yautoBinFinished);var w=e.calcdata[y];for(i=0;i<w.length;i++){var A,k,M,T=w[i];if("splom"===x){var S=b._axesDim[h._id];if("y"===_){var E=b._diag[S][0];E&&(h=e._fullLayout[f.id2name(E)])}var O=T.trace.dimensions[S].values;for(o=0;o<O.length;o++)for(A=O[o],k=h._categoriesMap[A],s=0;s<T.trace.dimensions.length;s++)if(s!==S){var P=T.trace.dimensions[s];m[k][1].push(P.values[o])}}else if("scattergl"===x){for(o=0;o<T.t.x.length;o++)"x"===_&&(A=T.t.x[o],k=A,M=T.t.y[o]),"y"===_&&(A=T.t.y[o],k=A,M=T.t.x[o]),m[k][1].push(M);T.t&&T.t._scene&&delete T.t._scene.dirty}else if(T.hasOwnProperty("z")){M=T.z;var L=c(b.type,h,M);for(o=0;o<M.length;o++)for(s=0;s<M[o].length;s++)(k=L(s,o))+1&&m[k][1].push(M[o][s])}else for("x"===_?(A=T.p+1?T.p:T.x,M=T.s||T.v||T.y):"y"===_&&(A=T.p+1?T.p:T.y,M=T.s||T.v||T.x),Array.isArray(M)||(M=[M]),o=0;o<M.length;o++)m[A][1].push(M[o])}}}h._categoriesValue=m;var R=[];for(r=0;r<m.length;r++)R.push([m[r][0],d[v](m[r][1])]);R.sort(function(t,e){return t[1]-e[1]}),h._categoriesAggregatedValue=R,h._initialCategories=R.map(function(t){return t[0]}),"descending"===g&&h._initialCategories.reverse(),l=l.concat(h.sortByInitialCategories())}}}return l}(l,t);if(x.length){for(h._numBoxes=0,h._numViolins=0,i=0;i<x.length;i++)_(x[i],!0);for(i=0;i<x.length;i++)_(x[i],!1);O(t)}a.getComponentMethod("fx","calc")(t),a.getComponentMethod("errorbars","calc")(t)};var C=/(total|sum|min|max|mean|median) (ascending|descending)/;function E(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.clearCalc(),"multicategory"===r.type&&r.setupMultiCategory(e)}}function O(t){var e,n,r,i=t._fullLayout,a=i._visibleModules,o={};for(n=0;n<a.length;n++){var s=a[n],l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;o[c]?u.pushUnique(o[c],l):o[c]=[l]}}for(r in o){var f=o[r],d=i._subplots[r];if(Array.isArray(d))for(e=0;e<d.length;e++){var h=d[e],p="cartesian"===r?i._plots[h]:i[h];for(n=0;n<f.length;n++)f[n](t,p,h)}else for(n=0;n<f.length;n++)f[n](t)}}g.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},g.redrag=function(t){t._fullLayout._redrag&&t._fullLayout._redrag()},g.generalUpdatePerTraceModule=function(t,e,n,r){var i,a=e.traceHash,o={};for(i=0;i<n.length;i++){var s=n[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var c in a)if(!o[c]){var f=a[c][0],d=f[0].trace;d.visible=!1,o[c]=[f]}for(var h in o){var p=o[h],v=p[0][0].trace._module;v.plot(t,e,u.filterVisible(p),r)}e.traceHash=o}},{"../components/color":42,"../constants/numerical":140,"../lib":160,"../plot_api/plot_schema":193,"../plot_api/plot_template":194,"../registry":243,"./animation_attributes":199,"./attributes":201,"./cartesian/axis_ids":207,"./command":228,"./font_attributes":230,"./frame_attributes":231,"./layout_attributes":234,d3:7,"fast-isnumeric":9}],237:[function(t,e,n){"use strict";var r=t("../../../traces/scatter/attributes"),i=r.marker,a=t("../../../lib/extend").extendFlat;["Area traces are deprecated!","Please switch to the *barpolar* trace type."].join(" "),e.exports={r:a({},r.r,{}),t:a({},r.t,{}),marker:{color:a({},i.color,{}),size:a({},i.size,{}),symbol:a({},i.symbol,{}),opacity:a({},i.opacity,{}),editType:"calc"}}},{"../../../lib/extend":155,"../../../traces/scatter/attributes":281}],238:[function(t,e,n){"use strict";var r=t("../../cartesian/layout_attributes"),i=t("../../../lib/extend").extendFlat,a=t("../../../plot_api/edit_types").overrideAll,o=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),s=i({},r.domain,{});function u(t,e){var n={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:o},visible:{valType:"boolean"}};return i({},e,n)}e.exports=a({radialaxis:u(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:s,orientation:{valType:"number"}}),angularaxis:u(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:s}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":155,"../../../plot_api/edit_types":187,"../../cartesian/layout_attributes":216}],239:[function(t,e,n){"use strict";var r=e.exports=t("./micropolar");r.manager=t("./micropolar_manager")},{"./micropolar":240,"./micropolar_manager":241}],240:[function(t,e,n){var r=t("d3"),i=t("../../../lib"),a=i.extendDeepAll,o=t("../../../constants/alignment").MID_SHIFT,s=e.exports={version:"0.2.2"};s.Axis=function(){var t,e,n,i,u={data:[],layout:{}},l={},c={},f=r.dispatch("hover"),d={render:function(l){return function(l){e=l||e;var f=u.data,d=u.layout;("string"==typeof e||e.nodeName)&&(e=r.select(e)),e.datum(f).each(function(e,u){var l=e.slice();c={data:s.util.cloneJson(l),layout:s.util.cloneJson(d)};var f=0;l.forEach(function(t,e){t.color||(t.color=d.defaultColorRange[f],f=(f+1)%d.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:r.rgb(t.color).darker().toString()),c.data[e].color=t.color,c.data[e].strokeColor=t.strokeColor,c.data[e].strokeDash=t.strokeDash,c.data[e].strokeSize=t.strokeSize});var h=l.filter(function(t,e){var n=t.visible;return"undefined"===typeof n||!0===n}),p=!1,v=h.map(function(t,e){return p=p||"undefined"!==typeof t.groupId,t});if(p){var g=r.nest().key(function(t,e){return"undefined"!=typeof t.groupId?t.groupId:"unstacked"}).entries(v),m=[],y=g.map(function(t,e){if("unstacked"===t.key)return t.values;var n=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,r){t.yStack=[n],m.push(n),n=s.util.sumArrays(t.r,n)}),t.values});h=r.merge(y)}h.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var b=Math.min(d.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2;b=Math.max(10,b);var _,x=[d.margin.left+b,d.margin.top+b];_=p?[0,r.max(s.util.sumArrays(s.util.arrayLast(h).r[0],s.util.arrayLast(m)))]:r.extent(s.util.flattenArray(h.map(function(t,e){return t.r}))),d.radialAxis.domain!=s.DATAEXTENT&&(_[0]=0),n=r.scale.linear().domain(d.radialAxis.domain!=s.DATAEXTENT&&d.radialAxis.domain?d.radialAxis.domain:_).range([0,b]),c.layout.radialAxis.domain=n.domain();var w,A=s.util.flattenArray(h.map(function(t,e){return t.t})),k="string"===typeof A[0];k&&(A=s.util.deduplicate(A),w=A.slice(),A=r.range(A.length),h=h.map(function(t,e){var n=t;return t.t=[A],p&&(n.yStack=t.yStack),n}));var M=h.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===h.length,T=null===d.needsEndSpacing?k||!M:d.needsEndSpacing,S=d.angularAxis.domain&&d.angularAxis.domain!=s.DATAEXTENT&&!k&&d.angularAxis.domain[0]>=0?d.angularAxis.domain:r.extent(A),C=Math.abs(A[1]-A[0]);M&&!k&&(C=0);var E=S.slice();T&&k&&(E[1]+=C);var O=d.angularAxis.ticksCount||4;O>8&&(O=O/(O/8)+O%8),d.angularAxis.ticksStep&&(O=(E[1]-E[0])/O);var P=d.angularAxis.ticksStep||(E[1]-E[0])/(O*(d.minorTicks+1));w&&(P=Math.max(Math.round(P),1)),E[2]||(E[2]=P);var L=r.range.apply(this,E);if(L=L.map(function(t,e){return parseFloat(t.toPrecision(12))}),i=r.scale.linear().domain(E.slice(0,2)).range("clockwise"===d.direction?[0,360]:[360,0]),c.layout.angularAxis.domain=i.domain(),c.layout.angularAxis.endPadding=T?C:0,"undefined"===typeof(t=r.select(this).select("svg.chart-root"))||t.empty()){var R=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),D=this.appendChild(this.ownerDocument.importNode(R.documentElement,!0));t=r.select(D)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var F,j=t.select(".chart-group"),N={fill:"none",stroke:d.tickColor},z={"font-size":d.font.size,"font-family":d.font.family,fill:d.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+d.font.outlineColor}).join(",")};if(d.showLegend){F=t.select(".legend-group").attr({transform:"translate("+[b,d.margin.top]+")"}).style({display:"block"});var I=h.map(function(t,e){var n=s.util.cloneJson(t);return n.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",n.visibleInLegend="undefined"===typeof t.visibleInLegend||t.visibleInLegend,n.color="LinePlot"===t.geometry?t.strokeColor:t.color,n});s.Legend().config({data:h.map(function(t,e){return t.name||"Element"+e}),legendConfig:a({},s.Legend.defaultConfig().legendConfig,{container:F,elements:I,reverseOrder:d.legend.reverseOrder})})();var B=F.node().getBBox();b=Math.min(d.width-B.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2,b=Math.max(10,b),x=[d.margin.left+b,d.margin.top+b],n.range([0,b]),c.layout.radialAxis.domain=n.domain(),F.attr("transform","translate("+[x[0]+b,x[1]-b]+")")}else F=t.select(".legend-group").style({display:"none"});t.attr({width:d.width,height:d.height}).style({opacity:d.opacity}),j.attr("transform","translate("+x+")").style({cursor:"crosshair"});var q=[(d.width-(d.margin.left+d.margin.right+2*b+(B?B.width:0)))/2,(d.height-(d.margin.top+d.margin.bottom+2*b))/2];if(q[0]=Math.max(0,q[0]),q[1]=Math.max(0,q[1]),t.select(".outer-group").attr("transform","translate("+q+")"),d.title&&d.title.text){var U=t.select("g.title-group text").style(z).text(d.title.text),H=U.node().getBBox();U.attr({x:x[0]-H.width/2,y:x[1]-b-20})}var W=t.select(".radial.axis-group");if(d.radialAxis.gridLinesVisible){var G=W.selectAll("circle.grid-circle").data(n.ticks(5));G.enter().append("circle").attr({class:"grid-circle"}).style(N),G.attr("r",n),G.exit().remove()}W.select("circle.outside-circle").attr({r:b}).style(N);var V=t.select("circle.background-circle").attr({r:b}).style({fill:d.backgroundColor,stroke:d.stroke});function Y(t,e){return i(t)%360+d.orientation}if(d.radialAxis.visible){var Z=r.svg.axis().scale(n).ticks(5).tickSize(5);W.call(Z).attr({transform:"rotate("+d.radialAxis.orientation+")"}),W.selectAll(".domain").style(N),W.selectAll("g>text").text(function(t,e){return this.textContent+d.radialAxis.ticksSuffix}).style(z).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===d.radialAxis.tickOrientation?"rotate("+-d.radialAxis.orientation+") translate("+[0,z["font-size"]]+")":"translate("+[0,z["font-size"]]+")"}}),W.selectAll("g>line").style({stroke:"black"})}var X=t.select(".angular.axis-group").selectAll("g.angular-tick").data(L),$=X.enter().append("g").classed("angular-tick",!0);X.attr({transform:function(t,e){return"rotate("+Y(t)+")"}}).style({display:d.angularAxis.visible?"block":"none"}),X.exit().remove(),$.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(d.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(d.minorTicks+1)==0)}).style(N),$.selectAll(".minor").style({stroke:d.minorTickColor}),X.select("line.grid-line").attr({x1:d.tickLength?b-d.tickLength:0,x2:b}).style({display:d.angularAxis.gridLinesVisible?"block":"none"}),$.append("text").classed("axis-text",!0).style(z);var J=X.select("text.axis-text").attr({x:b+d.labelOffset,dy:o+"em",transform:function(t,e){var n=Y(t),r=b+d.labelOffset,i=d.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+-n+" "+r+" 0)":"radial"==i?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:d.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(d.minorTicks+1)!=0?"":w?w[t]+d.angularAxis.ticksSuffix:t+d.angularAxis.ticksSuffix}).style(z);d.angularAxis.rewriteTicks&&J.text(function(t,e){return e%(d.minorTicks+1)!=0?"":d.angularAxis.rewriteTicks(this.textContent,e)});var K=r.max(j.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));F.attr({transform:"translate("+[b+K,d.margin.top]+")"});var Q=t.select("g.geometry-group").selectAll("g").size()>0,tt=t.select("g.geometry-group").selectAll("g.geometry").data(h);if(tt.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),tt.exit().remove(),h[0]||Q){var et=[];h.forEach(function(t,e){var r={};r.radialScale=n,r.angularScale=i,r.container=tt.filter(function(t,n){return n==e}),r.geometry=t.geometry,r.orientation=d.orientation,r.direction=d.direction,r.index=e,et.push({data:t,geometryConfig:r})});var nt=r.nest().key(function(t,e){return"undefined"!=typeof t.data.groupId||"unstacked"}).entries(et),rt=[];nt.forEach(function(t,e){"unstacked"===t.key?rt=rt.concat(t.values.map(function(t,e){return[t]})):rt.push(t.values)}),rt.forEach(function(t,e){var n;n=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var r=t.map(function(t,e){return a(s[n].defaultConfig(),t)});s[n]().config(r)()})}var it,at,ot=t.select(".guides-group"),st=t.select(".tooltips-group"),ut=s.tooltipPanel().config({container:st,fontSize:8})(),lt=s.tooltipPanel().config({container:st,fontSize:8})(),ct=s.tooltipPanel().config({container:st,hasTick:!0})();if(!k){var ft=ot.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});j.on("mousemove.angular-guide",function(t,e){var n=s.util.getMousePos(V).angle;ft.attr({x2:-b,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-d.orientation)%360;it=i.invert(r);var a=s.util.convertToCartesian(b+12,n+180);ut.text(s.util.round(it)).move([a[0]+x[0],a[1]+x[1]])}).on("mouseout.angular-guide",function(t,e){ot.select("line").style({opacity:0})})}var dt=ot.select("circle").style({stroke:"grey",fill:"none"});j.on("mousemove.radial-guide",function(t,e){var r=s.util.getMousePos(V).radius;dt.attr({r:r}).style({opacity:.5}),at=n.invert(s.util.getMousePos(V).radius);var i=s.util.convertToCartesian(r,d.radialAxis.orientation);lt.text(s.util.round(at)).move([i[0]+x[0],i[1]+x[1]])}).on("mouseout.radial-guide",function(t,e){dt.style({opacity:0}),ct.hide(),ut.hide(),lt.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,n){var i=r.select(this),a=this.style.fill,o="black",u=this.style.opacity||1;if(i.attr({"data-opacity":u}),a&&"none"!==a){i.attr({"data-fill":a}),o=r.hsl(a).darker().toString(),i.style({fill:o,opacity:1});var l={t:s.util.round(e[0]),r:s.util.round(e[1])};k&&(l.t=w[e[0]]);var c="t: "+l.t+", r: "+l.r,f=this.getBoundingClientRect(),d=t.node().getBoundingClientRect(),h=[f.left+f.width/2-q[0]-d.left,f.top+f.height/2-q[1]-d.top];ct.config({color:o}).text(c),ct.move(h)}else a=this.style.stroke||"black",i.attr({"data-stroke":a}),o=r.hsl(a).darker().toString(),i.style({stroke:o,opacity:1})}).on("mousemove.tooltip",function(t,e){if(0!=r.event.which)return!1;r.select(this).attr("data-fill")&&ct.show()}).on("mouseout.tooltip",function(t,e){ct.hide();var n=r.select(this),i=n.attr("data-fill");i?n.style({fill:i,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(l),this},config:function(t){if(!arguments.length)return u;var e=s.util.cloneJson(t);return e.data.forEach(function(t,e){u.data[e]||(u.data[e]={}),a(u.data[e],s.Axis.defaultConfig().data[0]),a(u.data[e],t)}),a(u.layout,s.Axis.defaultConfig().layout),a(u.layout,e.layout),this},getLiveConfig:function(){return c},getinputConfig:function(){return l},radialScale:function(t){return n},angularScale:function(t){return i},svg:function(){return t}};return r.rebind(d,f,"on"),d},s.Axis.defaultConfig=function(t,e){var n={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return n},s.util={},s.DATAEXTENT="dataExtent",s.AREA="AreaChart",s.LINE="LinePlot",s.DOT="DotPlot",s.BAR="BarChart",s.util._override=function(t,e){for(var n in t)n in e&&(e[n]=t[n])},s.util._extend=function(t,e){for(var n in t)e[n]=t[n]},s.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},s.util.dataFromEquation2=function(t,e){var n=e||6,i=r.range(0,360+n,n).map(function(e,n){var r=e*Math.PI/180,i=t(r);return[e,i]});return i},s.util.dataFromEquation=function(t,e,n){var i=e||6,a=[],o=[];r.range(0,360+i,i).forEach(function(e,n){var r=e*Math.PI/180,i=t(r);a.push(e),o.push(i)});var s={t:a,r:o};return n&&(s.name=n),s},s.util.ensureArray=function(t,e){if("undefined"===typeof t)return null;var n=[].concat(t);return r.range(e).map(function(t,e){return n[e]||n[0]})},s.util.fillArrays=function(t,e,n){return e.forEach(function(e,r){t[e]=s.util.ensureArray(t[e],n)}),t},s.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},s.util.validateKeys=function(t,e){"string"===typeof e&&(e=e.split("."));var n=e.shift();return t[n]&&(!e.length||objHasKeys(t[n],e))},s.util.sumArrays=function(t,e){return r.zip(t,e).map(function(t,e){return r.sum(t)})},s.util.arrayLast=function(t){return t[t.length-1]},s.util.arrayEqual=function(t,e){for(var n=Math.max(t.length,e.length,1);n-- >=0&&t[n]===e[n];);return-2===n},s.util.flattenArray=function(t){for(var e=[];!s.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},s.util.deduplicate=function(t){return t.filter(function(t,e,n){return n.indexOf(t)==e})},s.util.convertToCartesian=function(t,e){var n=e*Math.PI/180,r=t*Math.cos(n),i=t*Math.sin(n);return[r,i]},s.util.round=function(t,e){var n=e||2,r=Math.pow(10,n);return Math.round(t*r)/r},s.util.getMousePos=function(t){var e=r.mouse(t.node()),n=e[0],i=e[1],a={};return a.x=n,a.y=i,a.pos=e,a.angle=180*(Math.atan2(i,n)+Math.PI)/Math.PI,a.radius=Math.sqrt(n*n+i*i),a},s.util.duplicatesCount=function(t){for(var e,n={},r={},i=0,a=t.length;i<a;i++)(e=t[i])in n?(n[e]++,r[e]=n[e]):n[e]=1;return r},s.util.duplicates=function(t){return Object.keys(s.util.duplicatesCount(t))},s.util.translator=function(t,e,n,r){if(r){var i=n.slice();n=e,e=i}var a=e.reduce(function(t,e){if("undefined"!=typeof t)return t[e]},t);"undefined"!==typeof a&&(e.reduce(function(t,n,r){if("undefined"!=typeof t)return r===e.length-1&&delete t[n],t[n]},t),n.reduce(function(t,e,r){return"undefined"===typeof t[e]&&(t[e]={}),r===n.length-1&&(t[e]=a),t[e]},t))},s.PolyChart=function(){var t=[s.PolyChart.defaultConfig()],e=r.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function i(){var e=t[0].geometryConfig,i=e.container;"string"==typeof i&&(i=r.select(i)),i.datum(t).each(function(t,i){var a=!!t[0].data.yStack,o=t.map(function(t,e){return a?r.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):r.zip(t.data.t[0],t.data.r[0])}),s=e.angularScale,u=e.radialScale.domain()[0],l={bar:function(n,i,a){var o=t[a].data,u=e.radialScale(n[1])-e.radialScale(0),l=e.radialScale(n[2]||0),c=o.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[u+l,-c/2],[u+l,c/2],[l,c/2],[l,-c/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+s(t[0]))+")"}})},dot:function(n,i,a){var o=n[2]?[n[0],n[1]+n[2]]:n,s=r.svg.symbol().size(t[a].data.dotSize).type(t[a].data.dotType)(n,i);r.select(this).attr({class:"mark dot",d:s,transform:function(t,n){var r=function(t){var e=t.r*Math.cos(t.t),n=t.r*Math.sin(t.t);return{x:e,y:n}}(function(t,n){var r=e.radialScale(t[1]),i=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:r,t:i}}(o));return"translate("+[r.x,r.y]+")"}})}},c=r.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});l.line=function(n,i,a){var s=n[2]?o[a].map(function(t,e){return[t[0],t[1]+t[2]]}):o[a];if(r.select(this).each(l.dot).style({opacity:function(e,n){return+t[a].data.dotVisible},fill:p.stroke(n,i,a)}).attr({class:"mark dot"}),!(i>0)){var u=r.select(this.parentNode).selectAll("path.line").data([0]);u.enter().insert("path"),u.attr({class:"line",d:c(s),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(n,i,a)},"fill-opacity":0,stroke:function(t,e){return p.stroke(n,i,a)},"stroke-width":function(t,e){return p["stroke-width"](n,i,a)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](n,i,a)},opacity:function(t,e){return p.opacity(n,i,a)},display:function(t,e){return p.display(n,i,a)}})}};var f=e.angularScale.range(),d=Math.abs(f[1]-f[0])/o[0].length*Math.PI/180,h=r.svg.arc().startAngle(function(t){return-d/2}).endAngle(function(t){return d/2}).innerRadius(function(t){return e.radialScale(u+(t[2]||0))}).outerRadius(function(t){return e.radialScale(u+(t[2]||0))+e.radialScale(t[1])});l.arc=function(t,n,i){r.select(this).attr({class:"mark arc",d:h,transform:function(t,n){return"rotate("+(e.orientation+s(t[0])+90)+")"}})};var p={fill:function(e,n,r){return t[r].data.color},stroke:function(e,n,r){return t[r].data.strokeColor},"stroke-width":function(e,n,r){return t[r].data.strokeSize+"px"},"stroke-dasharray":function(e,r,i){return n[t[i].data.strokeDash]},opacity:function(e,n,r){return t[r].data.opacity},display:function(e,n,r){return"undefined"===typeof t[r].data.visible||t[r].data.visible?"block":"none"}},v=r.select(this).selectAll("g.layer").data(o);v.enter().append("g").attr({class:"layer"});var g=v.selectAll("path.mark").data(function(t,e){return t});g.enter().append("path").attr({class:"mark"}),g.style(p).each(l[e.geometryType]),g.exit().remove(),v.exit().remove()})}return i.config=function(e){return arguments.length?(e.forEach(function(e,n){t[n]||(t[n]={}),a(t[n],s.PolyChart.defaultConfig()),a(t[n],e)}),this):t},i.getColorScale=function(){},r.rebind(i,e,"on"),i},s.PolyChart.defaultConfig=function(){var t={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}};return t},s.BarChart=function(){return s.PolyChart()},s.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},s.AreaChart=function(){return s.PolyChart()},s.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},s.DotPlot=function(){return s.PolyChart()},s.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},s.LinePlot=function(){return s.PolyChart()},s.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},s.Legend=function(){var t=s.Legend.defaultConfig(),e=r.dispatch("hover");function n(){var e=t.legendConfig,i=t.data.map(function(t,n){return[].concat(t).map(function(t,r){var i=a({},e.elements[n]);return i.name=t,i.color=[].concat(e.elements[n].color)[r],i})}),o=r.merge(i);o=o.filter(function(t,n){return e.elements[n]&&(e.elements[n].visibleInLegend||"undefined"===typeof e.elements[n].visibleInLegend)}),e.reverseOrder&&(o=o.reverse());var s=e.container;("string"==typeof s||s.nodeName)&&(s=r.select(s));var u=o.map(function(t,e){return t.color}),l=e.fontSize,c=null==e.isContinuous?"number"===typeof o[0]:e.isContinuous,f=c?e.height:l*o.length,d=s.classed("legend-group",!0),h=d.selectAll("svg").data([0]),p=h.enter().append("svg").attr({width:300,height:f+l,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});p.append("g").classed("legend-axis",!0),p.append("g").classed("legend-marks",!0);var v=r.range(o.length),g=r.scale[c?"linear":"ordinal"]().domain(v).range(u),m=r.scale[c?"linear":"ordinal"]().domain(v)[c?"range":"rangePoints"]([0,f]);if(c){var y=h.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(u);y.enter().append("stop"),y.attr({offset:function(t,e){return e/(u.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),h.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var b=h.select(".legend-marks").selectAll("path.legend-mark").data(o);b.enter().append("path").classed("legend-mark",!0),b.attr({transform:function(t,e){return"translate("+[l/2,m(e)+l/2]+")"},d:function(t,e){var n=t.symbol;return function(t,e){var n=3*e;return"line"===t?"M"+[[-e/2,-e/12],[e/2,-e/12],[e/2,e/12],[-e/2,e/12]]+"Z":-1!=r.svg.symbolTypes.indexOf(t)?r.svg.symbol().type(t).size(n)():r.svg.symbol().type("square").size(n)()}(n,l)},fill:function(t,e){return g(e)}}),b.exit().remove()}var _=r.svg.axis().scale(m).orient("right"),x=h.select("g.legend-axis").attr({transform:"translate("+[c?e.colorBandWidth:l,l/2]+")"}).call(_);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:c?e.textColor:"none"}),x.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(t,e){return o[e].name}),n}return n.config=function(e){return arguments.length?(a(t,e),this):t},r.rebind(n,e,"on"),n},s.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},s.tooltipPanel=function(){var t,e,n,i={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},o="tooltip-"+s.tooltipPanel.uid++,u=10,l=function r(){var a=(t=i.container.selectAll("g."+o).data([0])).enter().append("g").classed(o,!0).style({"pointer-events":"none",display:"none"});return n=a.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),e=a.append("text").attr({dx:i.padding+u,dy:.3*+i.fontSize}),r};return l.text=function(a){var o=r.hsl(i.color).l,s=o>=.5?"#aaa":"white",c=o>=.5?"black":"white",f=a||"";e.style({fill:c,"font-size":i.fontSize+"px"}).text(f);var d=i.padding,h=e.node().getBBox(),p={fill:i.color,stroke:s,"stroke-width":"2px"},v=h.width+2*d+u,g=h.height+2*d;return n.attr({d:"M"+[[u,-g/2],[u,-g/4],[i.hasTick?0:u,0],[u,g/4],[u,g/2],[v,g/2],[v,-g/2]].join("L")+"Z"}).style(p),t.attr({transform:"translate("+[u,-g/2+2*d]+")"}),t.style({display:"block"}),l},l.move=function(e){if(t)return t.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),l},l.hide=function(){if(t)return t.style({display:"none"}),l},l.show=function(){if(t)return t.style({display:"block"}),l},l.config=function(t){return a(i,t),l},l},s.tooltipPanel.uid=1,s.adapter={},s.adapter.plotly=function(){var t={convert:function(t,e){var n={};if(t.data&&(n.data=t.data.map(function(t,n){var r=a({},t),i=[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]];return i.forEach(function(t,n){s.util.translator.apply(null,t.concat(e))}),e||delete r.marker,e&&delete r.groupId,e?("LinePlot"===r.geometry?(r.type="scatter",!0===r.dotVisible?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!e&&t.layout&&"stack"===t.layout.barmode)){var i=s.util.duplicates(n.data.map(function(t,e){return t.geometry}));n.data.forEach(function(t,e){var r=i.indexOf(t.geometry);-1!=r&&(n.data[e].groupId=r)})}if(t.layout){var o=a({},t.layout),u=[[o,["plot_bgcolor"],["backgroundColor"]],[o,["showlegend"],["showLegend"]],[o,["radialaxis"],["radialAxis"]],[o,["angularaxis"],["angularAxis"]],[o.angularaxis,["showline"],["gridLinesVisible"]],[o.angularaxis,["showticklabels"],["labelsVisible"]],[o.angularaxis,["nticks"],["ticksCount"]],[o.angularaxis,["tickorientation"],["tickOrientation"]],[o.angularaxis,["ticksuffix"],["ticksSuffix"]],[o.angularaxis,["range"],["domain"]],[o.angularaxis,["endpadding"],["endPadding"]],[o.radialaxis,["showline"],["gridLinesVisible"]],[o.radialaxis,["tickorientation"],["tickOrientation"]],[o.radialaxis,["ticksuffix"],["ticksSuffix"]],[o.radialaxis,["range"],["domain"]],[o.angularAxis,["showline"],["gridLinesVisible"]],[o.angularAxis,["showticklabels"],["labelsVisible"]],[o.angularAxis,["nticks"],["ticksCount"]],[o.angularAxis,["tickorientation"],["tickOrientation"]],[o.angularAxis,["ticksuffix"],["ticksSuffix"]],[o.angularAxis,["range"],["domain"]],[o.angularAxis,["endpadding"],["endPadding"]],[o.radialAxis,["showline"],["gridLinesVisible"]],[o.radialAxis,["tickorientation"],["tickOrientation"]],[o.radialAxis,["ticksuffix"],["ticksSuffix"]],[o.radialAxis,["range"],["domain"]],[o.font,["outlinecolor"],["outlineColor"]],[o.legend,["traceorder"],["reverseOrder"]],[o,["labeloffset"],["labelOffset"]],[o,["defaultcolorrange"],["defaultColorRange"]]];if(u.forEach(function(t,n){s.util.translator.apply(null,t.concat(e))}),e?("undefined"!==typeof o.tickLength&&(o.angularaxis.ticklen=o.tickLength,delete o.tickLength),o.tickColor&&(o.angularaxis.tickcolor=o.tickColor,delete o.tickColor)):(o.angularAxis&&"undefined"!==typeof o.angularAxis.ticklen&&(o.tickLength=o.angularAxis.ticklen),o.angularAxis&&"undefined"!==typeof o.angularAxis.tickcolor&&(o.tickColor=o.angularAxis.tickcolor)),o.legend&&"boolean"!=typeof o.legend.reverseOrder&&(o.legend.reverseOrder="normal"!=o.legend.reverseOrder),o.legend&&"boolean"==typeof o.legend.traceorder&&(o.legend.traceorder=o.legend.traceorder?"reversed":"normal",delete o.legend.reverseOrder),o.margin&&"undefined"!=typeof o.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],f={};r.entries(o.margin).forEach(function(t,e){f[c[l.indexOf(t.key)]]=t.value}),o.margin=f}e&&(delete o.needsEndSpacing,delete o.minorTickColor,delete o.minorTicks,delete o.angularaxis.ticksCount,delete o.angularaxis.ticksCount,delete o.angularaxis.ticksStep,delete o.angularaxis.rewriteTicks,delete o.angularaxis.nticks,delete o.radialaxis.ticksCount,delete o.radialaxis.ticksCount,delete o.radialaxis.ticksStep,delete o.radialaxis.rewriteTicks,delete o.radialaxis.nticks),n.layout=o}return n}};return t}},{"../../../constants/alignment":137,"../../../lib":160,d3:7}],241:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../../lib"),a=t("../../../components/color"),o=t("./micropolar"),s=t("./undo_manager"),u=i.extendDeepAll,l=e.exports={};l.framework=function(t){var e,n,i,a,c,f=new s;function d(n,s){return s&&(c=s),r.select(r.select(c).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),e=e?u(e,n):n,i||(i=o.Axis()),a=o.adapter.plotly().convert(e),i.config(a).render(c),t.data=e.data,t.layout=e.layout,l.fillLayout(t),e}return d.isPolar=!0,d.svg=function(){return i.svg()},d.getConfig=function(){return e},d.getLiveConfig=function(){return o.adapter.plotly().convert(i.getLiveConfig(),!0)},d.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},d.setUndoPoint=function(){var t,r,i=this,a=o.util.cloneJson(e);t=a,r=n,f.add({undo:function(){r&&i(r)},redo:function(){i(t)}}),n=o.util.cloneJson(a)},d.undo=function(){f.undo()},d.redo=function(){f.redo()},d},l.fillLayout=function(t){var e=r.select(t).selectAll(".plot-container"),n=e.selectAll(".svg-container"),i=t.framework&&t.framework.svg&&t.framework.svg(),o={width:800,height:600,paper_bgcolor:a.background,_container:e,_paperdiv:n,_paper:i};t._fullLayout=u(o,t.layout)}},{"../../../components/color":42,"../../../lib":160,"./micropolar":240,"./undo_manager":242,d3:7}],242:[function(t,e,n){"use strict";e.exports=function(){var t,e=[],n=-1,r=!1;function i(t,e){return t?(r=!0,t[e](),r=!1,this):this}return{add:function(t){return r?this:(e.splice(n+1,e.length-n),e.push(t),n=e.length-1,this)},setCallback:function(e){t=e},undo:function(){var r=e[n];return r?(i(r,"undo"),n-=1,t&&t(r.undo),this):this},redo:function(){var r=e[n+1];return r?(i(r,"redo"),n+=1,t&&t(r.redo),this):this},clear:function(){e=[],n=-1},hasUndo:function(){return-1!==n},hasRedo:function(){return n<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[n-1]},getIndex:function(){return n}}}},{}],243:[function(t,e,n){"use strict";var r=t("./lib/loggers"),i=t("./lib/noop"),a=t("./lib/push_unique"),o=t("./lib/is_plain_object"),s=t("./lib/dom").addStyleRule,u=t("./lib/extend"),l=t("./plots/attributes"),c=t("./plots/layout_attributes"),f=u.extendFlat,d=u.extendDeepAll;function h(t){var e=t.name,i=t.categories,a=t.meta;if(n.modules[e])r.log("Type "+e+" already registered");else{n.subplotsRegistry[t.basePlotModule.name]||function(t){var e=t.name;if(n.subplotsRegistry[e])r.log("Plot type "+e+" already registered.");else for(var i in m(t),n.subplotsRegistry[e]=t,n.componentsRegistry)_(i,t.name)}(t.basePlotModule);for(var o={},u=0;u<i.length;u++)o[i[u]]=!0,n.allCategories[i[u]]=!0;for(var l in n.modules[e]={_module:t,categories:o},a&&Object.keys(a).length&&(n.modules[e].meta=a),n.allTypes.push(e),n.componentsRegistry)y(l,e);t.layoutAttributes&&f(n.traceLayoutAttributes,t.layoutAttributes);var c=t.basePlotModule,d=c.name;if("mapbox"===d){var h=c.constants.styleRules;for(var p in h)s(".js-plotly-plot .plotly .mapboxgl-"+p,h[p])}"geo"!==d&&"mapbox"!==d||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function p(t){if("string"!==typeof t.name)throw new Error("Component module *name* must be a string.");var e=t.name;for(var r in n.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&a(n.layoutArrayContainers,e),m(t)),n.modules)y(e,r);for(var i in n.subplotsRegistry)_(e,i);for(var o in n.transformsRegistry)b(e,o);t.schema&&t.schema.layout&&d(c,t.schema.layout)}function v(t){if("string"!==typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,i="function"===typeof t.transform,a="function"===typeof t.calcTransform;if(!i&&!a)throw new Error(e+" is missing a *transform* or *calcTransform* method.");for(var s in i&&a&&r.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),o(t.attributes)||r.log(e+" registered without an *attributes* object."),"function"!==typeof t.supplyDefaults&&r.log(e+" registered without a *supplyDefaults* method."),n.transformsRegistry[t.name]=t,n.componentsRegistry)b(s,t.name)}function g(t){var e=t.name,r=e.split("-")[0],i=t.dictionary,a=t.format,o=i&&Object.keys(i).length,s=a&&Object.keys(a).length,u=n.localeRegistry,l=u[e];if(l||(u[e]=l={}),r!==e){var c=u[r];c||(u[r]=c={}),o&&c.dictionary===l.dictionary&&(c.dictionary=i),s&&c.format===l.format&&(c.format=a)}o&&(l.dictionary=i),s&&(l.format=a)}function m(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var r=0;r<e.length;r++)a(n.layoutArrayRegexes,e[r])}}function y(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.traces){var i=r.traces[e];i&&d(n.modules[e]._module.attributes,i)}}function b(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.transforms){var i=r.transforms[e];i&&d(n.transformsRegistry[e].attributes,i)}}function _(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.subplots){var i=n.subplotsRegistry[e],a=i.layoutAttributes,o="subplot"===i.attr?i.name:i.attr;Array.isArray(o)&&(o=o[0]);var s=r.subplots[o];a&&s&&d(a,s)}}function x(t){return"object"===typeof t&&(t=t.type),t}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.apiMethodRegistry={},n.collectableSubplotTypes=null,n.register=function(t){if(n.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":h(r);break;case"transform":v(r);break;case"component":p(r);break;case"locale":g(r);break;case"apiMethod":var i=r.name;n.apiMethodRegistry[i]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},n.getModule=function(t){var e=n.modules[x(t)];return!!e&&e._module},n.traceIs=function(t,e){if("various"===(t=x(t)))return!1;var i=n.modules[t];return i||(t&&"area"!==t&&r.log("Unrecognized trace type "+t+"."),i=n.modules[l.type.dflt]),!!i.categories[e]},n.getTransformIndices=function(t,e){for(var n=[],r=t.transforms||[],i=0;i<r.length;i++)r[i].type===e&&n.push(i);return n},n.hasTransform=function(t,e){for(var n=t.transforms||[],r=0;r<n.length;r++)if(n[r].type===e)return!0;return!1},n.getComponentMethod=function(t,e){var r=n.componentsRegistry[t];return r&&r[e]||i},n.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return n.apiMethodRegistry[t].apply(null,e)}},{"./lib/dom":153,"./lib/extend":155,"./lib/is_plain_object":161,"./lib/loggers":164,"./lib/noop":169,"./lib/push_unique":173,"./plots/attributes":201,"./plots/layout_attributes":234}],244:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib"),a=i.extendFlat,o=i.extendDeep;function s(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}e.exports=function(t,e){var n;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var i,u=t.data,l=t.layout,c=o([],u),f=o({},l,s(e.tileClass)),d=t._context||{};if(e.width&&(f.width=e.width),e.height&&(f.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){f.annotations=[];var h=Object.keys(f);for(n=0;n<h.length;n++)i=h[n],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(f[h[n]].title={text:""});for(n=0;n<c.length;n++){var p=c[n];p.showscale=!1,p.marker&&(p.marker.showscale=!1),r.traceIs(p,"pie-like")&&(p.textposition="none")}}if(Array.isArray(e.annotations))for(n=0;n<e.annotations.length;n++)f.annotations.push(e.annotations[n]);var v=Object.keys(f).filter(function(t){return t.match(/^scene\d*$/)});if(v.length){var g={};for("thumbnail"===e.tileClass&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<v.length;n++){var m=f[v[n]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),a(m.xaxis,g),a(m.yaxis,g),a(m.zaxis,g),m._scene=null}}var y=document.createElement("div");e.tileClass&&(y.className=e.tileClass);var b={gd:y,td:y,layout:f,data:c,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return"transparent"!==e.setBackground&&(b.config.setBackground=e.setBackground||"opaque"),b.gd.defaultLayout=s(e.tileClass),b}},{"../lib":160,"../registry":243}],245:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plot_api/to_image"),a=t("./filesaver"),o=t("./helpers");e.exports=function(t,e){var n;return r.isPlainObject(t)||(n=r.getGraphDiv(t)),(e=e||{}).format=e.format||"png",e.imageDataOnly=!0,new Promise(function(s,u){n&&n._snapshotInProgress&&u(new Error("Snapshotting already in progress.")),r.isIE()&&"svg"!==e.format&&u(new Error(o.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var l=i(t,e),c=e.filename||t.fn||"newplot";c+="."+e.format,l.then(function(t){return n&&(n._snapshotInProgress=!1),a(t,c,e.format)}).then(function(t){s(t)}).catch(function(t){n&&(n._snapshotInProgress=!1),u(t)})})}},{"../lib":160,"../plot_api/to_image":197,"./filesaver":246,"./helpers":247}],246:[function(t,e,n){"use strict";var r=t("../lib"),i=t("./helpers");e.exports=function(t,e,n){var a=document.createElement("a"),o="download"in a;return new Promise(function(s,u){var l,c;if(r.isIE9orBelow()&&u(new Error("IE < 10 unsupported")),r.isSafari()){var f="svg"===n?",":";base64,";return i.octetStream(f+encodeURIComponent(t)),s(e)}return r.isIE()?(l=i.createBlob(t,"svg"),window.navigator.msSaveBlob(l,e),l=null,s(e)):o?(l=i.createBlob(t,n),c=i.createObjectURL(l),a.href=c,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),i.revokeObjectURL(c),l=null,s(e)):void u(new Error("download error"))})}},{"../lib":160,"./helpers":247}],247:[function(t,e,n){"use strict";var r=t("../registry");n.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},n.getRedrawFunc=function(t){return function(){var e=t._fullLayout||{},n=e._has&&e._has("polar"),i=!n&&t.data&&t.data[0]&&t.data[0].r;i||r.getComponentMethod("colorbar","draw")(t)}},n.encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)};var i=window.URL||window.webkitURL;n.createObjectURL=function(t){return i.createObjectURL(t)},n.revokeObjectURL=function(t){return i.revokeObjectURL(t)},n.createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});var n=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(window.atob(t));return new window.Blob([n],{type:"image/"+e})},n.octetStream=function(t){document.location.href="data:application/octet-stream"+t},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":243}],248:[function(t,e,n){"use strict";var r=t("./helpers"),i={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};e.exports=i},{"./cloneplot":244,"./download":245,"./helpers":247,"./svgtoimg":249,"./toimage":250,"./tosvg":251}],249:[function(t,e,n){"use strict";var r=t("../lib"),i=t("events").EventEmitter,a=t("./helpers");e.exports=function(t){var e=t.emitter||new i,n=new Promise(function(i,o){var s=window.Image,u=t.svg,l=t.format||"png";if(r.isIE()&&"svg"!==l){var c=new Error(a.MSG_IE_BAD_FORMAT);return o(c),t.promise?n:e.emit("error",c)}var f,d,h=t.canvas,p=t.scale||1,v=t.width||300,g=t.height||150,m=p*v,y=p*g,b=h.getContext("2d"),_=new s;"svg"===l||r.isIE9orBelow()||r.isSafari()?d=a.encodeSVG(u):(f=a.createBlob(u,"svg"),d=a.createObjectURL(f)),h.width=m,h.height=y,_.onload=function(){var n;switch(f=null,a.revokeObjectURL(d),"svg"!==l&&b.drawImage(_,0,0,m,y),l){case"jpeg":n=h.toDataURL("image/jpeg");break;case"png":n=h.toDataURL("image/png");break;case"webp":n=h.toDataURL("image/webp");break;case"svg":n=d;break;default:var r="Image format is not jpeg, png, svg or webp.";if(o(new Error(r)),!t.promise)return e.emit("error",r)}i(n),t.promise||e.emit("success",n)},_.onerror=function(n){if(f=null,a.revokeObjectURL(d),o(n),!t.promise)return e.emit("error",n)},_.src=d});return t.promise?n:e}},{"../lib":160,"./helpers":247,events:6}],250:[function(t,e,n){"use strict";var r=t("events").EventEmitter,i=t("../registry"),a=t("../lib"),o=t("./helpers"),s=t("./cloneplot"),u=t("./tosvg"),l=t("./svgtoimg");e.exports=function(t,e){var n=new r,c=s(t,{format:"png"}),f=c.gd;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);var d=o.getRedrawFunc(f);return i.call("plot",f,c.data,c.layout,c.config).then(d).then(function(){var t=o.getDelay(f._fullLayout);setTimeout(function(){var t=u(f),r=document.createElement("canvas");r.id=a.randstr(),(n=l({format:e.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:r,emitter:n,svg:t})).clean=function(){f&&document.body.removeChild(f)}},t)}).catch(function(t){n.emit("error",t)}),n}},{"../lib":160,"../registry":243,"./cloneplot":244,"./helpers":247,"./svgtoimg":249,"./tosvg":251,events:6}],251:[function(t,e,n){"use strict";var r=t("d3"),i=t("../lib"),a=t("../components/drawing"),o=t("../components/color"),s=t("../constants/xmlns_namespaces"),u=/"/g,l=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");e.exports=function(t,e,n){var c,f=t._fullLayout,d=f._paper,h=f._toppaper,p=f.width,v=f.height;d.insert("rect",":first-child").call(a.setRect,0,0,p,v).call(o.fill,f.paper_bgcolor);var g=f._basePlotModules||[];for(c=0;c<g.length;c++){var m=g[c];m.toSVG&&m.toSVG(t)}if(h){var y=h.node().childNodes,b=Array.prototype.slice.call(y);for(c=0;c<b.length;c++){var _=b[c];_.childNodes.length&&d.node().appendChild(_)}}f._draggers&&f._draggers.remove(),d.node().style.background="",d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t=r.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(u,"TOBESTRIPPED"))}else t.remove()}),d.selectAll(".point, .scatterpts, .legendfill>path, .legendlines>path, .cbfill").each(function(){var t=r.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(u,"TOBESTRIPPED"));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&t.style("stroke",n.replace(u,"TOBESTRIPPED"))}),"pdf"!==e&&"eps"!==e||d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),d.node().setAttributeNS(s.xmlns,"xmlns",s.svg),d.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===e&&n&&(d.attr("width",n*p),d.attr("height",n*v),d.attr("viewBox","0 0 "+p+" "+v));var x=(new window.XMLSerializer).serializeToString(d.node());return x=(x=(x=function(t){var e=r.select("body").append("div").style({display:"none"}).html(""),n=t.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()});return e.remove(),n}(x)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(l,"'"),i.isIE()&&(x=(x=(x=x.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),x}},{"../components/color":42,"../components/drawing":63,"../constants/xmlns_namespaces":141,"../lib":160,d3:7}],252:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;r.mergeArray(e.text,t,"tx"),r.mergeArray(e.hovertext,t,"htx");var i=e.marker;if(i){r.mergeArray(i.opacity,t,"mo",!0),r.mergeArray(i.color,t,"mc");var a=i.line;a&&(r.mergeArray(a.color,t,"mlc"),r.mergeArrayCastPositive(a.width,t,"mlw"))}}},{"../../lib":160}],253:[function(t,e,n){"use strict";var r=t("../scatter/attributes"),i=t("../../components/fx/hovertemplate_attributes"),a=t("../../components/colorscale/attributes"),o=t("../../plots/font_attributes"),s=t("./constants.js"),u=t("../../lib/extend").extendFlat,l=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),c=r.marker,f=c.line,d=u({},f.width,{dflt:0}),h=u({width:d,editType:"calc"},a("marker.line")),p=u({line:h,editType:"calc"},a("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,hovertext:r.hovertext,hovertemplate:i({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:u({},l,{}),insidetextfont:u({},l,{}),outsidetextfont:u({},l,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:u({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":49,"../../components/fx/hovertemplate_attributes":80,"../../lib/extend":155,"../../plots/font_attributes":230,"../scatter/attributes":281,"./constants.js":255}],254:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axes"),i=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/calc"),o=t("./arrays_to_calcdata"),s=t("../scatter/calc_selection");e.exports=function(t,e){var n,u,l=r.getFromId(t,e.xaxis||"x"),c=r.getFromId(t,e.yaxis||"y");"h"===e.orientation?(n=l.makeCalcdata(e,"x"),u=c.makeCalcdata(e,"y")):(n=c.makeCalcdata(e,"y"),u=l.makeCalcdata(e,"x"));for(var f=Math.min(u.length,n.length),d=new Array(f),h=0;h<f;h++)d[h]={p:u[h],s:n[h]},e.ids&&(d[h].id=String(e.ids[h]));return i(e,"marker")&&a(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),i(e,"marker.line")&&a(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),o(d,e),s(d,e),d}},{"../../components/colorscale/calc":50,"../../components/colorscale/helpers":53,"../../plots/cartesian/axes":204,"../scatter/calc_selection":283,"./arrays_to_calcdata":252}],255:[function(t,e,n){"use strict";e.exports={eventDataKeys:[]}},{}],256:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib").isArrayOrTypedArray,a=t("../../constants/numerical").BADNUM,o=t("../../registry"),s=t("../../plots/cartesian/axes"),u=t("../../plots/cartesian/axis_ids").getAxisGroup,l=t("./sieve.js");function c(t,e,n,o,c){if(o.length){var _,x,w,A;switch(function(t,e){var n,a;for(n=0;n<e.length;n++){var o,s=e[n],u=s[0].trace,l="funnel"===u.type?u._base:u.base,c="h"===u.orientation?u.xcalendar:u.ycalendar,f="category"===t.type||"multicategory"===t.type?function(){return null}:t.d2c;if(i(l)){for(a=0;a<Math.min(l.length,s.length);a++)o=f(l[a],0,c),r(o)?(s[a].b=+o,s[a].hasB=1):s[a].b=0;for(;a<s.length;a++)s[a].b=0}else{o=f(l,0,c);var d=r(o);for(o=d?o:0,a=0;a<s.length;a++)s[a].b=o,d&&(s[a].hasB=1)}}}(n,o),c.mode){case"overlay":f(e,n,o,c);break;case"group":for(_=[],x=[],w=0;w<o.length;w++)void 0===(A=o[w])[0].trace.offset?x.push(A):_.push(A);x.length&&function(t,e,n,r,i){var o=new l(r,{sepNegVal:!1,overlapNoMerge:!i.norm});(function(t,e,n,r){for(var i=t._fullLayout,a=n.positions,o=n.distinctPositions,s=n.minDiff,l=n.traces,c=l.length,f=a.length!==o.length,d=s*(1-r.gap),g=u(i,e._id)+l[0][0].trace.orientation,m=i._alignmentOpts[g]||{},y=0;y<c;y++){var b,_,x=l[y],w=x[0].trace,A=m[w.alignmentgroup]||{},k=Object.keys(A.offsetGroups||{}).length,M=(b=k?d/k:f?d/c:d)*(1-(r.groupgap||0));_=k?((2*w._offsetIndex+1-k)*b-M)/2:f?((2*y+1-c)*b-M)/2:-M/2;var T=x[0].t;T.barwidth=M,T.poffset=_,T.bargroupwidth=d,T.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,h(n),p(e,n),v(e,n,f)})(t,e,o,i),function(t){for(var e=t.traces,n=0;n<e.length;n++){var r=e[n],i=r[0].trace;if(void 0===i.base)for(var o=new l([r],{sepNegVal:!0,overlapNoMerge:!0}),s=0;s<r.length;s++){var u=r[s];if(u.p!==a){var c=o.put(u.p,u.b+u.s);c&&(u.b=c)}}}}(o),i.norm?(m(o),y(n,o,i)):g(n,o)}(t,e,n,x,c),_.length&&f(e,n,_,c);break;case"stack":case"relative":for(_=[],x=[],w=0;w<o.length;w++)void 0===(A=o[w])[0].trace.base?x.push(A):_.push(A);x.length&&function(t,e,n,r,i){var o=new l(r,{sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});d(e,o,i),function(t,e,n){var r,i,o,u,l,c,f=b(t),d=e.traces;for(u=0;u<d.length;u++)if(r=d[u],"funnel"===(i=r[0].trace).type)for(l=0;l<r.length;l++)(c=r[l]).s!==a&&e.put(c.p,-.5*c.s);for(u=0;u<d.length;u++){r=d[u],i=r[0].trace,o="funnel"===i.type;var h=[];for(l=0;l<r.length;l++)if((c=r[l]).s!==a){var p;p=o?c.s:c.s+c.b;var v=e.put(c.p,p),g=v+p;c.b=v,c[f]=g,n.norm||(h.push(g),c.hasB&&h.push(v))}n.norm||(i._extremes[t._id]=s.findExtremes(t,h,{tozero:!0,padded:!0}))}}(n,o,i);for(var u=0;u<r.length;u++)for(var c=r[u],f=0;f<c.length;f++){var h=c[f];if(h.s!==a){var p=h.b+h.s===o.get(h.p,h.s);p&&(h._outmost=!0)}}i.norm&&y(n,o,i)}(0,e,n,x,c),_.length&&f(e,n,_,c)}!function(t,e){var n,i,a,o=b(e),s={},u=1/0,l=-1/0;for(n=0;n<t.length;n++)for(a=t[n],i=0;i<a.length;i++){var c=a[i].p;r(c)&&(u=Math.min(u,c),l=Math.max(l,c))}var f=1e4/(l-u),d=s.round=function(t){return String(Math.round(f*(t-u)))};for(n=0;n<t.length;n++){(a=t[n])[0].t.extents=s;var h=a[0].t.poffset,p=Array.isArray(h);for(i=0;i<a.length;i++){var v=a[i],g=v[o]-v.w/2;if(r(g)){var m=v[o]+v.w/2,y=d(v.p);s[y]?s[y]=[Math.min(g,s[y][0]),Math.max(m,s[y][1])]:s[y]=[g,m]}v.p0=v.p+(p?h[i]:h),v.p1=v.p0+v.w,v.s0=v.b,v.s1=v.s0+v.s}}}(o,e)}}function f(t,e,n,r){for(var i=0;i<n.length;i++){var a=n[i],o=new l([a],{sepNegVal:!1,overlapNoMerge:!r.norm});d(t,o,r),r.norm?(m(o),y(e,o,r)):g(e,o)}}function d(t,e,n){for(var r=e.minDiff,i=e.traces,a=r*(1-n.gap),o=a,s=o*(1-(n.groupgap||0)),u=-s/2,l=0;l<i.length;l++){var c=i[l],f=c[0].t;f.barwidth=s,f.poffset=u,f.bargroupwidth=a,f.bardelta=r}e.binWidth=i[0][0].t.barwidth/100,h(e),p(t,e),v(t,e)}function h(t){var e,n,a=t.traces;for(e=0;e<a.length;e++){var o,s=a[e],u=s[0],l=u.trace,c=u.t,f=l._offset||l.offset,d=c.poffset;if(i(f)){for(o=Array.prototype.slice.call(f,0,s.length),n=0;n<o.length;n++)r(o[n])||(o[n]=d);for(n=o.length;n<s.length;n++)o.push(d);c.poffset=o}else void 0!==f&&(c.poffset=f);var h=l._width||l.width,p=c.barwidth;if(i(h)){var v=Array.prototype.slice.call(h,0,s.length);for(n=0;n<v.length;n++)r(v[n])||(v[n]=p);for(n=v.length;n<s.length;n++)v.push(p);if(c.barwidth=v,void 0===f){for(o=[],n=0;n<s.length;n++)o.push(d+(p-v[n])/2);c.poffset=o}}else void 0!==h&&(c.barwidth=h,void 0===f&&(c.poffset=d+(p-h)/2))}}function p(t,e){for(var n=e.traces,r=b(t),i=0;i<n.length;i++)for(var a=n[i],o=a[0].t,s=o.poffset,u=Array.isArray(s),l=o.barwidth,c=Array.isArray(l),f=0;f<a.length;f++){var d=a[f],h=d.w=c?l[f]:l;d[r]=d.p+(u?s[f]:s)+h/2}}function v(t,e,n){var r=e.traces,i=e.minDiff,a=i/2;s.minDtick(t,e.minDiff,e.distinctPositions[0],n);for(var o=0;o<r.length;o++){var u,l,c,f,d=r[o],h=d[0],p=h.trace,v=[];for(f=0;f<d.length;f++)u=d[f],l=u.p-a,c=u.p+a,v.push(l,c);if(p.width||p.offset){var g=h.t,m=g.poffset,y=g.barwidth,b=Array.isArray(m),_=Array.isArray(y);for(f=0;f<d.length;f++){u=d[f];var x=b?m[f]:m,w=_?y[f]:y;l=u.p+x,c=l+w,v.push(l,c)}}p._extremes[t._id]=s.findExtremes(t,v,{padded:!1})}}function g(t,e){for(var n=e.traces,r=b(t),i=0;i<n.length;i++){for(var a=n[i],o=a[0].trace,u=[],l=!0,c=0;c<a.length;c++){var f=a[c],d=f.b,h=d+f.s;f[r]=h,u.push(h),f.hasB&&u.push(d),f.hasB&&f.b>0&&f.s>0||(l=!1)}o._extremes[t._id]=s.findExtremes(t,u,{tozero:!l,padded:!0})}}function m(t){for(var e=t.traces,n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++){var o=r[i];o.s!==a&&t.put(o.p,o.b+o.s)}}function y(t,e,n){var i=e.traces,o=b(t),u="fraction"===n.norm?1:100,l=u/1e9,c=t.l2c(t.c2l(0)),f="stack"===n.mode?u:c;function d(e){return r(t.c2l(e))&&(e<c-l||e>f+l||!r(c))}for(var h=0;h<i.length;h++){for(var p=i[h],v=p[0].trace,g=[],m=!0,y=!1,_=0;_<p.length;_++){var x=p[_];if(x.s!==a){var w=Math.abs(u/e.get(x.p,x.s));x.b*=w,x.s*=w;var A=x.b,k=A+x.s;x[o]=k,g.push(k),y=y||d(k),x.hasB&&(g.push(A),y=y||d(A)),x.hasB&&x.b>0&&x.s>0||(m=!1)}}v._extremes[t._id]=s.findExtremes(t,g,{tozero:!m,padded:y})}}function b(t){return t._id.charAt(0)}e.exports={crossTraceCalc:function(t,e){for(var n=e.xaxis,r=e.yaxis,i=t._fullLayout,a=t._fullData,s=t.calcdata,u=[],l=[],f=0;f<a.length;f++){var d=a[f];!0===d.visible&&o.traceIs(d,"bar")&&d.xaxis===n._id&&d.yaxis===r._id&&("h"===d.orientation?u.push(s[f]):l.push(s[f]))}var h={mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};c(t,n,r,l,h),c(t,r,n,u,h)},setGroupPositions:c}},{"../../constants/numerical":140,"../../lib":160,"../../plots/cartesian/axes":204,"../../plots/cartesian/axis_ids":207,"../../registry":243,"./sieve.js":265,"fast-isnumeric":9}],257:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/color"),a=t("../../registry"),o=t("../scatter/xy_defaults"),s=t("./style_defaults"),u=t("../../plots/cartesian/axis_ids").getAxisGroup,l=t("./attributes"),c=r.coerceFont;function f(t,e,n,r){var i=e.orientation,a=e[{v:"x",h:"y"}[i]+"axis"],o=u(n,a)+i,s=n._alignmentOpts||{},l=r("alignmentgroup"),c=s[o];c||(c=s[o]={});var f=c[l];f?f.traces.push(e):f=c[l]={traces:[e],alignmentIndex:Object.keys(c).length,offsetGroups:{}};var d=r("offsetgroup"),h=f.offsetGroups,p=h[d];d&&(p||(p=h[d]={offsetIndex:Object.keys(h).length}),e._offsetIndex=p.offsetIndex)}function d(t,e,n,i,a,o){var s=!(!1===(o=o||{}).moduleHasSelected),u=!(!1===o.moduleHasUnselected),l=!(!1===o.moduleHasConstrain),f=!(!1===o.moduleHasCliponaxis),d=!(!1===o.moduleHasTextangle),h=!(!1===o.moduleHasInsideanchor),p=Array.isArray(a)||"auto"===a,v=p||"inside"===a,g=p||"outside"===a;if(v||g){var m=c(i,"textfont",n.font),y=r.extendFlat({},m),b=t.textfont&&t.textfont.color,_=!b;_&&delete y.color,c(i,"insidetextfont",y),g&&c(i,"outsidetextfont",m),s&&i("selected.textfont.color"),u&&i("unselected.textfont.color"),l&&i("constraintext"),f&&i("cliponaxis"),d&&i("textangle")}v&&h&&i("insidetextanchor")}e.exports={supplyDefaults:function(t,e,n,u){function c(n,i){return r.coerce(t,e,l,n,i)}if(o(t,e,u,c)){c("orientation",e.x&&!e.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var f=c("textposition");d(t,0,u,c,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(t,e,c,n,u);var h=(e.marker.line||{}).color,p=a.getComponentMethod("errorbars","supplyDefaults");p(t,e,h||i.defaultLine,{axis:"y"}),p(t,e,h||i.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(e,c)}else e.visible=!1},crossTraceDefaults:function(t,e){var n;function i(t){return r.coerce(n._input,n,l,t)}if("group"===e.barmode)for(var a=0;a<t.length;a++)"bar"===(n=t[a]).type&&f(n._input,n,e,i)},handleGroupingDefaults:f,handleText:d}},{"../../components/color":42,"../../lib":160,"../../plots/cartesian/axis_ids":207,"../../registry":243,"../scatter/xy_defaults":306,"./attributes":253,"./style_defaults":267}],258:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("tinycolor2"),a=t("../../lib").isArrayOrTypedArray;n.coerceString=function(t,e,n){if("string"===typeof e){if(e||!t.noBlank)return e}else if(("number"===typeof e||!0===e)&&!t.strict)return String(e);return void 0!==n?n:t.dflt},n.coerceNumber=function(t,e,n){if(r(e)){e=+e;var i=t.min,a=t.max,o=void 0!==i&&e<i||void 0!==a&&e>a;if(!o)return e}return void 0!==n?n:t.dflt},n.coerceColor=function(t,e,n){return i(e).isValid()?e:void 0!==n?n:t.dflt},n.coerceEnumerated=function(t,e,n){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==n?n:t.dflt},n.getValue=function(t,e){var n;return Array.isArray(t)?e<t.length&&(n=t[e]):n=t,n},n.getLineWidth=function(t,e){var n=0<e.mlw?e.mlw:a(t.marker.line.width)?0:t.marker.line.width;return n}},{"../../lib":160,"fast-isnumeric":9,tinycolor2:25}],259:[function(t,e,n){"use strict";var r=t("../../components/fx"),i=t("../../registry"),a=t("../../components/color"),o=t("../../lib").fillText,s=t("./helpers").getLineWidth;function u(t,e,n,i){var a,s,u,l,c,f,d,h=t.cd,p=h[0].trace,v=h[0].t,g="closest"===i,m="waterfall"===p.type,y=t.maxHoverDistance,b=t.maxSpikeDistance;function _(t){return t[u]-t.w/2}function x(t){return t[u]+t.w/2}var w=g?_:function(t){return Math.min(_(t),t.p-v.bardelta/2)},A=g?x:function(t){return Math.max(x(t),t.p+v.bardelta/2)};function k(t,e){return r.inbox(t-a,e-a,y+Math.min(1,Math.abs(e-t)/d)-1)}function M(t){return k(w(t),A(t))}function T(t){var e=s,n=t.b,i=t[l];return m&&(i+=Math.abs(t.rawS||0)),r.inbox(n-e,i-e,y+(i-e)/(i-n)-1)}"h"===p.orientation?(a=n,s=e,u="y",l="x",c=T,f=M):(a=e,s=n,u="x",l="y",f=T,c=M);var S=t[u+"a"],C=t[l+"a"];d=Math.abs(S.r2c(S.range[1])-S.r2c(S.range[0]));var E=r.getDistanceFunction(i,c,f,function(t){return(c(t)+f(t))/2});if(r.getClosest(h,E,t),!1!==t.index){g||(w=function(t){return Math.min(_(t),t.p-v.bargroupwidth/2)},A=function(t){return Math.max(x(t),t.p+v.bargroupwidth/2)});var O=t.index,P=h[O],L=p.base?P.b+P.s:P.s;t[l+"0"]=t[l+"1"]=C.c2p(P[l],!0),t[l+"LabelVal"]=L;var R=v.extents[v.extents.round(P.p)];return t[u+"0"]=S.c2p(g?w(P):R[0],!0),t[u+"1"]=S.c2p(g?A(P):R[1],!0),t[u+"LabelVal"]=P.p,t.spikeDistance=(T(P)+function(t){return k(_(t),x(t))}(P))/2+b-y,t[u+"Spike"]=S.c2p(P.p,!0),o(P,p,t),t.hovertemplate=p.hovertemplate,t}}function l(t,e){var n=e.mcc||t.marker.color,r=e.mlcc||t.marker.line.color,i=s(t,e);return a.opacity(n)?n:a.opacity(r)&&i?r:void 0}e.exports={hoverPoints:function(t,e,n,r){var a=u(t,e,n,r);if(a){var o=a.cd,s=o[0].trace,c=o[a.index];return a.color=l(s,c),i.getComponentMethod("errorbars","hoverInfo")(c,s,a),[a]}},hoverOnBars:u,getTraceColor:l}},{"../../components/color":42,"../../components/fx":81,"../../lib":160,"../../registry":243,"./helpers":258}],260:[function(t,e,n){"use strict";e.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":215,"../scatter/marker_colorbar":298,"./arrays_to_calcdata":252,"./attributes":253,"./calc":254,"./cross_trace_calc":256,"./defaults":257,"./hover":259,"./layout_attributes":261,"./layout_defaults":262,"./plot":263,"./select":264,"./style":266}],261:[function(t,e,n){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],262:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../plots/cartesian/axes"),a=t("../../lib"),o=t("./layout_attributes");e.exports=function(t,e,n){function s(n,r){return a.coerce(t,e,o,n,r)}for(var u=!1,l=!1,c=!1,f={},d=s("barmode"),h=0;h<n.length;h++){var p=n[h];if(r.traceIs(p,"bar")&&p.visible){if(u=!0,"group"===d){var v=p.xaxis+p.yaxis;f[v]&&(c=!0),f[v]=!0}if(p.visible&&"histogram"===p.type){var g=i.getFromId({_fullLayout:e},p["v"===p.orientation?"xaxis":"yaxis"]);"category"!==g.type&&(l=!0)}}}u?("overlay"!==d&&s("barnorm"),s("bargap",l&&!c?0:.2),s("bargroupgap")):delete e.barmode}},{"../../lib":160,"../../plots/cartesian/axes":204,"../../registry":243,"./layout_attributes":261}],263:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../lib"),o=t("../../lib/svg_text_utils"),s=t("../../components/color"),u=t("../../components/drawing"),l=t("../../registry"),c=t("../../plots/cartesian/axes").tickText,f=t("./style"),d=t("./helpers"),h=t("./attributes"),p=h.text,v=h.textposition,g=3;function m(t,e){return t<e?1:-1}function y(t,e,n,r,i,s,l,c,h,p){var m,y=e.xaxis,b=e.yaxis,k=t._fullLayout;function M(e,n,r){var i=a.ensureSingle(e,"text").text(n).attr({class:"bartext bartext-"+m,transform:"","text-anchor":"middle","data-notex":1}).call(u.font,r).call(o.convertToTspans,t);return i}var T=r[0].trace,S="h"===T.orientation,C=A(r,i,y,b);m=function(t,e){var n=d.getValue(t.textposition,e);return d.coerceEnumerated(v,n)}(T,i);var E="stack"===p.mode||"relative"===p.mode,O=r[i],P=!E||O._outmost;if(C&&"none"!==m&&(!O.isBlank&&s!==l&&c!==h||"auto"!==m&&"inside"!==m)){var L=k.font,R=f.getBarColor(r[i],T),D=f.getInsideTextFont(T,i,L,R),F=f.getOutsideTextFont(T,i,L),j=n.datum();S?"log"===y.type&&j.s0<=0&&(s=y.range[0]<y.range[1]?0:y._length):"log"===b.type&&j.s0<=0&&(c=b.range[0]<b.range[1]?b._length:0);var N,z,I,B,q,U,H=Math.abs(l-s)-2*g,W=Math.abs(h-c)-2*g;if("outside"===m&&(P||O.hasB||(m="inside")),"auto"===m)if(P){m="inside",N=M(n,C,D),z=u.bBox(N.node()),I=z.width,B=z.height;var G=I>0&&B>0,V=I<=H&&B<=W,Y=I<=W&&B<=H,Z=S?H>=I*(W/B):W>=B*(H/I);G&&(V||Y||Z)?m="inside":(m="outside",N.remove(),N=null)}else m="inside";!N&&(N=M(n,C,"outside"===m?F:D),z=u.bBox(N.node()),I=z.width,B=z.height,I<=0||B<=0)?N.remove():("outside"===m?(U="both"===T.constraintext||"outside"===T.constraintext,q=w(x(s,l,c,h,z,{isHorizontal:S,constrained:U,angle:T.textangle}))):(U="both"===T.constraintext||"inside"===T.constraintext,q=w(_(s,l,c,h,z,{isHorizontal:S,constrained:U,angle:T.textangle,anchor:T.insidetextanchor}))),N.attr("transform",q))}else n.select("text").remove()}function b(t){return"auto"===t?0:t}function _(t,e,n,r,i,a){var o=!!a.isHorizontal,s=!!a.constrained,u=a.angle||0,l=a.anchor||0,c=i.width,f=i.height,d=Math.abs(e-t),h=Math.abs(r-n),p=d>2*g&&h>2*g?g:0;d-=2*p,h-=2*p;var v="auto"===u,y=!1;if(!v||c<=d&&f<=h||!(c>d||f>h)||(c>h||f>d)&&c<f===d<h||(y=!0),y){var _=h;h=d,d=_}var x=b(u),w=Math.abs(Math.sin(Math.PI/180*x)),A=Math.abs(Math.cos(Math.PI/180*x)),k=Math.max(d*A,h*w),M=Math.max(d*w,h*A),T=s?Math.min(k/c,M/f):Math.max(A,w);T=Math.min(1,T);var S=(t+e)/2,C=(n+r)/2;if("middle"!==l){var E=T*(o!==y?f:c),O=T*(o!==y?c:f);p+=.5*(E*w+O*A),o?(p*=m(t,e),S="start"===l?t+p:e-p):(p*=m(n,r),C="start"===l?n+p:r-p)}var P=(i.left+i.right)/2,L=(i.top+i.bottom)/2;return y&&(x+=90),{textX:P,textY:L,targetX:S,targetY:C,scale:T,rotate:x}}function x(t,e,n,r,i,a){var o,s=!!a.isHorizontal,u=!!a.constrained,l=a.angle||0,c=i.width,f=i.height,d=Math.abs(e-t),h=Math.abs(r-n);o=s?h>2*g?g:0:d>2*g?g:0;var p=1;u&&(p=s?Math.min(1,h/f):Math.min(1,d/c));var v=b(l),y=Math.abs(Math.sin(Math.PI/180*v)),_=Math.abs(Math.cos(Math.PI/180*v)),x=p*(s?f:c),w=p*(s?c:f);o+=.5*(x*y+w*_);var A=(t+e)/2,k=(n+r)/2;s?A=e-o*m(e,t):k=r+o*m(n,r);var M=(i.left+i.right)/2,T=(i.top+i.bottom)/2;return{textX:M,textY:T,targetX:A,targetY:k,scale:p,rotate:v}}function w(t){var e,n=t.textX,r=t.textY,i=t.targetX,a=t.targetY,o=t.scale,s=t.rotate;o<1?e="scale("+o+") ":(o=1,e="");var u=i-o*n,l=a-o*r;return"translate("+u+" "+l+")"+e+(s?"rotate("+s+" "+n+" "+r+") ":"")}function A(t,e,n,r){var i,o=t[0].trace;return i=o.textinfo?function(t,e,n,r){var i=t[0].trace,o="h"===i.orientation,s="waterfall"===i.type,u="funnel"===i.type;function l(t){var e=o?n:r;return c(e,+t,!0).text}var f,d,h=i.textinfo,p=t[e],v=h.split("+"),g=[],m=function(t){return-1!==v.indexOf(t)};if(m("label")&&g.push((d=t[e].p,c(o?r:n,d,!0).text)),m("text")&&(0===(f=a.castOption(i,p.i,"text"))||f)&&g.push(f),s){var y=+p.rawS||p.s,b=p.v,_=b-y;m("initial")&&g.push(l(_)),m("delta")&&g.push(l(y)),m("final")&&g.push(l(b))}if(u){m("value")&&g.push(l(p.s));var x=0;m("percent initial")&&x++,m("percent previous")&&x++,m("percent total")&&x++;var w=x>1;m("percent initial")&&(f=a.formatPercent(p.begR),w&&(f+=" of initial"),g.push(f)),m("percent previous")&&(f=a.formatPercent(p.difR),w&&(f+=" of previous"),g.push(f)),m("percent total")&&(f=a.formatPercent(p.sumR),w&&(f+=" of total"),g.push(f))}return g.join("<br>")}(t,e,n,r):d.getValue(o.text,e),d.coerceString(p,i)}e.exports={plot:function(t,e,n,o,c){var f=e.xaxis,h=e.yaxis,p=t._fullLayout;c||(c={mode:p.barmode,norm:p.barmode,gap:p.bargap,groupgap:p.bargroupgap});var v=a.makeTraceGroups(o,n,"trace bars").each(function(n){var o=r.select(this),l=n[0].trace,p="waterfall"===l.type,v="funnel"===l.type,g="bar"===l.type,b=g||v,_=0;p&&l.connector.visible&&"between"===l.connector.mode&&(_=l.connector.line.width/2);var x="h"===l.orientation,w=a.ensureSingle(o,"g","points"),A=w.selectAll("g.point").data(a.identity);A.enter().append("g").classed("point",!0),A.exit().remove(),A.each(function(o,p){var v,g,w=r.select(this),A=function(t,e,n,r){var i=[],a=[],o=r?e:n,s=r?n:e;return i[0]=o.c2p(t.s0,!0),a[0]=s.c2p(t.p0,!0),i[1]=o.c2p(t.s1,!0),a[1]=s.c2p(t.p1,!0),r?[i,a]:[a,i]}(o,f,h,x),k=A[0][0],M=A[0][1],T=A[1][0],S=A[1][1],C=k===M||T===S||!i(k)||!i(M)||!i(T)||!i(S);if(C&&b&&d.getLineWidth(l,o)&&(x?M-k===0:S-T===0)&&(C=!1),o.isBlank=C,_&&(x?(k-=m(k,M)*_,M+=m(k,M)*_):(T-=m(T,S)*_,S+=m(T,S)*_)),"waterfall"===l.type){if(!C){var E=l[o.dir].marker;v=E.line.width,g=E.color}}else v=d.getLineWidth(l,o),g=o.mc||l.marker.color;var O=r.round(v/2%1,2);function P(t){return 0===c.gap&&0===c.groupgap?r.round(Math.round(t)-O,2):t}if(!t._context.staticPlot){var L=s.opacity(g),R=L<1||v>.01?P:function(t,e){return Math.abs(t-e)>=2?P(t):t>e?Math.ceil(t):Math.floor(t)};k=R(k,M),M=R(M,k),T=R(T,S),S=R(S,T)}a.ensureSingle(w,"path").style("vector-effect","non-scaling-stroke").attr("d",C?"M0,0Z":"M"+k+","+T+"V"+S+"H"+M+"V"+T+"Z").call(u.setClipUrl,e.layerClipId,t),y(t,e,w,n,p,k,M,T,S,c),e.layerClipId&&u.hideOutsideRangePoint(o,w.select("text"),f,h,l.xcalendar,l.ycalendar)});var k=!1===l.cliponaxis;u.setClipUrl(o,k?null:e.layerClipId,t)});l.getComponentMethod("errorbars","plot")(t,v,e)},getTransform:w,toMoveInsideBar:_,toMoveOutsideBar:x}},{"../../components/color":42,"../../components/drawing":63,"../../lib":160,"../../lib/svg_text_utils":181,"../../plots/cartesian/axes":204,"../../registry":243,"./attributes":253,"./helpers":258,"./style":266,d3:7,"fast-isnumeric":9}],264:[function(t,e,n){"use strict";function r(t,e,n,r,i){var a=e.c2p(r?t.s0:t.p0,!0),o=e.c2p(r?t.s1:t.p1,!0),s=n.c2p(r?t.p0:t.s0,!0),u=n.c2p(r?t.p1:t.s1,!0);return i?[(a+o)/2,(s+u)/2]:r?[o,(s+u)/2]:[(a+o)/2,u]}e.exports=function(t,e){var n,i=t.cd,a=t.xaxis,o=t.yaxis,s=i[0].trace,u="funnel"===s.type,l="h"===s.orientation,c=[];if(!1===e)for(n=0;n<i.length;n++)i[n].selected=0;else for(n=0;n<i.length;n++){var f=i[n],d="ct"in f?f.ct:r(f,a,o,l,u);e.contains(d,!1,n,t)?(c.push({pointNumber:n,x:a.c2d(f.x),y:o.c2d(f.y)}),f.selected=1):f.selected=0}return c}},{}],265:[function(t,e,n){"use strict";e.exports=a;var r=t("../../lib").distinctVals,i=t("../../constants/numerical").BADNUM;function a(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,a=[],o=0;o<t.length;o++){for(var s=t[o],u=0;u<s.length;u++){var l=s[u];l.p!==i&&a.push(l.p)}s[0]&&s[0].width1&&(n=Math.min(s[0].width1,n))}this.positions=a;var c=r(a);this.distinctPositions=c.vals,1===c.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(c.minDiff,n),this.binWidth=this.minDiff,this.bins={}}a.prototype.put=function(t,e){var n=this.getLabel(t,e),r=this.bins[n]||0;return this.bins[n]=r+e,r},a.prototype.get=function(t,e){var n=this.getLabel(t,e);return this.bins[n]||0},a.prototype.getLabel=function(t,e){var n=e<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?t:Math.round(t/this.binWidth);return n+r}},{"../../constants/numerical":140,"../../lib":160}],266:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/color"),a=t("../../components/drawing"),o=t("../../lib"),s=t("../../registry"),u=t("./attributes"),l=u.textfont,c=u.insidetextfont,f=u.outsidetextfont,d=t("./helpers");function h(t,e,n){a.pointStyle(t.selectAll("path"),e,n),p(t,e,n)}function p(t,e,n){t.selectAll("text").each(function(t){var i=r.select(this),o=g(i,t,e,n);a.font(i,o)})}function v(t,e,n){a.selectedPointStyle(t.selectAll("path"),e),function(t,e,n){t.each(function(t){var i,s=r.select(this);if(t.selected){i=o.extendFlat({},g(s,t,e,n));var u=e.selected.textfont&&e.selected.textfont.color;u&&(i.color=u),a.font(s,i)}else a.selectedTextStyle(s,e)})}(t.selectAll("text"),e,n)}function g(t,e,n,r){var i=r._fullLayout.font,a=n.textfont;if(t.classed("bartext-inside")){var o=x(e,n);a=y(n,e.i,i,o)}else t.classed("bartext-outside")&&(a=b(n,e.i,i));return a}function m(t,e,n){return _(l,t.textfont,e,n)}function y(t,e,n,r){var a=m(t,e,n),o=void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e];return o&&(a={color:i.contrast(r),family:a.family,size:a.size}),_(c,t.insidetextfont,e,a)}function b(t,e,n){var r=m(t,e,n);return _(f,t.outsidetextfont,e,r)}function _(t,e,n,r){e=e||{};var i=d.getValue(e.family,n),a=d.getValue(e.size,n),o=d.getValue(e.color,n);return{family:d.coerceString(t.family,i,r.family),size:d.coerceNumber(t.size,a,r.size),color:d.coerceColor(t.color,o,r.color)}}function x(t,e){return"waterfall"===e.type?e[t.dir].marker.color:t.mc||e.marker.color}e.exports={style:function(t){var e=r.select(t).selectAll("g.barlayer").selectAll("g.trace"),n=e.size(),i=t._fullLayout;e.style("opacity",function(t){return t[0].trace.opacity}).each(function(t){("stack"===i.barmode&&n>1||0===i.bargap&&0===i.bargroupgap&&!t[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){var n=r.select(this),i=e[0].trace;h(n,i,t)}),s.getComponentMethod("errorbars","style")(e)},styleTextPoints:p,styleOnSelect:function(t,e,n){var r=e[0].trace;r.selectedpoints?v(n,r,t):(h(n,r,t),s.getComponentMethod("errorbars","style")(n))},getInsideTextFont:y,getOutsideTextFont:b,getBarColor:x}},{"../../components/color":42,"../../components/drawing":63,"../../lib":160,"../../registry":243,"./attributes":253,"./helpers":258,d3:7}],267:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults");e.exports=function(t,e,n,o,s){n("marker.color",o),i(t,"marker")&&a(t,e,s,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),i(t,"marker.line")&&a(t,e,s,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":42,"../../components/colorscale/defaults":52,"../../components/colorscale/helpers":53}],268:[function(t,e,n){"use strict";var r=t("../../plots/attributes"),i=t("../../plots/domain").attributes,a=t("../../plots/font_attributes"),o=t("../../components/color/attributes"),s=t("../../components/fx/hovertemplate_attributes"),u=t("../../lib/extend").extendFlat,l=a({editType:"plot",arrayOk:!0,colorEditType:"plot"});e.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:u({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:u({},l,{}),insidetextfont:u({},l,{}),outsidetextfont:u({},l,{}),title:{text:{valType:"string",dflt:"",editType:"plot"},font:u({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:u({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":41,"../../components/fx/hovertemplate_attributes":80,"../../lib/extend":155,"../../plots/attributes":201,"../../plots/domain":229,"../../plots/font_attributes":230}],269:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../plots/get_data").getModuleCalcData;n.name="pie",n.plot=function(t){var e=r.getModule("pie"),n=i(t.calcdata,e)[0];e.plot(t,n)},n.clean=function(t,e,n,r){var i=r._has&&r._has("pie"),a=e._has&&e._has("pie");i&&!a&&r._pielayer.selectAll("g.trace").remove()}},{"../../plots/get_data":232,"../../registry":243}],270:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib").isArrayOrTypedArray,a=t("tinycolor2"),o=t("../../components/color"),s=t("./helpers"),u=t("../../lib").isValidTextValue,l={};function c(t){return function(e,n){return!!e&&!!(e=a(e)).isValid()&&(e=o.addOpacity(e,e.getAlpha()),t[n]||(t[n]=e),e)}}function f(t,e){var n,r=JSON.stringify(t),i=e[r];if(!i){for(i=t.slice(),n=0;n<t.length;n++)i.push(a(t[n]).lighten(20).toHexString());for(n=0;n<t.length;n++)i.push(a(t[n]).darken(20).toHexString());e[r]=i}return i}e.exports={calc:function(t,e){var n,a,o=[],l=t._fullLayout,f=l.hiddenlabels||[],d=e.labels,h=e.marker.colors||[],p=e.values,v=i(p)&&p.length;if(e.dlabel)for(d=new Array(p.length),n=0;n<p.length;n++)d[n]=String(e.label0+n*e.dlabel);var g={},m=c(l["_"+e.type+"colormap"]),y=(v?p:d).length,b=0,_=!1;for(n=0;n<y;n++){var x,w,A;if(v){if(x=p[n],!r(x))continue;if((x=+x)<0)continue}else x=1;void 0!==(w=d[n])&&""!==w||(w=n),w=String(w);var k=g[w];void 0===k?(g[w]=o.length,(A=-1!==f.indexOf(w))||(b+=x),o.push({v:x,label:w,color:m(h[n],w),i:n,pts:[n],hidden:A})):(_=!0,(a=o[k]).v+=x,a.pts.push(n),a.hidden||(b+=x),!1===a.color&&h[n]&&(a.color=m(h[n],w)))}("funnelarea"===e.type?_:e.sort)&&o.sort(function(t,e){return e.v-t.v}),o[0]&&(o[0].vTotal=b);var M=e.textinfo;if(M&&"none"!==M){var T,S=M.split("+"),C=function(t){return-1!==S.indexOf(t)},E=C("label"),O=C("text"),P=C("value"),L=C("percent"),R=l.separators;for(n=0;n<o.length;n++){if(a=o[n],T=E?[a.label]:[],O){var D=s.getFirstFilled(e.text,a.pts);u(D)&&T.push(D)}P&&T.push(s.formatPieValue(a.v,R)),L&&T.push(s.formatPiePercent(a.v/b,R)),a.text=T.join("<br>")}}return o},crossTraceCalc:function(t,e){var n=(e||{}).type;n||(n="pie");var r=t._fullLayout,i=t.calcdata,a=r[n+"colorway"],o=r["_"+n+"colormap"];r["extend"+n+"colors"]&&(a=f(a,l));for(var s=0,u=0;u<i.length;u++){var c=i[u],d=c[0].trace.type;if(d===n)for(var h=0;h<c.length;h++){var p=c[h];!1===p.color&&(o[p.label]?p.color=o[p.label]:(o[p.label]=p.color=a[s%a.length],s++))}}},makePullColorFn:c,generateExtendedColors:f}},{"../../components/color":42,"../../lib":160,"./helpers":273,"fast-isnumeric":9,tinycolor2:25}],271:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),a=t("../../plots/domain").defaults,o=t("../bar/defaults").handleText;e.exports=function(t,e,n,s){function u(n,a){return r.coerce(t,e,i,n,a)}var l,c=u("values"),f=r.isArrayOrTypedArray(c),d=u("labels");if(Array.isArray(d)?(l=d.length,f&&(l=Math.min(l,c.length))):f&&(l=c.length,u("label0"),u("dlabel")),l){e._length=l;var h=u("marker.line.width");h&&u("marker.line.color"),u("marker.colors"),u("scalegroup");var p=u("text"),v=u("textinfo",Array.isArray(p)?"text+percent":"percent");if(u("hovertext"),u("hovertemplate"),v&&"none"!==v){var g=u("textposition");o(t,e,s,u,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}a(e,s,u);var m=u("hole"),y=u("title.text");if(y){var b=u("title.position",m?"middle center":"top center");m||"middle center"!==b||(e.title.position="top center"),r.coerceFont(u,"title.font",s.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else e.visible=!1}},{"../../lib":160,"../../plots/domain":229,"../bar/defaults":257,"./attributes":268}],272:[function(t,e,n){"use strict";var r=t("../../components/fx/helpers").appendArrayMultiPointValues;e.exports=function(t,e){var n={curveNumber:e.index,pointNumbers:t.pts,data:e._input,fullData:e,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,v:t.v};return 1===t.pts.length&&(n.pointNumber=n.i=t.pts[0]),r(n,e,t.pts),"funnelarea"===e.type&&(delete n.v,delete n.i),n}},{"../../components/fx/helpers":77}],273:[function(t,e,n){"use strict";var r=t("../../lib");n.formatPiePercent=function(t,e){var n=(100*t).toPrecision(3);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,e)+"%"},n.formatPieValue=function(t,e){var n=t.toPrecision(10);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,e)},n.getFirstFilled=function(t,e){if(Array.isArray(t))for(var n=0;n<e.length;n++){var r=t[e[n]];if(r||0===r)return r}},n.castOption=function(t,e){return Array.isArray(t)?n.getFirstFilled(t,e):t||void 0}},{"../../lib":160}],274:[function(t,e,n){"use strict";e.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":268,"./base_plot":269,"./calc":270,"./defaults":271,"./layout_attributes":275,"./layout_defaults":276,"./plot":277,"./style":278,"./style_one":279}],275:[function(t,e,n){"use strict";e.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],276:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e){function n(n,a){return r.coerce(t,e,i,n,a)}n("hiddenlabels"),n("piecolorway",e.colorway),n("extendpiecolors")}},{"../../lib":160,"./layout_attributes":275}],277:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/fx"),a=t("../../components/color"),o=t("../../components/drawing"),s=t("../../lib"),u=t("../../lib/svg_text_utils"),l=t("./helpers"),c=t("./event_data");function f(t,e,n){var a=n[0],o=a.trace,u=a.cx,f=a.cy;"_hasHoverLabel"in o||(o._hasHoverLabel=!1),"_hasHoverEvent"in o||(o._hasHoverEvent=!1),t.on("mouseover",function(t){var n=e._fullLayout,d=e._fullData[o.index];if(!e._dragging&&!1!==n.hovermode){var h=d.hoverinfo;if(Array.isArray(h)&&(h=i.castHoverinfo({hoverinfo:[l.castOption(h,t.pts)],_module:o._module},n,0)),"all"===h&&(h="label+text+value+percent+name"),d.hovertemplate||"none"!==h&&"skip"!==h&&h){var p=t.rInscribed||0,v=u+t.pxmid[0]*(1-p),g=f+t.pxmid[1]*(1-p),m=n.separators,y=[];if(h&&-1!==h.indexOf("label")&&y.push(t.label),t.text=l.castOption(d.hovertext||d.text,t.pts),h&&-1!==h.indexOf("text")){var b=t.text;s.isValidTextValue(b)&&y.push(b)}t.value=t.v,t.valueLabel=l.formatPieValue(t.v,m),h&&-1!==h.indexOf("value")&&y.push(t.valueLabel),t.percent=t.v/a.vTotal,t.percentLabel=l.formatPiePercent(t.percent,m),h&&-1!==h.indexOf("percent")&&y.push(t.percentLabel);var _=d.hoverlabel,x=_.font;i.loneHover({trace:o,x0:v-p*a.r,x1:v+p*a.r,y:g,text:y.join("<br>"),name:d.hovertemplate||-1!==h.indexOf("name")?d.name:void 0,idealAlign:t.pxmid[0]<0?"left":"right",color:l.castOption(_.bgcolor,t.pts)||t.color,borderColor:l.castOption(_.bordercolor,t.pts),fontFamily:l.castOption(x.family,t.pts),fontSize:l.castOption(x.size,t.pts),fontColor:l.castOption(x.color,t.pts),nameLength:l.castOption(_.namelength,t.pts),textAlign:l.castOption(_.align,t.pts),hovertemplate:l.castOption(d.hovertemplate,t.pts),hovertemplateLabels:t,eventData:[c(t,d)]},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e}),o._hasHoverLabel=!0}o._hasHoverEvent=!0,e.emit("plotly_hover",{points:[c(t,d)],event:r.event})}}),t.on("mouseout",function(t){var n=e._fullLayout,a=e._fullData[o.index],s=r.select(this).datum();o._hasHoverEvent&&(t.originalEvent=r.event,e.emit("plotly_unhover",{points:[c(s,a)],event:r.event}),o._hasHoverEvent=!1),o._hasHoverLabel&&(i.loneUnhover(n._hoverlayer.node()),o._hasHoverLabel=!1)}),t.on("click",function(t){var n=e._fullLayout,a=e._fullData[o.index];e._dragging||!1===n.hovermode||(e._hoverdata=[c(t,a)],i.click(e,r.event))})}function d(t,e,n){var r=l.castOption(t.insidetextfont.color,e.pts);!r&&t._input.textfont&&(r=l.castOption(t._input.textfont.color,e.pts));var i=l.castOption(t.insidetextfont.family,e.pts)||l.castOption(t.textfont.family,e.pts)||n.family,o=l.castOption(t.insidetextfont.size,e.pts)||l.castOption(t.textfont.size,e.pts)||n.size;return{color:r||a.contrast(e.color),family:i,size:o}}function h(t,e){for(var n,r,i=0;i<t.length;i++)if(n=t[i][0],(r=n.trace).title.text){var a=r.title.text;r._meta&&(a=s.templateString(a,r._meta));var l=o.tester.append("text").attr("data-notex",1).text(a).call(o.font,r.title.font).call(u.convertToTspans,e),c=o.bBox(l.node(),!0);n.titleBox={width:c.width,height:c.height},l.remove()}}function p(t,e,n){var r=Math.sqrt(t.width*t.width+t.height*t.height),i=t.width/t.height,a=e.halfangle,o=e.ring,s=e.rInscribed,u=n.r||e.rpx1,l={scale:s*u*2/r,rCenter:1-s,rotate:0};if(l.scale>=1)return l;var c=i+1/(2*Math.tan(a)),f=u*Math.min(1/(Math.sqrt(c*c+.5)+c),o/(Math.sqrt(i*i+o/2)+i)),d={scale:2*f/t.height,rCenter:Math.cos(f/u)-f*i/u,rotate:(180/Math.PI*e.midangle+720)%180-90},h=1/i,p=h+1/(2*Math.tan(a)),v=u*Math.min(1/(Math.sqrt(p*p+.5)+p),o/(Math.sqrt(h*h+o/2)+h)),g={scale:2*v/t.width,rCenter:Math.cos(v/u)-v/i/u,rotate:(180/Math.PI*e.midangle+810)%180-90},m=g.scale>d.scale?g:d;return l.scale<1&&m.scale>l.scale?m:l}function v(t,e){return t.v!==e.vTotal||e.trace.hole?Math.min(1/(1+1/Math.sin(t.halfangle)),t.ring/2):1}function g(t,e){var n=e.pxmid[0],r=e.pxmid[1],i=t.width/2,a=t.height/2;return n<0&&(i*=-1),r<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(a)*(i>0?1:-1)/2,y:a/(1+n*n/(r*r)),outside:!0}}function m(t,e){var n,r=1,i=1,a=t.trace,o={x:t.cx,y:t.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,n=b(a),-1!==a.title.position.indexOf("top")?(o.y-=(1+n)*t.r,s.ty-=t.titleBox.height):-1!==a.title.position.indexOf("bottom")&&(o.y+=(1+n)*t.r);var u,l,c=(u=t.r,l=t.trace.aspectratio,u/(void 0===l?1:l)),f=e.w*(a.domain.x[1]-a.domain.x[0])/2;return-1!==a.title.position.indexOf("left")?(f+=c,o.x-=(1+n)*c,s.tx+=t.titleBox.width/2):-1!==a.title.position.indexOf("center")?f*=2:-1!==a.title.position.indexOf("right")&&(f+=c,o.x+=(1+n)*c,s.tx-=t.titleBox.width/2),r=f/t.titleBox.width,i=y(t,e)/t.titleBox.height,{x:o.x,y:o.y,scale:Math.min(r,i),tx:s.tx,ty:s.ty}}function y(t,e){var n=t.trace,r=e.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(t.titleBox.height,r/2)}function b(t){var e,n=t.pull;if(!n)return 0;if(Array.isArray(n))for(n=0,e=0;e<t.pull.length;e++)t.pull[e]>n&&(n=t.pull[e]);return n}function _(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r][0],a=i.trace,o=a.domain,s=e.w*(o.x[1]-o.x[0]),u=e.h*(o.y[1]-o.y[0]);a.title.text&&"middle center"!==a.title.position&&(u-=y(i,e));var l=s/2,c=u/2;"funnelarea"!==a.type||a.scalegroup||(c/=a.aspectratio),i.r=Math.min(l,c)/(1+b(a)),i.cx=e.l+e.w*(a.domain.x[1]+a.domain.x[0])/2,i.cy=e.t+e.h*(1-a.domain.y[0])-u/2,a.title.text&&-1!==a.title.position.indexOf("bottom")&&(i.cy-=y(i,e)),a.scalegroup&&-1===n.indexOf(a.scalegroup)&&n.push(a.scalegroup)}!function(t,e){for(var n,r,i,a=0;a<e.length;a++){var o=1/0,s=e[a];for(r=0;r<t.length;r++)if(n=t[r][0],(i=n.trace).scalegroup===s){var u;if("pie"===i.type)u=n.r*n.r;else if("funnelarea"===i.type){var l,c;i.aspectratio>1?(l=n.r,c=l/i.aspectratio):(c=n.r,l=c*i.aspectratio),l*=(1+i.baseratio)/2,u=l*c}o=Math.min(o,u/n.vTotal)}for(r=0;r<t.length;r++)if(n=t[r][0],(i=n.trace).scalegroup===s){var f=o*n.vTotal;"funnelarea"===i.type&&(f/=(1+i.baseratio)/2,f/=i.aspectratio),n.r=Math.sqrt(f)}}}(t,n)}e.exports={plot:function(t,e){var n=t._fullLayout;h(e,t),_(e,n._size);var i=s.makeTraceGroups(n._pielayer,e,"trace").each(function(e){var i=r.select(this),c=e[0],h=c.trace;!function(t){var e,n,r,i=t[0],a=i.trace,o=a.rotation*Math.PI/180,s=2*Math.PI/i.vTotal,u="px0",l="px1";if("counterclockwise"===a.direction){for(e=0;e<t.length&&t[e].hidden;e++);if(e===t.length)return;o+=s*t[e].v,s*=-1,u="px1",l="px0"}function c(t){return[i.r*Math.sin(t),-i.r*Math.cos(t)]}for(r=c(o),e=0;e<t.length;e++)(n=t[e]).hidden||(n[u]=r,o+=s*n.v/2,n.pxmid=c(o),n.midangle=o,o+=s*n.v/2,r=c(o),n[l]=r,n.largeArc=n.v>i.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/i.vTotal,.5),n.ring=1-a.hole,n.rInscribed=v(n,i))}(e),i.attr("stroke-linejoin","round"),i.each(function(){var i=r.select(this).selectAll("g.slice").data(e);i.enter().append("g").classed("slice",!0),i.exit().remove();var v=[[[],[]],[[],[]]],y=!1;i.each(function(n){if(n.hidden)r.select(this).selectAll("path,g").remove();else{n.pointNumber=n.i,n.curveNumber=h.index,v[n.pxmid[1]<0?0:1][n.pxmid[0]<0?0:1].push(n);var i=c.cx,a=c.cy,m=r.select(this),b=m.selectAll("path.surface").data([n]);if(b.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),m.call(f,t,e),h.pull){var _=+l.castOption(h.pull,n.pts)||0;_>0&&(i+=_*n.pxmid[0],a+=_*n.pxmid[1])}n.cxFinal=i,n.cyFinal=a;var x=h.hole;if(n.v===c.vTotal){var w="M"+(i+n.px0[0])+","+(a+n.px0[1])+S(n.px0,n.pxmid,!0,1)+S(n.pxmid,n.px0,!0,1)+"Z";x?b.attr("d","M"+(i+x*n.px0[0])+","+(a+x*n.px0[1])+S(n.px0,n.pxmid,!1,x)+S(n.pxmid,n.px0,!1,x)+"Z"+w):b.attr("d",w)}else{var A=S(n.px0,n.px1,!0,1);if(x){var k=1-x;b.attr("d","M"+(i+x*n.px1[0])+","+(a+x*n.px1[1])+S(n.px1,n.px0,!1,x)+"l"+k*n.px0[0]+","+k*n.px0[1]+A+"Z")}else b.attr("d","M"+i+","+a+"l"+n.px0[0]+","+n.px0[1]+A+"Z")}var M=l.castOption(h.textposition,n.pts),T=m.selectAll("g.slicetext").data(n.text&&"none"!==M?[0]:[]);T.enter().append("g").classed("slicetext",!0),T.exit().remove(),T.each(function(){var e=s.ensureSingle(r.select(this),"text","",function(t){t.attr("data-notex",1)});e.text(n.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,"outside"===M?function(t,e,n){var r=l.castOption(t.outsidetextfont.color,e.pts)||l.castOption(t.textfont.color,e.pts)||n.color,i=l.castOption(t.outsidetextfont.family,e.pts)||l.castOption(t.textfont.family,e.pts)||n.family,a=l.castOption(t.outsidetextfont.size,e.pts)||l.castOption(t.textfont.size,e.pts)||n.size;return{color:r,family:i,size:a}}(h,n,t._fullLayout.font):d(h,n,t._fullLayout.font)).call(u.convertToTspans,t);var f,v=o.bBox(e.node());"outside"===M?f=g(v,n):(f=p(v,n,c),"auto"===M&&f.scale<1&&(e.call(o.font,h.outsidetextfont),h.outsidetextfont.family===h.insidetextfont.family&&h.outsidetextfont.size===h.insidetextfont.size||(v=o.bBox(e.node())),f=g(v,n)));var m=i+n.pxmid[0]*f.rCenter+(f.x||0),b=a+n.pxmid[1]*f.rCenter+(f.y||0);f.outside&&(n.yLabelMin=b-v.height/2,n.yLabelMid=b,n.yLabelMax=b+v.height/2,n.labelExtraX=0,n.labelExtraY=0,y=!0),e.attr("transform","translate("+m+","+b+")"+(f.scale<1?"scale("+f.scale+")":"")+(f.rotate?"rotate("+f.rotate+")":"")+"translate("+-(v.left+v.right)/2+","+-(v.top+v.bottom)/2+")")})}function S(t,e,r,i){var a=i*(e[0]-t[0]),o=i*(e[1]-t[1]);return"a"+i*c.r+","+i*c.r+" 0 "+n.largeArc+(r?" 1 ":" 0 ")+a+","+o}});var b=r.select(this).selectAll("g.titletext").data(h.title.text?[0]:[]);b.enter().append("g").classed("titletext",!0),b.exit().remove(),b.each(function(){var e,i=s.ensureSingle(r.select(this),"text","",function(t){t.attr("data-notex",1)}),a=h.title.text;h._meta&&(a=s.templateString(a,h._meta)),i.text(a).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,h.title.font).call(u.convertToTspans,t),e="middle center"===h.title.position?function(t){var e=Math.sqrt(t.titleBox.width*t.titleBox.width+t.titleBox.height*t.titleBox.height);return{x:t.cx,y:t.cy,scale:t.trace.hole*t.r*2/e,tx:0,ty:-t.titleBox.height/2+t.trace.title.font.size}}(c):m(c,n._size),i.attr("transform","translate("+e.x+","+e.y+")"+(e.scale<1?"scale("+e.scale+")":"")+"translate("+e.tx+","+e.ty+")")}),y&&function(t,e){var n,r,i,a,o,s,u,c,f,d,h,p,v;function g(t,e){return t.pxmid[1]-e.pxmid[1]}function m(t,e){return e.pxmid[1]-t.pxmid[1]}function y(t,n){n||(n={});var i,c,f,h,p,v,g=n.labelExtraY+(r?n.yLabelMax:n.yLabelMin),m=r?t.yLabelMin:t.yLabelMax,y=r?t.yLabelMax:t.yLabelMin,b=t.cyFinal+o(t.px0[1],t.px1[1]),_=g-m;if(_*u>0&&(t.labelExtraY=_),Array.isArray(e.pull))for(c=0;c<d.length;c++)(f=d[c])===t||(l.castOption(e.pull,t.pts)||0)>=(l.castOption(e.pull,f.pts)||0)||((t.pxmid[1]-f.pxmid[1])*u>0?(h=f.cyFinal+o(f.px0[1],f.px1[1]),(_=h-m-t.labelExtraY)*u>0&&(t.labelExtraY+=_)):(y+t.labelExtraY-b)*u>0&&(i=3*s*Math.abs(c-d.indexOf(t)),p=f.cxFinal+a(f.px0[0],f.px1[0]),(v=p+i-(t.cxFinal+t.pxmid[0])-t.labelExtraX)*s>0&&(t.labelExtraX+=v)))}for(r=0;r<2;r++)for(i=r?g:m,o=r?Math.max:Math.min,u=r?1:-1,n=0;n<2;n++){for(a=n?Math.max:Math.min,s=n?1:-1,(c=t[r][n]).sort(i),f=t[1-r][n],d=f.concat(c),p=[],h=0;h<c.length;h++)void 0!==c[h].yLabelMid&&p.push(c[h]);for(v=!1,h=0;r&&h<f.length;h++)if(void 0!==f[h].yLabelMid){v=f[h];break}for(h=0;h<p.length;h++){var b=h&&p[h-1];v&&!h&&(b=v),y(p[h],b)}}}(v,h),function(t,e){t.each(function(t){var n=r.select(this);if(t.labelExtraX||t.labelExtraY){var i=n.select("g.slicetext text");i.attr("transform","translate("+t.labelExtraX+","+t.labelExtraY+")"+i.attr("transform"));var o=t.cxFinal+t.pxmid[0],u=t.cyFinal+t.pxmid[1],l="M"+o+","+u,c=(t.yLabelMax-t.yLabelMin)*(t.pxmid[0]<0?-1:1)/4;if(t.labelExtraX){var f=t.labelExtraX*t.pxmid[1]/t.pxmid[0],d=t.yLabelMid+t.labelExtraY-(t.cyFinal+t.pxmid[1]);Math.abs(f)>Math.abs(d)?l+="l"+d*t.pxmid[0]/t.pxmid[1]+","+d+"H"+(o+t.labelExtraX+c):l+="l"+t.labelExtraX+","+f+"v"+(d-f)+"h"+c}else l+="V"+(t.yLabelMid+t.labelExtraY)+"h"+c;s.ensureSingle(n,"path","textline").call(a.stroke,e.outsidetextfont.color).attr({"stroke-width":Math.min(2,e.outsidetextfont.size/8),d:l,fill:"none"})}else n.select("path.textline").remove()})}(i,h)})});setTimeout(function(){i.selectAll("tspan").each(function(){var t=r.select(this);t.attr("dy")&&t.attr("dy",t.attr("dy"))})},0)},transformInsideText:p,determineInsideTextFont:d,positionTitleOutside:m,prerenderTitles:h,layoutAreas:_,attachFxHandlers:f}},{"../../components/color":42,"../../components/drawing":63,"../../components/fx":81,"../../lib":160,"../../lib/svg_text_utils":181,"./event_data":272,"./helpers":273,d3:7}],278:[function(t,e,n){"use strict";var r=t("d3"),i=t("./style_one");e.exports=function(t){t._fullLayout._pielayer.selectAll(".trace").each(function(t){var e=t[0],n=e.trace,a=r.select(this);a.style({opacity:n.opacity}),a.selectAll("path.surface").each(function(t){r.select(this).call(i,t,n)})})}},{"./style_one":279,d3:7}],279:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("./helpers").castOption;e.exports=function(t,e,n){var a=n.marker.line,o=i(a.color,e.pts)||r.defaultLine,s=i(a.width,e.pts)||0;t.style("stroke-width",s).call(r.fill,e.color).call(r.stroke,o)}},{"../../components/color":42,"./helpers":273}],280:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;r.mergeArray(e.text,t,"tx"),r.mergeArray(e.hovertext,t,"htx"),r.mergeArray(e.customdata,t,"data"),r.mergeArray(e.textposition,t,"tp"),e.textfont&&(r.mergeArrayCastPositive(e.textfont.size,t,"ts"),r.mergeArray(e.textfont.color,t,"tc"),r.mergeArray(e.textfont.family,t,"tf"));var i=e.marker;if(i){r.mergeArrayCastPositive(i.size,t,"ms"),r.mergeArrayCastPositive(i.opacity,t,"mo"),r.mergeArray(i.symbol,t,"mx"),r.mergeArray(i.color,t,"mc");var a=i.line;i.line&&(r.mergeArray(a.color,t,"mlc"),r.mergeArrayCastPositive(a.width,t,"mlw"));var o=i.gradient;o&&"none"!==o.type&&(r.mergeArray(o.type,t,"mgt"),r.mergeArray(o.color,t,"mgc"))}}},{"../../lib":160}],281:[function(t,e,n){"use strict";var r=t("../../components/fx/hovertemplate_attributes"),i=t("../../components/colorscale/attributes"),a=t("../../plots/font_attributes"),o=t("../../components/drawing/attributes").dash,s=t("../../components/drawing"),u=t("./constants"),l=t("../../lib/extend").extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:r({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:l({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:l({symbol:{valType:"enumerated",values:s.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:l({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},i("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},i("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:a({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":49,"../../components/drawing":63,"../../components/drawing/attributes":62,"../../components/fx/hovertemplate_attributes":80,"../../lib/extend":155,"../../plots/font_attributes":230,"./constants":285}],282:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../plots/cartesian/axes"),o=t("../../constants/numerical").BADNUM,s=t("./subtypes"),u=t("./colorscale_calc"),l=t("./arrays_to_calcdata"),c=t("./calc_selection");function f(t,e,n,r,i,o,u){var l=e._length,c=t._fullLayout,f=n._id,d=r._id,h=c._firstScatter[p(e)]===e.uid,g=(v(e,c,n,r)||{}).orientation,m=e.fill;n._minDtick=0,r._minDtick=0;var y={padded:!0},b={padded:!0};u&&(y.ppad=b.ppad=u);var _=l<2||i[0]!==i[l-1]||o[0]!==o[l-1];_&&("tozerox"===m||"tonextx"===m&&(h||"h"===g))?y.tozero=!0:(e.error_y||{}).visible||"tonexty"!==m&&"tozeroy"!==m&&(s.hasMarkers(e)||s.hasText(e))||(y.padded=!1,y.ppad=0),_&&("tozeroy"===m||"tonexty"===m&&(h||"v"===g))?b.tozero=!0:"tonextx"!==m&&"tozerox"!==m||(b.padded=!1),f&&(e._extremes[f]=a.findExtremes(n,i,y)),d&&(e._extremes[d]=a.findExtremes(r,o,b))}function d(t,e){if(s.hasMarkers(t)){var n,r=t.marker,o=1.6*(t.marker.sizeref||1);if(n="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/o),3)}:function(t){return Math.max((t||0)/o,3)},i.isArrayOrTypedArray(r.size)){var u={type:"linear"};a.setConvert(u);for(var l=u.makeCalcdata(t.marker,"size"),c=new Array(e),f=0;f<e;f++)c[f]=n(l[f]);return c}return n(r.size)}}function h(t,e){var n=p(e),r=t._firstScatter;r[n]||(r[n]=e.uid)}function p(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function v(t,e,n,r){var i=t.stackgroup;if(i){var a=e._scatterStackOpts[n._id+r._id][i],o="v"===a.orientation?r:n;return"linear"===o.type||"log"===o.type?a:void 0}}e.exports={calc:function(t,e){var n,s,p,g,m,y,b=t._fullLayout,_=a.getFromId(t,e.xaxis||"x"),x=a.getFromId(t,e.yaxis||"y"),w=_.makeCalcdata(e,"x"),A=x.makeCalcdata(e,"y"),k=e._length,M=new Array(k),T=e.ids,S=v(e,b,_,x),C=!1;h(b,e);var E,O="x",P="y";if(S)i.pushUnique(S.traceIndices,e._expandedIndex),(n="v"===S.orientation)?(P="s",E="x"):(O="s",E="y"),m="interpolate"===S.stackgaps;else{var L=d(e,k);f(t,e,_,x,w,A,L)}for(s=0;s<k;s++){var R=M[s]={},D=r(w[s]),F=r(A[s]);D&&F?(R[O]=w[s],R[P]=A[s]):S&&(n?D:F)?(R[E]=n?w[s]:A[s],R.gap=!0,m?(R.s=o,C=!0):R.s=0):R[O]=R[P]=o,T&&(R.id=String(T[s]))}if(l(M,e),u(t,e),c(M,e),S){for(s=0;s<M.length;)M[s][E]===o?M.splice(s,1):s++;if(i.sort(M,function(t,e){return t[E]-e[E]||t.i-e.i}),C){for(s=0;s<M.length-1&&M[s].gap;)s++;for((y=M[s].s)||(y=M[s].s=0),p=0;p<s;p++)M[p].s=y;for(g=M.length-1;g>s&&M[g].gap;)g--;for(y=M[g].s,p=M.length-1;p>g;p--)M[p].s=y;for(;s<g;)if(M[++s].gap){for(p=s+1;M[p].gap;)p++;for(var j=M[s-1][E],N=M[s-1].s,z=(M[p].s-N)/(M[p][E]-j);s<p;)M[s].s=N+(M[s][E]-j)*z,s++}}}return M},calcMarkerSize:d,calcAxisExpansion:f,setFirstScatter:h,getStackOpts:v}},{"../../constants/numerical":140,"../../lib":160,"../../plots/cartesian/axes":204,"./arrays_to_calcdata":280,"./calc_selection":283,"./colorscale_calc":284,"./subtypes":304,"fast-isnumeric":9}],283:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){r.isArrayOrTypedArray(e.selectedpoints)&&r.tagSelected(t,e)}},{"../../lib":160}],284:[function(t,e,n){"use strict";var r=t("../../components/colorscale/helpers").hasColorscale,i=t("../../components/colorscale/calc"),a=t("./subtypes");e.exports=function(t,e){a.hasLines(e)&&r(e,"line")&&i(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(e)&&(r(e,"marker")&&i(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),r(e,"marker.line")&&i(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":50,"../../components/colorscale/helpers":53,"./subtypes":304}],285:[function(t,e,n){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],286:[function(t,e,n){"use strict";var r=t("./calc");function i(t,e,n,r,i,a,o){i[r]=!0;var s={i:null,gap:!0,s:0};if(s[o]=n,t.splice(e,0,s),e&&n===t[e-1][o]){var u=t[e-1];s.s=u.s,s.i=u.i,s.gap=u.gap}else a&&(s.s=function(t,e,n,r){var i=t[e-1],a=t[e+1];return a?i?i.s+(a.s-i.s)*(n-i[r])/(a[r]-i[r]):a.s:i.s}(t,e,n,o));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}e.exports=function(t,e){var n=e.xaxis,a=e.yaxis,o=n._id+a._id,s=t._fullLayout._scatterStackOpts[o];if(s){var u,l,c,f,d,h,p,v,g,m,y,b,_,x,w,A=t.calcdata;for(var k in s){var M=(m=s[k]).traceIndices;if(M.length){for(y="interpolate"===m.stackgaps,b=m.groupnorm,"v"===m.orientation?(_="x",x="y"):(_="y",x="x"),w=new Array(M.length),u=0;u<w.length;u++)w[u]=!1;h=A[M[0]];var T=new Array(h.length);for(u=0;u<h.length;u++)T[u]=h[u][_];for(u=1;u<M.length;u++){for(d=A[M[u]],l=c=0;l<d.length;l++){for(p=d[l][_];p>T[c]&&c<T.length;c++)i(d,l,T[c],u,w,y,_),l++;if(p!==T[c]){for(f=0;f<u;f++)i(A[M[f]],c,p,f,w,y,_);T.splice(c,0,p)}c++}for(;c<T.length;c++)i(d,l,T[c],u,w,y,_),l++}var S=T.length;for(l=0;l<h.length;l++){for(v=h[l][x]=h[l].s,u=1;u<M.length;u++)(d=A[M[u]])[0].trace._rawLength=d[0].trace._length,d[0].trace._length=S,v+=d[l].s,d[l][x]=v;if(b)for(g=("fraction"===b?v:v/100)||1,u=0;u<M.length;u++){var C=A[M[u]][l];C[x]/=g,C.sNorm=C.s/g}}for(u=0;u<M.length;u++){var E=(d=A[M[u]])[0].trace,O=r.calcMarkerSize(E,E._rawLength),P=Array.isArray(O);if(O&&w[u]||P){var L=O;for(O=new Array(S),l=0;l<S;l++)O[l]=d[l].gap?0:P?L[d[l].i]:L}var R=new Array(S),D=new Array(S);for(l=0;l<S;l++)R[l]=d[l].x,D[l]=d[l].y;r.calcAxisExpansion(t,E,n,a,R,D,O),d[0].t.orientation=m.orientation}}}}}},{"./calc":282}],287:[function(t,e,n){"use strict";e.exports=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=e-1;i>=0;i--){var a=t[i];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}}},{}],288:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry"),a=t("./attributes"),o=t("./constants"),s=t("./subtypes"),u=t("./xy_defaults"),l=t("./stack_defaults"),c=t("./marker_defaults"),f=t("./line_defaults"),d=t("./line_shape_defaults"),h=t("./text_defaults"),p=t("./fillcolor_defaults");e.exports=function(t,e,n,v){function g(n,i){return r.coerce(t,e,a,n,i)}var m=u(t,e,v,g);if(m||(e.visible=!1),e.visible){var y=l(t,e,v,g),b=!y&&m<o.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",b),s.hasLines(e)&&(f(t,e,n,v,g),d(t,e,g),g("connectgaps"),g("line.simplify")),s.hasMarkers(e)&&c(t,e,n,v,g,{gradient:!0}),s.hasText(e)&&h(t,e,v,g);var _=[];(s.hasMarkers(e)||s.hasText(e))&&(g("cliponaxis"),g("marker.maxdisplayed"),_.push("points")),g("fill",y?y.fillDflt:"none"),"none"!==e.fill&&(p(t,e,n,g),s.hasLines(e)||d(t,e,g));var x=(e.line||{}).color,w=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||_.push("fills"),g("hoveron",_.join("+")||"points"),"fills"!==e.hoveron&&g("hovertemplate");var A=i.getComponentMethod("errorbars","supplyDefaults");A(t,e,x||w||n,{axis:"y"}),A(t,e,x||w||n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(e,g)}}},{"../../lib":160,"../../registry":243,"./attributes":281,"./constants":285,"./fillcolor_defaults":289,"./line_defaults":293,"./line_shape_defaults":295,"./marker_defaults":299,"./stack_defaults":302,"./subtypes":304,"./text_defaults":305,"./xy_defaults":306}],289:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../lib").isArrayOrTypedArray;e.exports=function(t,e,n,a){var o=!1;if(e.marker){var s=e.marker.color,u=(e.marker.line||{}).color;s&&!i(s)?o=s:u&&!i(u)&&(o=u)}a("fillcolor",r.addOpacity((e.line||{}).color||o||n,.5))}},{"../../components/color":42,"../../lib":160}],290:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("./subtypes");e.exports=function(t,e){var n,a;if("lines"===t.mode)return(n=t.line.color)&&r.opacity(n)?n:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var o=e.mcc||(t.marker||{}).color,s=e.mlcc||((t.marker||{}).line||{}).color;return(a=o&&r.opacity(o)?o:s&&r.opacity(s)&&(e.mlw||((t.marker||{}).line||{}).width)?s:"")?r.opacity(a)<.3?r.addOpacity(a,.3):a:(n=(t.line||{}).color)&&r.opacity(n)&&i.hasLines(t)&&t.line.width?n:t.fillcolor}},{"../../components/color":42,"./subtypes":304}],291:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/fx"),a=t("../../registry"),o=t("./get_trace_color"),s=t("../../components/color"),u=r.fillText;e.exports=function(t,e,n,l){var c=t.cd,f=c[0].trace,d=t.xa,h=t.ya,p=d.c2p(e),v=h.c2p(n),g=[p,v],m=f.hoveron||"",y=-1!==f.mode.indexOf("markers")?3:.5;if(-1!==m.indexOf("points")){var b=function(t){var e=Math.max(y,t.mrc||0),n=d.c2p(t.x)-p,r=h.c2p(t.y)-v;return Math.max(Math.sqrt(n*n+r*r)-e,1-y/e)},_=i.getDistanceFunction(l,function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,r=Math.abs(d.c2p(t.x)-p);return r<e?n*r/e:r-e+n},function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,r=Math.abs(h.c2p(t.y)-v);return r<e?n*r/e:r-e+n},b);if(i.getClosest(c,_,t),!1!==t.index){var x=c[t.index],w=d.c2p(x.x,!0),A=h.c2p(x.y,!0),k=x.mrc||1;t.index=x.i;var M=c[0].t.orientation,T=M&&(x.sNorm||x.s),S="h"===M?T:x.x,C="v"===M?T:x.y;return r.extendFlat(t,{color:o(f,x),x0:w-k,x1:w+k,xLabelVal:S,y0:A-k,y1:A+k,yLabelVal:C,spikeDistance:b(x),hovertemplate:f.hovertemplate}),u(x,f,t),a.getComponentMethod("errorbars","hoverInfo")(x,f,t),[t]}}if(-1!==m.indexOf("fills")&&f._polygons){var E,O,P,L,R,D,F,j,N,z=f._polygons,I=[],B=!1,q=1/0,U=-1/0,H=1/0,W=-1/0;for(E=0;E<z.length;E++)(P=z[E]).contains(g)&&(B=!B,I.push(P),H=Math.min(H,P.ymin),W=Math.max(W,P.ymax));if(B){H=Math.max(H,0),W=Math.min(W,h._length);var G=(H+W)/2;for(E=0;E<I.length;E++)for(L=I[E].pts,O=1;O<L.length;O++)j=L[O-1][1],N=L[O][1],j>G!==N>=G&&(D=L[O-1][0],F=L[O][0],N-j&&(R=D+(F-D)*(G-j)/(N-j),q=Math.min(q,R),U=Math.max(U,R)));q=Math.max(q,0),U=Math.min(U,d._length);var V=s.defaultLine;return s.opacity(f.fillcolor)?V=f.fillcolor:s.opacity((f.line||{}).color)&&(V=f.line.color),r.extendFlat(t,{distance:t.maxHoverDistance,x0:q,x1:U,y0:G,y1:G,color:V,hovertemplate:!1}),delete t.index,f.text&&!Array.isArray(f.text)?t.text=String(f.text):t.text=f.name,[t]}}}},{"../../components/color":42,"../../components/fx":81,"../../lib":160,"../../registry":243,"./get_trace_color":290}],292:[function(t,e,n){"use strict";var r=t("./subtypes");e.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":215,"./arrays_to_calcdata":280,"./attributes":281,"./calc":282,"./cross_trace_calc":286,"./cross_trace_defaults":287,"./defaults":288,"./hover":291,"./marker_colorbar":298,"./plot":300,"./select":301,"./style":303,"./subtypes":304}],293:[function(t,e,n){"use strict";var r=t("../../lib").isArrayOrTypedArray,i=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults");e.exports=function(t,e,n,o,s,u){var l=(t.marker||{}).color;if(s("line.color",n),i(t,"line"))a(t,e,o,s,{prefix:"line.",cLetter:"c"});else{var c=!r(l)&&l||n;s("line.color",c)}s("line.width"),(u||{}).noDash||s("line.dash")}},{"../../components/colorscale/defaults":52,"../../components/colorscale/helpers":53,"../../lib":160}],294:[function(t,e,n){"use strict";var r=t("../../constants/numerical"),i=r.BADNUM,a=r.LOG_CLIP,o=a+.5,s=a-.5,u=t("../../lib"),l=u.segmentsIntersect,c=u.constrain,f=t("./constants");e.exports=function(t,e){var n,r,a,d,h,p,v,g,m,y,b,_,x,w,A,k,M,T,S=e.xaxis,C=e.yaxis,E="log"===S.type,O="log"===C.type,P=S._length,L=C._length,R=e.connectGaps,D=e.baseTolerance,F=e.shape,j="linear"===F,N=e.fill&&"none"!==e.fill,z=[],I=f.minTolerance,B=t.length,q=new Array(B),U=0;function H(e){var n=t[e];if(!n)return!1;var r=S.c2p(n.x),a=C.c2p(n.y);if(r===i){if(E&&(r=S.c2p(n.x,!0)),r===i)return!1;O&&a===i&&(r*=Math.abs(S._m*L*(S._m>0?o:s)/(C._m*P*(C._m>0?o:s)))),r*=1e3}if(a===i){if(O&&(a=C.c2p(n.y,!0)),a===i)return!1;a*=1e3}return[r,a]}function W(t,e,n,r){var i=n-t,a=r-e,o=.5-t,s=.5-e,u=i*i+a*a,l=i*o+a*s;if(l>0&&l<u){var c=o*a-s*i;if(c*c<u)return!0}}function G(t,e){var n=t[0]/P,r=t[1]/L,i=Math.max(0,-n,n-1,-r,r-1);return i&&void 0!==M&&W(n,r,M,T)&&(i=0),i&&e&&W(n,r,e[0]/P,e[1]/L)&&(i=0),(1+f.toleranceGrowth*i)*D}function V(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}var Y,Z,X,$,J,K,Q,tt=f.maxScreensAway,et=-P*tt,nt=P*(1+tt),rt=-L*tt,it=L*(1+tt),at=[[et,rt,nt,rt],[nt,rt,nt,it],[nt,it,et,it],[et,it,et,rt]];function ot(t){if(t[0]<et||t[0]>nt||t[1]<rt||t[1]>it)return[c(t[0],et,nt),c(t[1],rt,it)]}function st(t,e){return t[0]===e[0]&&(t[0]===et||t[0]===nt)||t[1]===e[1]&&(t[1]===rt||t[1]===it)||void 0}function ut(t,e,n){return function(r,i){var a=ot(r),o=ot(i),s=[];if(a&&o&&st(a,o))return s;a&&s.push(a),o&&s.push(o);var l=2*u.constrain((r[t]+i[t])/2,e,n)-((a||r)[t]+(o||i)[t]);return l&&((a&&o?l>0===a[t]>o[t]?a:o:a||o)[t]+=l),s}}function lt(t){var e=t[0],n=t[1],r=e===q[U-1][0],i=n===q[U-1][1];if(!r||!i)if(U>1){var a=e===q[U-2][0],o=n===q[U-2][1];r&&(e===et||e===nt)&&a?o?U--:q[U-1]=t:i&&(n===rt||n===it)&&o?a?U--:q[U-1]=t:q[U++]=t}else q[U++]=t}function ct(t){q[U-1][0]!==t[0]&&q[U-1][1]!==t[1]&&lt([X,$]),lt(t),J=null,X=$=0}function ft(t){if(M=t[0]/P,T=t[1]/L,Y=t[0]<et?et:t[0]>nt?nt:0,Z=t[1]<rt?rt:t[1]>it?it:0,Y||Z){if(U)if(J){var e=Q(J,t);e.length>1&&(ct(e[0]),q[U++]=e[1])}else K=Q(q[U-1],t)[0],q[U++]=K;else q[U++]=[Y||t[0],Z||t[1]];var n=q[U-1];Y&&Z&&(n[0]!==Y||n[1]!==Z)?(J&&(X!==Y&&$!==Z?lt(X&&$?function(t,e){var n=e[0]-t[0],r=(e[1]-t[1])/n;return(t[1]*e[0]-e[1]*t[0])/n>0?[r>0?et:nt,it]:[r>0?nt:et,rt]}(J,t):[X||Y,$||Z]):X&&$&&lt([X,$])),lt([Y,Z])):X-Y&&$-Z&&lt([Y||X,Z||$]),J=t,X=Y,$=Z}else J&&ct(Q(J,t)[0]),q[U++]=t}for("linear"===F||"spline"===F?Q=function(t,e){for(var n=[],r=0,i=0;i<4;i++){var a=at[i],o=l(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);o&&(!r||Math.abs(o.x-n[0][0])>1||Math.abs(o.y-n[0][1])>1)&&(o=[o.x,o.y],r&&V(o,t)<V(n[0],t)?n.unshift(o):n.push(o),r++)}return n}:"hv"===F||"vh"===F?Q=function(t,e){var n=[],r=ot(t),i=ot(e);return r&&i&&st(r,i)?n:(r&&n.push(r),i&&n.push(i),n)}:"hvh"===F?Q=ut(0,et,nt):"vhv"===F&&(Q=ut(1,rt,it)),n=0;n<B;n++)if(r=H(n)){for(U=0,J=null,ft(r),n++;n<B;n++){if(!(d=H(n))){if(R)continue;break}if(j&&e.simplify){var dt=H(n+1);if(y=V(d,r),N&&(0===U||U===B-1)||!(y<G(d,dt)*I)){for(g=[(d[0]-r[0])/y,(d[1]-r[1])/y],h=r,b=y,_=w=A=0,v=!1,a=d,n++;n<t.length;n++){if(p=dt,dt=H(n+1),!p){if(R)continue;break}if(m=[p[0]-r[0],p[1]-r[1]],k=m[0]*g[1]-m[1]*g[0],w=Math.min(w,k),(A=Math.max(A,k))-w>G(p,dt))break;a=p,(x=m[0]*g[0]+m[1]*g[1])>b?(b=x,d=p,v=!1):x<_&&(_=x,h=p,v=!0)}if(v?(ft(d),a!==h&&ft(h)):(h!==r&&ft(h),a!==d&&ft(d)),ft(a),n>=t.length||!p)break;ft(p),r=p}}else ft(d)}J&&lt([X||J[0],$||J[1]]),z.push(q.slice(0,U))}return z}},{"../../constants/numerical":140,"../../lib":160,"./constants":285}],295:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=n("line.shape");"spline"===r&&n("line.smoothing")}},{}],296:[function(t,e,n){"use strict";var r={tonextx:1,tonexty:1,tonext:1};e.exports=function(t,e,n){var i,a,o,s,u,l={},c=!1,f=-1,d=0,h=-1;for(a=0;a<n.length;a++)i=n[a][0].trace,(o=i.stackgroup||"")?o in l?u=l[o]:(u=l[o]=d,d++):i.fill in r&&h>=0?u=h:(u=h=d,d++),u<f&&(c=!0),i._groupIndex=f=u;var p=n.slice();c&&p.sort(function(t,e){var n=t[0].trace,r=e[0].trace;return n._groupIndex-r._groupIndex||n.index-r.index});var v={};for(a=0;a<p.length;a++)i=p[a][0].trace,o=i.stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in r&&(s=v[o],i._prevtrace=s||null,s&&(s._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),v[o]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return p}},{}],297:[function(t,e,n){"use strict";var r=t("fast-isnumeric");e.exports=function(t){var e=t.marker,n=e.sizeref||1,i=e.sizemin||0,a="area"===e.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var e=a(t/2);return r(e)&&e>0?Math.max(e,i):0}}},{"fast-isnumeric":9}],298:[function(t,e,n){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},{}],299:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults"),o=t("./subtypes");e.exports=function(t,e,n,s,u,l){var c,f=o.isBubble(t),d=(t.line||{}).color;if(l=l||{},d&&(n=d),u("marker.symbol"),u("marker.opacity",f?.7:1),u("marker.size"),u("marker.color",n),i(t,"marker")&&a(t,e,s,u,{prefix:"marker.",cLetter:"c"}),l.noSelect||(u("selected.marker.color"),u("unselected.marker.color"),u("selected.marker.size"),u("unselected.marker.size")),l.noLine||(c=d&&!Array.isArray(d)&&e.marker.color!==d?d:f?r.background:r.defaultLine,u("marker.line.color",c),i(t,"marker.line")&&a(t,e,s,u,{prefix:"marker.line.",cLetter:"c"}),u("marker.line.width",f?1:0)),f&&(u("marker.sizeref"),u("marker.sizemin"),u("marker.sizemode")),l.gradient){var h=u("marker.gradient.type");"none"!==h&&u("marker.gradient.color")}}},{"../../components/color":42,"../../components/colorscale/defaults":52,"../../components/colorscale/helpers":53,"./subtypes":304}],300:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../lib"),o=a.ensureSingle,s=a.identity,u=t("../../components/drawing"),l=t("./subtypes"),c=t("./line_points"),f=t("./link_traces"),d=t("../../lib/polygon").tester;function h(t,e,n,f,h,p,v){var g;!function(t,e,n,i,o){var s=n.xaxis,u=n.yaxis,c=r.extent(a.simpleMap(s.range,s.r2c)),f=r.extent(a.simpleMap(u.range,u.r2c)),d=i[0].trace;if(l.hasMarkers(d)){var h=d.marker.maxdisplayed;if(0!==h){var p=i.filter(function(t){return t.x>=c[0]&&t.x<=c[1]&&t.y>=f[0]&&t.y<=f[1]}),v=Math.ceil(p.length/h),g=0;o.forEach(function(t,n){var r=t[0].trace;l.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<e&&g++});var m=Math.round(g*v/3+Math.floor(g/3)*v/7.1);i.forEach(function(t){delete t.vis}),p.forEach(function(t,e){0===Math.round((e+m)%v)&&(t.vis=!0)})}}}(0,e,n,f,h);var m=!!v&&v.duration>0;function y(t){return m?t.transition():t}var b=n.xaxis,_=n.yaxis,x=f[0].trace,w=x.line,A=r.select(p),k=o(A,"g","errorbars"),M=o(A,"g","lines"),T=o(A,"g","points"),S=o(A,"g","text");if(i.getComponentMethod("errorbars","plot")(t,k,n,v),!0===x.visible){var C,E;y(A).style("opacity",x.opacity);var O=x.fill.charAt(x.fill.length-1);"x"!==O&&"y"!==O&&(O=""),f[0][n.isRangePlot?"nodeRangePlot3":"node3"]=A;var P,L,R="",D=[],F=x._prevtrace;F&&(R=F._prevRevpath||"",E=F._nextFill,D=F._polygons);var j,N,z,I,B,q,U,H="",W="",G=[],V=a.noop;if(C=x._ownFill,l.hasLines(x)||"none"!==x.fill){for(E&&E.datum(f),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(j=u.steps(w.shape),N=u.steps(w.shape.split("").reverse().join(""))):j=N="spline"===w.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?u.smoothclosed(t.slice(1),w.smoothing):u.smoothopen(t,w.smoothing)}:function(t){return"M"+t.join("L")},z=function(t){return N(t.reverse())},G=c(f,{xaxis:b,yaxis:_,connectGaps:x.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify,fill:x.fill}),U=x._polygons=new Array(G.length),g=0;g<G.length;g++)x._polygons[g]=d(G[g]);G.length&&(I=G[0][0],B=G[G.length-1],q=B[B.length-1]),V=function(t){return function(e){if(P=j(e),L=z(e),H?O?(H+="L"+P.substr(1),W=L+"L"+W.substr(1)):(H+="Z"+P,W=L+"Z"+W):(H=P,W=L),l.hasLines(x)&&e.length>1){var n=r.select(this);if(n.datum(f),t)y(n.style("opacity",0).attr("d",P).call(u.lineGroupStyle)).style("opacity",1);else{var i=y(n);i.attr("d",P),u.singleLineStyle(f,i)}}}}}var Y=M.selectAll(".js-line").data(G);y(Y.exit()).style("opacity",0).remove(),Y.each(V(!1)),Y.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(u.lineGroupStyle).each(V(!0)),u.setClipUrl(Y,n.layerClipId,t),G.length?(C?(C.datum(f),I&&q&&(O?("y"===O?I[1]=q[1]=_.c2p(0,!0):"x"===O&&(I[0]=q[0]=b.c2p(0,!0)),y(C).attr("d","M"+q+"L"+I+"L"+H.substr(1)).call(u.singleFillStyle)):y(C).attr("d",H+"Z").call(u.singleFillStyle))):E&&("tonext"===x.fill.substr(0,6)&&H&&R?("tonext"===x.fill?y(E).attr("d",H+"Z"+R+"Z").call(u.singleFillStyle):y(E).attr("d",H+"L"+R.substr(1)+"Z").call(u.singleFillStyle),x._polygons=x._polygons.concat(D)):($(E),x._polygons=null)),x._prevRevpath=W,x._prevPolygons=U):(C?$(C):E&&$(E),x._polygons=x._prevRevpath=x._prevPolygons=null),T.datum(f),S.datum(f),function(e,i,a){var o,c,f=a[0].trace,d=l.hasMarkers(f),h=l.hasText(f),p=et(f),v=nt,g=nt;if(d||h){var x=s,w=f.stackgroup,A=w&&"infer zero"===t._fullLayout._scatterStackOpts[b._id+_._id][w].stackgaps;f.marker.maxdisplayed||f._needsCull?x=A?K:J:w&&!A&&(x=Q),d&&(v=x),h&&(g=x)}c=e.selectAll("path.point");var k,M=(o=c.data(v,p)).enter().append("path").classed("point",!0);m&&M.call(u.pointStyle,f,t).call(u.translatePoints,b,_).style("opacity",0).transition().style("opacity",1),o.order(),d&&(k=u.makePointStyleFns(f)),o.each(function(e){var i=r.select(this),a=y(i);u.translatePoint(e,a,b,_)?(u.singlePointStyle(e,a,f,k,t),n.layerClipId&&u.hideOutsideRangePoint(e,a,b,_,f.xcalendar,f.ycalendar),f.customdata&&i.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):a.remove()}),m?o.exit().transition().style("opacity",0).remove():o.exit().remove(),c=i.selectAll("g"),(o=c.data(g,p)).enter().append("g").classed("textpoint",!0).append("text"),o.order(),o.each(function(t){var e=r.select(this),i=y(e.select("text"));u.translatePoint(t,i,b,_)?n.layerClipId&&u.hideOutsideRangePoint(t,e,b,_,f.xcalendar,f.ycalendar):e.remove()}),o.selectAll("text").call(u.textPointStyle,f,t).each(function(t){var e=b.c2p(t.x),n=_.c2p(t.y);r.select(this).selectAll("tspan.line").each(function(){y(r.select(this)).attr({x:e,y:n})})}),o.exit().remove()}(T,S,f);var Z=!1===x.cliponaxis,X=Z?null:n.layerClipId;u.setClipUrl(T,X,t),u.setClipUrl(S,X,t)}function $(t){y(t).attr("d","M0,0Z")}function J(t){return t.filter(function(t){return!t.gap&&t.vis})}function K(t){return t.filter(function(t){return t.vis})}function Q(t){return t.filter(function(t){return!t.gap})}function tt(t){return t.id}function et(t){if(t.ids)return tt}function nt(){return!1}}e.exports=function(t,e,n,i,a,l){var c,d,p=!a,v=!!a&&a.duration>0,g=f(t,e,n);if((c=i.selectAll("g.trace").data(g,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),c.order(),function(t,e,n){e.each(function(e){var i=o(r.select(this),"g","fills");u.setClipUrl(i,n.layerClipId,t);var a=e[0].trace,l=[];a._ownfill&&l.push("_ownFill"),a._nexttrace&&l.push("_nextFill");var c=i.selectAll("g").data(l,s);c.enter().append("g"),c.exit().each(function(t){a[t]=null}).remove(),c.order().each(function(t){a[t]=o(r.select(this),"path","js-fill")})})}(t,c,e),v){l&&(d=l());var m=r.transition().duration(a.duration).ease(a.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()});m.each(function(){i.selectAll("g.trace").each(function(n,r){h(t,r,e,n,g,this,a)})})}else c.each(function(n,r){h(t,r,e,n,g,this,a)});p&&c.exit().remove(),i.selectAll("path:not([d])").remove()}},{"../../components/drawing":63,"../../lib":160,"../../lib/polygon":172,"../../registry":243,"./line_points":294,"./link_traces":296,"./subtypes":304,d3:7}],301:[function(t,e,n){"use strict";var r=t("./subtypes");e.exports=function(t,e){var n,i,a,o,s=t.cd,u=t.xaxis,l=t.yaxis,c=[],f=s[0].trace,d=!r.hasMarkers(f)&&!r.hasText(f);if(d)return[];if(!1===e)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)i=s[n],a=u.c2p(i.x),o=l.c2p(i.y),null!==i.i&&e.contains([a,o],!1,n,t)?(c.push({pointNumber:i.i,x:u.c2d(i.x),y:l.c2d(i.y)}),i.selected=1):i.selected=0;return c}},{"./subtypes":304}],302:[function(t,e,n){"use strict";var r=["orientation","groupnorm","stackgaps"];e.exports=function(t,e,n,i){var a=n._scatterStackOpts,o=i("stackgroup");if(o){var s=e.xaxis+e.yaxis,u=a[s];u||(u=a[s]={});var l=u[o],c=!1;l?l.traces.push(e):(l=u[o]={traceIndices:[],traces:[e]},c=!0);for(var f={orientation:e.x&&!e.y?"h":"v"},d=0;d<r.length;d++){var h=r[d],p=h+"Found";if(!l[p]){var v=void 0!==t[h],g="orientation"===h;if((v||c)&&(l[h]=i(h,f[h]),g&&(l.fillDflt="h"===l[h]?"tonextx":"tonexty"),v&&(l[p]=!0,!c&&(delete l.traces[0][h],g))))for(var m=0;m<l.traces.length-1;m++){var y=l.traces[m];y._input.fill!==y.fill&&(y.fill=l.fillDflt)}}}return l}}},{}],303:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/drawing"),a=t("../../registry");function o(t,e,n){i.pointStyle(t.selectAll("path.point"),e,n)}function s(t,e,n){i.textPointStyle(t.selectAll("text"),e,n)}e.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(t){return t[0].trace.opacity}),e.selectAll("g.points").each(function(e){var n=r.select(this),i=e.trace||e[0].trace;o(n,i,t)}),e.selectAll("g.text").each(function(e){var n=r.select(this),i=e.trace||e[0].trace;s(n,i,t)}),e.selectAll("g.trace path.js-line").call(i.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),a.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(t,e,n){var r=e[0].trace;r.selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),r),i.selectedTextStyle(n.selectAll("text"),r)):(o(n,r,t),s(n,r,t))}}},{"../../components/drawing":63,"../../registry":243,d3:7}],304:[function(t,e,n){"use strict";var r=t("../../lib");e.exports={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return r.isPlainObject(t.marker)&&r.isArrayOrTypedArray(t.marker.size)}}},{"../../lib":160}],305:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e,n,i,a){a=a||{},i("textposition"),r.coerceFont(i,"textfont",n.font),a.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},{"../../lib":160}],306:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry");e.exports=function(t,e,n,a){var o,s=a("x"),u=a("y"),l=i.getComponentMethod("calendars","handleTraceDefaults");if(l(t,e,["x","y"],n),s){var c=r.minRowLength(s);u?o=Math.min(c,r.minRowLength(u)):(o=c,a("y0"),a("dy"))}else{if(!u)return 0;o=r.minRowLength(u),a("x0"),a("dx")}return e._length=o,o}},{"../../lib":160,"../../registry":243}]},{},[4])(4)}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=function(e){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=function(t,e){if(e&&("object"===o(e)||"function"===typeof e))return e;return l(t)}(this,u(n).call(this,t))).p=Promise.resolve(),e.resizeHandler=null,e.handlers={},e.syncWindowResize=e.syncWindowResize.bind(l(e)),e.syncEventHandlers=e.syncEventHandlers.bind(l(e)),e.attachUpdateEvents=e.attachUpdateEvents.bind(l(e)),e.getRef=e.getRef.bind(l(e)),e.handleUpdate=e.handleUpdate.bind(l(e)),e.figureCallback=e.figureCallback.bind(l(e)),e.updatePlotly=e.updatePlotly.bind(l(e)),e}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(n,e),function(t,e,n){e&&s(t.prototype,e);n&&s(t,n)}(n,[{key:"updatePlotly",value:function(e,n,r){var i=this;this.p=this.p.then(function(){var e;if(!i.el)throw i.unmounting?(e=new Error("Component is unmounting")).reason="unmounting":e=new Error("Missing element reference"),e;return t.react(i.el,{data:i.props.data,layout:i.props.layout,config:i.props.config,frames:i.props.frames})}).then(function(){return i.syncWindowResize(e)}).then(this.syncEventHandlers).then(function(){return i.figureCallback(n)}).then(r?this.attachUpdateEvents:function(){}).catch(function(t){"unmounting"!==t.reason&&(console.error("Error while plotting:",t),i.props.onError&&i.props.onError(t))})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(t){this.unmounting=!1;var e=t.frames&&t.frames.length?t.frames.length:0,n=this.props.frames&&this.props.frames.length?this.props.frames.length:0,r=!(t.layout===this.props.layout&&t.data===this.props.data&&t.config===this.props.config&&n===e),i=void 0!==t.revision,a=t.revision!==this.props.revision;(r||i&&(!i||a))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&h&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),t.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var t=this;this.el&&this.el.removeListener&&d.forEach(function(e){t.el.on(e,t.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var t=this;this.el&&this.el.removeListener&&d.forEach(function(e){t.el.removeListener(e,t.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(t){if("function"===typeof t){var e=this.el,n=e.data,r=e.layout,i=this.el._transitionData?this.el._transitionData._frames:null,a={data:n,layout:r,frames:i};t(a,this.el)}}},{key:"syncWindowResize",value:function(e){var n=this;h&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return t.Plots.resize(n.el)},window.addEventListener("resize",this.resizeHandler),e&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(t){this.el=t,this.props.debug&&h&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var t=this;f.forEach(function(e){var n=t.props["on"+e],r=Boolean(t.handlers[e]);n&&!r?(t.handlers[e]=n,t.el.on("plotly_"+e.toLowerCase(),t.handlers[e])):!n&&r&&(t.el.removeListener("plotly_"+e.toLowerCase(),t.handlers[e]),delete t.handlers[e])})}},{key:"render",value:function(){return i.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),n}(i.Component);return e.propTypes={data:a.default.arrayOf(a.default.object),config:a.default.object,layout:a.default.object,frames:a.default.arrayOf(a.default.object),revision:a.default.number,onInitialized:a.default.func,onPurge:a.default.func,onError:a.default.func,onUpdate:a.default.func,debug:a.default.bool,style:a.default.object,className:a.default.string,useResizeHandler:a.default.bool,divId:a.default.string},f.forEach(function(t){e.propTypes["on"+t]=a.default.func}),e.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},e};var r,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(2)),a=(r=n(1))&&r.__esModule?r:{default:r};function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","Transitioning","TransitionInterrupted","Unhover"],d=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_doubleclick","plotly_animated"],h="undefined"!==typeof window},function(t,e,n){t.exports=n(66)},,function(t,e,n){"use strict";var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function u(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var l={get:function(t,e,n){if(!e)return t;var r=f(e),i=void 0;try{i=r.reduce(function(t,e){return t[e]},t)}catch(a){}return"undefined"!==typeof i?i:n},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=arguments[2],r=f(e),i=void 0,a=t;for(;(i=r.shift())&&r.length;)a[i]||(a[i]={}),a=a[i];return a[i]=n,t},takeRight:function(t,e){var n=e>t.length?0:t.length-e;return t.slice(n)},last:function(t){return t[t.length-1]},orderBy:function(t,e,n,r){return t.sort(function(t,i){for(var a=0;a<e.length;a+=1){var o=e[a],s=!1===n[a]||"desc"===n[a],u=o(t,i);if(u)return s?-u:u}return n[0]?t[r]-i[r]:i[r]-t[r]})},range:function(t){for(var e=[],n=0;n<t;n+=1)e.push(t);return e},remove:function(t,e){return t.filter(function(n,r){var i=e(n);return!!i&&(t.splice(r,1),!0)})},clone:function(t){try{return JSON.parse(JSON.stringify(t,function(t,e){return"function"===typeof e?e.toString():e}))}catch(e){return t}},getFirstDefined:function(){for(var t=0;t<arguments.length;t+=1)if("undefined"!==typeof(arguments.length<=t?void 0:arguments[t]))return arguments.length<=t?void 0:arguments[t]},sum:function(t){return t.reduce(function(t,e){return t+e},0)},makeTemplateComponent:function(t,e){if(!e)throw new Error("No displayName found for template component:",t);var n=function(e){var n=e.children,r=e.className,a=u(e,["children","className"]);return i.a.createElement("div",s({className:o()(t,r)},a),n)};return n.displayName=e,n},groupBy:function(t,e){return t.reduce(function(t,n,r){var i="function"===typeof e?e(n,r):n[e];return t[i]=c(t[i])?t[i]:[],t[i].push(n),t},{})},isArray:c,splitProps:function(t){var e=t.className,n=t.style,r=u(t,["className","style"]);return{className:e,style:n,rest:r||{}}},compactObject:function(t){var e={};t&&Object.keys(t).map(function(n){return Object.prototype.hasOwnProperty.call(t,n)&&void 0!==t[n]&&"undefined"!==typeof t[n]&&(e[n]=t[n]),!0});return e},isSortingDesc:function(t){return!("desc"!==t.sort&&!0!==t.desc&&!1!==t.asc)},normalizeComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return"function"===typeof t?Object.getPrototypeOf(t).isReactComponent?i.a.createElement(t,e):t(e):n},asPx:function(t){return t=Number(t),Number.isNaN(t)?null:t+"px"}};function c(t){return Array.isArray(t)}function f(t){return function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(c(e))for(var r=0;r<e.length;r+=1)t(e[r],n);else n.push(e);return n}(t).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}var d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var h=function(t){return function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),d(n,[{key:"componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"componentWillReceiveProps",value:function(t,e){var n=this.getResolvedState(),r=this.getResolvedState(t,e);["sorted","filtered","resized","expanded"].forEach(function(t){var e="default"+(t.charAt(0).toUpperCase()+t.slice(1));JSON.stringify(n[e])!==JSON.stringify(r[e])&&(r[t]=r[e])});["sortable","filterable","resizable"].forEach(function(t){if(n[t]!==r[t]){var e=t.replace("able","")+"ed",i="default"+(e.charAt(0).toUpperCase()+e.slice(1));r[e]=r[i]}}),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(t,e){var n=this,r=this.getResolvedState(),i=this.getResolvedState({},t),a=i.freezeWhenExpanded;if(i.frozen=!1,a)for(var o=Object.keys(i.expanded),s=0;s<o.length;s+=1)if(i.expanded[o[s]]){i.frozen=!0;break}return(r.frozen&&!i.frozen||r.sorted!==i.sorted||r.filtered!==i.filtered||r.showFilters!==i.showFilters||!i.frozen&&r.resolvedData!==i.resolvedData)&&((r.sorted!==i.sorted&&this.props.collapseOnSortingChange||r.filtered!==i.filtered||r.showFilters!==i.showFilters||r.sortedData&&!i.frozen&&r.resolvedData!==i.resolvedData&&this.props.collapseOnDataChange)&&(i.expanded={}),Object.assign(i,this.getSortedData(i))),r.filtered!==i.filtered&&(i.page=0),i.sortedData&&(i.pages=i.manual?i.pages:Math.ceil(i.sortedData.length/i.pageSize),i.page=Math.max(i.page>=i.pages?i.pages-1:i.page,0)),this.setState(i,function(){e&&e(),r.page===i.page&&r.pageSize===i.pageSize&&r.sorted===i.sorted&&r.filtered===i.filtered||n.fireFetchData()})}}]),n}()},p=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var b=function(t){return function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),g(n,[{key:"getResolvedState",value:function(t,e){return v({},l.compactObject(this.state),l.compactObject(this.props),l.compactObject(e),l.compactObject(t))}},{key:"getDataModel",value:function(t,e){var n=this,r=t.columns,a=t.pivotBy,o=void 0===a?[]:a,s=t.data,u=t.resolveData,c=t.pivotIDKey,f=t.pivotValKey,d=t.subRowsKey,h=t.aggregatedKey,g=t.nestingLevelKey,b=t.originalKey,_=t.indexKey,x=t.groupedByPivotKey,w=t.SubComponent,A=!1;r.forEach(function(t){t.columns&&(A=!0)});var k=[].concat(y(r)),M=r.find(function(t){return t.expander||t.columns&&t.columns.some(function(t){return t.expander})});M&&!M.expander&&(M=M.columns.find(function(t){return t.expander})),w&&!M&&(k=[M={expander:!0}].concat(y(k)));var T=[],S=function(t,e){var r=function(t,e){var r=void 0;if((r=t.expander?v({},n.props.column,n.props.expanderDefaults,t):v({},n.props.column,t)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),e&&(r.parentColumn=e),"string"===typeof r.accessor){r.id=r.id||r.accessor;var i=r.accessor;return r.accessor=function(t){return l.get(t,i)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(t,e);return T.push(r),r},C=k.map(function(t){return t.columns?v({},t,{columns:t.columns.map(function(e){return S(e,t)})}):S(t)}).slice(),E=[],O=(C=(C=C.map(function(t){if(t.columns){var e=t.columns.filter(function(t){return!(o.indexOf(t.id)>-1)&&l.getFirstDefined(t.show,!0)});return v({},t,{columns:e})}return t})).filter(function(t){return t.columns?t.columns.length:!(o.indexOf(t.id)>-1)&&l.getFirstDefined(t.show,!0)})).findIndex(function(t){return t.pivot});if(o.length){var P=[];o.forEach(function(t){var e=T.find(function(e){return e.id===t});e&&P.push(e)});var L=P.reduce(function(t,e){return t&&t===e.parentColumn&&e.parentColumn},P[0].parentColumn),R=A&&L.Header,D={Header:R=R||function(){return i.a.createElement("strong",null,"Pivoted")},columns:P.map(function(t){return v({},n.props.pivotDefaults,t,{pivoted:!0})})};O>=0?(D=v({},C[O],D),C.splice(O,1,D)):C.unshift(D)}var F=[],j=[],N=function(t,e){F.push(v({},n.props.column,e,{columns:t})),j=[]};C.forEach(function(t){if(t.columns)return E=E.concat(t.columns),j.length>0&&N(j),void N(t.columns,t);E.push(t),j.push(t)}),A&&j.length>0&&N(j);var z=this.resolvedData;this.resolvedData&&!e||(z=u(s),this.resolvedData=z),z=z.map(function(t,e){return function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(m(r={},b,e),m(r,_,n),m(r,d,e[d]),m(r,g,i),r);return T.forEach(function(t){t.expander||(a[t.id]=t.accessor(e))}),a[d]&&(a[d]=a[d].map(function(e,n){return t(e,n,i+1)})),a}(t,e)});var I=E.filter(function(t){return!t.expander&&t.aggregate});if(o.length){z=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return e;var i=Object.entries(l.groupBy(e,n[r])).map(function(t){var e,i=p(t,2),a=i[0],o=i[1];return m(e={},c,n[r]),m(e,f,a),m(e,n[r],a),m(e,d,o),m(e,g,r),m(e,x,!0),e});return i=i.map(function(e){var i,a=t(e[d],n,r+1);return v({},e,(m(i={},d,a),m(i,h,!0),i),function(t){var e={};return I.forEach(function(n){var r=t.map(function(t){return t[n.id]});e[n.id]=n.aggregate(r,t)}),e}(a))})}(z,o)}return v({},t,{resolvedData:z,allVisibleColumns:E,headerGroups:F,allDecoratedColumns:T,hasHeaderGroups:A})}},{key:"getSortedData",value:function(t){var e=t.manual,n=t.sorted,r=t.filtered,i=t.defaultFilterMethod,a=t.resolvedData,o=t.allVisibleColumns,s=t.allDecoratedColumns,u={};return s.filter(function(t){return t.sortMethod}).forEach(function(t){u[t.id]=t.sortMethod}),{sortedData:e?a:this.sortData(this.filterData(a,r,i,o),n,u)}}},{key:"fireFetchData",value:function(){this.props.onFetchData(this.getResolvedState(),this)}},{key:"getPropOrState",value:function(t){return l.getFirstDefined(this.props[t],this.state[t])}},{key:"getStateOrProp",value:function(t){return l.getFirstDefined(this.state[t],this.props[t])}},{key:"filterData",value:function(t,e,n,r){var i=this,a=t;return e.length&&(a=(a=e.reduce(function(t,e){var i=r.find(function(t){return t.id===e.id});if(!i||!1===i.filterable)return t;var a=i.filterMethod||n;return i.filterAll?a(e,t,i):t.filter(function(t){return a(e,t,i)})},a)).map(function(t){return t[i.props.subRowsKey]?v({},t,m({},i.props.subRowsKey,i.filterData(t[i.props.subRowsKey],e,n,r))):t}).filter(function(t){return!t[i.props.subRowsKey]||t[i.props.subRowsKey].length>0})),a}},{key:"sortData",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.length)return t;var i=(this.props.orderByMethod||l.orderBy)(t,e.map(function(t){return r[t.id]?function(e,n){return r[t.id](e[t.id],n[t.id],t.desc)}:function(e,r){return n.props.defaultSortMethod(e[t.id],r[t.id],t.desc)}}),e.map(function(t){return!t.desc}),this.props.indexKey);return i.forEach(function(t){t[n.props.subRowsKey]&&(t[n.props.subRowsKey]=n.sortData(t[n.props.subRowsKey],e,r))}),i}},{key:"getMinRows",value:function(){return l.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(t){var e=this.props,n=e.onPageChange,r=e.collapseOnPageChange,i={page:t};r&&(i.expanded={}),this.setStateWithData(i,function(){return n&&n(t)})}},{key:"onPageSizeChange",value:function(t){var e=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,i=Math.floor(r/t);this.setStateWithData({pageSize:t,page:i},function(){return e&&e(t,i)})}},{key:"sortColumn",value:function(t,e){var n=this.getResolvedState(),r=n.sorted,i=n.skipNextSort,a=n.defaultSortDesc,o=Object.prototype.hasOwnProperty.call(t,"defaultSortDesc")?t.defaultSortDesc:a,s=!o;if(i)this.setStateWithData({skipNextSort:!1});else{var u=this.props.onSortedChange,c=l.clone(r||[]).map(function(t){return t.desc=l.isSortingDesc(t),t});if(l.isArray(t)){var f=c.findIndex(function(e){return e.id===t[0].id});if(f>-1)c[f].desc===s?e?c.splice(f,t.length):t.forEach(function(t,e){c[f+e].desc=o}):t.forEach(function(t,e){c[f+e].desc=s}),e||(c=c.slice(f,t.length));else c=e?c.concat(t.map(function(t){return{id:t.id,desc:o}})):t.map(function(t){return{id:t.id,desc:o}})}else{var d=c.findIndex(function(e){return e.id===t.id});if(d>-1){var h=c[d];h.desc===s?e?c.splice(d,1):(h.desc=o,c=[h]):(h.desc=s,e||(c=[h]))}else e?c.push({id:t.id,desc:o}):c=[{id:t.id,desc:o}]}this.setStateWithData({page:!r.length&&c.length||!e?0:this.state.page,sorted:c},function(){return u&&u(c,t,e)})}}},{key:"filterColumn",value:function(t,e){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,i=(n||[]).filter(function(e){return e.id!==t.id});""!==e&&i.push({id:t.id,value:e}),this.setStateWithData({filtered:i},function(){return r&&r(i,t,e)})}},{key:"resizeColumnStart",value:function(t,e,n){var r=this;t.stopPropagation();var i=t.target.parentElement.getBoundingClientRect().width,a=void 0;a=n?t.changedTouches[0].pageX:t.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:e.id,startX:a,parentWidth:i}},function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))})}},{key:"resizeColumnMoving",value:function(t){t.stopPropagation();var e=this.props.onResizedChange,n=this.getResolvedState(),r=n.resized,i=n.currentlyResizing,a=r.filter(function(t){return t.id!==i.id}),o=void 0;"touchmove"===t.type?o=t.changedTouches[0].pageX:"mousemove"===t.type&&(o=t.pageX);var s=Math.max(i.parentWidth+o-i.startX,11);a.push({id:i.id,value:s}),this.setStateWithData({resized:a},function(){return e&&e(a,t)})}},{key:"resizeColumnEnd",value:function(t){t.stopPropagation();var e="touchend"===t.type||"touchcancel"===t.type;e&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),e||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),n}()},_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var w=function(t){return i.a.createElement("button",x({type:"button"},t,{className:"-btn"}),t.children)},A=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:t.page},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r["Component"]),_(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({page:t.page})}},{key:"getSafePage",value:function(t){return Number.isNaN(t)&&(t=this.props.page),Math.min(Math.max(t,0),this.props.pages-1)}},{key:"changePage",value:function(t){t=this.getSafePage(t),this.setState({page:t}),this.props.page!==t&&this.props.onPageChange(t)}},{key:"applyPage",value:function(t){t&&t.preventDefault();var e=this.state.page;this.changePage(""===e?this.props.page:e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.pages,r=e.page,a=e.showPageSizeOptions,s=e.pageSizeOptions,u=e.pageSize,l=e.showPageJump,c=e.canPrevious,f=e.canNext,d=e.onPageSizeChange,h=e.className,p=e.PreviousComponent,v=void 0===p?w:p,g=e.NextComponent,m=void 0===g?w:g;return i.a.createElement("div",{className:o()(h,"-pagination"),style:this.props.style},i.a.createElement("div",{className:"-previous"},i.a.createElement(v,{onClick:function(){c&&t.changePage(r-1)},disabled:!c},this.props.previousText)),i.a.createElement("div",{className:"-center"},i.a.createElement("span",{className:"-pageInfo"},this.props.pageText," ",l?i.a.createElement("div",{className:"-pageJump"},i.a.createElement("input",{type:""===this.state.page?"text":"number",onChange:function(e){var n=e.target.value,r=n-1;if(""===n)return t.setState({page:n});t.setState({page:t.getSafePage(r)})},value:""===this.state.page?"":this.state.page+1,onBlur:this.applyPage,onKeyPress:function(e){13!==e.which&&13!==e.keyCode||t.applyPage()}})):i.a.createElement("span",{className:"-currentPage"},r+1)," ",this.props.ofText," ",i.a.createElement("span",{className:"-totalPages"},n||1)),a&&i.a.createElement("span",{className:"select-wrap -pageSizeOptions"},i.a.createElement("select",{onChange:function(t){return d(Number(t.target.value))},value:u},s.map(function(e,n){return i.a.createElement("option",{key:n,value:e},e," ",t.props.rowsText)})))),i.a.createElement("div",{className:"-next"},i.a.createElement(m,{onClick:function(){f&&t.changePage(r+1)},disabled:!f},this.props.nextText)))}}]),e}(),k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function M(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var T=function(){return{}},S={data:[],resolveData:function(t){return t},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(t,e,n){var r=t.pivotId||t.id;return void 0===e[r]||String(e[r]).startsWith(t.value)},defaultSortMethod:function(t,e,n){return e=null===e||void 0===e?"":e,(t="string"===typeof(t=null===t||void 0===t?"":t)?t.toLowerCase():t)>(e="string"===typeof e?e.toLowerCase():e)?1:t<e?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:T,getTableProps:T,getTheadGroupProps:T,getTheadGroupTrProps:T,getTheadGroupThProps:T,getTheadProps:T,getTheadTrProps:T,getTheadThProps:T,getTheadFilterProps:T,getTheadFilterTrProps:T,getTheadFilterThProps:T,getTbodyProps:T,getTrGroupProps:T,getTrProps:T,getTdProps:T,getTfootProps:T,getTfootTrProps:T,getTfootTdProps:T,getPaginationProps:T,getLoadingProps:T,getNoDataProps:T,getResizerProps:T,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,className:"",style:{},getProps:T,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:T,footerClassName:"",footerStyle:{},getFooterProps:T,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",TableComponent:function(t){var e=t.children,n=t.className,r=M(t,["children","className"]);return i.a.createElement("div",k({className:o()("rt-table",n),role:"grid"},r),e)},TheadComponent:l.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:l.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(t){var e=t.children,n=t.className,r=M(t,["children","className"]);return i.a.createElement("div",k({className:o()("rt-tr-group",n),role:"rowgroup"},r),e)},TrComponent:function(t){var e=t.children,n=t.className,r=M(t,["children","className"]);return i.a.createElement("div",k({className:o()("rt-tr",n),role:"row"},r),e)},ThComponent:function(t){var e=t.toggleSort,n=t.className,r=t.children,a=M(t,["toggleSort","className","children"]);return i.a.createElement("div",k({className:o()("rt-th",n),onClick:function(t){return e&&e(t)},role:"columnheader",tabIndex:"-1"},a),r)},TdComponent:function(t){t.toggleSort;var e=t.className,n=t.children,r=M(t,["toggleSort","className","children"]);return i.a.createElement("div",k({className:o()("rt-td",e),role:"gridcell"},r),n)},TfootComponent:l.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(t){var e=t.filter,n=t.onChange;return i.a.createElement("input",{type:"text",style:{width:"100%"},value:e?e.value:"",onChange:function(t){return n(t.target.value)}})},ExpanderComponent:function(t){var e=t.isExpanded;return i.a.createElement("div",{className:o()("rt-expander",e&&"-open")},"\u2022")},PivotValueComponent:function(t){var e=t.subRows,n=t.value;return i.a.createElement("span",null,n," ",e&&"("+e.length+")")},AggregatedComponent:function(t){var e=t.subRows,n=t.column,r=e.filter(function(t){return"undefined"!==typeof t[n.id]}).map(function(t,r){return i.a.createElement("span",{key:r},t[n.id],r<e.length-1?", ":"")});return i.a.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:A,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(t){var e=t.className,n=t.loading,r=t.loadingText,a=M(t,["className","loading","loadingText"]);return i.a.createElement("div",k({className:o()("-loading",{"-active":n},e)},a),i.a.createElement("div",{className:"-loading-inner"},r))},NoDataComponent:l.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:l.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return i.a.createElement("span",null,"\xa0")}},C=n(1),E=n.n(C),O={data:E.a.any,loading:E.a.bool,showPagination:E.a.bool,showPaginationTop:E.a.bool,showPaginationBottom:E.a.bool,showPageSizeOptions:E.a.bool,pageSizeOptions:E.a.array,defaultPageSize:E.a.number,showPageJump:E.a.bool,collapseOnSortingChange:E.a.bool,collapseOnPageChange:E.a.bool,collapseOnDataChange:E.a.bool,freezeWhenExpanded:E.a.bool,sortable:E.a.bool,resizable:E.a.bool,filterable:E.a.bool,defaultSortDesc:E.a.bool,defaultSorted:E.a.array,defaultFiltered:E.a.array,defaultResized:E.a.array,defaultExpanded:E.a.object,defaultFilterMethod:E.a.func,defaultSortMethod:E.a.func,onPageChange:E.a.func,onPageSizeChange:E.a.func,onSortedChange:E.a.func,onFilteredChange:E.a.func,onResizedChange:E.a.func,onExpandedChange:E.a.func,pivotBy:E.a.array,pivotValKey:E.a.string,pivotIDKey:E.a.string,subRowsKey:E.a.string,aggregatedKey:E.a.string,nestingLevelKey:E.a.string,originalKey:E.a.string,indexKey:E.a.string,groupedByPivotKey:E.a.string,onFetchData:E.a.func,className:E.a.string,style:E.a.object,getProps:E.a.func,getTableProps:E.a.func,getTheadGroupProps:E.a.func,getTheadGroupTrProps:E.a.func,getTheadGroupThProps:E.a.func,getTheadProps:E.a.func,getTheadTrProps:E.a.func,getTheadThProps:E.a.func,getTheadFilterProps:E.a.func,getTheadFilterTrProps:E.a.func,getTheadFilterThProps:E.a.func,getTbodyProps:E.a.func,getTrGroupProps:E.a.func,getTrProps:E.a.func,getTdProps:E.a.func,getTfootProps:E.a.func,getTfootTrProps:E.a.func,getTfootTdProps:E.a.func,getPaginationProps:E.a.func,getLoadingProps:E.a.func,getNoDataProps:E.a.func,getResizerProps:E.a.func,columns:E.a.arrayOf(E.a.shape({Cell:E.a.oneOfType([E.a.element,E.a.string,E.a.func]),Header:E.a.oneOfType([E.a.element,E.a.string,E.a.func]),Footer:E.a.oneOfType([E.a.element,E.a.string,E.a.func]),Aggregated:E.a.oneOfType([E.a.element,E.a.string,E.a.func]),Pivot:E.a.oneOfType([E.a.element,E.a.string,E.a.func]),PivotValue:E.a.oneOfType([E.a.element,E.a.string,E.a.func]),Expander:E.a.oneOfType([E.a.element,E.a.string,E.a.func]),Filter:E.a.oneOfType([E.a.element,E.a.func]),sortable:E.a.bool,resizable:E.a.bool,filterable:E.a.bool,show:E.a.bool,minWidth:E.a.number,className:E.a.string,style:E.a.object,getProps:E.a.func,aggregate:E.a.func,headerClassName:E.a.string,headerStyle:E.a.object,getHeaderProps:E.a.func,footerClassName:E.a.string,footerStyle:E.a.object,getFooterProps:E.a.object,filterMethod:E.a.func,filterAll:E.a.bool,sortMethod:E.a.func})),expanderDefaults:E.a.shape({sortable:E.a.bool,resizable:E.a.bool,filterable:E.a.bool,width:E.a.number}),pivotDefaults:E.a.object,previousText:E.a.node,nextText:E.a.node,loadingText:E.a.node,noDataText:E.a.node,pageText:E.a.node,ofText:E.a.node,rowsText:E.a.node,TableComponent:E.a.oneOfType([E.a.func,E.a.element]),TheadComponent:E.a.oneOfType([E.a.func,E.a.element]),TbodyComponent:E.a.oneOfType([E.a.func,E.a.element]),TrGroupComponent:E.a.oneOfType([E.a.func,E.a.element]),TrComponent:E.a.oneOfType([E.a.func,E.a.element]),ThComponent:E.a.oneOfType([E.a.func,E.a.element]),TdComponent:E.a.oneOfType([E.a.func,E.a.element]),TfootComponent:E.a.oneOfType([E.a.func,E.a.element]),FilterComponent:E.a.oneOfType([E.a.func,E.a.element]),ExpanderComponent:E.a.oneOfType([E.a.func,E.a.element]),PivotValueComponent:E.a.oneOfType([E.a.func,E.a.element]),AggregatedComponent:E.a.oneOfType([E.a.func,E.a.element]),PivotComponent:E.a.oneOfType([E.a.func,E.a.element]),PaginationComponent:E.a.oneOfType([E.a.func,E.a.element]),PreviousComponent:E.a.oneOfType([E.a.func,E.a.element]),NextComponent:E.a.oneOfType([E.a.func,E.a.element]),LoadingComponent:E.a.oneOfType([E.a.func,E.a.element]),NoDataComponent:E.a.oneOfType([E.a.func,E.a.element]),ResizerComponent:E.a.oneOfType([E.a.func,E.a.element]),PadRowComponent:E.a.oneOfType([E.a.func,E.a.element])},P=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var D=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:0,pageSize:t.defaultPageSize,sorted:t.defaultSorted,expanded:t.defaultExpanded,filtered:t.defaultFiltered,resized:t.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,b(h(r["Component"]))),R(e,[{key:"render",value:function(){var t=this,e=this.getResolvedState(),n=e.children,r=e.className,a=e.style,s=e.getProps,u=e.getTableProps,c=e.getTheadGroupProps,f=e.getTheadGroupTrProps,d=e.getTheadGroupThProps,h=e.getTheadProps,p=e.getTheadTrProps,v=e.getTheadThProps,g=e.getTheadFilterProps,m=e.getTheadFilterTrProps,y=e.getTheadFilterThProps,b=e.getTbodyProps,_=e.getTrGroupProps,x=e.getTrProps,w=e.getTdProps,A=e.getTfootProps,k=e.getTfootTrProps,M=e.getTfootTdProps,T=e.getPaginationProps,C=e.getLoadingProps,E=e.getNoDataProps,O=e.getResizerProps,R=e.showPagination,D=e.showPaginationTop,F=e.showPaginationBottom,j=e.manual,N=e.loadingText,z=e.noDataText,I=e.sortable,B=e.multiSort,q=e.resizable,U=e.filterable,H=e.pivotIDKey,W=e.pivotValKey,G=e.pivotBy,V=e.subRowsKey,Y=e.aggregatedKey,Z=e.originalKey,X=e.indexKey,$=e.groupedByPivotKey,J=e.loading,K=e.pageSize,Q=e.page,tt=e.sorted,et=e.filtered,nt=e.resized,rt=e.expanded,it=e.pages,at=e.onExpandedChange,ot=e.TableComponent,st=e.TheadComponent,ut=e.TbodyComponent,lt=e.TrGroupComponent,ct=e.TrComponent,ft=e.ThComponent,dt=e.TdComponent,ht=e.TfootComponent,pt=e.PaginationComponent,vt=e.LoadingComponent,gt=e.SubComponent,mt=e.NoDataComponent,yt=e.ResizerComponent,bt=e.ExpanderComponent,_t=e.PivotValueComponent,xt=e.PivotComponent,wt=e.AggregatedComponent,At=e.FilterComponent,kt=e.PadRowComponent,Mt=e.resolvedData,Tt=e.allVisibleColumns,St=e.headerGroups,Ct=e.hasHeaderGroups,Et=e.sortedData,Ot=e.currentlyResizing,Pt=K*Q,Lt=Pt+K,Rt=j?Mt:Et.slice(Pt,Lt),Dt=this.getMinRows(),Ft=l.range(Math.max(Dt-Rt.length,0)),jt=Tt.some(function(t){return t.Footer}),Nt=U||Tt.some(function(t){return t.filterable}),zt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[e.map(function(e,i){var a=L({},e,{_viewIndex:r+=1}),o=n.concat([i]);if(a[V]&&l.get(rt,o)){var s=t(a[V],o,r),u=P(s,2);a[V]=u[0],r=u[1]}return a}),r]}(Rt),It=P(zt,1);Rt=It[0];var Bt=Q>0,qt=Q+1<it,Ut=l.sum(Tt.map(function(t){var e=nt.find(function(e){return e.id===t.id})||{};return l.getFirstDefined(e.value,t.width,t.minWidth)})),Ht=-1,Wt=L({},e,{startRow:Pt,endRow:Lt,pageRows:Rt,minRows:Dt,padRows:Ft,hasColumnFooter:jt,canPrevious:Bt,canNext:qt,rowMinWidth:Ut}),Gt=l.splitProps(s(Wt,void 0,void 0,this)),Vt=l.splitProps(u(Wt,void 0,void 0,this)),Yt=l.splitProps(b(Wt,void 0,void 0,this)),Zt=C(Wt,void 0,void 0,this),Xt=E(Wt,void 0,void 0,this),$t=function(e,n){var r=function(t){return(nt.find(function(e){return e.id===t.id})||{}).value},a=l.sum(e.columns.map(function(t){return t.width||r(t)?0:t.minWidth})),s=l.sum(e.columns.map(function(t){return l.getFirstDefined(r(t),t.width,t.minWidth)})),u=l.sum(e.columns.map(function(t){return l.getFirstDefined(r(t),t.width,t.maxWidth)})),c=l.splitProps(d(Wt,void 0,e,t)),f=l.splitProps(e.getHeaderProps(Wt,void 0,e,t)),h=[e.headerClassName,c.className,f.className],p=L({},e.headerStyle,c.style,f.style),v=L({},c.rest,f.rest),g={flex:a+" 0 auto",width:l.asPx(s),maxWidth:l.asPx(u)};return i.a.createElement(ft,L({key:n+"-"+e.id,className:o()(h),style:L({},p,g)},v),l.normalizeComponent(e.Header,{data:Et,column:e}))},Jt=function(e,n){var r=nt.find(function(t){return t.id===e.id})||{},a=tt.find(function(t){return t.id===e.id}),s="function"===typeof e.show?e.show():e.show,u=l.getFirstDefined(r.value,e.width,e.minWidth),c=l.getFirstDefined(r.value,e.width,e.maxWidth),f=l.splitProps(v(Wt,void 0,e,t)),d=l.splitProps(e.getHeaderProps(Wt,void 0,e,t)),h=[e.headerClassName,f.className,d.className],p=L({},e.headerStyle,f.style,d.style),g=L({},f.rest,d.rest),m=l.getFirstDefined(e.resizable,q,!1),y=m?i.a.createElement(yt,L({onMouseDown:function(n){return t.resizeColumnStart(n,e,!1)},onTouchStart:function(n){return t.resizeColumnStart(n,e,!0)}},O("finalState",void 0,e,t))):null,b=l.getFirstDefined(e.sortable,I,!1);return i.a.createElement(ft,L({key:n+"-"+e.id,className:o()(h,m&&"rt-resizable-header",a?a.desc?"-sort-desc":"-sort-asc":"",b&&"-cursor-pointer",!s&&"-hidden",G&&G.slice(0,-1).includes(e.id)&&"rt-header-pivot"),style:L({},p,{flex:u+" 0 auto",width:l.asPx(u),maxWidth:l.asPx(c)}),toggleSort:function(n){b&&t.sortColumn(e,!!B&&n.shiftKey)}},g),i.a.createElement("div",{className:o()(m&&"rt-resizable-header-content")},l.normalizeComponent(e.Header,{data:Et,column:e})),y)},Kt=function(e,n){var r=nt.find(function(t){return t.id===e.id})||{},a=l.getFirstDefined(r.value,e.width,e.minWidth),s=l.getFirstDefined(r.value,e.width,e.maxWidth),u=l.splitProps(y(Wt,void 0,e,t)),c=l.splitProps(e.getHeaderProps(Wt,void 0,e,t)),f=[e.headerClassName,u.className,c.className],d=L({},e.headerStyle,u.style,c.style),h=L({},u.rest,c.rest),p=et.find(function(t){return t.id===e.id}),v=e.Filter||At,g=l.getFirstDefined(e.filterable,U,!1);return i.a.createElement(ft,L({key:n+"-"+e.id,className:o()(f),style:L({},d,{flex:a+" 0 auto",width:l.asPx(a),maxWidth:l.asPx(s)})},h),g?l.normalizeComponent(v,{column:e,filter:p,onChange:function(n){return t.filterColumn(e,n)}},S.column.Filter):null)},Qt=function(e,n){var r=nt.find(function(t){return t.id===e.id})||{},a="function"===typeof e.show?e.show():e.show,s=l.getFirstDefined(r.value,e.width,e.minWidth),u=s,c=l.getFirstDefined(r.value,e.width,e.maxWidth),f=l.splitProps(w(Wt,void 0,e,t)),d=l.splitProps(e.getProps(Wt,void 0,e,t)),h=[f.className,e.className,d.className],p=L({},f.style,e.style,d.style);return i.a.createElement(dt,L({key:n+"-"+e.id,className:o()(h,!a&&"hidden"),style:L({},p,{flex:u+" 0 auto",width:l.asPx(s),maxWidth:l.asPx(c)})},f.rest),l.normalizeComponent(kt))},te=function(e,n){var r=_(Wt,void 0,void 0,t),a=l.splitProps(x(Wt,void 0,void 0,t));return i.a.createElement(lt,L({key:n},r),i.a.createElement(ct,{className:o()("-padRow",(Rt.length+n)%2?"-even":"-odd",a.className),style:a.style||{}},Tt.map(Qt)))},ee=function(e,n){var r=nt.find(function(t){return t.id===e.id})||{},a="function"===typeof e.show?e.show():e.show,s=l.getFirstDefined(r.value,e.width,e.minWidth),u=l.getFirstDefined(r.value,e.width,e.maxWidth),c=l.splitProps(M(Wt,void 0,void 0,t)),f=l.splitProps(e.getProps(Wt,void 0,e,t)),d=l.splitProps(e.getFooterProps(Wt,void 0,e,t)),h=[c.className,e.className,f.className,d.className],p=L({},c.style,e.style,f.style,d.style);return i.a.createElement(dt,L({key:n+"-"+e.id,className:o()(h,!a&&"hidden"),style:L({},p,{flex:s+" 0 auto",width:l.asPx(s),maxWidth:l.asPx(u)})},f.rest,c.rest,d.rest),l.normalizeComponent(e.Footer,{data:Et,column:e}))},ne=function(){var n=function(){var n=l.splitProps(T(Wt,void 0,void 0,t));return i.a.createElement(pt,L({},e,{pages:it,canPrevious:Bt,canNext:qt,onPageChange:t.onPageChange,onPageSizeChange:t.onPageSizeChange,className:n.className,style:n.style},n.rest))}();return i.a.createElement("div",L({className:o()("ReactTable",r,Gt.className),style:L({},a,Gt.style)},Gt.rest),R&&D?i.a.createElement("div",{className:"pagination-top"},n):null,i.a.createElement(ot,L({className:o()(Vt.className,Ot?"rt-resizing":""),style:Vt.style},Vt.rest),Ct?function(){var e=l.splitProps(c(Wt,void 0,void 0,t)),n=l.splitProps(f(Wt,void 0,void 0,t));return i.a.createElement(st,L({className:o()("-headerGroups",e.className),style:L({},e.style,{minWidth:Ut+"px"})},e.rest),i.a.createElement(ct,L({className:n.className,style:n.style},n.rest),St.map($t)))}():null,function(){var e=l.splitProps(h(Wt,void 0,void 0,t)),n=l.splitProps(p(Wt,void 0,void 0,t));return i.a.createElement(st,L({className:o()("-header",e.className),style:L({},e.style,{minWidth:Ut+"px"})},e.rest),i.a.createElement(ct,L({className:n.className,style:n.style},n.rest),Tt.map(Jt)))}(),Nt?function(){var e=l.splitProps(g(Wt,void 0,void 0,t)),n=l.splitProps(m(Wt,void 0,void 0,t));return i.a.createElement(st,L({className:o()("-filters",e.className),style:L({},e.style,{minWidth:Ut+"px"})},e.rest),i.a.createElement(ct,L({className:n.className,style:n.style},n.rest),Tt.map(Kt)))}():null,i.a.createElement(ut,L({className:o()(Yt.className),style:L({},Yt.style,{minWidth:Ut+"px"})},Yt.rest),Rt.map(function(e,n){return function e(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s={original:n[Z],row:n,index:n[X],viewIndex:Ht+=1,pageSize:K,page:Q,level:a.length,nestingPath:a.concat([r]),aggregated:n[Y],groupedByPivot:n[$],subRows:n[V]},u=l.get(rt,s.nestingPath),c=_(Wt,s,void 0,t),f=l.splitProps(x(Wt,s,void 0,t));return i.a.createElement(lt,L({key:s.nestingPath.join("_")},c),i.a.createElement(ct,L({className:o()(f.className,n._viewIndex%2?"-even":"-odd"),style:f.style},f.rest),Tt.map(function(e,r){var a=nt.find(function(t){return t.id===e.id})||{},c="function"===typeof e.show?e.show():e.show,f=l.getFirstDefined(a.value,e.width,e.minWidth),d=l.getFirstDefined(a.value,e.width,e.maxWidth),h=l.splitProps(w(Wt,s,e,t)),p=l.splitProps(e.getProps(Wt,s,e,t)),v=[h.className,e.className,p.className],g=L({},h.style,e.style,p.style),m=L({},s,{isExpanded:u,column:L({},e),value:s.row[e.id],pivoted:e.pivoted,expander:e.expander,resized:nt,show:c,width:f,maxWidth:d,tdProps:h,columnProps:p,classes:v,styles:g}),y=m.value,b=void 0,_=void 0,x=void 0,A=l.normalizeComponent(e.Cell,m,y),k=e.Aggregated||(e.aggregate?e.Cell:wt),M=e.Expander||bt,T=e.PivotValue||_t,S=xt||function(t){return i.a.createElement("div",null,i.a.createElement(M,t),i.a.createElement(T,t))},C=e.Pivot||S;(m.pivoted||m.expander)&&(m.expandable=!0,b=!0,!m.pivoted||m.subRows||gt||(m.expandable=!1)),m.pivoted?(_=s.row[H]===e.id&&m.subRows,x=G.indexOf(e.id)>G.indexOf(s.row[H])&&m.subRows,A=_?l.normalizeComponent(C,L({},m,{value:n[W]}),n[W]):x?l.normalizeComponent(k,m,y):null):m.aggregated&&(A=l.normalizeComponent(k,m,y)),m.expander&&(A=l.normalizeComponent(M,m,n[W]),G&&(m.groupedByPivot&&(A=null),m.subRows||gt||(A=null)));var E=b?function(e){var n=l.clone(rt);return n=u?l.set(n,m.nestingPath,!1):l.set(n,m.nestingPath,{}),t.setStateWithData({expanded:n},function(){return at&&at(n,m.nestingPath,e)})}:function(){},O={onClick:E};return h.rest.onClick&&(O.onClick=function(t){h.rest.onClick(t,function(){return E(t)})}),p.rest.onClick&&(O.onClick=function(t){p.rest.onClick(t,function(){return E(t)})}),i.a.createElement(dt,L({key:r+"-"+e.id,className:o()(v,!c&&"hidden",m.expandable&&"rt-expandable",(_||x)&&"rt-pivot"),style:L({},g,{flex:f+" 0 auto",width:l.asPx(f),maxWidth:l.asPx(d)})},h.rest,p.rest,O),A)})),s.subRows&&u&&s.subRows.map(function(t,n){return e(t,n,s.nestingPath)}),gt&&!s.subRows&&u&&gt(s))}(e,n)}),Ft.map(te)),jt?function(){var e=A(Wt,void 0,void 0,t),n=l.splitProps(k(Wt,void 0,void 0,t));return i.a.createElement(ht,L({className:e.className,style:L({},e.style,{minWidth:Ut+"px"})},e.rest),i.a.createElement(ct,L({className:o()(n.className),style:n.style},n.rest),Tt.map(ee)))}():null),R&&F?i.a.createElement("div",{className:"pagination-bottom"},n):null,!Rt.length&&i.a.createElement(mt,Xt,l.normalizeComponent(z)),i.a.createElement(vt,L({loading:J,loadingText:N},Zt)))};return n?n(Wt,ne,this):ne()}}]),e}();D.propTypes=O,D.defaultProps=S;e.a=D},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",function(){return i})},,function(t,e,n){"use strict";var r=n(39),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,a,o,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,a,o,s],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function x(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}function w(){}function A(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&y("85"),this.updater.enqueueSetState(this,t,e,"setState")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=x.prototype;var k=A.prototype=new w;k.constructor=A,r(k,x.prototype),k.isPureReactComponent=!0;var M={current:null},T={current:null},S=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,n){var r=void 0,i={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)S.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:t,key:o,ref:s,props:i,_owner:T.current}}function O(t){return"object"===typeof t&&null!==t&&t.$$typeof===a}var P=/\/+/g,L=[];function R(t,e,n,r){if(L.length){var i=L.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function D(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>L.length&&L.push(t)}function F(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return r(i,e,""===n?"."+j(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+j(s=e[l],l);u+=t(s,c,r,i)}else if(c=null===e||"object"!==typeof e?null:"function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+j(s,l++),r,i);else"object"===s&&y("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return u}(t,"",e,n)}function j(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function z(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?I(t,r,n,function(t){return t}):null!=t&&(O(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(P,"$&/")+"/")+n)),r.push(t))}function I(t,e,n,r,i){var a="";null!=n&&(a=(""+n).replace(P,"$&/")+"/"),F(t,z,e=R(e,a,r,i)),D(e)}function B(){var t=M.current;return null===t&&y("321"),t}var q={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return I(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;F(t,N,e=R(null,null,e,n)),D(e)},count:function(t){return F(t,function(){return null},null)},toArray:function(t){var e=[];return I(t,e,null,function(t){return t}),e},only:function(t){return O(t)||y("143"),t}},createRef:function(){return{current:null}},Component:x,PureComponent:A,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:h,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:v,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return B().useCallback(t,e)},useContext:function(t,e){return B().useContext(t,e)},useEffect:function(t,e){return B().useEffect(t,e)},useImperativeHandle:function(t,e,n){return B().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return B().useLayoutEffect(t,e)},useMemo:function(t,e){return B().useMemo(t,e)},useReducer:function(t,e,n){return B().useReducer(t,e,n)},useRef:function(t){return B().useRef(t)},useState:function(t){return B().useState(t)},Fragment:s,StrictMode:u,Suspense:p,createElement:E,cloneElement:function(t,e,n){(null===t||void 0===t)&&y("267",t);var i=void 0,o=r({},t.props),s=t.key,u=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,l=T.current),void 0!==e.key&&(s=""+e.key);var c=void 0;for(i in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)S.call(e,i)&&!C.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){c=Array(i);for(var f=0;f<i;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:a,type:t.type,key:s,ref:u,props:o,_owner:l}},createFactory:function(t){var e=E.bind(null,t);return e.type=t,e},isValidElement:O,version:"16.8.6",unstable_ConcurrentMode:d,unstable_Profiler:l,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:M,ReactCurrentOwner:T,assign:r}},U={default:q},H=U&&q||U;t.exports=H.default||H},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,o,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(s[l]=n[l]);if(r){o=r(n);for(var c=0;c<o.length;c++)a.call(n,o[c])&&(s[o[c]]=n[o[c]])}}return s}},function(t,e,n){"use strict";var r=n(41);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,,function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],o=n[1],s=new a(function(t,e,n){return 3*(e+n)/4-n}(0,r,o)),u=0,c=o>0?r-4:r,f=0;f<c;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;2===o&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,s[u++]=255&e);1===o&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+t[e+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[n+h]=255&o,h+=p,o/=256,l-=8);t[n+h-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(t,e,n){var r=c;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var c="suspendedStart",f="suspendedYield",d="executing",h="completed",p={};function v(){}function g(){}function m(){}var y={};y[a]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(C([])));_&&_!==n&&r.call(_,a)&&(y=_);var x=m.prototype=v.prototype=Object.create(y);function w(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function A(t){var e;this._invoke=function(n,i){function a(){return new Promise(function(e,a){!function e(n,i,a,o){var s=l(t[n],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(c).then(function(t){u.value=t,a(u)},function(t){return e("throw",t,a,o)})}o(s.arg)}(n,i,e,a)})}return e=e?e.then(a,a):a()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:E}}function E(){return{value:e,done:!0}}return g.prototype=x.constructor=m,m.constructor=g,m[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(A.prototype),A.prototype[o]=function(){return this},t.AsyncIterator=A,t.async=function(e,n,r,i){var a=new A(u(e,n,r,i));return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},w(x),x[s]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},,,function(t,e,n){},function(t,e,n){t.exports=n(52)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSVLink=e.CSVDownload=void 0;var r=a(n(53)),i=a(n(54));function a(t){return t&&t.__esModule?t:{default:t}}e.CSVDownload=r.default,e.CSVLink=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),o=(r=a)&&r.__esModule?r:{default:r},s=n(21),u=n(22);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Component),i(e,[{key:"buildURI",value:function(){return s.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var t=this.props,e=t.data,n=t.headers,r=t.separator,i=t.enclosingCharacter,a=t.uFEFF,o=t.target,s=t.specs,u=t.replace;this.state.page=window.open(this.buildURI(e,a,n,r,i),o,s,u)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),e}();l.defaultProps=Object.assign(u.defaultProps,{target:"_blank"}),l.propTypes=u.propTypes,e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),s=(r=o)&&r.__esModule?r:{default:r},u=n(21),l=n(22);var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.buildURI=n.buildURI.bind(n),n.state={href:""},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Component),a(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.data,n=t.headers,r=t.separator,i=t.uFEFF,a=t.enclosingCharacter;this.setState({href:this.buildURI(e,i,n,r,a)})}},{key:"componentWillReceiveProps",value:function(t){var e=t.data,n=t.headers,r=t.separator,i=t.uFEFF;this.setState({href:this.buildURI(e,i,n,r)})}},{key:"buildURI",value:function(){return u.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(t,e,n,r,i,a){if(window.navigator.msSaveOrOpenBlob){t.preventDefault();var o=new Blob([(0,u.toCSV)(e,n,r,a)]);return window.navigator.msSaveBlob(o,i),!1}}},{key:"handleAsyncClick",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.props.onClick(t,function(n){!1!==n?e.handleLegacy.apply(e,[t].concat(r)):t.preventDefault()})}},{key:"handleSyncClick",value:function(t){if(!1===this.props.onClick(t))t.preventDefault();else{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.handleLegacy.apply(this,[t].concat(n))}}},{key:"handleClick",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){if("function"===typeof t.props.onClick)return t.props.asyncOnClick?t.handleAsyncClick.apply(t,[e].concat(n)):t.handleSyncClick.apply(t,[e].concat(n));t.handleLegacy.apply(t,[e].concat(n))}}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,r=e.headers,a=e.separator,o=e.filename,u=(e.uFEFF,e.children),l=(e.onClick,e.asyncOnClick,e.enclosingCharacter),c=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(e,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]);return s.default.createElement("a",i({download:o},c,{ref:function(e){return t.link=e},target:"_self",href:this.state.href,onClick:this.handleClick(n,r,a,o,l)}),u)}}]),e}();c.defaultProps=l.defaultProps,c.propTypes=l.propTypes,e.default=c},,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},function(t,e,n){"use strict";t.exports=n(60)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116;function m(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case d:case o:case u:case s:case p:return t;default:switch(t=t&&t.$$typeof){case c:case h:case l:return t;default:return e}}case g:case v:case a:return e}}}function y(t){return m(t)===d}e.typeOf=m,e.AsyncMode=f,e.ConcurrentMode=d,e.ContextConsumer=c,e.ContextProvider=l,e.Element=i,e.ForwardRef=h,e.Fragment=o,e.Lazy=g,e.Memo=v,e.Portal=a,e.Profiler=u,e.StrictMode=s,e.Suspense=p,e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===d||t===u||t===s||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===v||t.$$typeof===l||t.$$typeof===c||t.$$typeof===h)},e.isAsyncMode=function(t){return y(t)||m(t)===f},e.isConcurrentMode=y,e.isContextConsumer=function(t){return m(t)===c},e.isContextProvider=function(t){return m(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return m(t)===h},e.isFragment=function(t){return m(t)===o},e.isLazy=function(t){return m(t)===g},e.isMemo=function(t){return m(t)===v},e.isPortal=function(t){return m(t)===a},e.isProfiler=function(t){return m(t)===u},e.isStrictMode=function(t){return m(t)===s},e.isSuspense=function(t){return m(t)===p}},function(t,e,n){(function(t,r){var i;(function(){var a,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,h=2,p=4,v=1,g=2,m=1,y=2,b=4,_=8,x=16,w=32,A=64,k=128,M=256,T=512,S=30,C="...",E=800,O=16,P=1,L=2,R=1/0,D=9007199254740991,F=1.7976931348623157e308,j=NaN,N=4294967295,z=N-1,I=N>>>1,B=[["ary",k],["bind",m],["bindKey",y],["curry",_],["curryRight",x],["flip",T],["partial",w],["partialRight",A],["rearg",M]],q="[object Arguments]",U="[object Array]",H="[object AsyncFunction]",W="[object Boolean]",G="[object Date]",V="[object DOMException]",Y="[object Error]",Z="[object Function]",X="[object GeneratorFunction]",$="[object Map]",J="[object Number]",K="[object Null]",Q="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",at="[object Undefined]",ot="[object WeakMap]",st="[object WeakSet]",ut="[object ArrayBuffer]",lt="[object DataView]",ct="[object Float32Array]",ft="[object Float64Array]",dt="[object Int8Array]",ht="[object Int16Array]",pt="[object Int32Array]",vt="[object Uint8Array]",gt="[object Uint8ClampedArray]",mt="[object Uint16Array]",yt="[object Uint32Array]",bt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,At=/[&<>"']/g,kt=RegExp(wt.source),Mt=RegExp(At.source),Tt=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,Et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lt=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(Lt.source),Dt=/^\s+|\s+$/g,Ft=/^\s+/,jt=/\s+$/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zt=/\{\n\/\* \[wrapped with (.+)\] \*/,It=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,Wt=/^[-+]0x[0-9a-f]+$/i,Gt=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,Yt=/^0o[0-7]+$/i,Zt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,Kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Qt+"]",ne="["+Kt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",ae="[a-z\\xdf-\\xf6\\xf8-\\xff]",oe="[^\\ud800-\\udfff"+Qt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",ue="[^\\ud800-\\udfff]",le="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",de="(?:"+ae+"|"+oe+")",he="(?:"+fe+"|"+oe+")",pe="(?:"+ne+"|"+se+")"+"?",ve="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[ue,le,ce].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),ge="(?:"+[ie,le,ce].join("|")+")"+ve,me="(?:"+[ue+ne+"?",ne,le,ce,te].join("|")+")",ye=RegExp("['\u2019]","g"),be=RegExp(ne,"g"),_e=RegExp(se+"(?="+se+")|"+me+ve,"g"),xe=RegExp([fe+"?"+ae+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ee,fe,"$"].join("|")+")",he+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ee,fe+de,"$"].join("|")+")",fe+"?"+de+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",fe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,ge].join("|"),"g"),we=RegExp("[\\u200d\\ud800-\\udfff"+Kt+"\\ufe0e\\ufe0f]"),Ae=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,Te={};Te[ct]=Te[ft]=Te[dt]=Te[ht]=Te[pt]=Te[vt]=Te[gt]=Te[mt]=Te[yt]=!0,Te[q]=Te[U]=Te[ut]=Te[W]=Te[lt]=Te[G]=Te[Y]=Te[Z]=Te[$]=Te[J]=Te[Q]=Te[et]=Te[nt]=Te[rt]=Te[ot]=!1;var Se={};Se[q]=Se[U]=Se[ut]=Se[lt]=Se[W]=Se[G]=Se[ct]=Se[ft]=Se[dt]=Se[ht]=Se[pt]=Se[$]=Se[J]=Se[Q]=Se[et]=Se[nt]=Se[rt]=Se[it]=Se[vt]=Se[gt]=Se[mt]=Se[yt]=!0,Se[Y]=Se[Z]=Se[ot]=!1;var Ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ee=parseFloat,Oe=parseInt,Pe="object"==typeof t&&t&&t.Object===Object&&t,Le="object"==typeof self&&self&&self.Object===Object&&self,Re=Pe||Le||Function("return this")(),De=e&&!e.nodeType&&e,Fe=De&&"object"==typeof r&&r&&!r.nodeType&&r,je=Fe&&Fe.exports===De,Ne=je&&Pe.process,ze=function(){try{var t=Fe&&Fe.require&&Fe.require("util").types;return t||Ne&&Ne.binding&&Ne.binding("util")}catch(e){}}(),Ie=ze&&ze.isArrayBuffer,Be=ze&&ze.isDate,qe=ze&&ze.isMap,Ue=ze&&ze.isRegExp,He=ze&&ze.isSet,We=ze&&ze.isTypedArray;function Ge(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ve(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function Ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ze(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Xe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function $e(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Je(t,e){return!!(null==t?0:t.length)&&un(t,e,0)>-1}function Ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Qe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var an=dn("length");function on(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function sn(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function un(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):sn(t,cn,n)}function ln(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function cn(t){return t!==t}function fn(t,e){var n=null==t?0:t.length;return n?vn(t,e)/n:j}function dn(t){return function(e){return null==e?a:e[t]}}function hn(t){return function(e){return null==t?a:t[e]}}function pn(t,e,n,r,i){return i(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)}),n}function vn(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==a&&(n=n===a?o:n+o)}return n}function gn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function mn(t){return function(e){return t(e)}}function yn(t,e){return Qe(e,function(e){return t[e]})}function bn(t,e){return t.has(e)}function _n(t,e){for(var n=-1,r=t.length;++n<r&&un(e,t[n],0)>-1;);return n}function xn(t,e){for(var n=t.length;n--&&un(e,t[n],0)>-1;);return n}var wn=hn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),An=hn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function kn(t){return"\\"+Ce[t]}function Mn(t){return we.test(t)}function Tn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Sn(t,e){return function(n){return t(e(n))}}function Cn(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==f||(t[n]=f,a[i++]=n)}return a}function En(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function On(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Pn(t){return Mn(t)?function(t){var e=_e.lastIndex=0;for(;_e.test(t);)++e;return e}(t):an(t)}function Ln(t){return Mn(t)?function(t){return t.match(_e)||[]}(t):function(t){return t.split("")}(t)}var Rn=hn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Dn=function t(e){var n=(e=null==e?Re:Dn.defaults(Re.Object(),e,Dn.pick(Re,ke))).Array,r=e.Date,i=e.Error,Kt=e.Function,Qt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,re=e.TypeError,ie=n.prototype,ae=Kt.prototype,oe=te.prototype,se=e["__core-js_shared__"],ue=ae.toString,le=oe.hasOwnProperty,ce=0,fe=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),de=oe.toString,he=ue.call(te),pe=Re._,ve=ee("^"+ue.call(le).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=je?e.Buffer:a,me=e.Symbol,_e=e.Uint8Array,we=ge?ge.allocUnsafe:a,Ce=Sn(te.getPrototypeOf,te),Pe=te.create,Le=oe.propertyIsEnumerable,De=ie.splice,Fe=me?me.isConcatSpreadable:a,Ne=me?me.iterator:a,ze=me?me.toStringTag:a,an=function(){try{var t=Na(te,"defineProperty");return t({},"",{}),t}catch(e){}}(),hn=e.clearTimeout!==Re.clearTimeout&&e.clearTimeout,Fn=r&&r.now!==Re.Date.now&&r.now,jn=e.setTimeout!==Re.setTimeout&&e.setTimeout,Nn=Qt.ceil,zn=Qt.floor,In=te.getOwnPropertySymbols,Bn=ge?ge.isBuffer:a,qn=e.isFinite,Un=ie.join,Hn=Sn(te.keys,te),Wn=Qt.max,Gn=Qt.min,Vn=r.now,Yn=e.parseInt,Zn=Qt.random,Xn=ie.reverse,$n=Na(e,"DataView"),Jn=Na(e,"Map"),Kn=Na(e,"Promise"),Qn=Na(e,"Set"),tr=Na(e,"WeakMap"),er=Na(te,"create"),nr=tr&&new tr,rr={},ir=lo($n),ar=lo(Jn),or=lo(Kn),sr=lo(Qn),ur=lo(tr),lr=me?me.prototype:a,cr=lr?lr.valueOf:a,fr=lr?lr.toString:a;function dr(t){if(Ss(t)&&!gs(t)&&!(t instanceof gr)){if(t instanceof vr)return t;if(le.call(t,"__wrapped__"))return co(t)}return new vr(t)}var hr=function(){function t(){}return function(e){if(!Ts(e))return{};if(Pe)return Pe(e);t.prototype=e;var n=new t;return t.prototype=a,n}}();function pr(){}function vr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}function gr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N,this.__views__=[]}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function yr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new br;++e<n;)this.add(t[e])}function xr(t){var e=this.__data__=new yr(t);this.size=e.size}function wr(t,e){var n=gs(t),r=!n&&vs(t),i=!n&&!r&&_s(t),a=!n&&!r&&!i&&Fs(t),o=n||r||i||a,s=o?gn(t.length,ne):[],u=s.length;for(var l in t)!e&&!le.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Wa(l,u))||s.push(l);return s}function Ar(t){var e=t.length;return e?t[_i(0,e-1)]:a}function kr(t,e){return oo(ea(t),Rr(e,0,t.length))}function Mr(t){return oo(ea(t))}function Tr(t,e,n){(n===a||ds(t[e],n))&&(n!==a||e in t)||Pr(t,e,n)}function Sr(t,e,n){var r=t[e];le.call(t,e)&&ds(r,n)&&(n!==a||e in t)||Pr(t,e,n)}function Cr(t,e){for(var n=t.length;n--;)if(ds(t[n][0],e))return n;return-1}function Er(t,e,n,r){return zr(t,function(t,i,a){e(r,t,n(t),a)}),r}function Or(t,e){return t&&na(e,ru(e),t)}function Pr(t,e,n){"__proto__"==e&&an?an(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Lr(t,e){for(var r=-1,i=e.length,o=n(i),s=null==t;++r<i;)o[r]=s?a:Ks(t,e[r]);return o}function Rr(t,e,n){return t===t&&(n!==a&&(t=t<=n?t:n),e!==a&&(t=t>=e?t:e)),t}function Dr(t,e,n,r,i,o){var s,u=e&d,l=e&h,c=e&p;if(n&&(s=i?n(t,r,i,o):n(t)),s!==a)return s;if(!Ts(t))return t;var f=gs(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return ea(t,s)}else{var v=Ba(t),g=v==Z||v==X;if(_s(t))return Xi(t,u);if(v==Q||v==q||g&&!i){if(s=l||g?{}:Ua(t),!u)return l?function(t,e){return na(t,Ia(t),e)}(t,function(t,e){return t&&na(e,iu(e),t)}(s,t)):function(t,e){return na(t,za(t),e)}(t,Or(s,t))}else{if(!Se[v])return i?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case ut:return $i(t);case W:case G:return new i(+t);case lt:return function(t,e){var n=e?$i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ct:case ft:case dt:case ht:case pt:case vt:case gt:case mt:case yt:return Ji(t,n);case $:return new i;case J:case rt:return new i(t);case et:return function(t){var e=new t.constructor(t.source,Ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new i;case it:return r=t,cr?te(cr.call(r)):{}}}(t,v,u)}}o||(o=new xr);var m=o.get(t);if(m)return m;o.set(t,s),Ls(t)?t.forEach(function(r){s.add(Dr(r,e,n,r,t,o))}):Cs(t)&&t.forEach(function(r,i){s.set(i,Dr(r,e,n,i,t,o))});var y=f?a:(c?l?Oa:Ea:l?iu:ru)(t);return Ye(y||t,function(r,i){y&&(r=t[i=r]),Sr(s,i,Dr(r,e,n,i,t,o))}),s}function Fr(t,e,n){var r=n.length;if(null==t)return!r;for(t=te(t);r--;){var i=n[r],o=e[i],s=t[i];if(s===a&&!(i in t)||!o(s))return!1}return!0}function jr(t,e,n){if("function"!=typeof t)throw new re(u);return no(function(){t.apply(a,n)},e)}function Nr(t,e,n,r){var i=-1,a=Je,s=!0,u=t.length,l=[],c=e.length;if(!u)return l;n&&(e=Qe(e,mn(n))),r?(a=Ke,s=!1):e.length>=o&&(a=bn,s=!1,e=new _r(e));t:for(;++i<u;){var f=t[i],d=null==n?f:n(f);if(f=r||0!==f?f:0,s&&d===d){for(var h=c;h--;)if(e[h]===d)continue t;l.push(f)}else a(e,d,r)||l.push(f)}return l}dr.templateSettings={escape:Tt,evaluate:St,interpolate:Ct,variable:"",imports:{_:dr}},dr.prototype=pr.prototype,dr.prototype.constructor=dr,vr.prototype=hr(pr.prototype),vr.prototype.constructor=vr,gr.prototype=hr(pr.prototype),gr.prototype.constructor=gr,mr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},mr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mr.prototype.get=function(t){var e=this.__data__;if(er){var n=e[t];return n===l?a:n}return le.call(e,t)?e[t]:a},mr.prototype.has=function(t){var e=this.__data__;return er?e[t]!==a:le.call(e,t)},mr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=er&&e===a?l:e,this},yr.prototype.clear=function(){this.__data__=[],this.size=0},yr.prototype.delete=function(t){var e=this.__data__,n=Cr(e,t);return!(n<0)&&(n==e.length-1?e.pop():De.call(e,n,1),--this.size,!0)},yr.prototype.get=function(t){var e=this.__data__,n=Cr(e,t);return n<0?a:e[n][1]},yr.prototype.has=function(t){return Cr(this.__data__,t)>-1},yr.prototype.set=function(t,e){var n=this.__data__,r=Cr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},br.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Jn||yr),string:new mr}},br.prototype.delete=function(t){var e=Fa(this,t).delete(t);return this.size-=e?1:0,e},br.prototype.get=function(t){return Fa(this,t).get(t)},br.prototype.has=function(t){return Fa(this,t).has(t)},br.prototype.set=function(t,e){var n=Fa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},_r.prototype.add=_r.prototype.push=function(t){return this.__data__.set(t,l),this},_r.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.clear=function(){this.__data__=new yr,this.size=0},xr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xr.prototype.get=function(t){return this.__data__.get(t)},xr.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof yr){var r=n.__data__;if(!Jn||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new br(r)}return n.set(t,e),this.size=n.size,this};var zr=aa(Vr),Ir=aa(Yr,!0);function Br(t,e){var n=!0;return zr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function qr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(u===a?s===s&&!Ds(s):n(s,u)))var u=s,l=o}return l}function Ur(t,e){var n=[];return zr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Hr(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=Ha),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Hr(s,e-1,n,r,i):tn(i,s):r||(i[i.length]=s)}return i}var Wr=oa(),Gr=oa(!0);function Vr(t,e){return t&&Wr(t,e,ru)}function Yr(t,e){return t&&Gr(t,e,ru)}function Zr(t,e){return $e(e,function(e){return As(t[e])})}function Xr(t,e){for(var n=0,r=(e=Gi(e,t)).length;null!=t&&n<r;)t=t[uo(e[n++])];return n&&n==r?t:a}function $r(t,e,n){var r=e(t);return gs(t)?r:tn(r,n(t))}function Jr(t){return null==t?t===a?at:K:ze&&ze in te(t)?function(t){var e=le.call(t,ze),n=t[ze];try{t[ze]=a;var r=!0}catch(o){}var i=de.call(t);return r&&(e?t[ze]=n:delete t[ze]),i}(t):function(t){return de.call(t)}(t)}function Kr(t,e){return t>e}function Qr(t,e){return null!=t&&le.call(t,e)}function ti(t,e){return null!=t&&e in te(t)}function ei(t,e,r){for(var i=r?Ke:Je,o=t[0].length,s=t.length,u=s,l=n(s),c=1/0,f=[];u--;){var d=t[u];u&&e&&(d=Qe(d,mn(e))),c=Gn(d.length,c),l[u]=!r&&(e||o>=120&&d.length>=120)?new _r(u&&d):a}d=t[0];var h=-1,p=l[0];t:for(;++h<o&&f.length<c;){var v=d[h],g=e?e(v):v;if(v=r||0!==v?v:0,!(p?bn(p,g):i(f,g,r))){for(u=s;--u;){var m=l[u];if(!(m?bn(m,g):i(t[u],g,r)))continue t}p&&p.push(g),f.push(v)}}return f}function ni(t,e,n){var r=null==(t=Qa(t,e=Gi(e,t)))?t:t[uo(wo(e))];return null==r?a:Ge(r,t,n)}function ri(t){return Ss(t)&&Jr(t)==q}function ii(t,e,n,r,i){return t===e||(null==t||null==e||!Ss(t)&&!Ss(e)?t!==t&&e!==e:function(t,e,n,r,i,o){var s=gs(t),u=gs(e),l=s?U:Ba(t),c=u?U:Ba(e),f=(l=l==q?Q:l)==Q,d=(c=c==q?Q:c)==Q,h=l==c;if(h&&_s(t)){if(!_s(e))return!1;s=!0,f=!1}if(h&&!f)return o||(o=new xr),s||Fs(t)?Sa(t,e,n,r,i,o):function(t,e,n,r,i,a,o){switch(n){case lt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ut:return!(t.byteLength!=e.byteLength||!a(new _e(t),new _e(e)));case W:case G:case J:return ds(+t,+e);case Y:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case $:var s=Tn;case nt:var u=r&v;if(s||(s=En),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;r|=g,o.set(t,e);var c=Sa(s(t),s(e),r,i,a,o);return o.delete(t),c;case it:if(cr)return cr.call(t)==cr.call(e)}return!1}(t,e,l,n,r,i,o);if(!(n&v)){var p=f&&le.call(t,"__wrapped__"),m=d&&le.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,b=m?e.value():e;return o||(o=new xr),i(y,b,n,r,o)}}return!!h&&(o||(o=new xr),function(t,e,n,r,i,o){var s=n&v,u=Ea(t),l=u.length,c=Ea(e).length;if(l!=c&&!s)return!1;for(var f=l;f--;){var d=u[f];if(!(s?d in e:le.call(e,d)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);for(var g=s;++f<l;){d=u[f];var m=t[d],y=e[d];if(r)var b=s?r(y,m,d,e,t,o):r(m,y,d,t,e,o);if(!(b===a?m===y||i(m,y,n,r,o):b)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o))}(t,e,n,r,ii,i))}function ai(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=te(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var l=(u=n[i])[0],c=t[l],f=u[1];if(s&&u[2]){if(c===a&&!(l in t))return!1}else{var d=new xr;if(r)var h=r(c,f,l,t,e,d);if(!(h===a?ii(f,c,v|g,r,d):h))return!1}}return!0}function oi(t){return!(!Ts(t)||(e=t,fe&&fe in e))&&(As(t)?ve:Vt).test(lo(t));var e}function si(t){return"function"==typeof t?t:null==t?Eu:"object"==typeof t?gs(t)?hi(t[0],t[1]):di(t):zu(t)}function ui(t){if(!Xa(t))return Hn(t);var e=[];for(var n in te(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function li(t){if(!Ts(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=Xa(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function ci(t,e){return t<e}function fi(t,e){var r=-1,i=ys(t)?n(t.length):[];return zr(t,function(t,n,a){i[++r]=e(t,n,a)}),i}function di(t){var e=ja(t);return 1==e.length&&e[0][2]?Ja(e[0][0],e[0][1]):function(n){return n===t||ai(n,t,e)}}function hi(t,e){return Va(t)&&$a(e)?Ja(uo(t),e):function(n){var r=Ks(n,t);return r===a&&r===e?Qs(n,t):ii(e,r,v|g)}}function pi(t,e,n,r,i){t!==e&&Wr(e,function(o,s){if(i||(i=new xr),Ts(o))!function(t,e,n,r,i,o,s){var u=to(t,n),l=to(e,n),c=s.get(l);if(c)Tr(t,n,c);else{var f=o?o(u,l,n+"",t,e,s):a,d=f===a;if(d){var h=gs(l),p=!h&&_s(l),v=!h&&!p&&Fs(l);f=l,h||p||v?gs(u)?f=u:bs(u)?f=ea(u):p?(d=!1,f=Xi(l,!0)):v?(d=!1,f=Ji(l,!0)):f=[]:Os(l)||vs(l)?(f=u,vs(u)?f=Hs(u):Ts(u)&&!As(u)||(f=Ua(l))):d=!1}d&&(s.set(l,f),i(f,l,r,o,s),s.delete(l)),Tr(t,n,f)}}(t,e,s,n,pi,r,i);else{var u=r?r(to(t,s),o,s+"",t,e,i):a;u===a&&(u=o),Tr(t,s,u)}},iu)}function vi(t,e){var n=t.length;if(n)return Wa(e+=e<0?n:0,n)?t[e]:a}function gi(t,e,n){var r=-1;return e=Qe(e.length?e:[Eu],mn(Da())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fi(t,function(t,n,i){return{criteria:Qe(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var u=Ki(i[r],a[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function mi(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=Xr(t,o);n(s,o)&&Mi(a,Gi(o,t),s)}return a}function yi(t,e,n,r){var i=r?ln:un,a=-1,o=e.length,s=t;for(t===e&&(e=ea(e)),n&&(s=Qe(t,mn(n)));++a<o;)for(var u=0,l=e[a],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&De.call(s,u,1),De.call(t,u,1);return t}function bi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;Wa(i)?De.call(t,i,1):Ni(t,i)}}return t}function _i(t,e){return t+zn(Zn()*(e-t+1))}function xi(t,e){var n="";if(!t||e<1||e>D)return n;do{e%2&&(n+=t),(e=zn(e/2))&&(t+=t)}while(e);return n}function wi(t,e){return ro(Ka(t,e,Eu),t+"")}function Ai(t){return Ar(du(t))}function ki(t,e){var n=du(t);return oo(n,Rr(e,0,n.length))}function Mi(t,e,n,r){if(!Ts(t))return t;for(var i=-1,o=(e=Gi(e,t)).length,s=o-1,u=t;null!=u&&++i<o;){var l=uo(e[i]),c=n;if(i!=s){var f=u[l];(c=r?r(f,l,u):a)===a&&(c=Ts(f)?f:Wa(e[i+1])?[]:{})}Sr(u,l,c),u=u[l]}return t}var Ti=nr?function(t,e){return nr.set(t,e),t}:Eu,Si=an?function(t,e){return an(t,"toString",{configurable:!0,enumerable:!1,value:Tu(e),writable:!0})}:Eu;function Ci(t){return oo(du(t))}function Ei(t,e,r){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=n(a);++i<a;)o[i]=t[i+e];return o}function Oi(t,e){var n;return zr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Pi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=I){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!Ds(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return Li(t,e,Eu,n)}function Li(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,s=e!==e,u=null===e,l=Ds(e),c=e===a;i<o;){var f=zn((i+o)/2),d=n(t[f]),h=d!==a,p=null===d,v=d===d,g=Ds(d);if(s)var m=r||v;else m=c?v&&(r||h):u?v&&h&&(r||!p):l?v&&h&&!p&&(r||!g):!p&&!g&&(r?d<=e:d<e);m?i=f+1:o=f}return Gn(o,z)}function Ri(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!ds(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Di(t){return"number"==typeof t?t:Ds(t)?j:+t}function Fi(t){if("string"==typeof t)return t;if(gs(t))return Qe(t,Fi)+"";if(Ds(t))return fr?fr.call(t):"";var e=t+"";return"0"==e&&1/t==-R?"-0":e}function ji(t,e,n){var r=-1,i=Je,a=t.length,s=!0,u=[],l=u;if(n)s=!1,i=Ke;else if(a>=o){var c=e?null:xa(t);if(c)return En(c);s=!1,i=bn,l=new _r}else l=e?[]:u;t:for(;++r<a;){var f=t[r],d=e?e(f):f;if(f=n||0!==f?f:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue t;e&&l.push(d),u.push(f)}else i(l,d,n)||(l!==u&&l.push(d),u.push(f))}return u}function Ni(t,e){return null==(t=Qa(t,e=Gi(e,t)))||delete t[uo(wo(e))]}function zi(t,e,n,r){return Mi(t,e,n(Xr(t,e)),r)}function Ii(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?Ei(t,r?0:a,r?a+1:i):Ei(t,r?a+1:0,r?i:a)}function Bi(t,e){var n=t;return n instanceof gr&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function qi(t,e,r){var i=t.length;if(i<2)return i?ji(t[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=t[a],u=-1;++u<i;)u!=a&&(o[a]=Nr(o[a]||s,t[u],e,r));return ji(Hr(o,1),e,r)}function Ui(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var u=r<o?e[r]:a;n(s,t[r],u)}return s}function Hi(t){return bs(t)?t:[]}function Wi(t){return"function"==typeof t?t:Eu}function Gi(t,e){return gs(t)?t:Va(t,e)?[t]:so(Ws(t))}var Vi=wi;function Yi(t,e,n){var r=t.length;return n=n===a?r:n,!e&&n>=r?t:Ei(t,e,n)}var Zi=hn||function(t){return Re.clearTimeout(t)};function Xi(t,e){if(e)return t.slice();var n=t.length,r=we?we(n):new t.constructor(n);return t.copy(r),r}function $i(t){var e=new t.constructor(t.byteLength);return new _e(e).set(new _e(t)),e}function Ji(t,e){var n=e?$i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ki(t,e){if(t!==e){var n=t!==a,r=null===t,i=t===t,o=Ds(t),s=e!==a,u=null===e,l=e===e,c=Ds(e);if(!u&&!c&&!o&&t>e||o&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!l)return-1}return 0}function Qi(t,e,r,i){for(var a=-1,o=t.length,s=r.length,u=-1,l=e.length,c=Wn(o-s,0),f=n(l+c),d=!i;++u<l;)f[u]=e[u];for(;++a<s;)(d||a<o)&&(f[r[a]]=t[a]);for(;c--;)f[u++]=t[a++];return f}function ta(t,e,r,i){for(var a=-1,o=t.length,s=-1,u=r.length,l=-1,c=e.length,f=Wn(o-u,0),d=n(f+c),h=!i;++a<f;)d[a]=t[a];for(var p=a;++l<c;)d[p+l]=e[l];for(;++s<u;)(h||a<o)&&(d[p+r[s]]=t[a++]);return d}function ea(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function na(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],l=r?r(n[u],t[u],u,n,t):a;l===a&&(l=t[u]),i?Pr(n,u,l):Sr(n,u,l)}return n}function ra(t,e){return function(n,r){var i=gs(n)?Ve:Er,a=e?e():{};return i(n,t,Da(r,2),a)}}function ia(t){return wi(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=t.length>3&&"function"==typeof o?(i--,o):a,s&&Ga(n[0],n[1],s)&&(o=i<3?a:o,i=1),e=te(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e})}function aa(t,e){return function(n,r){if(null==n)return n;if(!ys(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=te(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function oa(t){return function(e,n,r){for(var i=-1,a=te(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}function sa(t){return function(e){var n=Mn(e=Ws(e))?Ln(e):a,r=n?n[0]:e.charAt(0),i=n?Yi(n,1).join(""):e.slice(1);return r[t]()+i}}function ua(t){return function(e){return en(Au(vu(e).replace(ye,"")),t,"")}}function la(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=hr(t.prototype),r=t.apply(n,e);return Ts(r)?r:n}}function ca(t){return function(e,n,r){var i=te(e);if(!ys(e)){var o=Da(n,3);e=ru(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:a}}function fa(t){return Ca(function(e){var n=e.length,r=n,i=vr.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new re(u);if(i&&!s&&"wrapper"==La(o))var s=new vr([],!0)}for(r=s?r:n;++r<n;){var l=La(o=e[r]),c="wrapper"==l?Pa(o):a;s=c&&Ya(c[0])&&c[1]==(k|_|w|M)&&!c[4].length&&1==c[9]?s[La(c[0])].apply(s,c[3]):1==o.length&&Ya(o)?s[l]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&gs(r))return s.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}})}function da(t,e,r,i,o,s,u,l,c,f){var d=e&k,h=e&m,p=e&y,v=e&(_|x),g=e&T,b=p?a:la(t);return function m(){for(var y=arguments.length,_=n(y),x=y;x--;)_[x]=arguments[x];if(v)var w=Ra(m),A=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(_,w);if(i&&(_=Qi(_,i,o,v)),s&&(_=ta(_,s,u,v)),y-=A,v&&y<f){var k=Cn(_,w);return ba(t,e,da,m.placeholder,r,_,k,l,c,f-y)}var M=h?r:this,T=p?M[t]:t;return y=_.length,l?_=function(t,e){for(var n=t.length,r=Gn(e.length,n),i=ea(t);r--;){var o=e[r];t[r]=Wa(o,n)?i[o]:a}return t}(_,l):g&&y>1&&_.reverse(),d&&c<y&&(_.length=c),this&&this!==Re&&this instanceof m&&(T=b||la(T)),T.apply(M,_)}}function ha(t,e){return function(n,r){return function(t,e,n,r){return Vr(t,function(t,i,a){e(r,n(t),i,a)}),r}(n,t,e(r),{})}}function pa(t,e){return function(n,r){var i;if(n===a&&r===a)return e;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=Fi(n),r=Fi(r)):(n=Di(n),r=Di(r)),i=t(n,r)}return i}}function va(t){return Ca(function(e){return e=Qe(e,mn(Da())),wi(function(n){var r=this;return t(e,function(t){return Ge(t,r,n)})})})}function ga(t,e){var n=(e=e===a?" ":Fi(e)).length;if(n<2)return n?xi(e,t):e;var r=xi(e,Nn(t/Pn(e)));return Mn(e)?Yi(Ln(r),0,t).join(""):r.slice(0,t)}function ma(t){return function(e,r,i){return i&&"number"!=typeof i&&Ga(e,r,i)&&(r=i=a),e=Is(e),r===a?(r=e,e=0):r=Is(r),function(t,e,r,i){for(var a=-1,o=Wn(Nn((e-t)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=t,t+=r;return s}(e,r,i=i===a?e<r?1:-1:Is(i),t)}}function ya(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Us(e),n=Us(n)),t(e,n)}}function ba(t,e,n,r,i,o,s,u,l,c){var f=e&_;e|=f?w:A,(e&=~(f?A:w))&b||(e&=~(m|y));var d=[t,e,i,f?o:a,f?s:a,f?a:o,f?a:s,u,l,c],h=n.apply(a,d);return Ya(t)&&eo(h,d),h.placeholder=r,io(h,t,e)}function _a(t){var e=Qt[t];return function(t,n){if(t=Us(t),(n=null==n?0:Gn(Bs(n),292))&&qn(t)){var r=(Ws(t)+"e").split("e");return+((r=(Ws(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var xa=Qn&&1/En(new Qn([,-0]))[1]==R?function(t){return new Qn(t)}:Du;function wa(t){return function(e){var n=Ba(e);return n==$?Tn(e):n==nt?On(e):function(t,e){return Qe(e,function(e){return[e,t[e]]})}(e,t(e))}}function Aa(t,e,r,i,o,s,l,c){var d=e&y;if(!d&&"function"!=typeof t)throw new re(u);var h=i?i.length:0;if(h||(e&=~(w|A),i=o=a),l=l===a?l:Wn(Bs(l),0),c=c===a?c:Bs(c),h-=o?o.length:0,e&A){var p=i,v=o;i=o=a}var g=d?a:Pa(t),T=[t,e,r,i,o,p,v,s,l,c];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<(m|y|k),o=r==k&&n==_||r==k&&n==M&&t[7].length<=e[8]||r==(k|M)&&e[7].length<=e[8]&&n==_;if(!a&&!o)return t;r&m&&(t[2]=e[2],i|=n&m?0:b);var s=e[3];if(s){var u=t[3];t[3]=u?Qi(u,s,e[4]):s,t[4]=u?Cn(t[3],f):e[4]}(s=e[5])&&(u=t[5],t[5]=u?ta(u,s,e[6]):s,t[6]=u?Cn(t[5],f):e[6]),(s=e[7])&&(t[7]=s),r&k&&(t[8]=null==t[8]?e[8]:Gn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(T,g),t=T[0],e=T[1],r=T[2],i=T[3],o=T[4],!(c=T[9]=T[9]===a?d?0:t.length:Wn(T[9]-h,0))&&e&(_|x)&&(e&=~(_|x)),e&&e!=m)S=e==_||e==x?function(t,e,r){var i=la(t);return function o(){for(var s=arguments.length,u=n(s),l=s,c=Ra(o);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:Cn(u,c);return(s-=f.length)<r?ba(t,e,da,o.placeholder,a,u,f,a,a,r-s):Ge(this&&this!==Re&&this instanceof o?i:t,this,u)}}(t,e,c):e!=w&&e!=(m|w)||o.length?da.apply(a,T):function(t,e,r,i){var a=e&m,o=la(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,f=n(c+u),d=this&&this!==Re&&this instanceof e?o:t;++l<c;)f[l]=i[l];for(;u--;)f[l++]=arguments[++s];return Ge(d,a?r:this,f)}}(t,e,r,i);else var S=function(t,e,n){var r=e&m,i=la(t);return function e(){return(this&&this!==Re&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return io((g?Ti:eo)(S,T),t,e)}function ka(t,e,n,r){return t===a||ds(t,oe[n])&&!le.call(r,n)?e:t}function Ma(t,e,n,r,i,o){return Ts(t)&&Ts(e)&&(o.set(e,t),pi(t,e,a,Ma,o),o.delete(e)),t}function Ta(t){return Os(t)?a:t}function Sa(t,e,n,r,i,o){var s=n&v,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var f=-1,d=!0,h=n&g?new _r:a;for(o.set(t,e),o.set(e,t);++f<u;){var p=t[f],m=e[f];if(r)var y=s?r(m,p,f,e,t,o):r(p,m,f,t,e,o);if(y!==a){if(y)continue;d=!1;break}if(h){if(!rn(e,function(t,e){if(!bn(h,e)&&(p===t||i(p,t,n,r,o)))return h.push(e)})){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Ca(t){return ro(Ka(t,a,mo),t+"")}function Ea(t){return $r(t,ru,za)}function Oa(t){return $r(t,iu,Ia)}var Pa=nr?function(t){return nr.get(t)}:Du;function La(t){for(var e=t.name+"",n=rr[e],r=le.call(rr,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function Ra(t){return(le.call(dr,"placeholder")?dr:t).placeholder}function Da(){var t=dr.iteratee||Ou;return t=t===Ou?si:t,arguments.length?t(arguments[0],arguments[1]):t}function Fa(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ja(t){for(var e=ru(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$a(i)]}return e}function Na(t,e){var n=function(t,e){return null==t?a:t[e]}(t,e);return oi(n)?n:a}var za=In?function(t){return null==t?[]:(t=te(t),$e(In(t),function(e){return Le.call(t,e)}))}:qu,Ia=In?function(t){for(var e=[];t;)tn(e,za(t)),t=Ce(t);return e}:qu,Ba=Jr;function qa(t,e,n){for(var r=-1,i=(e=Gi(e,t)).length,a=!1;++r<i;){var o=uo(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Ms(i)&&Wa(o,i)&&(gs(t)||vs(t))}function Ua(t){return"function"!=typeof t.constructor||Xa(t)?{}:hr(Ce(t))}function Ha(t){return gs(t)||vs(t)||!!(Fe&&t&&t[Fe])}function Wa(t,e){var n=typeof t;return!!(e=null==e?D:e)&&("number"==n||"symbol"!=n&&Zt.test(t))&&t>-1&&t%1==0&&t<e}function Ga(t,e,n){if(!Ts(n))return!1;var r=typeof e;return!!("number"==r?ys(n)&&Wa(e,n.length):"string"==r&&e in n)&&ds(n[e],t)}function Va(t,e){if(gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ds(t))||Ot.test(t)||!Et.test(t)||null!=e&&t in te(e)}function Ya(t){var e=La(t),n=dr[e];if("function"!=typeof n||!(e in gr.prototype))return!1;if(t===n)return!0;var r=Pa(n);return!!r&&t===r[0]}($n&&Ba(new $n(new ArrayBuffer(1)))!=lt||Jn&&Ba(new Jn)!=$||Kn&&"[object Promise]"!=Ba(Kn.resolve())||Qn&&Ba(new Qn)!=nt||tr&&Ba(new tr)!=ot)&&(Ba=function(t){var e=Jr(t),n=e==Q?t.constructor:a,r=n?lo(n):"";if(r)switch(r){case ir:return lt;case ar:return $;case or:return"[object Promise]";case sr:return nt;case ur:return ot}return e});var Za=se?As:Uu;function Xa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||oe)}function $a(t){return t===t&&!Ts(t)}function Ja(t,e){return function(n){return null!=n&&n[t]===e&&(e!==a||t in te(n))}}function Ka(t,e,r){return e=Wn(e===a?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=Wn(i.length-e,0),s=n(o);++a<o;)s[a]=i[e+a];a=-1;for(var u=n(e+1);++a<e;)u[a]=i[a];return u[e]=r(s),Ge(t,this,u)}}function Qa(t,e){return e.length<2?t:Xr(t,Ei(e,0,-1))}function to(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var eo=ao(Ti),no=jn||function(t,e){return Re.setTimeout(t,e)},ro=ao(Si);function io(t,e,n){var r=e+"";return ro(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Nt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ye(B,function(n){var r="_."+n[0];e&n[1]&&!Je(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(zt);return e?e[1].split(It):[]}(r),n)))}function ao(t){var e=0,n=0;return function(){var r=Vn(),i=O-(r-n);if(n=r,i>0){if(++e>=E)return arguments[0]}else e=0;return t.apply(a,arguments)}}function oo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===a?r:e;++n<e;){var o=_i(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var so=function(t){var e=os(t,function(t){return n.size===c&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Pt,function(t,n,r,i){e.push(r?i.replace(qt,"$1"):n||t)}),e});function uo(t){if("string"==typeof t||Ds(t))return t;var e=t+"";return"0"==e&&1/t==-R?"-0":e}function lo(t){if(null!=t){try{return ue.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function co(t){if(t instanceof gr)return t.clone();var e=new vr(t.__wrapped__,t.__chain__);return e.__actions__=ea(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fo=wi(function(t,e){return bs(t)?Nr(t,Hr(e,1,bs,!0)):[]}),ho=wi(function(t,e){var n=wo(e);return bs(n)&&(n=a),bs(t)?Nr(t,Hr(e,1,bs,!0),Da(n,2)):[]}),po=wi(function(t,e){var n=wo(e);return bs(n)&&(n=a),bs(t)?Nr(t,Hr(e,1,bs,!0),a,n):[]});function vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Bs(n);return i<0&&(i=Wn(r+i,0)),sn(t,Da(e,3),i)}function go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==a&&(i=Bs(n),i=n<0?Wn(r+i,0):Gn(i,r-1)),sn(t,Da(e,3),i,!0)}function mo(t){return null!=t&&t.length?Hr(t,1):[]}function yo(t){return t&&t.length?t[0]:a}var bo=wi(function(t){var e=Qe(t,Hi);return e.length&&e[0]===t[0]?ei(e):[]}),_o=wi(function(t){var e=wo(t),n=Qe(t,Hi);return e===wo(n)?e=a:n.pop(),n.length&&n[0]===t[0]?ei(n,Da(e,2)):[]}),xo=wi(function(t){var e=wo(t),n=Qe(t,Hi);return(e="function"==typeof e?e:a)&&n.pop(),n.length&&n[0]===t[0]?ei(n,a,e):[]});function wo(t){var e=null==t?0:t.length;return e?t[e-1]:a}var Ao=wi(ko);function ko(t,e){return t&&t.length&&e&&e.length?yi(t,e):t}var Mo=Ca(function(t,e){var n=null==t?0:t.length,r=Lr(t,e);return bi(t,Qe(e,function(t){return Wa(t,n)?+t:t}).sort(Ki)),r});function To(t){return null==t?t:Xn.call(t)}var So=wi(function(t){return ji(Hr(t,1,bs,!0))}),Co=wi(function(t){var e=wo(t);return bs(e)&&(e=a),ji(Hr(t,1,bs,!0),Da(e,2))}),Eo=wi(function(t){var e=wo(t);return e="function"==typeof e?e:a,ji(Hr(t,1,bs,!0),a,e)});function Oo(t){if(!t||!t.length)return[];var e=0;return t=$e(t,function(t){if(bs(t))return e=Wn(t.length,e),!0}),gn(e,function(e){return Qe(t,dn(e))})}function Po(t,e){if(!t||!t.length)return[];var n=Oo(t);return null==e?n:Qe(n,function(t){return Ge(e,a,t)})}var Lo=wi(function(t,e){return bs(t)?Nr(t,e):[]}),Ro=wi(function(t){return qi($e(t,bs))}),Do=wi(function(t){var e=wo(t);return bs(e)&&(e=a),qi($e(t,bs),Da(e,2))}),Fo=wi(function(t){var e=wo(t);return e="function"==typeof e?e:a,qi($e(t,bs),a,e)}),jo=wi(Oo);var No=wi(function(t){var e=t.length,n=e>1?t[e-1]:a;return n="function"==typeof n?(t.pop(),n):a,Po(t,n)});function zo(t){var e=dr(t);return e.__chain__=!0,e}function Io(t,e){return e(t)}var Bo=Ca(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Lr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof gr&&Wa(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Io,args:[i],thisArg:a}),new vr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(a),t})):this.thru(i)});var qo=ra(function(t,e,n){le.call(t,n)?++t[n]:Pr(t,n,1)});var Uo=ca(vo),Ho=ca(go);function Wo(t,e){return(gs(t)?Ye:zr)(t,Da(e,3))}function Go(t,e){return(gs(t)?Ze:Ir)(t,Da(e,3))}var Vo=ra(function(t,e,n){le.call(t,n)?t[n].push(e):Pr(t,n,[e])});var Yo=wi(function(t,e,r){var i=-1,a="function"==typeof e,o=ys(t)?n(t.length):[];return zr(t,function(t){o[++i]=a?Ge(e,t,r):ni(t,e,r)}),o}),Zo=ra(function(t,e,n){Pr(t,n,e)});function Xo(t,e){return(gs(t)?Qe:fi)(t,Da(e,3))}var $o=ra(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Jo=wi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ga(t,e[0],e[1])?e=[]:n>2&&Ga(e[0],e[1],e[2])&&(e=[e[0]]),gi(t,Hr(e,1),[])}),Ko=Fn||function(){return Re.Date.now()};function Qo(t,e,n){return e=n?a:e,e=t&&null==e?t.length:e,Aa(t,k,a,a,a,a,e)}function ts(t,e){var n;if("function"!=typeof e)throw new re(u);return t=Bs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=a),n}}var es=wi(function(t,e,n){var r=m;if(n.length){var i=Cn(n,Ra(es));r|=w}return Aa(t,r,e,n,i)}),ns=wi(function(t,e,n){var r=m|y;if(n.length){var i=Cn(n,Ra(ns));r|=w}return Aa(e,r,t,n,i)});function rs(t,e,n){var r,i,o,s,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof t)throw new re(u);function v(e){var n=r,o=i;return r=i=a,f=e,s=t.apply(o,n)}function g(t){var n=t-c;return c===a||n>=e||n<0||h&&t-f>=o}function m(){var t=Ko();if(g(t))return y(t);l=no(m,function(t){var n=e-(t-c);return h?Gn(n,o-(t-f)):n}(t))}function y(t){return l=a,p&&r?v(t):(r=i=a,s)}function b(){var t=Ko(),n=g(t);if(r=arguments,i=this,c=t,n){if(l===a)return function(t){return f=t,l=no(m,e),d?v(t):s}(c);if(h)return Zi(l),l=no(m,e),v(c)}return l===a&&(l=no(m,e)),s}return e=Us(e)||0,Ts(n)&&(d=!!n.leading,o=(h="maxWait"in n)?Wn(Us(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==a&&Zi(l),f=0,r=c=i=l=a},b.flush=function(){return l===a?s:y(Ko())},b}var is=wi(function(t,e){return jr(t,1,e)}),as=wi(function(t,e,n){return jr(t,Us(e)||0,n)});function os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new re(u);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(os.Cache||br),n}function ss(t){if("function"!=typeof t)throw new re(u);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}os.Cache=br;var us=Vi(function(t,e){var n=(e=1==e.length&&gs(e[0])?Qe(e[0],mn(Da())):Qe(Hr(e,1),mn(Da()))).length;return wi(function(r){for(var i=-1,a=Gn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Ge(t,this,r)})}),ls=wi(function(t,e){var n=Cn(e,Ra(ls));return Aa(t,w,a,e,n)}),cs=wi(function(t,e){var n=Cn(e,Ra(cs));return Aa(t,A,a,e,n)}),fs=Ca(function(t,e){return Aa(t,M,a,a,a,e)});function ds(t,e){return t===e||t!==t&&e!==e}var hs=ya(Kr),ps=ya(function(t,e){return t>=e}),vs=ri(function(){return arguments}())?ri:function(t){return Ss(t)&&le.call(t,"callee")&&!Le.call(t,"callee")},gs=n.isArray,ms=Ie?mn(Ie):function(t){return Ss(t)&&Jr(t)==ut};function ys(t){return null!=t&&Ms(t.length)&&!As(t)}function bs(t){return Ss(t)&&ys(t)}var _s=Bn||Uu,xs=Be?mn(Be):function(t){return Ss(t)&&Jr(t)==G};function ws(t){if(!Ss(t))return!1;var e=Jr(t);return e==Y||e==V||"string"==typeof t.message&&"string"==typeof t.name&&!Os(t)}function As(t){if(!Ts(t))return!1;var e=Jr(t);return e==Z||e==X||e==H||e==tt}function ks(t){return"number"==typeof t&&t==Bs(t)}function Ms(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=D}function Ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ss(t){return null!=t&&"object"==typeof t}var Cs=qe?mn(qe):function(t){return Ss(t)&&Ba(t)==$};function Es(t){return"number"==typeof t||Ss(t)&&Jr(t)==J}function Os(t){if(!Ss(t)||Jr(t)!=Q)return!1;var e=Ce(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==he}var Ps=Ue?mn(Ue):function(t){return Ss(t)&&Jr(t)==et};var Ls=He?mn(He):function(t){return Ss(t)&&Ba(t)==nt};function Rs(t){return"string"==typeof t||!gs(t)&&Ss(t)&&Jr(t)==rt}function Ds(t){return"symbol"==typeof t||Ss(t)&&Jr(t)==it}var Fs=We?mn(We):function(t){return Ss(t)&&Ms(t.length)&&!!Te[Jr(t)]};var js=ya(ci),Ns=ya(function(t,e){return t<=e});function zs(t){if(!t)return[];if(ys(t))return Rs(t)?Ln(t):ea(t);if(Ne&&t[Ne])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ne]());var e=Ba(t);return(e==$?Tn:e==nt?En:du)(t)}function Is(t){return t?(t=Us(t))===R||t===-R?(t<0?-1:1)*F:t===t?t:0:0===t?t:0}function Bs(t){var e=Is(t),n=e%1;return e===e?n?e-n:e:0}function qs(t){return t?Rr(Bs(t),0,N):0}function Us(t){if("number"==typeof t)return t;if(Ds(t))return j;if(Ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Dt,"");var n=Gt.test(t);return n||Yt.test(t)?Oe(t.slice(2),n?2:8):Wt.test(t)?j:+t}function Hs(t){return na(t,iu(t))}function Ws(t){return null==t?"":Fi(t)}var Gs=ia(function(t,e){if(Xa(e)||ys(e))na(e,ru(e),t);else for(var n in e)le.call(e,n)&&Sr(t,n,e[n])}),Vs=ia(function(t,e){na(e,iu(e),t)}),Ys=ia(function(t,e,n,r){na(e,iu(e),t,r)}),Zs=ia(function(t,e,n,r){na(e,ru(e),t,r)}),Xs=Ca(Lr);var $s=wi(function(t,e){t=te(t);var n=-1,r=e.length,i=r>2?e[2]:a;for(i&&Ga(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=iu(o),u=-1,l=s.length;++u<l;){var c=s[u],f=t[c];(f===a||ds(f,oe[c])&&!le.call(t,c))&&(t[c]=o[c])}return t}),Js=wi(function(t){return t.push(a,Ma),Ge(ou,a,t)});function Ks(t,e,n){var r=null==t?a:Xr(t,e);return r===a?n:r}function Qs(t,e){return null!=t&&qa(t,e,ti)}var tu=ha(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=n},Tu(Eu)),eu=ha(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]},Da),nu=wi(ni);function ru(t){return ys(t)?wr(t):ui(t)}function iu(t){return ys(t)?wr(t,!0):li(t)}var au=ia(function(t,e,n){pi(t,e,n)}),ou=ia(function(t,e,n,r){pi(t,e,n,r)}),su=Ca(function(t,e){var n={};if(null==t)return n;var r=!1;e=Qe(e,function(e){return e=Gi(e,t),r||(r=e.length>1),e}),na(t,Oa(t),n),r&&(n=Dr(n,d|h|p,Ta));for(var i=e.length;i--;)Ni(n,e[i]);return n});var uu=Ca(function(t,e){return null==t?{}:function(t,e){return mi(t,e,function(e,n){return Qs(t,n)})}(t,e)});function lu(t,e){if(null==t)return{};var n=Qe(Oa(t),function(t){return[t]});return e=Da(e),mi(t,n,function(t,n){return e(t,n[0])})}var cu=wa(ru),fu=wa(iu);function du(t){return null==t?[]:yn(t,ru(t))}var hu=ua(function(t,e,n){return e=e.toLowerCase(),t+(n?pu(e):e)});function pu(t){return wu(Ws(t).toLowerCase())}function vu(t){return(t=Ws(t))&&t.replace(Xt,wn).replace(be,"")}var gu=ua(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),mu=ua(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),yu=sa("toLowerCase");var bu=ua(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var _u=ua(function(t,e,n){return t+(n?" ":"")+wu(e)});var xu=ua(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),wu=sa("toUpperCase");function Au(t,e,n){return t=Ws(t),(e=n?a:e)===a?function(t){return Ae.test(t)}(t)?function(t){return t.match(xe)||[]}(t):function(t){return t.match(Bt)||[]}(t):t.match(e)||[]}var ku=wi(function(t,e){try{return Ge(t,a,e)}catch(n){return ws(n)?n:new i(n)}}),Mu=Ca(function(t,e){return Ye(e,function(e){e=uo(e),Pr(t,e,es(t[e],t))}),t});function Tu(t){return function(){return t}}var Su=fa(),Cu=fa(!0);function Eu(t){return t}function Ou(t){return si("function"==typeof t?t:Dr(t,d))}var Pu=wi(function(t,e){return function(n){return ni(n,t,e)}}),Lu=wi(function(t,e){return function(n){return ni(t,n,e)}});function Ru(t,e,n){var r=ru(e),i=Zr(e,r);null!=n||Ts(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Zr(e,ru(e)));var a=!(Ts(n)&&"chain"in n)||!!n.chain,o=As(t);return Ye(i,function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=ea(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function Du(){}var Fu=va(Qe),ju=va(Xe),Nu=va(rn);function zu(t){return Va(t)?dn(uo(t)):function(t){return function(e){return Xr(e,t)}}(t)}var Iu=ma(),Bu=ma(!0);function qu(){return[]}function Uu(){return!1}var Hu=pa(function(t,e){return t+e},0),Wu=_a("ceil"),Gu=pa(function(t,e){return t/e},1),Vu=_a("floor");var Yu=pa(function(t,e){return t*e},1),Zu=_a("round"),Xu=pa(function(t,e){return t-e},0);return dr.after=function(t,e){if("function"!=typeof e)throw new re(u);return t=Bs(t),function(){if(--t<1)return e.apply(this,arguments)}},dr.ary=Qo,dr.assign=Gs,dr.assignIn=Vs,dr.assignInWith=Ys,dr.assignWith=Zs,dr.at=Xs,dr.before=ts,dr.bind=es,dr.bindAll=Mu,dr.bindKey=ns,dr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return gs(t)?t:[t]},dr.chain=zo,dr.chunk=function(t,e,r){e=(r?Ga(t,e,r):e===a)?1:Wn(Bs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,u=n(Nn(i/e));o<i;)u[s++]=Ei(t,o,o+=e);return u},dr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},dr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(gs(r)?ea(r):[r],Hr(e,1))},dr.cond=function(t){var e=null==t?0:t.length,n=Da();return t=e?Qe(t,function(t){if("function"!=typeof t[1])throw new re(u);return[n(t[0]),t[1]]}):[],wi(function(n){for(var r=-1;++r<e;){var i=t[r];if(Ge(i[0],this,n))return Ge(i[1],this,n)}})},dr.conforms=function(t){return function(t){var e=ru(t);return function(n){return Fr(n,t,e)}}(Dr(t,d))},dr.constant=Tu,dr.countBy=qo,dr.create=function(t,e){var n=hr(t);return null==e?n:Or(n,e)},dr.curry=function t(e,n,r){var i=Aa(e,_,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},dr.curryRight=function t(e,n,r){var i=Aa(e,x,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},dr.debounce=rs,dr.defaults=$s,dr.defaultsDeep=Js,dr.defer=is,dr.delay=as,dr.difference=fo,dr.differenceBy=ho,dr.differenceWith=po,dr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Ei(t,(e=n||e===a?1:Bs(e))<0?0:e,r):[]},dr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Ei(t,0,(e=r-(e=n||e===a?1:Bs(e)))<0?0:e):[]},dr.dropRightWhile=function(t,e){return t&&t.length?Ii(t,Da(e,3),!0,!0):[]},dr.dropWhile=function(t,e){return t&&t.length?Ii(t,Da(e,3),!0):[]},dr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Ga(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Bs(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:Bs(r))<0&&(r+=i),r=n>r?0:qs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},dr.filter=function(t,e){return(gs(t)?$e:Ur)(t,Da(e,3))},dr.flatMap=function(t,e){return Hr(Xo(t,e),1)},dr.flatMapDeep=function(t,e){return Hr(Xo(t,e),R)},dr.flatMapDepth=function(t,e,n){return n=n===a?1:Bs(n),Hr(Xo(t,e),n)},dr.flatten=mo,dr.flattenDeep=function(t){return null!=t&&t.length?Hr(t,R):[]},dr.flattenDepth=function(t,e){return null!=t&&t.length?Hr(t,e=e===a?1:Bs(e)):[]},dr.flip=function(t){return Aa(t,T)},dr.flow=Su,dr.flowRight=Cu,dr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},dr.functions=function(t){return null==t?[]:Zr(t,ru(t))},dr.functionsIn=function(t){return null==t?[]:Zr(t,iu(t))},dr.groupBy=Vo,dr.initial=function(t){return null!=t&&t.length?Ei(t,0,-1):[]},dr.intersection=bo,dr.intersectionBy=_o,dr.intersectionWith=xo,dr.invert=tu,dr.invertBy=eu,dr.invokeMap=Yo,dr.iteratee=Ou,dr.keyBy=Zo,dr.keys=ru,dr.keysIn=iu,dr.map=Xo,dr.mapKeys=function(t,e){var n={};return e=Da(e,3),Vr(t,function(t,r,i){Pr(n,e(t,r,i),t)}),n},dr.mapValues=function(t,e){var n={};return e=Da(e,3),Vr(t,function(t,r,i){Pr(n,r,e(t,r,i))}),n},dr.matches=function(t){return di(Dr(t,d))},dr.matchesProperty=function(t,e){return hi(t,Dr(e,d))},dr.memoize=os,dr.merge=au,dr.mergeWith=ou,dr.method=Pu,dr.methodOf=Lu,dr.mixin=Ru,dr.negate=ss,dr.nthArg=function(t){return t=Bs(t),wi(function(e){return vi(e,t)})},dr.omit=su,dr.omitBy=function(t,e){return lu(t,ss(Da(e)))},dr.once=function(t){return ts(2,t)},dr.orderBy=function(t,e,n,r){return null==t?[]:(gs(e)||(e=null==e?[]:[e]),gs(n=r?a:n)||(n=null==n?[]:[n]),gi(t,e,n))},dr.over=Fu,dr.overArgs=us,dr.overEvery=ju,dr.overSome=Nu,dr.partial=ls,dr.partialRight=cs,dr.partition=$o,dr.pick=uu,dr.pickBy=lu,dr.property=zu,dr.propertyOf=function(t){return function(e){return null==t?a:Xr(t,e)}},dr.pull=Ao,dr.pullAll=ko,dr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?yi(t,e,Da(n,2)):t},dr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?yi(t,e,a,n):t},dr.pullAt=Mo,dr.range=Iu,dr.rangeRight=Bu,dr.rearg=fs,dr.reject=function(t,e){return(gs(t)?$e:Ur)(t,ss(Da(e,3)))},dr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=Da(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return bi(t,i),n},dr.rest=function(t,e){if("function"!=typeof t)throw new re(u);return wi(t,e=e===a?e:Bs(e))},dr.reverse=To,dr.sampleSize=function(t,e,n){return e=(n?Ga(t,e,n):e===a)?1:Bs(e),(gs(t)?kr:ki)(t,e)},dr.set=function(t,e,n){return null==t?t:Mi(t,e,n)},dr.setWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:Mi(t,e,n,r)},dr.shuffle=function(t){return(gs(t)?Mr:Ci)(t)},dr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ga(t,e,n)?(e=0,n=r):(e=null==e?0:Bs(e),n=n===a?r:Bs(n)),Ei(t,e,n)):[]},dr.sortBy=Jo,dr.sortedUniq=function(t){return t&&t.length?Ri(t):[]},dr.sortedUniqBy=function(t,e){return t&&t.length?Ri(t,Da(e,2)):[]},dr.split=function(t,e,n){return n&&"number"!=typeof n&&Ga(t,e,n)&&(e=n=a),(n=n===a?N:n>>>0)?(t=Ws(t))&&("string"==typeof e||null!=e&&!Ps(e))&&!(e=Fi(e))&&Mn(t)?Yi(Ln(t),0,n):t.split(e,n):[]},dr.spread=function(t,e){if("function"!=typeof t)throw new re(u);return e=null==e?0:Wn(Bs(e),0),wi(function(n){var r=n[e],i=Yi(n,0,e);return r&&tn(i,r),Ge(t,this,i)})},dr.tail=function(t){var e=null==t?0:t.length;return e?Ei(t,1,e):[]},dr.take=function(t,e,n){return t&&t.length?Ei(t,0,(e=n||e===a?1:Bs(e))<0?0:e):[]},dr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Ei(t,(e=r-(e=n||e===a?1:Bs(e)))<0?0:e,r):[]},dr.takeRightWhile=function(t,e){return t&&t.length?Ii(t,Da(e,3),!1,!0):[]},dr.takeWhile=function(t,e){return t&&t.length?Ii(t,Da(e,3)):[]},dr.tap=function(t,e){return e(t),t},dr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new re(u);return Ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),rs(t,e,{leading:r,maxWait:e,trailing:i})},dr.thru=Io,dr.toArray=zs,dr.toPairs=cu,dr.toPairsIn=fu,dr.toPath=function(t){return gs(t)?Qe(t,uo):Ds(t)?[t]:ea(so(Ws(t)))},dr.toPlainObject=Hs,dr.transform=function(t,e,n){var r=gs(t),i=r||_s(t)||Fs(t);if(e=Da(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:Ts(t)&&As(a)?hr(Ce(t)):{}}return(i?Ye:Vr)(t,function(t,r,i){return e(n,t,r,i)}),n},dr.unary=function(t){return Qo(t,1)},dr.union=So,dr.unionBy=Co,dr.unionWith=Eo,dr.uniq=function(t){return t&&t.length?ji(t):[]},dr.uniqBy=function(t,e){return t&&t.length?ji(t,Da(e,2)):[]},dr.uniqWith=function(t,e){return e="function"==typeof e?e:a,t&&t.length?ji(t,a,e):[]},dr.unset=function(t,e){return null==t||Ni(t,e)},dr.unzip=Oo,dr.unzipWith=Po,dr.update=function(t,e,n){return null==t?t:zi(t,e,Wi(n))},dr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:zi(t,e,Wi(n),r)},dr.values=du,dr.valuesIn=function(t){return null==t?[]:yn(t,iu(t))},dr.without=Lo,dr.words=Au,dr.wrap=function(t,e){return ls(Wi(e),t)},dr.xor=Ro,dr.xorBy=Do,dr.xorWith=Fo,dr.zip=jo,dr.zipObject=function(t,e){return Ui(t||[],e||[],Sr)},dr.zipObjectDeep=function(t,e){return Ui(t||[],e||[],Mi)},dr.zipWith=No,dr.entries=cu,dr.entriesIn=fu,dr.extend=Vs,dr.extendWith=Ys,Ru(dr,dr),dr.add=Hu,dr.attempt=ku,dr.camelCase=hu,dr.capitalize=pu,dr.ceil=Wu,dr.clamp=function(t,e,n){return n===a&&(n=e,e=a),n!==a&&(n=(n=Us(n))===n?n:0),e!==a&&(e=(e=Us(e))===e?e:0),Rr(Us(t),e,n)},dr.clone=function(t){return Dr(t,p)},dr.cloneDeep=function(t){return Dr(t,d|p)},dr.cloneDeepWith=function(t,e){return Dr(t,d|p,e="function"==typeof e?e:a)},dr.cloneWith=function(t,e){return Dr(t,p,e="function"==typeof e?e:a)},dr.conformsTo=function(t,e){return null==e||Fr(t,e,ru(e))},dr.deburr=vu,dr.defaultTo=function(t,e){return null==t||t!==t?e:t},dr.divide=Gu,dr.endsWith=function(t,e,n){t=Ws(t),e=Fi(e);var r=t.length,i=n=n===a?r:Rr(Bs(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},dr.eq=ds,dr.escape=function(t){return(t=Ws(t))&&Mt.test(t)?t.replace(At,An):t},dr.escapeRegExp=function(t){return(t=Ws(t))&&Rt.test(t)?t.replace(Lt,"\\$&"):t},dr.every=function(t,e,n){var r=gs(t)?Xe:Br;return n&&Ga(t,e,n)&&(e=a),r(t,Da(e,3))},dr.find=Uo,dr.findIndex=vo,dr.findKey=function(t,e){return on(t,Da(e,3),Vr)},dr.findLast=Ho,dr.findLastIndex=go,dr.findLastKey=function(t,e){return on(t,Da(e,3),Yr)},dr.floor=Vu,dr.forEach=Wo,dr.forEachRight=Go,dr.forIn=function(t,e){return null==t?t:Wr(t,Da(e,3),iu)},dr.forInRight=function(t,e){return null==t?t:Gr(t,Da(e,3),iu)},dr.forOwn=function(t,e){return t&&Vr(t,Da(e,3))},dr.forOwnRight=function(t,e){return t&&Yr(t,Da(e,3))},dr.get=Ks,dr.gt=hs,dr.gte=ps,dr.has=function(t,e){return null!=t&&qa(t,e,Qr)},dr.hasIn=Qs,dr.head=yo,dr.identity=Eu,dr.includes=function(t,e,n,r){t=ys(t)?t:du(t),n=n&&!r?Bs(n):0;var i=t.length;return n<0&&(n=Wn(i+n,0)),Rs(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&un(t,e,n)>-1},dr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Bs(n);return i<0&&(i=Wn(r+i,0)),un(t,e,i)},dr.inRange=function(t,e,n){return e=Is(e),n===a?(n=e,e=0):n=Is(n),function(t,e,n){return t>=Gn(e,n)&&t<Wn(e,n)}(t=Us(t),e,n)},dr.invoke=nu,dr.isArguments=vs,dr.isArray=gs,dr.isArrayBuffer=ms,dr.isArrayLike=ys,dr.isArrayLikeObject=bs,dr.isBoolean=function(t){return!0===t||!1===t||Ss(t)&&Jr(t)==W},dr.isBuffer=_s,dr.isDate=xs,dr.isElement=function(t){return Ss(t)&&1===t.nodeType&&!Os(t)},dr.isEmpty=function(t){if(null==t)return!0;if(ys(t)&&(gs(t)||"string"==typeof t||"function"==typeof t.splice||_s(t)||Fs(t)||vs(t)))return!t.length;var e=Ba(t);if(e==$||e==nt)return!t.size;if(Xa(t))return!ui(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},dr.isEqual=function(t,e){return ii(t,e)},dr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:a)?n(t,e):a;return r===a?ii(t,e,a,n):!!r},dr.isError=ws,dr.isFinite=function(t){return"number"==typeof t&&qn(t)},dr.isFunction=As,dr.isInteger=ks,dr.isLength=Ms,dr.isMap=Cs,dr.isMatch=function(t,e){return t===e||ai(t,e,ja(e))},dr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:a,ai(t,e,ja(e),n)},dr.isNaN=function(t){return Es(t)&&t!=+t},dr.isNative=function(t){if(Za(t))throw new i(s);return oi(t)},dr.isNil=function(t){return null==t},dr.isNull=function(t){return null===t},dr.isNumber=Es,dr.isObject=Ts,dr.isObjectLike=Ss,dr.isPlainObject=Os,dr.isRegExp=Ps,dr.isSafeInteger=function(t){return ks(t)&&t>=-D&&t<=D},dr.isSet=Ls,dr.isString=Rs,dr.isSymbol=Ds,dr.isTypedArray=Fs,dr.isUndefined=function(t){return t===a},dr.isWeakMap=function(t){return Ss(t)&&Ba(t)==ot},dr.isWeakSet=function(t){return Ss(t)&&Jr(t)==st},dr.join=function(t,e){return null==t?"":Un.call(t,e)},dr.kebabCase=gu,dr.last=wo,dr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=Bs(n))<0?Wn(r+i,0):Gn(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):sn(t,cn,i,!0)},dr.lowerCase=mu,dr.lowerFirst=yu,dr.lt=js,dr.lte=Ns,dr.max=function(t){return t&&t.length?qr(t,Eu,Kr):a},dr.maxBy=function(t,e){return t&&t.length?qr(t,Da(e,2),Kr):a},dr.mean=function(t){return fn(t,Eu)},dr.meanBy=function(t,e){return fn(t,Da(e,2))},dr.min=function(t){return t&&t.length?qr(t,Eu,ci):a},dr.minBy=function(t,e){return t&&t.length?qr(t,Da(e,2),ci):a},dr.stubArray=qu,dr.stubFalse=Uu,dr.stubObject=function(){return{}},dr.stubString=function(){return""},dr.stubTrue=function(){return!0},dr.multiply=Yu,dr.nth=function(t,e){return t&&t.length?vi(t,Bs(e)):a},dr.noConflict=function(){return Re._===this&&(Re._=pe),this},dr.noop=Du,dr.now=Ko,dr.pad=function(t,e,n){t=Ws(t);var r=(e=Bs(e))?Pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ga(zn(i),n)+t+ga(Nn(i),n)},dr.padEnd=function(t,e,n){t=Ws(t);var r=(e=Bs(e))?Pn(t):0;return e&&r<e?t+ga(e-r,n):t},dr.padStart=function(t,e,n){t=Ws(t);var r=(e=Bs(e))?Pn(t):0;return e&&r<e?ga(e-r,n)+t:t},dr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Yn(Ws(t).replace(Ft,""),e||0)},dr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Ga(t,e,n)&&(e=n=a),n===a&&("boolean"==typeof e?(n=e,e=a):"boolean"==typeof t&&(n=t,t=a)),t===a&&e===a?(t=0,e=1):(t=Is(t),e===a?(e=t,t=0):e=Is(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Zn();return Gn(t+i*(e-t+Ee("1e-"+((i+"").length-1))),e)}return _i(t,e)},dr.reduce=function(t,e,n){var r=gs(t)?en:pn,i=arguments.length<3;return r(t,Da(e,4),n,i,zr)},dr.reduceRight=function(t,e,n){var r=gs(t)?nn:pn,i=arguments.length<3;return r(t,Da(e,4),n,i,Ir)},dr.repeat=function(t,e,n){return e=(n?Ga(t,e,n):e===a)?1:Bs(e),xi(Ws(t),e)},dr.replace=function(){var t=arguments,e=Ws(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dr.result=function(t,e,n){var r=-1,i=(e=Gi(e,t)).length;for(i||(i=1,t=a);++r<i;){var o=null==t?a:t[uo(e[r])];o===a&&(r=i,o=n),t=As(o)?o.call(t):o}return t},dr.round=Zu,dr.runInContext=t,dr.sample=function(t){return(gs(t)?Ar:Ai)(t)},dr.size=function(t){if(null==t)return 0;if(ys(t))return Rs(t)?Pn(t):t.length;var e=Ba(t);return e==$||e==nt?t.size:ui(t).length},dr.snakeCase=bu,dr.some=function(t,e,n){var r=gs(t)?rn:Oi;return n&&Ga(t,e,n)&&(e=a),r(t,Da(e,3))},dr.sortedIndex=function(t,e){return Pi(t,e)},dr.sortedIndexBy=function(t,e,n){return Li(t,e,Da(n,2))},dr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Pi(t,e);if(r<n&&ds(t[r],e))return r}return-1},dr.sortedLastIndex=function(t,e){return Pi(t,e,!0)},dr.sortedLastIndexBy=function(t,e,n){return Li(t,e,Da(n,2),!0)},dr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Pi(t,e,!0)-1;if(ds(t[n],e))return n}return-1},dr.startCase=_u,dr.startsWith=function(t,e,n){return t=Ws(t),n=null==n?0:Rr(Bs(n),0,t.length),e=Fi(e),t.slice(n,n+e.length)==e},dr.subtract=Xu,dr.sum=function(t){return t&&t.length?vn(t,Eu):0},dr.sumBy=function(t,e){return t&&t.length?vn(t,Da(e,2)):0},dr.template=function(t,e,n){var r=dr.templateSettings;n&&Ga(t,e,n)&&(e=a),t=Ws(t),e=Ys({},e,r,ka);var i,o,s=Ys({},e.imports,r.imports,ka),u=ru(s),l=yn(s,u),c=0,f=e.interpolate||$t,d="__p += '",h=ee((e.escape||$t).source+"|"+f.source+"|"+(f===Ct?Ut:$t).source+"|"+(e.evaluate||$t).source+"|$","g"),p="//# sourceURL="+(le.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";t.replace(h,function(e,n,r,a,s,u){return r||(r=a),d+=t.slice(c,u).replace(Jt,kn),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),d+="';\n";var v=le.call(e,"variable")&&e.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(bt,""):d).replace(_t,"$1").replace(xt,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=ku(function(){return Kt(u,p+"return "+d).apply(a,l)});if(g.source=d,ws(g))throw g;return g},dr.times=function(t,e){if((t=Bs(t))<1||t>D)return[];var n=N,r=Gn(t,N);e=Da(e),t-=N;for(var i=gn(r,e);++n<t;)e(n);return i},dr.toFinite=Is,dr.toInteger=Bs,dr.toLength=qs,dr.toLower=function(t){return Ws(t).toLowerCase()},dr.toNumber=Us,dr.toSafeInteger=function(t){return t?Rr(Bs(t),-D,D):0===t?t:0},dr.toString=Ws,dr.toUpper=function(t){return Ws(t).toUpperCase()},dr.trim=function(t,e,n){if((t=Ws(t))&&(n||e===a))return t.replace(Dt,"");if(!t||!(e=Fi(e)))return t;var r=Ln(t),i=Ln(e);return Yi(r,_n(r,i),xn(r,i)+1).join("")},dr.trimEnd=function(t,e,n){if((t=Ws(t))&&(n||e===a))return t.replace(jt,"");if(!t||!(e=Fi(e)))return t;var r=Ln(t);return Yi(r,0,xn(r,Ln(e))+1).join("")},dr.trimStart=function(t,e,n){if((t=Ws(t))&&(n||e===a))return t.replace(Ft,"");if(!t||!(e=Fi(e)))return t;var r=Ln(t);return Yi(r,_n(r,Ln(e))).join("")},dr.truncate=function(t,e){var n=S,r=C;if(Ts(e)){var i="separator"in e?e.separator:i;n="length"in e?Bs(e.length):n,r="omission"in e?Fi(e.omission):r}var o=(t=Ws(t)).length;if(Mn(t)){var s=Ln(t);o=s.length}if(n>=o)return t;var u=n-Pn(r);if(u<1)return r;var l=s?Yi(s,0,u).join(""):t.slice(0,u);if(i===a)return l+r;if(s&&(u+=l.length-u),Ps(i)){if(t.slice(u).search(i)){var c,f=l;for(i.global||(i=ee(i.source,Ws(Ht.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;l=l.slice(0,d===a?u:d)}}else if(t.indexOf(Fi(i),u)!=u){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r},dr.unescape=function(t){return(t=Ws(t))&&kt.test(t)?t.replace(wt,Rn):t},dr.uniqueId=function(t){var e=++ce;return Ws(t)+e},dr.upperCase=xu,dr.upperFirst=wu,dr.each=Wo,dr.eachRight=Go,dr.first=yo,Ru(dr,function(){var t={};return Vr(dr,function(e,n){le.call(dr.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),dr.VERSION="4.17.15",Ye(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){dr[t].placeholder=dr}),Ye(["drop","take"],function(t,e){gr.prototype[t]=function(n){n=n===a?1:Wn(Bs(n),0);var r=this.__filtered__&&!e?new gr(this):this.clone();return r.__filtered__?r.__takeCount__=Gn(n,r.__takeCount__):r.__views__.push({size:Gn(n,N),type:t+(r.__dir__<0?"Right":"")}),r},gr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ye(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==P||3==n;gr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Da(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Ye(["head","last"],function(t,e){var n="take"+(e?"Right":"");gr.prototype[t]=function(){return this[n](1).value()[0]}}),Ye(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");gr.prototype[t]=function(){return this.__filtered__?new gr(this):this[n](1)}}),gr.prototype.compact=function(){return this.filter(Eu)},gr.prototype.find=function(t){return this.filter(t).head()},gr.prototype.findLast=function(t){return this.reverse().find(t)},gr.prototype.invokeMap=wi(function(t,e){return"function"==typeof t?new gr(this):this.map(function(n){return ni(n,t,e)})}),gr.prototype.reject=function(t){return this.filter(ss(Da(t)))},gr.prototype.slice=function(t,e){t=Bs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new gr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==a&&(n=(e=Bs(e))<0?n.dropRight(-e):n.take(e-t)),n)},gr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gr.prototype.toArray=function(){return this.take(N)},Vr(gr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=dr[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(dr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof gr,l=s[0],c=u||gs(e),f=function(t){var e=i.apply(dr,tn([t],s));return r&&d?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,v=u&&!h;if(!o&&c){e=v?e:new gr(this);var g=t.apply(e,s);return g.__actions__.push({func:Io,args:[f],thisArg:a}),new vr(g,d)}return p&&v?t.apply(this,s):(g=this.thru(f),p?r?g.value()[0]:g.value():g)})}),Ye(["pop","push","shift","sort","splice","unshift"],function(t){var e=ie[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);dr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(gs(i)?i:[],t)}return this[n](function(n){return e.apply(gs(n)?n:[],t)})}}),Vr(gr.prototype,function(t,e){var n=dr[e];if(n){var r=n.name+"";le.call(rr,r)||(rr[r]=[]),rr[r].push({name:e,func:n})}}),rr[da(a,y).name]=[{name:"wrapper",func:a}],gr.prototype.clone=function(){var t=new gr(this.__wrapped__);return t.__actions__=ea(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ea(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ea(this.__views__),t},gr.prototype.reverse=function(){if(this.__filtered__){var t=new gr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=gs(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Gn(e,t+o);break;case"takeRight":t=Wn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,f=c.length,d=0,h=Gn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return Bi(t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var v=-1,g=t[l+=e];++v<f;){var m=c[v],y=m.iteratee,b=m.type,_=y(g);if(b==L)g=_;else if(!_){if(b==P)continue t;break t}}p[d++]=g}return p},dr.prototype.at=Bo,dr.prototype.chain=function(){return zo(this)},dr.prototype.commit=function(){return new vr(this.value(),this.__chain__)},dr.prototype.next=function(){this.__values__===a&&(this.__values__=zs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?a:this.__values__[this.__index__++]}},dr.prototype.plant=function(t){for(var e,n=this;n instanceof pr;){var r=co(n);r.__index__=0,r.__values__=a,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},dr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gr){var e=t;return this.__actions__.length&&(e=new gr(this)),(e=e.reverse()).__actions__.push({func:Io,args:[To],thisArg:a}),new vr(e,this.__chain__)}return this.thru(To)},dr.prototype.toJSON=dr.prototype.valueOf=dr.prototype.value=function(){return Bi(this.__wrapped__,this.__actions__)},dr.prototype.first=dr.prototype.head,Ne&&(dr.prototype[Ne]=function(){return this}),dr}();Re._=Dn,(i=function(){return Dn}.call(e,n,e,r))===a||(r.exports=i)}).call(this)}).call(this,n(14),n(62)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.aggregate=aggregate,exports.filterByExpr=filterByExpr,exports.applyFormula=applyFormula,exports.sample=sample;var _vegaDataflow=__webpack_require__(64),vegadataflow=_interopRequireWildcard(_vegaDataflow);function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var tx=vegadataflow.transforms,changeset=vegadataflow.changeset;function aggregate(t,e,n){var r=[];t.forEach(function(t){r.push(vegadataflow.field(t))});var i=new vegadataflow.Dataflow,a=i.add(tx.Collect),o=i.add(tx.Aggregate,{fields:r,ops:e,as:t,pulse:a}),s=i.add(tx.Collect,{pulse:o});return i.pulse(a,changeset().insert(n)).run(),s.value}function filterByExpr(expression,data){var expr=vegadataflow.accessor(function(data){return eval(expression)}),df=new vegadataflow.Dataflow,ex=df.add(null),col=df.add(tx.Collect),fil=df.add(tx.Filter,{expr:ex,pulse:col}),out=df.add(tx.Collect,{pulse:fil});return df.pulse(col,changeset().insert(data)),df.update(ex,expr).run(),out.value}function applyFormula(expressions,as,data){for(var expr=[],formulas=[],_expressions=_slicedToArray(expressions,3),e1=_expressions[0],e2=_expressions[1],e3=_expressions[2],df=new vegadataflow.Dataflow,col=df.add(tx.Collect),i=0;i<as.length;i++)0===i?(expr[i]=vegadataflow.accessor(function(data){return eval(e1)}),formulas[i]=df.add(tx.Formula,{expr:expr[i],as:as[i],pulse:col})):(expr[i]=1===i?vegadataflow.accessor(function(data){return eval(e2)}):vegadataflow.accessor(function(data){return eval(e3)}),formulas[i]=df.add(tx.Formula,{expr:expr[i],as:as[i],pulse:formulas[i-1]}));return df.pulse(col,changeset().insert(data)).run(),col.value}function sample(t,e){var n=new vegadataflow.Dataflow,r=n.add(tx.Sample,{size:t});return n.pulse(r,changeset().insert(e)).run(),r.value}},function(t,e,n){(function(t){!function(e){"use strict";function r(t){var e,n,r,i,a,o,s,u,l=t.maxbins||20,c=t.base||10,f=Math.log(c),d=t.divide||[5,2],h=t.extent[0],p=t.extent[1],v=p-h;if(t.step)e=t.step;else if(t.steps){for(a=v/l,o=0,s=t.steps.length;o<s&&t.steps[o]<a;++o);e=t.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(l)/f),r=t.minstep||0,e=Math.max(r,Math.pow(c,Math.round(Math.log(v)/f)-n));Math.ceil(v/e)>l;)e*=c;for(o=0,s=d.length;o<s;++o)(a=e/d[o])>=r&&v/a<=l&&(e=a)}return a=Math.log(e),i=a>=0?0:1+~~(-a/f),u=Math.pow(c,-i-1),(t.nice||void 0===t.nice)&&(h=Math.min(h,Math.floor(h/e+u)*e),p=Math.ceil(p/e)*e),{start:h,stop:p,step:e}}function i(t,e){var n,r=[],i=t.length,o=-1;if(null==e)for(;++o<i;)isNaN(n=a(t[o]))||r.push(n);else for(;++o<i;)isNaN(n=a(e(t[o],o,t)))||r.push(n);return r}function a(t){return null===t?NaN:+t}function o(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function s(t){var e;return 1===t.length&&(e=t,t=function(t,n){return o(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}var u=s(o),l=u.right,c=u.left;function f(t){return null===t?NaN:+t}function d(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}var h=Math.sqrt(50),p=Math.sqrt(10),v=Math.sqrt(2);function g(t,e,n){var r=m(t,e,n);return d(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function m(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=h?i*=10:a>=p?i*=5:a>=v&&(i*=2),e<t?-i:i}function y(t,e,n){if(null==n&&(n=f),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function b(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--o]=r[e];return n}function _(t,e,n,r){var a,s,u,l,c=i(t,r),f=c.length,d=e;for(u=0,l=Array(d);u<d;++u){for(a=0,s=0;s<f;++s)a+=c[~~(Math.random()*f)];l[u]=a/f}return[y(l.sort(o),n/2),y(l,1-n/2)]}function x(t,e){var n,r,i=NaN,a={mean:function(t){return arguments.length?(n=t||0,i=NaN,a):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i=NaN,a):r},sample:function(){var t,e,a=0,o=0;if(i===i)return a=i,i=NaN,a;do{a=2*Math.random()-1,o=2*Math.random()-1,t=a*a+o*o}while(0===t||t>1);return e=Math.sqrt(-2*Math.log(t)/t),i=n+o*e*r,n+a*e*r},pdf:function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*e},cdf:function(t){var e,i=(t-n)/r,a=Math.abs(i);if(a>37)e=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(e=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),e/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):e=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-e:e},icdf:function(t){if(t<=0||t>=1)return NaN;var e=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(e,2))/2,o=Math.log(1-e*e)/i,s=(e>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+r*Math.SQRT2*s}};return a.mean(t).stdev(e)}function w(t,e){var n=i(t,e);return[y(n.sort(o),.25),y(n,.5),y(n,.75)]}function A(t,e){var n=x(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(!(e=n)&&t&&(e=function(t){var e=t.length,n=w(t),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,u=0;if(null==e)for(;++s<i;)isNaN(n=f(t[s]))||(a+=(r=n-a)/++u,o+=r*(n-a));else for(;++s<i;)isNaN(n=f(e(t[s],s,t)))||(a+=(r=n-a)/++u,o+=r*(n-a));if(u>1)return o/(u-1)}(t)),r)*Math.pow(e,-.2)}(t)),r):e},r.sample=function(){return t[~~(Math.random()*i)]+e*n.sample()},r.pdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.pdf((r-t[o])/e);return a/e/i},r.cdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.cdf((r-t[o])/e);return a/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(t)}function k(t,e){var n,r={},i=0;return r.weights=function(t){return arguments.length?(n=function(t){var e,n=[],r=0;for(e=0;e<i;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<i;++e)n[e]/=r;return n}(e=t||[]),r):e},r.distributions=function(n){return arguments.length?(n?(i=n.length,t=n):(i=0,t=[]),r.weights(e)):t},r.sample=function(){for(var e=Math.random(),r=t[i-1],a=n[0],o=0;o<i-1;a+=n[++o])if(e<a){r=t[o];break}return r.sample()},r.pdf=function(e){for(var r=0,a=0;a<i;++a)r+=n[a]*t[a].pdf(e);return r},r.cdf=function(e){for(var r=0,a=0;a<i;++a)r+=n[a]*t[a].cdf(e);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(t).weights(e)}function M(t,e){null==e&&(e=null==t?1:t,t=0);var n,r,i,a={min:function(t){return arguments.length?(i=r-(n=t||0),a):n},max:function(t){return arguments.length?(i=(r=t||0)-n,a):r},sample:function(){return n+i*Math.random()},pdf:function(t){return t>=n&&t<=r?1/i:0},cdf:function(t){return t<n?0:t>r?1:(t-n)/i},icdf:function(t){return t>=0&&t<=1?n+t*i:NaN}};return a.min(t).max(e)}function T(t,e,n){return t.fields=e||[],t.fname=n,t}function S(t){return null==t?null:t.fname}function C(t){return null==t?null:t.fields}function E(t){throw Error(t)}function O(t){var e,n,r,i=[],a=null,o=0,s=t.length,u="";function l(){i.push(u+t.substring(e,n)),u="",e=n+1}for(t+="",e=n=0;n<s;++n)if("\\"===(r=t[n]))u+=t.substring(e,n),e=++n;else if(r===a)l(),a=null,o=-1;else{if(a)continue;e===o&&'"'===r?(e=n+1,a=r):e===o&&"'"===r?(e=n+1,a=r):"."!==r||o?"["===r?(n>e&&l(),o=e=n+1):"]"===r&&(o||E("Access path missing open bracket: "+t),o>0&&l(),o=0,e=n+1):n>e?l():e=n+1}return o&&E("Access path missing closing bracket: "+t),a&&E("Access path missing closing quote: "+t),n>e&&(++n,l()),i}var P=Array.isArray;function L(t){return t===Object(t)}function R(t){return"string"===typeof t}function D(t){return P(t)?"["+t.map(D)+"]":L(t)||R(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function F(t,e){var n=O(t),r="return _["+n.map(D).join("][")+"];";return T(Function("_",r),[t=1===n.length?n[0]:t],e||t)}var j=[],N=F("id"),z=T(function(t){return t},j,"identity"),I=T(function(){return 0},j,"zero"),B=T(function(){return 1},j,"one"),q=T(function(){return!0},j,"true"),U=T(function(){return!1},j,"false");function H(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var W=0,G=1,V=2,Y=3;function Z(t){var e=t||W;return{level:function(t){return arguments.length?(e=+t,this):e},warn:function(){return e>=G&&H("warn","WARN",arguments),this},info:function(){return e>=V&&H("log","INFO",arguments),this},debug:function(){return e>=Y&&H("log","DEBUG",arguments),this}}}function X(t){return null!=t?P(t)?t:[t]:[]}function $(t,e){var n,r,i,a,o,s,u,l=[],c=(t=X(t)).map(function(t,e){return null==t?null:(l.push(e),O(t).map(D).join("]["))}),f=l.length-1,d=X(e),h="var u,v;return ";if(f<0)return null;for(r=0;r<=f;++r)n=l[r],i=c[n],a="(u=a["+i+"])",o="(v=b["+i+"])",s="descending"!==d[n]?(u=1,-1):(u=-1,1),h+="("+a+"<"+o+"||u==null)&&v!=null?"+s+":(u>v||v==null)&&u!=null?"+u+":((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))!==u&&v===v?"+s+":v!==v&&u===u?"+u+(n<f?":":":0");return T(Function("a","b",h+";"),t.filter(function(t){return null!=t}))}function J(t){return"function"===typeof t}function K(t){return J(t)?t:function(){return t}}function Q(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t}function tt(t,e){var n,r,i,a,o,s=-1,u=t.length;if(null==e){for(;++s<u;)if(null!=(r=t[s])&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=t[s])&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}else{for(;++s<u;)if(null!=(r=e(t[s],s,t))&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=e(t[s],s,t))&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}return[a,o]}var et={};function nt(t){var e,n,r={};function i(t){return r.hasOwnProperty(t)&&r[t]!==et}return e={size:0,empty:0,object:r,has:i,get:function(t){return i(t)?r[t]:void 0},set:function(t,n){return i(t)||(++e.size,r[t]===et&&--e.empty),r[t]=n,this},delete:function(t){return i(t)&&(--e.size,++e.empty,r[t]=et),this},clear:function(){e.size=e.empty=0,e.object=r={}},test:function(t){return arguments.length?(n=t,e):n},clean:function(){var t,i,a={},o=0;for(t in r)(i=r[t])===et||n&&n(i)||(a[t]=i,++o);e.size=o,e.empty=0,e.object=r=a}},t&&Object.keys(t).forEach(function(n){e.set(n,t[n])}),e}function rt(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n}function it(t){var e=(t=t?X(t):t)&&t.length?Function("_","return ''+"+t.map(function(t){return"_["+O(t).map(D).join("][")+"]"}).join("+'|'+")+";"):function(){return""};return T(e,t,"key")}function at(t,e,n,r){var i=e.length,a=n.length;if(!a)return e;if(!i)return n;for(var o=r||new e.constructor(i+a),s=0,u=0,l=0;s<i&&u<a;++l)o[l]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++l)o[l]=e[s];for(;u<a;++u,++l)o[l]=n[u];return o}function ot(t,e){for(var n="";--e>=0;)n+=t;return n}function st(t){return t[t.length-1]}function ut(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=1;return e}function lt(t,e,n){if(t){var r,i=0,a=t.length;if(e)for(;i<a;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}}function ct(t){var e=t||z,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,a=e(t);return r[a]&&(r[a]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}var ft=1;function dt(t){return t._id}function ht(t,e){for(var n in t)"_id"!==n&&(e[n]=t[n]);return e}function pt(t){var e=t===Object(t)?t:{data:t};return e._id||(e._id=++ft),e}function vt(t){return pt(ht(t,{}))}function gt(t,e){return ht(t,e)}function mt(t){return t&&t.constructor===yt}function yt(){var t=[],e=[],n=[],r=[],i=[];return{constructor:yt,insert:function(e){for(var n=X(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=J(t)?r:e,i=X(t),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(t,e,r){var a={field:e,value:K(r)};return J(t)?(a.filter=t,i.push(a)):(a.tuple=t,n.push(a)),this},encode:function(t,e){return n.push({tuple:t,field:e}),this},pulse:function(a,o){var s,u,l,c,f,d,h;for(u=0,l=t.length;u<l;++u)a.add.push(pt(t[u]));for(s={},u=0,l=e.length;u<l;++u)s[(d=e[u])._id]=d;for(u=0,l=r.length;u<l;++u)f=r[u],o.forEach(function(t){f(t)&&(s[t._id]=t)});for(h in s)a.rem.push(s[h]);function p(t,e,n){n?t[e]=n(t):a.encode=e,s[t._id]=t}for(s={},u=0,l=n.length;u<l;++u)p((c=n[u]).tuple,c.field,c.value),a.modifies(c.field);for(u=0,l=i.length;u<l;++u)c=i[u],f=c.filter,o.forEach(function(t){f(t)&&p(t,c.field,c.value)}),a.modifies(c.field);for(h in s)a.mod.push(s[h]);return a}}}var bt="_:mod:_";function _t(){Object.defineProperty(this,bt,{writable:!0,value:{}})}var xt=_t.prototype;xt.set=function(t,e,n,r){var i=this,a=i[t],o=i[bt];return null!=e&&e>=0?(a[e]!==n||r)&&(a[e]=n,o[e+":"+t]=-1,o[t]=-1):(a!==n||r)&&(i[t]=n,o[t]=P(n)?n.length:-1),i},xt.modified=function(t,e){var n,r=this[bt];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(P(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e<r[t]||!!r[e+":"+t]:!!r[t]},xt.clear=function(){return this[bt]={},this};var wt=0,At=new _t;function kt(t,e,n,r){this.id=++wt,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var Mt=kt.prototype;function Tt(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}Mt.targets=function(){return this._targets||(this._targets=ct(N))},Mt.set=function(t){return this.value!==t?(this.value=t,1):0},Mt.skip=Tt(1),Mt.modified=Tt(2),Mt.parameters=function(t,e){e=!1!==e;var n,r,i,a,o=this,s=o._argval=o._argval||new _t,u=o._argops=o._argops||[],l=[];function c(t,n,r){r instanceof kt?(r!==o&&(e&&r.targets().add(o),l.push(r)),u.push({op:r,name:t,index:n})):s.set(t,n,r)}for(n in t)if(r=t[n],"pulse"===n)X(r).forEach(function(t){t instanceof kt?t!==o&&(t.targets().add(o),l.push(t)):E("Pulse parameters must be operator instances.")}),o.source=r;else if(P(r))for(s.set(n,-1,Array(i=r.length)),a=0;a<i;++a)c(n,a,r[a]);else c(n,-1,r);return this.marshall().clear(),l},Mt.marshall=function(t){var e,n,r,i,a,o=this._argval||At,s=this._argops;if(s&&(r=s.length))for(n=0;n<r;++n)e=s[n],i=e.op,a=i.modified()&&i.stamp===t,o.set(e.name,e.index,i.value,a);return o},Mt.evaluate=function(t){if(this._update){var e=this.marshall(t.stamp),n=this._update(e,t);if(e.clear(),n!==this.value)this.value=n;else if(!this.modified())return t.StopPropagation}},Mt.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e=this.skip()?(this.skip(!1),0):this.evaluate(t);return this.stamp=t.stamp,this.pulse=e||t};var St=0;function Ct(t,e,n){this.id=++St,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function Et(t,e,n){return new Ct(t,e,n)}var Ot=Ct.prototype;Ot._filter=q,Ot._apply=z,Ot.targets=function(){return this._targets||(this._targets=ct(N))},Ot.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},Ot.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},Ot.filter=function(t){var e=Et(t);return this.targets().add(e),e},Ot.apply=function(t){var e=Et(null,t);return this.targets().add(e),e},Ot.merge=function(){var t=Et();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},Ot.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return n-e>t?(e=n,1):0})},Ot.debounce=function(t){var e=Et(),n=null,r=null;function i(){var t=n.dataflow;e.receive(n),n=null,r=null,t&&t.run&&t.run()}return this.targets().add(Et(null,null,function(e){n=e,r&&clearTimeout(r),r=setTimeout(i,t)})),e},Ot.between=function(t,e){var n=!1;return t.targets().add(Et(null,null,function(){n=!0})),e.targets().add(Et(null,null,function(){n=!1})),this.filter(function(){return n})};var Pt={skip:!0};function Lt(t,e,n,r,i,a){var o,s,u=Q({},a,Pt);J(n)||(n=K(n)),void 0===r?o=function(e){t.touch(n(e))}:J(r)?(s=new kt(null,r,i,!1),o=function(e){var r=n(e),i=(s.evaluate(e),s.value);mt(i)?t.pulse(r,i,a):t.update(r,i,u)}):o=function(e){t.update(n(e),r,u)},e.apply(o)}function Rt(t,e,n,r,i,a){var o,s;void 0===r?s=n:(o=J(r)?r:K(r),(s=new kt(null,r=n?function(t,e){var r=o(t,e);return n.skip()?r:n.skip(!0).value=r}:o,i,!1)).modified(a&&a.force),s.rank=0,n&&(s.skip(!0),s.value=n.value,s.targets().add(n))),e.targets().add(s)}var Dt={};function Ft(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var jt=Ft.prototype;function Nt(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function zt(t,e){var n={};return t.visit(e,function(t){n[t._id]=1}),function(t){return n[t._id]?null:t}}jt.StopPropagation=Dt,jt.ADD=1,jt.REM=2,jt.MOD=4,jt.ADD_REM=3,jt.ADD_MOD=5,jt.ALL=7,jt.REFLOW=8,jt.SOURCE=16,jt.NO_SOURCE=32,jt.NO_FIELDS=64,jt.fork=function(t){return new Ft(this.dataflow).init(this,t)},jt.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length?((t=new Ft(this.dataflow).init(this)).add=t.source,t):t},jt.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),n.add=1&e?(n.addF=t.addF,t.add):(n.addF=null,[]),n.rem=2&e?(n.remF=t.remF,t.rem):(n.remF=null,[]),n.mod=4&e?(n.modF=t.modF,t.mod):(n.modF=null,[]),n.source=32&e?(n.srcF=null,null):(n.srcF=t.srcF,t.source),n},jt.runAfter=function(t){this.dataflow.runAfter(t)},jt.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},jt.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,zt(this,1))),this},jt.modifies=function(t){var e=X(t),n=this.fields||(this.fields={});return e.forEach(function(t){n[t]=!0}),this},jt.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?P(t)?t.some(function(t){return e[t]}):e[t]:!!e)},jt.filter=function(t,e){var n=this;return 1&t&&(n.addF=Nt(n.addF,e)),2&t&&(n.remF=Nt(n.remF,e)),4&t&&(n.modF=Nt(n.modF,e)),16&t&&(n.srcF=Nt(n.srcF,e)),n},jt.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=e.add.filter(e.addF),e.addF=null),2&t&&e.remF&&(e.rem=e.rem.filter(e.remF),e.remF=null),4&t&&e.modF&&(e.mod=e.mod.filter(e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},jt.visit=function(t,e){var n,r,i=e;return 16&t?(lt(this.source,this.srcF,i),this):(1&t&&lt(this.add,this.addF,i),2&t&&lt(this.rem,this.remF,i),4&t&&lt(this.mod,this.modF,i),8&t&&(n=this.source)&&((r=this.add.length+this.mod.length)===n.length||lt(n,r?zt(this,5):this.srcF,i)),this)};var It={skip:!1,force:!1};function Bt(){}function qt(t,e){var n=new Bt;if(t instanceof Bt)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Ut(){var t,e,n,r=[],i=[];function a(n,i,o,s){if(i>=r.length)return null!=e?e(n):null!=t?n.sort(t):n;for(var u,l,c,f=-1,d=n.length,h=r[i++],p=qt(),v=o();++f<d;)(c=p.get(u=h(l=n[f])+""))?c.push(l):p.set(u,[l]);return p.each(function(t,e){s(v,e,a(t,i,o,s))}),v}return n={object:function(t){return a(t,0,Ht,Wt)},map:function(t){return a(t,0,Gt,Vt)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var o,s=i[a-1];return null!=e&&a>=r.length?o=n.entries():(o=[],n.each(function(e,n){o.push({key:n,values:t(e,a)})})),null!=s?o.sort(function(t,e){return s(t.key,e.key)}):o}(a(t,0,Gt,Vt),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function Ht(){return{}}function Wt(t,e,n){t[e]=n}function Gt(){return qt()}function Vt(t,e,n){t.set(e,n)}Bt.prototype=qt.prototype={constructor:Bt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}},qt.prototype;var Yt={value:function(){}};function Zt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new Xt(r)}function Xt(t){this._=t}function $t(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Jt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Yt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function Kt(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function Qt(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i,a={},o={},s=[],u=t.length,l=0,c=0;function f(){if(l>=u)return o;if(i)return i=!1,a;var e,r=l;if(34===t.charCodeAt(r)){for(var s=r;s++<u;)if(34===t.charCodeAt(s)){if(34!==t.charCodeAt(s+1))break;++s}return l=s+2,13===(e=t.charCodeAt(s+1))?(i=!0,10===t.charCodeAt(s+2)&&++l):10===e&&(i=!0),t.slice(r+1,s).replace(/""/g,'"')}for(;l<u;){var c=1;if(10===(e=t.charCodeAt(l++)))i=!0;else if(13===e)i=!0,10===t.charCodeAt(l)&&(++l,++c);else if(e!==n)continue;return t.slice(r,l-c)}return t.slice(r)}for(;(r=f())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=f();e&&null==(d=e(d,c++))||s.push(d)}return s}function i(e){return e.map(a).join(t)}function a(t){return null==t?"":e.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Kt(t);return function(r,i){return e(n(r),i,t)}}(t,e):Kt(t)});return a.columns=i,a},parseRows:r,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(a).join(t)].concat(e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}}Xt.prototype=Zt.prototype={constructor:Xt,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=Jt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Jt(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=$t(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Xt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,n=r.length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}},Qt(","),Qt("\t");var te=/^([A-Za-z]+:)?\/\//,ee="file://",ne=["mimeType","responseType","user","password"];function re(t,e){return Q({},t.options,e)}function ie(t,e){var n=this;return n.sanitize(t,e).then(function(t){var r=t.href;return le(r,ee)?n.file(r.slice(ee.length)):n.http(r,e)})}function ae(t,e){return e=re(this,e),new Promise(function(n,r){var i,a,o;null!=t&&"string"===typeof t?(a=te.test(t),(o=e.baseURL)&&!a&&(le(t,"/")||"/"===o[o.length-1]||(t="/"+t),t=o+t),(i=le(t,ee))||"file"===e.mode||"http"!==e.mode&&!a&&ue()?t=(i?"":ee)+t:le(t,"//")&&(t=(e.defaultProtocol||"http")+":"+t),n({href:t})):r("Sanitize failure, invalid URI: "+D(t))})}function oe(t,e){return e=re(this,e),new Promise(function(n,r){var i,a=function(t,e){var n,r,i,a,o=Zt("beforesend","progress","load","error"),s=qt(),u=new XMLHttpRequest,l=null,c=null,f=0;function d(t){var e,r=u.status;if(!r&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||r>=200&&r<300||304===r){if(i)try{e=i.call(n,u)}catch(a){return void o.call("error",n,a)}else e=u;o.call("load",n,e)}else o.call("error",n,t)}if("undefined"===typeof XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=u.ontimeout=d:u.onreadystatechange=function(t){u.readyState>3&&d(t)},u.onprogress=function(t){o.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),n)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",n):r},responseType:function(t){return arguments.length?(a=t,n):a},timeout:function(t){return arguments.length?(f=+t,n):f},user:function(t){return arguments.length<1?l:(l=null==t?null:t+"",n)},password:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},response:function(t){return i=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,i,d){return u.open(e,t,!0,l,c),null==r||s.has("accept")||s.set("accept",r+",*/*"),u.setRequestHeader&&s.each(function(t,e){u.setRequestHeader(e,t)}),null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=a&&(u.responseType=a),f>0&&(u.timeout=f),null==d&&"function"===typeof i&&(d=i,i=null),null!=d&&1===d.length&&(d=function(t){return function(e,n){t(null==e?n:null)}}(d)),null!=d&&n.on("error",d).on("load",function(t){d(null,t)}),o.call("beforesend",n,u),u.send(null==i?null:i),n},abort:function(){return u.abort(),n},on:function(){var t=o.on.apply(o,arguments);return t===o?n:t}},null!=e){if("function"!==typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n}(t);for(i in e.headers)a.header(i,e.headers[i]);ne.forEach(function(t){e[t]&&a[t](e[t])}),a.on("error",function(e){r(e||"Error loading URL: "+t)}).on("load",function(t){var e=t&&t.responseText;t&&0!==t.status?n(e):r(e||"Error")}).get()})}function se(t){return new Promise(function(e,n){var r=ue();r?r.readFile(t,function(t,r){t?n(t):e(r)}):n("No file system access for "+t)})}function ue(){var t=n(65);return t&&J(t.readFile)?t:null}function le(t,e){return null!=t&&0===t.lastIndexOf(e,0)}var ce={boolean:function(t){return null==t||""===t?null:!(!t||"false"===t)&&!!t},integer:pe,number:pe,date:function(t,e){return null==t||""===t?null:e?e(t):Date.parse(t)},string:function(t){return null==t||""===t?null:t+""}},fe=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return ve(t)&&(t=+t)===~~t},ve,function(t){return!isNaN(Date.parse(t))}],de=["boolean","integer","number","date"];function he(t,e){return e.reduce(function(e,n){return e[n]=function(t,e){var n,r,i,a,o,s=fe.slice();for(r=0,i=t.length;r<i;++r){for(n=e?t[r][e]:t[r],a=0;a<s.length;++a)null==(o=n)||o!==o||s[a](n)||(s.splice(a,1),--a);if(0===s.length)return"string"}return de[fe.indexOf(s[0])]}(t,n),e},{})}function pe(t){return null==t||""===t?null:+t}function ve(t){return!isNaN(+t)&&!(t instanceof Date)}function ge(t){return function(e,n){var r={delimiter:t};return me(e,n?Q(n,r):r)}}function me(t,e){return e.header&&(t=e.header.map(D).join(e.delimiter)+"\n"+t),Qt(e.delimiter).parse(t+"")}function ye(e,n){var r;return e=!L(e)||(r=e,"function"===typeof t&&J(t.isBuffer)&&t.isBuffer(r))?JSON.parse(e):e,n&&n.property?F(n.property)(e):e}function be(){}function _e(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:xe(t,e)};return null==e.id&&delete n.id,n}function xe(t,e){var n=function(t){if(!t)return be;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,s){s||(e=n=0),t[0]=(e+=t[0])*r+a,t[1]=(n+=t[1])*i+o}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i,a=r[t<0?~t:t],o=0,s=a.length;o<s;++o)e.push(i=a[o].slice()),n(i,o);t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function a(t){return t=t.slice(),n(t,0),t}function o(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0].slice()),e}function s(t){for(var e=o(t);e.length<4;)e.push(e[0].slice());return e}function u(t){return t.map(s)}var l={Point:function(t){return a(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(a)},LineString:function(t){return o(t.arcs)},MultiLineString:function(t){return t.arcs.map(o)},Polygon:function(t){return u(t.arcs)},MultiPolygon:function(t){return t.arcs.map(u)}};return function t(e){var n=e.type;return"GeometryCollection"===n?{type:n,geometries:e.geometries.map(t)}:n in l?{type:n,coordinates:l[n](e)}:null}(e)}function we(t,e){var n={},r={},i={},a=[],o=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),a.push(i)}}return e.forEach(function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++o],e[o]=n,e[r]=i)}),e.forEach(function(e){var n,a,o=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=o[0],u=o[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,a=r[u]){delete r[a.start];var l=a===n?n:n.concat(a);r[l.start=n.start]=i[l.end=a.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,a=i[s]){delete i[a.end];var c=a===n?n:a.concat(n);r[c.start=a.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n}),s(i,r),s(r,i),e.forEach(function(t){n[t<0?~t:t]||a.push([t])}),a}function Ae(t){return xe(t,function(t,e,n){var r=[];function i(t){var e=t<0?~t:t;(u[e]||(u[e]=[])).push({i:t,g:s})}function a(t){t.forEach(i)}function o(t){t.forEach(a)}if(arguments.length>1){var s,u=[],l={LineString:a,MultiLineString:o,Polygon:o,MultiPolygon:function(t){t.forEach(o)}};!function t(e){"GeometryCollection"===e.type?e.geometries.forEach(t):e.type in l&&(s=e,l[e.type](e.arcs))}(e),u.forEach(arguments.length<3?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)})}else for(var c=0,f=t.arcs.length;c<f;++c)r.push(c);return{type:"MultiLineString",arcs:we(t,r)}}.apply(this,arguments))}var ke={dsv:me,csv:ge(","),tsv:ge("\t"),json:ye,topojson:function(t,e){var n,r,i,a;return t=ye(t,e),e&&(r=e.feature)?(n=t.objects[r])?(i=t,a=n,"GeometryCollection"===a.type?{type:"FeatureCollection",features:a.geometries.map(function(t){return _e(i,t)})}:_e(i,a)).features:E("Invalid TopoJSON object: "+r):e&&(r=e.mesh)?(n=t.objects[r])?[Ae(t,n)]:E("Invalid TopoJSON object: "+r):void E("Missing TopoJSON feature or mesh parameter.")}},Me=new Date,Te=new Date;function Se(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return o;do{o.push(new Date(+n))}while(e(n,a),t(n),n<r);return o},i.filter=function(n){return Se(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Me.setTime(+e),Te.setTime(+r),t(Me),t(Te),Math.floor(n(Me,Te))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var Ce=Se(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Ce.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Se(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Ce:null};var Ee=6e4,Oe=6048e5,Pe=Se(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Le=Se(function(t){t.setTime(Math.floor(t/Ee)*Ee)},function(t,e){t.setTime(+t+e*Ee)},function(t,e){return(e-t)/Ee},function(t){return t.getMinutes()}),Re=Se(function(t){var e=t.getTimezoneOffset()*Ee%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),De=Se(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ee)/864e5},function(t){return t.getDate()-1});function Fe(t){return Se(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ee)/Oe})}var je=Fe(0),Ne=Fe(1),ze=Se(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Ie=Se(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ie.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Se(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Be=Se(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ee)},function(t,e){return(e-t)/Ee},function(t){return t.getUTCMinutes()}),qe=Se(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),Ue=Se(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function He(t){return Se(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Oe})}var We=He(0),Ge=He(1),Ve=Se(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Ye=Se(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});function Ze(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Xe(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $e(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Ye.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Se(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Je,Ke,Qe,tn,en,nn={"-":"",_:" ",0:"0"},rn=/^\s*\d+/,an=/^%/,on=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function sn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function un(t){return t.replace(on,"\\$&")}function ln(t){return new RegExp("^(?:"+t.map(un).join("|")+")","i")}function cn(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function fn(t,e,n){var r=rn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function dn(t,e,n){var r=rn.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function hn(t,e,n){var r=rn.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function pn(t,e,n){var r=rn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vn(t,e,n){var r=rn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gn(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mn(t,e,n){var r=rn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yn(t,e,n){var r=rn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function bn(t,e,n){var r=rn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function _n(t,e,n){var r=rn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xn(t,e,n){var r=rn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function wn(t,e,n){var r=rn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function An(t,e,n){var r=rn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function kn(t,e,n){var r=an.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Mn(t,e){return sn(t.getDate(),e,2)}function Tn(t,e){return sn(t.getHours(),e,2)}function Sn(t,e){return sn(t.getHours()%12||12,e,2)}function Cn(t,e){return sn(1+De.count(Ie(t),t),e,3)}function En(t,e){return sn(t.getMilliseconds(),e,3)}function On(t,e){return sn(t.getMonth()+1,e,2)}function Pn(t,e){return sn(t.getMinutes(),e,2)}function Ln(t,e){return sn(t.getSeconds(),e,2)}function Rn(t,e){return sn(je.count(Ie(t),t),e,2)}function Dn(t){return t.getDay()}function Fn(t,e){return sn(Ne.count(Ie(t),t),e,2)}function jn(t,e){return sn(t.getFullYear()%100,e,2)}function Nn(t,e){return sn(t.getFullYear()%1e4,e,4)}function zn(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+sn(e/60|0,"0",2)+sn(e%60,"0",2)}function In(t,e){return sn(t.getUTCDate(),e,2)}function Bn(t,e){return sn(t.getUTCHours(),e,2)}function qn(t,e){return sn(t.getUTCHours()%12||12,e,2)}function Un(t,e){return sn(1+Ue.count(Ye(t),t),e,3)}function Hn(t,e){return sn(t.getUTCMilliseconds(),e,3)}function Wn(t,e){return sn(t.getUTCMonth()+1,e,2)}function Gn(t,e){return sn(t.getUTCMinutes(),e,2)}function Vn(t,e){return sn(t.getUTCSeconds(),e,2)}function Yn(t,e){return sn(We.count(Ye(t),t),e,2)}function Zn(t){return t.getUTCDay()}function Xn(t,e){return sn(Ge.count(Ye(t),t),e,2)}function $n(t,e){return sn(t.getUTCFullYear()%100,e,2)}function Jn(t,e){return sn(t.getUTCFullYear()%1e4,e,4)}function Kn(){return"+0000"}function Qn(){return"%"}function tr(t,e,n){var r=function(t,e){return arguments.length>1?(ke[t]=e,this):ke.hasOwnProperty(t)?ke[t]:null}((e=e||{}).type||"json");return r||E("Unknown data format type: "+e.type),t=r(t,e),e.parse&&function(t,e,n){n=n||Qe;var r,i,a,o,s,u,l,c=t.columns||Object.keys(t[0]);for("auto"===e&&(e=he(t,c)),c=Object.keys(e),r=c.map(function(t){var r,i,a=e[t];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?en(i):n(i);if(!ce[a])throw Error("Illegal format pattern: "+t+":"+a);return ce[a]}),o=0,u=t.length,l=c.length;o<u;++o)for(i=t[o],s=0;s<l;++s)a=c[s],i[a]=r[s](i[a])}(t,e.parse,n),t.hasOwnProperty("columns")&&delete t.columns,t}function er(t,e,n,r){var i,a,o,s,u,l=this,c=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,o=0,s=n.length;o<s;++o)if((i=n[o]).stamp===e){if(i.fields)for(u in a=l.fields||(l.fields={}),i.fields)a[u]=1;i.changed(l.ADD)&&(c|=l.ADD),i.changed(l.REM)&&(c|=l.REM),i.changed(l.MOD)&&(c|=l.MOD)}this.changes=c}!function(t){Je=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,l=ln(i),c=cn(i),f=ln(a),d=cn(a),h=ln(o),p=cn(o),v=ln(s),g=cn(s),m=ln(u),y=cn(u),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Mn,e:Mn,H:Tn,I:Sn,j:Cn,L:En,m:On,M:Pn,p:function(t){return i[+(t.getHours()>=12)]},S:Ln,U:Rn,w:Dn,W:Fn,x:null,X:null,y:jn,Y:Nn,Z:zn,"%":Qn},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:In,e:In,H:Bn,I:qn,j:Un,L:Hn,m:Wn,M:Gn,p:function(t){return i[+(t.getUTCHours()>=12)]},S:Vn,U:Yn,w:Zn,W:Xn,x:null,X:null,y:$n,Y:Jn,Z:Kn,"%":Qn},x={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:yn,e:yn,H:_n,I:_n,j:bn,L:An,m:mn,M:xn,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},S:wn,U:dn,w:fn,W:hn,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:vn,Y:pn,Z:gn,"%":kn};function w(t,e){return function(n){var r,i,a,o=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=nn[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function A(t,e){return function(n){var r=$e(1900),i=k(r,t,n+="",0);if(i!=n.length)return null;if("p"in r&&(r.H=r.H%12+12*r.p),"W"in r||"U"in r){"w"in r||(r.w="W"in r?1:0);var a="Z"in r?Xe($e(r.y)).getUTCDay():e($e(r.y)).getDay();r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(a+5)%7:r.w+7*r.U-(a+6)%7}return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Xe(r)):e(r)}}function k(t,e,n,r){for(var i,a,o=0,s=e.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in nn?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=A(t+="",Ze);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=A(t,Xe);return e.toString=function(){return t},e}}}(t),Ke=Je.format,Qe=Je.parse,tn=Je.utcFormat,en=Je.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||tn("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||en("%Y-%m-%dT%H:%M:%S.%LZ");var nr=rt(er,Ft);function rr(t){this.cmp=t,this.nodes=[]}nr.fork=function(){return arguments.length&&arguments[0]&Ft.prototype.ALL&&E("MultiPulse fork does not support tuple change sets."),new Ft(this.dataflow).init(this,0)},nr.changed=function(t){return this.changes&t},nr.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?P(t)?t.some(function(t){return n[t]}):n[t]:0},nr.filter=function(){E("MultiPulse does not support filtering.")},nr.materialize=function(){E("MultiPulse does not support materialization.")},nr.visit=function(t,e){var n,r,i=this.pulses;for(n=0,r=i.length;n<r;++n)i[n].stamp===this.stamp&&i[n].visit(t,e);return this};var ir=rr.prototype;function ar(t,e,n,r){var i,a,o;for(i=t[n];n>e&&(a=t[o=n-1>>1],r(i,a)<0);)t[n]=a,n=o;return t[n]=i}function or(t,e,n){for(var r,i=e,a=t.length,o=t[e],s=2*e+1;s<a;)(r=s+1)<a&&n(t[s],t[r])>=0&&(s=r),t[e]=t[s],s=2*(e=s)+1;return t[e]=o,ar(t,i,e,n)}function sr(){var t;this._log=Z(),this._clock=0,this._rank=0,this._loader={options:t||{},sanitize:ae,load:ie,file:se,http:oe},this._touched=ct(N),this._pulses={},this._pulse=null,this._heap=new rr(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}ir.size=function(){return this.nodes.length},ir.clear=function(){return this.nodes=[],this},ir.peek=function(){return this.nodes[0]},ir.push=function(t){var e=this.nodes;return e.push(t),ar(e,0,e.length-1,this.cmp)},ir.pop=function(){var t,e=this.nodes,n=e.pop();return e.length?(t=e[0],e[0]=n,or(e,0,this.cmp)):t=n,t},ir.replace=function(t){var e=this.nodes,n=e[0];return e[0]=t,or(e,0,this.cmp),n},ir.pushpop=function(t){var e=this.nodes,n=e[0];return e.length&&this.cmp(n,t)<0&&(e[0]=t,t=n,or(e,0,this.cmp)),t};var ur=sr.prototype;function lr(t){return function(){return this._log[t].apply(this,arguments)}}function cr(t,e){kt.call(this,t,null,e)}ur.stamp=function(){return this._clock},ur.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},ur.cleanThreshold=1e4,ur.add=function(t,e,n,r){var i=1,a=t instanceof kt?t:t&&t.prototype instanceof kt?new t:J(t)?new kt(null,t):(i=0,new kt(t,e));return this.rank(a),i&&(r=n,n=e),n&&this.connect(a,a.parameters(n,r)),this.touch(a),a},ur.connect=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},ur.rank=function(t){t.rank=++this._rank},ur.rerank=function(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(n[r])},ur.pulse=function(t,e,n){var r=new Ft(this,this._clock+(this._pulse?0:1));return r.target=t,this._pulses[t.id]=e.pulse(r,t.value),this.touch(t,n||It)},ur.touch=function(t,e){var n=e||It;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},ur.update=function(t,e,n){var r=n||It;return(t.set(e)||r.force)&&this.touch(t,r),this},ur.changeset=yt,ur.ingest=function(t,e,n){return this.pulse(t,this.changeset().insert(tr(e,n)))},ur.request=function(t,e,n){var r=this,i=r._pending||function(t){var e,n,r=new Promise(function(t,r){e=t,n=r});return r.requests=0,r.done=function(){0===--r.requests&&t.runAfter(function(){t._pending=null;try{t.run(),e(t)}catch(r){n(r)}})},t._pending=r}(r);i.requests+=1,r.loader().load(e,{context:"dataflow"}).then(function(e){r.ingest(t,e,n)},function(t){r.warn("Loading failed: "+e,t),i.done()}).then(i.done).catch(function(t){r.warn(t)})},ur.events=function(t,e,n,r){var i,a=this,o=Et(n,r),s=function(t){t.dataflow=a,o.receive(t),a.run()};i="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):X(t);for(var u=0,l=i.length;u<l;++u)i[u].addEventListener(e,s);return o},ur.on=function(t,e,n,r,i){return(t instanceof kt?Rt:Lt)(this,t,e,n,r,i),this},ur.run=function(t){if(!this._touched.length)return 0;if(this._pending)return this.info("Awaiting requests, delaying dataflow run."),0;var e,n,r,i=this,a=0,o=i.logLevel();i._pulse=new Ft(i,++i._clock,t),o>=V&&(r=Date.now(),i.debug("-- START PROPAGATION ("+i._clock+") -----")),i._touched.forEach(function(t){i._enqueue(t,!0)}),i._touched=ct(N);try{for(;i._heap.size()>0;)(e=i._heap.pop()).rank===e.qrank?(n=e.run(i._getPulse(e,t)),o>=Y&&i.debug(e.id,n===Dt?"STOP":n,e),n!==Dt&&(i._pulse=n,e._targets&&e._targets.forEach(function(t){i._enqueue(t)})),++a):i._enqueue(e,!0)}catch(u){i.error(u)}if(i._pulses={},i._pulse=null,o>=V&&(r=Date.now()-r,i.info("> Pulse "+i._clock+": "+a+" operators; "+r+"ms")),i._postrun.length){var s=i._postrun;i._postrun=[],s.forEach(function(t){try{t(i)}catch(u){i.error(u)}})}return a},ur.runAsync=function(){return this._pending||Promise.resolve(this.run())},ur.runAfter=function(t){if(this._pulse)this._postrun.push(t);else try{t(this)}catch(e){this.error(e)}},ur._enqueue=function(t,e){var n=!this._pulses[t.id];n&&(this._pulses[t.id]=this._pulse),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},ur._getPulse=function(t,e){var n,r=t.source,i=this._clock;return r&&P(r)?(n=r.map(function(t){return t.pulse}),new er(this,i,n,e)):(r=r&&r.pulse,n=this._pulses[t.id],r&&r!==Dt&&(r.stamp===i&&n.target!==t?n=r:n.source=r.source),n)},ur.warn=lr("warn"),ur.info=lr("info"),ur.debug=lr("debug"),ur.logLevel=lr("level"),ur.error=function(t){throw t};var fr=rt(cr,kt);fr.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},fr.transform=function(){};var dr={},hr={};function pr(t,e){var n=t.type;vr(n,t),gr(n,e)}function vr(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(hr[t]=e,this):hr.hasOwnProperty(t)?hr[t]:null}function gr(t,e){return arguments.length>1?(dr[t]=e,this):dr.hasOwnProperty(t)?dr[t]:null}function mr(t){this._key=t||"_id",this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null}var yr=mr.prototype;yr.add=function(t){this._add.push(t)},yr.rem=function(t){this._rem.push(t)},yr.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,a=this._key,o=r.length,s=i.length,u=Array(o-s),l={};for(t=0;t<s;++t)l[i[t][a]]=1;for(t=0,e=0;t<o;++t)l[(n=r[t])[a]]?l[n[a]]=0:u[e++]=n;return this._rem=[],this._add=u},yr.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},a=0;--r>=0;)e=t(n[r])+"",i.hasOwnProperty(e)||(i[e]=1,++a);return a},yr.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=tt(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},yr.argmin=function(t){return this.extent(t)[0]||{}},yr.argmax=function(t){return this.extent(t)[1]||{}},yr.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):1/0},yr.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):-1/0},yr.quartile=function(t){return this._get===t&&this._q||(this._q=w(this.values(),t),this._get=t),this._q},yr.q1=function(t){return this.quartile(t)[0]},yr.q2=function(t){return this.quartile(t)[1]},yr.q3=function(t){return this.quartile(t)[2]},yr.ci=function(t){return this._get===t&&this._ci||(this._ci=_(this.values(),1e3,.05,t),this._get=t),this._ci},yr.ci0=function(t){return this.ci(t)[0]},yr.ci1=function(t){return this.ci(t)[1]};var br={values:xr({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:xr({name:"count",set:"cell.num"}),missing:xr({name:"missing",set:"this.missing"}),valid:xr({name:"valid",set:"this.valid"}),sum:xr({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:xr({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:xr({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:xr({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:xr({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:xr({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:xr({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:xr({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:xr({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:xr({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:xr({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:xr({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:xr({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:xr({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:xr({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:xr({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:xr({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:xr({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})};function _r(t,e){return br[t](e)}function xr(t){return function(e){var n=Q({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function wr(t,e){return t.idx-e.idx}function Ar(t,e){var n=e||z,r=function(t,e){var n,r=t.reduce(function t(n,r){function i(e){n[e]||t(n,n[e]=br[e]())}return r.req&&r.req.forEach(i),e&&r.str&&r.str.forEach(i),n},t.reduce(function(t,e){return t[e.name]=e,t},{})),i=[];for(n in r)i.push(r[n]);return i.sort(wr)}(t,!0),i="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",a="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",o="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var t = this.tuple; var cell = this.cell;";return r.forEach(function(t){t.idx<0?(i=t.init+i,a=t.add+a,o=t.rem+o):(i+=t.init,a+=t.add,o+=t.rem)}),t.slice().sort(wr).forEach(function(t){s+="t['"+t.out+"']="+t.set+";"}),s+="return t;",(i=Function("cell","t",i)).prototype.add=Function("v","t",a),i.prototype.rem=Function("v","t",o),i.prototype.set=Function(s),i.prototype.get=n,i.fields=t.map(function(t){return t.out}),i}function kr(t){cr.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}var Mr=rt(kr,cr);function Tr(t,e,n){return n||t+(e?"_"+e:"")}function Sr(t){var e,n=this._dims,r=n.length,i=String(n[0](t));for(e=1;e<r;++e)i+="|"+n[e](t);return i}function Cr(t){cr.call(this,null,t)}Mr.transform=function(t,e){var n,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),i.modifies(this._outputs),r._drop=!1!==t.drop,r.changes(i)},Mr.init=function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(t){for(var n,i=t.fields,a=0,o=i.length;a<o;++a)r[n=i[a]]||(r[n]=1,e.push(n))}this._dims=X(t.groupby),this._dnames=this._dims.map(function(t){var e=S(t);return i(t),n.push(e),e}),this.cellkey=t.key?t.key:0===this._dims.length?function(){return""}:1===this._dims.length?this._dims[0]:Sr,this._countOnly=!0,this._counts=[],this._measures=[];var a,o,s,u,l,c,f=t.fields||[null],d=t.ops||["count"],h=t.as||[],p=f.length,v={};for(p!==d.length&&E("Unmatched number of fields and aggregate ops."),c=0;c<p;++c)a=f[c],o=d[c],null==a&&"count"!==o&&E("Null aggregate field specified."),u=S(a),l=Tr(o,u,h[c]),n.push(l),"count"!==o?((s=v[u])||(i(a),(s=v[u]=[]).field=a,this._measures.push(s)),"count"!==o&&(this._countOnly=!1),s.push(_r(o,l))):this._counts.push(l);return this._measures=this._measures.map(function(t){return Ar(t,t.field)}),{}},Mr.cellkey=Sr,Mr.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},Mr.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n,n.tuple)}return n.store&&(n.data=new mr),n},Mr.newtuple=function(t,e){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](t);return e?function(t,e){return e._id=t._id,e}(e.tuple,o):pt(o)},Mr.add=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(t),e=a.agg,n=0,r=e.length;n<r;++n)e[n].add(e[n].get(t),t)},Mr.rem=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(t),e=a.agg,n=0,r=e.length;n<r;++n)e[n].rem(e[n].get(t),t)},Mr.celltuple=function(t){var e,n,r,i=t.tuple,a=this._counts;for(t.store&&t.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=t.num;if(!this._countOnly)for(e=t.agg,n=0,r=e.length;n<r;++n)e[n].set();return i},Mr.changes=function(t){var e,n,r,i,a=this._adds,o=this._mods,s=this._prev,u=this._drop,l=t.add,c=t.rem,f=t.mod;if(s)for(n in s)c.push(s[n].tuple);for(r=0,i=this._alen;r<i;++r)l.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=o[r]).num&&u?c:f).push(this.celltuple(e)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t};var Er=rt(Cr,cr);function Or(t){cr.call(this,[],t)}function Pr(t){kt.call(this,null,Lr,t)}function Lr(t){return this.value&&!t.modified()?this.value:$(t.fields,t.orders)}function Rr(t){cr.call(this,null,t)}Er.transform=function(t,e){var n=this._bins(t),r=n.step,i=t.as||["bin0","bin1"],a=i[0],o=i[1],s=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(C(t.field))?e.ADD_MOD:e.ADD;return e.visit(s,function(t){var e=n(t);t[a]=e,t[o]=null!=e?e+r:null}),e.modifies(i)},Er._bins=function(t){if(this.value&&!t.modified())return this.value;var e=t.field,n=r(t),i=n.start,a=n.stop,o=n.step,s=function(t){var n=e(t);return null==n?null:i+o*Math.floor((+n-i)/o)};return s.start=i,s.stop=a,s.step=o,this.value=T(s,C(e),t.name||"bin_"+S(e))},rt(Or,cr).transform=function(t,e){var n,r=e.fork(e.ALL),i=e.changed(e.ADD),a=e.changed(),o=t.sort,s=this.value;return r.rem.length&&(n={},r.visit(r.REM,function(t){n[t._id]=1}),s=s.filter(function(t){return!n[t._id]})),o?((t.modified("sort")||e.modified(o.fields))&&(s.sort(o),a=!0),i&&(s=at(o,s,r.add.sort(o)))):i&&r.visit(r.ADD,function(t){s.push(t)}),this.modified(a),this.value=r.source=s,r},rt(Pr,kt);var Dr=rt(Rr,cr);function Fr(t){cr.call(this,null,t)}Dr.transform=function(t,e){function n(e){return function(n){for(var r,i=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(s(n),t.case,a)||[],u=0,l=i.length;u<l;++u)o.test(r=i[u])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,a=this._match,o=this._stop,s=t.field,u=t.as||["text","count"],l=n(function(t){i[t]=1+(i[t]||0)}),c=n(function(t){i[t]-=1});return r?e.visit(e.SOURCE,l):(e.visit(e.ADD,l),e.visit(e.REM,c)),this._finish(e,u)},Dr._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},Dr._finish=function(t,e){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),s=e[0],u=e[1],l=t.fork();for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=pt({}),r[s]=n,r[u]=i,l.add.push(r)):0===i?(r&&l.rem.push(r),a[n]=null,o[n]=null):r[u]!==i&&(r[u]=i,l.mod.push(r));return l.modifies(e)},rt(Fr,cr).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],a=i[0],o=i[1],s=!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");return s?(r&&(n.rem=r),n.add=this.value=function(t,e,n,r){for(var i,a,o=[],s={},u=t.length,l=0;l<u;++l)for(s[e]=a=t[l],i=0;i<u;++i)s[n]=t[i],r(s)&&(o.push(pt(s)),(s={})[e]=a);return o}(e.source,a,o,t.filter||q)):n.mod=r,n.source=this.value,n.modifies(i)};var jr={kde:A,mixture:k,normal:x,uniform:M},Nr="distributions",zr="function",Ir="field";function Br(t){cr.call(this,null,t)}function qr(t){cr.call(this,[1/0,-1/0],t)}function Ur(t,e){kt.call(this,t),this.parent=e}rt(Br,cr).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=function t(e,n){var r=e[zr];jr.hasOwnProperty(r)||E("Unknown distribution function: "+r);var i=jr[r]();for(var a in e)a===Ir?i.data((e.from||n()).map(e[a])):a===Nr?i[a](e[a].map(function(e){return t(e,n)})):typeof i[a]===zr&&i[a](e[a]);return i}(t.distribution,function(t){return function(){return t.materialize(t.SOURCE).source}}(e)),i=t.method||"pdf";"pdf"!==i&&"cdf"!==i&&E("Invalid density method: "+i),t.extent||r.data||E("Missing density extent parameter."),i=r[i];var a=t.as||["value","density"],o=t.extent||function(t,e){var n,r,i,a=-1,o=t.length;if(null==e){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e(t[a],a,t))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e(t[a],a,t))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]}(r.data()),s=(o[1]-o[0])/(t.steps||100),u=d(o[0],o[1]+s/2,s).map(function(t){var e={};return e[a[0]]=t,e[a[1]]=i(t),pt(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n},rt(qr,cr).transform=function(t,e){var n=this.value,r=t.field,i=n[0],a=n[1],o=e.ADD;(e.changed()||e.modified(r.fields)||t.modified("field"))&&(o=e.SOURCE,i=1/0,a=-1/0),e.visit(o,function(t){var e=r(t);e<i&&(i=e),e>a&&(a=e)}),this.value=[i,a]};var Hr=rt(Ur,kt);function Wr(t){cr.call(this,{},t),this._keys=nt();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}Hr.connect=function(t){return this.targets().add(t),t.source=this},Hr.add=function(t){this.value.add.push(t)},Hr.rem=function(t){this.value.rem.push(t)},Hr.mod=function(t){this.value.mod.push(t)},Hr.init=function(t){this.value.init(t,t.NO_SOURCE)},Hr.evaluate=function(){return this.value};var Gr=rt(Wr,cr);function Vr(t){kt.call(this,null,Yr,t)}function Yr(t){return this.value&&!t.modified()?this.value:P(t.name)?X(t.name).map(function(t){return F(t)}):F(t.name,t.as)}function Zr(t){cr.call(this,nt(),t)}function Xr(t){cr.call(this,{},t)}function $r(t){return t.fields.join("|")}function Jr(t){cr.call(this,null,t)}function Kr(t){cr.call(this,[],t)}Gr.activate=function(t){this._targets[this._targets.active++]=t},Gr.subflow=function(t,e,n,r){var i,a,o=this.value,s=o.hasOwnProperty(t)&&o[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[t])&&a.tuple,i=n.dataflow,s=i.add(new Ur(n.fork(n.NO_SOURCE),this)).connect(e(i,t,a)),o[t]=s,this.activate(s)),s},Gr.transform=function(t,e){var n=e.dataflow,r=this,i=t.key,a=t.subflow,o=this._keys,s=t.modified("key");function u(t){return r.subflow(t,a,e)}return this._group=t.group||{},this._targets.active=0,e.visit(e.ADD,function(t){var e=i(t);o.set(t._id,e),u(e).add(t)}),e.visit(e.REM,function(t){var e=o.get(t._id);o.delete(t._id),u(e).rem(t)}),s||e.modified(i.fields)?e.visit(e.MOD,function(t){var e=o.get(t._id),n=i(t);e===n?u(n).mod(t):(o.set(t._id,n),u(e).rem(t),u(n).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){u(o.get(t._id)).mod(t)}),s&&e.visit(e.REFLOW,function(t){var e=o.get(t._id),n=i(t);e!==n&&(o.set(t._id,n),u(e).rem(t),u(n).add(t))}),o.empty>n.cleanThreshold&&n.runAfter(o.clean),e},rt(Vr,kt),rt(Zr,cr).transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),a=i.add,o=i.rem,s=i.mod,u=t.expr,l=!0;function c(e){var n=u(e,t),i=r.get(e._id);n&&i?(r.delete(e._id),a.push(e)):n||i?l&&n&&!i&&s.push(e):(r.set(e._id,1),o.push(e))}return e.visit(e.REM,function(t){r.has(t._id)?r.delete(t._id):o.push(t)}),e.visit(e.ADD,function(e){u(e,t)?a.push(e):r.set(e._id,1)}),e.visit(e.MOD,c),t.modified()&&(l=!1,e.visit(e.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},rt(Xr,cr).transform=function(t,e){var n,r=this.value,i=t.modified("fields"),a=t.fields,o=t.as||["key","value"],s=o[0],u=o[1],l=a.map($r),c=a.length,f=(e.stamp,e.fork(e.NO_SOURCE)),d=0,h=0;function p(t){for(var e,n=r[t._id]=Array(c),i=0;i<c;++i)(e=n[i]=vt(t))[s]=l[i],e[u]=a[i](t),f.add.push(e)}if(i){for(n in r)f.rem.push.apply(f.rem,r[n]);r=this.value={},e.visit(e.SOURCE,p)}else{for(e.visit(e.ADD,p);d<c;++d)e.modified(a[d].fields)&&(h|=1<<d);h&&e.visit(e.MOD,function(t){for(var e,n=r[t._id],i=0;i<c;++i)h&1<<i&&((e=gt(t,n[i]))[s]=l[i],e[u]=a[i](t),f.mod.push(e))}),e.visit(e.REM,function(t){f.rem.push.apply(f.rem,r[t._id]),r[t._id]=null})}return f.modifies(o)},rt(Jr,cr).transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),a=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),e.visit(a,function(e){e[r]=n(e,t)}).modifies(r)},rt(Kr,cr).transform=function(t,e){var n,r,i,a=this.value,o=e.fork(e.ALL),s=t.size-a.length,u=t.generator;if(s>0){for(n=[];--s>=0;)n.push(i=pt(u(t))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-s),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-s);return o.source=this.value=a,o};var Qr={value:"value",median:function(t,e){var n,r=[],i=t.length,a=-1;if(null==e)for(;++a<i;)isNaN(n=f(t[a]))||r.push(n);else for(;++a<i;)isNaN(n=f(e(t[a],a,t)))||r.push(n);return y(r.sort(o),.5)},mean:function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(null==e)for(;++a<i;)isNaN(n=f(t[a]))?--o:r+=n;else for(;++a<i;)isNaN(n=f(e(t[a],a,t)))?--o:r+=n;if(o)return r/o},min:function(t,e){var n,r,i=-1,a=t.length;if(null==e){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e(t[i],i,t))&&n>r&&(n=r)}return n},max:function(t,e){var n,r,i=-1,a=t.length;if(null==e){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n}},ti=[];function ei(t){cr.call(this,[],t)}function ni(t){kt.call(this,null,ri,t)}function ri(t){return this.value&&!t.modified()?this.value:it(t.fields)}function ii(t){cr.call(this,{},t)}function ai(t){kt.call(this,null,oi,t)}function oi(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,a=-1/0,o=t.extents;for(e=0,n=o.length;e<n;++e)(r=o[e])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function si(t){kt.call(this,null,ui,t)}function ui(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(t,e){return t.concat(e)},[])}function li(t){cr.call(this,null,t)}function ci(t){Wr.call(this,t)}function fi(t){cr.call(this,null,t)}function di(t){cr.call(this,null,t)}function hi(t){cr.call(this,null,t)}function pi(t){cr.call(this,[],t),this.count=0}function vi(t){cr.call(this,[],t)}function gi(t){cr.call(this,null,t),this.modified(!0)}function mi(t){cr.call(this,nt(),t)}function yi(t){cr.call(this,null,t)}rt(ei,cr).transform=function(t,e){var n,r,i,a,o,s,u,l,c,f,d=e.fork(e.ALL),h=function(t){var e,n=t.method||Qr.value;if(null!=Qr[n])return n===Qr.value?(e=void 0!==t.value?t.value:0,function(){return e}):Qr[n];E("Unrecognized imputation method: "+n)}(t),p=function(t){var e=t.field;return function(t){return t?e(t):NaN}}(t),v=S(t.field),g=t.groupby.map(S),m=t.orderby.map(S),y=function(t,e,n){var r,i,a,o,s,u,l,c,f,d=function(t){return t(f)},h=[],p=[],v={},g={};for(u=0,c=t.length;u<c;++u)f=t[u],i=(r=n.map(d))+"",l=v[i]||(v[i]=p.push(r)),o=(a=e?e.map(d):ti)+"",(s=g[o])||(s=g[o]=[],h.push(s),s.values=a),s[l-1]=f;return h.domain=p,h}(e.source,t.groupby,t.orderby),b=[],_=this.value,x=y.domain.length;for(o=0,l=y.length;o<l;++o)for(n=y[o],i=n.values,r=NaN,u=0;u<x;++u)if(null==n[u]){for(a=y.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[g[s]]=i[s];for(s=0,c=a.length;s<c;++s)f[m[s]]=a[s];f[v]=isNaN(r)?r=h(n,p):r,b.push(pt(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),_.length&&(d.rem=d.materialize(d.REM).rem.concat(_)),this.value=b,d},rt(ni,kt),rt(ii,cr).transform=function(t,e){var n,r,i,a,o=e,s=t.as,u=t.fields,l=t.index,c=null==t.default?null:t.default,f=t.modified(),d=e.ADD;return 1===u.length?(r=u[0],i=s[0],n=function(t){var e=l.get(r(t));t[i]=null==e?c:e}):n=function(t){for(var e,n=0,r=u.length;n<r;++n)e=l.get(u[n](t)),t[s[n]]=null==e?c:e},f?(d=e.SOURCE,o=e.reflow(!0)):(a=u.some(function(t){return e.modified(t.fields)}),d|=a?e.MOD:0),e.visit(d,n),o.modifies(s)},rt(ai,kt),rt(si,kt),rt(li,cr),li.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},rt(ci,Wr).transform=function(t,e){var n=this,r=t.subflow,i=t.field;return t.modified("field")&&E("PreFacet does not support field modification."),this._targets.active=0,e.visit(e.MOD,function(t){var a=n.subflow(t._id,r,e,t);i?i(t).forEach(function(t){a.mod(t)}):a.mod(t)}),e.visit(e.ADD,function(t){var a=n.subflow(t._id,r,e,t);i?i(t).forEach(function(t){a.add(pt(t))}):a.add(t)}),e.visit(e.REM,function(t){var a=n.subflow(t._id,r,e,t);i?i(t).forEach(function(t){a.rem(t)}):a.rem(t)}),e},rt(fi,cr).transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},rt(di,cr).transform=function(t,e){e.source||E("Rank transform requires an upstream data source.");var n,r=t.normalize,i=t.field,a=t.as||"rank",o={},s=-1;return i?(e.visit(e.SOURCE,function(t){var e=i(t);null==o[e]&&(o[e]=++s)}),e.visit(e.SOURCE,r&&--s?function(t){t[a]=o[i(t)]/s}:function(t){t[a]=o[i(t)]})):(s+=e.source.length,n=-1,e.visit(e.SOURCE,r&&s?function(t){t[a]=++n/s}:function(t){t[a]=++n})),e.reflow(t.modified()).modifies(a)},rt(hi,cr).transform=function(t,e){var n,r=this.value||(n=e=e.addAll(),this.value={});return t.derive&&(n=e.fork(),e.visit(e.ADD,function(t){var e=vt(t);r[t._id]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(gt(t,r[t._id]))}),e.visit(e.REM,function(t){n.rem.push(r[t._id]),r[t._id]=null})),n},rt(pi,cr).transform=function(t,e){var n=e.fork(),r=t.modified("size"),i=t.size,a=this.value,o=this.count,s=0,u=a.reduce(function(t,e){return t[e._id]=1,t},{});function l(t){var e,r;a.length<i?a.push(t):(r=~~(o*Math.random()))<a.length&&r>=s&&(e=a[r],u[e._id]&&n.rem.push(e),a[r]=t),++o}if(e.rem.length&&(e.visit(e.REM,function(t){u[t._id]&&(u[t._id]=-1,n.rem.push(t)),--o}),a=a.filter(function(t){return-1!==u[t._id]})),(e.rem.length||r)&&a.length<i&&e.source&&(s=o=a.length,e.visit(e.SOURCE,function(t){u[t._id]||l(t)}),s=-1),r&&a.length>i){for(var c=0,f=a.length-i;c<f;++c)u[a[c]._id]=-1,n.rem.push(a[c]);a=a.slice(f)}return e.mod.length&&e.visit(e.MOD,function(t){u[t._id]&&n.mod.push(t)}),e.add.length&&e.visit(e.ADD,l),(e.add.length||s<0)&&(n.add=a.filter(function(t){return!u[t._id]})),this.count=o,this.value=n.source=a,n},rt(vi,cr).transform=function(t,e){if(t.modified()){var n=e.materialize().fork(e.MOD);return n.rem=e.rem.concat(this.value),n.source=this.value=d(t.start,t.stop,t.step).map(pt),n.add=e.add.concat(this.value),n}},rt(gi,cr).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},rt(mi,cr).transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,a=!0;function o(t){i.set(r(t),t)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,function(t){i.delete(r(t))}),e.visit(e.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()},rt(yi,cr).transform=function(t,e){var n=!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields);n&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};var bi=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],_i={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:bi},{name:"weights",type:"number",array:!0}]},xi={type:"Density",metadata:{generates:!0,source:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:bi.concat(_i)},{name:"as",type:"string",array:!0,default:["value","density"]}]};function wi(t){return new Uint32Array(t)}function Ai(t,e,n){var r=(e<257?function(t){return new Uint8Array(t)}:e<65537?function(t){return new Uint16Array(t)}:wi)(t);return n&&r.set(n),r}function ki(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this.bisect(this.range,t.value),a=t.index,o=i[0],s=i[1],u=a.length;for(n=0;n<o;++n)e[a[n]]|=r;for(n=s;n<u;++n)e[a[n]]|=r;return this}}}function Mi(){var t=wi(0),e=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,s,u,l=n,c=i.length,f=Array(c),d=wi(c);for(u=0;u<c;++u)f[u]=r(i[u]),d[u]=u;if(f=Ti(f,d),l)o=e,s=t,e=Array(l+c),t=wi(l+c),function(t,e,n,r,i,a,o,s,u){var l,c=0,f=0;for(l=0;c<r&&f<o;++l)e[c]<i[f]?(s[l]=e[c],u[l]=n[c++]):(s[l]=i[f],u[l]=a[f++]+t);for(;c<r;++c,++l)s[l]=e[c],u[l]=n[c];for(;f<o;++f,++l)s[l]=i[f],u[l]=a[f]+t}(a,o,s,l,f,d,c,e,t);else{if(a>0)for(u=0;u<c;++u)d[u]+=a;e=f,t=d}return n=l+c,{index:d,value:f}},remove:function(r,i){var a,o,s,u=n;for(o=0;!i[t[o]]&&o<u;++o);for(s=o;o<u;++o)i[a=t[o]]||(t[s]=a,e[s]=e[o],++s);n=u-r},bisect:function(t,r){var i=r?r.length:(r=e,n);return[c(r,t[0],0,i),l(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function Ti(t,e){return t.sort.call(e,function(e,n){var r=t[e],i=t[n];return r<i?-1:r>i?1:0}),function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r}(t,e)}function Si(t){cr.call(this,function(){var t=8,e=[],n=wi(0),r=Ai(0,t),i=Ai(0,t);return{data:function(){return e},seen:function(){return t=n,r=e.length,n=t.length>=r?t:((i=i||new t.constructor(r)).set(t),i);var t,r,i},add:function(t){for(var n,r=0,i=e.length,a=t.length;r<a;++r)(n=t[r])._index=i++,e.push(n)},remove:function(t,n){var a,o,s,u=e.length,l=Array(u-t),c=e;for(o=0;!n[o]&&o<u;++o)l[o]=e[o],c[o]=o;for(s=o;o<u;++o)a=e[o],n[o]?c[o]=-1:(c[o]=s,r[s]=r[o],i[s]=i[o],l[s]=a,a._index=s++),r[o]=0;return e=l,c},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){var a=r.length;(e>a||n>t)&&(t=Math.max(n,t),r=Ai(e,t,r),i=Ai(e,t))}}}(),t),this._indices=null,this._dims=null}pr({type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax"]},{name:"as",type:"string",array:!0},{name:"drop",type:"boolean",default:!0},{name:"key",type:"field"}]},kr),pr({type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Cr),pr({type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Or),pr({type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Rr),pr({type:"Cross",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Fr),pr(xi,Br),pr({type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},qr),pr({type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Zr),pr({type:"Fold",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Xr),pr({type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Jr),pr({type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"orderby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},ei),pr({type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,required:!0},{name:"default",default:null}]},ii),pr({type:"Rank",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"normalize",type:"boolean",default:!1},{name:"as",type:"string",default:"rank"}]},di),pr({type:"Sample",metadata:{source:!0,changes:!0},params:[{name:"size",type:"number",default:1e3}]},pi),pr({type:"Range",metadata:{generates:!0,source:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]},vi),gr("Compare",Pr),gr("Facet",Wr),gr("Field",Vr),gr("Generate",Kr),gr("Key",ni),gr("MultiExtent",ai),gr("MultiValues",si),gr("Params",li),gr("PreFacet",ci),gr("Proxy",fi),gr("Relay",hi),gr("Sieve",gi),gr("Subflow",Ur),gr("TupleIndex",mi),gr("Values",yi);var Ci=rt(Si,cr);function Ei(t){cr.call(this,null,t)}Ci.transform=function(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(function(t){return e.modified(t.fields)});return n?this.reinit(t,e):this.eval(t,e)}return this.init(t,e)},Ci.init=function(t,e){for(var n,r,i=t.fields,a=t.query,o=this._indices={},s=this._dims=[],u=a.length,l=0;l<u;++l)n=i[l].fname,r=o[n]||(o[n]=Mi()),s.push(ki(r,l,a[l]));return this.eval(t,e)},Ci.reinit=function(t,e){var n,r,i,a,o,s,u,l,c,f=e.materialize().fork(),d=t.fields,h=t.query,p=this._indices,v=this._dims,g=this.value,m=g.curr(),y=g.prev(),b=g.all(),_=f.rem=f.add,x=f.mod,w=h.length,A={};if(y.set(m),e.rem.length&&(o=this.remove(t,e,f)),e.add.length&&g.add(e.add),e.mod.length)for(s={},a=e.mod,u=0,l=a.length;u<l;++u)s[a[u]._index]=1;for(u=0;u<w;++u)c=d[u],(!v[u]||t.modified("fields",u)||e.modified(c.fields))&&(i=c.fname,(n=A[i])||(p[i]=r=Mi(),A[i]=n=r.insert(c,e.source,0)),v[u]=ki(r,u,h[u]).onAdd(n,m));for(u=0,l=g.data().length;u<l;++u)o[u]||(y[u]!==m[u]?_.push(u):s[u]&&m[u]!==b&&x.push(u));return g.mask=(1<<w)-1,f},Ci.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},Ci.insert=function(t,e,n){var r,i,a,o=e.add,s=this.value,u=this._dims,l=this._indices,c=t.fields,f={},d=n.add,h=s.size(),p=h+o.length,v=u.length;s.resize(p,v),s.add(o);var g=s.curr(),m=s.prev(),y=s.all();for(r=0;r<v;++r)i=c[r].fname,a=f[i]||(f[i]=l[i].insert(c[r],o,h)),u[r].onAdd(a,g);for(;h<p;++h)m[h]=y,g[h]!==y&&d.push(h)},Ci.modify=function(t,e){var n,r,i,a=e.mod,o=this.value,s=o.curr(),u=o.all(),l=t.mod;for(n=0,r=l.length;n<r;++n)i=l[n]._index,s[i]!==u&&a.push(i)},Ci.remove=function(t,e,n){var r,i,a,o,s=this._indices,u=this.value,l=u.curr(),c=u.prev(),f=u.all(),d={},h=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)a=p[r]._index,d[a]=1,c[a]=o=l[a],l[a]=f,o!==f&&h.push(a);for(a in s)s[a].remove(i,d);return this.reindex(e,i,d),d},Ci.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter(function(){var t=i.remove(e,n);for(var a in r)r[a].reindex(t)})},Ci.update=function(t,e,n){var r,i,a=this._dims,o=t.query,s=e.stamp,u=a.length,l=0;for(n.filters=0,i=0;i<u;++i)t.modified("query",i)&&(r=i,++l);if(1===l)l=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,l=0;i<u;++i)t.modified("query",i)&&(l|=a[i].one,this.incrementAll(a[i],o[i],s,n.add),n.rem=n.add);return l},Ci.incrementAll=function(t,e,n,r){var i,a,o,s=this.value,u=s.seen(),l=s.curr(),c=s.prev(),f=t.index(),d=t.bisect(t.range),h=t.bisect(e),p=h[0],v=h[1],g=d[0],m=d[1],y=t.one;if(p<g)for(i=p,a=Math.min(g,v);i<a;++i)o=f[i],u[o]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;else if(p>g)for(i=g,a=Math.min(p,m);i<a;++i)o=f[i],u[o]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;if(v>m)for(i=Math.max(p,m),a=v;i<a;++i)o=f[i],u[o]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;else if(v<m)for(i=Math.max(g,v),a=m;i<a;++i)o=f[i],u[o]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;t.range=e.slice()},Ci.incrementOne=function(t,e,n,r){var i,a,o,s=this.value,u=s.curr(),l=t.index(),c=t.bisect(t.range),f=t.bisect(e),d=f[0],h=f[1],p=c[0],v=c[1],g=t.one;if(d<p)for(i=d,a=Math.min(p,h);i<a;++i)o=l[i],u[o]^=g,n.push(o);else if(d>p)for(i=p,a=Math.min(d,v);i<a;++i)o=l[i],u[o]^=g,r.push(o);if(h>v)for(i=Math.max(d,v),a=h;i<a;++i)o=l[i],u[o]^=g,n.push(o);else if(h<v)for(i=Math.max(p,h),a=v;i<a;++i)o=l[i],u[o]^=g,r.push(o);t.range=e.slice()},rt(Ei,cr).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;var a=e.fork(e.ALL),o=r.data(),s=r.curr(),u=r.prev(),l=function(t){return s[t]&n?null:o[t]};return a.filter(a.MOD,l),i&i-1?(a.filter(a.ADD,function(t){var e=s[t]&n,r=!e&&e^u[t]&n;return r?o[t]:null}),a.filter(a.REM,function(t){var e=s[t]&n,r=e&&!(e^e^u[t]&n);return r?o[t]:null})):(a.filter(a.ADD,l),a.filter(a.REM,function(t){return(s[t]&n)===i?o[t]:null})),a.filter(a.SOURCE,function(t){return l(t._index)})},pr({type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Si),pr({type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Ei);var Oi,Pi="log",Li="band",Ri="point",Di="ordinal",Fi="quantile",ji="quantize",Ni="threshold",zi="bin-ordinal",Ii="sequential";function Bi(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function qi(t){return(t=Bi(Math.abs(t)))?t[1]:NaN}function Ui(t,e){var n=Bi(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Hi={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,a=-1;i<r;++i)switch(t[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ui(100*t,e)},r:Ui,s:function(t,e){var n=Bi(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Oi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Bi(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Wi=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Gi(t){return new Vi(t)}function Vi(t){if(!(e=Wi.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",a=e[4]||"",o=!!e[5],s=e[6]&&+e[6],u=!!e[7],l=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(u=!0,c="g"):Hi[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=u,this.precision=l,this.type=c}function Yi(t){return t}Gi.prototype=Vi.prototype,Vi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Zi,Xi,$i,Ji=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Ki(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}):Yi,i=t.currency,a=t.decimal,o=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):Yi,s=t.percent||"%";function u(t){var e=(t=Gi(t)).fill,n=t.align,u=t.sign,l=t.symbol,c=t.zero,f=t.width,d=t.comma,h=t.precision,p=t.type,v="$"===l?i[0]:"#"===l&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",g="$"===l?i[1]:/[%p]/.test(p)?s:"",m=Hi[p],y=!p||/[defgprs%]/.test(p);function b(t){var i,s,l,b=v,_=g;if("c"===p)_=m(t)+_,t="";else{var x=(t=+t)<0;if(t=m(Math.abs(t),h),x&&0===+t&&(x=!1),b=(x?"("===u?u:"-":"-"===u||"("===u?"":u)+b,_=_+("s"===p?Ji[8+Oi/3]:"")+(x&&"("===u?")":""),y)for(i=-1,s=t.length;++i<s;)if(48>(l=t.charCodeAt(i))||l>57){_=(46===l?a+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}d&&!c&&(t=r(t,1/0));var w=b.length+t.length+_.length,A=w<f?new Array(f-w+1).join(e):"";switch(d&&c&&(t=r(A+t,A.length?f-_.length:1/0),A=""),n){case"<":t=b+t+_+A;break;case"=":t=b+A+t+_;break;case"^":t=A.slice(0,w=A.length>>1)+b+t+_+A.slice(w);break;default:t=A+b+t+_}return o(t)}return h=null==h?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),b.toString=function(){return t+""},b}return{format:u,formatPrefix:function(t,e){var n=u(((t=Gi(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(qi(e)/3))),i=Math.pow(10,-r),a=Ji[8+r/3];return function(t){return n(i*t)+a}}}}function Qi(t,e){return t.ticks?t.ticks(e):t.domain()}function ta(t,e,n){var r,i,a=t.tickFormat?t.tickFormat(e,n):String;return t.type===Pi?(r=a,i=ea(n),function(t){return r(t)?i(t):""}):a}function ea(t){var e=Gi(t||",");if(null==e.precision){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return function(t,e){return function(n){var r,i,a=t(n),o=a.indexOf(e);if(o<0)return a;for(r=function(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}(a,o),i=r<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}(Xi(e),Xi(".1f")(1)[1])}return Xi(e)}function na(t){cr.call(this,[],t)}function ra(t){cr.call(this,null,t)}function ia(){return pt({})}function aa(t){return t.exit}function oa(t){cr.call(this,null,t)}function sa(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0}(function(t){Zi=Ki(t),Xi=Zi.format,$i=Zi.formatPrefix})({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),rt(na,cr).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,a=t.count,o=t.format||ta(i,a,t.formatSpecifier),s=t.values||Qi(i,a);return r&&(n.rem=r),r=s.map(function(t){return pt({value:t,label:o(t)})}),t.extra&&r.push(pt({extra:{value:r[0].value},label:""})),n.source=n.add=this.value=r,n},rt(ra,cr).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||ia,a=t.key||dt,o=this.value;return o||(e=e.addAll(),this.value=o=nt().test(aa),o.lookup=function(t){return o.get(a(t))}),(t.modified("key")||e.modified(a))&&E("DataJoin does not support modified key function or fields."),e.visit(e.ADD,function(t){var e=a(t),n=o.get(e);n?(n.exit?(--o.empty,r.add):r.mod).push(n):(o.set(e,n=i(t)),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,function(t){var e=a(t),n=o.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,function(t){var e=a(t),n=o.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),t.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},rt(oa,cr).transform=function(t,e){var n=e.fork(e.ADD_REM),r=e.encode,i="enter"===r,a=t.encoders.update||U,o=t.encoders.enter||U,s=t.encoders.exit||U,u=(r&&!i?t.encoders[r]:a)||U;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(e){o(e,t),a(e,t),u!==U&&u!==a&&u(e,t)}),n.modifies(o.output),n.modifies(a.output),u!==U&&u!==a&&n.modifies(u.output)),e.changed(e.REM)&&s!==U&&(e.visit(e.REM,function(e){s(e,t)}),n.modifies(s.output)),i||u!==U){var l=e.MOD|(t.modified()?e.REFLOW:0);i?(e.visit(l,function(e){var r=o(e,t);(u(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(o.output)):e.visit(l,function(e){u(e,t)&&n.mod.push(e)}),n.mod.length&&n.modifies(u.output)}return n};var ua=Array.prototype,la=ua.map,ca=ua.slice,fa={name:"implicit"};function da(t){var e=qt(),n=[],r=fa;function i(i){var a=i+"",o=e.get(a);if(!o){if(r!==fa)return r;e.set(a,o=n.push(i))}return t[(o-1)%t.length]}return t=null==t?[]:ca.call(t),i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=qt();for(var r,a,o=-1,s=t.length;++o<s;)e.has(a=(r=t[o])+"")||e.set(a,n.push(r));return i},i.range=function(e){return arguments.length?(t=ca.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return da().domain(n).range(t).unknown(r)},i}function ha(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pa(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function va(){}var ga=1/.7,ma="\\s*([+-]?\\d+)\\s*",ya="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ba="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_a=/^#([0-9a-f]{3})$/,xa=/^#([0-9a-f]{6})$/,wa=new RegExp("^rgb\\("+[ma,ma,ma]+"\\)$"),Aa=new RegExp("^rgb\\("+[ba,ba,ba]+"\\)$"),ka=new RegExp("^rgba\\("+[ma,ma,ma,ya]+"\\)$"),Ma=new RegExp("^rgba\\("+[ba,ba,ba,ya]+"\\)$"),Ta=new RegExp("^hsl\\("+[ya,ba,ba]+"\\)$"),Sa=new RegExp("^hsla\\("+[ya,ba,ba,ya]+"\\)$"),Ca={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ea(t){var e;return t=(t+"").trim().toLowerCase(),(e=_a.exec(t))?new Da((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=xa.exec(t))?Oa(parseInt(e[1],16)):(e=wa.exec(t))?new Da(e[1],e[2],e[3],1):(e=Aa.exec(t))?new Da(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ka.exec(t))?Pa(e[1],e[2],e[3],e[4]):(e=Ma.exec(t))?Pa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ta.exec(t))?Fa(e[1],e[2]/100,e[3]/100,1):(e=Sa.exec(t))?Fa(e[1],e[2]/100,e[3]/100,e[4]):Ca.hasOwnProperty(t)?Oa(Ca[t]):"transparent"===t?new Da(NaN,NaN,NaN,0):null}function Oa(t){return new Da(t>>16&255,t>>8&255,255&t,1)}function Pa(t,e,n,r){return r<=0&&(t=e=n=NaN),new Da(t,e,n,r)}function La(t){return t instanceof va||(t=Ea(t)),t?new Da((t=t.rgb()).r,t.g,t.b,t.opacity):new Da}function Ra(t,e,n,r){return 1===arguments.length?La(t):new Da(t,e,n,null==r?1:r)}function Da(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Fa(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Na(t,e,n,r)}function ja(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Na)return new Na(t.h,t.s,t.l,t.opacity);if(t instanceof va||(t=Ea(t)),!t)return new Na;if(t instanceof Na)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Na(o,s,u,t.opacity)}(t):new Na(t,e,n,null==r?1:r)}function Na(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function za(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ha(va,Ea,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),ha(Da,Ra,pa(va,{brighter:function(t){return t=null==t?ga:Math.pow(ga,t),new Da(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Da(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ha(Na,ja,pa(va,{brighter:function(t){return t=null==t?ga:Math.pow(ga,t),new Na(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Na(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Da(za(t>=240?t-240:t+120,i,r),za(t,i,r),za(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ia=Math.PI/180,Ba=180/Math.PI,qa=.95047,Ua=1,Ha=1.08883,Wa=4/29,Ga=6/29,Va=3*Ga*Ga,Ya=Ga*Ga*Ga;function Za(t){if(t instanceof $a)return new $a(t.l,t.a,t.b,t.opacity);if(t instanceof no){var e=t.h*Ia;return new $a(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Da||(t=La(t));var n=to(t.r),r=to(t.g),i=to(t.b),a=Ja((.4124564*n+.3575761*r+.1804375*i)/qa),o=Ja((.2126729*n+.7151522*r+.072175*i)/Ua),s=Ja((.0193339*n+.119192*r+.9503041*i)/Ha);return new $a(116*o-16,500*(a-o),200*(o-s),t.opacity)}function Xa(t,e,n,r){return 1===arguments.length?Za(t):new $a(t,e,n,null==r?1:r)}function $a(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Ja(t){return t>Ya?Math.pow(t,1/3):t/Va+Wa}function Ka(t){return t>Ga?t*t*t:Va*(t-Wa)}function Qa(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function to(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function eo(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof no)return new no(t.h,t.c,t.l,t.opacity);t instanceof $a||(t=Za(t));var e=Math.atan2(t.b,t.a)*Ba;return new no(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new no(t,e,n,null==r?1:r)}function no(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}ha($a,Xa,pa(va,{brighter:function(t){return new $a(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new $a(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=Ua*Ka(t),e=qa*Ka(e),n=Ha*Ka(n),new Da(Qa(3.2404542*e-1.5371385*t-.4985314*n),Qa(-.969266*e+1.8760108*t+.041556*n),Qa(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),ha(no,eo,pa(va,{brighter:function(t){return new no(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new no(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Za(this).rgb()}}));var ro=-.14861,io=1.78277,ao=-.29227,oo=-.90649,so=1.97294,uo=so*oo,lo=so*io,co=io*ao-oo*ro;function fo(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ho)return new ho(t.h,t.s,t.l,t.opacity);t instanceof Da||(t=La(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(co*r+uo*e-lo*n)/(co+uo-lo),a=r-i,o=(so*(n-i)-ao*a)/oo,s=Math.sqrt(o*o+a*a)/(so*i*(1-i)),u=s?Math.atan2(o,a)*Ba-120:NaN;return new ho(u<0?u+360:u,s,i,t.opacity)}(t):new ho(t,e,n,null==r?1:r)}function ho(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function po(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function vo(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return po((n-r/e)*e,o,i,a,s)}}function go(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return po((n-r/e)*e,i,a,o,s)}}function mo(t){return function(){return t}}function yo(t,e){return function(n){return t+n*e}}function bo(t,e){var n=e-t;return n?yo(t,n>180||n<-180?n-360*Math.round(n/360):n):mo(isNaN(t)?e:t)}function _o(t){return 1===(t=+t)?xo:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):mo(isNaN(e)?n:e)}}function xo(t,e){var n=e-t;return n?yo(t,n):mo(isNaN(t)?e:t)}ha(ho,fo,pa(va,{brighter:function(t){return t=null==t?ga:Math.pow(ga,t),new ho(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ho(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ia,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Da(255*(e+n*(ro*r+io*i)),255*(e+n*(ao*r+oo*i)),255*(e+n*(so*r)),this.opacity)}}));var wo=function t(e){var n=_o(e);function r(t,e){var r=n((t=Ra(t)).r,(e=Ra(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=xo(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Ao(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ra(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var ko=Ao(vo),Mo=Ao(go);function To(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(r),o=new Array(r);for(n=0;n<i;++n)a[n]=Ro(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function So(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}function Co(t,e){return e-=t=+t,function(n){return t+e*n}}function Eo(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Ro(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Oo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Po=new RegExp(Oo.source,"g");function Lo(t,e){var n,r,i,a=Oo.lastIndex=Po.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=Oo.exec(t))&&(r=Po.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Co(n,r)})),a=Po.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Ro(t,e){var n,r=typeof e;return null==e||"boolean"===r?mo(e):("number"===r?Co:"string"===r?(n=Ea(e))?(e=n,wo):Lo:e instanceof Ea?wo:e instanceof Date?So:Array.isArray(e)?To:isNaN(e)?Eo:Co)(t,e)}function Do(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}var Fo,jo,No,zo,Io=180/Math.PI,Bo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qo(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Io,skewX:Math.atan(u)*Io,scaleX:o,scaleY:s}}function Uo(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:Co(t,i)},{i:u-2,x:Co(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Co(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Co(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Co(t,n)},{i:s-2,x:Co(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Ho=Uo(function(t){return"none"===t?Bo:(Fo||(Fo=document.createElement("DIV"),jo=document.documentElement,No=document.defaultView),Fo.style.transform=t,t=No.getComputedStyle(jo.appendChild(Fo),null).getPropertyValue("transform"),jo.removeChild(Fo),qo(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Wo=Uo(function(t){return null==t?Bo:(zo||(zo=document.createElementNS("http://www.w3.org/2000/svg","g")),zo.setAttribute("transform",t),(t=zo.transform.baseVal.consolidate())?qo((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Bo)},", ",")",")"),Go=Math.SQRT2,Vo=2,Yo=4,Zo=1e-12;function Xo(t){return((t=Math.exp(t))+1/t)/2}function $o(t){return function(e,n){var r=t((e=ja(e)).h,(n=ja(n)).h),i=xo(e.s,n.s),a=xo(e.l,n.l),o=xo(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var Jo=$o(bo),Ko=$o(xo);function Qo(t){return function(e,n){var r=t((e=eo(e)).h,(n=eo(n)).h),i=xo(e.c,n.c),a=xo(e.l,n.l),o=xo(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var ts=Qo(bo),es=Qo(xo);function ns(t){return function e(n){function r(e,r){var i=t((e=fo(e)).h,(r=fo(r)).h),a=xo(e.s,r.s),o=xo(e.l,r.l),s=xo(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var rs=ns(bo),is=ns(xo),as=Object.freeze({interpolate:Ro,interpolateArray:To,interpolateBasis:vo,interpolateBasisClosed:go,interpolateDate:So,interpolateNumber:Co,interpolateObject:Eo,interpolateRound:Do,interpolateString:Lo,interpolateTransformCss:Ho,interpolateTransformSvg:Wo,interpolateZoom:function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],l=e[2],c=s-i,f=u-a,d=c*c+f*f;if(d<Zo)r=Math.log(l/o)/Go,n=function(t){return[i+t*c,a+t*f,o*Math.exp(Go*t*r)]};else{var h=Math.sqrt(d),p=(l*l-o*o+Yo*d)/(2*o*Vo*h),v=(l*l-o*o-Yo*d)/(2*l*Vo*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/Go,n=function(t){var e,n=t*r,s=Xo(g),u=o/(Vo*h)*(s*(e=Go*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*c,a+u*f,o*s/Xo(Go*n+g)]}}return n.duration=1e3*r,n},interpolateRgb:wo,interpolateRgbBasis:ko,interpolateRgbBasisClosed:Mo,interpolateHsl:Jo,interpolateHslLong:Ko,interpolateLab:function(t,e){var n=xo((t=Xa(t)).l,(e=Xa(e)).l),r=xo(t.a,e.a),i=xo(t.b,e.b),a=xo(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}},interpolateHcl:ts,interpolateHclLong:es,interpolateCubehelix:rs,interpolateCubehelixLong:is,quantize:function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}});function os(t){return function(){return t}}function ss(t){return+t}var us=[0,1];function ls(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:os(e)}function cs(t,e,n,r){var i=t[0],a=t[1],o=e[0],s=e[1];return a<i?(i=n(a,i),o=r(s,o)):(i=n(i,a),o=r(o,s)),function(t){return o(i(t))}}function fs(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=n(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(e){var n=l(t,e,1,i)-1;return o[n](a[n](e))}}function ds(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function hs(t,e){var n,r,i,a=us,o=us,s=Ro,u=!1;function l(){return n=Math.min(a.length,o.length)>2?fs:cs,r=i=null,c}function c(e){return(r||(r=n(a,o,u?(i=t,function(t,e){var n=i(t=+t,e=+e);return function(r){return r<=t?0:r>=e?1:n(r)}}):t,s)))(+e);var i}return c.invert=function(t){return(i||(i=n(o,a,ls,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},c.domain=function(t){return arguments.length?(a=la.call(t,ss),l()):a.slice()},c.range=function(t){return arguments.length?(o=ca.call(t),l()):o.slice()},c.rangeRound=function(t){return o=ca.call(t),s=Do,l()},c.clamp=function(t){return arguments.length?(u=!!t,l()):u},c.interpolate=function(t){return arguments.length?(s=t,l()):s},l()}function ps(t,e,n){var r,i=t[0],a=t[t.length-1],o=m(i,a,null==e?10:e);switch((n=Gi(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(qi(e)/3)))-qi(Math.abs(t)))}(o,s))||(n.precision=r),$i(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qi(e)-qi(t))+1}(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-qi(Math.abs(t)))}(o))||(n.precision=r-2*("%"===n.type))}return Xi(n)}function vs(t){var e=t.domain;return t.ticks=function(t){var n=e();return g(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return ps(e(),t,n)},t.nice=function(n){var r=e(),i=r.length-1,a=null==n?10:n,o=r[0],s=r[i],u=m(o,s,a);return u&&(u=m(Math.floor(o/u)*u,Math.ceil(s/u)*u,a),r[0]=Math.floor(o/u)*u,r[i]=Math.ceil(s/u)*u,e(r)),t},t}function gs(){var t=hs(ls,Co);return t.copy=function(){return ds(t,gs())},vs(t)}function ms(t,e){t=t.slice();var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function ys(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:os(e)}function bs(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function _s(t){return isFinite(t)?+("1e"+t):t<0?0:t}function xs(t){return 10===t?_s:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function ws(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function As(t){return function(e){return-t(-e)}}function ks(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Ms(){var t=1,e=hs(function(e,n){return(n=ks(n,t)-(e=ks(e,t)))?function(r){return(ks(r,t)-e)/n}:os(n)},function(e,n){return n=ks(n,t)-(e=ks(e,t)),function(r){return ks(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return ds(e,Ms().exponent(t))},vs(e)}var Ts=1e3,Ss=60*Ts,Cs=60*Ss,Es=24*Cs,Os=7*Es,Ps=30*Es,Ls=365*Es;function Rs(t){return new Date(t)}function Ds(t){return t instanceof Date?+t:+new Date(+t)}function Fs(t,e,n,r,i,a,o,u,l){var c=hs(ls,Co),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),v=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),_=l("%B"),x=l("%Y"),w=[[o,1,Ts],[o,5,5*Ts],[o,15,15*Ts],[o,30,30*Ts],[a,1,Ss],[a,5,5*Ss],[a,15,15*Ss],[a,30,30*Ss],[i,1,Cs],[i,3,3*Cs],[i,6,6*Cs],[i,12,12*Cs],[r,1,Es],[r,2,2*Es],[n,1,Os],[e,1,Ps],[e,3,3*Ps],[t,1,Ls]];function A(s){return(o(s)<s?h:a(s)<s?p:i(s)<s?v:r(s)<s?g:e(s)<s?n(s)<s?y:b:t(s)<s?_:x)(s)}function k(e,n,r,i){if(null==e&&(e=10),"number"===typeof e){var a=Math.abs(r-n)/e,o=s(function(t){return t[2]}).right(w,a);o===w.length?(i=m(n/Ls,r/Ls,e),e=t):o?(o=w[a/w[o-1][2]<w[o][2]/a?o-1:o],i=o[1],e=o[0]):(i=m(n,r,e),e=u)}return null==i?e:e.every(i)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?d(la.call(t,Ds)):d().map(Rs)},c.ticks=function(t,e){var n,r=d(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=k(t,i,a,e))?n.range(i,a+1):[],o?n.reverse():n},c.tickFormat=function(t,e){return null==e?A:l(e)},c.nice=function(t,e){var n=d();return(t=k(t,n[0],n[n.length-1],e))?d(ms(n,t)):c},c.copy=function(){return ds(c,Fs(t,e,n,r,i,a,o,u,l))},c}function js(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}var Ns=js("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),zs=js("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Is=js("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Bs=js("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");function qs(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}is(fo(300,.5,0),fo(-240,.5,1)),is(fo(-100,.75,.35),fo(80,1.5,.8)),is(fo(260,.75,.35),fo(80,1.5,.8)),fo();var Us=qs(js("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Hs=qs(js("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ws=qs(js("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Gs=qs(js("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Vs(){var t,e,n=da().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,u=0,c=.5;function f(){var n=r().length,l=a[1]<a[0],f=a[l-0],h=a[1-l],p=sa(n,s,u);t=(h-f)/(p||1),o&&(t=Math.floor(t)),f+=(h-f-t*(n-s))*c,e=t*(1-s),o&&(f=Math.round(f),e=Math.round(e));var v=d(n).map(function(e){return f+t*e});return i(l?v.reverse():v)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],f()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,f()):o},n.padding=function(t){return arguments.length?(s=u=Math.max(0,Math.min(1,t)),f()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),f()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),f()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.invertRange=function(t){var n,o,s,u=+t[0],c=+t[1],f=a[1]<a[0],d=f?i().reverse():i(),h=d.length-1;if(c<u&&(s=u,u=c,c=s),!(c<d[0]||u>a[1-f]))return n=Math.max(0,l(d,u)-1),o=u===c?n:l(d,c)-1,u-d[n]>e+1e-10&&++n,f&&(s=n,n=h-o,o=h-s),n>o?void 0:r().slice(n,o+1)},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return Vs().domain(r()).range(a).round(o).paddingInner(s).paddingOuter(u).align(c)},f()}var Ys=Array.prototype.map,Zs=Array.prototype.slice;function Xs(t){return Ys.call(t,function(t){return+t})}function $s(t,e){return function(){var n=e();return n.invertRange||(n.invertRange=n.invert?function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}(n):n.invertExtent?function(t){return function(e){var n,r,i,a,o=t.range(),s=e[0],u=e[1],l=-1;for(u<s&&(r=s,s=u,u=r),i=0,a=o.length;i<a;++i)o[i]>=s&&o[i]<=u&&(l<0&&(l=i),n=i);if(!(l<0))return s=t.invertExtent(o[l]),u=t.invertExtent(o[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}(n):void 0),n.type=t,n}}function Js(t,e){return arguments.length>1?(Ks[t]=$s(t,e),this):Ks.hasOwnProperty(t)?Ks[t]:void 0}var Ks={identity:function t(){var e=[0,1];function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=la.call(t,ss),n):e.slice()},n.copy=function(){return t().domain(e)},vs(n)},linear:gs,log:function t(){var e=hs(ys,bs).domain([1,10]),n=e.domain,r=10,i=ws(10),a=xs(10);function o(){return i=ws(r),a=xs(r),n()[0]<0&&(i=As(i),a=As(a)),e}return e.base=function(t){return arguments.length?(r=+t,o()):r},e.domain=function(t){return arguments.length?(n(t),o()):n()},e.ticks=function(t){var e,o=n(),s=o[0],u=o[o.length-1];(e=u<s)&&(d=s,s=u,u=d);var l,c,f,d=i(s),h=i(u),p=null==t?10:+t,v=[];if(!(r%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,s>0){for(;d<h;++d)for(c=1,l=a(d);c<r;++c)if(!((f=l*c)<s)){if(f>u)break;v.push(f)}}else for(;d<h;++d)for(c=r-1,l=a(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;v.push(f)}}else v=g(d,h,Math.min(h-d,p)).map(a);return e?v.reverse():v},e.tickFormat=function(t,n){if(null==n&&(n=10===r?".0e":","),"function"!==typeof n&&(n=Xi(n)),t===1/0)return n;null==t&&(t=10);var o=Math.max(1,r*t/e.ticks().length);return function(t){var e=t/a(Math.round(i(t)));return e*r<r-.5&&(e*=r),e<=o?n(t):""}},e.nice=function(){return n(ms(n(),{floor:function(t){return a(Math.floor(i(t)))},ceil:function(t){return a(Math.ceil(i(t)))}}))},e.copy=function(){return ds(e,t().base(r))},e},ordinal:da,pow:Ms,sqrt:function(){return Ms().exponent(.5)},quantile:function t(){var e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=y(e,t/i);return a}function a(t){if(!isNaN(t=+t))return n[l(r,t)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,a=t.length;r<a;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(o),i()},a.range=function(t){return arguments.length?(n=ca.call(t),i()):n.slice()},a.quantiles=function(){return r.slice()},a.copy=function(){return t().domain(e).range(n)},a},quantize:function t(){var e=0,n=1,r=1,i=[.5],a=[0,1];function o(t){if(t<=t)return a[l(i,t,0,r)]}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},o.range=function(t){return arguments.length?(r=(a=ca.call(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.copy=function(){return t().domain([e,n]).range(a)},vs(o)},threshold:function t(){var e=[.5],n=[0,1],r=1;function i(t){if(t<=t)return n[l(e,t,0,r)]}return i.domain=function(t){return arguments.length?(e=ca.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=ca.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.copy=function(){return t().domain(e).range(n)},i},time:function(){return Fs(Ie,ze,je,De,Re,Le,Pe,Ce,Ke).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return Fs(Ye,Ve,We,Ue,qe,Be,Pe,Ce,tn).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:Vs,point:function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t(n())},e}(Vs().paddingInner(1))},sequential:function t(e){var n=gs(),r=0,i=1,a=!1;function o(){var t=n.domain();r=t[0],i=st(t)-r}function s(t){var n=(t-r)/i;return e(a?Math.max(0,Math.min(1,n)):n)}return s.clamp=function(t){return arguments.length?(a=!!t,s):a},s.domain=function(t){return arguments.length?(n.domain(t),o(),s):n.domain()},s.interpolator=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return t().domain(n.domain()).clamp(a).interpolator(e)},s.ticks=function(t){return n.ticks(t)},s.tickFormat=function(t,e){return n.tickFormat(t,e)},s.nice=function(t){return n.nice(t),o(),s},s},"bin-linear":function t(){var e=gs(),n=[];function r(t){return null==t||t!==t?void 0:e(n[Math.max(l(n,t),1)-1])}return r.domain=function(t){return arguments.length?(function(t){n=Xs(t),e.domain([n[0],st(n)])}(t),r):n.slice()},r.range=function(t){return arguments.length?(e.range(t),r):e.range()},r.rangeRound=function(t){return arguments.length?(e.rangeRound(t),r):e.rangeRound()},r.interpolate=function(t){return arguments.length?(e.interpolate(t),r):e.interpolate()},r.ticks=function(t){var e=n.length,i=~~(e/(t||e));return i<2?r.domain():n.filter(function(t,e){return!(e%i)})},r.tickFormat=function(){return e.tickFormat.apply(e,arguments)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r},"bin-ordinal":function t(){var e=[],n=[];function r(t){return null==t||t!==t?void 0:n[(l(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=Xs(t),r):e.slice()},r.range=function(t){return arguments.length?(n=Zs.call(t),r):n.slice()},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}};for(var Qs in Ks)Js(Qs,Ks[Qs]);function tu(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var eu=tu("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),nu=tu("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),ru=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(tu);function iu(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var au=iu("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ou=iu("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),su=iu("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),uu=iu("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),lu=iu("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cu=iu("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),fu=iu("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),du=iu("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function hu(t){return ko(t[t.length-1])}var pu=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(iu),vu=hu(pu),gu=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(iu),mu=hu(gu),yu=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(iu),bu=hu(yu),_u=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(iu),xu=hu(_u),wu=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(iu),Au=hu(wu),ku=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(iu),Mu=hu(ku),Tu=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(iu),Su=hu(Tu),Cu=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(iu),Eu=hu(Cu),Ou=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(iu),Pu=hu(Ou),Lu=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(iu),Ru=hu(Lu),Du=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(iu),Fu=hu(Du),ju=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(iu),Nu=hu(ju),zu=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(iu),Iu=hu(zu),Bu=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(iu),qu=hu(Bu),Uu=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(iu),Hu=hu(Uu),Wu=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(iu),Gu=hu(Wu),Vu=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(iu),Yu=hu(Vu),Zu=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(iu),Xu=hu(Zu),$u=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(iu),Ju=hu($u),Ku=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(iu),Qu=hu(Ku),tl=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(iu),el=hu(tl),nl=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(iu),rl=hu(nl),il=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(iu),al=hu(il),ol=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(iu),sl=hu(ol),ul=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(iu),ll=hu(ul),cl=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(iu),fl=hu(cl),dl=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(iu),hl=hu(dl),pl=Object.freeze({schemeAccent:au,schemeDark2:ou,schemePaired:su,schemePastel1:uu,schemePastel2:lu,schemeSet1:cu,schemeSet2:fu,schemeSet3:du,interpolateBrBG:vu,schemeBrBG:pu,interpolatePRGn:mu,schemePRGn:gu,interpolatePiYG:bu,schemePiYG:yu,interpolatePuOr:xu,schemePuOr:_u,interpolateRdBu:Au,schemeRdBu:wu,interpolateRdGy:Mu,schemeRdGy:ku,interpolateRdYlBu:Su,schemeRdYlBu:Tu,interpolateRdYlGn:Eu,schemeRdYlGn:Cu,interpolateSpectral:Pu,schemeSpectral:Ou,interpolateBuGn:Ru,schemeBuGn:Lu,interpolateBuPu:Fu,schemeBuPu:Du,interpolateGnBu:Nu,schemeGnBu:ju,interpolateOrRd:Iu,schemeOrRd:zu,interpolatePuBuGn:qu,schemePuBuGn:Bu,interpolatePuBu:Hu,schemePuBu:Uu,interpolatePuRd:Gu,schemePuRd:Wu,interpolateRdPu:Yu,schemeRdPu:Vu,interpolateYlGnBu:Xu,schemeYlGnBu:Zu,interpolateYlGn:Ju,schemeYlGn:$u,interpolateYlOrBr:Qu,schemeYlOrBr:Ku,interpolateYlOrRd:el,schemeYlOrRd:tl,interpolateBlues:rl,schemeBlues:nl,interpolateGreens:al,schemeGreens:il,interpolateGreys:sl,schemeGreys:ol,interpolatePurples:ll,schemePurples:ul,interpolateReds:fl,schemeReds:cl,interpolateOranges:hl,schemeOranges:dl}),vl={blueorange:ru},gl={category10:Ns,category20:Bs,category20b:zs,category20c:Is,accent:au,dark2:ou,paired:su,pastel1:uu,pastel2:lu,set1:cu,set2:fu,set3:du,tableau10:eu,tableau20:nu,viridis:Us,magma:Hs,inferno:Ws,plasma:Gs,blueorange:ko(st(ru))};function ml(t,e){gl[t]=pl["interpolate"+e],vl[t]=pl["scheme"+e]}function yl(t,e){if(arguments.length>1)return gl[t]=e,this;var n=t.split("-");return t=n[0],(n=+n[1]+1)&&vl.hasOwnProperty(t)?vl[t][n-1]:!n&&gl.hasOwnProperty(t)?gl[t]:void 0}function bl(t,e){var n=e-t;return function(e){return t+e*n}}ml("blues","Blues"),ml("greens","Greens"),ml("greys","Greys"),ml("purples","Purples"),ml("reds","Reds"),ml("oranges","Oranges"),ml("brownbluegreen","BrBG"),ml("purplegreen","PRGn"),ml("pinkyellowgreen","PiYG"),ml("purpleorange","PuOr"),ml("redblue","RdBu"),ml("redgrey","RdGy"),ml("redyellowblue","RdYlBu"),ml("redyellowgreen","RdYlGn"),ml("spectral","Spectral"),ml("bluegreen","BuGn"),ml("bluepurple","BuPu"),ml("greenblue","GnBu"),ml("orangered","OrRd"),ml("purplebluegreen","PuBuGn"),ml("purpleblue","PuBu"),ml("purplered","PuRd"),ml("redpurple","RdPu"),ml("yellowgreenblue","YlGnBu"),ml("yellowgreen","YlGn"),ml("yelloworangebrown","YlOrBr"),ml("yelloworangered","YlOrRd");var _l={};function xl(t){var e=t.domain();return e.max=e.pop(),e}function wl(t,e){return _l[t.type]?function(t){return function(e,n,r){var i=r[n+1]||r.max||1/0,a=Al(e,t),o=Al(i,t);return a&&o?a+"\u2013"+o:o?"< "+o:"\u2265 "+a}}(e):function(t){return function(e){return t(e)}}(e)}function Al(t,e){return isFinite(t)?e(t):null}function kl(t){cr.call(this,[],t)}_l[Fi]=function(t){var e=t.domain(),n=[e[0]].concat(t.quantiles());return n.max=st(e),n},_l[ji]=function(t){var e=t.domain(),n=e[0],r=st(e),i=t.range().length,a=new Array(i),o=0;for(a[0]=n;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=r,a},_l[Ni]=function(t){var e=[-1/0].concat(t.domain());return e.max=1/0,e},_l["bin-linear"]=xl,_l[zi]=xl,rt(kl,cr).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=0,i=this.value,a="gradient"===t.type,o=t.scale,s=null==t.count?5:t.count,u=t.format||ta(o,s,t.formatSpecifier),l=t.values||function(t,e,n){if(n)return t.domain();var r=_l[t.type];return r?r(t):Qi(t,e)}(o,s,a);if(u=wl(o,u),i&&(n.rem=i),a)var c=t.values?o.domain():l,f=function(t,e,n){return"linear"===t.type||"sequential"===t.type?function(t){return(t-e)/(n-e)}:t.copy().domain([e,n]).range([0,1]).interpolate(bl)}(o,c[0],st(c));else{var d,h=t.size;J(h)?(t.values||0!==o(l[0])||(l=l.slice(1)),d=l.reduce(function(e,n){return Math.max(e,h(n,t))},0)):h=K(d=h||8)}return i=l.map(function(e,n){var i=pt({index:n,label:u(e,n,l),value:e});return a?i.perc=f(e):(i.offset=d,i.size=h(e,t),i.total=Math.round(r),r+=i.size),i}),n.source=n.add=this.value=i,n};var Ml=nt({line:Pl,"line-radial":function(t,e,n,r){return Pl(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:Ll,"arc-radial":function(t,e,n,r){return Ll(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:Rl,"curve-radial":function(t,e,n,r){return Rl(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n},"orthogonal-vertical":function(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r},"orthogonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*a+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*o+","+e*s+"L"+r*o+","+r*s},"diagonal-horizontal":function(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s}});function Tl(t){return t.source.x}function Sl(t){return t.source.y}function Cl(t){return t.target.x}function El(t){return t.target.y}function Ol(t){cr.call(this,{},t)}function Pl(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function Ll(t,e,n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a)/2,s=180*Math.atan2(a,i)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+s+" 0 1 "+n+","+r}function Rl(t,e,n,r){var i=n-t,a=r-e,o=.2*(i+a),s=.2*(a-i);return"M"+t+","+e+"C"+(t+o)+","+(e+s)+" "+(n+s)+","+(r-o)+" "+n+","+r}function Dl(t){cr.call(this,null,t)}rt(Ol,cr).transform=function(t,e){var n=t.sourceX||Tl,r=t.sourceY||Sl,i=t.targetX||Cl,a=t.targetY||El,o=t.as||"path",s=t.orient||"vertical",u=t.shape||"line",l=Ml.get(u+"-"+s)||Ml.get(u);return l||E("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,function(t){t[o]=l(n(t),r(t),i(t),a(t))}),e.reflow(t.modified()).modifies(o)},rt(Dl,cr).transform=function(t,e){var n,r,i,a=t.as||["startAngle","endAngle"],o=a[0],s=a[1],u=t.field||B,l=t.startAngle||0,c=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,h=f.map(u),p=h.length,v=l,g=(c-l)/function(t,e){var n,r=0,i=t.length,a=-1;if(null==e)for(;++a<i;)(n=+t[a])&&(r+=n);else for(;++a<i;)(n=+e(t[a],a,t))&&(r+=n);return r}(h),m=d(p);for(t.sort&&m.sort(function(t,e){return h[t]-h[e]}),n=0;n<p;++n)i=h[m[n]],(r=f[m[n]])[o]=v,r[s]=v+=i*g;return this.value=h,e.reflow(t.modified()).modifies(a)};var Fl=5,jl=ut(["linear","pow","sqrt"]),Nl=ut(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function zl(t){cr.call(this,null,t),this.modified(!0)}function Il(t,e,n){var r=e.round||!1,i=e.range;if(null!=e.rangeStep)i=function(t,e,n){t!==Li&&t!==Ri&&E("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===Ri?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*sa(n,i,r)]}(t.type,e,n);else if(e.scheme){if(i=function(t,e,n){var r,i=e.scheme.toLowerCase(),a=yl(i),o=e.schemeExtent;return a||E("Unrecognized scheme name: "+e.scheme),n=t===Ni?n+1:t===zi?n-1:t===Fi||t===ji?+e.schemeCount||Fl:n,t===Ii?Bl(a,o,e.reverse):!o&&(r=yl(i+"-"+n))?r:J(a)?function(t,e){for(var n=new Array(e),r=e-1||1,i=0;i<e;++i)n[i]=t(i/r);return n}(Bl(a,o),n):t===Di?a:a.slice(0,n)}(t.type,e,n),J(i))return t.interpolator(i)}else if(i&&t.type===Ii)return t.interpolator(ko(ql(i,e.reverse)));i&&e.interpolate&&t.interpolate?t.interpolate(function(t,e){var n=as[function(t){return"interpolate"+t.toLowerCase().split("-").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}(e.interpolate,e.interpolateGamma)):J(t.round)?t.round(r):J(t.rangeRound)&&t.interpolate(r?Do:Ro),i&&t.range(ql(i,e.reverse))}function Bl(t,e,n){return J(t)&&(e||n)?function(t,e){var n=e[0],r=st(e)-n;return function(e){return t(n+e*r)}}(t,ql(e||[0,1],n)):t}function ql(t,e){return e?t.slice().reverse():t}function Ul(t){cr.call(this,null,t)}function Hl(t,e,n,r,i){for(var a,o=(e-t.sum)/2,s=t.length,u=0;u<s;++u)(a=t[u])[r]=o,a[i]=o+=Math.abs(n(a))}function Wl(t,e,n,r,i){for(var a,o=1/t.sum,s=0,u=t.length,l=0,c=0;l<u;++l)(a=t[l])[r]=s,a[i]=s=o*(c+=Math.abs(n(a)))}function Gl(t,e,n,r,i){for(var a,o,s=0,u=0,l=t.length,c=0;c<l;++c)o=t[c],(a=n(o))<0?(o[r]=u,o[i]=u+=a):(o[r]=s,o[i]=s+=a)}function Vl(t){return function(){return t}}function Yl(){return 1e-6*(Math.random()-.5)}function Zl(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,l,c,f,d,h=t._root,p={data:r},v=t._x0,g=t._y0,m=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((l=e>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o,i=h,!(h=h[f=c<<1|l]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o}while((f=c<<1|l)===(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=p,t}function Xl(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function $l(t){return t[0]}function Jl(t){return t[1]}function Kl(t,e,n){var r=new Ql(null==e?$l:e,null==n?Jl:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ql(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function tc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}rt(zl,cr).transform=function(t,e){var n,r=e.dataflow,i=this.value;for(n in i&&!t.modified("type")||(this.value=i=Js((t.type||"linear").toLowerCase())()),t)Nl[n]||(J(i[n])?i[n](t[n]):r.warn("Unsupported scale property: "+n));return Il(i,t,function(t,e,n){var r=function(t,e){return e?(t.domain(e),e.length):-1}(t,e.domainRaw);if(r>-1)return r;var i,a,o=e.domain,s=e.zero||void 0===e.zero&&jl[t.type];return o?((s||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[i]=e.domainMax),null!=e.domainMid&&(((a=e.domainMid)<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a))),t.domain(o),e.nice&&t.nice&&t.nice(!0!==e.nice&&+e.nice||null),o.length):0}(i,t)),e.fork(e.NO_SOURCE|e.NO_FIELDS)},rt(Ul,cr).transform=function(t,e){var n,r,i,a,o=t.as||["y0","y1"],s=o[0],u=o[1],l=t.field||B,c="center"===t.offset?Hl:"normalize"===t.offset?Wl:Gl;for(n=function(t,e,n,r){var i,a,o,s,u,l,c,f,d,h=[],p=function(t){return t(u)};if(null==e)h.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)u=t[a],l=e.map(p),(c=i[l]||(h.push(i[l]=[]),i[l])).push(u);for(l=0,d=0,s=h.length;l<s;++l){for(c=h[l],a=0,f=0,o=c.length;a<o;++a)f+=Math.abs(r(c[a]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(e.source,t.groupby,t.sort,l),r=0,i=n.length,a=n.max;r<i;++r)c(n[r],a,l,s,u);return e.reflow(t.modified()).modifies(o)},pr({type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]},Ol),pr({type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Dl),pr({type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]},Ul),gr("AxisTicks",na),gr("DataJoin",ra),gr("Encode",oa),gr("LegendEntries",kl),gr("Scale",zl);var ec=Kl.prototype=Ql.prototype;function nc(t){return t.x+t.vx}function rc(t){return t.y+t.vy}function ic(t){return t.index}function ac(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}ec.copy=function(){var t,e,n=new Ql(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=tc(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=tc(e));return n},ec.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Zl(this.cover(e,n),e,n,t)},ec.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));for(c<u&&(u=this._x0,c=this._x1),f<l&&(l=this._y0,f=this._y1),this.cover(u,l).cover(c,f),n=0;n<a;++n)Zl(this,o[n],s[n],t[n]);return this},ec.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>a))return this;var o,s,u=i-n,l=this._root;switch(s=(e<(r+a)/2)<<1|t<(n+i)/2){case 0:do{(o=new Array(4))[s]=l,l=o}while(a=r+(u*=2),t>(i=n+u)||e>a);break;case 1:do{(o=new Array(4))[s]=l,l=o}while(a=r+(u*=2),(n=i-u)>t||e>a);break;case 2:do{(o=new Array(4))[s]=l,l=o}while(r=a-(u*=2),t>(i=n+u)||r>e);break;case 3:do{(o=new Array(4))[s]=l,l=o}while(r=a-(u*=2),(n=i-u)>t||r>e)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},ec.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},ec.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ec.find=function(t,e,n){var r,i,a,o,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],v=this._root;for(v&&p.push(new Xl(v,c,f,d,h)),null==n?n=1/0:(c=t-n,f=e-n,d=t+n,h=e+n,n*=n);u=p.pop();)if(!(!(v=u.node)||(i=u.x0)>d||(a=u.y0)>h||(o=u.x1)<c||(s=u.y1)<f))if(v.length){var g=(i+o)/2,m=(a+s)/2;p.push(new Xl(v[3],g,m,o,s),new Xl(v[2],i,m,g,s),new Xl(v[1],g,a,o,m),new Xl(v[0],i,a,g,m)),(l=(e>=m)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var y=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);c=t-x,f=e-x,d=t+x,h=e+x,r=v.data}}return r},ec.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,l,c,f,d,h=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(u=(v+m)/2))?v=u:m=u,e=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},ec.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},ec.root=function(){return this._root},ec.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},ec.visit=function(t){var e,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new Xl(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var l=(r+a)/2,c=(i+o)/2;(n=u[3])&&s.push(new Xl(n,l,c,a,o)),(n=u[2])&&s.push(new Xl(n,r,c,l,o)),(n=u[1])&&s.push(new Xl(n,l,i,a,c)),(n=u[0])&&s.push(new Xl(n,r,i,l,c))}return this},ec.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Xl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(o+u)/2,f=(s+l)/2;(a=i[0])&&n.push(new Xl(a,o,s,c,f)),(a=i[1])&&n.push(new Xl(a,c,s,u,f)),(a=i[2])&&n.push(new Xl(a,o,f,c,l)),(a=i[3])&&n.push(new Xl(a,c,f,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},ec.x=function(t){return arguments.length?(this._x=t,this):this._x},ec.y=function(t){return arguments.length?(this._y=t,this):this._y};var oc,sc,uc=0,lc=0,cc=0,fc=1e3,dc=0,hc=0,pc=0,vc="object"===typeof performance&&performance.now?performance:Date,gc="function"===typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};function mc(){return hc||(gc(yc),hc=vc.now()+pc)}function yc(){hc=0}function bc(){this._call=this._time=this._next=null}function _c(t,e,n){var r=new bc;return r.restart(t,e,n),r}function xc(){hc=(dc=vc.now())+pc,uc=lc=0;try{!function(){mc(),++uc;for(var t,e=oc;e;)(t=hc-e._time)>=0&&e._call.call(null,t),e=e._next;--uc}()}finally{uc=0,function(){for(var t,e,n=oc,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:oc=e);sc=t,Ac(r)}(),hc=0}}function wc(){var t=vc.now(),e=t-dc;e>fc&&(pc-=e,dc=t)}function Ac(t){if(!uc){lc&&(lc=clearTimeout(lc));var e=t-hc;e>24?(t<1/0&&(lc=setTimeout(xc,e)),cc&&(cc=clearInterval(cc))):(cc||(dc=hc,cc=setInterval(wc,fc)),uc=1,gc(xc))}}function kc(t){return t.x}function Mc(t){return t.y}bc.prototype=_c.prototype={constructor:bc,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?mc():+n)+(null==e?0:+e),this._next||sc===this||(sc?sc._next=this:oc=this,sc=this),this._call=t,this._time=n,Ac()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ac())}};var Tc=10,Sc=Math.PI*(3-Math.sqrt(5)),Cc={center:function(t,e){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)i=n[r],o+=i.x,s+=i.y;for(o=o/a-t,s=s/a-e,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},collide:function(t){var e,n,r=1,i=1;function a(){for(var t,a,s,u,l,c,f,d=e.length,h=0;h<i;++h)for(a=Kl(e,nc,rc).visitAfter(o),t=0;t<d;++t)s=e[t],c=n[s.index],f=c*c,u=s.x+s.vx,l=s.y+s.vy,a.visit(p);function p(t,e,n,i,a){var o=t.data,d=t.r,h=c+d;if(!o)return e>u+h||i<u-h||n>l+h||a<l-h;if(o.index>s.index){var p=u-o.x-o.vx,v=l-o.y-o.vy,g=p*p+v*v;g<h*h&&(0===p&&(p=Yl(),g+=p*p),0===v&&(v=Yl(),g+=v*v),g=(h-(g=Math.sqrt(g)))/g*r,s.vx+=(p*=g)*(h=(d*=d)/(f+d)),s.vy+=(v*=g)*h,o.vx-=p*(h=1-h),o.vy-=v*h)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=Vl(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:Vl(+e),s(),a):t},a},nbody:function(){var t,e,n,r,i=Vl(-30),a=1,o=1/0,s=.81;function u(r){var i,a=t.length,o=Kl(t,kc,Mc).visitAfter(c);for(n=r,i=0;i<a;++i)e=t[i],o.visit(f)}function l(){if(t){var e,n,a=t.length;for(r=new Array(a),e=0;e<a;++e)n=t[e],r[n.index]=+i(n,e,t)}}function c(t){var e,n,i,a,o,s=0;if(t.length){for(i=a=o=0;o<4;++o)(e=t[o])&&(n=e.value)&&(s+=n,i+=n*e.x,a+=n*e.y);t.x=i/s,t.y=a/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function f(t,i,u,l){if(!t.value)return!0;var c=t.x-e.x,f=t.y-e.y,d=l-i,h=c*c+f*f;if(d*d/s<h)return h<o&&(0===c&&(c=Yl(),h+=c*c),0===f&&(f=Yl(),h+=f*f),h<a&&(h=Math.sqrt(a*h)),e.vx+=c*t.value*n/h,e.vy+=f*t.value*n/h),!0;if(!(t.length||h>=o)){(t.data!==e||t.next)&&(0===c&&(c=Yl(),h+=c*c),0===f&&(f=Yl(),h+=f*f),h<a&&(h=Math.sqrt(a*h)));do{t.data!==e&&(d=r[t.data.index]*n/h,e.vx+=c*d,e.vy+=f*d)}while(t=t.next)}}return u.initialize=function(e){t=e,l()},u.strength=function(t){return arguments.length?(i="function"===typeof t?t:Vl(+t),l(),u):i},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},link:function(t){var e,n,r,i,a,o=ic,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=Vl(30),l=1;function c(r){for(var i=0,o=t.length;i<l;++i)for(var s,u,c,f,d,h,p,v=0;v<o;++v)s=t[v],u=s.source,c=s.target,f=c.x+c.vx-u.x-u.vx||Yl(),d=c.y+c.vy-u.y-u.vy||Yl(),h=((h=Math.sqrt(f*f+d*d))-n[v])/h*r*e[v],f*=h,d*=h,c.vx-=f*(p=a[v]),c.vy-=d*p,u.vx+=f*(p=1-p),u.vy+=d*p}function f(){if(r){var s,u,l=r.length,c=t.length,f=qt(r,o);for(s=0,i=new Array(l);s<c;++s)(u=t[s]).index=s,"object"!==typeof u.source&&(u.source=ac(f,u.source)),"object"!==typeof u.target&&(u.target=ac(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)u=t[s],a[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),d(),n=new Array(c),h()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,f()},c.links=function(e){return arguments.length?(t=e,f(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(s="function"===typeof t?t:Vl(+t),d(),c):s},c.distance=function(t){return arguments.length?(u="function"===typeof t?t:Vl(+t),h(),c):u},c},x:function(t){var e,n,r,i=Vl(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=Vl(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:Vl(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"===typeof e?e:Vl(+e),o(),a):t},a},y:function(t){var e,n,r,i=Vl(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=Vl(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:Vl(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"===typeof e?e:Vl(+e),o(),a):t},a}},Ec="forces",Oc=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Pc=["static","iterations"],Lc=["x","y","vx","vy"];function Rc(t){cr.call(this,null,t)}var Dc=rt(Rc,cr);function Fc(t,e){var n=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=qt(),u=_c(c),l=Zt("tick","end");function c(){f(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function f(){var e,r,u=t.length;for(n+=(a-n)*i,s.each(function(t){t(n)}),e=0;e<u;++e)null==(r=t[e]).fx?r.x+=r.vx*=o:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=o:(r.y=r.fy,r.vy=0)}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var i=Tc*Math.sqrt(n),a=n*Sc;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function h(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.each(h),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,h(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=e-(s=t[l]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}(t),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},jc(n,e,!0).on("end",function(){r=!0})}function jc(t,e,n){var r,i,a,o=X(e.forces);for(r=0,i=Oc.length;r<i;++r)(a=Oc[r])!==Ec&&e.modified(a)&&t[a](e[a]);for(r=0,i=o.length;r<i;++r)(n||e.modified(Ec,r))&&t.force(Ec+r,Nc(o[r]));for(i=t.numForces||0;r<i;++r)t.force(Ec+r,null);return t.numForces=o.length,t}function Nc(t){var e,n;for(n in Cc.hasOwnProperty(t.force)||E("Unrecognized force: "+t.force),e=Cc[t.force](),t)J(e[n])&&e[n](t[n]);return e}function zc(t){cr.call(this,null,t)}function Ic(t){cr.call(this,null,t)}function Bc(t){cr.call(this,null,t)}function qc(){return new Uc}function Uc(){this.reset()}Dc.transform=function(t,e){var n,r,i=this.value,a=e.changed(e.ADD_REM),o=t.modified(Oc),s=t.iterations||300;if(i?(a&&(e.modifies("index"),i.nodes(e.source)),o&&jc(i,t)):(this.value=i=Fc(e.source,t),i.on("tick",(n=e.dataflow,r=this,function(){n.touch(r).run()})),t.static||(a=!0,i.tick()),e.modifies("index")),o||a||t.modified(Pc)||e.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),t.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!a)return e.StopPropagation;return this.finish(t,e)},Dc.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===Ec&&"link"===n.op._argval.force)for(var s,u=n.op._argops,l=0,c=u.length;l<c;++l)if("links"===u[l].name&&(s=u[l].op.source)){r.touch(s);break}return e.reflow(t.modified()).modifies(Lc)},pr({type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:["x","y","vx","vy"]}]},Rc),rt(zc,cr).transform=function(t,e){var n,r=e.fork(e.ALL),i=this.value,a=t.field||z,o=t.as||"path";function s(t){t[o]=i(a(t))}return!i||t.modified()?(this.value=i=t.projection.path,r.materialize().reflow().visit(r.SOURCE,s)):(n=a===z||e.modified(a.fields),r.visit(n?r.ADD_MOD:r.ADD,s)),r.modifies(o)},rt(Ic,cr).transform=function(t,e){var n,r=t.projection,i=t.fields[0],a=t.fields[1],o=t.as||["x","y"],s=o[0],u=o[1];function l(t){var e=r([i(t),a(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e.materialize().reflow(!0).visit(e.SOURCE,l):(n=e.modified(i.fields)||e.modified(a.fields),e.visit(n?e.ADD_MOD:e.ADD,l)),e.modifies(o)},rt(Bc,cr).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||F("datum"),a=t.as||"shape",o=n.ADD_MOD;return r&&!t.modified()||(this.value=r=function(t,e){var n=function(n){return t(e(n))};return n.context=function(e){return t.context(e),n},n}(t.projection.path,i),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(t){t[a]=r}),n.modifies(a)},Uc.prototype={constructor:Uc,reset:function(){this.s=this.t=0},add:function(t){Wc(Hc,t,this.t),Wc(this,Hc.s,this.s),this.s?this.t+=Hc.t:this.s=Hc.t},valueOf:function(){return this.s}};var Hc=new Uc;function Wc(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}var Gc=1e-6,Vc=Math.PI,Yc=Vc/2,Zc=Vc/4,Xc=2*Vc,$c=180/Vc,Jc=Vc/180,Kc=Math.abs,Qc=Math.atan,tf=Math.atan2,ef=Math.cos,nf=Math.ceil,rf=Math.exp,af=Math.log,of=Math.pow,sf=Math.sin,uf=Math.sign||function(t){return t>0?1:t<0?-1:0},lf=Math.sqrt,cf=Math.tan;function ff(t){return t>1?0:t<-1?Vc:Math.acos(t)}function df(t){return t>1?Yc:t<-1?-Yc:Math.asin(t)}function hf(){}function pf(t,e){t&&gf.hasOwnProperty(t.type)&&gf[t.type](t,e)}var vf={Feature:function(t,e){pf(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)pf(n[r].geometry,e)}},gf={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){mf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)mf(n[r],e,0)},Polygon:function(t,e){yf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)yf(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)pf(n[r],e)}};function mf(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function yf(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)mf(t[n],e,1);e.polygonEnd()}function bf(t,e){t&&vf.hasOwnProperty(t.type)?vf[t.type](t,e):pf(t,e)}function _f(t){return[tf(t[1],t[0]),df(t[2])]}function xf(t){var e=t[0],n=t[1],r=ef(n);return[r*ef(e),r*sf(e),sf(n)]}function wf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Af(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function kf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Mf(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Tf(t){var e=lf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Sf(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Cf(t,e){return[t>Vc?t-Xc:t<-Vc?t+Xc:t,e]}function Ef(t,e,n){return(t%=Xc)?e||n?Sf(Pf(t),Lf(e,n)):Pf(t):e||n?Lf(e,n):Cf}function Of(t){return function(e,n){return[(e+=t)>Vc?e-Xc:e<-Vc?e+Xc:e,n]}}function Pf(t){var e=Of(t);return e.invert=Of(-t),e}function Lf(t,e){var n=ef(t),r=sf(t),i=ef(e),a=sf(e);function o(t,e){var o=ef(e),s=ef(t)*o,u=sf(t)*o,l=sf(e),c=l*n+s*r;return[tf(u*i-c*a,s*n-l*r),df(c*i+u*a)]}return o.invert=function(t,e){var o=ef(e),s=ef(t)*o,u=sf(t)*o,l=sf(e),c=l*i-u*a;return[tf(u*i+l*a,s*n+c*r),df(c*n-s*r)]},o}function Rf(t,e){(e=xf(e))[0]-=t,Tf(e);var n=ff(-e[1]);return((-e[2]<0?-n:n)+Xc-Gc)%Xc}function Df(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:hf,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ff(t,e){return Kc(t[0]-e[0])<Gc&&Kc(t[1]-e[1])<Gc}function jf(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Nf(t,e,n,r,i){var a,o,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(Ff(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);i.lineEnd()}else s.push(n=new jf(r,t,null,!0)),u.push(n.o=new jf(r,null,n,!1)),s.push(n=new jf(o,t,null,!1)),u.push(n.o=new jf(o,null,n,!0))}}),s.length){for(u.sort(e),zf(s),zf(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,l=d.z,h=!h}while(!d.v);i.lineEnd()}}}function zf(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}qc(),qc(),qc(),Cf.invert=Cf;var If=1e9,Bf=-If;function qf(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,l){var c=0,f=0;if(null==i||(c=o(i,s))!==(f=o(a,s))||u(i,a)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(a[0],a[1])}function o(r,i){return Kc(r[0]-t)<Gc?i>0?0:3:Kc(r[0]-n)<Gc?i>0?2:1:Kc(r[1]-e)<Gc?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var u,l,c,f,d,h,p,v,g,m,y,_=o,x=Df(),w={point:A,lineStart:function(){w.point=k,l&&l.push(c=[]),m=!0,g=!1,p=v=NaN},lineEnd:function(){u&&(k(f,d),h&&g&&x.rejoin(),u.push(x.result())),w.point=A,g&&_.lineEnd()},polygonStart:function(){_=x,u=[],l=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var a,o,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)a=d,o=h,f=s[u],d=f[0],h=f[1],o<=r?h>r&&(d-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(d-a)*(r-o)<(h-o)*(t-a)&&--e;return e}(),n=y&&e,i=(u=b(u)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&Nf(u,s,e,a,o),o.polygonEnd()),_=o,u=l=c=null}};function A(t,e){i(t,e)&&_.point(t,e)}function k(a,o){var s=i(a,o);if(l&&c.push([a,o]),m)f=a,d=o,h=s,m=!1,s&&(_.lineStart(),_.point(a,o));else if(s&&g)_.point(a,o);else{var u=[p=Math.max(Bf,Math.min(If,p)),v=Math.max(Bf,Math.min(If,v))],b=[a=Math.max(Bf,Math.min(If,a)),o=Math.max(Bf,Math.min(If,o))];!function(t,e,n,r,i,a){var o,s=t[0],u=t[1],l=e[0],c=e[1],f=0,d=1,h=l-s,p=c-u;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>f&&(f=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<d&&(d=o)}if(o=r-u,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=a-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}return f>0&&(t[0]=s+f*h,t[1]=u+f*p),d<1&&(e[0]=s+d*h,e[1]=u+d*p),!0}}}}}(u,b,t,e,n,r)?s&&(_.lineStart(),_.point(a,o),y=!1):(g||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),y=!1)}p=a,v=o,g=s}return w}}var Uf=qc();function Hf(t,e,n){var r=d(t,e-Gc,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Wf(t,e,n){var r=d(t,e-Gc,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Gf(t){return t}qc();var Vf,Yf,Zf,Xf,$f=qc(),Jf=qc(),Kf={point:hf,lineStart:hf,lineEnd:hf,polygonStart:function(){Kf.lineStart=Qf,Kf.lineEnd=nd},polygonEnd:function(){Kf.lineStart=Kf.lineEnd=Kf.point=hf,$f.add(Kc(Jf)),Jf.reset()},result:function(){var t=$f/2;return $f.reset(),t}};function Qf(){Kf.point=td}function td(t,e){Kf.point=ed,Vf=Zf=t,Yf=Xf=e}function ed(t,e){Jf.add(Xf*t-Zf*e),Zf=t,Xf=e}function nd(){ed(Vf,Yf)}var rd,id,ad,od,sd=1/0,ud=sd,ld=-sd,cd=ld,fd={point:function(t,e){t<sd&&(sd=t),t>ld&&(ld=t),e<ud&&(ud=e),e>cd&&(cd=e)},lineStart:hf,lineEnd:hf,polygonStart:hf,polygonEnd:hf,result:function(){var t=[[sd,ud],[ld,cd]];return ld=cd=-(ud=sd=1/0),t}},dd=0,hd=0,pd=0,vd=0,gd=0,md=0,yd=0,bd=0,_d=0,xd={point:wd,lineStart:Ad,lineEnd:Td,polygonStart:function(){xd.lineStart=Sd,xd.lineEnd=Cd},polygonEnd:function(){xd.point=wd,xd.lineStart=Ad,xd.lineEnd=Td},result:function(){var t=_d?[yd/_d,bd/_d]:md?[vd/md,gd/md]:pd?[dd/pd,hd/pd]:[NaN,NaN];return dd=hd=pd=vd=gd=md=yd=bd=_d=0,t}};function wd(t,e){dd+=t,hd+=e,++pd}function Ad(){xd.point=kd}function kd(t,e){xd.point=Md,wd(ad=t,od=e)}function Md(t,e){var n=t-ad,r=e-od,i=lf(n*n+r*r);vd+=i*(ad+t)/2,gd+=i*(od+e)/2,md+=i,wd(ad=t,od=e)}function Td(){xd.point=wd}function Sd(){xd.point=Ed}function Cd(){Od(rd,id)}function Ed(t,e){xd.point=Od,wd(rd=ad=t,id=od=e)}function Od(t,e){var n=t-ad,r=e-od,i=lf(n*n+r*r);vd+=i*(ad+t)/2,gd+=i*(od+e)/2,md+=i,yd+=(i=od*t-ad*e)*(ad+t),bd+=i*(od+e),_d+=3*i,wd(ad=t,od=e)}function Pd(t){this._context=t}Pd.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Xc)}},result:hf};var Ld,Rd,Dd,Fd,jd,Nd=qc(),zd={point:hf,lineStart:function(){zd.point=Id},lineEnd:function(){Ld&&Bd(Rd,Dd),zd.point=hf},polygonStart:function(){Ld=!0},polygonEnd:function(){Ld=null},result:function(){var t=+Nd;return Nd.reset(),t}};function Id(t,e){zd.point=Bd,Rd=Fd=t,Dd=jd=e}function Bd(t,e){Fd-=t,jd-=e,Nd.add(lf(Fd*Fd+jd*jd)),Fd=t,jd=e}function qd(){this._string=[]}function Ud(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Hd(t,e,n,r){return function(i,a){var o,s,u,l=e(a),c=i.invert(r[0],r[1]),f=Df(),d=e(f),h=!1,p={point:v,lineStart:m,lineEnd:y,polygonStart:function(){p.point=_,p.lineStart=x,p.lineEnd=w,s=[],o=[]},polygonEnd:function(){p.point=v,p.lineStart=m,p.lineEnd=y,s=b(s);var t=function(t,e){var n=e[0],r=e[1],i=[sf(n),-ef(n),0],a=0,o=0;Uf.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,f=l[c-1],d=f[0],h=f[1]/2+Zc,p=sf(h),v=ef(h),g=0;g<c;++g,d=y,p=_,v=x,f=m){var m=l[g],y=m[0],b=m[1]/2+Zc,_=sf(b),x=ef(b),w=y-d,A=w>=0?1:-1,k=A*w,M=k>Vc,T=p*_;if(Uf.add(tf(T*A*sf(k),v*x+T*ef(k))),a+=M?w+A*Xc:w,M^d>=n^y>=n){var S=Af(xf(f),xf(m));Tf(S);var C=Af(i,S);Tf(C);var E=(M^w>=0?-1:1)*df(C[2]);(r>E||r===E&&(S[0]||S[1]))&&(o+=M^w>=0?1:-1)}}return(a<-Gc||a<Gc&&Uf<-Gc)^1&o}(o,c);s.length?(h||(a.polygonStart(),h=!0),Nf(s,Gd,t,n,a)):t&&(h||(a.polygonStart(),h=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),h&&(a.polygonEnd(),h=!1),s=o=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function v(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function g(t,e){var n=i(t,e);l.point(n[0],n[1])}function m(){p.point=g,l.lineStart()}function y(){p.point=v,l.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);d.point(n[0],n[1])}function x(){d.lineStart(),u=[]}function w(){_(u[0][0],u[0][1]),d.lineEnd();var t,e,n,r,i=d.clean(),l=f.result(),c=l.length;if(u.pop(),o.push(u),u=null,c)if(1&i){if(n=l[0],(e=n.length-1)>0){for(h||(a.polygonStart(),h=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),s.push(l.filter(Wd))}return p}}function Wd(t){return t.length>1}function Gd(t,e){return((t=t.x)[0]<0?t[1]-Yc-Gc:Yc-t[1])-((e=e.x)[0]<0?e[1]-Yc-Gc:Yc-e[1])}qd.prototype={_circle:Ud(4.5),pointRadius:function(t){return this._circle=Ud(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var Vd=Hd(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Vc:-Vc,u=Kc(a-n);Kc(u-Vc)<Gc?(t.point(n,r=(r+o)/2>0?Yc:-Yc),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=Vc&&(Kc(n-i)<Gc&&(n-=i*Gc),Kc(a-s)<Gc&&(a-=s*Gc),r=function(t,e,n,r){var i,a,o=sf(t-n);return Kc(o)>Gc?Qc((sf(e)*(a=ef(r))*sf(n)-sf(r)*(i=ef(e))*sf(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Yc,r.point(-Vc,i),r.point(0,i),r.point(Vc,i),r.point(Vc,0),r.point(Vc,-i),r.point(0,-i),r.point(-Vc,-i),r.point(-Vc,0),r.point(-Vc,i);else if(Kc(t[0]-e[0])>Gc){var a=t[0]<e[0]?Vc:-Vc;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-Vc,-Yc]);function Yd(t,e){var n=ef(t),r=n>0,i=Kc(n)>Gc;function a(t,e){return ef(t)*ef(e)>n}function o(t,e,r){var i=xf(t),a=xf(e),o=[1,0,0],s=Af(i,a),u=wf(s,s),l=s[0],c=u-l*l;if(!c)return!r&&t;var f=n*u/c,d=-n*l/c,h=Af(o,s),p=Mf(o,f),v=Mf(s,d);kf(p,v);var g=h,m=wf(p,g),y=wf(g,g),b=m*m-y*(wf(p,p)-1);if(!(b<0)){var _=lf(b),x=Mf(g,(-m-_)/y);if(kf(x,p),x=_f(x),!r)return x;var w,A=t[0],k=e[0],M=t[1],T=e[1];k<A&&(w=A,A=k,k=w);var S=k-A,C=Kc(S-Vc)<Gc,E=C||S<Gc;if(!C&&T<M&&(w=M,M=T,T=w),E?C?M+T>0^x[1]<(Kc(x[0]-A)<Gc?M:T):M<=x[1]&&x[1]<=T:S>Vc^(A<=x[0]&&x[0]<=k)){var O=Mf(g,(-m+_)/y);return kf(O,p),[x,_f(O)]}}}function s(e,n){var i=r?t:Vc-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return Hd(a,function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],v=a(f,d),g=r?v?0:s(f,d):v?s(f+(f<0?Vc:-Vc),d):0;if(!e&&(l=u=v)&&t.lineStart(),v!==u&&(h=o(e,p),(Ff(e,h)||Ff(p,h))&&(p[0]+=Gc,p[1]+=Gc,v=a(p[0],p[1]))),v!==u)c=0,v?(t.lineStart(),h=o(p,e),t.point(h[0],h[1])):(h=o(e,p),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(i&&e&&r^v){var m;g&n||!(m=o(p,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&Ff(e,p)||t.point(p[0],p[1]),e=p,u=v,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(n,r,i,a){!function(t,e,n,r,i,a){if(n){var o=ef(e),s=sf(e),u=r*n;null==i?(i=e+r*Xc,a=e-u/2):(i=Rf(o,i),a=Rf(o,a),(r>0?i<a:i>a)&&(i+=r*Xc));for(var l,c=i;r>0?c>a:c<a;c-=u)l=_f([o,-s*ef(c),-s*sf(c)]),t.point(l[0],l[1])}}(a,t,e,i,n,r)},r?[0,-t]:[-Vc,t-Vc])}function Zd(t){return function(e){var n=new Xd;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Xd(){}function $d(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),bf(n,t.stream(fd));var o=fd.result(),s=Math.min(r/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),u=+e[0][0]+(r-s*(o[1][0]+o[0][0]))/2,l=+e[0][1]+(i-s*(o[1][1]+o[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*s).translate([u,l])}function Jd(t,e,n){return $d(t,[[0,0],e],n)}Xd.prototype={constructor:Xd,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kd=16,Qd=ef(30*Jc);function th(t,e){return+e?function(t,e){function n(r,i,a,o,s,u,l,c,f,d,h,p,v,g){var m=l-r,y=c-i,b=m*m+y*y;if(b>4*e&&v--){var _=o+d,x=s+h,w=u+p,A=lf(_*_+x*x+w*w),k=df(w/=A),M=Kc(Kc(w)-1)<Gc||Kc(a-f)<Gc?(a+f)/2:tf(x,_),T=t(M,k),S=T[0],C=T[1],E=S-r,O=C-i,P=y*E-m*O;(P*P/b>e||Kc((m*E+y*O)/b-.5)>.3||o*d+s*h+u*p<Qd)&&(n(r,i,a,o,s,u,S,C,M,_/=A,x/=A,w,v,g),g.point(S,C),n(S,C,M,_,x,w,l,c,f,d,h,p,v,g))}}return function(e){var r,i,a,o,s,u,l,c,f,d,h,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=m}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,v.point=y,e.lineStart()}function y(r,i){var a=xf([r,i]),o=t(r,i);n(c,f,l,d,h,p,c=o[0],f=o[1],l=r,d=a[0],h=a[1],p=a[2],Kd,e),e.point(c,f)}function b(){v.point=g,e.lineEnd()}function _(){m(),v.point=x,v.lineEnd=w}function x(t,e){y(r=t,e),i=c,a=f,o=d,s=h,u=p,v.point=y}function w(){n(c,f,l,d,h,p,i,a,r,o,s,u,Kd,e),v.lineEnd=b,b()}return v}}(t,e):function(t){return Zd({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var eh=Zd({point:function(t,e){this.stream.point(t*Jc,e*Jc)}});function nh(t){return rh(function(){return t})()}function rh(t){var e,n,r,i,a,o,s,u,l,c,f=150,d=480,h=250,p=0,v=0,g=0,m=0,y=0,b=null,_=Vd,x=null,w=Gf,A=.5,k=th(S,A);function M(t){return[(t=a(t[0]*Jc,t[1]*Jc))[0]*f+n,r-t[1]*f]}function T(t){return(t=a.invert((t[0]-n)/f,(r-t[1])/f))&&[t[0]*$c,t[1]*$c]}function S(t,i){return[(t=e(t,i))[0]*f+n,r-t[1]*f]}function C(){a=Sf(i=Ef(g,m,y),e);var t=e(p,v);return n=d-t[0]*f,r=h+t[1]*f,E()}function E(){return l=c=null,M}return M.stream=function(t){return l&&c===t?l:l=eh(_(i,k(w(c=t))))},M.clipAngle=function(t){return arguments.length?(_=+t?Yd(b=t*Jc,6*Jc):(b=null,Vd),E()):b*$c},M.clipExtent=function(t){return arguments.length?(w=null==t?(x=o=s=u=null,Gf):qf(x=+t[0][0],o=+t[0][1],s=+t[1][0],u=+t[1][1]),E()):null==x?null:[[x,o],[s,u]]},M.scale=function(t){return arguments.length?(f=+t,C()):f},M.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],C()):[d,h]},M.center=function(t){return arguments.length?(p=t[0]%360*Jc,v=t[1]%360*Jc,C()):[p*$c,v*$c]},M.rotate=function(t){return arguments.length?(g=t[0]%360*Jc,m=t[1]%360*Jc,y=t.length>2?t[2]%360*Jc:0,C()):[g*$c,m*$c,y*$c]},M.precision=function(t){return arguments.length?(k=th(S,A=t*t),E()):lf(A)},M.fitExtent=function(t,e){return $d(M,t,e)},M.fitSize=function(t,e){return Jd(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&T,C()}}function ih(t){var e=0,n=Vc/3,r=rh(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Jc,n=t[1]*Jc):[e*$c,n*$c]},i}function ah(t,e){var n=sf(t),r=(n+sf(e))/2;if(Kc(r)<Gc)return function(t){var e=ef(t);function n(t,n){return[t*e,sf(n)/e]}return n.invert=function(t,n){return[t/e,df(n*e)]},n}(t);var i=1+n*(2*r-n),a=lf(i)/r;function o(t,e){var n=lf(i-2*r*sf(e))/r;return[n*sf(t*=r),a-n*ef(t)]}return o.invert=function(t,e){var n=a-e;return[tf(t,Kc(n))/r*uf(n),df((i-(t*t+n*n)*r*r)/(2*r))]},o}function oh(){return ih(ah).scale(155.424).center([0,33.6442])}function sh(){return oh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function uh(t){return function(e,n){var r=ef(e),i=ef(n),a=t(r*i);return[a*i*sf(e),a*sf(n)]}}function lh(t){return function(e,n){var r=lf(e*e+n*n),i=t(r),a=sf(i),o=ef(i);return[tf(e*a,r*o),df(r&&n*a/r)]}}var ch=uh(function(t){return lf(2/(1+t))});ch.invert=lh(function(t){return 2*df(t/2)});var fh=uh(function(t){return(t=ff(t))&&t/sf(t)});function dh(t,e){return[t,af(cf((Yc+e)/2))]}function hh(t){var e,n,r,i=nh(t),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var a=Vc*o(),s=i(function(t){function e(e){return(e=t(e[0]*Jc,e[1]*Jc))[0]*=$c,e[1]*=$c,e}return t=Ef(t[0]*Jc,t[1]*Jc,t.length>2?t[2]*Jc:0),e.invert=function(e){return(e=t.invert(e[0]*Jc,e[1]*Jc))[0]*=$c,e[1]*=$c,e},e}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===dh?[[Math.max(s[0]-a,l),e],[Math.min(s[0]+a,n),r]]:[[l,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),c()):o()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(a(t),c()):a()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function ph(t){return cf((Yc+t)/2)}function vh(t,e){var n=ef(t),r=t===e?sf(t):af(n/ef(e))/af(ph(e)/ph(t)),i=n*of(ph(t),r)/r;if(!r)return dh;function a(t,e){i>0?e<-Yc+Gc&&(e=-Yc+Gc):e>Yc-Gc&&(e=Yc-Gc);var n=i/of(ph(e),r);return[n*sf(r*t),i-n*ef(r*t)]}return a.invert=function(t,e){var n=i-e,a=uf(r)*lf(t*t+n*n);return[tf(t,Kc(n))/r*uf(n),2*Qc(of(i/a,1/r))-Yc]},a}function gh(t,e){return[t,e]}function mh(t,e){var n=ef(t),r=t===e?sf(t):(n-ef(e))/(e-t),i=n/r+t;if(Kc(r)<Gc)return gh;function a(t,e){var n=i-e,a=r*t;return[n*sf(a),i-n*ef(a)]}return a.invert=function(t,e){var n=i-e;return[tf(t,Kc(n))/r*uf(n),i-uf(r)*lf(t*t+n*n)]},a}function yh(t,e){var n=ef(e),r=ef(t)*n;return[n*sf(t)/r,sf(e)/r]}function bh(t,e){return[ef(e)*sf(t),sf(e)]}function _h(t,e){var n=ef(e),r=1+ef(t)*n;return[n*sf(t)/r,sf(e)/r]}function xh(t,e){return[af(cf((Yc+e)/2)),-t]}function wh(t){cr.call(this,[],t),this.generator=function(){var t,e,n,r,i,a,o,s,u,l,c,f,h=10,p=h,v=90,g=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return d(nf(r/v)*v,n,v).map(c).concat(d(nf(s/g)*g,o,g).map(f)).concat(d(nf(e/h)*h,t,h).filter(function(t){return Kc(t%v)>Gc}).map(u)).concat(d(nf(a/p)*p,i,p).filter(function(t){return Kc(t%g)>Gc}).map(l))}return y.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(o).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),y.precision(m)):[[r,s],[n,o]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),y.precision(m)):[[e,a],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(v=+t[0],g=+t[1],y):[v,g]},y.stepMinor=function(t){return arguments.length?(h=+t[0],p=+t[1],y):[h,p]},y.precision=function(d){return arguments.length?(m=+d,u=Hf(a,i,90),l=Wf(e,t,m),c=Hf(s,o,90),f=Wf(r,n,m),y):m},y.extentMajor([[-180,-90+Gc],[180,90-Gc]]).extentMinor([[-180,-80-Gc],[180,80+Gc]])}()}fh.invert=lh(function(t){return t}),dh.invert=function(t,e){return[t,2*Qc(rf(e))-Yc]},gh.invert=gh,yh.invert=lh(Qc),bh.invert=lh(df),_h.invert=lh(function(t){return 2*Qc(t)}),xh.invert=function(t,e){return[-e,2*Qc(rf(t))-Yc]},rt(wh,cr).transform=function(t,e){var n,r=e.fork(),i=this.value,a=this.generator;if(!i.length||t.modified())for(var o in t)J(a[o])&&a[o](t[o]);return n=a(),i.length?(n._id=i[0]._id,r.mod.push(n)):r.add.push(pt(n)),i[0]=n,r.source=i,r};var Ah=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function kh(t,e){return function n(){var r=e();return r.type=t,r.path=function(t,e){var n,r,i=4.5;function a(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),bf(t,n(r))),r.result()}return a.area=function(t){return bf(t,n(Kf)),Kf.result()},a.measure=function(t){return bf(t,n(zd)),zd.result()},a.bounds=function(t){return bf(t,n(fd)),fd.result()},a.centroid=function(t){return bf(t,n(xd)),xd.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Gf):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new qd):new Pd(e=t),"function"!==typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)}().projection(r),r.copy=r.copy||function(){var t=n();return Ah.forEach(function(e){r.hasOwnProperty(e)&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}function Mh(t,e){return arguments.length>1?(Th[t]=kh(t,e),this):Th.hasOwnProperty(t)?Th[t]:null}var Th={albers:sh,albersusa:function(){var t,e,n,r,i,a,o=sh(),s=oh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=oh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},c.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([o.stream(e=n),s.stream(n),u.stream(n)])},c.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),u.precision(t),f()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),u.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(l),r=s.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+Gc,c+.12*e+Gc],[a-.214*e-Gc,c+.234*e-Gc]]).stream(l),i=u.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+Gc,c+.166*e+Gc],[a-.115*e-Gc,c+.234*e-Gc]]).stream(l),f()},c.fitExtent=function(t,e){return $d(c,t,e)},c.fitSize=function(t,e){return Jd(c,t,e)},c.scale(1070)},azimuthalequalarea:function(){return nh(ch).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return nh(fh).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return ih(vh).scale(109.5).parallels([30,30])},conicequalarea:oh,conicequidistant:function(){return ih(mh).scale(131.154).center([0,13.9389])},equirectangular:function(){return nh(gh).scale(152.63)},gnomonic:function(){return nh(yh).scale(144.049).clipAngle(60)},mercator:function(){return hh(dh).scale(961/Xc)},orthographic:function(){return nh(bh).scale(249.5).clipAngle(90+Gc)},stereographic:function(){return nh(_h).scale(250).clipAngle(142)},transversemercator:function(){var t=hh(xh),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(var Sh in Th)Mh(Sh,Th[Sh]);function Ch(t){cr.call(this,null,t),this.modified(!0)}function Eh(t,e,n){J(t[e])&&t[e](n)}function Oh(t,e){return t.parent===e.parent?1:2}function Ph(t,e){return t+e.x}function Lh(t,e){return Math.max(t,e.y)}function Rh(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Dh(t,e){var n,r,i,a,o,s=new zh(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=Fh);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)l.push(r=n.children[a]=new zh(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Nh)}function Fh(t){return t.children}function jh(t){t.data=t.data.data}function Nh(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function zh(t){this.data=t,this.depth=this.height=0,this.parent=null}function Ih(t){this._=t,this.next=null}function Bh(t){return function t(e,n){var r,i,a,o,s=null,u=e.head;switch(n.length){case 1:o=n[0],r={x:o.x,y:o.y,r:o.r};break;case 2:r=function(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,l=o-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+a+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+s)/2}}(n[0],n[1]);break;case 3:r=function(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,l=n.x,c=n.y,f=n.r,d=2*(r-o),h=2*(i-s),p=2*(u-a),v=r*r+i*i-a*a-o*o-s*s+u*u,g=2*(r-l),m=2*(i-c),y=2*(f-a),b=r*r+i*i-a*a-l*l-c*c+f*f,_=g*h-d*m,x=(h*b-m*v)/_-r,w=(m*p-h*y)/_,A=(g*v-d*b)/_-i,k=(d*y-g*p)/_,M=w*w+k*k-1,T=2*(x*w+A*k+a),S=x*x+A*A-a*a,C=(-T-Math.sqrt(T*T-4*M*S))/(2*M);return{x:x+w*C+r,y:A+k*C+i,r:C}}(n[0],n[1],n[2])}for(;u;)a=u._,i=u.next,r&&qh(r,a)?s=u:(s?(e.tail=s,s.next=null):e.head=e.tail=null,n.push(a),r=t(e,n),n.pop(),e.head?(u.next=e.head,e.head=u):(u.next=null,e.head=e.tail=u),(s=e.tail).next=i),u=i;return e.tail=s,r}(function(t){for(var e=(t=t.slice()).length,n=null,r=n;e;){var i=new Ih(t[e-1]);r=r?r.next=i:n=i,t[void 0]=t[--e]}return{head:n,tail:r}}(t),[])}function qh(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function Uh(t,e,n){var r=t.x,i=t.y,a=e.r+n.r,o=t.r+n.r,s=e.x-r,u=e.y-i,l=s*s+u*u;if(l){var c=.5+((o*=o)-(a*=a))/(2*l),f=Math.sqrt(Math.max(0,2*a*(o+l)-(o-=l)*o-a*a))/(2*l);n.x=r+c*s+f*u,n.y=i+c*u-f*s}else n.x=r+o,n.y=i}function Hh(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function Wh(t,e,n){var r=t._,i=t.next._,a=r.r+i.r,o=(r.x*i.r+i.x*r.r)/a-e,s=(r.y*i.r+i.y*r.r)/a-n;return o*o+s*s}function Gh(t){this._=t,this.next=null,this.previous=null}function Vh(t){if("function"!==typeof t)throw new Error;return t}function Yh(){return 0}function Zh(t){return function(){return t}}function Xh(t){return Math.sqrt(t.value)}function $h(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Jh(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=function(t){if(!(i=t.length))return 0;var e,n,r,i;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Uh(n,e,r=t[2]);var a,o,s,u,l,c,f,d=e.r*e.r,h=n.r*n.r,p=r.r*r.r,v=d+h+p,g=d*e.x+h*n.x+p*r.x,m=d*e.y+h*n.y+p*r.y;e=new Gh(e),n=new Gh(n),r=new Gh(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Uh(e._,n._,r=t[s]),r=new Gh(r),u=n.next,l=e.previous,c=n._.r,f=e._.r;do{if(c<=f){if(Hh(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}c+=u._.r,u=u.next}else{if(Hh(l._,r._)){(e=l).next=n,n.previous=e,--s;continue t}f+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,v+=p=r._.r*r._.r,g+=p*r._.x,m+=p*r._.y,d=Wh(e,a=g/v,o=m/v);(r=r.next)!==n;)(p=Wh(r,a,o))<d&&(e=r,d=p);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Bh(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function Kh(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Qh(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function tp(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l}rt(Ch,cr).transform=function(t){var e=this.value;!e||t.modified("type")?(this.value=e=function(t){var e=Mh((t||"mercator").toLowerCase());return e||E("Unrecognized projection type: "+t),e()}(t.type),Ah.forEach(function(n){null!=t[n]&&Eh(e,n,t[n])})):Ah.forEach(function(n){t.modified(n)&&Eh(e,n,t[n])}),null!=t.pointRadius&&e.path.pointRadius(t.pointRadius)},pr({type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"field",type:"field"},{name:"as",type:"string",default:"path"}]},zc),pr({type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Ic),pr({type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"field",type:"field",default:"datum"},{name:"as",type:"string",default:"shape"}]},Bc),pr({type:"Graticule",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},wh),gr("Projection",Ch),zh.prototype=Dh.prototype={constructor:zh,count:function(){return this.eachAfter(Rh)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Dh(this).eachBefore(jh)}};var ep="$",np={depth:-1},rp={};function ip(t){return t.id}function ap(t){return t.parentId}function op(t,e){return t.parent===e.parent?1:2}function sp(t){var e=t.children;return e?e[0]:t.t}function up(t){var e=t.children;return e?e[e.length-1]:t.t}function lp(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function cp(t,e,n){return t.a.parent===e.parent?t.a:n}function fp(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function dp(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(i-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l}fp.prototype=Object.create(zh.prototype);var hp=(1+Math.sqrt(5))/2;function pp(t,e,n,r,i,a){for(var o,s,u,l,c,f,d,h,p,v,g,m=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){u=i-n,l=a-r;do{c=y[_++].value}while(!c&&_<x);for(f=d=c,v=Math.max(l/u,u/l)/(w*t),g=c*c*v,p=Math.max(d/g,g/f);_<x;++_){if(c+=s=y[_].value,s<f&&(f=s),s>d&&(d=s),g=c*c*v,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}m.push(o={value:c,dice:u<l,children:y.slice(b,_)}),o.dice?tp(o,n,r,i,w?r+=l*c/w:a):dp(o,n,r,w?n+=u*c/w:i,a),w-=c,b=_}return m}var vp=function t(e){function n(t,n,r,i,a){pp(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(hp),gp=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,u,l,c,f=-1,d=o.length,h=t.value;++f<d;){for(s=o[f],u=s.children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?tp(s,n,r,i,r+=(a-r)*s.value/h):dp(s,n,r,n+=(i-n)*s.value/h,a),h-=s.value}else t._squarify=o=pp(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(hp);function mp(t){cr.call(this,null,t)}function yp(t){return t.values}function bp(t){cr.call(this,null,t)}function _p(t){cr.call(this,{},t)}rt(mp,cr).transform=function(t,e){e.source||E("Nest transform requires an upstream data source.");var n,r,i,a,o=t.key||dt;return(!this.value||(a=t.modified())||e.changed())&&(n=X(t.keys).reduce(function(t,e){return t.key(e),t},Ut()).entries(e.source),r=Dh({values:n},yp),i=r.lookup={},r.each(function(t){null!=dt(t.data)&&(i[o(t.data)]=t)}),this.value=r),e.source.root=this.value,a?e.fork(e.ALL):e},rt(bp,cr).transform=function(t,e){e.source||E("Stratify transform requires an upstream data source.");var n,r,i=t.modified(),a=!this.value||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return a&&(n=function(){var t=ip,e=ap;function n(n){var r,i,a,o,s,u,l,c=n.length,f=new Array(c),d={};for(i=0;i<c;++i)r=n[i],s=f[i]=new zh(r),null!=(u=t(r,i,n))&&(u+="")&&(l=ep+(s.id=u),d[l]=l in d?rp:s);for(i=0;i<c;++i)if(s=f[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(o=d[ep+u]))throw new Error("missing: "+u);if(o===rp)throw new Error("ambiguous: "+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=np,a.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(Nh),a.parent=null,c>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=Vh(e),n):t},n.parentId=function(t){return arguments.length?(e=Vh(t),n):e},n}().id(t.key).parentId(t.parentKey)(e.source),r=n.lookup={},n.each(function(e){r[t.key(e.data)]=e}),this.value=n),e.source.root=this.value,i?e.fork(e.ALL):e},rt(_p,cr).transform=function(t,e){e.source&&e.source.root||E("TreeLinks transform requires a backing tree data source.");var n=e.source.root,r=n.lookup,i=this.value,a=t.key||dt,o={},s=e.fork();function u(t){var e=i[t];e&&(o[t]=1,s.mod.push(e))}return e.visit(e.REM,function(t){var e=a(t),n=i[e];n&&(delete i[e],s.rem.push(n))}),e.visit(e.ADD,function(t){var e,n=a(t);(e=function(t){var e;return t.parent&&(e=t.parent.data)&&null!=dt(e)&&e}(r[n]))&&(s.add.push(i[n]=pt({source:e,target:t})),o[n]=1)}),e.visit(e.MOD,function(t){var e=a(t),n=r[e],i=n.children;if(u(e),i)for(var s=0,l=i.length;s<l;++s)o[e=a(i[s].data)]||u(e)}),s};var xp={binary:function(t,e,n,r,i){var a,o,s=t.children,u=s.length,l=new Array(u+1);for(l[0]=o=a=0;a<u;++a)l[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,u){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=u)}for(var f=l[e],d=r/2+f,h=e+1,p=n-1;h<p;){var v=h+p>>>1;l[v]<d?h=v+1:p=v}d-l[h-1]<l[h]-d&&e+1<h&&--h;var g=l[h]-f,m=r-g;if(o-i>u-a){var y=(i*m+o*g)/r;t(e,h,g,i,a,y,u),t(h,n,m,y,a,o,u)}else{var b=(a*m+u*g)/r;t(e,h,g,i,a,o,b),t(h,n,m,i,b,o,u)}}(0,u,t.value,e,n,r,i)},dice:tp,slice:dp,slicedice:function(t,e,n,r,i){(1&t.depth?dp:tp)(t,e,n,r,i)},squarify:vp,resquarify:gp},wp={tidy:function(){var t=op,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,a,o=new fp(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new fp(r[i],i)),n.parent=e;return(o.parent=new fp(null,0)).children=[o],o}(i);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)});var d=l===c?1:t(l,c)/2,h=d-l.x,p=e/(c.x+d+h),v=n/(f.depth||1);i.eachBefore(function(t){t.x=(t.x+h)*p,t.y=t.depth*v})}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,d=u.m;s=up(s),a=sp(a),s&&a;)u=sp(u),(o=up(o)).a=e,(i=s.z+f-a.z-l+t(s._,a._))>0&&(lp(cp(s,e,r),e,i),l+=i,c+=i),f+=s.m,l+=a.m,d+=u.m,c+=o.m;s&&!up(o)&&(o.t=s,o.m+=f-c),a&&!sp(u)&&(u.t=a,u.m+=l-d,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},cluster:function(){var t=Oh,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Ph,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Lh,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=s.x-t(s,u)/2,c=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}};function Ap(t){cr.call(this,null,t)}function kp(t){Ap.call(this,t)}function Mp(t){Ap.call(this,t)}function Tp(t){Ap.call(this,t)}function Sp(t){Ap.call(this,t)}function Cp(t){return function(){return t}}function Ep(t){return t[0]}function Op(t){return t[1]}function Pp(){this._=null}function Lp(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Rp(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Dp(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Fp(t){for(;t.L;)t=t.L;return t}function jp(t,e,n,r){var i=[null,null],a=ov.push(i)-1;return i.left=t,i.right=e,n&&zp(i,t,e,n),r&&zp(i,e,t,r),iv[t.index].halfedges.push(a),iv[e.index].halfedges.push(a),i}function Np(t,e,n){var r=[e,n];return r.left=t,r}function zp(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Ip(t,e,n,r,i){var a,o=t[0],s=t[1],u=o[0],l=o[1],c=s[0],f=s[1],d=0,h=1,p=c-u,v=f-l;if(a=e-u,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=r-u,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=n-l,v||!(a>0)){if(a/=v,v<0){if(a<d)return;a<h&&(h=a)}else if(v>0){if(a>h)return;a>d&&(d=a)}if(a=i-l,v||!(a<0)){if(a/=v,v<0){if(a>h)return;a>d&&(d=a)}else if(v>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(t[0]=[u+d*p,l+d*v]),h<1&&(t[1]=[u+h*p,l+h*v]),!0)}}}}}function Bp(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,u=t[0],l=t.left,c=t.right,f=l[0],d=l[1],h=c[0],p=c[1],v=(f+h)/2,g=(d+p)/2;if(p===d){if(v<e||v>=r)return;if(f>h){if(u){if(u[1]>=i)return}else u=[v,n];a=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];a=[v,n]}}else if(s=g-(o=(f-h)/(p-d))*v,o<-1||o>1)if(f>h){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(d<p){if(u){if(u[0]>=r)return}else u=[e,o*e+s];a=[r,o*r+s]}else{if(u){if(u[0]<e)return}else u=[r,o*r+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}function qp(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Up(t,e){return e[+(e.left!==t.site)]}function Hp(t,e){return e[+(e.left===t.site)]}rt(Ap,cr).transform=function(t,e){e.source&&e.source.root||E(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,a=t.as||r;t.field&&i.sum(t.field),t.sort&&i.sort(t.sort),function(t,e,n){for(var r,i=0,a=e.length;i<a;++i)(r=e[i])in n&&t[r](n[r])}(n,this.params,t);try{this.value=n(i)}catch(o){E(o)}return i.each(function(t){!function(t,e,n){for(var r=t.data,i=0,a=e.length-1;i<a;++i)r[n[i]]=t[e[i]];r[n[a]]=t.children?t.children.length:0}(t,r,a)}),e.reflow(t.modified()).modifies(a).modifies("leaf")},rt(kp,Ap),kp.prototype.layout=function(t){var e=t||"tidy";if(wp.hasOwnProperty(e))return wp[e]();E("Unrecognized Tree layout method: "+e)},kp.prototype.params=["size","nodeSize","separation"],kp.prototype.fields=["x","y","depth","children"],rt(Mp,Ap),Mp.prototype.layout=function(){var t=function(){var t=vp,e=!1,n=1,r=1,i=[0],a=Yh,o=Yh,s=Yh,u=Yh,l=Yh;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(Qh),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,d=e.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=d,e.children&&(n=i[e.depth+1]=a(e)/2,r+=l(e)-n,c+=o(e)-n,f-=s(e)-n,d-=u(e)-n,f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t(e,r,c,f,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=Vh(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"===typeof t?t:Zh(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"===typeof t?t:Zh(+t),c):o},c.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:Zh(+t),c):s},c.paddingBottom=function(t){return arguments.length?(u="function"===typeof t?t:Zh(+t),c):u},c.paddingLeft=function(t){return arguments.length?(l="function"===typeof t?t:Zh(+t),c):l},c}();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){xp.hasOwnProperty(e)?t.tile(xp[e]):E("Unrecognized Treemap layout method: "+e)},t},Mp.prototype.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],Mp.prototype.fields=["x0","y0","x1","y1","depth","children"],rt(Tp,Ap),Tp.prototype.layout=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&tp(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(Qh),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},Tp.prototype.params=["size","round","padding"],Tp.prototype.fields=Mp.prototype.fields,rt(Sp,Ap),Sp.prototype.layout=function(){var t=null,e=1,n=1,r=Yh;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore($h(t)).eachAfter(Jh(r,.5)).eachBefore(Kh(1)):i.eachBefore($h(Xh)).eachAfter(Jh(Yh,1)).eachAfter(Jh(r,i.r/Math.min(e,n))).eachBefore(Kh(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=null==(n=e)?null:Vh(n),i):t;var n},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:Zh(+t),i):r},i},Sp.prototype.params=["size","padding"],Sp.prototype.fields=["x","y","r","depth","children"],pr({type:"Nest",metadata:{treesource:!0},params:[{name:"keys",type:"field",array:!0},{name:"key",type:"field"}]},mp),pr({type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},bp),pr({type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:"key",type:"field"}]},_p),pr({type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:["x","y","r","depth","children"]}]},Sp),pr({type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:["x0","y0","x1","y1","depth","children"]}]},Tp),pr({type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:["x","y","depth","children"]}]},kp),pr({type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:["x0","y0","x1","y1","depth","children"]}]},Mp),Pp.prototype={constructor:Pp,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Fp(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Rp(this,n),n=(t=n).U),n.C=!1,r.C=!0,Dp(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Dp(this,n),n=(t=n).U),n.C=!1,r.C=!0,Rp(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?Fp(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Rp(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Dp(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Rp(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Dp(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Rp(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Dp(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Wp,Gp=[];function Vp(){Lp(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yp(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],u=r[0]-o,l=r[1]-s,c=a[0]-o,f=a[1]-s,d=2*(u*f-l*c);if(!(d>=-uv)){var h=u*u+l*l,p=c*c+f*f,v=(f*h-l*p)/d,g=(u*p-c*h)/d,m=Gp.pop()||new Vp;m.arc=t,m.site=i,m.x=v+o,m.y=(m.cy=g+s)+Math.sqrt(v*v+g*g),t.circle=m;for(var y=null,b=av._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}av.insert(y,m),y||(Wp=m)}}}}function Zp(t){var e=t.circle;e&&(e.P||(Wp=e.N),av.remove(e),Gp.push(e),Lp(e),t.circle=null)}var Xp=[];function $p(){Lp(this),this.edge=this.site=this.circle=null}function Jp(t){var e=Xp.pop()||new $p;return e.site=t,e}function Kp(t){Zp(t),rv.remove(t),Xp.push(t),Lp(t)}function Qp(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];Kp(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<sv&&Math.abs(r-u.circle.cy)<sv;)a=u.P,s.unshift(u),Kp(u),u=a;s.unshift(u),Zp(u);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<sv&&Math.abs(r-l.circle.cy)<sv;)o=l.N,s.push(l),Kp(l),l=o;s.push(l),Zp(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],zp(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=jp(u.site,l.site,null,i),Yp(u),Yp(l)}function tv(t){for(var e,n,r,i,a=t[0],o=t[1],s=rv._;s;)if((r=ev(s,o)-a)>sv)s=s.L;else{if(!((i=a-nv(s,o))>sv)){r>-sv?(e=s.P,n=s):i>-sv?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){iv[t.index]={site:t,halfedges:[]}}(t);var u=Jp(t);if(rv.insert(e,u),e||n){if(e===n)return Zp(e),n=Jp(e.site),rv.insert(u,n),u.edge=n.edge=jp(e.site,u.site),Yp(e),void Yp(n);if(n){Zp(e),Zp(n);var l=e.site,c=l[0],f=l[1],d=t[0]-c,h=t[1]-f,p=n.site,v=p[0]-c,g=p[1]-f,m=2*(d*g-h*v),y=d*d+h*h,b=v*v+g*g,_=[(g*y-h*b)/m+c,(d*b-v*y)/m+f];zp(n.edge,l,p,_),u.edge=jp(l,t,null,_),n.edge=jp(t,p,null,_),Yp(e),Yp(n)}else u.edge=jp(e.site,u.site)}}function ev(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,f=1/a-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function nv(t,e){var n=t.N;if(n)return ev(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var rv,iv,av,ov,sv=1e-6,uv=1e-12;function lv(t,e){return e[1]-t[1]||e[0]-t[0]}function cv(t,e){var n,r,i,a=t.sort(lv).pop();for(ov=[],iv=new Array(t.length),rv=new Pp,av=new Pp;;)if(i=Wp,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(tv(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;Qp(i.arc)}if(function(){for(var t,e,n,r,i=0,a=iv.length;i<a;++i)if((t=iv[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=qp(t,ov[e[n]]);for(o.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,a=ov.length;a--;)Bp(i=ov[a],t,e,n,r)&&Ip(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>sv||Math.abs(i[0][1]-i[1][1])>sv)||delete ov[a]}(o,s,u,l),function(t,e,n,r){var i,a,o,s,u,l,c,f,d,h,p,v,g=iv.length,m=!0;for(i=0;i<g;++i)if(a=iv[i]){for(o=a.site,u=a.halfedges,s=u.length;s--;)ov[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)h=Hp(a,ov[u[s]]),p=h[0],v=h[1],c=Up(a,ov[u[++s%l]]),f=c[0],d=c[1],(Math.abs(p-f)>sv||Math.abs(v-d)>sv)&&(u.splice(s,0,ov.push(Np(o,h,Math.abs(p-t)<sv&&r-v>sv?[t,Math.abs(f-t)<sv?d:r]:Math.abs(v-r)<sv&&n-p>sv?[Math.abs(d-r)<sv?f:n,r]:Math.abs(p-n)<sv&&v-e>sv?[n,Math.abs(f-n)<sv?d:e]:Math.abs(v-e)<sv&&p-t>sv?[Math.abs(d-e)<sv?f:t,e]:null))-1),++l);l&&(m=!1)}if(m){var y,b,_,x=1/0;for(i=0,m=null;i<g;++i)(a=iv[i])&&(o=a.site,y=o[0]-t,b=o[1]-e,(_=y*y+b*b)<x&&(x=_,m=a));if(m){var w=[t,e],A=[t,r],k=[n,r],M=[n,e];m.halfedges.push(ov.push(Np(o=m.site,w,A))-1,ov.push(Np(o,A,k))-1,ov.push(Np(o,k,M))-1,ov.push(Np(o,M,w))-1)}}for(i=0;i<g;++i)(a=iv[i])&&(a.halfedges.length||delete iv[i])}(o,s,u,l)}this.edges=ov,this.cells=iv,rv=av=ov=iv=null}function fv(t){cr.call(this,null,t)}cv.prototype={constructor:cv,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Up(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,u,l,c=n.site,f=-1,d=e[i[a-1]],h=d.left===c?d.right:d.left;++f<a;)o=h,d=e[i[f]],h=d.left===c?d.right:d.left,o&&h&&r<o.index&&r<h.index&&(u=o,l=h,((s=c)[0]-l[0])*(u[1]-s[1])-(s[0]-u[0])*(l[1]-s[1])<0)&&t.push([c.data,o.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],f=u*u+l*l;f<c&&(c=f,o=s.index)}})}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}};var dv=rt(fv,cr),hv=[[-1e5,-1e5],[1e5,1e5]];dv.transform=function(t,e){var n,r,i,a,o=t.as||"path",s=e.source;for(n=function(){var t=Ep,e=Op,n=null;function r(r){return new cv(r.map(function(n,i){var a=[Math.round(t(n,i,r)/sv)*sv,Math.round(e(n,i,r)/sv)*sv];return a.index=i,a.data=n,a}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"===typeof e?e:Cp(+e),r):t},r.y=function(t){return arguments.length?(e="function"===typeof t?t:Cp(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x(t.x).y(t.y),t.size?n.size(t.size):n.extent(t.extent||hv),this.value=n=n(s),r=n.polygons(),i=0,a=s.length;i<a;++i)s[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return e.reflow(t.modified()).modifies(o)},pr({type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]},fv),e.bin=r,e.bootstrapCI=_,e.randomInteger=function(t,e){null==e&&(e=t,t=0);var n,r,i,a={min:function(t){return arguments.length?(i=r-(n=t||0),a):n},max:function(t){return arguments.length?(i=(r=t||0)-n,a):r},sample:function(){return n+Math.floor(i*Math.random())},pdf:function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},cdf:function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},icdf:function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN}};return a.min(t).max(e)},e.randomKDE=A,e.randomMixture=k,e.randomNormal=x,e.randomUniform=M,e.quartiles=w,e.accessor=T,e.accessorName=S,e.accessorFields=C,e.id=N,e.identity=z,e.zero=I,e.one=B,e.truthy=q,e.falsy=U,e.logger=Z,e.None=W,e.Warn=G,e.Info=V,e.Debug=Y,e.array=X,e.compare=$,e.constant=K,e.error=E,e.extend=Q,e.extentIndex=tt,e.fastmap=nt,e.field=F,e.inherits=rt,e.isArray=P,e.isFunction=J,e.isNumber=function(t){return"number"===typeof t},e.isObject=L,e.isString=R,e.key=it,e.merge=at,e.pad=function(t,e,n,r){var i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?ot(i,o)+a:"center"===r?ot(i,~~(o/2))+a+ot(i,Math.ceil(o/2)):a+ot(i,o)},e.peek=st,e.repeat=ot,e.splitAccessPath=O,e.stringValue=D,e.toSet=ut,e.truncate=function(t,e,n,r){var i=null!=r?r:"\u2026",a=t+"",o=a.length,s=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i},e.visitArray=lt,e.UniqueList=ct,e.changeset=yt,e.isChangeSet=mt,e.Dataflow=sr,e.EventStream=Ct,e.Parameters=_t,e.Pulse=Ft,e.MultiPulse=er,e.Operator=kt,e.Transform=cr,e.ingest=pt,e.tupleid=dt,e.definition=vr,e.definitions=hr,e.register=pr,e.transform=gr,e.transforms=dr,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n(19).Buffer)},function(t,e){},function(t,e,n){var r,i,a;i=[e,n(2),n(1),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(82),n(84),n(86)],void 0===(a="function"===typeof(r=function(t,e,n,r,i,a,o,s,u,l,c,f,d,h,p,v,g,m,y,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=w(e),x=w(n);function w(t){return t&&t.__esModule?t:{default:t}}var A=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function k(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var M=function(t){function e(){var t,n,x;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var w=arguments.length,A=Array(w),M=0;M<w;M++)A[M]=arguments[M];return x=k(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(A))),n=x,x.svgRenderer=function(t){switch(t){case"Audio":return _.default.createElement(r.Audio,x.props);case"Ball-Triangle":return _.default.createElement(i.BallTriangle,x.props);case"Bars":return _.default.createElement(a.Bars,x.props);case"Circles":return _.default.createElement(o.Circles,x.props);case"Grid":return _.default.createElement(s.Grid,x.props);case"Hearts":return _.default.createElement(u.Hearts,x.props);case"Oval":return _.default.createElement(l.Oval,x.props);case"Puff":return _.default.createElement(c.Puff,x.props);case"Rings":return _.default.createElement(f.Rings,x.props);case"TailSpin":return _.default.createElement(d.TailSpin,x.props);case"ThreeDots":return _.default.createElement(h.ThreeDots,x.props);case"Watch":return _.default.createElement(p.Watch,x.props);case"RevolvingDot":return _.default.createElement(v.RevolvingDot,x.props);case"CradleLoader":return _.default.createElement(g.CradleLoader,x.props);case"Triangle":return _.default.createElement(m.Triangle,x.props);case"Plane":return _.default.createElement(y.Plane,x.props);case"MutatingDot":return _.default.createElement(b.MutatingDot,x.props);default:return _.default.createElement("div",null,_.default.createElement("span",{style:{color:"Green"}},"LOADING"),_.default.createElement("small",null,_.default.createElement("i",null,_.default.createElement("br",null),"Note:No specific svg type exist")))}},k(x,n)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),A(e,[{key:"render",value:function(){var t=this.props.type;return _.default.createElement("div",{className:this.props.style},this.svgRenderer(t))}}]),e}(_.default.Component);M.propTypes={color:x.default.string,type:x.default.string,height:x.default.oneOfType([x.default.number,x.default.string]),width:x.default.oneOfType([x.default.number,x.default.string]),style:x.default.shape({})},M.defaultProps={color:"#71238",type:"Audio",height:80,width:80},t.default=M})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Audio=function(t){return r.default.createElement("svg",{height:t.height,width:t.width,fill:t.color,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{transform:"matrix(1 0 0 -1 0 80)"},r.default.createElement("rect",{width:"10",height:"20",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"15",width:"10",height:"80",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"30",width:"10",height:"50",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"45",width:"10",height:"30",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"}))))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BallTriangle=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.BallTriangle=function(t){return r.default.createElement("svg",{height:t.height,width:t.width,stroke:t.color,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{cx:"5",cy:"50",r:"5"},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"27",cy:"5",r:"5"},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"49",cy:"50",r:"5"},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})))))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bars=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Bars=function(t){return r.default.createElement("svg",{width:t.height,height:t.width,fill:t.color,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circles=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Circles=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 135 135",xmlns:"http://www.w3.org/2000/svg",fill:t.color},r.default.createElement("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"-360 67 67",dur:"2.5s",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"360 67 67",dur:"8s",repeatCount:"indefinite"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Grid=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 105 105",fill:t.color},r.default.createElement("circle",{cx:"12.5",cy:"12.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"12.5",cy:"52.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"12.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"52.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"12.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"52.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"12.5",cy:"92.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"92.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"92.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hearts=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Hearts=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",fill:t.color},r.default.createElement("path",{d:"M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.717-6.002 11.47-7.65 17.305-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z",attributeName:"fill-opacity",from:"0",to:".5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.592-2.32 17.307 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z",attributeName:"fill-opacity",from:"0",to:".5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0.7s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"}))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Oval=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Oval=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:t.color},r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),r.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Puff=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Puff=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",stroke:t.color},r.default.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2"},r.default.createElement("circle",{cx:"22",cy:"22",r:"1"},r.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:"1"},r.default.createElement("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}))))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rings=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Rings=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",stroke:t.color},r.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{cx:"22",cy:"22",r:"6",strokeOpacity:"0"},r.default.createElement("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:"6",strokeOpacity:"0"},r.default.createElement("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeWidth",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:"8"},r.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"}))))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TailSpin=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.TailSpin=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("defs",null,r.default.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},r.default.createElement("stop",{stopColor:t.color,stopOpacity:"0",offset:"0%"}),r.default.createElement("stop",{stopColor:t.color,stopOpacity:".631",offset:"63.146%"}),r.default.createElement("stop",{stopColor:t.color,offset:"100%"}))),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)"},r.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:t.color,strokeWidth:"2"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),r.default.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:"1"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})))))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDots=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.ThreeDots=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:t.color},r.default.createElement("circle",{cx:"15",cy:"15",r:"15"},r.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"60",cy:"15",r:"9",attributeName:"fillOpacity",from:"1",to:"0.3"},r.default.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"105",cy:"15",r:"15"},r.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Watch=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,version:"1.1",id:"L2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100",xmlSpace:"preserve"},r.default.createElement("circle",{fill:"none",stroke:t.color,strokeWidth:"4",strokeMiterlimit:"10",cx:"50",cy:"50",r:"48"}),r.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:t.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"85",y2:"50.5"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),r.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:t.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"49.5",y2:"74"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"15s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RevolvingDot=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.RevolvingDot=function(t){return r.default.createElement("svg",{version:"1.1",width:t.width,height:t.height,id:"L3",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",xmlSpace:"preserve"},r.default.createElement("circle",{fill:"none",stroke:t.color,strokeWidth:"4",cx:"50",cy:"50",r:"44",style:{opacity:.5}}),r.default.createElement("circle",{fill:t.color,stroke:t.color,strokeWidth:"3",cx:"8",cy:"54",r:"6"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 48",to:"360 50 52",repeatCount:"indefinite"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i,a;i=[e,n(2),n(81)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CradleLoader=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.CradleLoader=function(){return r.default.createElement("div",{"aria-busy":"true","aria-label":"Loading",role:"progressbar",className:"container"},r.default.createElement("div",{className:"react-spinner-loader-swing"},r.default.createElement("div",{className:"react-spinner-loader-swing-l"}),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",{className:"react-spinner-loader-swing-r"})),r.default.createElement("div",{className:"react-spinner-loader-shadow"},r.default.createElement("div",{className:"react-spinner-loader-shadow-l"}),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",{className:"react-spinner-loader-shadow-r"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){},function(t,e,n){var r,i,a;i=[e,n(2),n(83)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.Triangle=function(t){return r.default.createElement("div",{className:"react-spinner-loader-svg"},r.default.createElement("svg",{id:"triangle",width:t.height,height:t.height,viewBox:"-3 -4 39 39"},r.default.createElement("polygon",{fill:"transparent",stroke:t.color,strokeWidth:"1",points:"16,0 32,32 0,32"})))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){},function(t,e,n){var r,i,a;i=[e,n(2),n(1),n(85)],void 0===(a="function"===typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;var r=a(e),i=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var o=t.Plane=function(t){return r.default.createElement("svg",{className:"react-spinner-loader-svg-calLoader",xmlns:"http://www.w3.org/2000/svg",width:"230",height:"230"},r.default.createElement("path",{className:"react-spinner-loader-cal-loader__path",style:{stroke:t.secondaryColor},d:"M86.429 40c63.616-20.04 101.511 25.08 107.265 61.93 6.487 41.54-18.593 76.99-50.6 87.643-59.46 19.791-101.262-23.577-107.142-62.616C29.398 83.441 59.945 48.343 86.43 40z",fill:"none",stroke:"#0099cc",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"10 10 10 10 10 10 10 432",strokeDashoffset:"77"}),r.default.createElement("path",{className:"cal-loader__plane",style:{fill:t.color},d:"M141.493 37.93c-1.087-.927-2.942-2.002-4.32-2.501-2.259-.824-3.252-.955-9.293-1.172-4.017-.146-5.197-.23-5.47-.37-.766-.407-1.526-1.448-7.114-9.773-4.8-7.145-5.344-7.914-6.327-8.976-1.214-1.306-1.396-1.378-3.79-1.473-1.036-.04-2-.043-2.153-.002-.353.1-.87.586-1 .952-.139.399-.076.71.431 2.22.241.72 1.029 3.386 1.742 5.918 1.644 5.844 2.378 8.343 2.863 9.705.206.601.33 1.1.275 1.125-.24.097-10.56 1.066-11.014 1.032a3.532 3.532 0 0 1-1.002-.276l-.487-.246-2.044-2.613c-2.234-2.87-2.228-2.864-3.35-3.309-.717-.287-2.82-.386-3.276-.163-.457.237-.727.644-.737 1.152-.018.39.167.805 1.916 4.373 1.06 2.166 1.964 4.083 1.998 4.27.04.179.004.521-.076.75-.093.228-1.109 2.064-2.269 4.088-1.921 3.34-2.11 3.711-2.123 4.107-.008.25.061.557.168.725.328.512.72.644 1.966.676 1.32.029 2.352-.236 3.05-.762.222-.171 1.275-1.313 2.412-2.611 1.918-2.185 2.048-2.32 2.45-2.505.241-.111.601-.232.82-.271.267-.058 2.213.201 5.912.8 3.036.48 5.525.894 5.518.914 0 .026-.121.306-.27.638-.54 1.198-1.515 3.842-3.35 9.021-1.029 2.913-2.107 5.897-2.4 6.62-.703 1.748-.725 1.833-.594 2.286.137.46.45.833.872 1.012.41.177 3.823.24 4.37.085.852-.25 1.44-.688 2.312-1.724 1.166-1.39 3.169-3.948 6.771-8.661 5.8-7.583 6.561-8.49 7.387-8.702.233-.065 2.828-.056 5.784.011 5.827.138 6.64.09 8.62-.5 2.24-.67 4.035-1.65 5.517-3.016 1.136-1.054 1.135-1.014.207-1.962-.357-.38-.767-.777-.902-.893z",fill:"#000033"}))};o.propTypes={secondaryColor:i.default.string,color:i.default.string},o.defaultProps={secondaryColor:"grey",color:"#FFA500"}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){},function(t,e,n){var r,i,a;i=[e,n(2)],void 0===(a="function"===typeof(r=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutatingDot=void 0;var n,r=(n=e)&&n.__esModule?n:{default:n};t.MutatingDot=function(t){return r.default.createElement("svg",{id:"goo-loader",width:t.width,height:t.height},r.default.createElement("filter",{id:"fancy-goo"},r.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"6",result:"blur"}),r.default.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),r.default.createElement("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})),r.default.createElement("g",{filter:"url(#fancy-goo)"},r.default.createElement("animateTransform",{id:"mainAnim",attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 50 50",to:"359 50 50",dur:"1.2s",repeatCount:"indefinite"}),r.default.createElement("circle",{cx:"50%",cy:"40",r:"11"},r.default.createElement("animate",{id:"cAnim1",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0;cAnim1.end+0.2s",calcMode:"spline",values:"40;20;40",keyTimes:"0;0.3;1",keySplines:"0.175, 0.885, 0.320, 1.5; 0.175, 0.885, 0.320, 1.5"})),r.default.createElement("circle",{cx:"50%",cy:"60",r:"11"},r.default.createElement("animate",{id:"cAnim2",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0.4s;cAnim2.end+0.2s",calcMode:"spline",values:"60;80;60",keyTimes:"0;0.3;1",keySplines:"0.175, 0.885, 0.320, 1.5;0.175, 0.885, 0.320, 1.5"}))))}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"aggregate",function(){return ii}),n.d(r,"bin",function(){return oi}),n.d(r,"collect",function(){return li}),n.d(r,"compare",function(){return ci}),n.d(r,"countpattern",function(){return di}),n.d(r,"cross",function(){return pi}),n.d(r,"density",function(){return xi}),n.d(r,"expression",function(){return ki}),n.d(r,"extent",function(){return Ti}),n.d(r,"facet",function(){return Ei}),n.d(r,"field",function(){return Pi}),n.d(r,"filter",function(){return Ri}),n.d(r,"flatten",function(){return Fi}),n.d(r,"fold",function(){return ji}),n.d(r,"formula",function(){return Ni}),n.d(r,"generate",function(){return zi}),n.d(r,"impute",function(){return qi}),n.d(r,"joinaggregate",function(){return Ui}),n.d(r,"key",function(){return Wi}),n.d(r,"load",function(){return Vi}),n.d(r,"lookup",function(){return Yi}),n.d(r,"multiextent",function(){return Zi}),n.d(r,"multivalues",function(){return $i}),n.d(r,"params",function(){return Ki}),n.d(r,"pivot",function(){return Qi}),n.d(r,"prefacet",function(){return ea}),n.d(r,"project",function(){return na}),n.d(r,"proxy",function(){return ra}),n.d(r,"relay",function(){return ia}),n.d(r,"sample",function(){return aa}),n.d(r,"sequence",function(){return oa}),n.d(r,"sieve",function(){return sa}),n.d(r,"subflow",function(){return Si}),n.d(r,"tupleindex",function(){return ua}),n.d(r,"values",function(){return la}),n.d(r,"window",function(){return va});var i={};n.r(i),n.d(i,"bound",function(){return Rc}),n.d(i,"identifier",function(){return jc}),n.d(i,"mark",function(){return Nc}),n.d(i,"overlap",function(){return zc}),n.d(i,"render",function(){return Vc}),n.d(i,"viewlayout",function(){return of});var a={};n.r(a),n.d(a,"interpolate",function(){return jh}),n.d(a,"interpolateArray",function(){return Mh}),n.d(a,"interpolateBasis",function(){return ph}),n.d(a,"interpolateBasisClosed",function(){return vh}),n.d(a,"interpolateDate",function(){return Th}),n.d(a,"interpolateDiscrete",function(){return Nh}),n.d(a,"interpolateHue",function(){return zh}),n.d(a,"interpolateNumber",function(){return Sh}),n.d(a,"interpolateObject",function(){return Ch}),n.d(a,"interpolateRound",function(){return Ih}),n.d(a,"interpolateString",function(){return Fh}),n.d(a,"interpolateTransformCss",function(){return Wh}),n.d(a,"interpolateTransformSvg",function(){return Gh}),n.d(a,"interpolateZoom",function(){return Zh}),n.d(a,"interpolateRgb",function(){return xh}),n.d(a,"interpolateRgbBasis",function(){return Ah}),n.d(a,"interpolateRgbBasisClosed",function(){return kh}),n.d(a,"interpolateHsl",function(){return $h}),n.d(a,"interpolateHslLong",function(){return Jh}),n.d(a,"interpolateLab",function(){return Kh}),n.d(a,"interpolateHcl",function(){return tp}),n.d(a,"interpolateHclLong",function(){return ep}),n.d(a,"interpolateCubehelix",function(){return rp}),n.d(a,"interpolateCubehelixLong",function(){return ip}),n.d(a,"piecewise",function(){return ap}),n.d(a,"quantize",function(){return op});var o={};n.r(o),n.d(o,"schemeCategory10",function(){return Tv}),n.d(o,"schemeAccent",function(){return Sv}),n.d(o,"schemeDark2",function(){return Cv}),n.d(o,"schemePaired",function(){return Ev}),n.d(o,"schemePastel1",function(){return Ov}),n.d(o,"schemePastel2",function(){return Pv}),n.d(o,"schemeSet1",function(){return Lv}),n.d(o,"schemeSet2",function(){return Rv}),n.d(o,"schemeSet3",function(){return Dv}),n.d(o,"schemeTableau10",function(){return Zv}),n.d(o,"interpolateBrBG",function(){return Jv}),n.d(o,"schemeBrBG",function(){return $v}),n.d(o,"interpolatePRGn",function(){return Qv}),n.d(o,"schemePRGn",function(){return Kv}),n.d(o,"interpolatePiYG",function(){return eg}),n.d(o,"schemePiYG",function(){return tg}),n.d(o,"interpolatePuOr",function(){return rg}),n.d(o,"schemePuOr",function(){return ng}),n.d(o,"interpolateRdBu",function(){return ag}),n.d(o,"schemeRdBu",function(){return ig}),n.d(o,"interpolateRdGy",function(){return sg}),n.d(o,"schemeRdGy",function(){return og}),n.d(o,"interpolateRdYlBu",function(){return lg}),n.d(o,"schemeRdYlBu",function(){return ug}),n.d(o,"interpolateRdYlGn",function(){return fg}),n.d(o,"schemeRdYlGn",function(){return cg}),n.d(o,"interpolateSpectral",function(){return hg}),n.d(o,"schemeSpectral",function(){return dg}),n.d(o,"interpolateBuGn",function(){return vg}),n.d(o,"schemeBuGn",function(){return pg}),n.d(o,"interpolateBuPu",function(){return mg}),n.d(o,"schemeBuPu",function(){return gg}),n.d(o,"interpolateGnBu",function(){return bg}),n.d(o,"schemeGnBu",function(){return yg}),n.d(o,"interpolateOrRd",function(){return xg}),n.d(o,"schemeOrRd",function(){return _g}),n.d(o,"interpolatePuBuGn",function(){return Ag}),n.d(o,"schemePuBuGn",function(){return wg}),n.d(o,"interpolatePuBu",function(){return Mg}),n.d(o,"schemePuBu",function(){return kg}),n.d(o,"interpolatePuRd",function(){return Sg}),n.d(o,"schemePuRd",function(){return Tg}),n.d(o,"interpolateRdPu",function(){return Eg}),n.d(o,"schemeRdPu",function(){return Cg}),n.d(o,"interpolateYlGnBu",function(){return Pg}),n.d(o,"schemeYlGnBu",function(){return Og}),n.d(o,"interpolateYlGn",function(){return Rg}),n.d(o,"schemeYlGn",function(){return Lg}),n.d(o,"interpolateYlOrBr",function(){return Fg}),n.d(o,"schemeYlOrBr",function(){return Dg}),n.d(o,"interpolateYlOrRd",function(){return Ng}),n.d(o,"schemeYlOrRd",function(){return jg}),n.d(o,"interpolateBlues",function(){return Ig}),n.d(o,"schemeBlues",function(){return zg}),n.d(o,"interpolateGreens",function(){return qg}),n.d(o,"schemeGreens",function(){return Bg}),n.d(o,"interpolateGreys",function(){return Hg}),n.d(o,"schemeGreys",function(){return Ug}),n.d(o,"interpolatePurples",function(){return Gg}),n.d(o,"schemePurples",function(){return Wg}),n.d(o,"interpolateReds",function(){return Yg}),n.d(o,"schemeReds",function(){return Vg}),n.d(o,"interpolateOranges",function(){return Xg}),n.d(o,"schemeOranges",function(){return Zg}),n.d(o,"interpolateCividis",function(){return $g}),n.d(o,"interpolateCubehelixDefault",function(){return Jg}),n.d(o,"interpolateRainbow",function(){return Hv}),n.d(o,"interpolateWarm",function(){return Bv}),n.d(o,"interpolateCool",function(){return qv}),n.d(o,"interpolateSinebow",function(){return Yv}),n.d(o,"interpolateTurbo",function(){return Kg}),n.d(o,"interpolateViridis",function(){return jv}),n.d(o,"interpolateMagma",function(){return Nv}),n.d(o,"interpolateInferno",function(){return zv}),n.d(o,"interpolatePlasma",function(){return Iv});var s={};n.r(s),n.d(s,"axisticks",function(){return dm}),n.d(s,"datajoin",function(){return hm}),n.d(s,"encode",function(){return gm}),n.d(s,"legendentries",function(){return wm}),n.d(s,"linkpath",function(){return Cm}),n.d(s,"pie",function(){return Lm}),n.d(s,"scale",function(){return Nm}),n.d(s,"sortitems",function(){return qm}),n.d(s,"stack",function(){return Hm}),n.d(s,"validTicks",function(){return lm});var u={};n.r(u),n.d(u,"contour",function(){return xy}),n.d(u,"geojson",function(){return Ay}),n.d(u,"geopath",function(){return Gw}),n.d(u,"geopoint",function(){return Vw}),n.d(u,"geoshape",function(){return Yw}),n.d(u,"graticule",function(){return Zw}),n.d(u,"projection",function(){return Xw});var l={};n.r(l),n.d(l,"force",function(){return GA});var c={};n.r(c),n.d(c,"nest",function(){return Yk}),n.d(c,"pack",function(){return Kk}),n.d(c,"partition",function(){return eM}),n.d(c,"stratify",function(){return rM}),n.d(c,"tree",function(){return oM}),n.d(c,"treelinks",function(){return uM}),n.d(c,"treemap",function(){return fM});var f={};n.r(f),n.d(f,"voronoi",function(){return JM});var d={};n.r(d),n.d(d,"wordcloud",function(){return dT});var h={};n.r(h),n.d(h,"crossfilter",function(){return yT}),n.d(h,"resolvefilter",function(){return _T});var p=n(0);function v(t){var e=t||p.x,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,a=e(t);return r[a]&&(r[a]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}var g=Symbol("vega_id"),m=1;function y(t){return!(!t||!b(t))}function b(t){return t[g]}function _(t,e){return t[g]=e,t}function x(t){var e=t===Object(t)?t:{data:t};return b(e)?e:_(e,m++)}function w(t){return A(t,x({}))}function A(t,e){for(var n in t)e[n]=t[n];return e}function k(t,e){return _(e,b(t))}function M(t){return t&&t.constructor===T}function T(){var t=[],e=[],n=[],r=[],i=[],a=!1;return{constructor:T,insert:function(e){for(var n=Object(p.i)(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=Object(p.D)(t)?r:e,i=Object(p.i)(t),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(t,e,r){var a={field:e,value:Object(p.l)(r)};return Object(p.D)(t)?(a.filter=t,i.push(a)):(a.tuple=t,n.push(a)),this},encode:function(t,e){return Object(p.D)(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},reflow:function(){return a=!0,this},pulse:function(o,s){var u,l,c,f,d,h,p={},v={};for(u=0,l=s.length;u<l;++u)p[b(s[u])]=1;for(u=0,l=e.length;u<l;++u)p[b(d=e[u])]=-1;for(u=0,l=r.length;u<l;++u)f=r[u],s.forEach(function(t){f(t)&&(p[b(t)]=-1)});for(u=0,l=t.length;u<l;++u)h=b(d=t[u]),p[h]?p[h]=1:o.add.push(x(t[u]));for(u=0,l=s.length;u<l;++u)d=s[u],p[b(d)]<0&&o.rem.push(d);function g(t,e,n){n?t[e]=n(t):o.encode=e,a||(v[b(t)]=t)}for(u=0,l=n.length;u<l;++u)d=(c=n[u]).tuple,f=c.field,(h=p[b(d)])>0&&(g(d,f,c.value),o.modifies(f));for(u=0,l=i.length;u<l;++u)c=i[u],f=c.filter,s.forEach(function(t){f(t)&&p[b(t)]>0&&g(t,c.field,c.value)}),o.modifies(c.field);if(a)o.mod=e.length||r.length?s.filter(function(t){return p[b(t)]>0}):s.slice();else for(h in v)o.mod.push(v[h]);return o}}}var S="_:mod:_";function C(){Object.defineProperty(this,S,{writable:!0,value:{}})}var E=C.prototype;E.set=function(t,e,n,r){var i=this,a=i[t],o=i[S];return null!=e&&e>=0?(a[e]!==n||r)&&(a[e]=n,o[e+":"+t]=-1,o[t]=-1):(a!==n||r)&&(i[t]=n,o[t]=Object(p.A)(n)?1+n.length:-1),i},E.modified=function(t,e){var n,r=this[S];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(p.A)(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e+1<r[t]||!!r[e+":"+t]:!!r[t]},E.clear=function(){return this[S]={},this};var O=0,P=new C;function L(t,e,n,r){this.id=++O,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var R=L.prototype;function D(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}R.targets=function(){return this._targets||(this._targets=v(p.w))},R.set=function(t){return this.value!==t?(this.value=t,1):0},R.skip=D(1),R.modified=D(2),R.parameters=function(t,e,n){e=!1!==e;var r,i,a,o,s=this,u=s._argval=s._argval||new C,l=s._argops=s._argops||[],c=[];function f(t,n,r){r instanceof L?(r!==s&&(e&&r.targets().add(s),c.push(r)),l.push({op:r,name:t,index:n})):u.set(t,n,r)}for(r in t)if(i=t[r],"pulse"===r)Object(p.i)(i).forEach(function(t){t instanceof L?t!==s&&(t.targets().add(s),c.push(t)):Object(p.n)("Pulse parameters must be operator instances.")}),s.source=i;else if(Object(p.A)(i))for(u.set(r,-1,Array(a=i.length)),o=0;o<a;++o)f(r,o,i[o]);else f(r,-1,i);return this.marshall().clear(),n&&(l.initonly=!0),c},R.marshall=function(t){var e,n,r,i,a,o=this._argval||P,s=this._argops;if(s){for(n=0,r=s.length;n<r;++n)a=(i=(e=s[n]).op).modified()&&i.stamp===t,o.set(e.name,e.index,i.value,a);if(s.initonly){for(n=0;n<r;++n)(e=s[n]).op.targets().remove(this);this._argops=null,this._update=null}}return o},R.evaluate=function(t){var e=this._update;if(e){var n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},R.run=function(t){return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.stamp=t.stamp,this.pulse=e||t);var e};var F=0;function j(t,e,n){this.id=++F,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function N(t,e,n){return new j(t,e,n)}var z=j.prototype;z._filter=p.eb,z._apply=p.x,z.targets=function(){return this._targets||(this._targets=v(p.w))},z.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},z.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},z.filter=function(t){var e=N(t);return this.targets().add(e),e},z.apply=function(t){var e=N(null,t);return this.targets().add(e),e},z.merge=function(){var t=N();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},z.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return n-e>t?(e=n,1):0})},z.debounce=function(t){var e=N();return this.targets().add(N(null,null,Object(p.m)(t,function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},z.between=function(t,e){var n=!1;return t.targets().add(N(null,null,function(){n=!0})),e.targets().add(N(null,null,function(){n=!1})),this.filter(function(){return n})};var I=/^([A-Za-z]+:)?\/\//,B="file://",q=function(t){return{options:t||{},sanitize:H,load:U,file:G,http:W}};function U(t,e){var n=this;return n.sanitize(t,e).then(function(t){var r=t.href;return t.localFile?n.file(r):n.http(r,e)})}function H(t,e){return e=Object(p.o)({},this.options,e),new Promise(function(n,r){var i,a,o,s,u={href:null};null!=t&&"string"===typeof t?(a=I.test(t),(s=e.baseURL)&&!a&&(Y(t,"/")||"/"===s[s.length-1]||(t="/"+t),t=s+t),o=(i=Y(t,B))||"file"===e.mode||"http"!==e.mode&&!a&&V(),i?t=t.slice(B.length):Y(t,"//")&&("file"===e.defaultProtocol?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(u,"localFile",{value:!!o}),u.href=t,e.target&&(u.target=e.target+""),n(u)):r("Sanitize failure, invalid URI: "+Object(p.X)(t))})}function W(t,e){return function(t,e){var r="function"===typeof fetch?fetch:n(42);return r?r(t,e):Promise.reject("No fetch method available.")}(t,Object(p.o)({},this.options.http,e)).then(function(t){if(!t.ok)throw t.status+""+t.statusText;return t.text()})}function G(t){return new Promise(function(e,n){var r=V();r?r.readFile(t,function(t,r){t?n(t):e(r)}):n("No file system access for "+t)})}function V(){var t=n(43);return t&&Object(p.D)(t.readFile)?t:null}function Y(t,e){return null!=t&&0===t.lastIndexOf(e,0)}var Z={boolean:p.Y,integer:p.ab,number:p.ab,date:p.Z,string:p.cb,unknown:p.x},X=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return Q(t)&&(t=+t)===~~t},Q,function(t){return!isNaN(Date.parse(t))}],$=["boolean","integer","number","date"];function J(t,e){if(!t||!t.length)return"unknown";var n,r,i,a,o=0,s=t.length,u=X.length,l=X.map(function(t,e){return e+1});for(r=0,s=t.length;r<s;++r)for(n=e?t[r][e]:t[r],i=0;i<u;++i)if(l[i]&&(null!=(a=n)&&a===a)&&!X[i](n)&&(l[i]=0,++o===X.length))return"string";return o=l.reduce(function(t,e){return 0===t?e:t},0)-1,$[o]}function K(t,e){return e.reduce(function(e,n){return e[n]=J(t,n),e},{})}function Q(t){return!isNaN(+t)&&!(t instanceof Date)}var tt={},et={},nt=34,rt=10,it=13;function at(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function ot(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function st(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ut(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+st(-e,6):e>9999?"+"+st(e,6):st(e,4))+"-"+st(t.getUTCMonth()+1,2)+"-"+st(t.getUTCDate(),2)+(a?"T"+st(n,2)+":"+st(r,2)+":"+st(i,2)+"."+st(a,3)+"Z":i?"T"+st(n,2)+":"+st(r,2)+":"+st(i,2)+"Z":r||n?"T"+st(n,2)+":"+st(r,2)+"Z":"")}var lt=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,u=a<=0,l=!1;function c(){if(u)return et;if(l)return l=!1,tt;var e,r,i=o;if(t.charCodeAt(i)===nt){for(;o++<a&&t.charCodeAt(o)!==nt||t.charCodeAt(++o)===nt;);return(e=o)>=a?u=!0:(r=t.charCodeAt(o++))===rt?l=!0:r===it&&(l=!0,t.charCodeAt(o)===rt&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if((r=t.charCodeAt(e=o++))===rt)l=!0;else if(r===it)l=!0,t.charCodeAt(o)===rt&&++o;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===rt&&--a,t.charCodeAt(a-1)===it&&--a;(r=c())!==et;){for(var f=[];r!==tt&&r!==et;)f.push(r),r=c();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?ut(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=at(t);return function(r,i){return e(n(r),i,t)}}(t,e):at(t)});return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=ot(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=ot(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")}}},ct=lt(","),ft=(ct.parse,ct.parseRows,ct.format,ct.formatBody,ct.formatRows,lt("\t"));ft.parse,ft.parseRows,ft.format,ft.formatBody,ft.formatRows;function dt(t){return function(e,n){var r={delimiter:t};return ht(e,n?Object(p.o)(n,r):r)}}function ht(t,e){return e.header&&(t=e.header.map(p.X).join(e.delimiter)+"\n"+t),lt(e.delimiter).parse(t+"")}var pt=n(15),vt=function(t){return t},gt=function(t){if(null==t)return vt;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+a,c[1]=(n+=t[1])*i+o;u<l;)c[u]=t[u],++u;return c}},mt=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},yt=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return bt(t,e)})}:bt(t,e)};function bt(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,a=_t(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function _t(t,e){var n=gt(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],a=0,o=i.length;a<o;++a)e.push(n(i[a],a));t<0&&mt(e,o)}function a(t){return n(t)}function o(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=a(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(a);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}var xt=function(t,e){var n={},r={},i={},a=[],o=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),a.push(i)}}return e.forEach(function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++o],e[o]=n,e[r]=i)}),e.forEach(function(e){var n,a,o=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),s=o[0],u=o[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,a=r[u]){delete r[a.start];var l=a===n?n:n.concat(a);r[l.start=n.start]=i[l.end=a.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,a=i[s]){delete i[a.end];var c=a===n?n:a.concat(n);r[c.start=a.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n}),s(i,r),s(r,i),e.forEach(function(t){n[t<0?~t:t]||a.push([t])}),a},wt=function(t){return _t(t,function(t,e,n){var r,i,a;if(arguments.length>1)r=function(t,e,n){var r,i=[],a=[];function o(t){var e=t<0?~t:t;(a[e]||(a[e]=[])).push({i:t,g:r})}function s(t){t.forEach(o)}function u(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":u(e.arcs);break;case"MultiPolygon":e.arcs.forEach(u)}}(e),a.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,n);else for(i=0,r=new Array(a=t.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:xt(t,r)}}.apply(this,arguments))};var At={dsv:ht,csv:dt(","),tsv:dt("\t"),json:pt.a,topojson:function(t,e){var n,r,i;return t=Object(pt.a)(t,e),n=e&&(i=e.feature)?yt:e&&(i=e.mesh)?wt:Object(p.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r):Object(p.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}};function kt(t,e){return arguments.length>1?(At[t]=e,this):At.hasOwnProperty(t)?At[t]:null}var Mt=new Date,Tt=new Date;function St(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return St(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Mt.setTime(+e),Tt.setTime(+r),t(Mt),t(Tt),Math.floor(n(Mt,Tt))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var Ct=St(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Ct.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?St(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Ct:null};var Et=Ct,Ot=(Ct.range,6e4),Pt=6048e5,Lt=St(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Rt=Lt,Dt=(Lt.range,St(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*Ot)},function(t,e){return(e-t)/Ot},function(t){return t.getMinutes()})),Ft=Dt,jt=(Dt.range,St(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Ot)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),Nt=jt,zt=(jt.range,St(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ot)/864e5},function(t){return t.getDate()-1})),It=zt;zt.range;function Bt(t){return St(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ot)/Pt})}var qt=Bt(0),Ut=Bt(1),Ht=Bt(2),Wt=Bt(3),Gt=Bt(4),Vt=Bt(5),Yt=Bt(6),Zt=(qt.range,Ut.range,Ht.range,Wt.range,Gt.range,Vt.range,Yt.range,St(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Xt=Zt,$t=(Zt.range,St(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));$t.every=function(t){return isFinite(t=Math.floor(t))&&t>0?St(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Jt=$t,Kt=($t.range,St(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ot)},function(t,e){return(e-t)/Ot},function(t){return t.getUTCMinutes()})),Qt=Kt,te=(Kt.range,St(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),ee=te,ne=(te.range,St(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),re=ne;ne.range;function ie(t){return St(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Pt})}var ae=ie(0),oe=ie(1),se=ie(2),ue=ie(3),le=ie(4),ce=ie(5),fe=ie(6),de=(ae.range,oe.range,se.range,ue.range,le.range,ce.range,fe.range,St(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),he=de,pe=(de.range,St(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));pe.every=function(t){return isFinite(t=Math.floor(t))&&t>0?St(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var ve=pe;pe.range;function ge(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function me(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ye(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var be,_e,xe,we,Ae,ke={"-":"",_:" ",0:"0"},Me=/^\s*\d+/,Te=/^%/,Se=/[\\^$*+?|[\]().{}]/g;function Ce(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ee(t){return t.replace(Se,"\\$&")}function Oe(t){return new RegExp("^(?:"+t.map(Ee).join("|")+")","i")}function Pe(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Le(t,e,n){var r=Me.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Re(t,e,n){var r=Me.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function De(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Fe(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function je(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ne(t,e,n){var r=Me.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ze(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ie(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Be(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function qe(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ue(t,e,n){var r=Me.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function He(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function We(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ge(t,e,n){var r=Me.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ve(t,e,n){var r=Me.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ye(t,e,n){var r=Me.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ze(t,e,n){var r=Te.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Xe(t,e,n){var r=Me.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $e(t,e,n){var r=Me.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Je(t,e){return Ce(t.getDate(),e,2)}function Ke(t,e){return Ce(t.getHours(),e,2)}function Qe(t,e){return Ce(t.getHours()%12||12,e,2)}function tn(t,e){return Ce(1+It.count(Jt(t),t),e,3)}function en(t,e){return Ce(t.getMilliseconds(),e,3)}function nn(t,e){return en(t,e)+"000"}function rn(t,e){return Ce(t.getMonth()+1,e,2)}function an(t,e){return Ce(t.getMinutes(),e,2)}function on(t,e){return Ce(t.getSeconds(),e,2)}function sn(t){var e=t.getDay();return 0===e?7:e}function un(t,e){return Ce(qt.count(Jt(t),t),e,2)}function ln(t,e){var n=t.getDay();return t=n>=4||0===n?Gt(t):Gt.ceil(t),Ce(Gt.count(Jt(t),t)+(4===Jt(t).getDay()),e,2)}function cn(t){return t.getDay()}function fn(t,e){return Ce(Ut.count(Jt(t),t),e,2)}function dn(t,e){return Ce(t.getFullYear()%100,e,2)}function hn(t,e){return Ce(t.getFullYear()%1e4,e,4)}function pn(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ce(e/60|0,"0",2)+Ce(e%60,"0",2)}function vn(t,e){return Ce(t.getUTCDate(),e,2)}function gn(t,e){return Ce(t.getUTCHours(),e,2)}function mn(t,e){return Ce(t.getUTCHours()%12||12,e,2)}function yn(t,e){return Ce(1+re.count(ve(t),t),e,3)}function bn(t,e){return Ce(t.getUTCMilliseconds(),e,3)}function _n(t,e){return bn(t,e)+"000"}function xn(t,e){return Ce(t.getUTCMonth()+1,e,2)}function wn(t,e){return Ce(t.getUTCMinutes(),e,2)}function An(t,e){return Ce(t.getUTCSeconds(),e,2)}function kn(t){var e=t.getUTCDay();return 0===e?7:e}function Mn(t,e){return Ce(ae.count(ve(t),t),e,2)}function Tn(t,e){var n=t.getUTCDay();return t=n>=4||0===n?le(t):le.ceil(t),Ce(le.count(ve(t),t)+(4===ve(t).getUTCDay()),e,2)}function Sn(t){return t.getUTCDay()}function Cn(t,e){return Ce(oe.count(ve(t),t),e,2)}function En(t,e){return Ce(t.getUTCFullYear()%100,e,2)}function On(t,e){return Ce(t.getUTCFullYear()%1e4,e,4)}function Pn(){return"+0000"}function Ln(){return"%"}function Rn(t){return+t}function Dn(t){return Math.floor(+t/1e3)}function Fn(t){return be=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,l=Oe(i),c=Pe(i),f=Oe(a),d=Pe(a),h=Oe(o),p=Pe(o),v=Oe(s),g=Pe(s),m=Oe(u),y=Pe(u),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Je,e:Je,f:nn,H:Ke,I:Qe,j:tn,L:en,m:rn,M:an,p:function(t){return i[+(t.getHours()>=12)]},Q:Rn,s:Dn,S:on,u:sn,U:un,V:ln,w:cn,W:fn,x:null,X:null,y:dn,Y:hn,Z:pn,"%":Ln},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:vn,e:vn,f:_n,H:gn,I:mn,j:yn,L:bn,m:xn,M:wn,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:Rn,s:Dn,S:An,u:kn,U:Mn,V:Tn,w:Sn,W:Cn,x:null,X:null,y:En,Y:On,Z:Pn,"%":Ln},x={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:qe,e:qe,f:Ye,H:He,I:He,j:Ue,L:Ve,m:Be,M:We,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:Xe,s:$e,S:Ge,u:Re,U:De,V:Fe,w:Le,W:je,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:ze,Y:Ne,Z:Ie,"%":Ze};function w(t,e){return function(n){var r,i,a,o=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=ke[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function A(t,e){return function(n){var r,i,a=ye(1900);if(k(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=me(ye(a.y))).getUTCDay(),r=i>4||0===i?oe.ceil(r):oe(r),r=re.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=e(ye(a.y))).getDay(),r=i>4||0===i?Ut.ceil(r):Ut(r),r=It.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?me(ye(a.y)).getUTCDay():e(ye(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,me(a)):e(a)}}function k(t,e,n,r){for(var i,a,o=0,s=e.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in ke?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=A(t+="",ge);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=A(t,me);return e.toString=function(){return t},e}}}(t),_e=be.format,xe=be.parse,we=be.utcFormat,Ae=be.utcParse,be}Fn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||we("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Ae("%Y-%m-%dT%H:%M:%S.%LZ");var jn=function(t,e,n){var r=kt((e=e||{}).type||"json");return r||Object(p.n)("Unknown data format type: "+e.type),t=r(t,e),e.parse&&function(t,e,n){if(!t.length)return;n=n||xe;var r,i,a,o,s,u,l,c=t.columns||Object.keys(t[0]);"auto"===e&&(e=K(t,c));for(c=Object.keys(e),r=c.map(function(t){var r,i,a=e[t];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Ae(i):n(i);if(!Z[a])throw Error("Illegal format pattern: "+t+":"+a);return Z[a]}),o=0,u=t.length,l=c.length;o<u;++o)for(i=t[o],s=0;s<l;++s)a=c[s],i[a]=r[s](i[a])}(t,e.parse,n),t.hasOwnProperty("columns")&&delete t.columns,t};var Nn={skip:!0};function zn(t,e,n,r,i,a){var o,s,u=Object(p.o)({},a,Nn);Object(p.D)(n)||(n=Object(p.l)(n)),void 0===r?o=function(e){t.touch(n(e))}:Object(p.D)(r)?(s=new L(null,r,i,!1),o=function(e){var r,i=n(e);s.evaluate(e),M(r=s.value)?t.pulse(i,r,a):t.update(i,r,u)}):o=function(e){t.update(n(e),r,u)},e.apply(o)}function In(t,e,n,r,i,a){var o,s;void 0===r?s=n:(o=Object(p.D)(r)?r:Object(p.l)(r),(s=new L(null,r=n?function(t,e){var r=o(t,e);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,i,!1)).modified(a&&a.force),s.rank=0,n&&(s.skip(!0),s.value=n.value,s.targets().add(n))),e.targets().add(s)}var Bn={};function qn(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var Un=qn.prototype;function Hn(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function Wn(t,e){var n=[];return Object(p.gb)(t,e,function(t){n.push(t)}),n}function Gn(t,e){var n={};return t.visit(e,function(t){n[b(t)]=1}),function(t){return n[b(t)]?null:t}}function Vn(t,e,n,r){var i,a,o,s,u,l=this,c=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,o=0,s=n.length;o<s;++o)if((i=n[o]).stamp===e){if(i.fields)for(u in a=l.fields||(l.fields={}),i.fields)a[u]=1;i.changed(l.ADD)&&(c|=l.ADD),i.changed(l.REM)&&(c|=l.REM),i.changed(l.MOD)&&(c|=l.MOD)}this.changes=c}Un.StopPropagation=Bn,Un.ADD=1,Un.REM=2,Un.MOD=4,Un.ADD_REM=3,Un.ADD_MOD=5,Un.ALL=7,Un.REFLOW=8,Un.SOURCE=16,Un.NO_SOURCE=32,Un.NO_FIELDS=64,Un.fork=function(t){return new qn(this.dataflow).init(this,t)},Un.clone=function(){var t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},Un.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length?((t=new qn(this.dataflow).init(this)).add=t.source,t):t},Un.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source),n},Un.runAfter=function(t){this.dataflow.runAfter(t)},Un.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},Un.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,Gn(this,1))),this},Un.modifies=function(t){var e=Object(p.i)(t),n=this.fields||(this.fields={});return e.forEach(function(t){n[t]=!0}),this},Un.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?Object(p.A)(t)?t.some(function(t){return e[t]}):e[t]:!!e)},Un.filter=function(t,e){var n=this;return 1&t&&(n.addF=Hn(n.addF,e)),2&t&&(n.remF=Hn(n.remF,e)),4&t&&(n.modF=Hn(n.modF,e)),16&t&&(n.srcF=Hn(n.srcF,e)),n},Un.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=Wn(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=Wn(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=Wn(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},Un.visit=function(t,e){var n,r,i=this,a=e;return 16&t?(Object(p.gb)(i.source,i.srcF,a),i):(1&t&&Object(p.gb)(i.add,i.addF,a),2&t&&Object(p.gb)(i.rem,i.remF,a),4&t&&Object(p.gb)(i.mod,i.modF,a),8&t&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(p.gb)(n,Gn(i,5),a):Object(p.gb)(n,i.srcF,a))),i)};var Yn=Object(p.y)(Vn,qn);function Zn(t,e){try{e(t)}catch(n){t.error(n)}}Yn.fork=function(t){var e=new qn(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,function(t){return e.add.push(t)}),t&e.REM&&this.visit(e.REM,function(t){return e.rem.push(t)}),t&e.MOD&&this.visit(e.MOD,function(t){return e.mod.push(t)})),e},Yn.changed=function(t){return this.changes&t},Yn.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?Object(p.A)(t)?t.some(function(t){return n[t]}):n[t]:0},Yn.filter=function(){Object(p.n)("MultiPulse does not support filtering.")},Yn.materialize=function(){Object(p.n)("MultiPulse does not support materialization.")},Yn.visit=function(t,e){var n=this,r=n.pulses,i=r.length,a=0;if(t&n.SOURCE)for(;a<i;++a)r[a].visit(t,e);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(t,e);return n};var Xn={skip:!1,force:!1};function $n(t){this.cmp=t,this.nodes=[]}var Jn=$n.prototype;function Kn(t,e,n,r){var i,a,o;for(i=t[n];n>e&&r(i,a=t[o=n-1>>1])<0;)t[n]=a,n=o;return t[n]=i}function Qn(t,e,n){for(var r,i=e,a=t.length,o=t[e],s=2*e+1;s<a;)(r=s+1)<a&&n(t[s],t[r])>=0&&(s=r),t[e]=t[s],s=2*(e=s)+1;return t[e]=o,Kn(t,i,e,n)}function tr(){this._log=Object(p.K)(),this.logLevel(p.b),this._clock=0,this._rank=0;try{this._loader=q()}catch(t){}this._touched=v(p.w),this._pulses={},this._pulse=null,this._heap=new $n(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}Jn.size=function(){return this.nodes.length},Jn.clear=function(){return this.nodes=[],this},Jn.peek=function(){return this.nodes[0]},Jn.push=function(t){var e=this.nodes;return e.push(t),Kn(e,0,e.length-1,this.cmp)},Jn.pop=function(){var t,e=this.nodes,n=e.pop();return e.length?(t=e[0],e[0]=n,Qn(e,0,this.cmp)):t=n,t},Jn.replace=function(t){var e=this.nodes,n=e[0];return e[0]=t,Qn(e,0,this.cmp),n},Jn.pushpop=function(t){var e=this.nodes,n=e[0];return e.length&&this.cmp(n,t)<0&&(e[0]=t,t=n,Qn(e,0,this.cmp)),t};var er=tr.prototype;function nr(t){return function(){return this._log[t].apply(this,arguments)}}function rr(t,e){L.call(this,t,null,e)}er.stamp=function(){return this._clock},er.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},er.cleanThreshold=1e4,er.add=function(t,e,n,r){var i,a=1;return t instanceof L?i=t:t&&t.prototype instanceof L?i=new t:Object(p.D)(t)?i=new L(null,t):(a=0,i=new L(t,e)),this.rank(i),a&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},er.connect=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},er.rank=function(t){t.rank=++this._rank},er.rerank=function(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&Object(p.n)("Cycle detected in dataflow graph.")},er.pulse=function(t,e,n){this.touch(t,n||Xn);var r=new qn(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._pulses[t.id]=e.pulse(r,i),this},er.touch=function(t,e){var n=e||Xn;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},er.update=function(t,e,n){var r=n||Xn;return(t.set(e)||r.force)&&this.touch(t,r),this},er.changeset=T,er.ingest=function(t,e,n){return this.pulse(t,this.changeset().insert(jn(e,n)))},er.request=function(t,e,n){var r=this,i=0,a=r._pending||function(t){var e,n,r=new Promise(function(r,i){e=function(){r(t)},n=i});return r.requests=0,r.done=function(){0===--r.requests&&t.runAfter(function(){t._pending=null;try{t.run(),t._pending?t._pending.then(e):e()}catch(r){n(r)}})},t._pending=r}(r);return a.requests+=1,r.loader().load(e,{context:"dataflow"}).then(function(t){return jn(t,n)},function(t){i=-1,r.error("Loading failed",e,t)}).catch(function(t){i=-2,r.error("Data ingestion failed",e,t)}).then(function(e){return r.pulse(t,r.changeset().remove(p.eb).insert(e||[])),a.done(),i})},er.events=function(t,e,n,r){for(var i,a=this,o=N(n,r),s=function(t){t.dataflow=a;try{o.receive(t)}catch(e){a.error(e)}finally{a.run()}},u=0,l=(i="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):Object(p.i)(t)).length;u<l;++u)i[u].addEventListener(e,s);return o},er.on=function(t,e,n,r,i){return(t instanceof L?In:zn)(this,t,e,n,r,i),this},er.run=function(t){var e,n,r,i,a=this,o=0,s=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new qn(a,++a._clock,t),s>=p.c&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(t){a._enqueue(t,!0)}),a._touched=v(p.w);try{for(;a._heap.size()>0;)(e=a._heap.pop()).rank===e.qrank?(n=e.run(a._getPulse(e,t)),s>=p.a&&a.debug(e.id,n===Bn?"STOP":n,e),n!==Bn&&(a._pulse=n,e._targets&&e._targets.forEach(function(t){a._enqueue(t)})),++o):a._enqueue(e,!0)}catch(l){i=l}if(a._pulses={},a._pulse=null,s>=p.c&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(l){a.error(l)}if(a._postrun.length){var u=a._postrun;a._postrun=[],u.sort(function(t,e){return e.priority-t.priority}).forEach(function(t){Zn(a,t.callback)})}return this},er.runAsync=function(){return this._pending||this.run()&&this._pending||Promise.resolve(this)},er.runAfter=function(t,e,n){this._pulse||e?this._postrun.push({priority:n||0,callback:t}):Zn(this,t)},er._enqueue=function(t,e){var n=!this._pulses[t.id];n&&(this._pulses[t.id]=this._pulse),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},er._getPulse=function(t,e){var n,r=t.source,i=this._clock;return r&&Object(p.A)(r)?new Vn(this,i,n=r.map(function(t){return t.pulse}),e):(n=this._pulses[t.id],r&&((r=r.pulse)&&r!==Bn?r.stamp===i&&n.target!==t?n=r:n.source=r.source:n.source=[]),n)},er.error=nr("error"),er.warn=nr("warn"),er.info=nr("info"),er.debug=nr("debug"),er.logLevel=nr("level");var ir=Object(p.y)(rr,L);ir.run=function(t){return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),(e=e||t)!==t.StopPropagation&&(this.pulse=e),this.stamp=t.stamp,e);var e},ir.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},ir.transform=function(){};var ar={};function or(t){var e=sr(t);return e&&e.Definition||null}function sr(t){return t=t&&t.toLowerCase(),ar.hasOwnProperty(t)?ar[t]:null}function ur(t){return t&&t.length?1===t.length?t[0]:(e=t,function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}):function(){return""};var e}function lr(t,e,n){return n||t+(e?"_"+e:"")}var cr={values:hr({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:hr({name:"count",set:"cell.num"}),__count__:hr({name:"count",set:"this.missing + this.valid"}),missing:hr({name:"missing",set:"this.missing"}),valid:hr({name:"valid",set:"this.valid"}),sum:hr({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:hr({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:hr({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:hr({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:hr({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:hr({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:hr({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:hr({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:hr({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:hr({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:hr({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:hr({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:hr({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:hr({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:hr({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:hr({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:hr({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:hr({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},fr=Object.keys(cr);function dr(t,e){return cr[t](e)}function hr(t){return function(e){var n=Object(p.o)({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function pr(t,e){return t.idx-e.idx}function vr(t,e){var n=e||p.x,r=function(t,e){var n,r=t.reduce(function t(n,r){function i(e){n[e]||t(n,n[e]=cr[e]())}return r.req&&r.req.forEach(i),e&&r.str&&r.str.forEach(i),n},t.reduce(function(t,e){return t[e.name]=e,t},{})),i=[];for(n in r)i.push(r[n]);return i.sort(pr)}(t,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",s="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",u="var cell = this.cell;";return r.forEach(function(t){i+=t.init,o+=t.add,s+=t.rem}),t.slice().sort(pr).forEach(function(t){u+="t['"+t.out+"']="+t.set+";"}),u+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",s),a.prototype.set=Function("t",u),a.prototype.get=n,a.fields=t.map(function(t){return t.out}),a}var gr=function(t){var e,n,r,i,a,o,s,u,l=t.maxbins||20,c=t.base||10,f=Math.log(c),d=t.divide||[5,2],h=t.extent[0],p=t.extent[1],v=t.span||p-h||Math.abs(h)||1;if(t.step)e=t.step;else if(t.steps){for(a=v/l,o=0,s=t.steps.length;o<s&&t.steps[o]<a;++o);e=t.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(l)/f),r=t.minstep||0,e=Math.max(r,Math.pow(c,Math.round(Math.log(v)/f)-n));Math.ceil(v/e)>l;)e*=c;for(o=0,s=d.length;o<s;++o)(a=e/d[o])>=r&&v/a<=l&&(e=a)}return i=(a=Math.log(e))>=0?0:1+~~(-a/f),u=Math.pow(c,-i-1),(t.nice||void 0===t.nice)&&(h=h<(a=Math.floor(h/e+u)*e)?a-e:a,p=Math.ceil(p/e)*e),{start:h,stop:p===h?h+e:p,step:e}},mr=n(12),yr=n.n(mr),br=yr.a.mark(_r);function _r(t,e){var n,r,i,a,o,s,u,l,c,f,d,h,p;return yr.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(void 0!==e){v.next=30;break}n=!0,r=!1,i=void 0,v.prev=4,a=t[Symbol.iterator]();case 6:if(n=(o=a.next()).done){v.next=14;break}if(!(null!=(s=o.value)&&(s=+s)>=s)){v.next=11;break}return v.next=11,s;case 11:n=!0,v.next=6;break;case 14:v.next=20;break;case 16:v.prev=16,v.t0=v.catch(4),r=!0,i=v.t0;case 20:v.prev=20,v.prev=21,n||null==a.return||a.return();case 23:if(v.prev=23,!r){v.next=26;break}throw i;case 26:return v.finish(23);case 27:return v.finish(20);case 28:v.next=58;break;case 30:u=-1,l=!0,c=!1,f=void 0,v.prev=34,d=t[Symbol.iterator]();case 36:if(l=(h=d.next()).done){v.next=44;break}if(p=h.value,!(null!=(p=e(p,++u,t))&&(p=+p)>=p)){v.next=41;break}return v.next=41,p;case 41:l=!0,v.next=36;break;case 44:v.next=50;break;case 46:v.prev=46,v.t1=v.catch(34),c=!0,f=v.t1;case 50:v.prev=50,v.prev=51,l||null==d.return||d.return();case 53:if(v.prev=53,!c){v.next=56;break}throw f;case 56:return v.finish(53);case 57:return v.finish(50);case 58:case"end":return v.stop()}},br,null,[[4,16,20,28],[21,,23,27],[34,46,50,58],[51,,53,57]])}var xr=Math.random;function wr(t){xr=t}var Ar=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},kr=yr.a.mark(Tr),Mr=function(t){return null===t?NaN:+t};function Tr(t,e){var n,r,i,a,o,s,u,l,c,f,d,h,p;return yr.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(void 0!==e){v.next=30;break}n=!0,r=!1,i=void 0,v.prev=4,a=t[Symbol.iterator]();case 6:if(n=(o=a.next()).done){v.next=14;break}if(!(null!=(s=o.value)&&(s=+s)>=s)){v.next=11;break}return v.next=11,s;case 11:n=!0,v.next=6;break;case 14:v.next=20;break;case 16:v.prev=16,v.t0=v.catch(4),r=!0,i=v.t0;case 20:v.prev=20,v.prev=21,n||null==a.return||a.return();case 23:if(v.prev=23,!r){v.next=26;break}throw i;case 26:return v.finish(23);case 27:return v.finish(20);case 28:v.next=58;break;case 30:u=-1,l=!0,c=!1,f=void 0,v.prev=34,d=t[Symbol.iterator]();case 36:if(l=(h=d.next()).done){v.next=44;break}if(p=h.value,!(null!=(p=e(p,++u,t))&&(p=+p)>=p)){v.next=41;break}return v.next=41,p;case 41:l=!0,v.next=36;break;case 44:v.next=50;break;case 46:v.prev=46,v.t1=v.catch(34),c=!0,f=v.t1;case 50:v.prev=50,v.prev=51,l||null==d.return||d.return();case 53:if(v.prev=53,!c){v.next=56;break}throw f;case 56:return v.finish(53);case 57:return v.finish(50);case 58:case"end":return v.stop()}},kr,null,[[4,16,20,28],[21,,23,27],[34,46,50,58],[51,,53,57]])}function Sr(t,e,n){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mr;if(!(r=t.length))return;if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}(Float64Array.from(Tr(t,n)).sort(Ar),e)}var Cr=function(t,e,n,r){if(!t.length)return[void 0,void 0];var i,a,o,s,u=Float64Array.from(_r(t,r)),l=u.length,c=e;for(o=0,s=Array(c);o<c;++o){for(i=0,a=0;a<l;++a)i+=u[~~(xr()*l)];s[o]=i/l}return s.sort(Ar),[Sr(s,n/2),Sr(s,1-n/2)]},Er=function(t,e){var n=Float64Array.from(_r(t,e));return n.sort(Ar),[Sr(n,.25),Sr(n,.5),Sr(n,.75)]},Or=function(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}},Pr=function(t,e){null==e&&(e=t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(i=r-(n=t||0),a):n},a.max=function(t){return arguments.length?(i=(r=t||0)-n,a):r},a.sample=function(){return n+Math.floor(i*xr())},a.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},a.cdf=function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},a.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN},a.min(t).max(e)},Lr=function(t,e){var n,r,i=NaN,a={mean:function(t){return arguments.length?(n=t||0,i=NaN,a):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i=NaN,a):r},sample:function(){var t,e,a=0,o=0;if(i===i)return a=i,i=NaN,a;do{t=(a=2*xr()-1)*a+(o=2*xr()-1)*o}while(0===t||t>1);return e=Math.sqrt(-2*Math.log(t)/t),i=n+o*e*r,n+a*e*r},pdf:function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*e},cdf:function(t){var e,i=(t-n)/r,a=Math.abs(i);if(a>37)e=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(e=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),e/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):e=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-e:e},icdf:function(t){if(t<=0||t>=1)return NaN;var e=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(e,2))/2,o=Math.log(1-e*e)/i,s=(e>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+r*Math.SQRT2*s}};return a.mean(t).stdev(e)};var Rr=function(t,e){var n=Lr(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(!(e=n)&&t&&(e=function(t){var e=t.length,n=Er(t),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(function(t,e){var n,r=0,i=0,a=0;if(void 0===e){var o=!0,s=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;null!=f&&(f=+f)>=f&&(a+=(n=f-i)*(f-(i+=n/++r)))}}catch(b){s=!0,u=b}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}else{var d=-1,h=!0,p=!1,v=void 0;try{for(var g,m=t[Symbol.iterator]();!(h=(g=m.next()).done);h=!0){var y=g.value;null!=(y=e(y,++d,t))&&(y=+y)>=y&&(a+=(n=y-i)*(y-(i+=n/++r)))}}catch(b){p=!0,v=b}finally{try{h||null==m.return||m.return()}finally{if(p)throw v}}}if(r>1)return a/(r-1)}(t)),r)*Math.pow(e,-.2)}(t)),r):e},r.sample=function(){return t[~~(xr()*i)]+e*n.sample()},r.pdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.pdf((r-t[o])/e);return a/e/i},r.cdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.cdf((r-t[o])/e);return a/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(t)};var Dr=function(t,e){var n,r={},i=0;return r.weights=function(t){return arguments.length?(n=function(t){var e,n=[],r=0;for(e=0;e<i;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<i;++e)n[e]/=r;return n}(e=t||[]),r):e},r.distributions=function(n){return arguments.length?(n?(i=n.length,t=n):(i=0,t=[]),r.weights(e)):t},r.sample=function(){for(var e=xr(),r=t[i-1],a=n[0],o=0;o<i-1;a+=n[++o])if(e<a){r=t[o];break}return r.sample()},r.pdf=function(e){for(var r=0,a=0;a<i;++a)r+=n[a]*t[a].pdf(e);return r},r.cdf=function(e){for(var r=0,a=0;a<i;++a)r+=n[a]*t[a].cdf(e);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(t).weights(e)},Fr=function(t,e){null==e&&(e=null==t?1:t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(i=r-(n=t||0),a):n},a.max=function(t){return arguments.length?(i=(r=t||0)-n,a):r},a.sample=function(){return n+i*xr()},a.pdf=function(t){return t>=n&&t<=r?1/i:0},a.cdf=function(t){return t<n?0:t>r?1:(t-n)/i},a.icdf=function(t){return t>=0&&t<=1?n+t*i:NaN},a.min(t).max(e)},jr=function(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-a*t,a]};function Nr(t,e,n,r){t=t.filter(function(t){var r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i}),r&&t.sort(function(t,n){return e(t)-e(n)});var i=new Float64Array(t.length),a=new Float64Array(t.length),o=0,s=!0,u=!1,l=void 0;try{for(var c,f=t[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;i[o]=e(d),a[o]=n(d),++o}}catch(h){u=!0,l=h}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return[i,a]}function zr(t,e,n,r){var i,a,o=-1,s=-1,u=!0,l=!1,c=void 0;try{for(var f,d=t[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;i=e(h,++o,t),a=n(h,o,t),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++s)}}catch(p){l=!0,c=p}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}}var Ir=function(t,e,n,r,i){var a=0,o=0;return zr(t,e,n,function(t,e){var n=e-i(t),s=e-r;a+=n*n,o+=s*s}),1-a/o},Br=function(t,e,n){var r=0,i=0,a=0,o=0,s=0;zr(t,e,n,function(t,e){r+=t,i+=e,a+=t*e,o+=t*t,++s});var u=jr(r/s,i/s,a/s,o/s),l=function(t){return u[0]+u[1]*t};return{coef:u,predict:l,rSquared:Ir(t,e,n,i/s,l)}},qr=function(t,e,n){var r=0,i=0,a=0,o=0,s=0;zr(t,e,n,function(t,e){t=Math.log(t),r+=t,i+=e,a+=t*e,o+=t*t,++s});var u=jr(r/s,i/s,a/s,o/s),l=function(t){return u[0]+u[1]*Math.log(t)};return{coef:u,predict:l,rSquared:Ir(t,e,n,i/s,l)}},Ur=function(t,e,n){var r=0,i=0,a=0,o=0,s=0,u=0;zr(t,e,n,function(t,e){var n=Math.log(e),l=t*e;r+=e,a+=l,s+=t*l,i+=e*n,o+=l*n,++u});var l=jr(a/r,i/r,o/r,s/r),c=function(t){return l[0]*Math.exp(l[1]*t)};return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:Ir(t,e,n,r/u,c)}},Hr=function(t,e,n){var r=0,i=0,a=0,o=0,s=0,u=0;zr(t,e,n,function(t,e){var n=Math.log(t),l=Math.log(e);r+=n,i+=l,a+=n*l,o+=n*n,s+=e,++u});var l=jr(r/u,i/u,a/u,o/u),c=function(t){return l[0]*Math.pow(t,l[1])};return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:Ir(t,e,n,s/u,c)}},Wr=function(t,e,n){var r=0,i=0,a=0,o=0,s=0,u=0,l=0,c=0;zr(t,e,n,function(t,e){var n=t*t;r+=t,i+=e,a+=n,o+=n*t,s+=n*n,u+=t*e,l+=n*e,++c});var f=a-r*r/c,d=o-a*r/c,h=s-a*a/c,p=f*h-d*d,v=((l-=a*(i/=c))*f-(u-=r*i)*d)/p,g=(u*h-l*d)/p,m=i-g*(r/c)-v*(a/c),y=function(t){return v*t*t+g*t+m};return{coef:[m,g,v],predict:y,rSquared:Ir(t,e,n,i,y)}},Gr=n(10),Vr=function(t,e,n,r){if(1===r)return Br(t,e,n);if(2===r)return Wr(t,e,n);var i,a,o,s,u,l=Nr(t,e,n),c=Object(Gr.a)(l,2),f=c[0],d=c[1],h=f.length,p=[],v=[],g=r+1,m=0;for(i=0;i<h;++i)m+=d[i];for(i=0;i<g;++i){for(o=0,s=0;o<h;++o)s+=Math.pow(f[o],i)*d[o];for(p.push(s),u=new Float64Array(g),a=0;a<g;++a){for(o=0,s=0;o<h;++o)s+=Math.pow(f[o],i+a);u[a]=s}v.push(u)}v.push(p);var y=function(t){var e,n,r,i,a,o=t.length-1,s=[];for(e=0;e<o;++e){for(i=e,n=e+1;n<o;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<o+1;++r)a=t[r][e],t[r][e]=t[r][i],t[r][i]=a;for(n=e+1;n<o;++n)for(r=o;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=t[r][n]*s[r];s[n]=(t[o][n]-a)/t[n][n]}return s}(v),b=function(t){for(var e=0,n=0,r=y.length;n<r;++n)e+=y[n]*Math.pow(t,n);return e};return{coef:y,predict:b,rSquared:Ir(t,e,n,m/h,b)}};function Yr(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ar;r>n;){if(r-n>600){var a=r-n+1,o=e-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1);Yr(t,e,Math.max(n,Math.floor(e-o*u/a+l)),Math.min(r,Math.floor(e+(a-o)*u/a+l)),i)}var c=t[e],f=n,d=r;for(Zr(t,n,e),i(t[r],c)>0&&Zr(t,n,r);f<d;){for(Zr(t,f,d),++f,--d;i(t[f],c)<0;)++f;for(;i(t[d],c)>0;)--d}0===i(t[n],c)?Zr(t,n,d):Zr(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}return t}function Zr(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}var Xr=function(t,e){if((t=Float64Array.from(Tr(t,e))).length){var n=t.length,r=n>>1;return Yr(t,r-1,0),0===(1&n)&&Yr(t,r,r),Sr(t,.5)}},$r=function(t,e,n,r){for(var i=Nr(t,e,n,!0),a=Object(Gr.a)(i,2),o=a[0],s=a[1],u=o.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1),h=-1;++h<=2;){for(var p=[0,l-1],v=0;v<u;++v){for(var g=o[v],m=p[0],y=p[1],b=g-o[m]>o[y]-g?m:y,_=0,x=0,w=0,A=0,k=0,M=1/Math.abs(o[b]-g||1),T=m;T<=y;++T){var S=o[T],C=s[T],E=Jr(Math.abs(g-S)*M)*d[T],O=S*E;_+=E,x+=O,w+=C*E,A+=C*O,k+=S*O}var P=jr(x/_,w/_,A/_,k/_),L=Object(Gr.a)(P,2),R=L[0],D=L[1];c[v]=R+D*g,f[v]=Math.abs(s[v]-c[v]),Kr(o,v+1,p)}if(2===h)break;var F=Xr(f);if(Math.abs(F)<1e-12)break;for(var j,N,z=0;z<u;++z)j=f[z]/(6*F),d[z]=j>=1?1e-12:(N=1-j*j)*N}return function(t,e){for(var n,r=t.length,i=[],a=0,o=0,s=[];a<r;++a)n=t[a],s[0]===n?s[1]+=(e[a]-s[1])/++o:(o=0,s=[n,e[a]],i.push(s));return i}(o,c)};function Jr(t){return(t=1-t*t*t)*t*t}function Kr(t,e,n){var r=t[e],i=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>i&&t[a]-r<=r-t[i];)n[0]=++i,n[1]=a,++a}var Qr=.1*Math.PI/180,ti=function(t,e,n,r){n=n||25,r=Math.max(n,r||200);var i=function(e){return[e,t(e)]},a=e[0],o=e[1],s=o-a,u=s/r,l=[i(a)],c=[];if(n===r){for(var f=1;f<r;++f)l.push(i(a+f/n*s));return l.push(i(o)),l}c.push(i(o));for(var d=n;--d>0;)c.push(i(a+d/n*s));for(var h=l[0],p=c[c.length-1];p;){var v=i((h[0]+p[0])/2);v[0]-h[0]>=u&&ei(h,v,p)>Qr?c.push(v):(h=p,l.push(p),c.pop()),p=c[c.length-1]}return l};function ei(t,e,n){var r=Math.atan2(n[1]-t[1],n[0]-t[0]),i=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(r-i)}function ni(t){this._key=t?Object(p.t)(t):b,this.reset()}var ri=ni.prototype;function ii(t){rr.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ri.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},ri.add=function(t){this._add.push(t)},ri.rem=function(t){this._rem.push(t)},ri.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,a=this._key,o=r.length,s=i.length,u=Array(o-s),l={};for(t=0;t<s;++t)l[a(i[t])]=1;for(t=0,e=0;t<o;++t)l[a(n=r[t])]?l[a(n)]=0:u[e++]=n;return this._rem=[],this._add=u},ri.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},a=0;--r>=0;)e=t(n[r])+"",i.hasOwnProperty(e)||(i[e]=1,++a);return a},ri.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=Object(p.q)(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},ri.argmin=function(t){return this.extent(t)[0]||{}},ri.argmax=function(t){return this.extent(t)[1]||{}},ri.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):void 0},ri.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):void 0},ri.quartile=function(t){return this._get===t&&this._q||(this._q=Er(this.values(),t),this._get=t),this._q},ri.q1=function(t){return this.quartile(t)[0]},ri.q2=function(t){return this.quartile(t)[1]},ri.q3=function(t){return this.quartile(t)[2]},ri.ci=function(t){return this._get===t&&this._ci||(this._ci=Cr(this.values(),1e3,.05,t),this._get=t),this._ci},ri.ci0=function(t){return this.ci(t)[0]},ri.ci1=function(t){return this.ci(t)[1]},ii.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:fr},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var ai=Object(p.y)(ii,rr);function oi(t){rr.call(this,null,t)}ai.transform=function(t,e){var n,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),i.modifies(this._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},ai.cross=function(){var t=this,e=t.value,n=t._dnames,r=n.map(function(){return{}}),i=n.length;function a(t){var e,a,o,s;for(e in t)for(o=t[e].tuple,a=0;a<i;++a)r[a][s=o[n[a]]]=s}a(t._prev),a(e),function a(o,s,u){var l,c,f=n[u],d=r[u++];for(l in d)s[f]=d[l],c=o?o+"|"+l:l,u<i?a(c,s,u):e[c]||t.cell(c,s)}("",{},0)},ai.init=function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(t){for(var n,i=Object(p.i)(Object(p.g)(t)),a=0,o=i.length;a<o;++a)r[n=i[a]]||(r[n]=1,e.push(n))}this._dims=Object(p.i)(t.groupby),this._dnames=this._dims.map(function(t){var e=Object(p.h)(t);return i(t),n.push(e),e}),this.cellkey=t.key?t.key:ur(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,s,u,l,c,f=t.fields||[null],d=t.ops||["count"],h=t.as||[],v=f.length,g={};for(v!==d.length&&Object(p.n)("Unmatched number of fields and aggregate ops."),c=0;c<v;++c)a=f[c],o=d[c],null==a&&"count"!==o&&Object(p.n)("Null aggregate field specified."),l=lr(o,u=Object(p.h)(a),h[c]),n.push(l),"count"!==o?((s=g[u])||(i(a),(s=g[u]=[]).field=a,this._measures.push(s)),"count"!==o&&(this._countOnly=!1),s.push(dr(o,l))):this._counts.push(l);return this._measures=this._measures.map(function(t){return vr(t,t.field)}),{}},ai.cellkey=ur(),ai.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},ai.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new ni),n},ai.newtuple=function(t,e){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](t);return e?k(e.tuple,o):x(o)},ai.add=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(t),n=0,r=(e=a.agg).length;n<r;++n)e[n].add(e[n].get(t),t)},ai.rem=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(t),n=0,r=(e=a.agg).length;n<r;++n)e[n].rem(e[n].get(t),t)},ai.celltuple=function(t){var e,n,r,i=t.tuple,a=this._counts;for(t.store&&t.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=t.num;if(!this._countOnly)for(n=0,r=(e=t.agg).length;n<r;++n)e[n].set(i);return i},ai.changes=function(t){var e,n,r,i,a=this._adds,o=this._mods,s=this._prev,u=this._drop,l=t.add,c=t.rem,f=t.mod;if(s)for(n in s)e=s[n],u&&!e.num||c.push(e.tuple);for(r=0,i=this._alen;r<i;++r)l.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=o[r]).num&&u?c:f).push(this.celltuple(e)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t},oi.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var si=Object(p.y)(oi,rr);si.transform=function(t,e){var n,r=this._bins(t),i=r.start,a=r.step,o=t.as||["bin0","bin1"],s=o[0],u=o[1];return n=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(Object(p.g)(t.field))?e.ADD_MOD:e.ADD,e.visit(n,function(t){var e=r(t);t[s]=e,t[u]=null==e?null:i+a*(1+(e-i)/a)}),e.modifies(o)},si._bins=function(t){if(this.value&&!t.modified())return this.value;var e,n,r=t.field,i=gr(t),a=i.start,o=i.stop,s=i.step;null!=(e=t.anchor)&&(n=e-(a+s*Math.floor((e-a)/s)),a+=n,o+=n);var u=function(t){var e=r(t);return null==e?null:(e=Math.max(a,Math.min(+e,o-s)),a+s*Math.floor((e-a)/s))};return u.start=a,u.stop=o,u.step=s,this.value=Object(p.f)(u,Object(p.g)(r),t.name||"bin_"+Object(p.h)(r))};var ui=function(t,e,n){var r=t,i=e||[],a=n||[],o={},s=0;return{add:function(t){a.push(t)},remove:function(t){o[r(t)]=++s},size:function(){return i.length},data:function(t,e){return s&&(i=i.filter(function(t){return!o[r(t)]}),o={},s=0),e&&t&&i.sort(t),a.length&&(i=t?Object(p.L)(t,i,a.sort(t)):i.concat(a),a=[]),i}}};function li(t){rr.call(this,[],t)}function ci(t){L.call(this,null,fi,t)}function fi(t){return this.value&&!t.modified()?this.value:Object(p.k)(t.fields,t.orders)}function di(t){rr.call(this,null,t)}li.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(p.y)(li,rr).transform=function(t,e){var n=e.fork(e.ALL),r=ui(b,this.value,n.materialize(n.ADD).add),i=t.sort,a=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),e.source&&e.source.root&&(this.value.root=e.source.root),n},Object(p.y)(ci,L),di.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var hi=Object(p.y)(di,rr);function pi(t){rr.call(this,null,t)}hi.transform=function(t,e){function n(e){return function(n){for(var r,i=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(s(n),t.case,a)||[],u=0,l=i.length;u<l;++u)o.test(r=i[u])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,a=this._match,o=this._stop,s=t.field,u=t.as||["text","count"],l=n(function(t){i[t]=1+(i[t]||0)}),c=n(function(t){i[t]-=1});return r?e.visit(e.SOURCE,l):(e.visit(e.ADD,l),e.visit(e.REM,c)),this._finish(e,u)},hi._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},hi._finish=function(t,e){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),s=e[0],u=e[1],l=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=x({}),r[s]=n,r[u]=i,l.add.push(r)):0===i?(r&&l.rem.push(r),a[n]=null,o[n]=null):r[u]!==i&&(r[u]=i,l.mod.push(r));return l.modifies(e)},pi.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(p.y)(pi,rr).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],a=i[0],o=i[1];return!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter")?(r&&(n.rem=r),r=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,r){for(var i,a,o=[],s={},u=t.length,l=0;l<u;++l)for(s[e]=a=t[l],i=0;i<u;++i)s[n]=t[i],r(s)&&(o.push(x(s)),(s={})[e]=a);return o}(r,a,o,t.filter||p.eb)):n.mod=r,n.source=this.value,n.modifies(i)};var vi={kde:Rr,mixture:Dr,normal:Lr,uniform:Fr},gi="distributions",mi="function",yi="field";var bi=function(t,e){var n,r;if(void 0===e){var i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;null!=l&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}}catch(m){a=!0,o=m}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var c=-1,f=!0,d=!1,h=void 0;try{for(var p,v=t[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;null!=(g=e(g,++c,t))&&(void 0===n?g>=g&&(n=r=g):(n>g&&(n=g),r<g&&(r=g)))}}catch(m){d=!0,h=m}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}}return[n,r]},_i=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a};function xi(t){rr.call(this,null,t)}var wi=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Ai={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:wi},{name:"weights",type:"number",array:!0}]};function ki(t){L.call(this,null,Mi,t),this.modified(!0)}function Mi(t){var e=t.expr;return this.value&&!t.modified("expr")?this.value:Object(p.f)(function(n){return e(n,t)},Object(p.g)(e),Object(p.h)(e))}function Ti(t){rr.call(this,[void 0,void 0],t)}function Si(t,e){L.call(this,t),this.parent=e}xi.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:wi.concat(Ai)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(p.y)(xi,rr).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=function t(e,n){var r=e[mi];vi.hasOwnProperty(r)||Object(p.n)("Unknown distribution function: "+r);var i=vi[r]();for(var a in e)a===yi?i.data((e.from||n()).map(e[a])):a===gi?i[a](e[a].map(function(e){return t(e,n)})):typeof i[a]===mi&&i[a](e[a]);return i}(t.distribution,function(t){return function(){return t.materialize(t.SOURCE).source}}(e)),i=t.method||"pdf";"pdf"!==i&&"cdf"!==i&&Object(p.n)("Invalid density method: "+i),t.extent||r.data||Object(p.n)("Missing density extent parameter."),i=r[i];var a=t.as||["value","density"],o=t.extent||bi(r.data()),s=(o[1]-o[0])/(t.steps||100),u=_i(o[0],o[1]+s/2,s).map(function(t){var e={};return e[a[0]]=t,e[a[1]]=i(t),x(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n},Object(p.y)(ki,L),Ti.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(p.y)(Ti,rr).transform=function(t,e){var n,r=this.value,i=t.field,a=r[0],o=r[1];((n=e.changed()||e.modified(i.fields)||t.modified("field"))||null==a)&&(a=1/0,o=-1/0),e.visit(n?e.SOURCE:e.ADD,function(t){var e=i(t);null!=e&&((e=+e)<a&&(a=e),e>o&&(o=e))}),isFinite(a)&&isFinite(o)||(a=o=void 0),this.value=[a,o]};var Ci=Object(p.y)(Si,L);function Ei(t){rr.call(this,{},t),this._keys=Object(p.s)();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}Ci.connect=function(t){return this.targets().add(t),t.source=this},Ci.add=function(t){this.value.add.push(t)},Ci.rem=function(t){this.value.rem.push(t)},Ci.mod=function(t){this.value.mod.push(t)},Ci.init=function(t){this.value.init(t,t.NO_SOURCE)},Ci.evaluate=function(){return this.value};var Oi=Object(p.y)(Ei,rr);function Pi(t){L.call(this,null,Li,t)}function Li(t){return this.value&&!t.modified()?this.value:Object(p.A)(t.name)?Object(p.i)(t.name).map(function(t){return Object(p.t)(t)}):Object(p.t)(t.name,t.as)}function Ri(t){rr.call(this,Object(p.s)(),t)}function Di(t,e){return t?t.map(function(t,n){return e[n]||Object(p.h)(t)}):null}function Fi(t){rr.call(this,[],t)}function ji(t){rr.call(this,[],t)}function Ni(t){rr.call(this,null,t)}function zi(t){rr.call(this,[],t)}Oi.activate=function(t){this._targets[this._targets.active++]=t},Oi.subflow=function(t,e,n,r){var i,a,o=this.value,s=o.hasOwnProperty(t)&&o[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[t])&&a.tuple,s=(i=n.dataflow).add(new Si(n.fork(n.NO_SOURCE),this)).connect(e(i,t,a)),o[t]=s,this.activate(s)),s},Oi.transform=function(t,e){var n=e.dataflow,r=this,i=t.key,a=t.subflow,o=this._keys,s=t.modified("key");function u(t){return r.subflow(t,a,e)}return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,function(t){var e=b(t),n=o.get(e);void 0!==n&&(o.delete(e),u(n).rem(t))}),e.visit(e.ADD,function(t){var e=i(t);o.set(b(t),e),u(e).add(t)}),s||e.modified(i.fields)?e.visit(e.MOD,function(t){var e=b(t),n=o.get(e),r=i(t);n===r?u(r).mod(t):(o.set(e,r),u(n).rem(t),u(r).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){u(o.get(b(t))).mod(t)}),s&&e.visit(e.REFLOW,function(t){var e=b(t),n=o.get(e),r=i(t);n!==r&&(o.set(e,r),u(n).rem(t),u(r).add(t))}),o.empty>n.cleanThreshold&&n.runAfter(o.clean),e},Object(p.y)(Pi,L),Ri.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(p.y)(Ri,rr).transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),a=i.add,o=i.rem,s=i.mod,u=t.expr,l=!0;function c(e){var n=b(e),i=u(e,t),c=r.get(n);i&&c?(r.delete(n),a.push(e)):i||c?l&&i&&!c&&s.push(e):(r.set(n,1),o.push(e))}return e.visit(e.REM,function(t){var e=b(t);r.has(e)?r.delete(e):o.push(t)}),e.visit(e.ADD,function(e){u(e,t)?a.push(e):r.set(b(e),1)}),e.visit(e.MOD,c),t.modified()&&(l=!1,e.visit(e.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},Fi.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},Object(p.y)(Fi,rr).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=Di(r,t.as||[]),a=i.length;return n.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,o,s,u=r.map(function(e){return e(t)}),l=u.reduce(function(t,e){return Math.max(t,e.length)},0),c=0;c<l;++c){for(o=w(t),e=0;e<a;++e)o[i[e]]=null==(s=u[e][c])?null:s;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},ji.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(p.y)(ji,rr).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(p.h),a=t.as||["key","value"],o=a[0],s=a[1],u=r.length;return n.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,a=0;a<u;++a)(e=w(t))[o]=i[a],e[s]=r[a](t),n.add.push(e)}),this.value=n.source=n.add,n.modifies(a)},Ni.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(p.y)(Ni,rr).transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),a=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(a,function(e){e[r]=n(e,t)})},Object(p.y)(zi,rr).transform=function(t,e){var n,r,i,a=this.value,o=e.fork(e.ALL),s=t.size-a.length,u=t.generator;if(s>0){for(n=[];--s>=0;)n.push(i=x(u(t))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-s),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-s);return o.source=this.value=a,o};var Ii={value:"value",median:Xr,mean:function(t,e){var n=0,r=0;if(void 0===e){var i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;null!=l&&(l=+l)>=l&&(++n,r+=l)}}catch(m){a=!0,o=m}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var c=-1,f=!0,d=!1,h=void 0;try{for(var p,v=t[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;null!=(g=e(g,++c,t))&&(g=+g)>=g&&(++n,r+=g)}}catch(m){d=!0,h=m}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}}if(n)return r/n},min:function(t,e){var n;if(void 0===e){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;null!=u&&(n>u||void 0===n&&u>=u)&&(n=u)}}catch(g){i=!0,a=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var l=-1,c=!0,f=!1,d=void 0;try{for(var h,p=t[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;null!=(v=e(v,++l,t))&&(n>v||void 0===n&&v>=v)&&(n=v)}}catch(g){f=!0,d=g}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}return n},max:function(t,e){var n;if(void 0===e){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;null!=u&&(n<u||void 0===n&&u>=u)&&(n=u)}}catch(g){i=!0,a=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var l=-1,c=!0,f=!1,d=void 0;try{for(var h,p=t[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;null!=(v=e(v,++l,t))&&(n<v||void 0===n&&v>=v)&&(n=v)}}catch(g){f=!0,d=g}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}return n}},Bi=[];function qi(t){rr.call(this,[],t)}function Ui(t){ii.call(this,t)}qi.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(p.y)(qi,rr).transform=function(t,e){var n,r,i,a,o,s,u,l,c,f,d=e.fork(e.ALL),h=function(t){var e,n=t.method||Ii.value;if(null!=Ii[n])return n===Ii.value?(e=void 0!==t.value?t.value:0,function(){return e}):Ii[n];Object(p.n)("Unrecognized imputation method: "+n)}(t),v=function(t){var e=t.field;return function(t){return t?e(t):NaN}}(t),g=Object(p.h)(t.field),m=Object(p.h)(t.key),y=(t.groupby||[]).map(p.h),b=function(t,e,n,r){var i,a,o,s,u,l,c,f,d=function(t){return t(f)},h=[],p=r?r.slice():[],v={},g={};for(p.forEach(function(t,e){v[t]=e+1}),s=0,c=t.length;s<c;++s)f=t[s],l=n(f),u=v[l]||(v[l]=p.push(l)),a=(i=e?e.map(d):Bi)+"",(o=g[a])||(o=g[a]=[],h.push(o),o.values=i),o[u-1]=f;return h.domain=p,h}(e.source,t.groupby,t.key,t.keyvals),_=[],w=this.value,A=b.domain.length;for(o=0,l=b.length;o<l;++o)for(i=(n=b[o]).values,r=NaN,u=0;u<A;++u)if(null==n[u]){for(a=b.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[y[s]]=i[s];f[m]=a,f[g]=isNaN(r)?r=h(n,v):r,_.push(x(f))}return _.length&&(d.add=d.materialize(d.ADD).add.concat(_)),w.length&&(d.rem=d.materialize(d.REM).rem.concat(w)),this.value=_,d},Ui.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:fr},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Hi=Object(p.y)(Ui,ii);function Wi(t){L.call(this,null,Gi,t)}function Gi(t){return this.value&&!t.modified()?this.value:Object(p.I)(t.fields,t.flat)}function Vi(t){rr.call(this,null,t)}function Yi(t){rr.call(this,{},t)}function Zi(t){L.call(this,null,Xi,t)}function Xi(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,a=-1/0,o=t.extents;for(e=0,n=o.length;e<n;++e)(r=o[e])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function $i(t){L.call(this,null,Ji,t)}function Ji(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(t,e){return t.concat(e)},[])}function Ki(t){rr.call(this,null,t)}function Qi(t){ii.call(this,t)}Hi.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(n=r.value=r.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),r.changes(),e.visit(e.SOURCE,function(t){Object(p.o)(t,n[r.cellkey(t)].tuple)}),e.reflow(i).modifies(this._outputs)},Hi.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},Object(p.y)(Wi,L),Object(p.y)(Vi,rr).transform=function(t,e){e.dataflow.request(this.target,t.url,t.format)},Yi.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(p.y)(Yi,rr).transform=function(t,e){var n,r,i=e,a=t.as,o=t.fields,s=t.index,u=t.values,l=null==t.default?null:t.default,c=t.modified(),f=c?e.SOURCE:e.ADD,d=o.length;return u?(r=u.length,d>1&&!a&&Object(p.n)('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*r&&Object(p.n)('The "as" parameter has too few output field names.'),a=a||u.map(p.h),n=function(t){for(var e,n,i=0,c=0;i<d;++i)if(null==(n=s.get(o[i](t))))for(e=0;e<r;++e,++c)t[a[c]]=l;else for(e=0;e<r;++e,++c)t[a[c]]=u[e](n)}):(a||Object(p.n)("Missing output field names."),n=function(t){for(var e,n=0;n<d;++n)e=s.get(o[n](t)),t[a[n]]=null==e?l:e}),c?i=e.reflow(!0):f|=o.some(function(t){return e.modified(t.fields)})?e.MOD:0,e.visit(f,n),i.modifies(a)},Object(p.y)(Zi,L),Object(p.y)($i,L),Object(p.y)(Ki,rr),Ki.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},Qi.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:fr,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var ta=Object(p.y)(Qi,ii);function ea(t){Ei.call(this,t)}function na(t){rr.call(this,null,t)}function ra(t){rr.call(this,null,t)}function ia(t){rr.call(this,null,t)}function aa(t){rr.call(this,[],t),this.count=0}function oa(t){rr.call(this,null,t)}function sa(t){rr.call(this,null,t),this.modified(!0)}function ua(t){rr.call(this,Object(p.s)(),t)}function la(t){rr.call(this,null,t)}ta._transform=ta.transform,ta.transform=function(t,e){return this._transform(function(t,e){var n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",a=Object(p.g)(n).concat(Object(p.g)(r)),o=function(t,e,n){var r={},i=[];return n.visit(n.SOURCE,function(e){var n=t(e);r[n]||(r[n]=1,i.push(n))}),i.sort(function(t,e){return(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0)}),e?i.slice(0,e):i}(n,t.limit||0,e);return{key:t.key,groupby:t.groupby,ops:o.map(function(){return i}),fields:o.map(function(t){return function(t,e,n,r){return Object(p.f)(function(r){return e(r)===t?n(r):NaN},r,t+"")}(t,n,r,a)}),as:o.map(function(t){return t+""}),modified:t.modified.bind(t)}}(t,e),e)},Object(p.y)(ea,Ei).transform=function(t,e){var n=this,r=t.subflow,i=t.field;return(t.modified("field")||i&&e.modified(Object(p.g)(i)))&&Object(p.n)("PreFacet does not support field modification."),this._targets.active=0,e.visit(e.MOD,function(t){var a=n.subflow(b(t),r,e,t);i?i(t).forEach(function(t){a.mod(t)}):a.mod(t)}),e.visit(e.ADD,function(t){var a=n.subflow(b(t),r,e,t);i?i(t).forEach(function(t){a.add(x(t))}):a.add(t)}),e.visit(e.REM,function(t){var a=n.subflow(b(t),r,e,t);i?i(t).forEach(function(t){a.rem(t)}):a.rem(t)}),e},na.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(p.y)(na,rr).transform=function(t,e){var n,r,i=t.fields,a=Di(t.fields,t.as||[]),o=i?function(t,e){return function(t,e,n,r){for(var i=0,a=n.length;i<a;++i)e[r[i]]=n[i](t);return e}(t,e,i,a)}:A;return this.value?r=this.value:(e=e.addAll(),r=this.value={}),n=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=b(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,function(t){var e=o(t,x({}));r[b(t)]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(o(t,r[b(t)]))}),n},Object(p.y)(ra,rr).transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},Object(p.y)(ia,rr).transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=b(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,function(t){var e=w(t);r[b(t)]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(A(t,r[b(t)]))})),n},aa.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(p.y)(aa,rr).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,a=this.value,o=this.count,s=0,u=a.reduce(function(t,e){return t[b(e)]=1,t},{});function l(t){var e,r;a.length<i?a.push(t):(r=~~((o+1)*xr()))<a.length&&r>=s&&(e=a[r],u[b(e)]&&n.rem.push(e),a[r]=t),++o}if(e.rem.length&&(e.visit(e.REM,function(t){var e=b(t);u[e]&&(u[e]=-1,n.rem.push(t)),--o}),a=a.filter(function(t){return-1!==u[b(t)]})),(e.rem.length||r)&&a.length<i&&e.source&&(s=o=a.length,e.visit(e.SOURCE,function(t){u[b(t)]||l(t)}),s=-1),r&&a.length>i){for(var c=0,f=a.length-i;c<f;++c)u[b(a[c])]=-1,n.rem.push(a[c]);a=a.slice(f)}return e.mod.length&&e.visit(e.MOD,function(t){u[b(t)]&&n.mod.push(t)}),e.add.length&&e.visit(e.ADD,l),(e.add.length||s<0)&&(n.add=a.filter(function(t){return!u[b(t)]})),this.count=o,this.value=n.source=a,n},oa.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(p.y)(oa,rr).transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=_i(t.start,t.stop,t.step||1).map(function(t){var e={};return e[r]=t,x(e)}),n.add=e.add.concat(this.value),n}},Object(p.y)(sa,rr).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},Object(p.y)(ua,rr).transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,a=!0;function o(t){i.set(r(t),t)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,function(t){i.delete(r(t))}),e.visit(e.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()},Object(p.y)(la,rr).transform=function(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};var ca={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=ca.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){(e=+e)>0||Object(p.n)("ntile num must be greater than zero.");var n=ca.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return(e=+e)>0||Object(p.n)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}}},fa=Object.keys(ca);function da(t){var e=Object(p.i)(t.ops),n=Object(p.i)(t.fields),r=Object(p.i)(t.params),i=Object(p.i)(t.as),a=this.outputs=[],o=this.windows=[],s={},u={},l=!0,c=[],f=[];function d(t){Object(p.i)(Object(p.g)(t)).forEach(function(t){s[t]=1})}d(t.sort),e.forEach(function(t,e){var s=n[e],h=Object(p.h)(s),v=lr(t,h,i[e]);if(d(s),a.push(v),ca.hasOwnProperty(t))o.push(function(t,e,n,r){var i=ca[t](e,n);return{init:i.init||p.hb,update:function(t,e){e[r]=i.next(t)}}}(t,n[e],r[e],v));else{if(null==s&&"count"!==t&&Object(p.n)("Null aggregate field specified."),"count"===t)return void c.push(v);l=!1;var g=u[h];g||((g=u[h]=[]).field=s,f.push(g)),g.push(dr(t,v))}}),(c.length||f.length)&&(this.cell=function(t,e,n){t=t.map(function(t){return vr(t,t.field)});var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new t[o](r);if(r.store)var s=r.data=new ni;return r.add=function(t){if(r.num+=1,!n){s&&s.add(t);for(var e=0;e<i;++e)a[e].add(a[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){s&&s.rem(t);for(var e=0;e<i;++e)a[e].rem(a[e].get(t),t)}},r.set=function(t){var i,o;for(s&&s.values(),i=0,o=e.length;i<o;++i)t[e[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(t)},r.init=function(){r.num=0,s&&s.reset();for(var t=0;t<i;++t)a[t].init()},r}(f,c,l)),this.inputs=Object.keys(s)}var ha=da.prototype;ha.init=function(){this.windows.forEach(function(t){t.init()}),this.cell&&this.cell.init()},ha.update=function(t,e){var n,r=this.cell,i=this.windows,a=t.data,o=i&&i.length;if(r){for(n=t.p0;n<t.i0;++n)r.rem(a[n]);for(n=t.p1;n<t.i1;++n)r.add(a[n]);r.set(e)}for(n=0;n<o;++n)i[n].update(t,e)};var pa=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Ar(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};function va(t){rr.call(this,{},t),this._mlen=0,this._mods=[]}va.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:fa.concat(fr)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var ga=Object(p.y)(va,rr);function ma(t,e,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=t.data(r),s=o.length,u=0,l=i?pa(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||Object(p.l)(-1)};for(e.init();u<s;++u)ya(c,a,u,s),i&&ba(c,l),e.update(c,o[u])}function ya(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function ba(t,e){var n=t.i0,r=t.i1-1,i=t.compare,a=t.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(t.i0=e.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(t.i1=e.right(a,a[r]))}ga.transform=function(t,e){var n,r,i=this,a=i.state,o=t.modified();this.stamp=e.stamp,a&&!o||(a=i.state=new da(t));var s=ur(t.groupby);function u(t){return i.group(s(t))}for(o||e.modified(a.inputs)?(i.value={},e.visit(e.SOURCE,function(t){u(t).add(t)})):(e.visit(e.REM,function(t){u(t).remove(t)}),e.visit(e.ADD,function(t){u(t).add(t)})),n=0,r=i._mlen;n<r;++n)ma(i._mods[n],a,t);return i._mlen=0,i._mods=[],e.reflow(o).modifies(a.outputs)},ga.group=function(t){var e=this.value[t];return e||((e=this.value[t]=ui(b)).stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e};var _a="top",xa="left",wa="right",Aa="bottom",ka="top-left",Ma="top-right",Ta="bottom-left",Sa="bottom-right",Ca="start",Ea="end",Oa="group",Pa="axis",La="title",Ra="frame",Da="scope",Fa="legend",ja="row-header",Na="row-footer",za="row-title",Ia="column-header",Ba="column-footer",qa="column-title",Ua="padding",Ha="symbol",Wa="fit",Ga="fit-x",Va="fit-y",Ya="pad",Za="none",Xa="all",$a="each",Ja="flush",Ka="column",Qa="row";function to(t){this.clear(),t&&this.union(t)}var eo=to.prototype;eo.clone=function(){return new to(this)},eo.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},eo.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},eo.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},eo.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},eo.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},eo.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},eo.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},eo.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t),a=e-e*r+n*i,o=n-e*i-n*r,s=this.x1,u=this.x2,l=this.y1,c=this.y2;return this.clear().add(r*s-i*l+a,i*s+r*l+o).add(r*s-i*c+a,i*s+r*c+o).add(r*u-i*l+a,i*u+r*l+o).add(r*u-i*c+a,i*u+r*c+o)},eo.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},eo.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},eo.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},eo.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},eo.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},eo.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},eo.width=function(){return this.x2-this.x1},eo.height=function(){return this.y2-this.y1};var no=0,ro=function(t,e){var n,r=[];return n={id:"gradient_"+no++,x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}};function io(t){this.mark=t,this.bounds=this.bounds||new to}function ao(t){io.call(this,t),this.items=this.items||[]}function oo(t,e){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}function so(){return"undefined"!==typeof Image?Image:null}function uo(t){this._pending=0,this._loader=t||q()}Object(p.y)(ao,io);var lo=uo.prototype;function co(t){t._pending+=1}function fo(t){t._pending-=1}lo.pending=function(){return this._pending},lo.sanitizeURL=function(t){var e=this;return co(e),e._loader.sanitize(t,{context:"href"}).then(function(t){return fo(e),t}).catch(function(){return fo(e),null})},lo.loadImage=function(t){var e=this,n=so();return co(e),e._loader.sanitize(t,{context:"image"}).then(function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){fo(e),i.loaded=!0},i.onerror=function(){fo(e),i.loaded=!1},i.src=r,i}).catch(function(t){return fo(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}})},lo.ready=function(){var t=this;return new Promise(function(e){!function n(r){t.pending()?setTimeout(function(){n(!0)},10):e(r)}(!1)})};var ho=Math.PI,po=2*ho,vo=po-1e-6;function go(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function mo(){return new go}go.prototype=mo.prototype={constructor:go,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,l=a-t,c=o-e,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var d=n-a,h=r-o,p=s*s+u*u,v=d*d+h*h,g=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((ho-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,_=y/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*l)+","+(e+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=t+_*s)+","+(this._y1=e+_*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+o,l=e+s,c=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%po+po),f>vo?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=ho)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var yo=mo,bo=function(t){return function(){return t}},_o=Math.abs,xo=Math.atan2,wo=Math.cos,Ao=Math.max,ko=Math.min,Mo=Math.sin,To=Math.sqrt,So=1e-12,Co=Math.PI,Eo=Co/2,Oo=2*Co;function Po(t){return t>=1?Eo:t<=-1?-Eo:Math.asin(t)}function Lo(t){return t.innerRadius}function Ro(t){return t.outerRadius}function Do(t){return t.startAngle}function Fo(t){return t.endAngle}function jo(t){return t&&t.padAngle}function No(t,e,n,r,i,a,o){var s=t-n,u=e-r,l=(o?a:-a)/To(s*s+u*u),c=l*u,f=-l*s,d=t+c,h=e+f,p=n+c,v=r+f,g=(d+p)/2,m=(h+v)/2,y=p-d,b=v-h,_=y*y+b*b,x=i-a,w=d*v-p*h,A=(b<0?-1:1)*To(Ao(0,x*x*_-w*w)),k=(w*b-y*A)/_,M=(-w*y-b*A)/_,T=(w*b+y*A)/_,S=(-w*y+b*A)/_,C=k-g,E=M-m,O=T-g,P=S-m;return C*C+E*E>O*O+P*P&&(k=T,M=S),{cx:k,cy:M,x01:-c,y01:-f,x11:k*(i/x-1),y11:M*(i/x-1)}}function zo(t){this._context=t}zo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Io=function(t){return new zo(t)};function Bo(t){return t[0]}function qo(t){return t[1]}var Uo=function(){var t=Bo,e=qo,n=bo(!0),r=null,i=Io,a=null;function o(o){var s,u,l,c=o.length,f=!1;for(null==r&&(a=i(l=yo())),s=0;s<=c;++s)!(s<c&&n(u=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,s,o),+e(u,s,o));if(l)return a=null,l+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:bo(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:bo(+t),o):e},o.defined=function(t){return arguments.length?(n="function"===typeof t?t:bo(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},Ho=function(){var t=Bo,e=null,n=bo(0),r=qo,i=bo(!0),a=null,o=Io,s=null;function u(u){var l,c,f,d,h,p=u.length,v=!1,g=new Array(p),m=new Array(p);for(null==a&&(s=o(h=yo())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===v)if(v=!v)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(g[f],m[f]);s.lineEnd(),s.areaEnd()}v&&(g[l]=+t(d,l,u),m[l]=+n(d,l,u),s.point(e?+e(d,l,u):g[l],r?+r(d,l,u):m[l]))}if(h)return s=null,h+""||null}function l(){return Uo().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t="function"===typeof n?n:bo(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:bo(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:bo(+t),u):e},u.y=function(t){return arguments.length?(n="function"===typeof t?t:bo(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"===typeof t?t:bo(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:bo(+t),u):r},u.lineX0=u.lineY0=function(){return l().x(t).y(n)},u.lineY1=function(){return l().x(t).y(r)},u.lineX1=function(){return l().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:bo(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u};Go(Io);function Wo(t){this._curve=t}function Go(t){function e(e){return new Wo(t(e))}return e._curve=t,e}Wo.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};Array.prototype.slice;var Vo={draw:function(t,e){var n=Math.sqrt(e/Co);t.moveTo(n,0),t.arc(0,0,n,0,Oo)}},Yo=(Math.sqrt(1/3),Math.sin(Co/10)/Math.sin(7*Co/10)),Zo=(Math.sin(Oo/10),Math.cos(Oo/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function Xo(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $o(t){this._context=t}$o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xo(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Jo(t){this._context=t}Jo.prototype={areaStart:Zo,areaEnd:Zo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xo(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ko(t){this._context=t}Ko.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xo(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Qo(t,e){this._basis=new $o(t),this._beta=e}Qo.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*o),this._beta*e[u]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ts=function t(e){function n(t){return 1===e?new $o(t):new Qo(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function es(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ns(t,e){this._context=t,this._k=(1-e)/6}ns.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:es(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:es(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var rs=function t(e){function n(t){return new ns(t,e)}return n.tension=function(e){return t(+e)},n}(0);function is(t,e){this._context=t,this._k=(1-e)/6}is.prototype={areaStart:Zo,areaEnd:Zo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:es(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var as=function t(e){function n(t){return new is(t,e)}return n.tension=function(e){return t(+e)},n}(0);function os(t,e){this._context=t,this._k=(1-e)/6}os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:es(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ss=function t(e){function n(t){return new os(t,e)}return n.tension=function(e){return t(+e)},n}(0);function us(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>So){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>So){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function ls(t,e){this._context=t,this._alpha=e}ls.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:us(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var cs=function t(e){function n(t){return e?new ls(t,e):new ns(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function fs(t,e){this._context=t,this._alpha=e}fs.prototype={areaStart:Zo,areaEnd:Zo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:us(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ds=function t(e){function n(t){return e?new fs(t,e):new is(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function hs(t,e){this._context=t,this._alpha=e}hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:us(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ps=function t(e){function n(t){return e?new hs(t,e):new os(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function vs(t){this._context=t}vs.prototype={areaStart:Zo,areaEnd:Zo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function gs(t){return t<0?-1:1}function ms(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(gs(a)+gs(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function ys(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function bs(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function _s(t){this._context=t}function xs(t){this._context=new ws(t)}function ws(t){this._context=t}function As(t){this._context=t}function ks(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}_s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bs(this,this._t0,ys(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,bs(this,ys(this,n=ms(this,t,e)),n);break;default:bs(this,this._t0,n=ms(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(xs.prototype=Object.create(_s.prototype)).point=function(t,e){_s.prototype.point.call(this,e,t)},ws.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},As.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=ks(t),i=ks(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Ms(t,e){this._context=t,this._t=e}Ms.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Ts={basis:{curve:function(t){return new $o(t)}},"basis-closed":{curve:function(t){return new Jo(t)}},"basis-open":{curve:function(t){return new Ko(t)}},bundle:{curve:ts,tension:"beta",value:.85},cardinal:{curve:rs,tension:"tension",value:0},"cardinal-open":{curve:ss,tension:"tension",value:0},"cardinal-closed":{curve:as,tension:"tension",value:0},"catmull-rom":{curve:cs,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ds,tension:"alpha",value:.5},"catmull-rom-open":{curve:ps,tension:"alpha",value:.5},linear:{curve:Io},"linear-closed":{curve:function(t){return new vs(t)}},monotone:{horizontal:function(t){return new xs(t)},vertical:function(t){return new _s(t)}},natural:{curve:function(t){return new As(t)}},step:{curve:function(t){return new Ms(t,.5)}},"step-after":{curve:function(t){return new Ms(t,1)}},"step-before":{curve:function(t){return new Ms(t,0)}}};function Ss(t,e,n){var r=Ts.hasOwnProperty(t)&&Ts[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var Cs={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Es=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],Os=function(t){var e,n,r,i,a,o,s,u,l,c,f,d=[];for(u=0,c=(e=t.slice().replace(Es[0],"###$1").split(Es[1]).slice(1)).length;u<c;++u){for(r=(n=e[u]).slice(1).trim().replace(Es[2],"$1###$2").split(Es[3]),i=[o=n.charAt(0)],l=0,f=r.length;l<f;++l)(a=+r[l])===a&&i.push(a);if(s=Cs[o.toLowerCase()],i.length-1>s)for(l=1,f=i.length;l<f;l+=s)d.push([o].concat(i.slice(l,l+s)));else d.push(i)}return d},Ps={},Ls={},Rs=[].join;function Ds(t){var e=Rs.call(t);if(Ls[e])return Ls[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=l*o,f=-u*s,d=u*o,h=l*s,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*v,w=r+v+_*p,A=n+g,k=r+m,M=A+_*m,T=k-_*g;return Ls[e]=[c*x+f*w,d*x+h*w,c*M+f*T,d*M+h*T,c*A+f*k,d*A+h*k]}var Fs=["l",0,0,0,0,0,0,0];function js(t,e){var n=Fs[0]=t[0];if("a"===n||"A"===n)Fs[1]=e*t[1],Fs[2]=e*t[2],Fs[3]=t[3],Fs[4]=t[4],Fs[5]=t[5],Fs[6]=e*t[6],Fs[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)Fs[r]=e*t[r];return Fs}var Ns=function(t,e,n,r,i){var a,o,s,u,l,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var v=0,g=e.length;v<g;++v){switch(a=e[v],1!==i&&(a=js(a,i)),a[0]){case"l":f+=a[1],d+=a[2],t.lineTo(f+n,d+r);break;case"L":f=a[1],d=a[2],t.lineTo(f+n,d+r);break;case"h":f+=a[1],t.lineTo(f+n,d+r);break;case"H":f=a[1],t.lineTo(f+n,d+r);break;case"v":d+=a[1],t.lineTo(f+n,d+r);break;case"V":d=a[1],t.lineTo(f+n,d+r);break;case"m":f+=a[1],d+=a[2],t.moveTo(f+n,d+r);break;case"M":f=a[1],d=a[2],t.moveTo(f+n,d+r);break;case"c":o=f+a[5],s=d+a[6],h=f+a[3],p=d+a[4],t.bezierCurveTo(f+a[1]+n,d+a[2]+r,h+n,p+r,o+n,s+r),f=o,d=s;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,f+n,d+r);break;case"s":o=f+a[3],s=d+a[4],h=2*f-h,p=2*d-p,t.bezierCurveTo(h+n,p+r,f+a[1]+n,d+a[2]+r,o+n,s+r),h=f+a[1],p=d+a[2],f=o,d=s;break;case"S":o=a[3],s=a[4],h=2*f-h,p=2*d-p,t.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"q":o=f+a[3],s=d+a[4],h=f+a[1],p=d+a[2],t.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"Q":o=a[3],s=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"t":o=f+a[1],s=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-u,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),u=h,l=p,t.quadraticCurveTo(h+n,p+r,o+n,s+r),d=s,h=(f=o)+a[1],p=d+a[2];break;case"T":o=a[1],s=a[2],h=2*f-h,p=2*d-p,t.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"a":zs(t,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+r]),f+=a[6],d+=a[7];break;case"A":zs(t,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],d=a[7];break;case"z":case"Z":t.closePath()}c=a}};function zs(t,e,n,r){for(var i=function(t,e,n,r,i,a,o,s,u){var l=Rs.call(arguments);if(Ps[l])return Ps[l];var c=o*(Math.PI/180),f=Math.sin(c),d=Math.cos(c),h=d*(s-t)*.5+f*(u-e)*.5,p=d*(u-e)*.5-f*(s-t)*.5,v=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=d/n,m=f/n,y=-f/r,b=d/r,_=g*s+m*u,x=y*s+b*u,w=g*t+m*e,A=y*t+b*e,k=1/((w-_)*(w-_)+(A-x)*(A-x))-.25;k<0&&(k=0);var M=Math.sqrt(k);a==i&&(M=-M);var T=.5*(_+w)-M*(A-x),S=.5*(x+A)+M*(w-_),C=Math.atan2(x-S,_-T),E=Math.atan2(A-S,w-T)-C;E<0&&1===a?E+=2*Math.PI:E>0&&0===a&&(E-=2*Math.PI);for(var O=Math.ceil(Math.abs(E/(.5*Math.PI+.001))),P=[],L=0;L<O;++L){var R=C+L*E/O,D=C+(L+1)*E/O;P[L]=[T,S,R,D,n,r,f,d]}return Ps[l]=P}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=Ds(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var Is=2*Math.PI,Bs=Math.sqrt(3)/2,qs={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Is)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Bs*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Bs*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Bs*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Bs*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}}};function Us(t){return qs.hasOwnProperty(t)?qs[t]:function(t){if(!Hs.hasOwnProperty(t)){var e=Os(t);Hs[t]={draw:function(t,n){Ns(t,e,0,0,Math.sqrt(n)/2)}}}return Hs[t]}(t)}var Hs={};function Ws(t){return t.x}function Gs(t){return t.y}function Vs(t){return t.width}function Ys(t){return t.height}function Zs(t){return function(){return t}}var Xs=function(){var t=Ws,e=Gs,n=Vs,r=Ys,i=Zs(0),a=null;function o(o,s,u){var l,c=null!=s?s:+t.call(this,o),f=null!=u?u:+e.call(this,o),d=+n.call(this,o),h=+r.call(this,o),p=+i.call(this,o);if(a||(a=l=yo()),p<=0)a.rect(c,f,d,h);else{var v=c+d,g=f+h;a.moveTo(c+p,f),a.lineTo(v-p,f),a.quadraticCurveTo(v,f,v,f+p),a.lineTo(v,g-p),a.quadraticCurveTo(v,g,v-p,g),a.lineTo(c+p,g),a.quadraticCurveTo(c,g,c,g-p),a.lineTo(c,f+p),a.quadraticCurveTo(c,f,c+p,f),a.closePath()}if(l)return a=null,l+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:Zs(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:Zs(+t),o):e},o.width=function(t){return arguments.length?(n="function"===typeof t?t:Zs(+t),o):n},o.height=function(t){return arguments.length?(r="function"===typeof t?t:Zs(+t),o):r},o.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:Zs(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o},$s=Math.PI,Js=function(){var t,e,n,r,i,a,o,s,u=null;function l(t,e,n){var r=n/2;if(i){var l=o-e,c=t-a;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(a-d,o-h),u.lineTo(t-l*r,e-c*r),u.arc(t,e,r,p-$s,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+$s)}else u.arc(t,e,r,0,2*$s);u.closePath()}else i=1;a=t,o=e,s=r}function c(a){var o,s,c,f=a.length,d=!1;for(null==u&&(u=c=yo()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===d&&(d=!d)&&(i=0),d&&l(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(c)return u=null,c+""||null}return c.x=function(e){return arguments.length?(t=e,c):t},c.y=function(t){return arguments.length?(e=t,c):e},c.size=function(t){return arguments.length?(n=t,c):n},c.defined=function(t){return arguments.length?(r=t,c):r},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c};function Ks(t){return t.x||0}function Qs(t){return t.y||0}function tu(t){return t.cornerRadius||0}function eu(t){return!(!1===t.defined)}var nu=function(){var t=Lo,e=Ro,n=bo(0),r=null,i=Do,a=Fo,o=jo,s=null;function u(){var u,l,c,f=+t.apply(this,arguments),d=+e.apply(this,arguments),h=i.apply(this,arguments)-Eo,p=a.apply(this,arguments)-Eo,v=_o(p-h),g=p>h;if(s||(s=u=yo()),d<f&&(l=d,d=f,f=l),d>So)if(v>Oo-So)s.moveTo(d*wo(h),d*Mo(h)),s.arc(0,0,d,h,p,!g),f>So&&(s.moveTo(f*wo(p),f*Mo(p)),s.arc(0,0,f,p,h,g));else{var m,y,b=h,_=p,x=h,w=p,A=v,k=v,M=o.apply(this,arguments)/2,T=M>So&&(r?+r.apply(this,arguments):To(f*f+d*d)),S=ko(_o(d-f)/2,+n.apply(this,arguments)),C=S,E=S;if(T>So){var O=Po(T/f*Mo(M)),P=Po(T/d*Mo(M));(A-=2*O)>So?(x+=O*=g?1:-1,w-=O):(A=0,x=w=(h+p)/2),(k-=2*P)>So?(b+=P*=g?1:-1,_-=P):(k=0,b=_=(h+p)/2)}var L=d*wo(b),R=d*Mo(b),D=f*wo(w),F=f*Mo(w);if(S>So){var j,N=d*wo(_),z=d*Mo(_),I=f*wo(x),B=f*Mo(x);if(v<Co&&(j=function(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,f=s-a,d=f*u-c*l;if(!(d*d<So))return[t+(d=(c*(e-a)-f*(t-i))/d)*u,e+d*l]}(L,R,I,B,N,z,D,F))){var q=L-j[0],U=R-j[1],H=N-j[0],W=z-j[1],G=1/Mo(((c=(q*H+U*W)/(To(q*q+U*U)*To(H*H+W*W)))>1?0:c<-1?Co:Math.acos(c))/2),V=To(j[0]*j[0]+j[1]*j[1]);C=ko(S,(f-V)/(G-1)),E=ko(S,(d-V)/(G+1))}}k>So?E>So?(m=No(I,B,L,R,d,E,g),y=No(N,z,D,F,d,E,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),E<S?s.arc(m.cx,m.cy,E,xo(m.y01,m.x01),xo(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,E,xo(m.y01,m.x01),xo(m.y11,m.x11),!g),s.arc(0,0,d,xo(m.cy+m.y11,m.cx+m.x11),xo(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,E,xo(y.y11,y.x11),xo(y.y01,y.x01),!g))):(s.moveTo(L,R),s.arc(0,0,d,b,_,!g)):s.moveTo(L,R),f>So&&A>So?C>So?(m=No(D,F,N,z,f,-C,g),y=No(L,R,I,B,f,-C,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),C<S?s.arc(m.cx,m.cy,C,xo(m.y01,m.x01),xo(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,C,xo(m.y01,m.x01),xo(m.y11,m.x11),!g),s.arc(0,0,f,xo(m.cy+m.y11,m.cx+m.x11),xo(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,C,xo(y.y11,y.x11),xo(y.y01,y.x01),!g))):s.arc(0,0,f,w,x,g):s.lineTo(D,F)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Co/2;return[wo(r)*n,Mo(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:bo(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:bo(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:bo(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:bo(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:bo(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:bo(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:bo(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}().startAngle(function(t){return t.startAngle||0}).endAngle(function(t){return t.endAngle||0}).padAngle(function(t){return t.padAngle||0}).innerRadius(function(t){return t.innerRadius||0}).outerRadius(function(t){return t.outerRadius||0}).cornerRadius(tu),ru=Ho().x(Ks).y1(Qs).y0(function(t){return(t.y||0)+(t.height||0)}).defined(eu),iu=Ho().y(Qs).x1(Ks).x0(function(t){return(t.x||0)+(t.width||0)}).defined(eu),au=Uo().x(Ks).y(Qs).defined(eu),ou=Xs().x(Ks).y(Qs).width(function(t){return t.width||0}).height(function(t){return t.height||0}).cornerRadius(tu),su=function(){var t=bo(Vo),e=bo(64),n=null;function r(){var r;if(n||(n=r=yo()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"===typeof e?e:bo(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:bo(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}().type(function(t){return Us(t.shape||"circle")}).size(function(t){return null==t.size?64:t.size}),uu=Js().x(Ks).y(Qs).defined(eu).size(function(t){return t.size||1});function lu(t,e,n,r){return ou.context(t)(e,n,r)}var cu,fu=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},du=2*Math.PI,hu=du/4,pu=du-1e-8;function vu(t){return cu=t,vu}function gu(){}function mu(t,e){cu.add(t,e)}vu.beginPath=gu,vu.closePath=gu,vu.moveTo=mu,vu.lineTo=mu,vu.rect=function(t,e,n,r){mu(t,e),mu(t+n,e+r)},vu.quadraticCurveTo=function(t,e,n,r){mu(t,e),mu(n,r)},vu.bezierCurveTo=function(t,e,n,r,i,a){mu(t,e),mu(n,r),mu(i,a)},vu.arc=function(t,e,n,r,i,a){if(Math.abs(i-r)>pu)return mu(t-n,e-n),void mu(t+n,e+n);var o,s,u,l,c=1/0,f=-1/0,d=1/0,h=-1/0;function p(t){u=n*Math.cos(t),l=n*Math.sin(t),u<c&&(c=u),u>f&&(f=u),l<d&&(d=l),l>h&&(h=l)}if(p(r),p(i),i!==r)if((r%=du)<0&&(r+=du),(i%=du)<0&&(i+=du),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=du,o=r-r%hu,s=0;s<4&&o>i;++s,o-=hu)p(o);else for(o=r-r%hu+hu,s=0;s<4&&o<i;++s,o+=hu)p(o);mu(t+c,e+d),mu(t+f,e+h)};var yu=function(t,e,n){return n.id?function(t,e,n){for(var r=n.width(),i=n.height(),a=n.x1+e.x1*r,o=n.y1+e.y1*i,s=n.x1+e.x2*r,u=n.y1+e.y2*i,l=e.stops,c=0,f=l.length,d=t.createLinearGradient(a,o,s,u);c<f;++c)d.addColorStop(l[c].offset,l[c].color);return d}(t,n,e.bounds):n},bu=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=yu(t,e,e.fill),!0)},_u=[],xu=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=yu(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||_u),t.lineDashOffset=e.strokeDashOffset||0),!0))};function wu(t,e){return t.zindex-e.zindex||t.index-e.index}function Au(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(wu)}function ku(t,e){var n,r,i=t.items;if(i&&i.length){var a=Au(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function Mu(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=Au(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function Tu(t){return function(e,n,r){ku(n,function(n){r&&!r.intersects(n.bounds)||Su(t,e,n,n)})}}function Su(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&bu(e,n,i)&&e.fill(),n.stroke&&xu(e,n,i)&&e.stroke()))}var Cu=function(){return!0};function Eu(t){return t||(t=Cu),function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,Mu(n,function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0})}}function Ou(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,l=null==e?u.fill:e,c=u.stroke&&n.isPointInStroke;return c&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function Pu(t){return Eu(Ou(t))}var Lu=function(t,e){return"translate("+t+","+e+")"},Ru=function(t){return Lu(t.x||0,t.y||0)},Du=function(t,e){function n(t,n){var r=n.x||0,i=n.y||0;t.translate(r,i),t.beginPath(),e(t,n),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",Ru(n)),t("d",e(null,n))},bound:function(t,n){return e(vu(t),n),fu(t,n).translate(n.x||0,n.y||0)},draw:Tu(n),pick:Pu(n)}},Fu=Du("arc",function(t,e){return nu.context(t)(e)});var ju=function(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i,a=Ou(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(vu(t),r),fu(t,r[0]))},draw:(i=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||Su(i,t,e.items[0],e.items)}),pick:function(t,e,n,r,i,o){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,a(t,s,n,r)?s[0]:null)},tip:n}},Nu=ju("area",function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?iu:ru).curve(Ss(r,n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<s&&(s=r,n=t[o]);return n}),zu=1;function Iu(){zu=1}var Bu=function(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+zu++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(p.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},qu=.5;function Uu(t,e){var n=e.stroke?qu:0;t.beginPath(),lu(t,e,n,n)}var Hu=Ou(Uu);var Wu={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",Ru(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),fu(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;ku(e,function(e){var i,a=e.x||0,o=e.y||0,s=e.width||0,u=e.height||0;t.save(),t.translate(a,o),(e.stroke||e.fill)&&(i=null==e.opacity?1:e.opacity)>0&&(Uu(t,e),e.fill&&bu(t,e,i)&&t.fill(),e.stroke&&xu(t,e,i)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,s,u),t.clip()),n&&n.translate(-a,-o),ku(e,function(e){r.draw(t,e,n)}),n&&n.translate(a,o),t.restore()})},pick:function(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var o=this,s=n*t.pixelRatio,u=r*t.pixelRatio;return Mu(e,function(l){var c,f,d,h;if(!(h=l.bounds)||h.contains(i,a))return f=l.x||0,d=l.y||0,t.save(),t.translate(f,d),f=i-f,d=a-d,!(c=Mu(l,function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,f,d)?o.pick(t,n,r,f,d):null}))&&!1!==e.interactive&&(l.fill||l.stroke)&&Hu(t,l,s,u)&&(c=l),t.restore(),c||null})},background:function(t,e){var n=e.stroke?qu:0;t("class","background"),t("d",lu(null,e,n,n))},foreground:function(t,e,n){t("clip-path",e.clip?Bu(n,e,e):null)}};function Gu(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then(function(e){t.image=e,t.image.url=t.url})),n}function Vu(t,e){return"center"===t?e/2:"right"===t?e:0}function Yu(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var Zu={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=Gu(e,n),i=e.x||0,a=e.y||0,o=(null!=e.width?e.width:r.width)||0,s=(null!=e.height?e.height:r.height)||0,u=!1===e.aspect?"none":"xMidYMid";i-=Vu(e.align,o),a-=Yu(e.baseline,s),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",Lu(i,a)),t("width",o),t("height",s),t("preserveAspectRatio",u)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,a=(null!=e.width?e.width:n&&n.width)||0,o=(null!=e.height?e.height:n&&n.height)||0;return r-=Vu(e.align,a),i-=Yu(e.baseline,o),t.set(r,i,r+a,i+o)},draw:function(t,e,n){var r=this;ku(e,function(e){if(!n||n.intersects(e.bounds)){var i,a,o,s,u=Gu(e,r),l=e.x||0,c=e.y||0,f=(null!=e.width?e.width:u.width)||0,d=(null!=e.height?e.height:u.height)||0;l-=Vu(e.align,f),c-=Yu(e.baseline,d),!1!==e.aspect&&(a=u.width/u.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(c+=(d-(s=f/a))/2,d=s):(l+=(f-(s=d*a))/2,f=s))),u.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(u,l,c,f,d))}})},pick:Eu(),get:Gu,xOffset:Vu,yOffset:Yu},Xu=ju("line",function(t,e){var n=e[0],r=n.interpolate||"linear";return au.curve(Ss(r,n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(n=t[a].x-e[0])*n+(r=t[a].y-e[1])*r<i)return t[a];return null});function $u(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=Os(n)).path=n),Ns(t,r,e.x,e.y)}var Ju={type:"path",tag:"path",nested:!1,attr:function(t,e){t("transform",Ru(e)),t("d",e.path)},bound:function(t,e){return $u(vu(t),e)?t.set(0,0,0,0):fu(t,e)},draw:Tu($u),pick:Pu($u)};function Ku(t,e){t.beginPath(),lu(t,e)}var Qu={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",lu(null,e))},bound:function(t,e){var n,r;return fu(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:Tu(Ku),pick:Pu(Ku)};function tl(t,e,n){var r,i,a,o;return!(!e.stroke||!xu(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var el,nl,rl={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",Ru(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return fu(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){ku(e,function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&tl(t,e,r)&&t.stroke()}})},pick:Eu(function(t,e,n,r){return!!t.isPointInStroke&&tl(t,e,1)&&t.isPointInStroke(n,r)})},il=Du("shape",function(t,e){return(e.mark.shape||e.shape).context(t)(e)}),al=Du("symbol",function(t,e){return su.context(t)(e)}),ol={height:fl,measureWidth:ll,estimateWidth:sl,width:sl,canvas:dl};function sl(t){return nl=fl(t),ul(hl(t))}function ul(t){return~~(.8*t.length*nl)}function ll(t){return el.font=vl(t),cl(hl(t))}function cl(t){return el.measureText(t).width}function fl(t){return null!=t.fontSize?t.fontSize:11}function dl(t){el=t&&(el=oo(1,1))?el.getContext("2d"):null,ol.width=el?ll:sl}function hl(t){var e=t.text;return null==e?"":t.limit>0?function(t){var e,n=+t.limit,r=t.text+"";el?(el.font=vl(t),e=cl):(nl=fl(t),e=ul);if(e(r)<n)return r;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,s=0,u=r.length;if(n-=e(a),o){for(;s<u;)i=s+u>>>1,e(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),e(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(t):e+""}function pl(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function vl(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+fl(t)+"px "+pl(t,e)}function gl(t){var e=t.baseline,n=fl(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}dl(!0);var ml={left:"start",center:"middle",right:"end"},yl=new to;function bl(t,e,n){var r,i,a=ol.height(e),o=e.align,s=e.radius||0,u=e.x||0,l=e.y||0,c=e.dx||0,f=(e.dy||0)+gl(e)-Math.round(.8*a);return s&&(i=(e.theta||0)-Math.PI/2,u+=s*Math.cos(i),l+=s*Math.sin(i)),r=ol.width(e),"center"===o?c-=r/2:"right"===o&&(c-=r),t.set(c+=u,f+=l,c+r,f+a),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,u,l),t.expand(n||!r?0:1)}var _l={arc:Fu,area:Nu,group:Wu,image:Zu,line:Xu,path:Ju,rect:Qu,rule:rl,shape:il,symbol:al,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+gl(e),a=e.x||0,o=e.y||0,s=e.angle||0,u=e.radius||0;u&&(n=(e.theta||0)-Math.PI/2,a+=u*Math.cos(n),o+=u*Math.sin(n)),t("text-anchor",ml[e.align]||"start"),s?(n=Lu(a,o)+" rotate("+s+")",(r||i)&&(n+=" "+Lu(r,i))):n=Lu(a+r,o+i),t("transform",n)},bound:bl,draw:function(t,e,n){ku(e,function(e){var r,i,a,o,s,u;n&&!n.intersects(e.bounds)||(u=hl(e))&&0!==(r=null==e.opacity?1:e.opacity)&&(t.font=vl(e),t.textAlign=e.align||"left",i=e.x||0,a=e.y||0,(o=e.radius)&&(s=(e.theta||0)-Math.PI/2,i+=o*Math.cos(s),a+=o*Math.sin(s)),e.angle&&(t.save(),t.translate(i,a),t.rotate(e.angle*Math.PI/180),i=a=0),i+=e.dx||0,a+=(e.dy||0)+gl(e),e.fill&&bu(t,e,r)&&t.fillText(u,i,a),e.stroke&&xu(t,e,r)&&t.strokeText(u,i,a),e.angle&&t.restore())})},pick:Eu(function(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=bl(yl,e,!0),s=-e.angle*Math.PI/180,u=Math.cos(s),l=Math.sin(s),c=e.x,f=e.y,d=u*i-l*a+(c-c*u+f*l),h=l*i+u*a+(f-c*l-f*u);return o.contains(d,h)})},trail:ju("trail",function(t,e){return uu.context(t)(e)},function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null})},xl=function(t,e,n){var r=_l[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new to),t,n)},wl={mark:null},Al=function(t,e,n){var r,i,a,o,s=_l[t.marktype],u=s.bound,l=t.items,c=l&&l.length;if(s.nested)return c?a=l[0]:(wl.mark=t,a=wl),o=xl(a,u,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new to,c)for(r=0,i=l.length;r<i;++r)e.union(xl(l[r],u,n));return t.bounds=e},kl=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function Ml(t,e){return JSON.stringify(t,kl,e)}function Tl(t){return function t(e){var n,r,i,a=e.marktype,o=e.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=e,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&t(o[r]);a&&Al(e);return e}("string"===typeof t?JSON.parse(t):t)}function Sl(t){arguments.length?this.root=Tl(t):(this.root=El({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ao(this.root)])}var Cl=Sl.prototype;function El(t,e){return{bounds:new to,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function Ol(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function Pl(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function Ll(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Ol(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function Rl(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function Dl(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}Cl.toJSON=function(t){return Ml(this.root,t||0)},Cl.mark=function(t,e,n){var r=El(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var Fl=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function jl(t,e){this._active=null,this._handlers={},this._loader=t||q(),this._tooltip=e||Nl}function Nl(t,e,n,r){t.element().setAttribute("title",r||"")}var zl=jl.prototype;function Il(t){this._el=null,this._bgcolor=null,this._loader=new uo(t)}zl.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},zl.element=function(){return this._el},zl.canvas=function(){return this._el&&this._el.firstChild},zl.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},zl.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},zl.on=function(){},zl.off=function(){},zl._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},zl.handlers=function(t){var e,n=this._handlers,r=[];if(t)r.push.apply(r,n[this.eventName(t)]);else for(e in n)r.push.apply(r,n[e]);return r},zl.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},zl.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(e){var n=new MouseEvent(t.type,t),r=Ol(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)}).catch(function(){})},zl.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=_l[o.marktype]).tip){for((a=Fl(e,n))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},zl.getItemBoundingClientRect=function(t){if(e=this.canvas()){for(var e,n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();t.mark&&(t=t.mark.group);)a+=t.x||0,o+=t.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var Bl=Il.prototype;Bl.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},Bl.element=function(){return this._el},Bl.canvas=function(){return this._el&&this._el.firstChild},Bl.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},Bl.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},Bl.dirty=function(){},Bl.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},Bl._render=function(){},Bl.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)},Bl._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(t){t&&i(),n._ready=null})}return r},Bl.sanitizeURL=function(t){return this._load("sanitizeURL",t)},Bl.loadImage=function(t){return this._load("loadImage",t)};var ql="mouseout";function Ul(t,e){jl.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var Hl=Object(p.y)(Ul,jl);function Wl(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function Gl(t){return function(e){this.fire(t,e),this._active=null}}Hl.initialize=function(t,e,n){var r=this._canvas=t&&Pl(t,"canvas");if(r){var i=this;this.events.forEach(function(t){r.addEventListener(t,function(e){Hl[t]?Hl[t].call(i,e):i.fire(t,e)})})}return jl.prototype.initialize.call(this,t,e,n)},Hl.canvas=function(){return this._canvas},Hl.context=function(){return this._canvas.getContext("2d")},Hl.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],Hl.DOMMouseScroll=function(t){this.fire("mousewheel",t)},Hl.mousemove=Wl("mousemove","mouseover","mouseout"),Hl.dragover=Wl("dragover","dragenter","dragleave"),Hl.mouseout=Gl("mouseout"),Hl.dragleave=Gl("dragleave"),Hl.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},Hl.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},Hl.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},Hl.touchmove=function(t){this.fire("touchmove",t,!0)},Hl.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},Hl.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if(e.vegaType=t,"click"===t&&a&&a.href?this.handleHref(e,a,a.href):"mousemove"!==t&&t!==ql||this.handleTooltip(e,a,t!==ql),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},Hl.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},Hl.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},Hl.pickEvent=function(t){var e=Fl(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},Hl.pick=function(t,e,n,r,i){var a=this.context();return _l[t.marktype].pick.call(this,a,t,e,n,r,i)};var Vl="undefined"!==typeof window&&window.devicePixelRatio||1;function Yl(t){Il.call(this,t),this._redraw=!1,this._dirty=new to}var Zl=Object(p.y)(Yl,Il),Xl=Il.prototype,$l=new to;function Jl(t,e){jl.call(this,t,e);var n=this;n._hrefHandler=Ql(n,function(t,e){e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=Ql(n,function(t,e){n.handleTooltip(t,e,t.type!==ql)})}Zl.initialize=function(t,e,n,r,i){return this._canvas=oo(1,1),t&&(Rl(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Xl.initialize.call(this,t,e,n,r,i)},Zl.resize=function(t,e,n,r){return Xl.resize.call(this,t,e,n,r),function(t,e,n,r,i){var a="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,o=t.getContext("2d"),s=a?Vl:i;t.width=e*s,t.height=n*s,a&&1!==s&&(t.style.width=e+"px",t.style.height=n+"px"),o.pixelRatio=s,o.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},Zl.canvas=function(){return this._canvas},Zl.context=function(){return this._canvas?this._canvas.getContext("2d"):null},Zl.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var n=$l.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}(t.bounds,t.mark.group);this._dirty.union(e)},Zl._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return e.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,a,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,a),e.restore(),this._dirty.clear(),this},Zl.draw=function(t,e,n){var r=_l[e.marktype];e.clip&&function(t,e){var n=e.clip;if(t.save(),t.beginPath(),Object(p.D)(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},Zl.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var Kl=Object(p.y)(Jl,jl);function Ql(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function tc(t,e,n){var r,i,a="<"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function ec(t){return"</"+t+">"}Kl.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(ql,this._tooltipHandler)),this._svg=r=t&&Pl(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(ql,this._tooltipHandler)),jl.prototype.initialize.call(this,t,e,n)},Kl.canvas=function(){return this._svg},Kl.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:Ql(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},Kl.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var nc={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},rc={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ic=Object.keys(rc),ac=nc.xmlns;function oc(t){Il.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var sc=Object(p.y)(oc,Il),uc=Il.prototype;function lc(t,e,n){var r,i,a;for((t=Ll(t,n,"linearGradient",ac)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2),r=0,i=e.stops.length;r<i;++r)(a=Ll(t,r,"stop",ac)).setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);Rl(t,r)}function cc(t,e,n){var r;(t=Ll(t,n,"clipPath",ac)).setAttribute("id",e.id),e.path?(r=Ll(t,0,"path",ac)).setAttribute("d",e.path):((r=Ll(t,0,"rect",ac)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height))}function fc(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function dc(t,e,n,r,i){var a,o=t._svg;if(!o&&(o=Ol(a=e.ownerDocument,r,ac),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var s=Ol(a,"path",ac);s.setAttribute("class","background"),o.appendChild(s),s.__data__=t;var u=Ol(a,"g",ac);o.appendChild(u),u.__data__=t}return(o.ownerSVGElement!==i||function(t){var e=t.mark||t.group;return e&&e.items.length>1}(t)&&o.previousSibling!==n)&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}sc.initialize=function(t,e,n,r){return t&&(this._svg=Ll(t,0,"svg",ac),this._svg.setAttribute("class","marks"),Rl(t,1),this._root=Ll(this._svg,0,"g",ac),Rl(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),uc.initialize.call(this,t,e,n,r)},sc.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),uc.background.apply(this,arguments)},sc.resize=function(t,e,n,r){return uc.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},sc.canvas=function(){return this._svg},sc.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in nc)t[e]=nc[e];var n=this._bgcolor?tc("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+ec("rect"):"";return tc("svg",t)+n+this._svg.innerHTML+ec("svg")},sc._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),Rl(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},sc.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=Ll(e,0,"defs",ac)),lc(r,n.gradient[t],i++);for(t in n.clipping)r||(n.el=r=Ll(e,0,"defs",ac)),cc(r,n.clipping[t],i++);r&&(0===i?(e.removeChild(r),n.el=null):Rl(r,i))},sc._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},sc.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},sc.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},sc._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(n=(e=t[a]).mark).marktype!==r&&(r=n.marktype,i=_l[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,fc(e,u),n.items.forEach(function(t){t.dirty=u})),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):e._svg&&(s=e._svg.parentNode)&&s.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,fc(e,u)),e._update=u));return!this._dirtyAll},sc.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this,a=this._svg,o=_l[e.marktype],s=!1===e.interactive?"none":null,u="g"===o.tag,l=null,c=0;function f(t){var e=i.isDirty(t),n=dc(t,r,l,o.tag,a);e&&(i._update(o,n,t),u&&function(t,e,n){e=e.lastChild;var r,i=0;ku(n,function(n){r=t.draw(e,n,r),++i}),Rl(e,1+i)}(i,n,t)),l=n,++c}return(r=dc(e,t,n,"g",a)).setAttribute("class",Dl(e)),u||r.style.setProperty("pointer-events",s),e.clip?r.setAttribute("clip-path",Bu(i,e,e.group)):r.removeAttribute("clip-path"),o.nested?e.items.length&&f(e.items[0]):ku(e,f),Rl(r,c),r};var hc=null,pc=null,vc={group:function(t,e,n){pc=e.__values__,hc=e.childNodes[1],t.foreground(mc,n,this),hc=e.childNodes[0],t.background(mc,n,this);var r=!1===n.mark.interactive?"none":null;r!==pc.events&&(hc.style.setProperty("pointer-events",r),pc.events=r)},text:function(t,e,n){var r;(r=hl(n))!==pc.text&&(e.textContent=r,pc.text=r),gc(e,"font-family",pl(n)),gc(e,"font-size",fl(n)+"px"),gc(e,"font-style",n.fontStyle),gc(e,"font-variant",n.fontVariant),gc(e,"font-weight",n.fontWeight)}};function gc(t,e,n){n!==pc[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),pc[e]=n)}function mc(t,e,n){e!==pc[t]&&(null!=e?n?hc.setAttributeNS(n,t,e):hc.setAttribute(t,e):n?hc.removeAttributeNS(n,t):hc.removeAttribute(t),pc[t]=e)}function yc(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function bc(t){Il.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}sc._update=function(t,e,n){hc=e,pc=e.__values__,t.attr(mc,n,this);var r=vc[t.type];r&&r.call(this,t,e,n),this.style(hc,n)},sc.style=function(t,e){var n,r,i,a,o;if(null!=e)for(n=0,r=ic.length;n<r;++n)o=e[i=ic[n]],"font"===i&&(o=pl(e)),o!==pc[i]&&(a=rc[i],null==o?"fill"===a?t.style.setProperty(a,"none"):t.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+yc()+"#"+o.id+")"),t.style.setProperty(a,o+"")),pc[i]=o)};var _c,xc=Object(p.y)(bc,Il),wc=Il.prototype;function Ac(t,e,n,r){_c[r||t]=e}function kc(t,e,n,r){if(null==t)return"";var i,a,o,s,u,l="";for("bgrect"===n&&!1===e.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font-family: "+pl(t)+"; ",l+="font-size: "+fl(t)+"px; ",t.fontStyle&&(l+="font-style: "+t.fontStyle+"; "),t.fontVariant&&(l+="font-variant: "+t.fontVariant+"; "),t.fontWeight&&(l+="font-weight: "+t.fontWeight+"; ")),i=0,a=ic.length;i<a;++i)o=ic[i],s=rc[o],null==(u=t[o])?"fill"===s&&(l+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(u.id&&(r.gradient[u.id]=u,u="url(#"+u.id+")"),l+=s+": "+u+"; "):l+=s+": none; ";return l?'style="'+l.trim()+'"':null}xc.resize=function(t,e,n,r){wc.resize.call(this,t,e,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in nc)o[s]=nc[s];a.head=tc("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?tc("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+ec("rect"):"",a.root=tc("g",{transform:"translate("+i+")"}),a.foot=ec("g")+ec("svg"),this},xc.background=function(){var t=wc.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},xc.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},xc._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},xc.buildDefs=function(){var t,e,n,r,i=this._defs,a="";for(e in i.gradient){for(r=(n=i.gradient[e]).stops,a+=tc("linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<r.length;++t)a+=tc("stop",{offset:r[t].offset,"stop-color":r[t].color})+ec("stop");a+=ec("linearGradient")}for(e in i.clipping)n=i.clipping[e],a+=tc("clipPath",{id:e}),n.path?a+=tc("path",{d:n.path})+ec("path"):a+=tc("rect",{x:0,y:0,width:n.width,height:n.height})+ec("rect"),a+=ec("clipPath");return a.length>0?tc("defs")+a+ec("defs"):""},xc.attributes=function(t,e){return _c={},t(Ac,e,this),_c},xc.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},xc.mark=function(t){var e,n=this,r=_l[t.marktype],i=r.tag,a=this._defs,o="";function s(s){var u=n.href(s);u&&(o+=tc("a",u)),e="g"!==i?kc(s,t,i,a):null,o+=tc(i,n.attributes(r.attr,s),e),"text"===i?o+=hl(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===i&&(o+=tc("path",n.attributes(r.background,s),kc(s,t,"bgrect",a))+ec("path"),o+=tc("g",n.attributes(r.foreground,s))+n.markGroup(s)+ec("g")),o+=ec(i),u&&(o+=ec("a"))}return"g"!==i&&!1===t.interactive&&(e='style="pointer-events: none;"'),o+=tc("g",{class:Dl(t),"clip-path":t.clip?Bu(n,t,t.group):null},e),r.nested?t.items&&t.items.length&&s(t.items[0]):ku(t,s),o+ec("g")},xc.markGroup=function(t){var e=this,n="";return ku(t,function(t){n+=e.mark(t)}),n};var Mc={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},Tc={};function Sc(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(Tc[t]=e,this):Tc[t]}Tc.canvas=Tc.png={renderer:Yl,headless:Yl,handler:Ul},Tc.svg={renderer:oc,headless:bc,handler:Jl},Tc.none={};var Cc=new to,Ec=function(t){var e=t.clip;if(Object(p.D)(e))e(vu(Cc.clear()));else{if(!e)return;Cc.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(Cc)},Oc=1e-9;function Pc(t,e,n){return t===e||("path"===n?Lc(t,e):t instanceof Date&&e instanceof Date?+t===+e:Object(p.E)(t)&&Object(p.E)(e)?Math.abs(t-e)<=Oc:t&&e&&(Object(p.F)(t)||Object(p.F)(e))?null!=t&&null!=e&&function(t,e){var n,r,i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!Pc(t[n],e[n],n))return!1;return typeof t===typeof e}(t,e):t==e)}function Lc(t,e){return Pc(Os(t),Os(e))}function Rc(t){rr.call(this,null,t)}function Dc(t,e,n){return e(t.bounds.clear(),t,n)}Object(p.y)(Rc,rr).transform=function(t,e){var n,r=e.dataflow,i=t.mark,a=i.marktype,o=_l[a],s=o.bound,u=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),u=Dc(i,s),i.items.forEach(function(t){t.bounds.clear().union(u)})):a===Oa||t.modified()?(e.visit(e.MOD,function(t){r.dirty(t)}),u.clear(),i.items.forEach(function(t){u.union(Dc(t,s))}),i.role===Fa&&e.reflow()):(n=e.changed(e.REM),e.visit(e.ADD,function(t){u.union(Dc(t,s))}),e.visit(e.MOD,function(t){n=n||u.alignsWith(t.bounds),r.dirty(t),u.union(Dc(t,s))}),n&&(u.clear(),i.items.forEach(function(t){u.union(t.bounds)}))),Ec(i),e.modifies("bounds")};var Fc=":vega_identifier:";function jc(t){rr.call(this,0,t)}function Nc(t){rr.call(this,null,t)}function zc(t){rr.call(this,null,t)}jc.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(p.y)(jc,rr).transform=function(t,e){var n=function(t){var e=t._signals[Fc];e||(t._signals[Fc]=e=t.add(0));return e}(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,function(t){t[i]||(t[i]=++r)}),n.set(this.value=r),e},Object(p.y)(Nc,rr).transform=function(t,e){var n=this.value;n||((n=e.dataflow.scenegraph().mark(t.markdef,function(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}(t),t.index)).group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this,n.clip=t.clip,n.interactive=t.interactive,this.value=n);var r=n.marktype===Oa?ao:io;return e.visit(e.ADD,function(t){r.call(t,n)}),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e};var Ic=Object(p.y)(zc,rr),Bc={parity:function(t){return t.filter(function(t,e){return e%2?t.opacity=0:1})},greedy:function(t){var e;return t.filter(function(t,n){return n&&qc(e.bounds,t.bounds)?t.opacity=0:(e=t,1)})}};function qc(t,e){return!(t.x2-1<e.x1||t.x1+1>e.x2||t.y2-1<e.y1||t.y1+1>e.y2)}function Uc(t){for(var e,n=1,r=t.length,i=t[0].bounds;n<r;i=e,++n)if(qc(i,e=t[n].bounds))return!0}function Hc(t){var e=t.bounds;return e.width()>1&&e.height()>1}function Wc(t){return t.forEach(function(t){t.opacity=1}),t}function Gc(t,e){return t.reflow(e.modified()).modifies("opacity")}function Vc(t){rr.call(this,null,t)}function Yc(t,e){for(var n=0,r=t.length;n<r;++n)e.push(t[n])}function Zc(t){return{x1:0,y1:0,x2:t.width||0,y2:t.height||0}}function Xc(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function $c(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function Jc(t,e){return t.bounds[e]}function Kc(t,e,n){var r=Object(p.F)(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function Qc(t){return t<0?Math.ceil(-t):0}function tf(t,e,n){var r,i,a,o,s,u,l,c,f,d,h,p,v=function(t){for(var e,n,r=t.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(n=(e=r[a]).items,e.marktype===Oa)switch(e.role){case Pa:case Fa:break;case ja:Yc(n,o.rowheaders);break;case Na:Yc(n,o.rowfooters);break;case Ia:Yc(n,o.colheaders);break;case Ba:Yc(n,o.colfooters);break;case za:o.rowtitle=n[0];break;case qa:o.coltitle=n[0];break;default:Yc(n,o.marks)}return o}(e),g=v.marks,m=n.bounds===Ja,y=m?Zc:Xc,b=new to(0,0,0,0),_=Kc(n.align,Ka),x=Kc(n.align,Qa),w=Kc(n.padding,Ka),A=Kc(n.padding,Qa),k=n.offset,M=e.columns||n.columns||g.length,T=M<0?1:Math.ceil(g.length/M),S=T*M,C=[],E=[],O=0,P=[],L=[],R=0,D=g.length;for(i=0;i<M;++i)E[i]=0;for(i=0;i<T;++i)L[i]=0;for(i=0;i<D;++i)s=y(g[i]),a=i%M,o=~~(i/M),l=Math.ceil(y(g[i]).x2),c=Math.ceil(y(g[i]).y2),O=Math.max(O,l),R=Math.max(R,c),E[a]=Math.max(E[a],l),L[o]=Math.max(L[o],c),C.push(w+Qc(s.x1)),P.push(A+Qc(s.y1)),t.dirty(g[i]);for(i=0;i<D;++i)i%M===0&&(C[i]=0),i<M&&(P[i]=0);if(_===$a)for(a=1;a<M;++a){for(p=0,i=a;i<D;i+=M)p<C[i]&&(p=C[i]);for(i=a;i<D;i+=M)C[i]=p+E[a-1]}else if(_===Xa){for(p=0,i=0;i<D;++i)i%M&&p<C[i]&&(p=C[i]);for(i=0;i<D;++i)i%M&&(C[i]=p+O)}else for(_=!1,a=1;a<M;++a)for(i=a;i<D;i+=M)C[i]+=E[a-1];if(x===$a)for(o=1;o<T;++o){for(p=0,r=(i=o*M)+M;i<r;++i)p<P[i]&&(p=P[i]);for(i=o*M;i<r;++i)P[i]=p+L[o-1]}else if(x===Xa){for(p=0,i=M;i<D;++i)p<P[i]&&(p=P[i]);for(i=M;i<D;++i)P[i]=p+R}else for(x=!1,o=1;o<T;++o)for(r=(i=o*M)+M;i<r;++i)P[i]+=L[o-1];for(f=0,i=0;i<D;++i)l=(u=g[i]).x||0,u.x=f=C[i]+(i%M?f:0),u.bounds.translate(f-l,0);for(a=0;a<M;++a)for(d=0,i=a;i<D;i+=M)c=(u=g[i]).y||0,u.y=d+=P[i],u.bounds.translate(0,d-c);if(Kc(n.center,Ka)&&T>1&&_)for(i=0;i<D;++i)u=g[i],(f=(s=_===Xa?O:E[i%M])-y(u).x2)>0&&(u.x+=l=f/2,u.bounds.translate(l,0));if(Kc(n.center,Qa)&&1!==M&&x)for(i=0;i<D;++i)u=g[i],(d=(s=x===Xa?R:L[~~(i/M)])-y(u).y2)>0&&(u.y+=c=d/2,u.bounds.translate(0,c));for(i=0;i<D;++i)g[i].mark.bounds.clear();for(i=0;i<D;++i)u=g[i],t.dirty(u),b.union(u.mark.bounds.union(u.bounds));function F(t,e){return Math.floor(Math.min(t,e))}function j(t,e){return Math.ceil(Math.max(t,e))}y=m?$c:Jc,h=Kc(n.headerBand,Qa,null),f=ef(t,v.rowheaders,g,M,T,-Kc(k,"rowHeader"),F,0,y,"x1",0,M,1,h),h=Kc(n.headerBand,Ka,null),d=ef(t,v.colheaders,g,M,M,-Kc(k,"columnHeader"),F,1,y,"y1",0,1,M,h),h=Kc(n.footerBand,Qa,null),ef(t,v.rowfooters,g,M,T,Kc(k,"rowFooter"),j,0,y,"x2",M-1,M,1,h),h=Kc(n.footerBand,Ka,null),ef(t,v.colfooters,g,M,M,Kc(k,"columnFooter"),j,1,y,"y2",S-M,1,M,h),v.rowtitle&&(p=f-Kc(k,"rowTitle"),h=Kc(n.titleBand,Qa,.5),nf(t,v.rowtitle,p,0,b,h)),v.coltitle&&(p=d-Kc(k,"columnTitle"),h=Kc(n.titleBand,Ka,.5),nf(t,v.coltitle,p,1,b,h))}function ef(t,e,n,r,i,a,o,s,u,l,c,f,d,h){var p,v,g,m,y,b,_,x,w,A=n.length,k=0,M=0;if(!A)return k;for(p=c;p<A;p+=f)n[p]&&(k=o(k,u(n[p],l)));if(!e.length)return k;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),k+=a,v=0,m=e.length;v<m;++v)t.dirty(e[v]),e[v].mark.bounds.clear();for(p=c,v=0,m=e.length;v<m;++v,p+=f){for(y=(b=e[v]).mark.bounds,g=p;g>=0&&null==(_=n[g]);g-=d);s?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=k):(x=k,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,t.dirty(b),M=o(M,y[l])}return M}function nf(t,e,n,r,i,a){if(e){t.dirty(e);var o=n,s=n;r?o=Math.round(i.x1+a*i.width()):s=Math.round(i.y1+a*i.height()),e.bounds.translate(o-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=s,t.dirty(e)}}Ic.transform=function(t,e){var n,r,i=Bc[t.method]||Bc.parity,a=e.materialize(e.SOURCE).source;if(a){if(!t.method)return t.modified("method")&&(Wc(a),e=Gc(e,t)),e;if(t.sort&&(a=a.slice().sort(t.sort)),"greedy"===t.method&&(a=a.filter(Hc)),n=Wc(a),e=Gc(e,t),n.length>=3&&Uc(n)){do{n=i(n)}while(n.length>=3&&Uc(n));n.length<3&&!Object(p.S)(a).opacity&&(n.length>1&&(Object(p.S)(n).opacity=0),Object(p.S)(a).opacity=1)}return t.boundScale&&t.boundTolerance>=0&&(r=function(t,e,n){var r=t.range(),i=new to;return e===_a||e===Aa?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(t){return i.encloses(t.bounds)}}(t.boundScale,t.boundOrient,+t.boundTolerance),a.forEach(function(t){r(t)||(t.opacity=0)})),e}},Object(p.y)(Vc,rr).transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,function(t){n.dirty(t)}),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};var rf=.5,af=new to;function of(t){rr.call(this,null,t)}function sf(t,e,n){return t[e]===n?0:(t[e]=n,1)}function uf(t){var e=t.items[0].datum.orient;return e===xa||e===wa}function lf(t,e,n,r){var i,a,o=e.items[0],s=o.datum,u=s.orient,l=function(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}(s),c=o.range,f=o.offset,d=o.position,h=o.minExtent,p=o.maxExtent,v=s.title&&o.items[l[2]].items[0],g=o.titlePadding,m=o.bounds,y=0,b=0;switch(af.clear().union(m),m.clear(),(i=l[0])>-1&&m.union(o.items[i].bounds),(i=l[1])>-1&&m.union(o.items[i].bounds),u){case _a:y=d||0,b=-f,a=Math.max(h,Math.min(p,-m.y1)),v&&(a=cf(v,a,g,0,-1,m)),m.add(0,-a).add(c,0);break;case xa:y=-f,b=d||0,a=Math.max(h,Math.min(p,-m.x1)),v&&(a=cf(v,a,g,1,-1,m)),m.add(-a,0).add(0,c);break;case wa:y=n+f,b=d||0,a=Math.max(h,Math.min(p,m.x2)),v&&(a=cf(v,a,g,1,1,m)),m.add(0,0).add(a,c);break;case Aa:y=d||0,b=r+f,a=Math.max(h,Math.min(p,m.y2)),v&&(a=cf(v,a,g,0,1,m)),m.add(0,0).add(c,a);break;default:y=o.x,b=o.y}return fu(m.translate(y,b),o),sf(o,"x",y+rf)|sf(o,"y",b+rf)&&(o.bounds=af,t.dirty(o),o.bounds=m,t.dirty(o)),o.mark.bounds.clear().union(m)}function cf(t,e,n,r,i,a){var o=t.bounds,s=0,u=0;return t.auto?(e+=n,r?s=(t.x||0)-(t.x=i*e):u=(t.y||0)-(t.y=i*e),o.translate(-s,-u),t.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),e+=o.width()):(a.add(o.x1,0).add(o.x2,0),e+=o.height())):a.union(o),e}function ff(t,e){return e.reduce(function(e,n){var r=n.items[0];if(function(t,e,n){var r=e.padding-n.x,i=e.padding-n.y;if(e.datum.title){var a=e.items[1].items[0];i+=e.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),t.dirty(n))}(t,r,r.items[0].items[0]),r.datum.orient===xa){var i=af.clear();r.items.forEach(function(t){i.union(t.bounds)}),e=Math.max(e,Math.ceil(i.width()+2*r.padding-1))}return e},0)}function df(t,e,n,r,i,a,o){var s,u,l,c=e.items[0],f=c.datum,d=f.orient,h=c.offset,p=c.bounds,v=0,g=0;switch(d===_a||d===Aa?(l=i,v=n[d]):d!==xa&&d!==wa||(l=r,g=n[d]),af.clear().union(p),p.clear(),c.items.forEach(function(t){p.union(t.bounds)}),s=2*c.padding-1,u=2*c.padding-1,p.empty()||(s=Math.ceil(p.width()+s),u=Math.ceil(p.height()+u)),f.type===Ha&&function(t){var e=t.reduce(function(t,e){return t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t},{});t.forEach(function(t){t.width=e[t.column],t.height=t.bounds.y2-t.y})}(c.items[0].items[0].items[0].items),d){case xa:v-=n.leftWidth+h-Math.floor(l.x1),n.left+=u+n.margin;break;case wa:v+=h+Math.ceil(l.x2),n.right+=u+n.margin;break;case _a:g-=u+h-Math.floor(l.y1),n.top+=s+n.margin;break;case Aa:g+=h+Math.ceil(l.y2),n.bottom+=s+n.margin;break;case ka:v+=h,g+=h;break;case Ma:v+=a-s-h,g+=h;break;case Ta:v+=h,g+=o-u-h;break;case Sa:v+=a-s-h,g+=o-u-h;break;default:v=c.x,g=c.y}return fu(p.set(v,g,v+s,g+u),c),sf(c,"x",v)|sf(c,"width",s)|sf(c,"y",g)|sf(c,"height",u)&&(c.bounds=af,t.dirty(c),c.bounds=p,t.dirty(c)),c.mark.bounds.clear().union(p)}Object(p.y)(of,rr).transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach(function(e){t.layout&&tf(n,e,t.layout),function(t,e,n){var r,i,a,o,s,u,l=e.items,c=Math.max(0,e.width||0),f=Math.max(0,e.height||0),d=(new to).set(0,0,c,f),h=d.clone(),p=d.clone(),v=[];for(s=0,u=l.length;s<u;++s)switch((i=l[s]).role){case Pa:(o=uf(i)?h:p).union(lf(t,i,c,f));break;case La:r=i;break;case Fa:v.push(i);break;case Ra:case Da:case ja:case Na:case za:case Ia:case Ba:case qa:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(v.length)for(a={leftWidth:ff(t,v),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},s=0,u=v.length;s<u;++s)if(o=df(t,v[s],a,h,p,c,f),n.autosize&&n.autosize.type===Wa){var g=v[s].items[0].datum.orient;g===xa||g===wa?d.add(o.x1,0).add(o.x2,0):g!==_a&&g!==Aa||d.add(0,o.y1).add(0,o.y2)}else d.union(o);d.union(h).union(p),r&&d.union(function(t,e,n,r,i){var a,o=e.items[0],s=o.orient,u=o.frame,l=o.anchor,c=o.offset,f=o.bounds,d=0,h=s===xa||s===wa?r:n,p=0,v=0;u!==Oa?s===xa?(d=i.y2,h=i.y1):s===wa?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2):s===xa&&(d=r,h=0);switch(a=l===Ca?d:l===Ea?h:(d+h)/2,af.clear().union(f),s){case _a:p=a,v=i.y1-c;break;case xa:p=i.x1-c,v=a;break;case wa:p=i.x2+c,v=a;break;case Aa:p=a,v=i.y2+c;break;default:p=o.x,v=o.y}f.translate(p-o.x,v-o.y),sf(o,"x",p)|sf(o,"y",v)&&(o.bounds=af,t.dirty(o),o.bounds=f,t.dirty(o));return e.bounds.clear().union(f)}(t,r,c,f,d));!function(t,e,n,r){var i=r.autosize||{},a=i.type,o=t._width,s=t._height,u=t.padding();if(t._autosize<1||!a)return;var l=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,Math.ceil(n.x2-l)),d=Math.max(0,e.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===Ua&&(o-=u.left+u.right,s-=u.top+u.bottom);a===Za?(c=0,h=0,l=o,d=s):a===Wa?(l=Math.max(0,o-c-f),d=Math.max(0,s-h-p)):a===Ga?(l=Math.max(0,o-c-f),s=d+h+p):a===Va?(o=l+c+f,d=Math.max(0,s-h-p)):a===Ya&&(o=l+c+f,s=d+h+p);t._resizeView(o,s,l,d,[c,h],i.resize)}(t,e,d,n)}(n,e,t)}),t.modified()&&e.reflow(),e};var hf="log",pf="pow",vf="sqrt",gf="band",mf="point",yf="ordinal",bf="quantile",_f="quantize",xf="threshold",wf="bin-ordinal",Af="sequential",kf=function(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0},Mf=function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}},Tf=function(t){return function(e){var n,r,i,a,o=t.range(),s=e[0],u=e[1],l=-1;for(u<s&&(r=s,s=u,u=r),i=0,a=o.length;i<a;++i)o[i]>=s&&o[i]<=u&&(l<0&&(l=i),n=i);if(!(l<0))return s=t.invertExtent(o[l]),u=t.invertExtent(o[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}},Sf=pa(Ar),Cf=Sf.right,Ef=Sf.left,Of=Cf,Pf=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Lf=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Pf(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};var Rf=Lf(Pf),Df=Rf.right,Ff=(Rf.left,Df);var jf=function(t){return null===t?NaN:+t},Nf=Array.prototype,zf=(Nf.slice,Nf.map,Math.sqrt(50)),If=Math.sqrt(10),Bf=Math.sqrt(2),qf=function(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=Uf(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a};function Uf(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=zf?10:a>=If?5:a>=Bf?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=zf?10:a>=If?5:a>=Bf?2:1)}function Hf(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=zf?i*=10:a>=If?i*=5:a>=Bf&&(i*=2),e<t?-i:i}var Wf=function(t,e,n){if(null==n&&(n=jf),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}};function Gf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Vf(){}function Yf(t,e){var n=new Vf;if(t instanceof Vf)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}Vf.prototype=Yf.prototype={constructor:Vf,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Zf=Yf,Xf=function(){var t,e,n,r=[],i=[];function a(n,i,o,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,l,c,f=-1,d=n.length,h=r[i++],p=Zf(),v=o();++f<d;)(c=p.get(u=h(l=n[f])+""))?c.push(l):p.set(u,[l]);return p.each(function(t,e){s(v,e,a(t,i,o,s))}),v}return n={object:function(t){return a(t,0,$f,Jf)},map:function(t){return a(t,0,Kf,Qf)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var o,s=i[a-1];return null!=e&&a>=r.length?o=n.entries():(o=[],n.each(function(e,n){o.push({key:n,values:t(e,a)})})),null!=s?o.sort(function(t,e){return s(t.key,e.key)}):o}(a(t,0,Kf,Qf),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function $f(){return{}}function Jf(t,e,n){t[e]=n}function Kf(){return Zf()}function Qf(t,e,n){t.set(e,n)}function td(){}var ed=Zf.prototype;function nd(t,e){var n=new td;if(t instanceof td)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}td.prototype=nd.prototype={constructor:td,has:ed.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ed.remove,clear:ed.clear,values:ed.keys,size:ed.size,empty:ed.empty,each:ed.each};var rd=Array.prototype,id=rd.map,ad=rd.slice,od={name:"implicit"};function sd(){var t=Zf(),e=[],n=[],r=od;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==od)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Zf();for(var r,a,o=-1,s=n.length;++o<s;)t.has(a=(r=n[o])+"")||t.set(a,e.push(r));return i},i.range=function(t){return arguments.length?(n=ad.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return sd(e,n).unknown(r)},Gf.apply(i,arguments),i}var ud=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ld(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function cd(){}var fd="\\s*([+-]?\\d+)\\s*",dd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",hd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pd=/^#([0-9a-f]{3})$/,vd=/^#([0-9a-f]{6})$/,gd=new RegExp("^rgb\\("+[fd,fd,fd]+"\\)$"),md=new RegExp("^rgb\\("+[hd,hd,hd]+"\\)$"),yd=new RegExp("^rgba\\("+[fd,fd,fd,dd]+"\\)$"),bd=new RegExp("^rgba\\("+[hd,hd,hd,dd]+"\\)$"),_d=new RegExp("^hsl\\("+[dd,hd,hd]+"\\)$"),xd=new RegExp("^hsla\\("+[dd,hd,hd,dd]+"\\)$"),wd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ad(){return this.rgb().formatHex()}function kd(){return this.rgb().formatRgb()}function Md(t){var e;return t=(t+"").trim().toLowerCase(),(e=pd.exec(t))?new Od((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=vd.exec(t))?Td(parseInt(e[1],16)):(e=gd.exec(t))?new Od(e[1],e[2],e[3],1):(e=md.exec(t))?new Od(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=yd.exec(t))?Sd(e[1],e[2],e[3],e[4]):(e=bd.exec(t))?Sd(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_d.exec(t))?Dd(e[1],e[2]/100,e[3]/100,1):(e=xd.exec(t))?Dd(e[1],e[2]/100,e[3]/100,e[4]):wd.hasOwnProperty(t)?Td(wd[t]):"transparent"===t?new Od(NaN,NaN,NaN,0):null}function Td(t){return new Od(t>>16&255,t>>8&255,255&t,1)}function Sd(t,e,n,r){return r<=0&&(t=e=n=NaN),new Od(t,e,n,r)}function Cd(t){return t instanceof cd||(t=Md(t)),t?new Od((t=t.rgb()).r,t.g,t.b,t.opacity):new Od}function Ed(t,e,n,r){return 1===arguments.length?Cd(t):new Od(t,e,n,null==r?1:r)}function Od(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Pd(){return"#"+Rd(this.r)+Rd(this.g)+Rd(this.b)}function Ld(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Rd(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Dd(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Nd(t,e,n,r)}function Fd(t){if(t instanceof Nd)return new Nd(t.h,t.s,t.l,t.opacity);if(t instanceof cd||(t=Md(t)),!t)return new Nd;if(t instanceof Nd)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Nd(o,s,u,t.opacity)}function jd(t,e,n,r){return 1===arguments.length?Fd(t):new Nd(t,e,n,null==r?1:r)}function Nd(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function zd(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ud(cd,Md,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ad,formatHex:Ad,formatHsl:function(){return Fd(this).formatHsl()},formatRgb:kd,toString:kd}),ud(Od,Ed,ld(cd,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Od(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Od(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pd,formatHex:Pd,formatRgb:Ld,toString:Ld})),ud(Nd,jd,ld(cd,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Nd(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Nd(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Od(zd(t>=240?t-240:t+120,i,r),zd(t,i,r),zd(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Id=Math.PI/180,Bd=180/Math.PI,qd=.96422,Ud=1,Hd=.82521,Wd=4/29,Gd=6/29,Vd=3*Gd*Gd,Yd=Gd*Gd*Gd;function Zd(t){if(t instanceof $d)return new $d(t.l,t.a,t.b,t.opacity);if(t instanceof rh)return ih(t);t instanceof Od||(t=Cd(t));var e,n,r=th(t.r),i=th(t.g),a=th(t.b),o=Jd((.2225045*r+.7168786*i+.0606169*a)/Ud);return r===i&&i===a?e=n=o:(e=Jd((.4360747*r+.3850649*i+.1430804*a)/qd),n=Jd((.0139322*r+.0971045*i+.7141733*a)/Hd)),new $d(116*o-16,500*(e-o),200*(o-n),t.opacity)}function Xd(t,e,n,r){return 1===arguments.length?Zd(t):new $d(t,e,n,null==r?1:r)}function $d(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Jd(t){return t>Yd?Math.pow(t,1/3):t/Vd+Wd}function Kd(t){return t>Gd?t*t*t:Vd*(t-Wd)}function Qd(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function th(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function eh(t){if(t instanceof rh)return new rh(t.h,t.c,t.l,t.opacity);if(t instanceof $d||(t=Zd(t)),0===t.a&&0===t.b)return new rh(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Bd;return new rh(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function nh(t,e,n,r){return 1===arguments.length?eh(t):new rh(t,e,n,null==r?1:r)}function rh(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function ih(t){if(isNaN(t.h))return new $d(t.l,0,0,t.opacity);var e=t.h*Id;return new $d(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ud($d,Xd,ld(cd,{brighter:function(t){return new $d(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new $d(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Od(Qd(3.1338561*(e=qd*Kd(e))-1.6168667*(t=Ud*Kd(t))-.4906146*(n=Hd*Kd(n))),Qd(-.9787684*e+1.9161415*t+.033454*n),Qd(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ud(rh,nh,ld(cd,{brighter:function(t){return new rh(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new rh(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return ih(this).rgb()}}));var ah=-.29227,oh=-.90649,sh=1.97294,uh=sh*oh,lh=1.78277*sh,ch=1.78277*ah- -.14861*oh;function fh(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof dh)return new dh(t.h,t.s,t.l,t.opacity);t instanceof Od||(t=Cd(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ch*r+uh*e-lh*n)/(ch+uh-lh),a=r-i,o=(sh*(n-i)-ah*a)/oh,s=Math.sqrt(o*o+a*a)/(sh*i*(1-i)),u=s?Math.atan2(o,a)*Bd-120:NaN;return new dh(u<0?u+360:u,s,i,t.opacity)}(t):new dh(t,e,n,null==r?1:r)}function dh(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function hh(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}ud(dh,fh,ld(cd,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new dh(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new dh(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Id,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Od(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(ah*r+oh*i)),255*(e+n*(sh*r)),this.opacity)}}));var ph=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return hh((n-r/e)*e,o,i,a,s)}},vh=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return hh((n-r/e)*e,i,a,o,s)}},gh=function(t){return function(){return t}};function mh(t,e){return function(n){return t+n*e}}function yh(t,e){var n=e-t;return n?mh(t,n>180||n<-180?n-360*Math.round(n/360):n):gh(isNaN(t)?e:t)}function bh(t){return 1===(t=+t)?_h:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):gh(isNaN(e)?n:e)}}function _h(t,e){var n=e-t;return n?mh(t,n):gh(isNaN(t)?e:t)}var xh=function t(e){var n=bh(e);function r(t,e){var r=n((t=Ed(t)).r,(e=Ed(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=_h(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function wh(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ed(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var Ah=wh(ph),kh=wh(vh),Mh=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=jh(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}},Th=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},Sh=function(t,e){return e-=t=+t,function(n){return t+e*n}},Ch=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=jh(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Eh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oh=new RegExp(Eh.source,"g");var Ph,Lh,Rh,Dh,Fh=function(t,e){var n,r,i,a=Eh.lastIndex=Oh.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=Eh.exec(t))&&(r=Oh.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Sh(n,r)})),a=Oh.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},jh=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?gh(e):("number"===r?Sh:"string"===r?(n=Md(e))?(e=n,xh):Fh:e instanceof Md?xh:e instanceof Date?Th:Array.isArray(e)?Mh:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?Ch:Sh)(t,e)},Nh=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},zh=function(t,e){var n=yh(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Ih=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},Bh=180/Math.PI,qh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Uh=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Bh,skewX:Math.atan(u)*Bh,scaleX:o,scaleY:s}};function Hh(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:Sh(t,i)},{i:u-2,x:Sh(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Sh(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Sh(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Sh(t,n)},{i:s-2,x:Sh(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Wh=Hh(function(t){return"none"===t?qh:(Ph||(Ph=document.createElement("DIV"),Lh=document.documentElement,Rh=document.defaultView),Ph.style.transform=t,t=Rh.getComputedStyle(Lh.appendChild(Ph),null).getPropertyValue("transform"),Lh.removeChild(Ph),t=t.slice(7,-1).split(","),Uh(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Gh=Hh(function(t){return null==t?qh:(Dh||(Dh=document.createElementNS("http://www.w3.org/2000/svg","g")),Dh.setAttribute("transform",t),(t=Dh.transform.baseVal.consolidate())?(t=t.matrix,Uh(t.a,t.b,t.c,t.d,t.e,t.f)):qh)},", ",")",")"),Vh=Math.SQRT2;function Yh(t){return((t=Math.exp(t))+1/t)/2}var Zh=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],l=e[2],c=s-i,f=u-a,d=c*c+f*f;if(d<1e-12)r=Math.log(l/o)/Vh,n=function(t){return[i+t*c,a+t*f,o*Math.exp(Vh*t*r)]};else{var h=Math.sqrt(d),p=(l*l-o*o+4*d)/(2*o*2*h),v=(l*l-o*o-4*d)/(2*l*2*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/Vh,n=function(t){var e,n=t*r,s=Yh(g),u=o/(2*h)*(s*(e=Vh*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*c,a+u*f,o*s/Yh(Vh*n+g)]}}return n.duration=1e3*r,n};function Xh(t){return function(e,n){var r=t((e=jd(e)).h,(n=jd(n)).h),i=_h(e.s,n.s),a=_h(e.l,n.l),o=_h(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var $h=Xh(yh),Jh=Xh(_h);function Kh(t,e){var n=_h((t=Xd(t)).l,(e=Xd(e)).l),r=_h(t.a,e.a),i=_h(t.b,e.b),a=_h(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function Qh(t){return function(e,n){var r=t((e=nh(e)).h,(n=nh(n)).h),i=_h(e.c,n.c),a=_h(e.l,n.l),o=_h(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var tp=Qh(yh),ep=Qh(_h);function np(t){return function e(n){function r(e,r){var i=t((e=fh(e)).h,(r=fh(r)).h),a=_h(e.s,r.s),o=_h(e.l,r.l),s=_h(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var rp=np(yh),ip=np(_h);function ap(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}var op=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},sp=function(t){return function(){return t}},up=function(t){return+t},lp=[0,1];function cp(t){return t}function fp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:sp(isNaN(e)?NaN:.5)}function dp(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function hp(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=fp(i,r),a=n(o,a)):(r=fp(r,i),a=n(a,o)),function(t){return a(r(t))}}function pp(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=fp(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=Ff(t,e,1,r)-1;return a[n](i[n](e))}}function vp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gp(){var t,e,n,r,i,a,o=lp,s=lp,u=jh,l=cp;function c(){return r=Math.min(o.length,s.length)>2?pp:hp,i=a=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,u)))(t(l(e)))}return f.invert=function(n){return l(e((a||(a=r(s,o.map(t),Sh)))(n)))},f.domain=function(t){return arguments.length?(o=id.call(t,up),l===cp||(l=dp(o)),c()):o.slice()},f.range=function(t){return arguments.length?(s=ad.call(t),c()):s.slice()},f.rangeRound=function(t){return s=ad.call(t),u=Ih,c()},f.clamp=function(t){return arguments.length?(l=t?dp(o):cp,f):l!==cp},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function mp(t,e){return gp()(t,e)}var yp=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},bp=function(t){return(t=yp(Math.abs(t)))?t[1]:NaN},_p=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xp(t){if(!(e=_p.exec(t)))throw new Error("invalid format: "+t);var e;return new wp({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function wp(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}xp.prototype=wp.prototype,wp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ap,kp,Mp,Tp,Sp=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},Cp=function(t,e){var n=yp(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Ep={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Cp(100*t,e)},r:Cp,s:function(t,e){var n=yp(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ap=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+yp(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Op=function(t){return t},Pp=Array.prototype.map,Lp=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],Rp=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Op:(e=Pp.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Op:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(Pp.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=xp(t)).fill,n=t.align,f=t.sign,d=t.symbol,h=t.zero,p=t.width,v=t.comma,g=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):Ep[y]||(void 0===g&&(g=12),m=!0,y="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===d?a:/[%p]/.test(y)?u:"",x=Ep[y],w=/[defgprs%]/.test(y);function A(t){var i,a,u,d=b,A=_;if("c"===y)A=x(t)+A,t="";else{var k=(t=+t)<0;if(t=isNaN(t)?c:x(Math.abs(t),g),m&&(t=Sp(t)),k&&0===+t&&(k=!1),d=(k?"("===f?f:l:"-"===f||"("===f?"":f)+d,A=("s"===y?Lp[8+Ap/3]:"")+A+(k&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){A=(46===u?o+t.slice(i+1):t.slice(i))+A,t=t.slice(0,i);break}}v&&!h&&(t=r(t,1/0));var M=d.length+t.length+A.length,T=M<p?new Array(p-M+1).join(e):"";switch(v&&h&&(t=r(T+t,T.length?p-A.length:1/0),T=""),n){case"<":t=d+t+A+T;break;case"=":t=d+T+t+A;break;case"^":t=T.slice(0,M=T.length>>1)+d+t+A+T.slice(M);break;default:t=T+d+t+A}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),A.toString=function(){return t+""},A}return{format:f,formatPrefix:function(t,e){var n=f(((t=xp(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(bp(e)/3))),i=Math.pow(10,-r),a=Lp[8+r/3];return function(t){return n(i*t)+a}}}};function Dp(t){return kp=Rp(t),Mp=kp.format,Tp=kp.formatPrefix,kp}Dp({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Fp=function(t,e,n,r){var i,a=Hf(t,e,n);switch((r=xp(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(bp(e)/3)))-bp(Math.abs(t)))}(a,o))||(r.precision=i),Tp(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bp(e)-bp(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-bp(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return Mp(r)};function jp(t){var e=t.domain;return t.ticks=function(t){var n=e();return qf(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Fp(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,s=i[a],u=i[o];return u<s&&(r=s,s=u,u=r,r=a,a=o,o=r),(r=Uf(s,u,n))>0?r=Uf(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=Uf(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}function Np(){var t=mp(cp,cp);return t.copy=function(){return vp(t,Np())},Gf.apply(t,arguments),jp(t)}var zp=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t};function Ip(t){return Math.log(t)}function Bp(t){return Math.exp(t)}function qp(t){return-Math.log(-t)}function Up(t){return-Math.exp(-t)}function Hp(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Wp(t){return function(e){return-t(-e)}}function Gp(t){var e,n,r=t(Ip,Bp),i=r.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?Hp:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),i()[0]<0?(e=Wp(e),n=Wp(n),t(qp,Up)):t(Ip,Bp),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r,o=i(),s=o[0],u=o[o.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=e(s),h=e(u),p=null==t?10:+t,v=[];if(!(a%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,s>0){for(;d<h;++d)for(c=1,l=n(d);c<a;++c)if(!((f=l*c)<s)){if(f>u)break;v.push(f)}}else for(;d<h;++d)for(c=a-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;v.push(f)}}else v=qf(d,h,Math.min(h-d,p)).map(n);return r?v.reverse():v},r.tickFormat=function(t,i){if(null==i&&(i=10===a?".0e":","),"function"!==typeof i&&(i=Mp(i)),t===1/0)return i;null==t&&(t=10);var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(zp(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function Vp(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Yp(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Zp(t){return t<0?-t*t:t*t}function Xp(t){var e=t(cp,cp),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(cp,cp):.5===n?t(Yp,Zp):t(Vp(n),Vp(1/n)):n},jp(e)}function $p(){var t=Xp(gp());return t.copy=function(){return vp(t,$p()).exponent(t.exponent())},Gf.apply(t,arguments),t}var Jp=1e3,Kp=60*Jp,Qp=60*Kp,tv=24*Qp,ev=7*tv,nv=30*tv,rv=365*tv;function iv(t){return new Date(t)}function av(t){return t instanceof Date?+t:+new Date(+t)}function ov(t,e,n,r,i,a,o,s,u){var l=mp(cp,cp),c=l.invert,f=l.domain,d=u(".%L"),h=u(":%S"),p=u("%I:%M"),v=u("%I %p"),g=u("%a %d"),m=u("%b %d"),y=u("%B"),b=u("%Y"),_=[[o,1,Jp],[o,5,5*Jp],[o,15,15*Jp],[o,30,30*Jp],[a,1,Kp],[a,5,5*Kp],[a,15,15*Kp],[a,30,30*Kp],[i,1,Qp],[i,3,3*Qp],[i,6,6*Qp],[i,12,12*Qp],[r,1,tv],[r,2,2*tv],[n,1,ev],[e,1,nv],[e,3,3*nv],[t,1,rv]];function x(s){return(o(s)<s?d:a(s)<s?h:i(s)<s?p:r(s)<s?v:e(s)<s?n(s)<s?g:m:t(s)<s?y:b)(s)}function w(e,n,r,i){if(null==e&&(e=10),"number"===typeof e){var a=Math.abs(r-n)/e,o=Lf(function(t){return t[2]}).right(_,a);o===_.length?(i=Hf(n/rv,r/rv,e),e=t):o?(i=(o=_[a/_[o-1][2]<_[o][2]/a?o-1:o])[1],e=o[0]):(i=Math.max(Hf(n,r,e),1),e=s)}return null==i?e:e.every(i)}return l.invert=function(t){return new Date(c(t))},l.domain=function(t){return arguments.length?f(id.call(t,av)):f().map(iv)},l.ticks=function(t,e){var n,r=f(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=w(t,i,a,e))?n.range(i,a+1):[],o?n.reverse():n},l.tickFormat=function(t,e){return null==e?x:u(e)},l.nice=function(t,e){var n=f();return(t=w(t,n[0],n[n.length-1],e))?f(zp(n,t)):l},l.copy=function(){return vp(l,ov(t,e,n,r,i,a,o,s,u))},l}function sv(){var t,e,n=sd().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,u=0,l=.5;function c(){var n=r().length,c=a[1]<a[0],f=a[c-0],d=a[1-c],h=kf(n,s,u);t=(d-f)/(h||1),o&&(t=Math.floor(t)),f+=(d-f-t*(n-s))*l,e=t*(1-s),o&&(f=Math.round(f),e=Math.round(e));var p=_i(n).map(function(e){return f+t*e});return i(c?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,c()):o},n.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),c()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var n,o,s,u=+t[0],l=+t[1],c=a[1]<a[0],f=c?i().reverse():i(),d=f.length-1;if(u===u&&l===l&&(l<u&&(s=u,u=l,l=s),!(l<f[0]||u>a[1-c])))return n=Math.max(0,Cf(f,u)-1),o=u===l?n:Cf(f,l)-1,u-f[n]>e+1e-10&&++n,c&&(s=n,n=d-o,o=d-s),n>o?void 0:r().slice(n,o+1)}},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return sv().domain(r()).range(a).round(o).paddingInner(s).paddingOuter(u).align(l)},c()}var uv=Array.prototype.map,lv=Array.prototype.slice;function cv(t){return uv.call(t,function(t){return+t})}function fv(t,e){return arguments.length>1?(dv[t]=function(t,e){return function(){var n=e();return n.invertRange||(n.invertRange=n.invert?Mf(n):n.invertExtent?Tf(n):void 0),n.type=t,n}}(t,e),this):dv.hasOwnProperty(t)?dv[t]:void 0}var dv={identity:function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=id.call(t,up),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?id.call(e,up):[0,1],jp(r)},linear:Np,log:function t(){var e=Gp(gp()).domain([1,10]);return e.copy=function(){return vp(e,t()).base(e.base())},Gf.apply(e,arguments),e},ordinal:sd,pow:$p,sqrt:function(){return $p.apply(null,arguments).exponent(.5)},quantile:function t(){var e,n=[],r=[],i=[];function a(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=Wf(n,t/e);return o}function o(t){return isNaN(t=+t)?e:r[Ff(i,t)]}return o.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var e,r=0,i=t.length;r<i;++r)null==(e=t[r])||isNaN(e=+e)||n.push(e);return n.sort(Pf),a()},o.range=function(t){return arguments.length?(r=ad.call(t),a()):r.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return i.slice()},o.copy=function(){return t().domain(n).range(r).unknown(e)},Gf.apply(o,arguments)},quantize:function t(){var e,n=0,r=1,i=1,a=[.5],o=[0,1];function s(t){return t<=t?o[Ff(a,t,0,i)]:e}function u(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*n)/(i+1);return s}return s.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],u()):[n,r]},s.range=function(t){return arguments.length?(i=(o=ad.call(t)).length-1,u()):o.slice()},s.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=i?[a[i-1],r]:[a[e-1],a[e]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return a.slice()},s.copy=function(){return t().domain([n,r]).range(o).unknown(e)},Gf.apply(jp(s),arguments)},threshold:function t(){var e,n=[.5],r=[0,1],i=1;function a(t){return t<=t?r[Ff(n,t,0,i)]:e}return a.domain=function(t){return arguments.length?(n=ad.call(t),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(t){return arguments.length?(r=ad.call(t),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(r).unknown(e)},Gf.apply(a,arguments)},time:function(){return Gf.apply(ov(Jt,Xt,qt,It,Nt,Ft,Rt,Et,_e).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},utc:function(){return Gf.apply(ov(ve,he,ae,re,ee,Qt,Rt,Et,we).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},band:sv,point:function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t(n())},e}(sv().paddingInner(1))},sequential:function t(e){var n=Np(),r=0,i=1,a=!1;function o(){var t=n.domain();r=t[0],i=Object(p.S)(t)-r}function s(t){var n=(t-r)/i;return e(a?Math.max(0,Math.min(1,n)):n)}return s.clamp=function(t){return arguments.length?(a=!!t,s):a},s.domain=function(t){return arguments.length?(n.domain(t),o(),s):n.domain()},s.interpolator=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return t().domain(n.domain()).clamp(a).interpolator(e)},s.ticks=function(t){return n.ticks(t)},s.tickFormat=function(t,e){return n.tickFormat(t,e)},s.nice=function(t){return n.nice(t),o(),s},s},"bin-linear":function t(){var e=Np(),n=[];function r(t){return e(t)}return r.domain=function(t){return arguments.length?(function(t){n=cv(t),e.domain([n[0],Object(p.S)(n)])}(t),r):n.slice()},r.range=function(t){return arguments.length?(e.range(t),r):e.range()},r.rangeRound=function(t){return arguments.length?(e.rangeRound(t),r):e.rangeRound()},r.interpolate=function(t){return arguments.length?(e.interpolate(t),r):e.interpolate()},r.invert=function(t){return e.invert(t)},r.ticks=function(t){var e=n.length,i=~~(e/(t||e));return i<2?r.domain():n.filter(function(t,e){return!(e%i)})},r.tickFormat=function(){return e.tickFormat.apply(e,arguments)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r},"bin-ordinal":function t(){var e=[],n=[];function r(t){return null==t||t!==t?void 0:n[(Of(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=cv(t),r):e.slice()},r.range=function(t){return arguments.length?(n=lv.call(t),r):n.slice()},r.tickFormat=function(){var t=Np().domain([e[0],Object(p.S)(e)]);return t.tickFormat.apply(t,arguments)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}};for(var hv in dv)fv(hv,dv[hv]);function pv(t,e){var n=e[0],r=Object(p.S)(e)-n;return function(e){return t(n+e*r)}}function vv(t,e,n){var r=n-e;return r&&isFinite(r)?"linear"===t.type||"sequential"===t.type?function(t){return(t-e)/r}:t.copy().domain([e,n]).range([0,1]).interpolate(gv):Object(p.l)(0)}function gv(t,e){var n=e-t;return function(e){return t+e*n}}function mv(t,e){var n=a[function(t){return"interpolate"+t.toLowerCase().split("-").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function yv(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var bv=yv("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),_v=yv("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),xv=yv("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),wv=yv("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Av=yv("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),kv=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(yv),Mv=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},Tv=Mv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Sv=Mv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Cv=Mv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ev=Mv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ov=Mv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pv=Mv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Lv=Mv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Rv=Mv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Dv=Mv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Fv(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var jv=Fv(Mv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Nv=Fv(Mv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),zv=Fv(Mv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Iv=Fv(Mv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Bv=ip(fh(-100,.75,.35),fh(80,1.5,.8)),qv=ip(fh(260,.75,.35),fh(80,1.5,.8)),Uv=fh(),Hv=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Uv.h=360*t-100,Uv.s=1.5-1.5*e,Uv.l=.8-.9*e,Uv+""},Wv=Ed(),Gv=Math.PI/3,Vv=2*Math.PI/3,Yv=function(t){var e;return t=(.5-t)*Math.PI,Wv.r=255*(e=Math.sin(t))*e,Wv.g=255*(e=Math.sin(t+Gv))*e,Wv.b=255*(e=Math.sin(t+Vv))*e,Wv+""},Zv=Mv("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Xv=function(t){return Ah(t[t.length-1])},$v=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Mv),Jv=Xv($v),Kv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Mv),Qv=Xv(Kv),tg=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Mv),eg=Xv(tg),ng=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Mv),rg=Xv(ng),ig=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Mv),ag=Xv(ig),og=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Mv),sg=Xv(og),ug=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Mv),lg=Xv(ug),cg=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Mv),fg=Xv(cg),dg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Mv),hg=Xv(dg),pg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Mv),vg=Xv(pg),gg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Mv),mg=Xv(gg),yg=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Mv),bg=Xv(yg),_g=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Mv),xg=Xv(_g),wg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Mv),Ag=Xv(wg),kg=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Mv),Mg=Xv(kg),Tg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Mv),Sg=Xv(Tg),Cg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Mv),Eg=Xv(Cg),Og=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Mv),Pg=Xv(Og),Lg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Mv),Rg=Xv(Lg),Dg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Mv),Fg=Xv(Dg),jg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Mv),Ng=Xv(jg),zg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Mv),Ig=Xv(zg),Bg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Mv),qg=Xv(Bg),Ug=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Mv),Hg=Xv(Ug),Wg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Mv),Gg=Xv(Wg),Vg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Mv),Yg=Xv(Vg),Zg=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Mv),Xg=Xv(Zg),$g=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},Jg=ip(fh(300,.5,0),fh(-240,.5,1)),Kg=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},Qg={blueorange:kv},tm={category10:Tv,accent:Sv,dark2:Cv,paired:Ev,pastel1:Ov,pastel2:Pv,set1:Lv,set2:Rv,set3:Dv,category20:bv,category20b:_v,category20c:xv,tableau10:wv,tableau20:Av,viridis:jv,magma:Nv,inferno:zv,plasma:Iv,rainbow:Hv,sinebow:Yv,blueorange:Ah(Object(p.S)(kv))};function em(t,e){tm[t]=o["interpolate"+e],Qg[t]=o["scheme"+e]}function nm(t,e){if(arguments.length>1)return tm[t]=e,this;var n=t.split("-");return t=n[0],(n=+n[1]+1)&&Qg.hasOwnProperty(t)?Qg[t][n-1]:!n&&tm.hasOwnProperty(t)?tm[t]:void 0}function rm(t,e,n){return arguments.length>1?(Qg[t]=e,tm[t]=n||Ah(Object(p.S)(e)),this):Qg.hasOwnProperty(t)?Qg[t]:void 0}em("blues","Blues"),em("greens","Greens"),em("greys","Greys"),em("purples","Purples"),em("reds","Reds"),em("oranges","Oranges"),em("brownbluegreen","BrBG"),em("purplegreen","PRGn"),em("pinkyellowgreen","PiYG"),em("purpleorange","PuOr"),em("redblue","RdBu"),em("redgrey","RdGy"),em("redyellowblue","RdYlBu"),em("redyellowgreen","RdYlGn"),em("spectral","Spectral"),em("bluegreen","BuGn"),em("bluepurple","BuPu"),em("greenblue","GnBu"),em("orangered","OrRd"),em("purplebluegreen","PuBuGn"),em("purpleblue","PuBu"),em("purplered","PuRd"),em("redpurple","RdPu"),em("yellowgreenblue","YlGnBu"),em("yellowgreen","YlGn"),em("yelloworangebrown","YlOrBr"),em("yelloworangered","YlOrRd");var im={millisecond:Et,second:Rt,minute:Ft,hour:Nt,day:It,week:qt,month:Xt,year:Jt},am={millisecond:Et,second:Rt,minute:Qt,hour:ee,day:re,week:ae,month:he,year:ve};function om(t){return im.hasOwnProperty(t)&&im[t]}function sm(t){return am.hasOwnProperty(t)&&am[t]}function um(t,e){var n;return Object(p.F)(e)&&(n=e.step,e=e.interval),Object(p.H)(e)&&(e="time"===t.type?om(e):"utc"===t.type?sm(e):Object(p.n)("Only time and utc scales accept interval strings."),n&&(e=e.every(n))),e}function lm(t,e,n){var r=t.range(),i=r[0],a=Object(p.S)(r);if(i>a&&(r=a,a=i,i=r),e=e.filter(function(e){return!((e=t(e))<i||e>a)}),n>0&&e.length>1){for(var o=[e[0],Object(p.S)(e)];e.length>n&&e.length>=3;)e=e.filter(function(t,e){return!(e%2)});e.length<3&&(e=o)}return e}function cm(t,e){return t.ticks?t.ticks(e):t.domain()}function fm(t,e,n){var r,i,a=t.tickFormat?t.tickFormat(e,n):n?Mp(n):String;return t.type===hf?(r=a,i=function(t){var e=xp(t||",");if(null==e.precision){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return n=Mp(e),r=Mp(".1f")(1)[1],function(t){var e,i,a=n(t),o=a.indexOf(r);if(o<0)return a;for(e=function(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}(a,o),i=e<a.length?a.slice(e):"";--e>o;)if("0"!==a[e]){++e;break}return a.slice(0,e)+i}}return Mp(e);var n,r}(n),function(t){return r(t)?i(t):""}):a}function dm(t){rr.call(this,null,t)}function hm(t){rr.call(this,null,t)}function pm(){return x({})}function vm(t){return t.exit}function gm(t){rr.call(this,null,t)}Object(p.y)(dm,rr).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,a=null==t.count?t.values?t.values.length:10:um(i,t.count),o=t.format||fm(i,a,t.formatSpecifier),s=t.values?lm(i,t.values,a):cm(i,a);return r&&(n.rem=r),r=s.map(function(t,e){return x({index:e/(s.length-1),value:t,label:o(t)})}),t.extra&&r.length&&r.push(x({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Object(p.y)(hm,rr).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||pm,a=t.key||b,o=this.value;return Object(p.A)(r.encode)&&(r.encode=null),o&&(t.modified("key")||e.modified(a))&&Object(p.n)("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=Object(p.s)().test(vm),o.lookup=function(t){return o.get(a(t))}),e.visit(e.ADD,function(t){var e=a(t),n=o.get(e);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(e,n=i(t)),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,function(t){var e=a(t),n=o.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,function(t){var e=a(t),n=o.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),t.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},Object(p.y)(gm,rr).transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.encoders,i=e.encode;if(Object(p.A)(i)){if(!n.changed()&&!i.every(function(t){return r[t]}))return e.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||p.r,s=r.enter||p.r,u=r.exit||p.r,l=(i&&!a?r[i]:o)||p.r;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(e){s(e,t),o(e,t),l!==p.r&&l!==o&&l(e,t)}),n.modifies(s.output),n.modifies(o.output),l!==p.r&&l!==o&&n.modifies(l.output)),e.changed(e.REM)&&u!==p.r&&(e.visit(e.REM,function(e){u(e,t)}),n.modifies(u.output)),a||l!==p.r){var c=e.MOD|(t.modified()?e.REFLOW:0);a?(e.visit(c,function(e){var r=s(e,t);(l(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(s.output)):e.visit(c,function(e){l(e,t)&&n.mod.push(e)}),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation};var mm="symbol",ym="discrete",bm={};function _m(t,e,n){return n===mm&&bm[t.type]?function(t){return function(e,n,r){var i=r[n+1]||r.max||1/0,a=xm(e,t),o=xm(i,t);return a&&o?a+"\u2013"+o:o?"< "+o:"\u2265 "+a}}(e):n===ym?function(t){return function(e,n){return n?t(e):null}}(e):function(t){return function(e){return t(e)}}(e)}function xm(t,e){return isFinite(t)?e(t):null}function wm(t){rr.call(this,[],t)}bm[bf]=function(t){var e=[-1/0].concat(t.quantiles());return e.max=1/0,e},bm[_f]=function(t){var e=t.domain(),n=e[0],r=Object(p.S)(e),i=t.range().length,a=new Array(i),o=0;a[0]=-1/0;for(;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=1/0,a},bm[xf]=function(t){var e=[-1/0].concat(t.domain());return e.max=1/0,e},bm["bin-linear"]=bm[wf]=function(t){var e=t.domain();return e.max=e.pop(),e},Object(p.y)(wm,rr).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,a,o=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,u=t.type||mm,l=t.scale,c=null==t.count?5:um(l,t.count),f=t.format||fm(l,c,t.formatSpecifier),d=t.values||function(t,e){var n=bm[t.type];return n?n(t):cm(t,e)}(l,c);return f=_m(l,f,u),s&&(o.rem=s),u===mm?(Object(p.D)(i=t.size)?(t.values||0!==l(d[0])||(d=d.slice(1)),a=d.reduce(function(e,n){return Math.max(e,i(n,t))},0)):i=Object(p.l)(a=i||8),s=d.map(function(e,n){return x({index:n,label:f(e,n,d),value:e,offset:a,size:i(e,t)})})):"gradient"===u?(n=l.domain(),r=vv(l,n[0],Object(p.S)(n)),d.length<3&&!t.values&&n[0]!==Object(p.S)(n)&&(d=[n[0],Object(p.S)(n)]),s=d.map(function(t,e){return x({index:e,label:f(t,e,d),value:t,perc:r(t)})})):(i=d.length-1,r=function(t){var e=t.domain(),n=e.length-1,r=+e[0],i=+Object(p.S)(e),a=i-r;if(t.type===xf){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(t){return(t-r)/a}}(l),s=d.map(function(t,e){return x({index:e,label:f(t,e,d),value:t,perc:e?r(t):0,perc2:e===i?1:r(d[e+1])})})),o.source=s,o.add=s,this.value=s,o};var Am=Object(p.s)({line:Em,"line-radial":function(t,e,n,r){return Em(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:Om,"arc-radial":function(t,e,n,r){return Om(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:Pm,"curve-radial":function(t,e,n,r){return Pm(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n},"orthogonal-vertical":function(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r},"orthogonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*a+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*o+","+e*s+"L"+r*o+","+r*s},"diagonal-horizontal":function(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s}});function km(t){return t.source.x}function Mm(t){return t.source.y}function Tm(t){return t.target.x}function Sm(t){return t.target.y}function Cm(t){rr.call(this,{},t)}function Em(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function Om(t,e,n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a)/2;return"M"+t+","+e+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function Pm(t,e,n,r){var i=n-t,a=r-e,o=.2*(i+a),s=.2*(a-i);return"M"+t+","+e+"C"+(t+o)+","+(e+s)+" "+(n+s)+","+(r-o)+" "+n+","+r}function Lm(t){rr.call(this,null,t)}Cm.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(p.y)(Cm,rr).transform=function(t,e){var n=t.sourceX||km,r=t.sourceY||Mm,i=t.targetX||Tm,a=t.targetY||Sm,o=t.as||"path",s=t.orient||"vertical",u=t.shape||"line",l=Am.get(u+"-"+s)||Am.get(u);return l||Object(p.n)("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,function(t){t[o]=l(n(t),r(t),i(t),a(t))}),e.reflow(t.modified()).modifies(o)},Lm.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(p.y)(Lm,rr).transform=function(t,e){var n,r,i,a=t.as||["startAngle","endAngle"],o=a[0],s=a[1],u=t.field||p.M,l=t.startAngle||0,c=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,d=f.map(u),h=d.length,v=l,g=(c-l)/function(t,e){var n=0;if(void 0===e){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;(u=+u)&&(n+=u)}}catch(g){i=!0,a=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var l=-1,c=!0,f=!1,d=void 0;try{for(var h,p=t[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;(v=+e(v,++l,t))&&(n+=v)}}catch(g){f=!0,d=g}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}return n}(d),m=_i(h);for(t.sort&&m.sort(function(t,e){return d[t]-d[e]}),n=0;n<h;++n)i=d[m[n]],(r=f[m[n]])[o]=v,r[s]=v+=i*g;return this.value=d,e.reflow(t.modified()).modifies(a)};var Rm=5,Dm=Object(p.bb)(["linear",pf,vf]),Fm=Object(p.bb)(["linear",hf,pf,vf,"time","utc"]),jm=Object(p.bb)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Nm(t){rr.call(this,null,t),this.modified(!0)}function zm(t,e,n){t===hf&&(Math.abs(e.reduce(function(t,e){return t+(e<0?-1:e>0?1:0)},0))!==e.length&&n.warn("Log scale domain includes zero: "+Object(p.X)(e)));return e}function Im(t,e,n){return Object(p.D)(t)&&(e||n)?pv(t,Bm(e||[0,1],n)):t}function Bm(t,e){return e?t.slice().reverse():t}function qm(t){rr.call(this,null,t)}Object(p.y)(Nm,rr).transform=function(t,e){var n,r=e.dataflow,i=this.value;for(n in i&&!t.modified("type")||(this.value=i=fv((t.type||"linear").toLowerCase())()),t)if(!jm[n]){if("padding"===n&&Fm[i.type])continue;Object(p.D)(i[n])?i[n](t[n]):r.warn("Unsupported scale property: "+n)}return function(t,e,n){var r=e.round||!1,i=e.range;if(null!=e.rangeStep)i=function(t,e,n){t!==gf&&t!==mf&&Object(p.n)("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===mf?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*kf(n,i,r)]}(t.type,e,n);else if(e.scheme){if(i=function(t,e,n){var r,i=e.scheme.toLowerCase(),a=nm(i),o=e.schemeExtent;a||Object(p.n)("Unrecognized scheme name: "+e.scheme);return n=t===xf?n+1:t===wf?n-1:t===bf||t===_f?+e.schemeCount||Rm:n,t===Af?Im(a,o,e.reverse):!o&&(r=nm(i+"-"+n))?r:Object(p.D)(a)?function(t,e){for(var n=new Array(e),r=e+1,i=0;i<e;)n[i]=t(++i/r);return n}(Im(a,o),n):t===yf?a:a.slice(0,n)}(t.type,e,n),Object(p.D)(i))return t.interpolator(i)}else if(i&&t.type===Af)return t.interpolator(Ah(Bm(i,e.reverse)));i&&e.interpolate&&t.interpolate?t.interpolate(mv(e.interpolate,e.interpolateGamma)):Object(p.D)(t.round)?t.round(r):Object(p.D)(t.rangeRound)&&t.interpolate(r?Ih:jh);i&&t.range(Bm(i,e.reverse))}(i,t,function(t,e,n){var r=function(t,e,n){return e?(t.domain(zm(t.type,e,n)),e.length):-1}(t,e.domainRaw,n);if(r>-1)return r;var i,a,o=e.domain,s=t.type,u=e.zero||void 0===e.zero&&Dm[s];if(!o)return 0;Fm[s]&&e.padding&&o[0]!==Object(p.S)(o)&&(o=function(t,e,n,r,i){var a=Math.abs(Object(p.S)(n)-n[0]),o=a/(a-2*r),s=t===hf?Object(p.jb)(e,null,o):t===vf?Object(p.kb)(e,null,o,.5):t===pf?Object(p.kb)(e,null,o,i):Object(p.ib)(e,null,o);return(e=e.slice())[0]=s[0],e[e.length-1]=s[1],e}(s,o,e.range,e.padding,e.exponent));(u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(o=o.slice()).length-1||1,u&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[i]=e.domainMax),null!=e.domainMid&&(((a=e.domainMid)<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a)));t.domain(zm(s,o,n)),s===yf&&t.unknown(e.domainImplicit?od:void 0);e.nice&&t.nice&&t.nice(!0!==e.nice&&um(t,e.nice)||null);return o.length}(i,t,r)),e.fork(e.NO_SOURCE|e.NO_FIELDS)},Object(p.y)(qm,rr).transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(t.sort),this.modified(n),e};var Um=["y0","y1"];function Hm(t){rr.call(this,null,t)}function Wm(t,e,n,r,i){for(var a,o=(e-t.sum)/2,s=t.length,u=0;u<s;++u)(a=t[u])[r]=o,a[i]=o+=Math.abs(n(a))}function Gm(t,e,n,r,i){for(var a,o=1/t.sum,s=0,u=t.length,l=0,c=0;l<u;++l)(a=t[l])[r]=s,a[i]=s=o*(c+=Math.abs(n(a)))}function Vm(t,e,n,r,i){for(var a,o,s=0,u=0,l=t.length,c=0;c<l;++c)(a=n(o=t[c]))<0?(o[r]=u,o[i]=u+=a):(o[r]=s,o[i]=s+=a)}Hm.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:Um}]},Object(p.y)(Hm,rr).transform=function(t,e){var n,r,i,a,o=t.as||Um,s=o[0],u=o[1],l=t.field||p.M,c="center"===t.offset?Wm:"normalize"===t.offset?Gm:Vm;for(n=function(t,e,n,r){var i,a,o,s,u,l,c,f,d,h=[],p=function(t){return t(u)};if(null==e)h.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)u=t[a],l=e.map(p),(c=i[l])||(i[l]=c=[],h.push(c)),c.push(u);for(l=0,d=0,s=h.length;l<s;++l){for(c=h[l],a=0,f=0,o=c.length;a<o;++a)f+=Math.abs(r(c[a]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(e.source,t.groupby,t.sort,l),r=0,i=n.length,a=n.max;r<i;++r)c(n[r],a,l,s,u);return e.reflow(t.modified()).modifies(o)};var Ym=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var Zm=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Ym(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}(Ym);Zm.right,Zm.left;var Xm=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},$m=Array.prototype,Jm=($m.slice,$m.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),Km=Math.sqrt(50),Qm=Math.sqrt(10),ty=Math.sqrt(2);function ey(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Km?i*=10:a>=Qm?i*=5:a>=ty&&(i*=2),e<t?-i:i}var ny=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},ry=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r};var iy=Array.prototype.slice,ay=function(t,e){return t-e},oy=function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r},sy=function(t){return function(){return t}},uy=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=ly(t,e[r]))return n;return 0};function ly(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],l=u[0],c=u[1],f=t[s],d=f[0],h=f[1];if(cy(u,f,e))return 0;c>r!==h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function cy(t,e,n){var r,i,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],a=n[r],o=e[r],i<=a&&a<=o||o<=a&&a<=i)}var fy=function(){},dy=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],hy=function(){var t=1,e=1,n=ny,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(ay);else{var r=Xm(t),i=r[0],o=r[1];e=ey(i,o,e),e=Jm(Math.floor(i/e)*e,Math.floor(o/e)*e,e)}return e.map(function(e){return a(t,e)})}function a(n,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,f,d=new Array,h=new Array;a=s=-1,l=n[0]>=r,dy[l<<1].forEach(p);for(;++a<t-1;)u=l,l=n[a+1]>=r,dy[u|l<<1].forEach(p);dy[l<<0].forEach(p);for(;++s<e-1;){for(a=-1,l=n[s*t+t]>=r,c=n[s*t]>=r,dy[l<<1|c<<2].forEach(p);++a<t-1;)u=l,l=n[s*t+t+a+1]>=r,f=c,c=n[s*t+a+1]>=r,dy[u|l<<1|c<<2|f<<3].forEach(p);dy[l|c<<3].forEach(p)}a=-1,c=n[s*t]>=r,dy[c<<2].forEach(p);for(;++a<t-1;)f=c,c=n[s*t+a+1]>=r,dy[c<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],u=[t[1][0]+a,t[1][1]+s],l=o(r),c=o(u);(e=h[l])?(n=d[c])?(delete h[e.end],delete d[n.start],e===n?(e.ring.push(u),i(e.ring)):d[e.start]=h[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[e.end],e.ring.push(u),h[e.end=c]=e):(e=d[c])?(n=h[l])?(delete d[e.start],delete h[n.end],e===n?(e.ring.push(u),i(e.ring)):d[n.start]=h[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(r),d[e.start=l]=e):d[l]=h[c]={start:l,end:c,ring:[r,u]}}dy[c<<3].forEach(p)}(n,i,function(t){r(t,n,i),oy(t)>0?a.push([t]):s.push(t)}),s.forEach(function(t){for(var e,n=0,r=a.length;n<r;++n)if(-1!==uy((e=a[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:i,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(function(n){var a,o=n[0],s=n[1],u=0|o,l=0|s,c=r[l*t+u];o>0&&o<t&&u===o&&(a=r[l*t+u-1],n[0]=o+(i-a)/(c-a)-.5),s>0&&s<e&&l===s&&(a=r[(l-1)*t+u],n[1]=s+(i-a)/(c-a)-.5)})}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(r>0)||!(a>0))throw new Error("invalid size");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n="function"===typeof t?t:Array.isArray(t)?sy(iy.call(t)):sy(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:fy,i):r===s},i};function py(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+o*r]),s>=n&&(s>=a&&(u-=t.data[s-a+o*r]),e.data[s-n+o*r]=u/Math.min(s+1,r-1+a-s,a))}function vy(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[o+s*r]),s>=n&&(s>=a&&(u-=t.data[o+(s-a)*r]),e.data[o+(s-n)*r]=u/Math.min(s+1,i-1+a-s,a))}function gy(t){return t[0]}function my(t){return t[1]}function yy(){return 1}var by=["size","smooth"],_y=["x","y","weight","size","cellSize","bandwidth"];function xy(t){rr.call(this,null,t)}xy.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},Object(p.y)(xy,rr).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i,a,o=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.count||10;return t.values?(n=hy(),r=by,i=t.values):(n=function(){var t=gy,e=my,n=yy,r=960,i=500,a=20,o=2,s=3*a,u=r+2*s>>o,l=i+2*s>>o,c=sy(20);function f(r){var i=new Float32Array(u*l),f=new Float32Array(u*l);r.forEach(function(r,a,c){var f=+t(r,a,c)+s>>o,d=+e(r,a,c)+s>>o,h=+n(r,a,c);f>=0&&f<u&&d>=0&&d<l&&(i[f+d*u]+=h)}),py({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),vy({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o),py({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),vy({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o),py({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),vy({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o);var h=c(i);if(!Array.isArray(h)){var p=ry(i);h=ey(0,p,h),(h=Jm(0,Math.floor(p/h)*h,h)).shift()}return hy().thresholds(h).size([u,l])(i).map(d)}function d(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(h),t}function h(t){t.forEach(p)}function p(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function g(){return u=r+2*(s=3*a)>>o,l=i+2*s>>o,f}return f.x=function(e){return arguments.length?(t="function"===typeof e?e:sy(+e),f):t},f.y=function(t){return arguments.length?(e="function"===typeof t?t:sy(+t),f):e},f.weight=function(t){return arguments.length?(n="function"===typeof t?t:sy(+t),f):n},f.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0)&&!(e>=0))throw new Error("invalid size");return r=e,i=n,g()},f.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),g()},f.thresholds=function(t){return arguments.length?(c="function"===typeof t?t:Array.isArray(t)?sy(iy.call(t)):sy(t),f):c},f.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),g()},f}(),r=_y,i=e.materialize(e.SOURCE).source),n.thresholds(t.thresholds||(t.nice?s:(a=s,function(t){for(var e=bi(t),n=e[0],r=e[1]-n,i=[],o=1;o<=a;++o)i.push(n+r*o/(a+1));return i}))),r.forEach(function(e){null!=t[e]&&n[e](t[e])}),this.value&&(o.rem=this.value),i=i&&i.length?n(i).map(x):[],this.value=o.source=o.add=i,o};var wy="FeatureCollection";function Ay(t){rr.call(this,null,t)}Ay.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(p.y)(Ay,rr).transform=function(t,e){var n,r=this._features,i=this._points,a=t.fields,o=a&&a[0],s=a&&a[1],u=t.geojson,l=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Object(p.g)(u))||o&&e.modified(Object(p.g)(o))||s&&e.modified(Object(p.g)(s)),this.value&&!n||(l=e.SOURCE,this._features=r=[],this._points=i=[]),u&&e.visit(l,function(t){r.push(u(t))}),o&&s&&(e.visit(l,function(t){var e=o(t),n=s(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])}),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:wy,features:r}};var ky=function(){return new My};function My(){this.reset()}My.prototype={constructor:My,reset:function(){this.s=this.t=0},add:function(t){Sy(Ty,t,this.t),Sy(this,Ty.s,this.s),this.s?this.t+=Ty.t:this.s=Ty.t},valueOf:function(){return this.s}};var Ty=new My;function Sy(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}var Cy=1e-6,Ey=1e-12,Oy=Math.PI,Py=Oy/2,Ly=Oy/4,Ry=2*Oy,Dy=180/Oy,Fy=Oy/180,jy=Math.abs,Ny=Math.atan,zy=Math.atan2,Iy=Math.cos,By=Math.ceil,qy=Math.exp,Uy=(Math.floor,Math.log),Hy=Math.pow,Wy=Math.sin,Gy=Math.sign||function(t){return t>0?1:t<0?-1:0},Vy=Math.sqrt,Yy=Math.tan;function Zy(t){return t>1?0:t<-1?Oy:Math.acos(t)}function Xy(t){return t>1?Py:t<-1?-Py:Math.asin(t)}function $y(){}function Jy(t,e){t&&Qy.hasOwnProperty(t.type)&&Qy[t.type](t,e)}var Ky={Feature:function(t,e){Jy(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Jy(n[r].geometry,e)}},Qy={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){tb(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)tb(n[r],e,0)},Polygon:function(t,e){eb(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)eb(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Jy(n[r],e)}};function tb(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function eb(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)tb(t[n],e,1);e.polygonEnd()}var nb,rb,ib,ab,ob,sb=function(t,e){t&&Ky.hasOwnProperty(t.type)?Ky[t.type](t,e):Jy(t,e)},ub=ky(),lb=ky(),cb={point:$y,lineStart:$y,lineEnd:$y,polygonStart:function(){ub.reset(),cb.lineStart=fb,cb.lineEnd=db},polygonEnd:function(){var t=+ub;lb.add(t<0?Ry+t:t),this.lineStart=this.lineEnd=this.point=$y},sphere:function(){lb.add(Ry)}};function fb(){cb.point=hb}function db(){pb(nb,rb)}function hb(t,e){cb.point=pb,nb=t,rb=e,ib=t*=Fy,ab=Iy(e=(e*=Fy)/2+Ly),ob=Wy(e)}function pb(t,e){var n=(t*=Fy)-ib,r=n>=0?1:-1,i=r*n,a=Iy(e=(e*=Fy)/2+Ly),o=Wy(e),s=ob*o,u=ab*a+s*Iy(i),l=s*r*Wy(i);ub.add(zy(l,u)),ib=t,ab=a,ob=o}function vb(t){return[zy(t[1],t[0]),Xy(t[2])]}function gb(t){var e=t[0],n=t[1],r=Iy(n);return[r*Iy(e),r*Wy(e),Wy(n)]}function mb(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yb(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function bb(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function _b(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xb(t){var e=Vy(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var wb,Ab,kb,Mb,Tb,Sb,Cb,Eb,Ob,Pb,Lb=ky(),Rb={point:Db,lineStart:jb,lineEnd:Nb,polygonStart:function(){Rb.point=zb,Rb.lineStart=Ib,Rb.lineEnd=Bb,Lb.reset(),cb.polygonStart()},polygonEnd:function(){cb.polygonEnd(),Rb.point=Db,Rb.lineStart=jb,Rb.lineEnd=Nb,ub<0?(wb=-(kb=180),Ab=-(Mb=90)):Lb>Cy?Mb=90:Lb<-Cy&&(Ab=-90),Pb[0]=wb,Pb[1]=kb},sphere:function(){wb=-(kb=180),Ab=-(Mb=90)}};function Db(t,e){Ob.push(Pb=[wb=t,kb=t]),e<Ab&&(Ab=e),e>Mb&&(Mb=e)}function Fb(t,e){var n=gb([t*Fy,e*Fy]);if(Eb){var r=yb(Eb,n),i=yb([r[1],-r[0],0],r);xb(i),i=vb(i);var a,o=t-Tb,s=o>0?1:-1,u=i[0]*Dy*s,l=jy(o)>180;l^(s*Tb<u&&u<s*t)?(a=i[1]*Dy)>Mb&&(Mb=a):l^(s*Tb<(u=(u+360)%360-180)&&u<s*t)?(a=-i[1]*Dy)<Ab&&(Ab=a):(e<Ab&&(Ab=e),e>Mb&&(Mb=e)),l?t<Tb?qb(wb,t)>qb(wb,kb)&&(kb=t):qb(t,kb)>qb(wb,kb)&&(wb=t):kb>=wb?(t<wb&&(wb=t),t>kb&&(kb=t)):t>Tb?qb(wb,t)>qb(wb,kb)&&(kb=t):qb(t,kb)>qb(wb,kb)&&(wb=t)}else Ob.push(Pb=[wb=t,kb=t]);e<Ab&&(Ab=e),e>Mb&&(Mb=e),Eb=n,Tb=t}function jb(){Rb.point=Fb}function Nb(){Pb[0]=wb,Pb[1]=kb,Rb.point=Db,Eb=null}function zb(t,e){if(Eb){var n=t-Tb;Lb.add(jy(n)>180?n+(n>0?360:-360):n)}else Sb=t,Cb=e;cb.point(t,e),Fb(t,e)}function Ib(){cb.lineStart()}function Bb(){zb(Sb,Cb),cb.lineEnd(),jy(Lb)>Cy&&(wb=-(kb=180)),Pb[0]=wb,Pb[1]=kb,Eb=null}function qb(t,e){return(e-=t)<0?e+360:e}function Ub(t,e){return t[0]-e[0]}function Hb(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Wb,Gb,Vb,Yb,Zb,Xb,$b,Jb,Kb,Qb,t_,e_,n_,r_,i_,a_,o_={sphere:$y,point:s_,lineStart:l_,lineEnd:d_,polygonStart:function(){o_.lineStart=h_,o_.lineEnd=p_},polygonEnd:function(){o_.lineStart=l_,o_.lineEnd=d_}};function s_(t,e){t*=Fy;var n=Iy(e*=Fy);u_(n*Iy(t),n*Wy(t),Wy(e))}function u_(t,e,n){Vb+=(t-Vb)/++Wb,Yb+=(e-Yb)/Wb,Zb+=(n-Zb)/Wb}function l_(){o_.point=c_}function c_(t,e){t*=Fy;var n=Iy(e*=Fy);r_=n*Iy(t),i_=n*Wy(t),a_=Wy(e),o_.point=f_,u_(r_,i_,a_)}function f_(t,e){t*=Fy;var n=Iy(e*=Fy),r=n*Iy(t),i=n*Wy(t),a=Wy(e),o=zy(Vy((o=i_*a-a_*i)*o+(o=a_*r-r_*a)*o+(o=r_*i-i_*r)*o),r_*r+i_*i+a_*a);Gb+=o,Xb+=o*(r_+(r_=r)),$b+=o*(i_+(i_=i)),Jb+=o*(a_+(a_=a)),u_(r_,i_,a_)}function d_(){o_.point=s_}function h_(){o_.point=v_}function p_(){g_(e_,n_),o_.point=s_}function v_(t,e){e_=t,n_=e,t*=Fy,e*=Fy,o_.point=g_;var n=Iy(e);r_=n*Iy(t),i_=n*Wy(t),a_=Wy(e),u_(r_,i_,a_)}function g_(t,e){t*=Fy;var n=Iy(e*=Fy),r=n*Iy(t),i=n*Wy(t),a=Wy(e),o=i_*a-a_*i,s=a_*r-r_*a,u=r_*i-i_*r,l=Vy(o*o+s*s+u*u),c=Xy(l),f=l&&-c/l;Kb+=f*o,Qb+=f*s,t_+=f*u,Gb+=c,Xb+=c*(r_+(r_=r)),$b+=c*(i_+(i_=i)),Jb+=c*(a_+(a_=a)),u_(r_,i_,a_)}var m_=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function y_(t,e){return[jy(t)>Oy?t+Math.round(-t/Ry)*Ry:t,e]}function b_(t,e,n){return(t%=Ry)?e||n?m_(x_(t),w_(e,n)):x_(t):e||n?w_(e,n):y_}function __(t){return function(e,n){return[(e+=t)>Oy?e-Ry:e<-Oy?e+Ry:e,n]}}function x_(t){var e=__(t);return e.invert=__(-t),e}function w_(t,e){var n=Iy(t),r=Wy(t),i=Iy(e),a=Wy(e);function o(t,e){var o=Iy(e),s=Iy(t)*o,u=Wy(t)*o,l=Wy(e),c=l*n+s*r;return[zy(u*i-c*a,s*n-l*r),Xy(c*i+u*a)]}return o.invert=function(t,e){var o=Iy(e),s=Iy(t)*o,u=Wy(t)*o,l=Wy(e),c=l*i-u*a;return[zy(u*i+l*a,s*n+c*r),Xy(c*n-s*r)]},o}y_.invert=y_;var A_=function(t){function e(e){return(e=t(e[0]*Fy,e[1]*Fy))[0]*=Dy,e[1]*=Dy,e}return t=b_(t[0]*Fy,t[1]*Fy,t.length>2?t[2]*Fy:0),e.invert=function(e){return(e=t.invert(e[0]*Fy,e[1]*Fy))[0]*=Dy,e[1]*=Dy,e},e};function k_(t,e,n,r,i,a){if(n){var o=Iy(e),s=Wy(e),u=r*n;null==i?(i=e+r*Ry,a=e-u/2):(i=M_(o,i),a=M_(o,a),(r>0?i<a:i>a)&&(i+=r*Ry));for(var l,c=i;r>0?c>a:c<a;c-=u)l=vb([o,-s*Iy(c),-s*Wy(c)]),t.point(l[0],l[1])}}function M_(t,e){(e=gb(e))[0]-=t,xb(e);var n=Zy(-e[1]);return((-e[2]<0?-n:n)+Ry-Cy)%Ry}var T_=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:$y,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},S_=function(t,e){return jy(t[0]-e[0])<Cy&&jy(t[1]-e[1])<Cy};function C_(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var E_=function(t,e,n,r,i){var a,o,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(S_(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);i.lineEnd()}else s.push(n=new C_(r,t,null,!0)),u.push(n.o=new C_(r,null,n,!1)),s.push(n=new C_(o,t,null,!1)),u.push(n.o=new C_(o,null,n,!0))}}),s.length){for(u.sort(e),O_(s),O_(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function O_(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var P_=ky();function L_(t){return jy(t[0])<=Oy?t[0]:Gy(t[0])*((jy(t[0])+Oy)%Ry-Oy)}var R_=function(t,e){var n=L_(e),r=e[1],i=Wy(r),a=[Wy(n),-Iy(n),0],o=0,s=0;P_.reset(),1===i?r=Py+Cy:-1===i&&(r=-Py-Cy);for(var u=0,l=t.length;u<l;++u)if(f=(c=t[u]).length)for(var c,f,d=c[f-1],h=L_(d),p=d[1]/2+Ly,v=Wy(p),g=Iy(p),m=0;m<f;++m,h=b,v=x,g=w,d=y){var y=c[m],b=L_(y),_=y[1]/2+Ly,x=Wy(_),w=Iy(_),A=b-h,k=A>=0?1:-1,M=k*A,T=M>Oy,S=v*x;if(P_.add(zy(S*k*Wy(M),g*w+S*Iy(M))),o+=T?A+k*Ry:A,T^h>=n^b>=n){var C=yb(gb(d),gb(y));xb(C);var E=yb(a,C);xb(E);var O=(T^A>=0?-1:1)*Xy(E[2]);(r>O||r===O&&(C[0]||C[1]))&&(s+=T^A>=0?1:-1)}}return(o<-Cy||o<Cy&&P_<-Cy)^1&s},D_=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var F_=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return D_(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}(D_);F_.right,F_.left;var j_=Array.prototype,N_=(j_.slice,j_.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var z_=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n};var I_=function(t,e,n,r){return function(i){var a,o,s,u=e(i),l=T_(),c=e(l),f=!1,d={point:h,lineStart:v,lineEnd:g,polygonStart:function(){d.point=m,d.lineStart=y,d.lineEnd=b,o=[],a=[]},polygonEnd:function(){d.point=h,d.lineStart=v,d.lineEnd=g,o=z_(o);var t=R_(a,r);o.length?(f||(i.polygonStart(),f=!0),E_(o,q_,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function v(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function m(t,e){s.push([t,e]),c.point(t,e)}function y(){c.lineStart(),s=[]}function b(){m(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),a.push(s),s=null,h)if(1&u){if((e=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),o.push(d.filter(B_))}return d}};function B_(t){return t.length>1}function q_(t,e){return((t=t.x)[0]<0?t[1]-Py-Cy:Py-t[1])-((e=e.x)[0]<0?e[1]-Py-Cy:Py-e[1])}var U_=I_(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Oy:-Oy,u=jy(a-n);jy(u-Oy)<Cy?(t.point(n,r=(r+o)/2>0?Py:-Py),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=Oy&&(jy(n-i)<Cy&&(n-=i*Cy),jy(a-s)<Cy&&(a-=s*Cy),r=function(t,e,n,r){var i,a,o=Wy(t-n);return jy(o)>Cy?Ny((Wy(e)*(a=Iy(r))*Wy(n)-Wy(r)*(i=Iy(e))*Wy(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Py,r.point(-Oy,i),r.point(0,i),r.point(Oy,i),r.point(Oy,0),r.point(Oy,-i),r.point(0,-i),r.point(-Oy,-i),r.point(-Oy,0),r.point(-Oy,i);else if(jy(t[0]-e[0])>Cy){var a=t[0]<e[0]?Oy:-Oy;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-Oy,-Py]);var H_=function(t){var e=Iy(t),n=6*Fy,r=e>0,i=jy(e)>Cy;function a(t,n){return Iy(t)*Iy(n)>e}function o(t,n,r){var i=[1,0,0],a=yb(gb(t),gb(n)),o=mb(a,a),s=a[0],u=o-s*s;if(!u)return!r&&t;var l=e*o/u,c=-e*s/u,f=yb(i,a),d=_b(i,l);bb(d,_b(a,c));var h=f,p=mb(d,h),v=mb(h,h),g=p*p-v*(mb(d,d)-1);if(!(g<0)){var m=Vy(g),y=_b(h,(-p-m)/v);if(bb(y,d),y=vb(y),!r)return y;var b,_=t[0],x=n[0],w=t[1],A=n[1];x<_&&(b=_,_=x,x=b);var k=x-_,M=jy(k-Oy)<Cy;if(!M&&A<w&&(b=w,w=A,A=b),M||k<Cy?M?w+A>0^y[1]<(jy(y[0]-_)<Cy?w:A):w<=y[1]&&y[1]<=A:k>Oy^(_<=y[0]&&y[0]<=x)){var T=_b(h,(-p+m)/v);return bb(T,d),[y,vb(T)]}}}function s(e,n){var i=r?t:Oy-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return I_(a,function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],v=a(f,d),g=r?v?0:s(f,d):v?s(f+(f<0?Oy:-Oy),d):0;if(!e&&(l=u=v)&&t.lineStart(),v!==u&&(!(h=o(e,p))||S_(e,h)||S_(p,h))&&(p[0]+=Cy,p[1]+=Cy,v=a(p[0],p[1])),v!==u)c=0,v?(t.lineStart(),h=o(p,e),t.point(h[0],h[1])):(h=o(e,p),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(i&&e&&r^v){var m;g&n||!(m=o(p,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&S_(e,p)||t.point(p[0],p[1]),e=p,u=v,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(e,r,i,a){k_(a,t,n,i,e,r)},r?[0,-t]:[-Oy,t-Oy])},W_=function(t,e,n,r,i,a){var o,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,d=e[1]-u;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}if(o=r-u,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>l&&(l=o)}if(o=a-u,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<c&&(c=o)}return l>0&&(t[0]=s+l*f,t[1]=u+l*d),c<1&&(e[0]=s+c*f,e[1]=u+c*d),!0}}}}},G_=1e9,V_=-G_;function Y_(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,l){var c=0,f=0;if(null==i||(c=o(i,s))!==(f=o(a,s))||u(i,a)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(a[0],a[1])}function o(r,i){return jy(r[0]-t)<Cy?i>0?0:3:jy(r[0]-n)<Cy?i>0?2:1:jy(r[1]-e)<Cy?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var u,l,c,f,d,h,p,v,g,m,y,b=o,_=T_(),x={point:w,lineStart:function(){x.point=A,l&&l.push(c=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){u&&(A(f,d),h&&g&&_.rejoin(),u.push(_.result()));x.point=w,g&&b.lineEnd()},polygonStart:function(){b=_,u=[],l=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var a,o,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)a=d,o=h,f=s[u],d=f[0],h=f[1],o<=r?h>r&&(d-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(d-a)*(r-o)<(h-o)*(t-a)&&--e;return e}(),n=y&&e,i=(u=z_(u)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&E_(u,s,e,a,o),o.polygonEnd());b=o,u=l=c=null}};function w(t,e){i(t,e)&&b.point(t,e)}function A(a,o){var s=i(a,o);if(l&&c.push([a,o]),m)f=a,d=o,h=s,m=!1,s&&(b.lineStart(),b.point(a,o));else if(s&&g)b.point(a,o);else{var u=[p=Math.max(V_,Math.min(G_,p)),v=Math.max(V_,Math.min(G_,v))],_=[a=Math.max(V_,Math.min(G_,a)),o=Math.max(V_,Math.min(G_,o))];W_(u,_,t,e,n,r)?(g||(b.lineStart(),b.point(u[0],u[1])),b.point(_[0],_[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(a,o),y=!1)}p=a,v=o,g=s}return x}}ky();function Z_(t,e,n){var r=N_(t,e-Cy,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function X_(t,e,n){var r=N_(t,e-Cy,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function $_(){var t,e,n,r,i,a,o,s,u,l,c,f,d=10,h=d,p=90,v=360,g=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return N_(By(r/p)*p,n,p).map(c).concat(N_(By(s/v)*v,o,v).map(f)).concat(N_(By(e/d)*d,t,d).filter(function(t){return jy(t%p)>Cy}).map(u)).concat(N_(By(a/h)*h,i,h).filter(function(t){return jy(t%v)>Cy}).map(l))}return m.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},m.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(o).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),m.precision(g)):[[r,s],[n,o]]},m.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),m.precision(g)):[[e,a],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],m):[p,v]},m.stepMinor=function(t){return arguments.length?(d=+t[0],h=+t[1],m):[d,h]},m.precision=function(d){return arguments.length?(g=+d,u=Z_(a,i,90),l=X_(e,t,g),c=Z_(s,o,90),f=X_(r,n,g),m):g},m.extentMajor([[-180,-90+Cy],[180,90-Cy]]).extentMinor([[-180,-80-Cy],[180,80+Cy]])}var J_,K_,Q_,tx,ex=function(t){return t},nx=ky(),rx=ky(),ix={point:$y,lineStart:$y,lineEnd:$y,polygonStart:function(){ix.lineStart=ax,ix.lineEnd=ux},polygonEnd:function(){ix.lineStart=ix.lineEnd=ix.point=$y,nx.add(jy(rx)),rx.reset()},result:function(){var t=nx/2;return nx.reset(),t}};function ax(){ix.point=ox}function ox(t,e){ix.point=sx,J_=Q_=t,K_=tx=e}function sx(t,e){rx.add(tx*t-Q_*e),Q_=t,tx=e}function ux(){sx(J_,K_)}var lx=ix,cx=1/0,fx=cx,dx=-cx,hx=dx;var px,vx,gx,mx,yx={point:function(t,e){t<cx&&(cx=t);t>dx&&(dx=t);e<fx&&(fx=e);e>hx&&(hx=e)},lineStart:$y,lineEnd:$y,polygonStart:$y,polygonEnd:$y,result:function(){var t=[[cx,fx],[dx,hx]];return dx=hx=-(fx=cx=1/0),t}},bx=0,_x=0,xx=0,wx=0,Ax=0,kx=0,Mx=0,Tx=0,Sx=0,Cx={point:Ex,lineStart:Ox,lineEnd:Rx,polygonStart:function(){Cx.lineStart=Dx,Cx.lineEnd=Fx},polygonEnd:function(){Cx.point=Ex,Cx.lineStart=Ox,Cx.lineEnd=Rx},result:function(){var t=Sx?[Mx/Sx,Tx/Sx]:kx?[wx/kx,Ax/kx]:xx?[bx/xx,_x/xx]:[NaN,NaN];return bx=_x=xx=wx=Ax=kx=Mx=Tx=Sx=0,t}};function Ex(t,e){bx+=t,_x+=e,++xx}function Ox(){Cx.point=Px}function Px(t,e){Cx.point=Lx,Ex(gx=t,mx=e)}function Lx(t,e){var n=t-gx,r=e-mx,i=Vy(n*n+r*r);wx+=i*(gx+t)/2,Ax+=i*(mx+e)/2,kx+=i,Ex(gx=t,mx=e)}function Rx(){Cx.point=Ex}function Dx(){Cx.point=jx}function Fx(){Nx(px,vx)}function jx(t,e){Cx.point=Nx,Ex(px=gx=t,vx=mx=e)}function Nx(t,e){var n=t-gx,r=e-mx,i=Vy(n*n+r*r);wx+=i*(gx+t)/2,Ax+=i*(mx+e)/2,kx+=i,Mx+=(i=mx*t-gx*e)*(gx+t),Tx+=i*(mx+e),Sx+=3*i,Ex(gx=t,mx=e)}var zx=Cx;function Ix(t){this._context=t}Ix.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ry)}},result:$y};var Bx,qx,Ux,Hx,Wx,Gx=ky(),Vx={point:$y,lineStart:function(){Vx.point=Yx},lineEnd:function(){Bx&&Zx(qx,Ux),Vx.point=$y},polygonStart:function(){Bx=!0},polygonEnd:function(){Bx=null},result:function(){var t=+Gx;return Gx.reset(),t}};function Yx(t,e){Vx.point=Zx,qx=Hx=t,Ux=Wx=e}function Zx(t,e){Hx-=t,Wx-=e,Gx.add(Vy(Hx*Hx+Wx*Wx)),Hx=t,Wx=e}var Xx=Vx;function $x(){this._string=[]}function Jx(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}$x.prototype={_radius:4.5,_circle:Jx(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Jx(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Kx=function(t,e){var n,r,i=4.5;function a(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),sb(t,n(r))),r.result()}return a.area=function(t){return sb(t,n(lx)),lx.result()},a.measure=function(t){return sb(t,n(Xx)),Xx.result()},a.bounds=function(t){return sb(t,n(yx)),yx.result()},a.centroid=function(t){return sb(t,n(zx)),zx.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,ex):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new $x):new Ix(e=t),"function"!==typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)};function Qx(t){return function(e){var n=new tw;for(var r in t)n[r]=t[r];return n.stream=e,n}}function tw(){}function ew(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),sb(n,t.stream(yx)),e(yx.result()),null!=r&&t.clipExtent(r),t}function nw(t,e,n){return ew(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])},n)}function rw(t,e,n){return nw(t,[[0,0],e],n)}function iw(t,e,n){return ew(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])},n)}function aw(t,e,n){return ew(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])},n)}tw.prototype={constructor:tw,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ow=16,sw=Iy(30*Fy),uw=function(t,e){return+e?function(t,e){function n(r,i,a,o,s,u,l,c,f,d,h,p,v,g){var m=l-r,y=c-i,b=m*m+y*y;if(b>4*e&&v--){var _=o+d,x=s+h,w=u+p,A=Vy(_*_+x*x+w*w),k=Xy(w/=A),M=jy(jy(w)-1)<Cy||jy(a-f)<Cy?(a+f)/2:zy(x,_),T=t(M,k),S=T[0],C=T[1],E=S-r,O=C-i,P=y*E-m*O;(P*P/b>e||jy((m*E+y*O)/b-.5)>.3||o*d+s*h+u*p<sw)&&(n(r,i,a,o,s,u,S,C,M,_/=A,x/=A,w,v,g),g.point(S,C),n(S,C,M,_,x,w,l,c,f,d,h,p,v,g))}}return function(e){var r,i,a,o,s,u,l,c,f,d,h,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=m}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,v.point=y,e.lineStart()}function y(r,i){var a=gb([r,i]),o=t(r,i);n(c,f,l,d,h,p,c=o[0],f=o[1],l=r,d=a[0],h=a[1],p=a[2],ow,e),e.point(c,f)}function b(){v.point=g,e.lineEnd()}function _(){m(),v.point=x,v.lineEnd=w}function x(t,e){y(r=t,e),i=c,a=f,o=d,s=h,u=p,v.point=y}function w(){n(c,f,l,d,h,p,i,a,r,o,s,u,ow,e),v.lineEnd=b,b()}return v}}(t,e):function(t){return Qx({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var lw=Qx({point:function(t,e){this.stream.point(t*Fy,e*Fy)}});function cw(t,e,n,r){var i=Iy(r),a=Wy(r),o=i*t,s=a*t,u=i/t,l=a/t,c=(a*n-i*e)/t,f=(a*e+i*n)/t;function d(t,r){return[o*t-s*r+e,n-s*t-o*r]}return d.invert=function(t,e){return[u*t-l*e+c,f-l*t-u*e]},d}function fw(t){return dw(function(){return t})()}function dw(t){var e,n,r,i,a,o,s,u,l,c,f=150,d=480,h=250,p=0,v=0,g=0,m=0,y=0,b=0,_=null,x=U_,w=null,A=ex,k=.5;function M(t){return u(t[0]*Fy,t[1]*Fy)}function T(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Dy,t[1]*Dy]}function S(){var t=cw(f,0,0,b).apply(null,e(p,v)),r=(b?cw:function(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r})(f,d-t[0],h-t[1],b);return n=b_(g,m,y),s=m_(e,r),u=m_(n,s),o=uw(s,k),C()}function C(){return l=c=null,M}return M.stream=function(t){return l&&c===t?l:l=lw(function(t){return Qx({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(x(o(A(c=t)))))},M.preclip=function(t){return arguments.length?(x=t,_=void 0,C()):x},M.postclip=function(t){return arguments.length?(A=t,w=r=i=a=null,C()):A},M.clipAngle=function(t){return arguments.length?(x=+t?H_(_=t*Fy):(_=null,U_),C()):_*Dy},M.clipExtent=function(t){return arguments.length?(A=null==t?(w=r=i=a=null,ex):Y_(w=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),C()):null==w?null:[[w,r],[i,a]]},M.scale=function(t){return arguments.length?(f=+t,S()):f},M.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],S()):[d,h]},M.center=function(t){return arguments.length?(p=t[0]%360*Fy,v=t[1]%360*Fy,S()):[p*Dy,v*Dy]},M.rotate=function(t){return arguments.length?(g=t[0]%360*Fy,m=t[1]%360*Fy,y=t.length>2?t[2]%360*Fy:0,S()):[g*Dy,m*Dy,y*Dy]},M.angle=function(t){return arguments.length?(b=t%360*Fy,S()):b*Dy},M.precision=function(t){return arguments.length?(o=uw(s,k=t*t),C()):Vy(k)},M.fitExtent=function(t,e){return nw(M,t,e)},M.fitSize=function(t,e){return rw(M,t,e)},M.fitWidth=function(t,e){return iw(M,t,e)},M.fitHeight=function(t,e){return aw(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&T,S()}}function hw(t){var e=0,n=Oy/3,r=dw(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Fy,n=t[1]*Fy):[e*Dy,n*Dy]},i}function pw(t,e){var n=Wy(t),r=(n+Wy(e))/2;if(jy(r)<Cy)return function(t){var e=Iy(t);function n(t,n){return[t*e,Wy(n)/e]}return n.invert=function(t,n){return[t/e,Xy(n*e)]},n}(t);var i=1+n*(2*r-n),a=Vy(i)/r;function o(t,e){var n=Vy(i-2*r*Wy(e))/r;return[n*Wy(t*=r),a-n*Iy(t)]}return o.invert=function(t,e){var n=a-e;return[zy(t,jy(n))/r*Gy(n),Xy((i-(t*t+n*n)*r*r)/(2*r))]},o}var vw=function(){return hw(pw).scale(155.424).center([0,33.6442])},gw=function(){return vw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function mw(t){return function(e,n){var r=Iy(e),i=Iy(n),a=t(r*i);return[a*i*Wy(e),a*Wy(n)]}}function yw(t){return function(e,n){var r=Vy(e*e+n*n),i=t(r),a=Wy(i),o=Iy(i);return[zy(e*a,r*o),Xy(r&&n*a/r)]}}var bw=mw(function(t){return Vy(2/(1+t))});bw.invert=yw(function(t){return 2*Xy(t/2)});var _w=mw(function(t){return(t=Zy(t))&&t/Wy(t)});_w.invert=yw(function(t){return t});function xw(t,e){return[t,Uy(Yy((Py+e)/2))]}xw.invert=function(t,e){return[t,2*Ny(qy(e))-Py]};function ww(t){var e,n,r,i=fw(t),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var a=Oy*o(),s=i(A_(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===xw?[[Math.max(s[0]-a,l),e],[Math.min(s[0]+a,n),r]]:[[l,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),c()):o()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(a(t),c()):a()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function Aw(t){return Yy((Py+t)/2)}function kw(t,e){var n=Iy(t),r=t===e?Wy(t):Uy(n/Iy(e))/Uy(Aw(e)/Aw(t)),i=n*Hy(Aw(t),r)/r;if(!r)return xw;function a(t,e){i>0?e<-Py+Cy&&(e=-Py+Cy):e>Py-Cy&&(e=Py-Cy);var n=i/Hy(Aw(e),r);return[n*Wy(r*t),i-n*Iy(r*t)]}return a.invert=function(t,e){var n=i-e,a=Gy(r)*Vy(t*t+n*n);return[zy(t,jy(n))/r*Gy(n),2*Ny(Hy(i/a,1/r))-Py]},a}function Mw(t,e){return[t,e]}Mw.invert=Mw;function Tw(t,e){var n=Iy(t),r=t===e?Wy(t):(n-Iy(e))/(e-t),i=n/r+t;if(jy(r)<Cy)return Mw;function a(t,e){var n=i-e,a=r*t;return[n*Wy(a),i-n*Iy(a)]}return a.invert=function(t,e){var n=i-e;return[zy(t,jy(n))/r*Gy(n),i-Gy(r)*Vy(t*t+n*n)]},a}var Sw=1.340264,Cw=-.081106,Ew=893e-6,Ow=.003796,Pw=Vy(3)/2;function Lw(t,e){var n=Xy(Pw*Wy(e)),r=n*n,i=r*r*r;return[t*Iy(n)/(Pw*(Sw+3*Cw*r+i*(7*Ew+9*Ow*r))),n*(Sw+Cw*r+i*(Ew+Ow*r))]}Lw.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(Sw+Cw*i+a*(Ew+Ow*i))-e)/(Sw+3*Cw*i+a*(7*Ew+9*Ow*i)))*r)*i*i,!(jy(n)<Ey));++o);return[Pw*t*(Sw+3*Cw*i+a*(7*Ew+9*Ow*i))/Iy(r),Xy(Wy(r)/Pw)]};function Rw(t,e){var n=Iy(e),r=Iy(t)*n;return[n*Wy(t)/r,Wy(e)/r]}Rw.invert=yw(Ny);function Dw(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?ex:Qx({point:function(i,a){this.stream.point(i*t+n,a*e+r)}})}function Fw(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Fw.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(jy(n)>Cy&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};function jw(t,e){return[Iy(e)*Wy(t),Wy(e)]}jw.invert=yw(Xy);function Nw(t,e){var n=Iy(e),r=1+Iy(t)*n;return[n*Wy(t)/r,Wy(e)/r]}Nw.invert=yw(function(t){return 2*Ny(t)});function zw(t,e){return[Uy(Yy((Py+e)/2)),-t]}zw.invert=function(t,e){return[-e,2*Ny(qy(t))-Py]};var Iw=Kx(),Bw=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function qw(t,e){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Hw[t]=function(t,e){return function n(){var r=e();return r.type=t,r.path=Kx().projection(r),r.copy=r.copy||function(){var t=n();return Bw.forEach(function(e){r[e]&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}(t,e),this):Hw[t]||null}function Uw(t){return t&&t.path||Iw}var Hw={albers:gw,albersusa:function(){var t,e,n,r,i,a,o=gw(),s=vw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=vw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},c.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([o.stream(e=n),s.stream(n),u.stream(n)])},c.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),u.precision(t),f()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),u.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(l),r=s.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+Cy,c+.12*e+Cy],[a-.214*e-Cy,c+.234*e-Cy]]).stream(l),i=u.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+Cy,c+.166*e+Cy],[a-.115*e-Cy,c+.234*e-Cy]]).stream(l),f()},c.fitExtent=function(t,e){return nw(c,t,e)},c.fitSize=function(t,e){return rw(c,t,e)},c.fitWidth=function(t,e){return iw(c,t,e)},c.fitHeight=function(t,e){return aw(c,t,e)},c.scale(1070)},azimuthalequalarea:function(){return fw(bw).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return fw(_w).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return hw(kw).scale(109.5).parallels([30,30])},conicequalarea:vw,conicequidistant:function(){return hw(Tw).scale(131.154).center([0,13.9389])},equalEarth:function(){return fw(Lw).scale(177.158)},equirectangular:function(){return fw(Mw).scale(152.63)},gnomonic:function(){return fw(Rw).scale(144.049).clipAngle(60)},identity:function(){var t,e,n,r,i,a,o=1,s=0,u=0,l=1,c=1,f=ex,d=null,h=ex;function p(){return r=i=null,a}return a={stream:function(t){return r&&i===t?r:r=f(h(i=t))},postclip:function(r){return arguments.length?(h=r,d=t=e=n=null,p()):h},clipExtent:function(r){return arguments.length?(h=null==r?(d=t=e=n=null,ex):Y_(d=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==d?null:[[d,t],[e,n]]},scale:function(t){return arguments.length?(f=Dw((o=+t)*l,o*c,s,u),p()):o},translate:function(t){return arguments.length?(f=Dw(o*l,o*c,s=+t[0],u=+t[1]),p()):[s,u]},reflectX:function(t){return arguments.length?(f=Dw(o*(l=t?-1:1),o*c,s,u),p()):l<0},reflectY:function(t){return arguments.length?(f=Dw(o*l,o*(c=t?-1:1),s,u),p()):c<0},fitExtent:function(t,e){return nw(a,t,e)},fitSize:function(t,e){return rw(a,t,e)},fitWidth:function(t,e){return iw(a,t,e)},fitHeight:function(t,e){return aw(a,t,e)}}},mercator:function(){return ww(xw).scale(961/Ry)},naturalEarth1:function(){return fw(Fw).scale(175.295)},orthographic:function(){return fw(jw).scale(249.5).clipAngle(90+Cy)},stereographic:function(){return fw(Nw).scale(250).clipAngle(142)},transversemercator:function(){var t=ww(zw),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(var Ww in Hw)qw(Ww,Hw[Ww]);function Gw(t){rr.call(this,null,t)}function Vw(t){rr.call(this,null,t)}function Yw(t){rr.call(this,null,t)}function Zw(t){rr.call(this,[],t),this.generator=$_()}function Xw(t){rr.call(this,null,t),this.modified(!0)}function $w(t,e,n){Object(p.D)(t[e])&&t[e](n)}Gw.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(p.y)(Gw,rr).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||p.x,a=t.as||"path",o=n.SOURCE;!r||t.modified()?(this.value=r=Uw(t.projection),n.materialize().reflow()):o=i===p.x||e.modified(i.fields)?n.ADD_MOD:n.ADD;var s=function(t,e){var n=t.pointRadius();t.context(null),null!=e&&t.pointRadius(e);return n}(r,t.pointRadius);return n.visit(o,function(t){t[a]=r(i(t))}),r.pointRadius(s),n.modifies(a)},Vw.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(p.y)(Vw,rr).transform=function(t,e){var n,r=t.projection,i=t.fields[0],a=t.fields[1],o=t.as||["x","y"],s=o[0],u=o[1];function l(t){var e=r([i(t),a(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,l):(n=e.modified(i.fields)||e.modified(a.fields),e.visit(n?e.ADD_MOD:e.ADD,l)),e.modifies(o)},Yw.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(p.y)(Yw,rr).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||Object(p.t)("datum"),a=t.as||"shape",o=n.ADD_MOD;return r&&!t.modified()||(this.value=r=function(t,e,n){var r=null==n?function(n){return t(e(n))}:function(r){var i=t.pointRadius(),a=t.pointRadius(n)(e(r));return t.pointRadius(i),a};return r.context=function(e){return t.context(e),r},r}(Uw(t.projection),i,t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(t){t[a]=r}),n.modifies(a)},Zw.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(p.y)(Zw,rr).transform=function(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(var a in t)Object(p.D)(i[a])&&i[a](t[a]);return n=i(),r.length?e.mod.push(k(r[0],n)):e.add.push(x(n)),r[0]=n,e},Object(p.y)(Xw,rr).transform=function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=function(t){var e=qw((t||"mercator").toLowerCase());e||Object(p.n)("Unrecognized projection type: "+t);return e()}(t.type),Bw.forEach(function(e){null!=t[e]&&$w(n,e,t[e])})):Bw.forEach(function(e){t.modified(e)&&$w(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&function(t,e){var n=(r=e.fit,1===(r=Object(p.i)(r)).length?r[0]:{type:wy,features:r.reduce(function(t,e){return e&&e.type===wy?t.push.apply(t,e.features):Object(p.A)(e)?t.push.apply(t,e):t.push(e),t},[])});var r;e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var Jw=function(t){return function(){return t}},Kw=function(){return 1e-6*(Math.random()-.5)};function Qw(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,l,c,f,d,h=t._root,p={data:r},v=t._x0,g=t._y0,m=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((l=e>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o,i=h,!(h=h[f=c<<1|l]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o}while((f=c<<1|l)===(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=p,t}var tA=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function eA(t){return t[0]}function nA(t){return t[1]}function rA(t,e,n){var r=new iA(null==e?eA:e,null==n?nA:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function iA(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function aA(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var oA=rA.prototype=iA.prototype;function sA(t){return t.x+t.vx}function uA(t){return t.y+t.vy}oA.copy=function(){var t,e,n=new iA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=aA(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=aA(e));return n},oA.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Qw(this.cover(e,n),e,n,t)},oA.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<a;++n)Qw(this,o[n],s[n],t[n]);return this},oA.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,u=i-n,l=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},oA.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},oA.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},oA.find=function(t,e,n){var r,i,a,o,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],v=this._root;for(v&&p.push(new tA(v,c,f,d,h)),null==n?n=1/0:(c=t-n,f=e-n,d=t+n,h=e+n,n*=n);u=p.pop();)if(!(!(v=u.node)||(i=u.x0)>d||(a=u.y0)>h||(o=u.x1)<c||(s=u.y1)<f))if(v.length){var g=(i+o)/2,m=(a+s)/2;p.push(new tA(v[3],g,m,o,s),new tA(v[2],i,m,g,s),new tA(v[1],g,a,o,m),new tA(v[0],i,a,g,m)),(l=(e>=m)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var y=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);c=t-x,f=e-x,d=t+x,h=e+x,r=v.data}}return r},oA.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,l,c,f,d,h=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(u=(v+m)/2))?v=u:m=u,e=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},oA.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},oA.root=function(){return this._root},oA.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},oA.visit=function(t){var e,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new tA(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var l=(r+a)/2,c=(i+o)/2;(n=u[3])&&s.push(new tA(n,l,c,a,o)),(n=u[2])&&s.push(new tA(n,r,c,l,o)),(n=u[1])&&s.push(new tA(n,l,i,a,c)),(n=u[0])&&s.push(new tA(n,r,i,l,c))}return this},oA.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new tA(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(o+u)/2,f=(s+l)/2;(a=i[0])&&n.push(new tA(a,o,s,c,f)),(a=i[1])&&n.push(new tA(a,c,s,u,f)),(a=i[2])&&n.push(new tA(a,o,f,c,l)),(a=i[3])&&n.push(new tA(a,c,f,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},oA.x=function(t){return arguments.length?(this._x=t,this):this._x},oA.y=function(t){return arguments.length?(this._y=t,this):this._y};function lA(t){return t.index}function cA(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var fA={value:function(){}};function dA(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new hA(r)}function hA(t){this._=t}function pA(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function vA(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=fA,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}hA.prototype=dA.prototype={constructor:hA,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=vA(i[n],t.name,e);else if(null==e)for(n in i)i[n]=vA(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=pA(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new hA(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var gA,mA,yA=dA,bA=0,_A=0,xA=0,wA=1e3,AA=0,kA=0,MA=0,TA="object"===typeof performance&&performance.now?performance:Date,SA="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function CA(){return kA||(SA(EA),kA=TA.now()+MA)}function EA(){kA=0}function OA(){this._call=this._time=this._next=null}function PA(t,e,n){var r=new OA;return r.restart(t,e,n),r}function LA(){kA=(AA=TA.now())+MA,bA=_A=0;try{!function(){CA(),++bA;for(var t,e=gA;e;)(t=kA-e._time)>=0&&e._call.call(null,t),e=e._next;--bA}()}finally{bA=0,function(){var t,e,n=gA,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:gA=e);mA=t,DA(r)}(),kA=0}}function RA(){var t=TA.now(),e=t-AA;e>wA&&(MA-=e,AA=t)}function DA(t){bA||(_A&&(_A=clearTimeout(_A)),t-kA>24?(t<1/0&&(_A=setTimeout(LA,t-TA.now()-MA)),xA&&(xA=clearInterval(xA))):(xA||(AA=TA.now(),xA=setInterval(RA,wA)),bA=1,SA(LA)))}OA.prototype=PA.prototype={constructor:OA,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?CA():+n)+(null==e?0:+e),this._next||mA===this||(mA?mA._next=this:gA=this,mA=this),this._call=t,this._time=n,DA()},stop:function(){this._call&&(this._call=null,this._time=1/0,DA())}};function FA(t){return t.x}function jA(t){return t.y}var NA=10,zA=Math.PI*(3-Math.sqrt(5)),IA=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=Zf(),u=PA(c),l=yA("tick","end");function c(){f(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function f(r){var u,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.each(function(t){t(n)}),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=NA*Math.sqrt(n),a=n*zA;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function h(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.each(h),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,h(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=e-(s=t[l]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},BA={center:function(t,e){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-t,s=s/a-e,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},collide:function(t){var e,n,r=1,i=1;function a(){for(var t,a,s,u,l,c,f,d=e.length,h=0;h<i;++h)for(a=rA(e,sA,uA).visitAfter(o),t=0;t<d;++t)s=e[t],c=n[s.index],f=c*c,u=s.x+s.vx,l=s.y+s.vy,a.visit(p);function p(t,e,n,i,a){var o=t.data,d=t.r,h=c+d;if(!o)return e>u+h||i<u-h||n>l+h||a<l-h;if(o.index>s.index){var p=u-o.x-o.vx,v=l-o.y-o.vy,g=p*p+v*v;g<h*h&&(0===p&&(g+=(p=Kw())*p),0===v&&(g+=(v=Kw())*v),g=(h-(g=Math.sqrt(g)))/g*r,s.vx+=(p*=g)*(h=(d*=d)/(f+d)),s.vy+=(v*=g)*h,o.vx-=p*(h=1-h),o.vy-=v*h)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=Jw(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:Jw(+e),s(),a):t},a},nbody:function(){var t,e,n,r,i=Jw(-30),a=1,o=1/0,s=.81;function u(r){var i,a=t.length,o=rA(t,FA,jA).visitAfter(c);for(n=r,i=0;i<a;++i)e=t[i],o.visit(f)}function l(){if(t){var e,n,a=t.length;for(r=new Array(a),e=0;e<a;++e)n=t[e],r[n.index]=+i(n,e,t)}}function c(t){var e,n,i,a,o,s=0,u=0;if(t.length){for(i=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,a+=n*e.y);t.x=i/u,t.y=a/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function f(t,i,u,l){if(!t.value)return!0;var c=t.x-e.x,f=t.y-e.y,d=l-i,h=c*c+f*f;if(d*d/s<h)return h<o&&(0===c&&(h+=(c=Kw())*c),0===f&&(h+=(f=Kw())*f),h<a&&(h=Math.sqrt(a*h)),e.vx+=c*t.value*n/h,e.vy+=f*t.value*n/h),!0;if(!(t.length||h>=o)){(t.data!==e||t.next)&&(0===c&&(h+=(c=Kw())*c),0===f&&(h+=(f=Kw())*f),h<a&&(h=Math.sqrt(a*h)));do{t.data!==e&&(d=r[t.data.index]*n/h,e.vx+=c*d,e.vy+=f*d)}while(t=t.next)}}return u.initialize=function(e){t=e,l()},u.strength=function(t){return arguments.length?(i="function"===typeof t?t:Jw(+t),l(),u):i},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},link:function(t){var e,n,r,i,a,o=lA,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=Jw(30),l=1;function c(r){for(var i=0,o=t.length;i<l;++i)for(var s,u,c,f,d,h,p,v=0;v<o;++v)u=(s=t[v]).source,f=(c=s.target).x+c.vx-u.x-u.vx||Kw(),d=c.y+c.vy-u.y-u.vy||Kw(),f*=h=((h=Math.sqrt(f*f+d*d))-n[v])/h*r*e[v],d*=h,c.vx-=f*(p=a[v]),c.vy-=d*p,u.vx+=f*(p=1-p),u.vy+=d*p}function f(){if(r){var s,u,l=r.length,c=t.length,f=Zf(r,o);for(s=0,i=new Array(l);s<c;++s)(u=t[s]).index=s,"object"!==typeof u.source&&(u.source=cA(f,u.source)),"object"!==typeof u.target&&(u.target=cA(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)u=t[s],a[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),d(),n=new Array(c),h()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,f()},c.links=function(e){return arguments.length?(t=e,f(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(s="function"===typeof t?t:Jw(+t),d(),c):s},c.distance=function(t){return arguments.length?(u="function"===typeof t?t:Jw(+t),h(),c):u},c},x:function(t){var e,n,r,i=Jw(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=Jw(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:Jw(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"===typeof e?e:Jw(+e),o(),a):t},a},y:function(t){var e,n,r,i=Jw(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=Jw(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:Jw(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"===typeof e?e:Jw(+e),o(),a):t},a}},qA="forces",UA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],HA=["static","iterations"],WA=["x","y","vx","vy"];function GA(t){rr.call(this,null,t)}GA.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:WA}]};var VA=Object(p.y)(GA,rr);function YA(t,e,n,r){var i,a,o,s,u=Object(p.i)(e.forces);for(i=0,a=UA.length;i<a;++i)(o=UA[i])!==qA&&e.modified(o)&&t[o](e[o]);for(i=0,a=u.length;i<a;++i)s=qA+i,(o=n||e.modified(qA,i)?XA(u[i]):r&&ZA(u[i],r)?t.force(s):null)&&t.force(s,o);for(a=t.numForces||0;i<a;++i)t.force(qA+i,null);return t.numForces=u.length,t}function ZA(t,e){var n,r;for(n in t)if(Object(p.D)(r=t[n])&&e.modified(Object(p.g)(r)))return 1;return 0}function XA(t){var e,n;for(n in BA.hasOwnProperty(t.force)||Object(p.n)("Unrecognized force: "+t.force),e=BA[t.force](),t)Object(p.D)(e[n])&&$A(e[n],t[n],t);return e}function $A(t,e,n){t(Object(p.D)(e)?function(t){return e(t,n)}:e)}VA.transform=function(t,e){var n,r,i=this.value,a=e.changed(e.ADD_REM),o=t.modified(UA),s=t.iterations||300;if(i?(a&&(e.modifies("index"),i.nodes(e.source)),(o||e.changed(e.MOD))&&YA(i,t,0,e)):(this.value=i=function(t,e){var n=IA(t),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},YA(n,e,!0).on("end",function(){r=!0})}(e.source,t),i.on("tick",(n=e.dataflow,r=this,function(){n.touch(r).run()})),t.static||(a=!0,i.tick()),e.modifies("index")),o||a||t.modified(HA)||e.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),t.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!a)return e.StopPropagation;return this.finish(t,e)},VA.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===qA&&"link"===n.op._argval.force)for(var s,u=n.op._argops,l=0,c=u.length;l<c;++l)if("links"===u[l].name&&(s=u[l].op.source)){r.pulse(s,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(WA)};var JA=function(t,e,n){var r={};return t.each(function(t){var i=t.data;n(i)&&(r[e(i)]=t)}),t.lookup=r,t};function KA(t,e){return t.parent===e.parent?1:2}function QA(t,e){return t+e.x}function tk(t,e){return Math.max(t,e.y)}function ek(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function nk(t,e){var n,r,i,a,o,s=new ok(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=rk);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)l.push(r=n.children[a]=new ok(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(ak)}function rk(t){return t.children}function ik(t){t.data=t.data.data}function ak(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function ok(t){this.data=t,this.depth=this.height=0,this.parent=null}ok.prototype=nk.prototype={constructor:ok,count:function(){return this.eachAfter(ek)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return nk(this).eachBefore(ik)}};var sk=Array.prototype.slice;var uk=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(sk.call(t))).length,a=[];r<i;)e=t[r],n&&fk(n,e)?++r:(n=hk(a=lk(a,e)),r=0);return n};function lk(t,e){var n,r;if(dk(e,t))return[e];for(n=0;n<t.length;++n)if(ck(e,t[n])&&dk(pk(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(ck(pk(t[n],t[r]),e)&&ck(pk(t[n],e),t[r])&&ck(pk(t[r],e),t[n])&&dk(vk(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function ck(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function fk(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function dk(t,e){for(var n=0;n<e.length;++n)if(!fk(t,e[n]))return!1;return!0}function hk(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return pk(t[0],t[1]);case 3:return vk(t[0],t[1],t[2])}var e}function pk(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,l=o-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+a+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+s)/2}}function vk(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-s,v=i-c,g=u-a,m=f-a,y=r*r+i*i-a*a,b=y-o*o-s*s+u*u,_=y-l*l-c*c+f*f,x=h*p-d*v,w=(p*_-v*b)/(2*x)-r,A=(v*g-p*m)/x,k=(h*b-d*_)/(2*x)-i,M=(d*m-h*g)/x,T=A*A+M*M-1,S=2*(a+w*A+k*M),C=w*w+k*k-a*a,E=-(T?(S+Math.sqrt(S*S-4*T*C))/(2*T):C/S);return{x:r+w+A*E,y:i+k+M*E,r:E}}function gk(t,e,n){var r,i,a,o,s=t.x-e.x,u=t.y-e.y,l=s*s+u*u;l?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),n.x=t.x-r*s-a*u,n.y=t.y-r*u+a*s):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*s-a*u,n.y=e.y+r*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function mk(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function yk(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function bk(t){this._=t,this.next=null,this.previous=null}function _k(t){if(!(i=t.length))return 0;var e,n,r,i,a,o,s,u,l,c,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;gk(n,e,r=t[2]),e=new bk(e),n=new bk(n),r=new bk(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){gk(e._,n._,r=t[s]),r=new bk(r),u=n.next,l=e.previous,c=n._.r,f=e._.r;do{if(c<=f){if(mk(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}c+=u._.r,u=u.next}else{if(mk(l._,r._)){(e=l).next=n,n.previous=e,--s;continue t}f+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=yk(e);(r=r.next)!==n;)(o=yk(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=uk(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}function xk(t){if("function"!==typeof t)throw new Error;return t}function wk(){return 0}var Ak=function(t){return function(){return t}};function kk(t){return Math.sqrt(t.value)}function Mk(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Tk(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=_k(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function Sk(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Ck=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Ek=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l},Ok="$",Pk={depth:-1},Lk={};function Rk(t){return t.id}function Dk(t){return t.parentId}var Fk=function(){var t=Rk,e=Dk;function n(n){var r,i,a,o,s,u,l,c=n.length,f=new Array(c),d={};for(i=0;i<c;++i)r=n[i],s=f[i]=new ok(r),null!=(u=t(r,i,n))&&(u+="")&&(d[l=Ok+(s.id=u)]=l in d?Lk:s);for(i=0;i<c;++i)if(s=f[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(o=d[Ok+u]))throw new Error("missing: "+u);if(o===Lk)throw new Error("ambiguous: "+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=Pk,a.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(ak),a.parent=null,c>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=xk(e),n):t},n.parentId=function(t){return arguments.length?(e=xk(t),n):e},n};function jk(t,e){return t.parent===e.parent?1:2}function Nk(t){var e=t.children;return e?e[0]:t.t}function zk(t){var e=t.children;return e?e[e.length-1]:t.t}function Ik(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Bk(t,e,n){return t.a.parent===e.parent?t.a:n}function qk(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}qk.prototype=Object.create(ok.prototype);var Uk=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(i-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l},Hk=(1+Math.sqrt(5))/2;function Wk(t,e,n,r,i,a){for(var o,s,u,l,c,f,d,h,p,v,g,m=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){u=i-n,l=a-r;do{c=y[_++].value}while(!c&&_<x);for(f=d=c,g=c*c*(v=Math.max(l/u,u/l)/(w*t)),p=Math.max(d/g,g/f);_<x;++_){if(c+=s=y[_].value,s<f&&(f=s),s>d&&(d=s),g=c*c*v,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}m.push(o={value:c,dice:u<l,children:y.slice(b,_)}),o.dice?Ek(o,n,r,i,w?r+=l*c/w:a):Uk(o,n,r,w?n+=u*c/w:i,a),w-=c,b=_}return m}var Gk=function t(e){function n(t,n,r,i,a){Wk(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Hk),Vk=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,u,l,c,f=-1,d=o.length,h=t.value;++f<d;){for(u=(s=o[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?Ek(s,n,r,i,r+=(a-r)*s.value/h):Uk(s,n,r,n+=(i-n)*s.value/h,a),h-=s.value}else t._squarify=o=Wk(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Hk);function Yk(t){rr.call(this,null,t)}function Zk(t){return t.values}function Xk(t){rr.call(this,null,t)}function $k(t,e){return t.parent===e.parent?1:2}Yk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(p.y)(Yk,rr).transform=function(t,e){e.source||Object(p.n)("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),a=this.value;return(!a||r||e.changed())&&(a&&a.each(function(t){t.children&&y(t.data)&&i.rem.push(t.data)}),this.value=a=nk({values:Object(p.i)(t.keys).reduce(function(t,e){return t.key(e),t},Xf()).entries(i.source)},Zk),n&&a.each(function(t){t.children&&(t=x(t.data),i.add.push(t),i.source.push(t))}),JA(a,b,b)),i.source.root=a,i},Object(p.y)(Xk,rr).transform=function(t,e){e.source&&e.source.root||Object(p.n)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,a=t.as||r;t.field&&i.sum(t.field),t.sort&&i.sort(t.sort),function(t,e,n){for(var r,i=0,a=e.length;i<a;++i)(r=e[i])in n&&t[r](n[r])}(n,this.params,t),n.separation&&n.separation(!1!==t.separation?$k:p.M);try{this.value=n(i)}catch(o){Object(p.n)(o)}return i.each(function(t){!function(t,e,n){for(var r=t.data,i=0,a=e.length-1;i<a;++i)r[n[i]]=t[e[i]];r[n[a]]=t.children?t.children.length:0}(t,r,a)}),e.reflow(t.modified()).modifies(a).modifies("leaf")};var Jk=["x","y","r","depth","children"];function Kk(t){Xk.call(this,t)}Kk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Jk.length,default:Jk}]};var Qk=Object(p.y)(Kk,Xk);Qk.layout=function(){var t=null,e=1,n=1,r=wk;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Mk(t)).eachAfter(Tk(r,.5)).eachBefore(Sk(1)):i.eachBefore(Mk(kk)).eachAfter(Tk(wk,1)).eachAfter(Tk(r,i.r/Math.min(e,n))).eachBefore(Sk(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=null==(n=e)?null:xk(n),i):t;var n},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:Ak(+t),i):r},i},Qk.params=["size","padding"],Qk.fields=Jk;var tM=["x0","y0","x1","y1","depth","children"];function eM(t){Xk.call(this,t)}eM.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tM.length,default:tM}]};var nM=Object(p.y)(eM,Xk);function rM(t){rr.call(this,null,t)}nM.layout=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&Ek(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(Ck),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},nM.params=["size","round","padding"],nM.fields=tM,rM.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(p.y)(rM,rr).transform=function(t,e){e.source||Object(p.n)("Stratify transform requires an upstream data source.");var n=this.value,r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),a=!this.value||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?JA(Fk().id(t.key).parentId(t.parentKey)(i.source),t.key,p.eb):JA(Fk()([{}]),t.key,t.key)),i.source.root=this.value=n,i};var iM={tidy:function(){var t=jk,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,a,o=new qk(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new qk(r[i],i)),n.parent=e;return(o.parent=new qk(null,0)).children=[o],o}(i);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)});var d=l===c?1:t(l,c)/2,h=d-l.x,p=e/(c.x+d+h),v=n/(f.depth||1);i.eachBefore(function(t){t.x=(t.x+h)*p,t.y=t.depth*v})}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,d=u.m;s=zk(s),a=Nk(a),s&&a;)u=Nk(u),(o=zk(o)).a=e,(i=s.z+f-a.z-l+t(s._,a._))>0&&(Ik(Bk(s,e,r),e,i),l+=i,c+=i),f+=s.m,l+=a.m,d+=u.m,c+=o.m;s&&!zk(o)&&(o.t=s,o.m+=f-c),a&&!Nk(u)&&(u.t=a,u.m+=l-d,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},cluster:function(){var t=KA,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(QA,0)/t.length}(n),e.y=function(t){return 1+t.reduce(tk,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=s.x-t(s,u)/2,c=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}},aM=["x","y","depth","children"];function oM(t){Xk.call(this,t)}oM.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:aM.length,default:aM}]};var sM=Object(p.y)(oM,Xk);function uM(t){rr.call(this,[],t)}sM.layout=function(t){var e=t||"tidy";if(iM.hasOwnProperty(e))return iM[e]();Object(p.n)("Unrecognized Tree layout method: "+e)},sM.params=["size","nodeSize"],sM.fields=aM,uM.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(p.y)(uM,rr).transform=function(t,e){var n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),a={};return r||Object(p.n)("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,function(t){a[b(t)]=1}),r.each(function(t){var e=t.data,n=t.parent&&t.parent.data;n&&a[b(e)]&&a[b(n)]&&i.add.push(x({source:n,target:e}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,function(t){a[b(t)]=1}),n.forEach(function(t){(a[b(t.source)]||a[b(t.target)])&&i.mod.push(t)})),i};var lM={binary:function(t,e,n,r,i){var a,o,s=t.children,u=s.length,l=new Array(u+1);for(l[0]=o=a=0;a<u;++a)l[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,u){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=u)}for(var f=l[e],d=r/2+f,h=e+1,p=n-1;h<p;){var v=h+p>>>1;l[v]<d?h=v+1:p=v}d-l[h-1]<l[h]-d&&e+1<h&&--h;var g=l[h]-f,m=r-g;if(o-i>u-a){var y=(i*m+o*g)/r;t(e,h,g,i,a,y,u),t(h,n,m,y,a,o,u)}else{var b=(a*m+u*g)/r;t(e,h,g,i,a,o,b),t(h,n,m,i,b,o,u)}}(0,u,t.value,e,n,r,i)},dice:Ek,slice:Uk,slicedice:function(t,e,n,r,i){(1&t.depth?Uk:Ek)(t,e,n,r,i)},squarify:Gk,resquarify:Vk},cM=["x0","y0","x1","y1","depth","children"];function fM(t){Xk.call(this,t)}fM.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cM.length,default:cM}]};var dM=Object(p.y)(fM,Xk);dM.layout=function(){var t=function(){var t=Gk,e=!1,n=1,r=1,i=[0],a=wk,o=wk,s=wk,u=wk,l=wk;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(Ck),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,d=e.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=d,e.children&&(n=i[e.depth+1]=a(e)/2,r+=l(e)-n,c+=o(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(d-=u(e)-n)<c&&(c=d=(c+d)/2),t(e,r,c,f,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=xk(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"===typeof t?t:Ak(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"===typeof t?t:Ak(+t),c):o},c.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:Ak(+t),c):s},c.paddingBottom=function(t){return arguments.length?(u="function"===typeof t?t:Ak(+t),c):u},c.paddingLeft=function(t){return arguments.length?(l="function"===typeof t?t:Ak(+t),c):l},c}();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){lM.hasOwnProperty(e)?t.tile(lM[e]):Object(p.n)("Unrecognized Treemap layout method: "+e)},t},dM.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],dM.fields=cM;var hM=function(t){return function(){return t}};function pM(t){return t[0]}function vM(t){return t[1]}function gM(){this._=null}function mM(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function yM(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function bM(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function _M(t){for(;t.L;)t=t.L;return t}gM.prototype={constructor:gM,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=_M(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(yM(this,n),n=(t=n).U),n.C=!1,r.C=!0,bM(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(bM(this,n),n=(t=n).U),n.C=!1,r.C=!0,yM(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?_M(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,yM(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,bM(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,yM(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,bM(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,yM(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,bM(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var xM=gM;function wM(t,e,n,r){var i=[null,null],a=VM.push(i)-1;return i.left=t,i.right=e,n&&kM(i,t,e,n),r&&kM(i,e,t,r),WM[t.index].halfedges.push(a),WM[e.index].halfedges.push(a),i}function AM(t,e,n){var r=[e,n];return r.left=t,r}function kM(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function MM(t,e,n,r,i){var a,o=t[0],s=t[1],u=o[0],l=o[1],c=0,f=1,d=s[0]-u,h=s[1]-l;if(a=e-u,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>c&&(c=a)}if(a=r-u,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<f&&(f=a)}if(a=n-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=i-l,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}return!(c>0||f<1)||(c>0&&(t[0]=[u+c*d,l+c*h]),f<1&&(t[1]=[u+f*d,l+f*h]),!0)}}}}}function TM(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,u=t[0],l=t.left,c=t.right,f=l[0],d=l[1],h=c[0],p=c[1],v=(f+h)/2,g=(d+p)/2;if(p===d){if(v<e||v>=r)return;if(f>h){if(u){if(u[1]>=i)return}else u=[v,n];a=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];a=[v,n]}}else if(s=g-(o=(f-h)/(p-d))*v,o<-1||o>1)if(f>h){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(d<p){if(u){if(u[0]>=r)return}else u=[e,o*e+s];a=[r,o*r+s]}else{if(u){if(u[0]<e)return}else u=[r,o*r+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}function SM(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function CM(t,e){return e[+(e.left!==t.site)]}function EM(t,e){return e[+(e.left===t.site)]}var OM,PM=[];function LM(){mM(this),this.x=this.y=this.arc=this.site=this.cy=null}function RM(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],u=r[0]-o,l=r[1]-s,c=a[0]-o,f=a[1]-s,d=2*(u*f-l*c);if(!(d>=-ZM)){var h=u*u+l*l,p=c*c+f*f,v=(f*h-l*p)/d,g=(u*p-c*h)/d,m=PM.pop()||new LM;m.arc=t,m.site=i,m.x=v+o,m.y=(m.cy=g+s)+Math.sqrt(v*v+g*g),t.circle=m;for(var y=null,b=GM._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}GM.insert(y,m),y||(OM=m)}}}}function DM(t){var e=t.circle;e&&(e.P||(OM=e.N),GM.remove(e),PM.push(e),mM(e),t.circle=null)}var FM=[];function jM(){mM(this),this.edge=this.site=this.circle=null}function NM(t){var e=FM.pop()||new jM;return e.site=t,e}function zM(t){DM(t),HM.remove(t),FM.push(t),mM(t)}function IM(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];zM(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<YM&&Math.abs(r-u.circle.cy)<YM;)a=u.P,s.unshift(u),zM(u),u=a;s.unshift(u),DM(u);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<YM&&Math.abs(r-l.circle.cy)<YM;)o=l.N,s.push(l),zM(l),l=o;s.push(l),DM(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],kM(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=wM(u.site,l.site,null,i),RM(u),RM(l)}function BM(t){for(var e,n,r,i,a=t[0],o=t[1],s=HM._;s;)if((r=qM(s,o)-a)>YM)s=s.L;else{if(!((i=a-UM(s,o))>YM)){r>-YM?(e=s.P,n=s):i>-YM?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){WM[t.index]={site:t,halfedges:[]}}(t);var u=NM(t);if(HM.insert(e,u),e||n){if(e===n)return DM(e),n=NM(e.site),HM.insert(u,n),u.edge=n.edge=wM(e.site,u.site),RM(e),void RM(n);if(n){DM(e),DM(n);var l=e.site,c=l[0],f=l[1],d=t[0]-c,h=t[1]-f,p=n.site,v=p[0]-c,g=p[1]-f,m=2*(d*g-h*v),y=d*d+h*h,b=v*v+g*g,_=[(g*y-h*b)/m+c,(d*b-v*y)/m+f];kM(n.edge,l,p,_),u.edge=wM(l,t,null,_),n.edge=wM(t,p,null,_),RM(e),RM(n)}else u.edge=wM(e.site,u.site)}}function qM(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,f=1/a-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function UM(t,e){var n=t.N;if(n)return qM(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var HM,WM,GM,VM,YM=1e-6,ZM=1e-12;function XM(t,e){return e[1]-t[1]||e[0]-t[0]}function $M(t,e){var n,r,i,a=t.sort(XM).pop();for(VM=[],WM=new Array(t.length),HM=new xM,GM=new xM;;)if(i=OM,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(BM(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;IM(i.arc)}if(function(){for(var t,e,n,r,i=0,a=WM.length;i<a;++i)if((t=WM[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=SM(t,VM[e[n]]);for(o.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,a=VM.length;a--;)TM(i=VM[a],t,e,n,r)&&MM(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>YM||Math.abs(i[0][1]-i[1][1])>YM)||delete VM[a]}(o,s,u,l),function(t,e,n,r){var i,a,o,s,u,l,c,f,d,h,p,v,g=WM.length,m=!0;for(i=0;i<g;++i)if(a=WM[i]){for(o=a.site,s=(u=a.halfedges).length;s--;)VM[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)p=(h=EM(a,VM[u[s]]))[0],v=h[1],f=(c=CM(a,VM[u[++s%l]]))[0],d=c[1],(Math.abs(p-f)>YM||Math.abs(v-d)>YM)&&(u.splice(s,0,VM.push(AM(o,h,Math.abs(p-t)<YM&&r-v>YM?[t,Math.abs(f-t)<YM?d:r]:Math.abs(v-r)<YM&&n-p>YM?[Math.abs(d-r)<YM?f:n,r]:Math.abs(p-n)<YM&&v-e>YM?[n,Math.abs(f-n)<YM?d:e]:Math.abs(v-e)<YM&&p-t>YM?[Math.abs(d-e)<YM?f:t,e]:null))-1),++l);l&&(m=!1)}if(m){var y,b,_,x=1/0;for(i=0,m=null;i<g;++i)(a=WM[i])&&(_=(y=(o=a.site)[0]-t)*y+(b=o[1]-e)*b)<x&&(x=_,m=a);if(m){var w=[t,e],A=[t,r],k=[n,r],M=[n,e];m.halfedges.push(VM.push(AM(o=m.site,w,A))-1,VM.push(AM(o,A,k))-1,VM.push(AM(o,k,M))-1,VM.push(AM(o,M,w))-1)}}for(i=0;i<g;++i)(a=WM[i])&&(a.halfedges.length||delete WM[i])}(o,s,u,l)}this.edges=VM,this.cells=WM,HM=GM=VM=WM=null}$M.prototype={constructor:$M,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return CM(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,u,l,c=n.site,f=-1,d=e[i[a-1]],h=d.left===c?d.right:d.left;++f<a;)o=h,h=(d=e[i[f]]).left===c?d.right:d.left,o&&h&&r<o.index&&r<h.index&&(u=o,l=h,((s=c)[0]-l[0])*(u[1]-s[1])-(s[0]-u[0])*(l[1]-s[1])<0)&&t.push([c.data,o.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],f=u*u+l*l;f<c&&(c=f,o=s.index)}})}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}};function JM(t){rr.call(this,null,t)}JM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var KM=Object(p.y)(JM,rr),QM=[[-1e5,-1e5],[1e5,1e5]];KM.transform=function(t,e){var n,r,i,a,o=t.as||"path",s=e.source;for(n=function(){var t=pM,e=vM,n=null;function r(r){return new $M(r.map(function(n,i){var a=[Math.round(t(n,i,r)/YM)*YM,Math.round(e(n,i,r)/YM)*YM];return a.index=i,a.data=n,a}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"===typeof e?e:hM(+e),r):t},r.y=function(t){return arguments.length?(e="function"===typeof t?t:hM(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x(t.x).y(t.y),t.size?n.size(t.size):n.extent(t.extent||QM),this.value=n=n(s),r=n.polygons(),i=0,a=s.length;i<a;++i)s[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return e.reflow(t.modified()).modifies(o)};var tT=Math.PI/180,eT=64,nT=2048,rT=function(){var t,e,n,r,i,a,o,s=[256,256],u=sT,l=[],c=Math.random,f={};function d(t,e,n){for(var r,i,a,o,l,f=e.x,d=e.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),v=c()<.5?1:-1,g=-v;(r=p(g+=v))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=h));)if(e.x=f+i,e.y=d+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>s[0]||e.y+e.y1>s[1])&&(!n||!aT(e,t,s[0]))&&(!n||(l=n,(o=e).x+o.x1>l[0].x&&o.x+o.x0<l[1].x&&o.y+o.y1>l[0].y&&o.y+o.y0<l[1].y))){for(var m,y=e.sprite,b=e.width>>5,_=s[0]>>5,x=e.x-(b<<4),w=127&x,A=32-w,k=e.y1-e.y0,M=(e.y+e.y0)*_+(x>>5),T=0;T<k;T++){m=0;for(var S=0;S<=b;S++)t[M+S]|=m<<A|(S<b?(m=y[T*b+S])>>>w:0);M+=_}return e.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(eT<<5)/e,t.height=nT/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(oo()),f=function(t){var e=[],n=-1;for(;++n<t;)e[n]=0;return e}((s[0]>>5)*s[1]),h=null,p=l.length,v=-1,g=[],m=l.map(function(s){return{text:t(s),font:e(s),style:r(s),weight:i(s),rotate:a(s),size:~~n(s),padding:o(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}}).sort(function(t,e){return e.size-t.size});++v<p;){var y=m[v];y.x=s[0]*(c()+.5)>>1,y.y=s[1]*(c()+.5)>>1,iT(u,y,m,v),y.hasText&&d(f,y,h)&&(g.push(y),h?oT(h,y):h=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return g},f.words=function(t){return arguments.length?(l=t,f):l},f.size=function(t){return arguments.length?(s=[+t[0],+t[1]],f):s},f.font=function(t){return arguments.length?(e=uT(t),f):e},f.fontStyle=function(t){return arguments.length?(r=uT(t),f):r},f.fontWeight=function(t){return arguments.length?(i=uT(t),f):i},f.rotate=function(t){return arguments.length?(a=uT(t),f):a},f.text=function(e){return arguments.length?(t=uT(e),f):t},f.spiral=function(t){return arguments.length?(u=lT[t]||t,f):u},f.fontSize=function(t){return arguments.length?(n=uT(t),f):n},f.padding=function(t){return arguments.length?(o=uT(t),f):o},f.random=function(t){return arguments.length?(c=t,f):c},f};function iT(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(eT<<5)/a,nT/a);var o,s,u,l,c,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font,o=i.measureText(e.text+"m").width*a,u=e.size<<1,e.rotate){var v=Math.sin(e.rotate*tT),g=Math.cos(e.rotate*tT),m=o*g,y=o*v,b=u*g,_=u*v;o=Math.max(Math.abs(m+_),Math.abs(m-_))+31>>5<<5,u=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(u>h&&(h=u),f+o>=eT<<5&&(f=0,d+=h,h=0),d+u>=nT)break;i.translate((f+(o>>1))/a,(d+(u>>1))/a),e.rotate&&i.rotate(e.rotate*tT),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=o,e.height=u,e.xoff=f,e.yoff=d,e.x1=o>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,f+=o}for(var x=i.getImageData(0,0,(eT<<5)/a,nT/a).data,w=[];--r>=0;)if((e=n[r]).hasText){for(s=(o=e.width)>>5,u=e.y1-e.y0,l=0;l<u*s;l++)w[l]=0;if(null==(f=e.xoff))return;d=e.yoff;var A=0,k=-1;for(c=0;c<u;c++){for(l=0;l<o;l++){var M=s*c+(l>>5),T=x[(d+c)*(eT<<5)+(f+l)<<2]?1<<31-l%32:0;w[M]|=T,A|=T}A?k=c:(e.y0++,u--,c--,d++)}e.y1=e.y0+k,e.sprite=w.slice(0,(e.y1-e.y0)*s)}}}function aT(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),s=127&o,u=32-s,l=t.y1-t.y0,c=(t.y+t.y0)*n+(o>>5),f=0;f<l;f++){r=0;for(var d=0;d<=a;d++)if((r<<u|(d<a?(r=i[f*a+d])>>>s:0))&e[c+d])return!0;c+=n}return!1}function oT(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function sT(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function uT(t){return"function"===typeof t?t:function(){return t}}var lT={archimedean:sT,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},cT=["x","y","font","fontSize","fontStyle","fontWeight","angle"],fT=["text","font","rotate","fontSize","fontStyle","fontWeight"];function dT(t){rr.call(this,rT(),t)}function hT(t){return new Uint32Array(t)}function pT(t,e,n){var r=(e<257?function(t){return new Uint8Array(t)}:e<65537?function(t){return new Uint16Array(t)}:hT)(t);return n&&r.set(n),r}dT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:cT}]},Object(p.y)(dT,rr).transform=function(t,e){var n=t.modified();if(n||e.changed(e.ADD_REM)||fT.some(function(n){var r=t[n];return Object(p.D)(r)&&e.modified(r.fields)})){var r,i=e.materialize(e.SOURCE).source,a=this.value,o=t.as||cT,s=t.fontSize||14;if(Object(p.D)(s)?r=t.fontSizeRange:s=Object(p.l)(s),r){var u=s,l=fv("sqrt")().domain(function(t,e){for(var n,r=1/0,i=-1/0,a=0,o=e.length;a<o;++a)(n=t(e[a]))<r&&(r=n),n>i&&(i=n);return[r,i]}(u,i)).range(r);s=function(t){return l(u(t))}}i.forEach(function(t){t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0});for(var c,f,d=a.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(s).random(xr).layout(),h=a.size(),v=h[0]>>1,g=h[1]>>1,m=0,y=d.length;m<y;++m)(f=(c=d[m]).datum)[o[0]]=c.x+v,f[o[1]]=c.y+g,f[o[2]]=c.font,f[o[3]]=c.size,f[o[4]]=c.style,f[o[5]]=c.weight,f[o[6]]=c.rotate;return e.reflow(n).modifies(o)}};var vT=function(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this.bisect(this.range,t.value),a=t.index,o=i[0],s=i[1],u=a.length;for(n=0;n<o;++n)e[a[n]]|=r;for(n=s;n<u;++n)e[a[n]]|=r;return this}}},gT=function(t,e){return Array.from(e,function(e){return t[e]})};function mT(){var t=hT(0),e=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,s,u,l,c,f=n,d=i.length,h=Array(d),p=hT(d);for(u=0;u<d;++u)h[u]=r(i[u]),p[u]=u;if(c=p,(l=h).sort.call(c,function(t,e){var n=l[t],r=l[e];return n<r?-1:n>r?1:0}),h=gT(l,c),f)o=e,s=t,e=Array(f+d),t=hT(f+d),function(t,e,n,r,i,a,o,s,u){var l,c=0,f=0;for(l=0;c<r&&f<o;++l)e[c]<i[f]?(s[l]=e[c],u[l]=n[c++]):(s[l]=i[f],u[l]=a[f++]+t);for(;c<r;++c,++l)s[l]=e[c],u[l]=n[c];for(;f<o;++f,++l)s[l]=i[f],u[l]=a[f]+t}(a,o,s,f,h,p,d,e,t);else{if(a>0)for(u=0;u<d;++u)p[u]+=a;e=h,t=p}return n=f+d,{index:p,value:h}},remove:function(r,i){var a,o,s,u=n;for(o=0;!i[t[o]]&&o<u;++o);for(s=o;o<u;++o)i[a=t[o]]||(t[s]=a,e[s]=e[o],++s);n=u-r},bisect:function(t,r){var i;return r?i=r.length:(r=e,i=n),[Ef(r,t[0],0,i),Cf(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function yT(t){rr.call(this,function(){var t=8,e=[],n=hT(0),r=pT(0,t),i=pT(0,t);return{data:function(){return e},seen:function(){return t=n,r=e.length,n=t.length>=r?t:((i=i||new t.constructor(r)).set(t),i);var t,r,i},add:function(t){for(var n,r=0,i=e.length,a=t.length;r<a;++r)(n=t[r])._index=i++,e.push(n)},remove:function(t,n){var a,o,s,u=e.length,l=Array(u-t),c=e;for(o=0;!n[o]&&o<u;++o)l[o]=e[o],c[o]=o;for(s=o;o<u;++o)a=e[o],n[o]?c[o]=-1:(c[o]=s,r[s]=r[o],i[s]=i[o],l[s]=a,a._index=s++),r[o]=0;return e=l,c},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=pT(e,t,r),i=pT(e,t))}}}(),t),this._indices=null,this._dims=null}yT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var bT=Object(p.y)(yT,rr);function _T(t){rr.call(this,null,t)}bT.transform=function(t,e){return this._dims?t.modified("fields")||t.fields.some(function(t){return e.modified(t.fields)})?this.reinit(t,e):this.eval(t,e):this.init(t,e)},bT.init=function(t,e){for(var n,r,i=t.fields,a=t.query,o=this._indices={},s=this._dims=[],u=a.length,l=0;l<u;++l)r=o[n=i[l].fname]||(o[n]=mT()),s.push(vT(r,l,a[l]));return this.eval(t,e)},bT.reinit=function(t,e){var n,r,i,a,o,s,u,l,c,f=e.materialize().fork(),d=t.fields,h=t.query,p=this._indices,v=this._dims,g=this.value,m=g.curr(),y=g.prev(),b=g.all(),_=f.rem=f.add,x=f.mod,w=h.length,A={};if(y.set(m),e.rem.length&&(o=this.remove(t,e,f)),e.add.length&&g.add(e.add),e.mod.length)for(s={},u=0,l=(a=e.mod).length;u<l;++u)s[a[u]._index]=1;for(u=0;u<w;++u)c=d[u],(!v[u]||t.modified("fields",u)||e.modified(c.fields))&&((n=A[i=c.fname])||(p[i]=r=mT(),A[i]=n=r.insert(c,e.source,0)),v[u]=vT(r,u,h[u]).onAdd(n,m));for(u=0,l=g.data().length;u<l;++u)o[u]||(y[u]!==m[u]?_.push(u):s[u]&&m[u]!==b&&x.push(u));return g.mask=(1<<w)-1,f},bT.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},bT.insert=function(t,e,n){var r,i,a,o=e.add,s=this.value,u=this._dims,l=this._indices,c=t.fields,f={},d=n.add,h=s.size(),p=h+o.length,v=u.length;s.resize(p,v),s.add(o);var g=s.curr(),m=s.prev(),y=s.all();for(r=0;r<v;++r)a=f[i=c[r].fname]||(f[i]=l[i].insert(c[r],o,h)),u[r].onAdd(a,g);for(;h<p;++h)m[h]=y,g[h]!==y&&d.push(h)},bT.modify=function(t,e){var n,r,i,a=e.mod,o=this.value,s=o.curr(),u=o.all(),l=t.mod;for(n=0,r=l.length;n<r;++n)s[i=l[n]._index]!==u&&a.push(i)},bT.remove=function(t,e,n){var r,i,a,o,s=this._indices,u=this.value,l=u.curr(),c=u.prev(),f=u.all(),d={},h=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)d[a=p[r]._index]=1,c[a]=o=l[a],l[a]=f,o!==f&&h.push(a);for(a in s)s[a].remove(i,d);return this.reindex(e,i,d),d},bT.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter(function(){var t=i.remove(e,n);for(var a in r)r[a].reindex(t)})},bT.update=function(t,e,n){var r,i,a=this._dims,o=t.query,s=e.stamp,u=a.length,l=0;for(n.filters=0,i=0;i<u;++i)t.modified("query",i)&&(r=i,++l);if(1===l)l=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,l=0;i<u;++i)t.modified("query",i)&&(l|=a[i].one,this.incrementAll(a[i],o[i],s,n.add),n.rem=n.add);return l},bT.incrementAll=function(t,e,n,r){var i,a,o,s=this.value,u=s.seen(),l=s.curr(),c=s.prev(),f=t.index(),d=t.bisect(t.range),h=t.bisect(e),p=h[0],v=h[1],g=d[0],m=d[1],y=t.one;if(p<g)for(i=p,a=Math.min(g,v);i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;else if(p>g)for(i=g,a=Math.min(p,m);i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;if(v>m)for(i=Math.max(p,m),a=v;i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;else if(v<m)for(i=Math.max(g,v),a=m;i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;t.range=e.slice()},bT.incrementOne=function(t,e,n,r){var i,a,o,s=this.value.curr(),u=t.index(),l=t.bisect(t.range),c=t.bisect(e),f=c[0],d=c[1],h=l[0],p=l[1],v=t.one;if(f<h)for(i=f,a=Math.min(h,d);i<a;++i)s[o=u[i]]^=v,n.push(o);else if(f>h)for(i=h,a=Math.min(f,p);i<a;++i)s[o=u[i]]^=v,r.push(o);if(d>p)for(i=Math.max(f,p),a=d;i<a;++i)s[o=u[i]]^=v,n.push(o);else if(d<p)for(i=Math.max(h,d),a=p;i<a;++i)s[o=u[i]]^=v,r.push(o);t.range=e.slice()},_T.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(p.y)(_T,rr).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;var a=e.fork(e.ALL),o=r.data(),s=r.curr(),u=r.prev(),l=function(t){return s[t]&n?null:o[t]};return a.filter(a.MOD,l),i&i-1?(a.filter(a.ADD,function(t){var e=s[t]&n;return!e&&e^u[t]&n?o[t]:null}),a.filter(a.REM,function(t){var e=s[t]&n;return e&&!(e^e^u[t]&n)?o[t]:null})):(a.filter(a.ADD,l),a.filter(a.REM,function(t){return(s[t]&n)===i?o[t]:null})),a.filter(a.SOURCE,function(t){return l(t._index)})};var xT=n(20),wT=function(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:"default",item:null})),t.on(t.events("view","mousemove"),e,function(t,n){var r=e.value,i=r?Object(p.H)(r)?r:r.user:"default",a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),t.add(null,function(t){var e,n=t.cursor,r=this.value;return Object(p.H)(n)||(r=n.item,n=n.user),e=n&&"default"!==n?n:r||n,"undefined"!==typeof document&&document.body&&(document.body.style.cursor=e),r},{cursor:e})};function AT(t,e){var n=t._runtime.data;return n.hasOwnProperty(e)||Object(p.n)("Unrecognized data set: "+e),n[e]}function kT(t,e){M(e)||Object(p.n)("Second argument to changes must be a changeset.");var n=AT(this,t);return n.modified=!0,this.pulse(n.input,e)}function MT(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function TT(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function ST(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}var CT=function(t,e,n){var r,i,a,o=t._renderer.canvas();return o&&(a=ST(t),i=e.changedTouches?e.changedTouches[0]:e,(r=Fl(i,o))[0]-=a[0],r[1]-=a[1]),e.dataflow=t,e.vega=function(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function a(t){if(!t)return n;Object(p.H)(t)&&(t=i(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Object(p.l)(t),item:Object(p.l)(e||{}),group:i,xy:a,x:function(t){return a(t)[0]},y:function(t){return a(t)[1]}}}(t,n,r),e.item=n,e};var ET="view",OT="timer",PT="window",LT={trap:!1};function RT(t){return t.item}function DT(t){var e=t.item.mark.source;return e.source||e}function FT(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}var jT=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r},NT=Math.sqrt(50),zT=Math.sqrt(10),IT=Math.sqrt(2);var BT="vega-bind",qT="vega-bind-name",UT="vega-bind-radio",HT="vega-option-",WT=function(t,e,n){if(e){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(e){e!==t.signal(r.signal)&&(i.source=!0,t.signal(r.signal,e).run())}},r.debounce&&(i.update=Object(p.m)(r.debounce,i.update))),function(t,e,n,r){var i=jT("div",{class:BT});i.appendChild(jT("span",{class:qT},n.name||n.signal)),e.appendChild(i);var a=GT;switch(n.input){case"checkbox":a=VT;break;case"select":a=YT;break;case"radio":a=ZT;break;case"range":a=XT}a(t,i,n,r)}(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,function(){i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i}};function GT(t,e,n,r){var i=jT("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",function(){t.update(i.value)}),t.elements=[i],t.set=function(t){i.value=t}}function VT(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=jT("input",i);e.appendChild(a),a.addEventListener("change",function(){t.update(a.checked)}),t.elements=[a],t.set=function(t){a.checked=!!t||null}}function YT(t,e,n,r){var i=jT("select",{name:n.signal});n.options.forEach(function(t){var e={value:t};$T(t,r)&&(e.selected=!0),i.appendChild(jT("option",e,t+""))}),e.appendChild(i),i.addEventListener("change",function(){t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if($T(n.options[e],t))return void(i.selectedIndex=e)}}function ZT(t,e,n,r){var i=jT("span",{class:UT});e.appendChild(i),t.elements=n.options.map(function(e){var a=HT+n.signal+"-"+e,o={id:a,type:"radio",name:n.signal,value:e};$T(e,r)&&(o.checked=!0);var s=jT("input",o);return s.addEventListener("change",function(){t.update(e)}),i.appendChild(s),i.appendChild(jT("label",{for:a},e+"")),s}),t.set=function(e){for(var n=t.elements,r=0,i=n.length;r<i;++r)$T(n[r].value,e)&&(n[r].checked=!0)}}function XT(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=n.min||Math.min(0,+r)||0,a=n.max||Math.max(100,+r)||100,o=n.step||function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=NT?i*=10:a>=zT?i*=5:a>=IT&&(i*=2),e<t?-i:i}(i,a,100),s=jT("input",{type:"range",name:n.signal,min:i,max:a,step:o});s.value=r;var u=jT("label",{},+r);function l(){u.textContent=s.value,t.update(+s.value)}e.appendChild(s),e.appendChild(u),s.addEventListener("input",l),s.addEventListener("change",l),t.elements=[s],t.set=function(t){s.value=t,u.textContent=t}}function $T(t,e){return t===e||t+""===e+""}var JT=function(t,e,n,r,i){return(e=e||new r(t.loader())).initialize(n,MT(t),TT(t),ST(t),i).background(t._background)},KT=function(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null};function QT(t,e){if("string"===typeof e){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}var tS=function(t,e,n){var r=Sc(e),i=r&&r.headless;return i?t.runAsync().then(function(){return JT(t,null,null,i,n).renderAsync(t._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+e)};var eS=function(t,e){return t=t||e.autosize,Object(p.F)(t)?t:{type:t=t||"pad"}},nS=function(t,e){return t=t||e.padding,Object(p.F)(t)?{top:rS(t.top),bottom:rS(t.bottom),left:rS(t.left),right:rS(t.right)}:{top:n=rS(t),bottom:n,left:n,right:n};var n};function rS(t){return+t||0}var iS=["value","update","init","react","bind"];function aS(t,e){Object(p.n)(t+' for "outer" push: '+Object(p.X)(e))}var oS,sS,uS,lS,cS,fS=function(t,e){var n=t.name;if("outer"===t.push)e.signals[n]||aS("No prior signal definition",n),iS.forEach(function(e){void 0!==t[e]&&aS("Invalid property ",e)});else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}},dS="RawCode",hS="Literal",pS="Property",vS="Identifier",gS="ArrayExpression",mS="BinaryExpression",yS="CallExpression",bS="ConditionalExpression",_S="LogicalExpression",xS="MemberExpression",wS="ObjectExpression",AS="UnaryExpression";function kS(t){this.type=t}kS.prototype.visit=function(t){var e,n,r;if(t(this))return 1;for(n=0,r=(e=function(t){switch(t.type){case gS:return t.elements;case mS:case _S:return[t.left,t.right];case yS:var e=t.arguments.slice();return e.unshift(t.callee),e;case bS:return[t.test,t.consequent,t.alternate];case xS:return[t.object,t.property];case wS:return t.properties;case pS:return[t.key,t.value];case AS:return[t.argument];case vS:case hS:case dS:default:return[]}}(this)).length;n<r;++n)if(e[n].visit(t))return 1};var MS=1,TS=2,SS=3,CS=4,ES=5,OS=6,PS=7,LS=8;(oS={})[MS]="Boolean",oS[TS]="<end>",oS[SS]="Identifier",oS[CS]="Keyword",oS[ES]="Null",oS[OS]="Numeric",oS[PS]="Punctuator",oS[LS]="String",oS[9]="RegularExpression";var RS="ArrayExpression",DS="BinaryExpression",FS="CallExpression",jS="ConditionalExpression",NS="Identifier",zS="Literal",IS="LogicalExpression",BS="MemberExpression",qS="ObjectExpression",US="Property",HS="UnaryExpression",WS="Unexpected token %0",GS="Unexpected number",VS="Unexpected string",YS="Unexpected identifier",ZS="Unexpected reserved word",XS="Unexpected end of input",$S="Invalid regular expression",JS="Invalid regular expression: missing /",KS="Octal literals are not allowed in strict mode.",QS="Duplicate data property in object literal not allowed in strict mode",tC="ILLEGAL",eC="Disabled.",nC=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),rC=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function iC(t,e){if(!t)throw new Error("ASSERT: "+e)}function aC(t){return t>=48&&t<=57}function oC(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function sC(t){return"01234567".indexOf(t)>=0}function uC(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function lC(t){return 10===t||13===t||8232===t||8233===t}function cC(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&nC.test(String.fromCharCode(t))}function fC(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&rC.test(String.fromCharCode(t))}var dC={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function hC(){for(var t;uS<lS&&(uC(t=sS.charCodeAt(uS))||lC(t));)++uS}function pC(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)uS<lS&&oC(sS[uS])?(r=sS[uS++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):OC({},WS,tC);return String.fromCharCode(i)}function vC(){var t,e,n,r;for(e=0,"}"===(t=sS[uS])&&OC({},WS,tC);uS<lS&&oC(t=sS[uS++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&OC({},WS,tC),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function gC(){var t,e;for(t=sS.charCodeAt(uS++),e=String.fromCharCode(t),92===t&&(117!==sS.charCodeAt(uS)&&OC({},WS,tC),++uS,(t=pC("u"))&&"\\"!==t&&cC(t.charCodeAt(0))||OC({},WS,tC),e=t);uS<lS&&fC(t=sS.charCodeAt(uS));)++uS,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==sS.charCodeAt(uS)&&OC({},WS,tC),++uS,(t=pC("u"))&&"\\"!==t&&fC(t.charCodeAt(0))||OC({},WS,tC),e+=t);return e}function mC(){var t,e;return t=uS,{type:1===(e=92===sS.charCodeAt(uS)?gC():function(){var t,e;for(t=uS++;uS<lS;){if(92===(e=sS.charCodeAt(uS)))return uS=t,gC();if(!fC(e))break;++uS}return sS.slice(t,uS)}()).length?SS:dC.hasOwnProperty(e)?CS:"null"===e?ES:"true"===e||"false"===e?MS:SS,value:e,start:t,end:uS}}function yC(){var t,e,n,r,i=uS,a=sS.charCodeAt(uS),o=sS[uS];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++uS,{type:PS,value:String.fromCharCode(a),start:i,end:uS};default:if(61===(t=sS.charCodeAt(uS+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return uS+=2,{type:PS,value:String.fromCharCode(a)+String.fromCharCode(t),start:i,end:uS};case 33:case 61:return uS+=2,61===sS.charCodeAt(uS)&&++uS,{type:PS,value:sS.slice(i,uS),start:i,end:uS}}}return">>>="===(r=sS.substr(uS,4))?{type:PS,value:r,start:i,end:uS+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:PS,value:n,start:i,end:uS+=3}:o===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?{type:PS,value:e,start:i,end:uS+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:PS,value:o,start:i,end:++uS}:void OC({},WS,tC)}function bC(){var t,e,n;if(iC(aC((n=sS[uS]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=uS,t="","."!==n){if(t=sS[uS++],n=sS[uS],"0"===t){if("x"===n||"X"===n)return++uS,function(t){for(var e="";uS<lS&&oC(sS[uS]);)e+=sS[uS++];return 0===e.length&&OC({},WS,tC),cC(sS.charCodeAt(uS))&&OC({},WS,tC),{type:OS,value:parseInt("0x"+e,16),start:t,end:uS}}(e);if(sC(n))return function(t){for(var e="0"+sS[uS++];uS<lS&&sC(sS[uS]);)e+=sS[uS++];return(cC(sS.charCodeAt(uS))||aC(sS.charCodeAt(uS)))&&OC({},WS,tC),{type:OS,value:parseInt(e,8),octal:!0,start:t,end:uS}}(e);n&&aC(n.charCodeAt(0))&&OC({},WS,tC)}for(;aC(sS.charCodeAt(uS));)t+=sS[uS++];n=sS[uS]}if("."===n){for(t+=sS[uS++];aC(sS.charCodeAt(uS));)t+=sS[uS++];n=sS[uS]}if("e"===n||"E"===n)if(t+=sS[uS++],"+"!==(n=sS[uS])&&"-"!==n||(t+=sS[uS++]),aC(sS.charCodeAt(uS)))for(;aC(sS.charCodeAt(uS));)t+=sS[uS++];else OC({},WS,tC);return cC(sS.charCodeAt(uS))&&OC({},WS,tC),{type:OS,value:parseFloat(t),start:e,end:uS}}function _C(){var t,e,n,r;return cS=null,hC(),t=uS,e=function(){var t,e,n,r;for(iC("/"===(t=sS[uS]),"Regular expression literal must start with a slash"),e=sS[uS++],n=!1,r=!1;uS<lS;)if(e+=t=sS[uS++],"\\"===t)lC((t=sS[uS++]).charCodeAt(0))&&OC({},JS),e+=t;else if(lC(t.charCodeAt(0)))OC({},JS);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||OC({},JS),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(e="",n="";uS<lS&&fC((t=sS[uS]).charCodeAt(0));)++uS,"\\"===t&&uS<lS?OC({},WS,tC):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&OC({},$S,n),{value:n,literal:e}}(),r=function(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,e){if(parseInt(e,16)<=1114111)return"x";OC({},$S)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){OC({},$S)}try{return new RegExp(t,e)}catch(i){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:uS}}function xC(){var t;return hC(),uS>=lS?{type:TS,start:uS,end:uS}:cC(t=sS.charCodeAt(uS))?mC():40===t||41===t||59===t?yC():39===t||34===t?function(){var t,e,n,r,i="",a=!1;for(iC("'"===(t=sS[uS])||'"'===t,"String literal must starts with a quote"),e=uS,++uS;uS<lS;){if((n=sS[uS++])===t){t="";break}if("\\"===n)if((n=sS[uS++])&&lC(n.charCodeAt(0)))"\r"===n&&"\n"===sS[uS]&&++uS;else switch(n){case"u":case"x":"{"===sS[uS]?(++uS,i+=vC()):i+=pC(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:sC(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),uS<lS&&sC(sS[uS])&&(a=!0,r=8*r+"01234567".indexOf(sS[uS++]),"0123".indexOf(n)>=0&&uS<lS&&sC(sS[uS])&&(r=8*r+"01234567".indexOf(sS[uS++]))),i+=String.fromCharCode(r)):i+=n}else{if(lC(n.charCodeAt(0)))break;i+=n}}return""!==t&&OC({},WS,tC),{type:LS,value:i,octal:a,start:e,end:uS}}():46===t?aC(sS.charCodeAt(uS+1))?bC():yC():aC(t)?bC():yC()}function wC(){var t;return uS=(t=cS).end,cS=xC(),uS=t.end,t}function AC(){var t;t=uS,cS=xC(),uS=t}function kC(t,e,n){var r=new kS("||"===t||"&&"===t?IS:DS);return r.operator=t,r.left=e,r.right=n,r}function MC(t,e){var n=new kS(FS);return n.callee=t,n.arguments=e,n}function TC(t){var e=new kS(NS);return e.name=t,e}function SC(t){var e=new kS(zS);return e.value=t.value,e.raw=sS.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function CC(t,e,n){var r=new kS(BS);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function EC(t,e,n){var r=new kS(US);return r.key=e,r.value=n,r.kind=t,r}function OC(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,function(t,e){return iC(e<r.length,"Message reference must be in range"),r[e]});throw(n=new Error(i)).index=uS,n.description=i,n}function PC(t){t.type===TS&&OC(t,XS),t.type===OS&&OC(t,GS),t.type===LS&&OC(t,VS),t.type===SS&&OC(t,YS),t.type===CS&&OC(t,ZS),OC(t,WS,t.value)}function LC(t){var e=wC();e.type===PS&&e.value===t||PC(e)}function RC(t){return cS.type===PS&&cS.value===t}function DC(t){return cS.type===CS&&cS.value===t}function FC(){var t=[];for(uS=cS.start,LC("[");!RC("]");)RC(",")?(wC(),t.push(null)):(t.push(YC()),RC("]")||LC(","));return wC(),function(t){var e=new kS(RS);return e.elements=t,e}(t)}function jC(){var t;return uS=cS.start,(t=wC()).type===LS||t.type===OS?(t.octal&&OC(t,KS),SC(t)):TC(t.value)}function NC(){var t,e,n;return uS=cS.start,(t=cS).type===SS?(n=jC(),LC(":"),EC("init",n,YC())):t.type!==TS&&t.type!==PS?(e=jC(),LC(":"),EC("init",e,YC())):void PC(t)}function zC(){var t,e,n=[],r={},i=String;for(uS=cS.start,LC("{");!RC("}");)e="$"+((t=NC()).key.type===NS?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,e)?OC({},QS):r[e]=!0,n.push(t),RC("}")||LC(",");return LC("}"),function(t){var e=new kS(qS);return e.properties=t,e}(n)}var IC={if:1,this:1};function BC(){var t,e,n;if(RC("("))return function(){var t;return LC("("),t=ZC(),LC(")"),t}();if(RC("["))return FC();if(RC("{"))return zC();if(t=cS.type,uS=cS.start,t===SS||IC[cS.value])n=TC(wC().value);else if(t===LS||t===OS)cS.octal&&OC(cS,KS),n=SC(wC());else{if(t===CS)throw new Error(eC);t===MS?((e=wC()).value="true"===e.value,n=SC(e)):t===ES?((e=wC()).value=null,n=SC(e)):RC("/")||RC("/=")?(n=SC(_C()),AC()):PC(wC())}return n}function qC(){var t=[];if(LC("("),!RC(")"))for(;uS<lS&&(t.push(YC()),!RC(")"));)LC(",");return LC(")"),t}function UC(){var t;return uS=cS.start,function(t){return t.type===SS||t.type===CS||t.type===MS||t.type===ES}(t=wC())||PC(t),TC(t.value)}function HC(){var t;return LC("["),t=ZC(),LC("]"),t}function WC(){var t=function(){var t;for(t=BC();;)if(RC("."))LC("."),t=CC(".",t,UC());else if(RC("("))t=MC(t,qC());else{if(!RC("["))break;t=CC("[",t,HC())}return t}();if(cS.type===PS&&(RC("++")||RC("--")))throw new Error(eC);return t}function GC(){var t,e;if(cS.type!==PS&&cS.type!==CS)e=WC();else{if(RC("++")||RC("--"))throw new Error(eC);if(RC("+")||RC("-")||RC("~")||RC("!"))t=wC(),e=GC(),e=function(t,e){var n=new kS(HS);return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(DC("delete")||DC("void")||DC("typeof"))throw new Error(eC);e=WC()}}return e}function VC(t){var e=0;if(t.type!==PS&&t.type!==CS)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function YC(){var t,e;return t=function(){var t,e,n,r,i,a,o,s,u,l;if(t=cS,u=GC(),0===(i=VC(r=cS)))return u;for(r.prec=i,wC(),e=[t,cS],a=[u,r,o=GC()];(i=VC(cS))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),e.pop(),n=kC(s,u,o),a.push(n);(r=wC()).prec=i,a.push(r),e.push(cS),n=GC(),a.push(n)}for(n=a[l=a.length-1],e.pop();l>1;)e.pop(),n=kC(a[l-1].value,a[l-2],n),l-=2;return n}(),RC("?")&&(wC(),e=YC(),LC(":"),t=function(t,e,n){var r=new kS(jS);return r.test=t,r.consequent=e,r.alternate=n,r}(t,e,YC())),t}function ZC(){var t=YC();if(RC(","))throw new Error(eC);return t}var XC={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},$C=function(t){function e(e,n,r){return function(i){return function(e,n,r,i){var a=t(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}(e,i,n,r)}}var n="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(p.n)("Missing arguments to clamp function."),e.length>3&&Object(p.n)("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),join:e("join",null),indexof:e("indexOf",null),lastindexof:e("lastIndexOf",null),slice:e("slice",null),reverse:function(e){return"("+t(e[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase","String",0),lower:e("toLowerCase","String",0),substring:e("substring","String"),split:e("split","String"),replace:e("replace","String"),trim:e("trim","String",0),regexp:"RegExp",test:e("test","RegExp"),if:function(e){e.length<3&&Object(p.n)("Missing arguments to if function."),e.length>3&&Object(p.n)("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};var JC={};function KC(t,e,n){var r=t+":"+n,i=JC[r];return i&&i[0]===e||(JC[r]=i=[e,e(n)]),i[1]}function QC(t,e){return KC("timeFormat",_e,e)(t)}var tE=new Date(2e3,0,1);function eE(t,e,n){return tE.setMonth(t),tE.setDate(e),QC(tE,n)}function nE(t,e,n,r){var i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=t:a<t)&&(r?t<=o:t<o)}function rE(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}var iE="undefined"!==typeof window&&window||null;var aE="Literal",oE="Identifier",sE="@",uE="%",lE=":";function cE(t,e){var n;return Object(p.D)(t)?t:Object(p.H)(t)?(n=e.scales[t])&&n.value:void 0}function fE(t,e,n){var r=uE+n;if(!e.hasOwnProperty(r))try{e[r]=t.scaleRef(n)}catch(i){}}function dE(t,e,n,r){if(e[0].type===aE)fE(n,r,e[0].value);else if(e[0].type===oE)for(t in n.scales)fE(n,r,t)}function hE(t,e){return function(n,r,i){if(n){var a=cE(n,(i||this).context);return a&&a.path[t](r)}return e(r)}}var pE=hE("area",function(t){return lb.reset(),sb(t,cb),2*lb}),vE=hE("bounds",function(t){var e,n,r,i,a,o,s;if(Mb=kb=-(wb=Ab=1/0),Ob=[],sb(t,Rb),n=Ob.length){for(Ob.sort(Ub),e=1,a=[r=Ob[0]];e<n;++e)Hb(r,(i=Ob[e])[0])||Hb(r,i[1])?(qb(r[0],i[1])>qb(r[0],r[1])&&(r[1]=i[1]),qb(i[0],r[1])>qb(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(s=qb(r[1],i[0]))>o&&(o=s,wb=i[0],kb=r[1])}return Ob=Pb=null,wb===1/0||Ab===1/0?[[NaN,NaN],[NaN,NaN]]:[[wb,Ab],[kb,Mb]]}),gE=hE("centroid",function(t){Wb=Gb=Vb=Yb=Zb=Xb=$b=Jb=Kb=Qb=t_=0,sb(t,o_);var e=Kb,n=Qb,r=t_,i=e*e+n*n+r*r;return i<Ey&&(e=Xb,n=$b,r=Jb,Gb<Cy&&(e=Vb,n=Yb,r=Zb),(i=e*e+n*n+r*r)<Ey)?[NaN,NaN]:[zy(n,e)*Dy,Xy(r/Vy(i))*Dy]});function mE(t){var e=this.context.data[t];return e?e.values.value:[]}function yE(t,e,n,r){e[0].type!==aE&&Object(p.n)("First argument to data functions must be a string literal.");var i=e[0].value,a=lE+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}var bE={};function _E(t){return t.data}function xE(t,e){var n=mE.call(e,t);return n.root&&n.root.lookup||bE}function wE(t,e){return t===e||t!==t&&e!==e||!(!Object(p.A)(t)||!Object(p.A)(e)||t.length!==e.length)&&function(t,e){for(var n=0,r=t.length;n<r;++n)if(!wE(t[n],e[n]))return!1;return!0}(t,e)}function AE(t){return function(e){for(var n in t)if(!wE(e[n],t[n]))return!1;return!0}}var kE="E",ME="R",TE="R-E",SE="R-LE",CE="R-RE",EE="intersect",OE="union",PE="index:unit";function LE(t,e){for(var n,r,i=e.fields,a=e.values,o=i.length,s=0;s<o;++s)if((r=i[s]).getter=p.t.getter||Object(p.t)(r.field),n=r.getter(t),Object(p.C)(n)&&(n=Object(p.ab)(n)),Object(p.C)(a[s])&&(a[s]=Object(p.ab)(a[s])),Object(p.C)(a[s][0])&&(a[s]=a[s].map(p.ab)),r.type===kE){if(Object(p.A)(a[s])?a[s].indexOf(n)<0:n!==a[s])return!1}else if(r.type===ME){if(!nE(n,a[s]))return!1}else if(r.type===CE){if(!nE(n,a[s],!0,!1))return!1}else if(r.type===TE){if(!nE(n,a[s],!1,!1))return!1}else if(r.type===SE&&!nE(n,a[s],!1,!0))return!1;return!0}function RE(t,e,n,r){e[0].type!==aE&&Object(p.n)("First argument to indata must be a string literal.");var i=e[0].value,a=e.length>=2&&e[e.length-1].value,o=sE+"unit";a!==EE||r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,"unit")),yE(0,e,n,r)}var DE={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(function(t){return e.indexOf(t)>=0}):e},R_union:function(t,e){var n=Object(p.ab)(e[0]),r=Object(p.ab)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Object(p.ab)(e[0]),r=Object(p.ab)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}},FE="bin_",jE="intersect",NE="union",zE="index:unit";function IE(t,e){for(var n,r=e.fields,i=e.values,a=e.getter||(e.getter=[]),o=r.length,s=0;s<o;++s)if(a[s]=a[s]||Object(p.t)(r[s]),n=a[s](t),Object(p.C)(n)&&(n=Object(p.ab)(n)),Object(p.C)(i[s])&&(i[s]=Object(p.ab)(i[s])),e[FE+r[s]]){if(Object(p.C)(i[s][0])&&(i[s]=i[s].map(p.ab)),!nE(n,i[s],!0,!1))return!1}else if(n!==i[s])return!1;return!0}function BE(t,e){for(var n,r,i=e.intervals,a=i.length,o=0;o<a;++o){if(n=i[o].extent,r=(i[o].getter||(i[o].getter=Object(p.t)(i[o].field)))(t),!n||n[0]===n[1])return!1;if(Object(p.C)(r)&&(r=Object(p.ab)(r)),Object(p.C)(n[0])&&(n=i[o].extent=n.map(p.ab)),Object(p.E)(n[0])&&!nE(r,n))return!1;if(Object(p.H)(n[0])&&n.indexOf(r)<0)return!1}return!0}function qE(t,e,n,r){for(var i,a,o,s,u,l=this.context.data[t],c=l?l.values.value:[],f=l?l[zE]&&l[zE].value:void 0,d=n===jE,h=c.length,p=0;p<h;++p)if(i=c[p],f&&d){if(-1===(o=(a=a||{})[s=i.unit]||0))continue;if(u=r(e,i),a[s]=u?-1:++o,u&&1===f.size)return!0;if(!u&&o===f.get(s).count)return!1}else if(d^(u=r(e,i)))return u;return h&&d}function UE(t,e,n){return qE.call(this,t,e,n,IE)}function HE(t,e,n,r){e[0].type!==aE&&Object(p.n)("First argument to indata must be a string literal.");var i=e[0].value,a=e.length>=2&&e[e.length-1].value,o=sE+"unit";a!==jE||r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,"unit")),yE(0,e,n,r)}function WE(t,e,n,r){var i,a,o,s,u,l=this.context.data[t],c=l?l.values.value:[],f=l?l[zE]&&l[zE].value:void 0,d=c[0],h=0;if(d){for(i=e?d.encodings.length:d.fields.length;h<i;++h)if(e&&d.encodings[h]===e||n&&d.fields[h]===n){a=h,s=d[FE+d.fields[h]];break}return f&&1===f.size&&(r=NE),f&&r===jE?(u=c.reduce(function(t,e){return(t[e.unit]||(t[e.unit]=[])).push({unit:e.unit,value:e.values[a]}),t},{}),o=Object.keys(u).map(function(t){return{unit:t,value:s?VE(u[t],NE):GE(u[t],NE)}})):o=c.map(function(t){return{unit:t.unit,value:t.values[a]}}),s?VE(o,r):GE(o,r)}}function GE(t,e){for(var n,r,i,a,o={},s=0,u={},l=[],c=0,f=t.length;c<f;++c)r=(n=t[c]).unit,a=n.value,o[r]||(o[r]=++s),(i=u[a])||(u[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in u)i=u[a],e===jE&&i.count!==s||l.push(i.value);return l.length?l:void 0}function VE(t,e){for(var n,r,i,a,o=e===jE?ZE:YE,s=0,u=t.length;s<u;++s)n=t[s].value,Object(p.C)(n[0])&&(n=n.map(p.ab)),(i=n[0])>(a=n[1])&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!==+r[1]?r:void 0}function YE(t,e,n){return t[0]>e&&(t[0]=e),t[1]<n&&(t[1]=n),t}function ZE(t,e,n){return n<t[0]||t[1]<e?[]:(t[0]<e&&(t[0]=e),t[1]>n&&(t[1]=n),t)}var XE={random:function(){return xr()},isArray:p.A,isBoolean:p.B,isDate:p.C,isNumber:p.E,isObject:p.F,isRegExp:p.G,isString:p.H,isTuple:y,toBoolean:p.Y,toDate:p.Z,toNumber:p.ab,toString:p.cb,pad:p.N,peek:p.S,truncate:p.db,rgb:Ed,lab:Xd,hcl:nh,hsl:jd,sequence:_i,format:function(t,e){return KC("format",Mp,e)(t)},utcFormat:function(t,e){return KC("utcFormat",we,e)(t)},utcParse:function(t,e){return KC("utcParse",Ae,e)(t)},timeFormat:QC,timeParse:function(t,e){return KC("timeParse",xe,e)(t)},monthFormat:function(t){return eE(t,1,"%B")},monthAbbrevFormat:function(t){return eE(t,1,"%b")},dayFormat:function(t){return eE(0,2+t,"%A")},dayAbbrevFormat:function(t){return eE(0,2+t,"%a")},quarter:function(t){return 1+~~(new Date(t).getMonth()/3)},utcquarter:function(t){return 1+~~(new Date(t).getUTCMonth()/3)},warn:function(){return rE(this.context.dataflow,"warn",arguments)},info:function(){return rE(this.context.dataflow,"info",arguments)},debug:function(){return rE(this.context.dataflow,"debug",arguments)},extent:function(t){var e,n,r,i,a=0;if(t&&(e=t.length)){for(n=t[a];null==n||n!==n;n=t[++a]);for(r=i=n;a<e;++a)null!=(n=t[a])&&(n<r&&(r=n),n>i&&(i=n))}return[r,i]},inScope:function(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},clampRange:function(t,e,n){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]},pinchDistance:function(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){return iE?iE.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){return iE?[iE.innerWidth,iE.innerHeight]:[void 0,void 0]},span:function(t){return t[t.length-1]-t[0]||0},merge:function(){var t=[].slice.call(arguments);return t.unshift({}),p.o.apply(null,t)},flush:function(t,e,n,r,i,a){if(!n&&0!==n)return a;var o,s,u=t[0],l=Object(p.S)(t),c=+n;return l<u&&(o=u,u=l,l=o),(o=Math.abs(e-u))<(s=Math.abs(l-e))&&o<=c?r:s<=c?i:a},bandspace:function(t,e,n){return kf(t||0,e||0,n||0)},inrange:nE,setdata:function(t,e){var n=this.context.dataflow,r=this.context.data[t].input;return n.pulse(r,n.changeset().remove(p.eb).insert(e)),1},pathShape:function(t){var e=null;return function(n){return n?Ns(n,e=e||Os(t)):t}},panLinear:p.O,panLog:p.P,panPow:p.Q,zoomLinear:p.ib,zoomLog:p.jb,zoomPow:p.kb,encode:function(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,a){var o,s,u=this.context.dataflow,l=this.context.data[t],c=l.input,f=l.changes,d=u.stamp();if(!1===u._trigger||!(c.value.length||e||r))return 0;if((!f||f.stamp<d)&&(l.changes=f=u.changeset(),f.stamp=d,u.runAfter(function(){l.modified=!0,u.pulse(c,f).run()},!0,1)),n&&(o=!0===n?p.eb:Object(p.A)(n)||y(n)?n:AE(n),f.remove(o)),e&&f.insert(e),r&&(o=AE(r),c.value.some(o)?f.remove(o):f.insert(r)),i)for(s in a)f.modify(i,s,a[s]);return 1}},$E=["view","item","group","xy","x","y"],JE="event.vega.",KE="this.",QE={};function tO(t,e,n){return 1===arguments.length?XE[t]:(XE[t]=e,n&&(QE[t]=n),nO&&(nO.functions[t]=KE+t),this)}tO("bandwidth",function(t,e){var n=cE(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0},dE),tO("copy",function(t,e){var n=cE(t,(e||this).context);return n?n.copy():void 0},dE),tO("domain",function(t,e){var n=cE(t,(e||this).context);return n?n.domain():[]},dE),tO("range",function(t,e){var n=cE(t,(e||this).context);return n&&n.range?n.range():[]},dE),tO("invert",function(t,e,n){var r=cE(t,(n||this).context);return r?Object(p.A)(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0},dE),tO("scale",function(t,e,n){var r=cE(t,(n||this).context);return r?r(e):void 0},dE),tO("gradient",function(t,e,n,r,i){t=cE(t,(i||this).context);var a=ro(e,n),o=t.domain(),s=o[0],u=Object(p.S)(o),l=vv(t,s,u);t.ticks&&(s!==(o=t.ticks(+r||15))[0]&&o.unshift(s),u!==Object(p.S)(o)&&o.push(u));for(var c=0,f=o.length;c<f;++c)a.stop(l(o[c]),t(o[c]));return a},dE),tO("geoArea",pE,dE),tO("geoBounds",vE,dE),tO("geoCentroid",gE,dE),tO("geoShape",function(t,e,n){var r=cE(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}},dE),tO("indata",function(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i},function(t,e,n,r){e[0].type!==aE&&Object(p.n)("First argument to indata must be a string literal."),e[1].type!==aE&&Object(p.n)("Second argument to indata must be a string literal.");var i=e[0].value,a=e[1].value,o=sE+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}),tO("data",mE,yE),tO("treePath",function(t,e,n){var r=xE(t,this),i=r[e],a=r[n];return i&&a?i.path(a).map(_E):void 0},yE),tO("treeAncestors",function(t,e){var n=xE(t,this)[e];return n?n.ancestors().map(_E):void 0},yE),tO("vlSelectionTest",function(t,e,n){for(var r,i,a,o,s,u=this.context.data[t],l=u?u.values.value:[],c=u?u[PE]&&u[PE].value:void 0,f=n===EE,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(s=LE(e,r),i[o]=s?-1:++a,s&&1===c.size)return!0;if(!s&&a===c.get(o).count)return!1}else if(f^(s=LE(e,r)))return s;return d&&f},RE),tO("vlSelectionResolve",function(t,e){for(var n,r,i,a,o,s,u,l,c,f,d,h=this.context.data[t],v=h?h.values.value:[],g={},m={},y=v.length,b=0;b<y;++b)for(a=(n=v[b]).unit,r=n.fields,i=n.values,f=0,d=r.length;f<d;++f)o=r[f],u=(s=g[o.field]||(g[o.field]={}))[a]||(s[a]=[]),m[o.field]=l=o.type.charAt(0),c=DE[l+"_union"],s[a]=c(u,Object(p.i)(i[f]));return e=e||OE,Object.keys(g).forEach(function(t){g[t]=Object.keys(g[t]).map(function(e){return g[t][e]}).reduce(function(n,r){return void 0===n?r:DE[m[t]+"_"+e](n,r)})}),g},RE),tO("vlSingle",UE,yE),tO("vlSingleDomain",WE,yE),tO("vlMulti",UE,HE),tO("vlMultiDomain",WE,HE),tO("vlInterval",function(t,e,n){return qE.call(this,t,e,n,BE)},yE),tO("vlIntervalDomain",function(t,e,n,r){var i,a,o,s,u,l=this.context.data[t],c=l?l.values.value:[],f=c[0],d=0;if(f){for(i=f.intervals.length;d<i;++d)if(a=f.intervals[d],e&&a.encoding===e||n&&a.field===n){if(!a.extent)return;o=d,u=a.extent.length>2;break}return s=c.reduce(function(t,e){var n=e.intervals[o].extent,r=u?n.map(function(t){return{unit:e.unit,value:t}}):{unit:e.unit,value:n};return u?t.push.apply(t,r):t.push(r),t},[]),u?GE(s,r):VE(s,r)}},yE);var eO={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_["+Object(p.X)("$"+t)+"]"},functions:function(t){var e=$C(t);for(var n in $E.forEach(function(t){e[t]=JE+t}),XE)e[n]=KE+n;return e},constants:XC,visitors:QE},nO=function(t){var e=(t=t||{}).whitelist?Object(p.bb)(t.whitelist):{},n=t.blacklist?Object(p.bb)(t.blacklist):{},r=t.constants||XC,i=(t.functions||$C)(f),a=t.globalvar,o=t.fieldvar,s={},u={},l=0,c=Object(p.D)(a)?a:function(t){return a+'["'+t+'"]'};function f(t){if(Object(p.H)(t))return t;var e=d[t.type];return null==e&&Object(p.n)("Unsupported type: "+t.type),e(t)}var d={Literal:function(t){return t.raw},Identifier:function(t){var i=t.name;return l>0?i:Object(p.v)(n,i)?Object(p.n)("Illegal identifier: "+i):Object(p.v)(r,i)?r[i]:Object(p.v)(e,i)?i:(s[i]=1,c(i))},MemberExpression:function(t){var e=!t.computed,n=f(t.object);e&&(l+=1);var r=f(t.property);return n===o&&(u[function(t){var e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(r)]=1),e&&(l-=1),n+(e?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&Object(p.n)("Illegal callee type: "+t.callee.type);var e=t.callee.name,n=t.arguments,r=Object(p.v)(i,e)&&i[e];return r||Object(p.n)("Unrecognized function: "+e),Object(p.D)(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(f).join(",")+"]"},BinaryExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+f(t.argument)+")"},ConditionalExpression:function(t){return"("+f(t.test)+"?"+f(t.consequent)+":"+f(t.alternate)+")"},LogicalExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(f).join(",")+"}"},Property:function(t){l+=1;var e=f(t.key);return l-=1,e+":"+f(t.value)}};function h(t){var e={code:f(t),globals:Object.keys(s),fields:Object.keys(u)};return s={},u={},e}return h.functions=i,h.constants=r,h}(eO),rO=function(t,e,n){var r,i,a={};try{r=function(t){uS=0,lS=(sS=t).length,cS=null,AC();var e=ZC();if(cS.type!==TS)throw new Error("Unexpect token after expression.");return e}(t=Object(p.H)(t)?t:Object(p.X)(t)+"")}catch(o){Object(p.n)("Expression parse error: "+t)}return r.visit(function(t){if("CallExpression"===t.type){var n=t.callee.name,r=eO.visitors[n];r&&r(n,t.arguments,e,a)}}),(i=nO(r)).globals.forEach(function(t){var n="$"+t;!a.hasOwnProperty(n)&&e.getSignal(t)&&(a[n]=e.signalRef(t))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}};function iO(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function aO(t,e,n,r){return new iO(t,e,n,r)}function oO(t,e){return aO("operator",t,e)}function sO(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}var uO={$tupleid:1,toString:function(){return":_tupleid_:"}};function lO(t,e){return e?{$field:t,$name:e}:{$field:t}}var cO=lO("key");function fO(t,e){return{$compare:t,$order:e}}var dO="descending";function hO(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var pO="scope",vO="view";function gO(t){return t&&t.signal}function mO(t){if(gO(t))return!0;if(Object(p.F)(t))for(var e in t)if(mO(t[e]))return!0;return!1}function yO(t,e){return null!=t?t:e}function bO(t){return t&&t.signal||t}var _O="timer";function xO(t,e){return(t.merge?wO:t.stream?AO:t.type?kO:Object(p.n)("Invalid stream specification: "+Object(p.X)(t)))(t,e)}function wO(t,e){var n=MO({merge:t.merge.map(function(t){return xO(t,e)})},t,e);return e.addStream(n).id}function AO(t,e){var n=MO({stream:xO(t.stream,e)},t,e);return e.addStream(n).id}function kO(t,e){var n,r,i;return t.type===_O?(n=e.event(_O,t.throttle),t={between:t.between,filter:t.filter}):n=e.event((i=t.source)===pO?vO:i||vO,t.type),r=MO({stream:n},t,e),1===Object.keys(r).length?n:e.addStream(r).id}function MO(t,e,n){var r=e.between;return r&&(2!==r.length&&Object(p.n)('Stream "between" parameter must have 2 entries: '+Object(p.X)(e)),t.between=[xO(r[0],n),xO(r[1],n)]),r=e.filter?Object(p.i)(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(function(t,e,n){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}(e.marktype,e.markname,e.markrole)),e.source===pO&&r.push("inScope(event.item)"),r.length&&(t.filter=rO("("+r.join(")&&(")+")").$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}var TO,SO,CO="view",EO="[",OO="]",PO="{",LO="}",RO=":",DO=",",FO="@",jO=">",NO=/[[\]{}]/,zO={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function IO(t,e,n,r,i){for(var a,o=0,s=t.length;e<s;++e){if(a=t[e],!o&&a===n)return e;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return e}function BO(t){for(var e=[],n=0,r=t.length,i=0;i<r;)i=IO(t,i,DO,EO+PO,OO+LO),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function qO(t){return"["===t[0]?function(t){var e,n,r=t.length,i=1;if((i=IO(t,i,OO,EO,OO))===r)throw"Empty between selector: "+t;if(2!==(e=BO(t.substring(1,i))).length)throw"Between selector must have two elements: "+t;if((t=t.slice(i+1).trim())[0]!==jO)throw"Expected '>' after between selector: "+t;if(e=e.map(qO),(n=qO(t.slice(1).trim())).between)return{between:e,stream:n};n.between=e;return n}(t):function(t){var e,n,r={source:TO},i=[],a=[0,0],o=0,s=0,u=t.length,l=0;if(t[u-1]===LO){if(!((l=t.lastIndexOf(PO))>=0))throw"Unmatched right brace: "+t;try{a=function(t){var e=t.split(DO);if(!t.length||e.length>2)throw t;return e.map(function(e){var n=+e;if(n!==n)throw t;return n})}(t.substring(l+1,u-1))}catch(f){throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),u=t.length,l=0}if(!u)throw t;t[0]===FO&&(o=++l);(e=IO(t,l,RO))<u&&(i.push(t.substring(s,e).trim()),s=l=++e);if((l=IO(t,l,EO))===u)i.push(t.substring(s,u).trim());else if(i.push(t.substring(s,l).trim()),n=[],(s=++l)===u)throw"Unmatched left bracket: "+t;for(;l<u;){if((l=IO(t,l,OO))===u)throw"Unmatched left bracket: "+t;if(n.push(t.substring(s,l).trim()),l<u-1&&t[++l]!==EO)throw"Expected left bracket: "+t;s=++l}if(!(u=i.length)||NO.test(i[u-1]))throw"Invalid event selector: "+t;u>1?(r.type=i[1],o?r.markname=i[0].slice(1):(c=i[0],SO[c]?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var c;"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);a[0]&&(r.throttle=a[0]);a[1]&&(r.debounce=a[1]);return r}(t)}var UO=function(t,e,n){var r,i,a,o,s,u=t.events,l=t.update,c=t.encode,f=[];u||Object(p.n)("Signal update missing events specification."),Object(p.H)(u)&&(a=u,o=e.isSubscope()?pO:vO,TO=o||CO,SO=s||zO,u=BO(a.trim()).map(qO)),(u=Object(p.i)(u).filter(function(t){return t.signal||t.scale?(f.push(t),0):1})).length&&f.push(u.length>1?{merge:u}:u[0]),null!=c&&(l&&Object(p.n)("Signal encode and update are mutually exclusive."),l="encode(item(),"+Object(p.X)(c)+")"),r=Object(p.H)(l)?rO(l,e,"var datum=event.item&&event.item.datum;"):null!=l.expr?rO(l.expr,e,"var datum=event.item&&event.item.datum;"):null!=l.value?l.value:null!=l.signal?{$expr:"_.value",$params:{value:e.signalRef(l.signal)}}:Object(p.n)("Invalid signal update specification."),i={target:n,update:r},t.force&&(i.options={force:!0}),f.forEach(function(t){e.addUpdate(Object(p.o)(function(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):xO(t,e)}}(t,e),i))})};function HO(t){return function(e,n,r){return aO(t,n,e||void 0,r)}}var WO=HO("aggregate"),GO=HO("axisticks"),VO=HO("bound"),YO=HO("collect"),ZO=HO("compare"),XO=HO("datajoin"),$O=HO("encode"),JO=HO("expression"),KO=(HO("extent"),HO("facet")),QO=HO("field"),tP=HO("key"),eP=HO("legendentries"),nP=HO("load"),rP=HO("mark"),iP=HO("multiextent"),aP=HO("multivalues"),oP=HO("overlap"),sP=HO("params"),uP=HO("prefacet"),lP=HO("projection"),cP=HO("proxy"),fP=HO("relay"),dP=HO("render"),hP=HO("scale"),pP=HO("sieve"),vP=HO("sortitems"),gP=HO("viewlayout"),mP=HO("values"),yP=0,bP=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],_P=Object(p.bb)(bP),xP=Object(p.bb)(bP.slice(4,9)),wP=Object(p.bb)(bP.slice(9)),AP=Object(p.bb)(bP.slice(1,6));function kP(t){return AP.hasOwnProperty(t)}function MP(t){return xP.hasOwnProperty(t)}function TP(t){return"quantile"===t}function SP(t,e){var n,r=e.getScale(t.name).params;for(n in r.domain=OP(t.domain,t,e),null!=t.range&&(r.range=function t(e,n,r){var i=e.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(Object(p.H)(i)){if(a&&a.hasOwnProperty(i))return e=Object(p.o)({},e,{range:a[i]}),t(e,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=kP(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(p.n)("Unrecognized scale range value: "+Object(p.X)(i))}else{if(i.scheme)return r.scheme=CP(i.scheme,n),i.extent&&(r.schemeExtent=function(t,e){return t.signal?e.signalRef(t.signal):t.map(function(t){return CP(t,e)})}(i.extent,n)),void(i.count&&(r.schemeCount=CP(i.count,n)));if(i.step)return void(r.rangeStep=CP(i.step,n));if(kP(e.type)&&!Object(p.A)(i))return OP(i,e,n);Object(p.A)(i)||Object(p.n)("Unsupported range type: "+Object(p.X)(i))}return i.map(function(t){return CP(t,n)})}(t,e,r)),null!=t.interpolate&&function(t,e){e.interpolate=CP(t.type||t),null!=t.gamma&&(e.interpolateGamma=CP(t.gamma))}(t.interpolate,r),null!=t.nice&&function(t,e){e.nice=Object(p.F)(t)?{interval:CP(t.interval),step:CP(t.step)}:CP(t)}(t.nice,r),t)r.hasOwnProperty(n)||"name"===n||(r[n]=CP(t[n],e))}function CP(t,e){return Object(p.F)(t)?t.signal?e.signalRef(t.signal):Object(p.n)("Unsupported object: "+Object(p.X)(t)):t}function EP(t){Object(p.n)("Can not find data set: "+Object(p.X)(t))}function OP(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(Object(p.A)(t)?function(t,e,n){return t.map(function(t){return CP(t,n)})}:t.fields?function(t,e,n){var r=t.data,i=t.fields.reduce(function(t,e){return e=Object(p.H)(e)?{data:r,field:e}:Object(p.A)(e)||e.signal?function(t,e){var n="_:vega:_"+yP++,r=YO({});if(Object(p.A)(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+Object(p.X)(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,pP({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t},[]);return(kP(e.type)?function(t,e,n){var r,i,a,o;return r=n.map(function(t){var n=e.getData(t.data);return n||EP(t.data),n.countsRef(e,t.field)}),i=e.add(WO({groupby:cO,ops:["sum"],fields:[e.fieldRef("count")],as:["count"],pulse:r})),a=e.add(YO({pulse:sO(i)})),o=e.add(mP({field:cO,sort:e.sortRef(PP(t.sort,!0)),pulse:sO(a)})),sO(o)}:TP(e.type)?function(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||EP(t.data),n.domainRef(e,t.field)});return sO(e.add(aP({values:r})))}:function(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||EP(t.data),n.extentRef(e,t.field)});return sO(e.add(iP({extents:r})))})(t,n,i)}:function(t,e,n){var r=n.getData(t.data);r||EP(t.data);return kP(e.type)?r.valuesRef(n,t.field,PP(t.sort,!1)):TP(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)})(t,e,n);null==e.domainMin&&null==e.domainMax||Object(p.n)("No scale domain defined for domainMin/domainMax to override.")}function PP(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field?Object(p.n)("Multiple domain scales can not sort by field."):e&&t.op&&"count"!==t.op&&Object(p.n)("Multiple domain scales support op count only."):Object(p.n)("No field provided for sort aggregate op: "+t.op):Object(p.F)(t)?t.field="key":t={field:"key"}),t}function LP(t,e,n){return Object(p.A)(t)?t.map(function(t){return LP(t,e,n)}):Object(p.F)(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Object(p.n)("Unsupported parameter object: "+Object(p.X)(t)):t}var RP="top",DP="left",FP="bottom",jP="vertical",NP="start",zP="end",IP="value",BP="guide-label",qP="group-title",UP="symbol",HP="gradient",WP="discrete",GP=["size","shape","fill","stroke","strokeDash","opacity"],VP={name:1,interactive:1},YP=Object(p.bb)(["rule"]),ZP=Object(p.bb)(["group","image","rect"]),XP=function(t,e){var n="";return YP[e]?n:(t.x2&&(t.x?(ZP[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(ZP[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},$P=function(t,e,n,r){var i=rO(t,e);return i.$fields.forEach(function(t){r[t]=1}),Object(p.o)(n,i.$params),i.$expr},JP=function(t,e,n,r){return function t(e,n,r,i){var a,o,s;if(e.signal)a="datum",s=$P(e.signal,n,r,i);else if(e.group||e.parent){for(o=Math.max(1,e.level||1),a="item";o-- >0;)a+=".mark.group";e.parent?(s=e.parent,a+=".datum"):s=e.group}else e.datum?(a="datum",s=e.datum):Object(p.n)("Invalid field reference: "+Object(p.X)(e));e.signal||(Object(p.H)(s)?(i[s]=1,s=Object(p.W)(s).map(p.X).join("][")):s=t(s,n,r,i));return a+"["+s+"]"}(Object(p.F)(t)?t:{datum:t},e,n,r)};var KP=function(t,e,n,r,i){var a,o,s,u=QP(t.scale,n,r,i);return null!=t.range?(o=u+".range()",e=0===(a=+t.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==e&&(e=u+"("+e+")"),t.band&&(s=function(t,e){if(!Object(p.H)(t))return-1;var n=e.scaleType(t);return"band"===n||"point"===n?1:0}(t.scale,n))&&(a=(o=u+".bandwidth")+"()"+(1===(a=+t.band)?"":"*"+a),s<0&&(a="("+o+"?"+a+":0)"),e=(e?e+"+":"")+a,t.extra&&(e="(datum.extra?"+u+"(datum.extra.value):"+e+")")),null==e&&(e="0")),e};function QP(t,e,n,r){var i;if(Object(p.H)(t))i=uE+t,n.hasOwnProperty(i)||(n[i]=e.scaleRef(t)),i=Object(p.X)(i);else{for(i in e.scales)n[uE+i]=e.scaleRef(i);i=Object(p.X)(uE)+"+"+(t.signal?"("+$P(t.signal,e,n,r)+")":JP(t,e,n,r))}return"_["+i+"]"}var tL=function(t,e,n,r){return Object(p.F)(t)?"("+eL(null,t,e,n,r)+")":t},eL=function(t,e,n,r,i){if(null!=e.gradient)return function(t,e,n,r){return"this.gradient("+QP(t.gradient,e,n,r)+","+Object(p.X)(t.start)+","+Object(p.X)(t.stop)+","+Object(p.X)(t.count)+")"}(e,n,r,i);var a=e.signal?$P(e.signal,n,r,i):e.color?function(t,e,n,r){function i(t,i,a,o){return"this."+t+"("+[eL(null,i,e,n,r),eL(null,a,e,n,r),eL(null,o,e,n,r)].join(",")+").toString()"}return t.c?i("hcl",t.h,t.c,t.l):t.h||t.s?i("hsl",t.h,t.s,t.l):t.l||t.a?i("lab",t.l,t.a,t.b):t.r||t.g||t.b?i("rgb",t.r,t.g,t.b):null}(e.color,n,r,i):null!=e.field?JP(e.field,n,r,i):void 0!==e.value?Object(p.X)(e.value):void 0;return null!=e.scale&&(a=KP(e,a,n,r,i)),void 0===a&&(a=null),null!=e.exponent&&(a="Math.pow("+a+","+tL(e.exponent,n,r,i)+")"),null!=e.mult&&(a+="*"+tL(e.mult,n,r,i)),null!=e.offset&&(a+="+"+tL(e.offset,n,r,i)),e.round&&(a="Math.round("+a+")"),a},nL=function(t,e,n){return t+"["+Object(p.X)(e)+"]="+n+";"},rL=function(t,e,n,r,i){var a="";return e.forEach(function(e){var o=eL(t,e,n,r,i);a+=e.test?$P(e.test,n,r,i)+"?"+o+":":o}),":"===Object(p.S)(a)&&(a+="null"),nL("o",t,a)};function iL(t,e,n,r){var i,a,o,s={},u="var o=item,datum=o.datum,$;";for(i in t)a=t[i],Object(p.A)(a)?u+=rL(i,a,r,n,s):(o=eL(i,a,r,n,s),u+=nL("o",i,o));return u+=XP(t,e),{$expr:u+="return 1;",$fields:Object.keys(s),$output:Object.keys(t)}}var aL="mark",oL="frame",sL="title";function uL(t){return Object(p.F)(t)?Object(p.o)({},t):{value:t}}function lL(t,e,n,r){return null!=n?(Object(p.F)(n)&&!Object(p.A)(n)?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function cL(t,e,n){for(var r in e)n&&n.hasOwnProperty(r)||(t[r]=Object(p.o)(t[r]||{},e[r]));return t}function fL(t,e,n,r,i,a){var o,s;for(s in(a=a||{}).encoders={$encode:o={}},t=function(t,e,n,r,i){var a,o,s={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(a in o=n===oL?i.group:n===aL?Object(p.o)({},i.mark,i[e]):null)hL(a,t)||("fill"===a||"stroke"===a)&&(hL("fill",t)||hL("stroke",t))||(s[a]=dL(o[a]));return Object(p.i)(r).forEach(function(e){var n=i.style&&i.style[e];for(var r in n)hL(r,t)||(s[r]=dL(n[r]))}),(t=Object(p.o)({},t)).enter=Object(p.o)(s,t.enter),t}(t,e,n,r,i.config))o[s]=iL(t[s],e,a,i);return a}function dL(t){return t&&t.signal?{signal:t.signal}:{value:t}}function hL(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var pL=function(t,e,n,r,i,a,o){return{type:t,name:o?o.name:void 0,role:e,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:cL(a,o,VP)}};function vL(t,e,n){return yO(e[t],n[t])}function gL(t,e){return yO(t.direction,e)===jP}function mL(t,e){return yO(t.gradientLength,e.gradientLength||e.gradientWidth)}function yL(t,e){return yO(t.gradientThickness,e.gradientThickness||e.gradientHeight)}function bL(t,e){return yO(t.columns,yO(e.columns,+gL(t,e.symbolDirection)))}function _L(t,e){var n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}var xL="group",wL="text",AL=function(t,e,n,r){var i,a,o,s,u,l,c={value:0},f=gL(t,n.gradientDirection),d=yL(t,n),h=mL(t,n);return f?(o=[0,1],s=[0,0],u=d,l=h):(o=[0,0],s=[1,0],u=h,l=d),lL(i={enter:a={opacity:c,x:c,y:c,width:uL(u),height:uL(l)},update:Object(p.o)({},a,{opacity:{value:1},fill:{gradient:e,start:o,stop:s}}),exit:{opacity:c}},"stroke",vL("gradientStrokeColor",t,n)),lL(i,"strokeWidth",vL("gradientStrokeWidth",t,n)),lL(i,"opacity",vL("gradientOpacity",t,n),"update"),pL("rect","legend-gradient",null,void 0,void 0,i,r)},kL=function(t,e,n,r,i){var a,o,s,u,l,c,f={value:0},d=gL(t,n.gradientDirection),h=yL(t,n),v=mL(t,n),g="";return d?(s="y",l="y2",u="x",c="width",g="1-"):(s="x",l="x2",u="y",c="height"),(o={opacity:f,fill:{scale:e,field:IP}})[s]={signal:g+"datum.perc",mult:v},o[u]=f,o[l]={signal:g+"datum.perc2",mult:v},o[c]=uL(h),lL(a={enter:o,update:Object(p.o)({},o,{opacity:{value:1}}),exit:{opacity:f}},"stroke",vL("gradientStrokeColor",t,n)),lL(a,"strokeWidth",vL("gradientStrokeWidth",t,n)),lL(a,"opacity",vL("gradientOpacity",t,n),"update"),pL("rect","legend-band",null,IP,i,a,r)},ML=function(t,e,n,r){var i,a,o,s,u,l={value:0},c=gL(t,e.gradientDirection),f=uL(yL(t,e)),d=mL(t,e),h=vL("labelOverlap",t,e),p="";return lL(i={enter:a={opacity:l},update:o={opacity:{value:1},text:{field:"label"}},exit:{opacity:l}},"fill",vL("labelColor",t,e)),lL(i,"font",vL("labelFont",t,e)),lL(i,"fontSize",vL("labelFontSize",t,e)),lL(i,"fontWeight",vL("labelFontWeight",t,e)),lL(i,"fillOpacity",vL("labelOpacity",t,e)),lL(i,"limit",yO(t.labelLimit,e.gradientLabelLimit)),c?(a.align={value:"left"},a.baseline=o.baseline={signal:'datum.perc<=0?"bottom":datum.perc>=1?"top":"middle"'},s="y",u="x",p="1-"):(a.align=o.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},a.baseline={value:"top"},s="x",u="y"),a[s]=o[s]={signal:p+"datum.perc",mult:d},a[u]=o[u]=f,f.offset=yO(t.labelOffset,e.gradientLabelOffset)||0,t=pL(wL,"legend-label",BP,IP,r,i,n),h&&(t.overlap={method:h,order:"datum.index"}),t},TL=function(t,e,n,r,i,a,o,s){return{type:xL,name:n,role:t,style:e,from:r,interactive:i||!1,encode:a,marks:o,layout:s}},SL={value:0},CL=function(t,e,n,r,i){var a,o,s,u,l,c,f,d=n.entries,h=!(!d||!d.interactive),p=d?d.name:void 0,v=vL("clipHeight",t,e),g=vL("symbolOffset",t,e),m={data:"value"},y={},b=i+"?datum.offset:datum.size",_=v?uL(v):{field:"size"},x="datum.index",w="max(1,"+i+")";return _.mult=.5,y={enter:a={opacity:SL,x:{signal:b,mult:.5,offset:g},y:_},update:o={opacity:{value:1},x:a.x,y:a.y},exit:{opacity:SL}},t.fill||(lL(y,"fill",e.symbolBaseFillColor),lL(y,"stroke",e.symbolBaseStrokeColor)),lL(y,"shape",vL("symbolType",t,e)),lL(y,"size",vL("symbolSize",t,e)),lL(y,"strokeWidth",vL("symbolStrokeWidth",t,e)),lL(y,"fill",vL("symbolFillColor",t,e)),lL(y,"stroke",vL("symbolStrokeColor",t,e)),lL(y,"opacity",vL("symbolOpacity",t,e),"update"),GP.forEach(function(e){t[e]&&(o[e]=a[e]={scale:t[e],field:IP})}),u=pL("symbol","legend-symbol",null,IP,m,y,n.symbols),v&&(u.clip=!0),(s=uL(g)).offset=vL("labelOffset",t,e),lL(y={enter:a={opacity:SL,x:{signal:b,offset:s},y:_},update:o={opacity:{value:1},text:{field:"label"},x:a.x,y:a.y},exit:{opacity:SL}},"align",vL("labelAlign",t,e)),lL(y,"baseline",vL("labelBaseline",t,e)),lL(y,"fill",vL("labelColor",t,e)),lL(y,"font",vL("labelFont",t,e)),lL(y,"fontSize",vL("labelFontSize",t,e)),lL(y,"fontWeight",vL("labelFontWeight",t,e)),lL(y,"limit",vL("labelLimit",t,e)),lL(y,"fillOpacity",vL("labelOpacity",t,e)),l=pL(wL,"legend-label",BP,IP,m,y,n.labels),y={enter:{noBound:{value:!0},width:SL,height:v?uL(v):SL,opacity:SL},exit:{opacity:SL},update:o={opacity:{value:1},row:{signal:null},column:{signal:null}}},gL(t,e.symbolDirection)?(c="ceil(item.mark.items.length/"+w+")",o.row.signal=x+"%"+c,o.column.signal="floor("+x+"/"+c+")",f={field:["row",x]}):(o.row.signal="floor("+x+"/"+w+")",o.column.signal=x+"%"+w,f={field:x}),o.column.signal=i+"?"+o.column.signal+":"+x,(t=TL("scope",null,p,r={facet:{data:r,name:"value",groupby:"index"}},h,cL(y,d,VP),[u,l])).sort=f,t};var EL=function(t,e){var n;return Object(p.F)(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+OL(t.path)+")":t.sphere&&(n="geoShape("+OL(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t};function OL(t){return Object(p.F)(t)&&t.signal?t.signal:Object(p.X)(t)}var PL=function(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")?t.type===xL?"scope":e||aL:e},LL=function(t){return{marktype:t.type,name:t.name||void 0,role:t.role||PL(t),zindex:+t.zindex||void 0}},RL=function(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t},DL=function(t,e){var n=or(t.type);n||Object(p.n)("Unrecognized transform type: "+Object(p.X)(t.type));var r=aO(n.type.toLowerCase(),null,FL(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r};function FL(t,e,n){var r,i,a,o={};for(i=0,a=t.params.length;i<a;++i)o[(r=t.params[i]).name]=jL(r,e,n);return o}function jL(t,e,n){var r=t.type,i=e[t.name];return"index"===r?function(t,e,n){Object(p.H)(e.from)||Object(p.n)('Lookup "from" parameter must be a string literal.');return n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==i?"param"===r?function(t,e,n){var r=e[t.name];return t.array?(Object(p.A)(r)||Object(p.n)("Expected an array of sub-parameters. Instead: "+Object(p.X)(r)),r.map(function(e){return zL(t,e,n)})):zL(t,r,n)}(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!gO(i)?i.map(function(e){return NL(t,e,n)}):NL(t,i,n):void(t.required&&Object(p.n)("Missing required "+Object(p.X)(e.type)+" parameter: "+Object(p.X)(t.name)))}function NL(t,e,n){var r=t.type;if(gO(e))return IL(r)?Object(p.n)("Expression references can not be signals."):BL(r)?n.fieldRef(e):qL(r)?n.compareRef(e):n.signalRef(e.signal);var i,a=t.expr||BL(r);return a&&((i=e)&&i.expr)?n.exprRef(e.expr,e.as):a&&function(t){return t&&t.field}(e)?lO(e.field,e.as):IL(r)?rO(e,n):function(t){return"data"===t}(r)?sO(n.getData(e).values):BL(r)?lO(e):qL(r)?n.compareRef(e):e}function zL(t,e,n){var r,i,a,o,s;for(o=0,s=t.params.length;o<s;++o){for(a in(i=t.params[o]).key)if(i.key[a]!==e[a]){i=null;break}if(i)break}return i||Object(p.n)("Unsupported parameter: "+Object(p.X)(e)),r=Object(p.o)(FL(i,e,n),i.key),sO(n.add(sP(r)))}function IL(t){return"expr"===t}function BL(t){return"field"===t}function qL(t){return"compare"===t}function UL(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:sO(e.getData(t.data).output)}function HL(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}HL.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],a=e[n-1],o=e[n-2],s=null;for(t.add(e[0]);r<n;++r)e[r].params.pulse=sO(e[r-1]),t.add(e[r]),"aggregate"===e[r].type&&(s=e[r]);return new HL(t,i,o,a,s)};var WL=HL.prototype;function GL(t){return Object(p.H)(t)?t:null}function VL(t,e,n){var r,i=hO(n.op,n.field);if(e.ops){for(var a=0,o=e.as.length;a<o;++a)if(e.as[a]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function YL(t,e,n,r,i,a,o){var s,u,l=e[n]||(e[n]={}),c=function(t){return Object(p.F)(t)?(t.order===dO?"-":"+")+hO(t.op,t.field):""}(a),f=GL(i);if(null!=f&&(t=e.scope,s=l[f+=c?"|"+c:""]),!s){var d=a?{field:cO,pulse:e.countsRef(t,i,a)}:{field:t.fieldRef(i),pulse:sO(e.output)};c&&(d.sort=t.sortRef(a)),u=t.add(aO(r,void 0,d)),o&&(e.index[i]=u),s=sO(u),null!=f&&(l[f]=s)}return s}WL.countsRef=function(t,e,n){var r,i,a,o=this.counts||(this.counts={}),s=GL(e);return null!=s&&(t=this.scope,r=o[s]),r?n&&n.field&&VL(t,r.agg.params,n):(a={groupby:t.fieldRef(e,"key"),pulse:sO(this.output)},n&&n.field&&VL(t,a,n),i=t.add(WO(a)),r=t.add(YO({pulse:sO(i)})),r={agg:i,ref:sO(r)},null!=s&&(o[s]=r)),r.ref},WL.tuplesRef=function(){return sO(this.values)},WL.extentRef=function(t,e){return YL(t,this,"extent","extent",e,!1)},WL.domainRef=function(t,e){return YL(t,this,"domain","values",e,!1)},WL.valuesRef=function(t,e,n){return YL(t,this,"vals","values",e,n||!0)},WL.lookupRef=function(t,e){return YL(t,this,"lookup","tupleindex",e,!1)},WL.indataRef=function(t,e){return YL(t,this,"indata","tupleindex",e,!0,!0)};var ZL=function(t,e,n){var r,i,a=t.remove,o=t.insert,s=t.toggle,u=t.modify,l=t.values,c=e.add(oO());r="if("+t.trigger+',modify("'+n+'",'+[o,a,s,u,l].map(function(t){return null==t?"null":t}).join(",")+"),0)",i=rO(r,e),c.update=i.$expr,c.params=i.$params},XL=function(t,e){var n,r,i,a,o,s,u,l,c,f,d,h,v,g=PL(t),m=t.type===xL,y=t.from&&t.from.facet,b=t.layout||"scope"===g||g===oL,_=g===aL||b||y,x=t.overlap;i=function(t,e,n){var r,i,a,o,s;return t?(r=t.facet)&&(e||Object(p.n)("Only group marks can be faceted."),null!=r.field?o=s=UL(r,n):(t.data?s=sO(n.getData(t.data).aggregate):((a=DL(Object(p.o)({type:"aggregate",groupby:Object(p.i)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),a.params.pulse=UL(r,n),o=s=sO(n.add(a))),i=n.keyRef(r.groupby,!0))):o=sO(n.add(YO(null,[{}]))),o||(o=UL(t,n)),{key:i,pulse:o,parent:s}}(t.from,m,e),c=sO(r=e.add(XO({key:i.key||(t.key?lO(t.key):void 0),pulse:i.pulse,clean:!m}))),r=a=e.add(YO({pulse:c})),r=e.add(rP({markdef:LL(t),interactive:RL(t.interactive,e),clip:EL(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:sO(r)})),f=sO(r),(r=e.add($O(fL(t.encode,t.type,g,t.style,e,{pulse:f})))).params.parent=e.encode(),t.transform&&t.transform.forEach(function(t){var n=DL(t,e);(n.metadata.generates||n.metadata.changes)&&Object(p.n)("Mark transforms should not generate new data."),n.params.pulse=sO(r),e.add(r=n)}),t.sort&&(r=e.add(vP({sort:e.compareRef(t.sort,!0),pulse:sO(r)}))),d=sO(r),(y||b)&&(h=sO(b=e.add(gP({layout:e.objectProperty(t.layout),legendMargin:e.config.legendMargin,mark:f,pulse:d})))),v=sO(o=e.add(VO({mark:f,pulse:h||d}))),m&&(_&&((n=e.operators).pop(),b&&n.pop()),e.pushState(d,h||v,c),y?function(t,e,n){var r,i,a,o,s=t.from.facet,u=s.name,l=UL(s,e);s.name||Object(p.n)("Facet must have a name: "+Object(p.X)(s)),s.data||Object(p.n)("Facet must reference a data set: "+Object(p.X)(s)),s.field?o=e.add(uP({field:e.fieldRef(s.field),pulse:l})):s.groupby?o=e.add(KO({key:e.keyRef(s.groupby),group:sO(e.proxy(n.parent)),pulse:l})):Object(p.n)("Facet must specify groupby or field: "+Object(p.X)(s)),i=(r=e.fork()).add(YO()),a=r.add(pP({pulse:sO(i)})),r.addData(u,new HL(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:sR(t,r).toRuntime()}}(t,e,i):_?function(t,e,n){var r=e.add(uP({pulse:n.pulse})),i=e.fork();i.add(pP()),i.addSignal("parent",null),r.params.subflow={$subflow:sR(t,i).toRuntime()}}(t,e,i):sR(t,e),e.popState(),_&&(b&&n.push(b),n.push(o))),x&&(v=function(t,e,n){var r,i=t.method,a=t.bound,o={method:gO(i)?n.signalRef(i.signal):i,pulse:e};t.order&&(o.sort=n.compareRef({field:t.order}));a&&(r=a.tolerance,o.boundTolerance=gO(r)?n.signalRef(r.signal):+r,o.boundScale=n.scaleRef(a.scale),o.boundOrient=a.orient);return sO(n.add(oP(o)))}(x,v,e)),s=e.add(dP({pulse:v})),u=e.add(pP({pulse:sO(s)},void 0,e.parent())),null!=t.name&&(l=t.name,e.addData(l,new HL(e,a,s,u)),t.on&&t.on.forEach(function(t){(t.insert||t.remove||t.toggle)&&Object(p.n)("Marks only support modify triggers."),ZL(t,e,l)}))};var $L=function(t,e){var n,r,i,a,o,s,u,l,c,f=e.config.legend,d=t.encode||{},h=d.legend||{},v=h.name||void 0,g=h.interactive,m=h.style,y=GP.reduce(function(e,n){return e||t[n]},0);return y||Object(p.n)("Missing valid scale for legend."),o=function(t,e){var n=t.type||UP;t.type||1!==function(t){return GP.reduce(function(e,n){return e+(t[n]?1:0)},0)}(t)||!t.fill&&!t.stroke||(n=function(t){return wP.hasOwnProperty(t)}(e)?HP:MP(e)?WP:UP);return n!==HP?n:MP(e)?WP:HP}(t,e.scaleType(y)),s={orient:vL("orient",t,f),title:null!=t.title,type:o},u=sO(e.add(YO(null,[s]))),h=cL(function(t,e){var n={enter:{},update:{}};return lL(n,"offset",vL("offset",t,e)),lL(n,"padding",vL("padding",t,e)),lL(n,"titlePadding",vL("titlePadding",t,e)),lL(n,"fill",vL("fillColor",t,e)),lL(n,"stroke",vL("strokeColor",t,e)),lL(n,"strokeWidth",vL("strokeWidth",t,e)),lL(n,"cornerRadius",vL("cornerRadius",t,e)),lL(n,"strokeDash",e.strokeDash),n}(t,f),h,VP),n={enter:{x:{value:0},y:{value:0}}},l=sO(e.add(eP(i={type:o,scale:e.scaleRef(y),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),o===HP?(a=[AL(t,y,f,d.gradient),ML(t,f,d.labels,l)],i.count=i.count||e.signalRef("max(2,2*floor(("+bO(mL(t,f))+")/100))")):o===WP?a=[kL(t,y,f,d.gradient,l),ML(t,f,d.labels,l)]:(r=function(t,e){return{align:vL("gridAlign",t,e),center:{row:!0,column:!1},columns:bL(t,e),padding:{row:vL("rowPadding",t,e),column:vL("columnPadding",t,e)}}}(t,f),a=[CL(t,f,d,l,bO(r.columns))],i.size=function(t,e,n){var r,i,a,o;return a=_L("strokeWidth",n[0].encode),i=t.size?'scale("'+t.size+'",datum)':_L("size",n[0].encode),r=function(t,e,n){return _L("fontSize",t)||function(t,e,n){var r=e.config.style[n];return r&&r[t]}("fontSize",e,n)}(n[1].encode,e,BP),o="max(ceil(sqrt("+bO(i)+")+"+bO(a)+"),"+bO(r)+")",rO(o,e)}(t,e,a[0].marks)),a=[TL("legend-entry",null,null,u,g,n,a,r)],s.title&&a.push(function(t,e,n,r){var i,a,o={value:0};return lL(i={enter:a={opacity:o,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},update:{opacity:{value:1},text:uL(t.title),x:a.x,y:a.y},exit:{opacity:o}},"align",vL("titleAlign",t,e)),lL(i,"baseline",vL("titleBaseline",t,e)),lL(i,"fill",vL("titleColor",t,e)),lL(i,"font",vL("titleFont",t,e)),lL(i,"fontSize",vL("titleFontSize",t,e)),lL(i,"fontWeight",vL("titleFontWeight",t,e)),lL(i,"limit",vL("titleLimit",t,e)),lL(i,"fillOpacity",vL("titleOpacity",t,e)),pL(wL,"legend-title","guide-title",null,r,i,n)}(t,f,d.title,u)),c=TL("legend",m,v,u,g,h,a),t.zindex&&(c.zindex=t.zindex),XL(c,e)};function JL(t,e,n){return'item.anchor==="'+NP+'"?'+t+':item.anchor==="'+zP+'"?'+e+":"+n}var KL=JL(Object(p.X)(DP),Object(p.X)("right"),Object(p.X)("center")),QL=JL('+(item.orient==="right")','+(item.orient!=="'+DP+'")',"0.5"),tR=function(t,e){t=Object(p.H)(t)?{text:t}:t;var n,r,i,a=e.config.title,o=Object(p.o)({},t.encode);return n={orient:vL("orient",t,a)},r=sO(e.add(YO(null,[n]))),o.name=t.name,o.interactive=t.interactive,i=function(t,e,n,r){var i,a,o,s,u,l={value:0},c=t.text,f=vL("orient",t,e),d=vL("anchor",t,e),h=f===DP||f===RP?-1:1,p=f===RP||f===FP,v={group:p?"width":"height"};s={field:v,mult:{signal:QL}},u=h<0?l:p?{field:{group:"height"}}:{field:{group:"width"}},i={enter:a={opacity:l},update:o={opacity:{value:1},text:uL(c),anchor:uL(d),orient:uL(f),extent:{field:v},align:{signal:KL}},exit:{opacity:l}},p?(o.x=s,o.y=u,a.angle=l,a.baseline={value:f===RP?FP:RP}):(o.x=u,o.y=s,a.angle={value:90*h},a.baseline={value:FP});return lL(i,"align",vL("align",t,e),"update"),lL(i,"angle",vL("angle",t,e)),lL(i,"baseline",vL("baseline",t,e)),lL(i,"fill",vL("color",t,e)),lL(i,"font",vL("font",t,e)),lL(i,"fontSize",vL("fontSize",t,e)),lL(i,"fontWeight",vL("fontWeight",t,e)),lL(i,"frame",vL("frame",t,e)),lL(i,"limit",vL("limit",t,e)),lL(i,"offset",vL("offset",t,e)||0),pL(wL,sL,t.style||qP,null,r,i,n)}(t,a,o,r),t.zindex&&(i.zindex=t.zindex),XL(i,e)};function eR(t,e){var n=[];t.transform&&t.transform.forEach(function(t){n.push(DL(t,e))}),t.on&&t.on.forEach(function(n){ZL(n,e,t.name)}),e.addDataPipeline(t.name,function(t,e,n){var r,i,a,o,s,u=[],l=null,c=!1,f=!1;t.values?u.push(l=nR({$ingest:t.values,$format:t.format})):t.url?(l=mO(t.url)||mO(t.format)?{$load:sO(e.add(rR(e,t)))}:{$request:t.url,$format:t.format},u.push(l=nR(l))):t.source&&(l=r=Object(p.i)(t.source).map(function(t){return sO(e.getData(t).output)}),u.push(null));for(i=0,a=n.length;i<a;++i)o=n[i],s=o.metadata,l||s.source||u.push(l=nR()),u.push(o),s.generates&&(f=!0),s.modifies&&!f&&(c=!0),s.source?l=o:s.changes&&(l=null);r&&(a=r.length-1,u[0]=fP({derive:c,pulse:a?r:r[0]}),(c||a)&&u.splice(1,0,nR()));l||u.push(nR());return u.push(pP({})),u}(t,e,n))}function nR(t){var e=YO({},t);return e.metadata={source:!0},e}function rR(t,e){return nP({url:t.property(e.url),format:t.objectProperty(e.format)})}function iR(t,e){return{scale:t.scale,range:e}}function aR(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}var oR=function(t,e){var n,r,i,a,o,s,u=function(t,e){var n=e.config,r=t.orient,i=r===RP||r===FP?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===e.scaleType(t.scale)&&n.axisBand;return i||a||o?Object(p.o)({},n.axis,i,a,o):n.axis}(t,e),l=t.encode||{},c=l.axis||{},f=c.name||void 0,d=c.interactive,h=c.style;return n={orient:t.orient,ticks:!!vL("ticks",t,u),labels:!!vL("labels",t,u),grid:!!vL("grid",t,u),domain:!!vL("domain",t,u),title:!!yO(t.title,!1)},r=sO(e.add(YO({},[n]))),c=cL({update:{range:{signal:'abs(span(range("'+t.scale+'")))'},offset:uL(yO(t.offset,0)),position:uL(yO(t.position,0)),titlePadding:uL(vL("titlePadding",t,u)),minExtent:uL(vL("minExtent",t,u)),maxExtent:uL(vL("maxExtent",t,u))}},l.axis,VP),i=sO(e.add(GO({scale:e.scaleRef(t.scale),extra:e.property(vL("tickExtra",t,u)),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),s=[],n.grid&&s.push(function(t,e,n,r){var i,a,o,s,u,l,c,f,d,h=t.orient,p=t.gridScale,v=h===DP||h===RP?1:-1,g=v*t.offset||0,m={value:0};return lL(i={enter:a={opacity:m},update:s={opacity:{value:1}},exit:o={opacity:m}},"stroke",vL("gridColor",t,e)),lL(i,"strokeDash",vL("gridDash",t,e)),lL(i,"strokeOpacity",vL("gridOpacity",t,e)),lL(i,"strokeWidth",vL("gridWidth",t,e)),u={scale:t.scale,field:IP,band:vL("bandPosition",t,e),round:vL("tickRound",t,e),extra:vL("tickExtra",t,e),offset:vL("tickOffset",t,e)},h===RP||h===FP?(l="x",c="y",d="height"):(l="y",c="x",d="width"),f=c+"2",s[l]=a[l]=o[l]=u,p?(a[c]={scale:p,range:0,mult:v,offset:g},s[f]=a[f]={scale:p,range:1,mult:v,offset:g}):(a[c]={value:g},s[f]=a[f]={signal:d,mult:v,offset:g}),pL("rule","axis-grid",null,IP,r,i,n)}(t,u,l.grid,i)),n.ticks&&(a=vL("tickSize",t,u),s.push(function(t,e,n,r,i){var a,o,s,u,l,c,f=t.orient,d=f===DP||f===RP?-1:1,h={value:0};return lL(a={enter:o={opacity:h},update:u={opacity:{value:1}},exit:s={opacity:h}},"stroke",vL("tickColor",t,e)),lL(a,"strokeOpacity",vL("tickOpacity",t,e)),lL(a,"strokeWidth",vL("tickWidth",t,e)),(l=uL(i)).mult=d,c={scale:t.scale,field:IP,band:vL("bandPosition",t,e),round:vL("tickRound",t,e),extra:vL("tickExtra",t,e),offset:vL("tickOffset",t,e)},f===RP||f===FP?(u.y=o.y=h,u.y2=o.y2=l,u.x=o.x=s.x=c):(u.x=o.x=h,u.x2=o.x2=l,u.y=o.y=s.y=c),pL("rule","axis-tick",null,IP,r,a,n)}(t,u,l.ticks,i,a))),n.labels&&(a=n.ticks?a:0,s.push(function(t,e,n,r,i){var a,o,s,u,l,c,f,d,h,p=t.orient,v=p===DP||p===RP?-1:1,g=p===RP||p===FP,m=t.scale,y=bO(vL("labelFlush",t,e)),b=bO(vL("labelFlushOffset",t,e)),_=0===y||!!y,x=vL("labelAlign",t,e),w=vL("labelBaseline",t,e),A={value:0};return(s=uL(i)).mult=v,s.offset=uL(vL("labelPadding",t,e)||0),s.offset.mult=v,u={scale:m,field:IP,band:.5,offset:vL("tickOffset",t,e)},g?(l=x||(_?aR(m,y,'"left"','"right"','"center"'):"center"),c=w||(p===RP?"bottom":"top"),f=!x):(l=x||("right"===p?"left":"right"),c=w||(_?aR(m,y,'"top"','"bottom"','"middle"'):"middle"),f=!w),f=f&&_&&b?aR(m,y,"-"+b,b,0):null,lL(a={enter:o={opacity:A,x:g?u:s,y:g?s:u},update:{opacity:{value:1},text:{field:"label"},x:o.x,y:o.y},exit:{opacity:A,x:o.x,y:o.y}},g?"dx":"dy",f),lL(a,"align",l),lL(a,"baseline",c),lL(a,"angle",vL("labelAngle",t,e)),lL(a,"fill",vL("labelColor",t,e)),lL(a,"font",vL("labelFont",t,e)),lL(a,"fontSize",vL("labelFontSize",t,e)),lL(a,"fontWeight",vL("labelFontWeight",t,e)),lL(a,"limit",vL("labelLimit",t,e)),lL(a,"fillOpacity",vL("labelOpacity",t,e)),d=vL("labelBound",t,e),h=vL("labelOverlap",t,e),t=pL(wL,"axis-label",BP,IP,r,a,n),(h||d)&&(t.overlap={method:h,order:"datum.index",bound:d?{scale:m,orient:p,tolerance:d}:null}),t}(t,u,l.labels,i,a))),n.domain&&s.push(function(t,e,n,r){var i,a,o,s,u,l,c=t.orient,f={value:0};return lL(i={enter:a={opacity:f},update:o={opacity:{value:1}},exit:{opacity:f}},"stroke",vL("domainColor",t,e)),lL(i,"strokeWidth",vL("domainWidth",t,e)),lL(i,"strokeOpacity",vL("domainOpacity",t,e)),c===RP||c===FP?(s="x",l="y"):(s="y",l="x"),u=s+"2",a[l]=f,o[s]=a[s]=iR(t,0),o[u]=a[u]=iR(t,1),pL("rule","axis-domain",null,null,r,i,n)}(t,u,l.domain,r)),n.title&&s.push(function(t,e,n,r){var i,a,o,s,u=t.orient,l=u===DP||u===RP?-1:1,c=u===RP||u===FP,f={value:0};return i={enter:a={opacity:f},update:o={opacity:{value:1},text:uL(t.title)},exit:{opacity:f}},s={scale:t.scale,range:.5},c?(o.x=s,a.angle={value:0},a.baseline={value:u===RP?"bottom":"top"}):(o.y=s,a.angle={value:90*l},a.baseline={value:"bottom"}),lL(i,"align",vL("titleAlign",t,e)),lL(i,"angle",vL("titleAngle",t,e)),lL(i,"baseline",vL("titleBaseline",t,e)),lL(i,"fill",vL("titleColor",t,e)),lL(i,"font",vL("titleFont",t,e)),lL(i,"fontSize",vL("titleFontSize",t,e)),lL(i,"fontWeight",vL("titleFontWeight",t,e)),lL(i,"limit",vL("titleLimit",t,e)),lL(i,"fillOpacity",vL("titleOpacity",t,e)),!lL(i,"x",vL("titleX",t,e),"update")&&c&&!hL("x",n)&&(i.enter.auto={value:!0}),!lL(i,"y",vL("titleY",t,e),"update")&&!c&&!hL("y",n)&&(i.enter.auto={value:!0}),pL(wL,"axis-title","guide-title",null,r,i,n)}(t,u,l.title,r)),o=TL("axis",h,f,r,d,c,s),t.zindex&&(o.zindex=t.zindex),XL(o,e)},sR=function(t,e,n){var r=Object(p.i)(t.signals),i=Object(p.i)(t.scales);return n||r.forEach(function(t){fS(t,e)}),Object(p.i)(t.projections).forEach(function(t){!function(t,e){var n={};for(var r in t)"name"!==r&&(n[r]=LP(t[r],r,e));e.addProjection(t.name,n)}(t,e)}),i.forEach(function(t){!function(t,e){var n=t.type||"linear";_P.hasOwnProperty(n)||Object(p.n)("Unrecognized scale type: "+Object(p.X)(n)),e.addScale(t.name,{type:n,domain:void 0})}(t,e)}),Object(p.i)(t.data).forEach(function(t){eR(t,e)}),i.forEach(function(t){SP(t,e)}),r.forEach(function(t){!function(t,e){var n=e.getSignal(t.name),r=t.update;t.init&&(r?Object(p.n)("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=rO(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach(function(t){UO(t,e,n.id)})}(t,e)}),Object(p.i)(t.axes).forEach(function(t){oR(t,e)}),Object(p.i)(t.marks).forEach(function(t){XL(t,e)}),Object(p.i)(t.legends).forEach(function(t){$L(t,e)}),t.title&&tR(t.title,e),e.parseLambdas(),e},uR=Object(p.bb)(["width","height","padding","autosize"]);function lR(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function cR(t){this.config=t.config,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var fR=lR.prototype=cR.prototype;function dR(t){return(Object(p.A)(t)?function(t){for(var e,n="[",r=0,i=t.length;r<i;++r)e=t[r],n+=(r>0?",":"")+(Object(p.F)(e)?e.signal||dR(e):Object(p.X)(e));return n+"]"}:function(t){var e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Object(p.X)(e)+":"+(Object(p.F)(n)?n.signal||dR(n):Object(p.X)(n));return r+"}"})(t)}fR.fork=function(){return new cR(this)},fR.isSubscope=function(){return this._subid>0},fR.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},fR.id=function(){return(this._subid?this._subid+":":0)+this._id++},fR.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(function(e){e.$ref=t.id}),t.refs=null),t},fR.proxy=function(t){var e=t instanceof iO?sO(t):t;return this.add(cP({value:e}))},fR.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},fR.addUpdate=function(t){return this.updates.push(t),t},fR.finish=function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){var r;t&&((r=t.data||(t.data={}))[e]||(r[e]=[])).push(n)}for(t in this.data)for(var r in n((e=this.data[t]).input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values"),e.index)n(e.index[r],t,"index:"+r);return this},fR.pushState=function(t,e,n){this._encode.push(sO(this.add(pP({pulse:t})))),this._parent.push(e),this._lookup.push(n?sO(this.proxy(n)):null),this._markpath.push(-1)},fR.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},fR.parent=function(){return Object(p.S)(this._parent)},fR.encode=function(){return Object(p.S)(this._encode)},fR.lookup=function(){return Object(p.S)(this._lookup)},fR.markpath=function(){var t=this._markpath;return++t[t.length-1]},fR.fieldRef=function(t,e){if(Object(p.H)(t))return lO(t,e);t.signal||Object(p.n)("Unsupported field reference: "+Object(p.X)(t));var n,r=t.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},e&&(n.as=e),this.field[r]=i=sO(this.add(QO(n)))),i},fR.compareRef=function(t,e){function n(t){return gO(t)?(i=!0,r.signalRef(t.signal)):t}var r=this,i=!1,a=Object(p.i)(t.field).map(n),o=Object(p.i)(t.order).map(n);return e&&a.push(uO),i?sO(this.add(ZO({fields:a,orders:o}))):fO(a,o)},fR.keyRef=function(t,e){var n=this.signals,r=!1;return t=Object(p.i)(t).map(function(t){return gO(t)?(r=!0,sO(n[t.signal])):t}),r?sO(this.add(tP({fields:t,flat:e}))):function(t,e){var n={$key:t};return e&&(n.$flat=!0),n}(t,e)},fR.sortRef=function(t){if(!t)return t;var e=[hO(t.op,t.field),uO],n=t.order||"ascending";return n.signal?sO(this.add(ZO({fields:e,orders:[n=this.signalRef(n.signal),n]}))):fO(e,[n,n])},fR.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},fR.addSignal=function(t,e){this.signals.hasOwnProperty(t)&&Object(p.n)("Duplicate signal name: "+Object(p.X)(t));var n=e instanceof iO?e:this.add(oO(e));return this.signals[t]=n},fR.getSignal=function(t){return this.signals[t]||Object(p.n)("Unrecognized signal name: "+Object(p.X)(t)),this.signals[t]},fR.signalRef=function(t){return this.signals[t]?sO(this.signals[t]):(this.lambdas.hasOwnProperty(t)||(this.lambdas[t]=this.add(oO(null))),sO(this.lambdas[t]))},fR.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=rO(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},fR.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},fR.objectProperty=function(t){return t&&Object(p.F)(t)?this.signalRef(t.signal||dR(t)):t},fR.exprRef=function(t,e){var n={expr:rO(t,this)};return e&&(n.expr.$name=e),sO(this.add(JO(n)))},fR.addBinding=function(t,e){this.bindings||Object(p.n)("Nested signals do not support binding: "+Object(p.X)(t)),this.bindings.push(Object(p.o)({signal:t},e))},fR.addScaleProj=function(t,e){this.scales.hasOwnProperty(t)&&Object(p.n)("Duplicate scale or projection name: "+Object(p.X)(t)),this.scales[t]=this.add(e)},fR.addScale=function(t,e){this.addScaleProj(t,hP(e))},fR.addProjection=function(t,e){this.addScaleProj(t,lP(e))},fR.getScale=function(t){return this.scales[t]||Object(p.n)("Unrecognized scale name: "+Object(p.X)(t)),this.scales[t]},fR.projectionRef=fR.scaleRef=function(t){return sO(this.getScale(t))},fR.projectionType=fR.scaleType=function(t){return this.getScale(t).params.type},fR.addData=function(t,e){return this.data.hasOwnProperty(t)&&Object(p.n)("Duplicate data set name: "+Object(p.X)(t)),this.data[t]=e},fR.getData=function(t){return this.data[t]||Object(p.n)("Undefined data set name: "+Object(p.X)(t)),this.data[t]},fR.addDataPipeline=function(t,e){return this.data.hasOwnProperty(t)&&Object(p.n)("Duplicate data set name: "+Object(p.X)(t)),this.addData(t,HL.fromEntries(this,e))};var hR=function(t){var e={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:mR},area:{fill:mR},image:null,line:{stroke:mR,strokeWidth:gR},path:{stroke:mR},rect:{fill:mR},rule:{stroke:yR},shape:{stroke:mR},symbol:{fill:mR,size:64},text:{fill:yR,font:pR,fontSize:11},style:{"guide-label":{fill:yR,font:pR,fontSize:10},"guide-title":{fill:yR,font:pR,fontSize:11,fontWeight:"bold"},"group-title":{fill:yR,font:pR,fontSize:13,fontWeight:"bold"},point:{size:vR,strokeWidth:gR,shape:"circle"},circle:{size:vR,strokeWidth:gR},square:{size:vR,strokeWidth:gR,shape:"square"},cell:{fill:"transparent",stroke:_R}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:bR,grid:!1,gridWidth:1,gridColor:_R,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:bR,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:_R,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:bR,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(t||[]).forEach(function(t){var n,r,i;if(t)for(n in t)if("style"===n)for(n in i=e.style||(e.style={}),t.style)i[n]=Object(p.o)(i[n]||{},t.style[n]);else r=t[n],e[n]=Object(p.F)(r)&&!Object(p.A)(r)?Object(p.o)(Object(p.F)(e[n])?e[n]:{},r):r}),e},pR="sans-serif",vR=30,gR=2,mR="#4c78a8",yR="#000",bR="#888",_R="#ddd";var xR=function(t,e){return Object(p.F)(t)||Object(p.n)("Input Vega specification must be an object."),function(t,e){var n,r,i,a,o,s=e.config;return e.background=t.background||s.background,e.eventConfig=s.events,o=sO(e.root=e.add(oO())),e.addSignal("width",t.width||0),e.addSignal("height",t.height||0),e.addSignal("padding",nS(t.padding,s)),e.addSignal("autosize",eS(t.autosize,s)),Object(p.i)(t.signals).forEach(function(t){uR[t.name]||fS(t,e)}),r=e.add(YO()),i=cL({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t.encode),i=e.add($O(fL(i,xL,oL,t.style,e,{pulse:sO(r)}))),a=e.add(gP({layout:e.objectProperty(t.layout),legendMargin:s.legendMargin,autosize:e.signalRef("autosize"),mark:o,pulse:sO(i)})),e.operators.pop(),e.pushState(sO(i),sO(a),null),sR(t,e,!0),e.operators.push(a),n=e.add(VO({mark:o,pulse:sO(a)})),n=e.add(dP({pulse:sO(n)})),n=e.add(pP({pulse:sO(n)})),e.addData("root",new HL(e,r,r,n)),e}(t,new lR(hR([e,t.config]))).toRuntime()};function wR(t,e,n){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function AR(t,e){return wR(["event"],t,e)}function kR(t,e){return wR(["item","_"],t,e)}function MR(t,e,n){var r,i;for(r in n=n||{},t)i=t[r],n[r]=Object(p.A)(i)?i.map(function(t){return TR(t,e,n)}):TR(i,e,n);return n}function TR(t,e,n){if(!t||!Object(p.F)(t))return t;for(var r,i=0,a=SR.length;i<a;++i)if(r=SR[i],t.hasOwnProperty(r.key))return r.parse(t,e,n);return t}var SR=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||Object(p.n)("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(p.I)(t.$key,t.$flat))}},{key:"$expr",parse:function(t,e,n){t.$params&&MR(t.$params,e,n);var r="e:"+t.$expr+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(p.f)(function(t,e){return wR(["datum","_"],t,e)}(t.$expr,e),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(p.t)(t.$field,t.$name))}},{key:"$encode",parse:function(t,e){var n,r,i=t.$encode,a={};for(n in i)r=i[n],a[n]=Object(p.f)(kR(r.$expr,e),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function(t,e){var n="c:"+t.$compare+"_"+t.$order,r=Object(p.i)(t.$compare).map(function(t){return t&&t.$tupleid?b:t});return e.fn[n]||(e.fn[n]=Object(p.k)(r,t.$order))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var a=PR(n,e.fork()),o=a.get(n.operators[0].id),s=a.signals.parent;return s&&s.set(i),o}}},{key:"$tupleid",parse:function(){return b}}];function CR(t){return(t+"").toLowerCase()}var ER=function(t,e){"operator"!==CR(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?function(t,e){return wR(["_"],t,e)}(t.update,e):null)};var OR=function(t,e){var n=Object(p.F)(n=t.source)?n.$ref:n,r=e.get(n),i=null,a=t.update,o=void 0;r||Object(p.n)("Source not defined: "+t.source),i=t.target&&t.target.$expr?AR(t.target.$expr,e):e.get(t.target),a&&a.$expr&&(a.$params&&(o=MR(a.$params,e)),a=function(t,e){return wR(["_","event"],t,e)}(a.$expr,e)),e.update(t,r,i,a,o)},PR=function(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),n.forEach(function(t){ER(t,e)}),n.forEach(function(t){!function(t,e){if(t.params){var n=e.get(t.id);n||Object(p.n)("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(MR(t.params,e),t.react,t.initonly))}}(t,e)}),(t.streams||[]).forEach(function(t){!function(t,e){var n,r=null!=t.filter?AR(t.filter,e):void 0,i=null!=t.stream?e.get(t.stream):void 0;t.source?i=e.events(t.source,t.type,r):t.merge&&(i=(n=t.merge.map(e.get.bind(e)))[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map(e.get.bind(e)),i=i.between(n[0],n[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(p.n)("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}(t,e)}),(t.updates||[]).forEach(function(t){OR(t,e)}),e.resolve()},LR={skip:!0};var RR=function(t,e,n){return new DR(t,e,n)};function DR(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function FR(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}DR.prototype=FR.prototype={fork:function(){var t=new FR(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n,r=this,i=r.dataflow;if(r.set(t.id,e),"collect"===CR(t.type)&&(n=t.value)&&(n.$ingest?i.ingest(e,n.$ingest,n.$format):n.$load?r.get(n.$load.$ref).target=e:n.$request?i.request(e,n.$request,n.$format):i.pulse(e,i.changeset().insert(n))),t.root&&(r.root=e),t.parent){var a=r.get(t.parent.$ref);a?(i.connect(a,[e]),e.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(t.parent.$ref),i.connect(a,[e]),e.targets().add(a)})}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(var o in t.data)n=r.data[o]||(r.data[o]={}),t.data[o].forEach(function(t){n[t]=e})},resolve:function(){return(this.unresolved||[]).forEach(function(t){t()}),delete this.unresolved,this},operator:function(t,e){this.add(t,this.dataflow.add(t.value,e))},transform:function(t,e){this.add(t,this.dataflow.add(this.transforms[CR(e)]))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(function(e){return e.getState(t)})),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(function(t){n.update(e.signals[t],i[t],LR)}),Object.keys(r||{}).forEach(function(t){n.pulse(e.data[t].input,n.changeset().remove(p.eb).insert(r[t]))}),(t.subcontext||[]).forEach(function(t,n){var r=e.subcontext[n];r&&r.setState(t)})}};var jR=function(t,e,n){return PR(e,RR(t,ar,n||XE))};var NR="width",zR="height",IR="padding",BR={skip:!0};function qR(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===IR?r.left+r.right:0)}function UR(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===IR?r.top+r.bottom:0)}function HR(t,e){return e.modified&&Object(p.A)(e.input.value)&&t.indexOf("_:vega:_")}function WR(t,e){return!("parent"===t||e instanceof ar.proxy)}var GR=function(t,e,n,r){var i=t.element();i&&i.setAttribute("title",function(t){return null==t?"":Object(p.A)(t)?VR(t):Object(p.F)(t)&&!Object(p.C)(t)?(e=t,Object.keys(e).map(function(t){var n=e[t];return t+": "+(Object(p.A)(n)?VR(n):YR(n))}).join("\n")):t+"";var e}(r))};function VR(t){return"["+t.map(YR).join(", ")+"]"}function YR(t){return Object(p.A)(t)?"[\u2026]":Object(p.F)(t)&&!Object(p.C)(t)?"{\u2026}":t}function ZR(t,e){e=e||{},tr.call(this),this.loader(e.loader||this._loader),this.logLevel(e.logLevel||0),this._el=null,this._renderType=e.renderer||Mc.Canvas,this._scenegraph=new Sl;var n=this._scenegraph.root;this._renderer=null,this._tooltip=e.tooltip||GR,this._redraw=!0,this._handler=(new Ul).scene(n),this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[];var r=jR(this,t,e.functions);this._runtime=r,this._signals=r.signals,this._bind=(t.bindings||[]).map(function(t){return{state:null,param:Object(p.o)({},t)}}),r.root&&r.root.set(n),n.source=r.data.root.input,this.pulse(r.data.root.input,this.changeset().insert(n.items)),this._background=r.background||null,this._eventConfig=function(t){var e=(t=Object(p.o)({},t)).defaults;return e&&(Object(p.A)(e.prevent)&&(e.prevent=Object(p.bb)(e.prevent)),Object(p.A)(e.allow)&&(e.allow=Object(p.bb)(e.allow))),t}(r.eventConfig),this._width=this.width(),this._height=this.height(),this._viewWidth=qR(this,this._width),this._viewHeight=UR(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function(t){var e=t._signals,n=e[NR],r=e[zR],i=e[IR];function a(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,function(e){t._width=e.size,t._viewWidth=qR(t,e.size),a()},{size:n}),t._resizeHeight=t.add(null,function(e){t._height=e.size,t._viewHeight=UR(t,e.size),a()},{size:r});var o=t.add(null,a,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}(this),wT(this)}var XR=Object(p.y)(ZR,tr);function $R(t,e){return t._signals.hasOwnProperty(e)?t._signals[e]:Object(p.n)("Unrecognized signal name: "+Object(p.X)(e))}function JR(t,e){var n=(t._targets||[]).filter(function(t){var n=t._update;return n&&n.handler===e});return n.length?n[0]:null}function KR(t,e,n,r){var i=JR(n,r);return i||((i=KT(this,function(){r(e,n.value)})).handler=r,t.on(n,null,i)),t}function QR(t,e,n){var r=JR(e,n);return r&&e._targets.remove(r),t}XR.run=function(t){if(tr.prototype.run.call(this,t),this._pending)this.resize();else if(this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},XR.render=function(){return this._renderer&&(this._resize&&(this._resize=0,function(t){var e=ST(t),n=MT(t),r=TT(t);t._renderer.background(t._background),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach(function(e){try{e(n,r)}catch(i){t.error(i)}})}(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},XR.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},XR.container=function(){return this._el},XR.scenegraph=function(){return this._scenegraph},XR.origin=function(){return this._origin.slice()},XR.signal=function(t,e,n){var r=$R(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},XR.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background},XR.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")},XR.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")},XR.padding=function(t){return arguments.length?this.signal("padding",t):this.signal("padding")},XR.autosize=function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},XR.renderer=function(t){return arguments.length?(Sc(t)||Object(p.n)("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},XR.tooltip=function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},XR.loader=function(t){return arguments.length?(t!==this._loader&&(tr.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},XR.resize=function(){return this._autosize=1,this.touch($R(this,"autosize"))},XR._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},XR._resizeView=function(t,e,n,r,i,a){this.runAfter(function(o){var s=0;o._autosize=0,o.width()!==n&&(s=1,o.signal(NR,n,BR),o._resizeWidth.skip(!0)),o.height()!==r&&(s=1,o.signal(zR,r,BR),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),s&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)},XR.addEventListener=function(t,e,n){var r=e;return n&&!1===n.trap||((r=KT(this,e)).raw=e),this._handler.on(t,r),this},XR.removeEventListener=function(t,e){for(var n,r,i=this._handler.handlers(t),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},XR.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},XR.removeResizeListener=function(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},XR.addSignalListener=function(t,e){return KR(this,t,$R(this,t),e)},XR.removeSignalListener=function(t,e){return QR(this,$R(this,t),e)},XR.addDataListener=function(t,e){return KR(this,t,AT(this,t).values,e)},XR.removeDataListener=function(t,e){return QR(this,AT(this,t).values,e)},XR.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},XR.timer=function(t,e){this._timers.push(function(t,e,n){var r=new OA,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?CA():+n,r.restart(function a(o){o+=i,r.restart(a,i+=e,n),t(o)},e,n),r)}(function(e){t({timestamp:Date.now(),elapsed:e})},e))},XR.events=function(t,e,n){var r,i=this,a=new j(n),o=function(n,r){t===ET&&function(t,e){var n=t._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}(i,e)&&n.preventDefault();try{a.receive(CT(i,n,r))}catch(o){i.error(o)}finally{i.run()}};if(t===OT)i.timer(o,e);else if(t===ET)i.addEventListener(e,o,LT);else if(t===PT?"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&(r=document.querySelectorAll(t)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(e,o);i._eventListeners.push({type:e,sources:r,handler:o})}else i.warn("Can not resolve event source: "+t);return a},XR.finalize=function(){var t,e,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(t=i.length;--t>=0;)i[t].stop();for(t=a.length;--t>=0;)for(e=(n=a[t]).sources.length;--e>=0;)n.sources[e].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},XR.hover=function(t,e){return e=[e||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",RT),DT,FT(t)),this.on(this.events("view","mouseout",RT),DT,FT(e)),this},XR.data=function(t){return AT(this,t).values.value},XR.change=kT,XR.insert=function(t,e){return kT.call(this,t,T().insert(e))},XR.remove=function(t,e){return kT.call(this,t,T().remove(e))},XR.scale=function(t){var e=this._runtime.scales;return e.hasOwnProperty(t)||Object(p.n)("Unrecognized scale or projection: "+t),e[t].value},XR.initialize=function(t,e){var n,r,i=this,a=i._renderType,o=Sc(a);return t=i._el=t?QT(i,t):null,o||i.error("Unrecognized renderer type: "+a),n=o.handler||Ul,r=t?o.renderer:o.headless,i._renderer=r?JT(i,i._renderer,t,r):null,i._handler=function(t,e,n,r){var i=new r(t.loader(),KT(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,ST(t),t);return e&&e.handlers().forEach(function(t){i.on(t.type,t.handler)}),i}(i,i._handler,t,n),i._redraw=!0,t&&(e=e?QT(i,e):t.appendChild(jT("div",{class:"vega-bindings"})),i._bind.forEach(function(t){t.param.element&&(t.element=QT(i,t.param.element))}),i._bind.forEach(function(t){WT(i,t.element||e,t)})),i},XR.toImageURL=function(t,e){return t!==Mc.Canvas&&t!==Mc.SVG&&t!==Mc.PNG?Promise.reject("Unrecognized image type: "+t):tS(this,t,e).then(function(e){return t===Mc.SVG?function(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}(e.svg(),"image/svg+xml"):e.canvas().toDataURL("image/png")})},XR.toCanvas=function(t){return tS(this,Mc.Canvas,t).then(function(t){return t.canvas()})},XR.toSVG=function(t){return tS(this,Mc.SVG,t).then(function(t){return t.svg()})},XR.getState=function(t){return this._runtime.getState(t||{data:HR,signals:WR,recurse:!0})},XR.setState=function(t){var e=this;return e.runAfter(function(){e._trigger=!1,e._runtime.setState(t),e.run().runAfter(function(){e._trigger=!0})}),this},n.d(e,"version",function(){return xT.a}),n.d(e,"bin",function(){return gr}),n.d(e,"bootstrapCI",function(){return Cr}),n.d(e,"quartiles",function(){return Er}),n.d(e,"random",function(){return xr}),n.d(e,"setRandom",function(){return wr}),n.d(e,"randomLCG",function(){return Or}),n.d(e,"randomInteger",function(){return Pr}),n.d(e,"randomKDE",function(){return Rr}),n.d(e,"randomMixture",function(){return Dr}),n.d(e,"randomNormal",function(){return Lr}),n.d(e,"randomUniform",function(){return Fr}),n.d(e,"regressionLinear",function(){return Br}),n.d(e,"regressionLog",function(){return qr}),n.d(e,"regressionExp",function(){return Ur}),n.d(e,"regressionPow",function(){return Hr}),n.d(e,"regressionQuad",function(){return Wr}),n.d(e,"regressionPoly",function(){return Vr}),n.d(e,"regressionLoess",function(){return $r}),n.d(e,"sampleCurve",function(){return ti}),n.d(e,"accessor",function(){return p.f}),n.d(e,"accessorName",function(){return p.h}),n.d(e,"accessorFields",function(){return p.g}),n.d(e,"id",function(){return p.w}),n.d(e,"identity",function(){return p.x}),n.d(e,"zero",function(){return p.hb}),n.d(e,"one",function(){return p.M}),n.d(e,"truthy",function(){return p.eb}),n.d(e,"falsy",function(){return p.r}),n.d(e,"logger",function(){return p.K}),n.d(e,"None",function(){return p.d}),n.d(e,"Error",function(){return p.b}),n.d(e,"Warn",function(){return p.e}),n.d(e,"Info",function(){return p.c}),n.d(e,"Debug",function(){return p.a}),n.d(e,"panLinear",function(){return p.O}),n.d(e,"panLog",function(){return p.P}),n.d(e,"panPow",function(){return p.Q}),n.d(e,"panSymlog",function(){return p.R}),n.d(e,"zoomLinear",function(){return p.ib}),n.d(e,"zoomLog",function(){return p.jb}),n.d(e,"zoomPow",function(){return p.kb}),n.d(e,"zoomSymlog",function(){return p.lb}),n.d(e,"quarter",function(){return p.T}),n.d(e,"utcquarter",function(){return p.fb}),n.d(e,"array",function(){return p.i}),n.d(e,"clampRange",function(){return p.j}),n.d(e,"compare",function(){return p.k}),n.d(e,"constant",function(){return p.l}),n.d(e,"debounce",function(){return p.m}),n.d(e,"error",function(){return p.n}),n.d(e,"extend",function(){return p.o}),n.d(e,"extent",function(){return p.p}),n.d(e,"extentIndex",function(){return p.q}),n.d(e,"fastmap",function(){return p.s}),n.d(e,"field",function(){return p.t}),n.d(e,"flush",function(){return p.u}),n.d(e,"hasOwnProperty",function(){return p.v}),n.d(e,"inherits",function(){return p.y}),n.d(e,"inrange",function(){return p.z}),n.d(e,"isArray",function(){return p.A}),n.d(e,"isBoolean",function(){return p.B}),n.d(e,"isDate",function(){return p.C}),n.d(e,"isFunction",function(){return p.D}),n.d(e,"isNumber",function(){return p.E}),n.d(e,"isObject",function(){return p.F}),n.d(e,"isRegExp",function(){return p.G}),n.d(e,"isString",function(){return p.H}),n.d(e,"key",function(){return p.I}),n.d(e,"lerp",function(){return p.J}),n.d(e,"merge",function(){return p.L}),n.d(e,"pad",function(){return p.N}),n.d(e,"peek",function(){return p.S}),n.d(e,"repeat",function(){return p.U}),n.d(e,"span",function(){return p.V}),n.d(e,"splitAccessPath",function(){return p.W}),n.d(e,"stringValue",function(){return p.X}),n.d(e,"toBoolean",function(){return p.Y}),n.d(e,"toDate",function(){return p.Z}),n.d(e,"toNumber",function(){return p.ab}),n.d(e,"toString",function(){return p.cb}),n.d(e,"toSet",function(){return p.bb}),n.d(e,"truncate",function(){return p.db}),n.d(e,"visitArray",function(){return p.gb}),n.d(e,"loader",function(){return q}),n.d(e,"read",function(){return jn}),n.d(e,"inferType",function(){return J}),n.d(e,"inferTypes",function(){return K}),n.d(e,"typeParsers",function(){return Z}),n.d(e,"format",function(){return At}),n.d(e,"formats",function(){return kt}),n.d(e,"Bounds",function(){return to}),n.d(e,"Gradient",function(){return ro}),n.d(e,"GroupItem",function(){return ao}),n.d(e,"ResourceLoader",function(){return uo}),n.d(e,"Item",function(){return io}),n.d(e,"Scenegraph",function(){return Sl}),n.d(e,"Handler",function(){return jl}),n.d(e,"Renderer",function(){return Il}),n.d(e,"CanvasHandler",function(){return Ul}),n.d(e,"CanvasRenderer",function(){return Yl}),n.d(e,"SVGHandler",function(){return Jl}),n.d(e,"SVGRenderer",function(){return oc}),n.d(e,"SVGStringRenderer",function(){return bc}),n.d(e,"RenderType",function(){return Mc}),n.d(e,"renderModule",function(){return Sc}),n.d(e,"Marks",function(){return _l}),n.d(e,"boundClip",function(){return Ec}),n.d(e,"boundContext",function(){return vu}),n.d(e,"boundStroke",function(){return fu}),n.d(e,"boundItem",function(){return xl}),n.d(e,"boundMark",function(){return Al}),n.d(e,"pathCurves",function(){return Ss}),n.d(e,"pathSymbols",function(){return Us}),n.d(e,"pathRectangle",function(){return Xs}),n.d(e,"pathTrail",function(){return Js}),n.d(e,"pathParse",function(){return Os}),n.d(e,"pathRender",function(){return Ns}),n.d(e,"point",function(){return Fl}),n.d(e,"domCreate",function(){return Ol}),n.d(e,"domFind",function(){return Pl}),n.d(e,"domChild",function(){return Ll}),n.d(e,"domClear",function(){return Rl}),n.d(e,"openTag",function(){return tc}),n.d(e,"closeTag",function(){return ec}),n.d(e,"font",function(){return vl}),n.d(e,"fontFamily",function(){return pl}),n.d(e,"fontSize",function(){return fl}),n.d(e,"textMetrics",function(){return ol}),n.d(e,"resetSVGClipId",function(){return Iu}),n.d(e,"sceneEqual",function(){return Pc}),n.d(e,"pathEqual",function(){return Lc}),n.d(e,"sceneToJSON",function(){return Ml}),n.d(e,"sceneFromJSON",function(){return Tl}),n.d(e,"sceneZOrder",function(){return Au}),n.d(e,"sceneVisit",function(){return ku}),n.d(e,"scenePickVisit",function(){return Mu}),n.d(e,"Dataflow",function(){return tr}),n.d(e,"EventStream",function(){return j}),n.d(e,"Parameters",function(){return C}),n.d(e,"Pulse",function(){return qn}),n.d(e,"MultiPulse",function(){return Vn}),n.d(e,"Operator",function(){return L}),n.d(e,"Transform",function(){return rr}),n.d(e,"changeset",function(){return T}),n.d(e,"ingest",function(){return x}),n.d(e,"isTuple",function(){return y}),n.d(e,"definition",function(){return or}),n.d(e,"transform",function(){return sr}),n.d(e,"transforms",function(){return ar}),n.d(e,"tupleid",function(){return b}),n.d(e,"scale",function(){return fv}),n.d(e,"scheme",function(){return nm}),n.d(e,"schemeDiscretized",function(){return rm}),n.d(e,"interpolate",function(){return mv}),n.d(e,"interpolateRange",function(){return pv}),n.d(e,"timeInterval",function(){return om}),n.d(e,"utcInterval",function(){return sm}),n.d(e,"projection",function(){return qw}),n.d(e,"View",function(){return ZR}),n.d(e,"parse",function(){return xR}),n.d(e,"expressionFunction",function(){return tO}),n.d(e,"formatLocale",function(){return Dp}),n.d(e,"timeFormatLocale",function(){return Fn}),n.d(e,"runtime",function(){return PR}),n.d(e,"runtimeContext",function(){return RR}),Object(p.o)(ar,r,i,s,u,l,c,f,d,h)},,,function(t,e,n){"use strict";var r=n(9);var i=n(6),a=n(5),o=n(7),s=n(4),u=n(2),l=n.n(u),c=n(11),f=n(16),d=function(t){return void 0===t&&(t=""),t.split(" ").filter(Boolean)},h=function(t,e,n){null!=t&&n!==e&&(null!=e&&e.length>0&&function(t,e){d(e).forEach(function(e){s.DomUtil.removeClass(t,e)})}(t,e),null!=n&&n.length>0&&function(t,e){d(e).forEach(function(e){s.DomUtil.addClass(t,e)})}(t,n))};n.d(e,"a",function(){return g});var p=["children","className","id","style","useFlyTo","whenReady"],v=function(t){return Array.isArray(t)?[t[0],t[1]]:[t.lat,t.lon?t.lon:t.lng]},g=function(t){function e(e){var n;return n=t.call(this,e)||this,Object(o.a)(Object(i.a)(n),"className",void 0),Object(o.a)(Object(i.a)(n),"contextValue",void 0),Object(o.a)(Object(i.a)(n),"container",void 0),Object(o.a)(Object(i.a)(n),"viewport",{center:void 0,zoom:void 0}),Object(o.a)(Object(i.a)(n),"_ready",!1),Object(o.a)(Object(i.a)(n),"_updating",!1),Object(o.a)(Object(i.a)(n),"onViewportChange",function(){var t=n.leafletElement.getCenter();n.viewport={center:t?[t.lat,t.lng]:void 0,zoom:n.leafletElement.getZoom()},n.props.onViewportChange&&!n._updating&&n.props.onViewportChange(n.viewport)}),Object(o.a)(Object(i.a)(n),"onViewportChanged",function(){n.props.onViewportChanged&&!n._updating&&n.props.onViewportChanged(n.viewport)}),Object(o.a)(Object(i.a)(n),"bindContainer",function(t){n.container=t}),n.className=e.className,n}Object(a.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){var e=t.viewport,n=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["viewport"]);return e&&(e.center&&(n.center=e.center),"number"===typeof e.zoom&&(n.zoom=e.zoom)),new s.Map(this.container,n)},n.updateLeafletElement=function(t,e){this._updating=!0;var n=e.bounds,r=e.boundsOptions,i=e.boxZoom,a=e.center,o=e.className,s=e.doubleClickZoom,u=e.dragging,l=e.keyboard,c=e.maxBounds,f=e.scrollWheelZoom,d=e.tap,p=e.touchZoom,v=e.useFlyTo,g=e.viewport,m=e.zoom;if(h(this.container,t.className,o),g&&g!==t.viewport){var y=g.center?g.center:a,b=null==g.zoom?m:g.zoom;!0===v?this.leafletElement.flyTo(y,b,this.getZoomPanOptions(e)):this.leafletElement.setView(y,b,this.getZoomPanOptions(e))}else a&&this.shouldUpdateCenter(a,t.center)?!0===v?this.leafletElement.flyTo(a,m,this.getZoomPanOptions(e)):this.leafletElement.setView(a,m,this.getZoomPanOptions(e)):"number"===typeof m&&m!==t.zoom&&(null==t.zoom?this.leafletElement.setView(a,m,this.getZoomPanOptions(e)):this.leafletElement.setZoom(m,this.getZoomPanOptions(e)));c&&this.shouldUpdateBounds(c,t.maxBounds)&&this.leafletElement.setMaxBounds(c),n&&(this.shouldUpdateBounds(n,t.bounds)||r!==t.boundsOptions)&&(!0===v?this.leafletElement.flyToBounds(n,this.getFitBoundsOptions(e)):this.leafletElement.fitBounds(n,this.getFitBoundsOptions(e))),i!==t.boxZoom&&(!0===i?this.leafletElement.boxZoom.enable():this.leafletElement.boxZoom.disable()),s!==t.doubleClickZoom&&(!0===s?this.leafletElement.doubleClickZoom.enable():this.leafletElement.doubleClickZoom.disable()),u!==t.dragging&&(!0===u?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),l!==t.keyboard&&(!0===l?this.leafletElement.keyboard.enable():this.leafletElement.keyboard.disable()),f!==t.scrollWheelZoom&&(!0===f||"string"===typeof f?(this.leafletElement.options.scrollWheelZoom=f,this.leafletElement.scrollWheelZoom.enable()):this.leafletElement.scrollWheelZoom.disable()),d!==t.tap&&(!0===d?this.leafletElement.tap.enable():this.leafletElement.tap.disable()),p!==t.touchZoom&&(!0===p||"string"===typeof p?(this.leafletElement.options.touchZoom=p,this.leafletElement.touchZoom.enable()):this.leafletElement.touchZoom.disable()),this._updating=!1},n.getZoomPanOptions=function(t){return{animate:t.animate,duration:t.duration,easeLinearity:t.easeLinearity,noMoveStart:t.noMoveStart}},n.getFitBoundsOptions=function(t){var e=this.getZoomPanOptions(t);return Object(r.a)({},e,t.boundsOptions)},n.componentDidMount=function(){var e=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.keys(t).reduce(function(e,r){return-1===n.indexOf(r)&&(e[r]=t[r]),e},{})}.apply(void 0,[this.props].concat(p));this.leafletElement=this.createLeafletElement(e),this.leafletElement.on("move",this.onViewportChange),this.leafletElement.on("moveend",this.onViewportChanged),null!=e.bounds&&this.leafletElement.fitBounds(e.bounds,this.getFitBoundsOptions(e)),this.contextValue={layerContainer:this.leafletElement,map:this.leafletElement},t.prototype.componentDidMount.call(this),this.forceUpdate()},n.componentDidUpdate=function(e){!1===this._ready&&(this._ready=!0,this.props.whenReady&&this.leafletElement.whenReady(this.props.whenReady)),t.prototype.componentDidUpdate.call(this,e),this.updateLeafletElement(e,this.props)},n.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.leafletElement.off("move",this.onViewportChange),this.leafletElement.off("moveend",this.onViewportChanged),!0===this.props.preferCanvas?(this.leafletElement._initEvents(!0),this.leafletElement._stop()):this.leafletElement.remove()},n.shouldUpdateCenter=function(t,e){return!e||(t=v(t),e=v(e),t[0]!==e[0]||t[1]!==e[1])},n.shouldUpdateBounds=function(t,e){return!e||!Object(s.latLngBounds)(t).equals(Object(s.latLngBounds)(e))},n.render=function(){return l.a.createElement("div",{className:this.className,id:this.props.id,ref:this.bindContainer,style:this.props.style},this.contextValue?l.a.createElement(c.a,{value:this.contextValue},this.props.children):null)},e}(f.a)},function(t,e,n){"use strict";var r=n(5),i=n(4),a=n(11),o=n(9),s=n(28),u=n.n(s),l=n(17);var c=["stroke","color","weight","opacity","lineCap","lineJoin","dashArray","dashOffset","fill","fillColor","fillOpacity","fillRule","bubblingMouseEvents","renderer","className","interactive","pane","attribution"],f=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new i.GeoJSON(t.data,this.getOptions(t))},n.updateLeafletElement=function(t,e){"function"===typeof e.style?this.leafletElement.setStyle(e.style):this.setStyleIfChanged(t,e)},e}(function(t){function e(e){var n;return null==(n=t.call(this,e)||this).contextValue&&(n.contextValue=Object(o.a)({},e.leaflet,{popupContainer:n.leafletElement})),n}Object(r.a)(e,t);var n=e.prototype;return n.componentDidUpdate=function(e){t.prototype.componentDidUpdate.call(this,e),this.setStyleIfChanged(e,this.props)},n.getPathOptions=function(t){return e=t,c.reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{});var e},n.setStyle=function(t){void 0===t&&(t={}),this.leafletElement.setStyle(t)},n.setStyleIfChanged=function(t,e){var n=this.getPathOptions(e);u()(n,this.getPathOptions(t))||this.setStyle(n)},e}(l.a));e.a=Object(a.b)(f)},function(t,e,n){"use strict";var r=n(5),i=n(4),a=n(11),o=n(9),s=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new i.TileLayer(t.url,this.getOptions(t))},n.updateLeafletElement=function(e,n){t.prototype.updateLeafletElement.call(this,e,n),n.url!==e.url&&this.leafletElement.setUrl(n.url)},e}(function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new i.GridLayer(this.getOptions(t))},n.updateLeafletElement=function(t,e){var n=e.opacity,r=e.zIndex;n!==t.opacity&&this.leafletElement.setOpacity(n),r!==t.zIndex&&this.leafletElement.setZIndex(r)},n.getOptions=function(e){var n=t.prototype.getOptions.call(this,e);return null==e.leaflet.map?n:Object(o.a)({maxZoom:e.leaflet.map.options.maxZoom,minZoom:e.leaflet.map.options.minZoom},n)},n.render=function(){return null},e}(n(17).a));e.a=Object(a.b)(s)}]]);
//# sourceMappingURL=2.e2aff063.chunk.js.map